/*! jQuery v3.6.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
/*!
 * Bootstrap v3.4.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under the MIT license
 */
if(function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var n=[],r=Object.getPrototypeOf,i=n.slice,o=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},a=n.push,s=n.indexOf,l={},u=l.toString,c=l.hasOwnProperty,h=c.toString,f=h.call(Object),p={},d=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},g=function(t){return null!=t&&t===t.window},m=t.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function y(t,e,n){var r,i,o=(n=n||m).createElement("script");if(o.text=t,e)for(r in v)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[u.call(t)]||"object":typeof t}var w="3.6.1",x=function(t,e){return new x.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,n=b(t);return!d(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}x.fn=x.prototype={jquery:w,constructor:x,length:0,toArray:function(){return i.call(this)},get:function(t){return null==t?i.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(x.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||d(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(u&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||x.isPlainObject(n)?n:{},i=!1,a[e]=x.extend(u,o,r)):void 0!==r&&(a[e]=r));return a},x.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==u.call(t)||(e=r(t))&&("function"!=typeof(n=c.call(e,"constructor")&&e.constructor)||h.call(n)!==f))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){y(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(S(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?x.merge(n,"string"==typeof t?[t]:t):a.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:s.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,a=0,s=[];if(S(t))for(r=t.length;a<r;a++)null!=(i=e(t[a],a,n))&&s.push(i);else for(a in t)null!=(i=e(t[a],a,n))&&s.push(i);return o(s)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){l["[object "+e+"]"]=e.toLowerCase()}));var _=function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w="sizzle"+1*new Date,x=t.document,S=0,_=0,k=lt(),E=lt(),M=lt(),T=lt(),O=function(t,e){return t===e&&(h=!0),0},P={}.hasOwnProperty,C=[],I=C.pop,A=C.push,L=C.push,R=C.slice,j=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",$="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+$+"*("+F+")(?:"+$+"*([*^$|!~]?=)"+$+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+$+"*\\]",G=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",U=new RegExp($+"+","g"),B=new RegExp("^"+$+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$+"+$","g"),z=new RegExp("^"+$+"*,"+$+"*"),V=new RegExp("^"+$+"*([>+~]|"+$+")"+$+"*"),q=new RegExp($+"|>"),H=new RegExp(G),W=new RegExp("^"+F+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+G),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+$+"*(even|odd|(([+-]|)(\\d*)n|)"+$+"*(?:([+-]|)"+$+"*(\\d+)|))"+$+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+$+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$+"*((?:-\\d)?\\d*)"+$+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){f()},at=wt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{L.apply(C=R.call(x.childNodes),x.childNodes),C[x.childNodes.length].nodeType}catch(e){L={apply:C.length?function(t,e){A.apply(t,R.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function st(t,e,r,i){var o,s,u,c,h,d,v,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return r;if(!i&&(f(e),e=e||p,g)){if(11!==x&&(h=Q.exec(t)))if(o=h[1]){if(9===x){if(!(u=e.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&b(e,u)&&u.id===o)return r.push(u),r}else{if(h[2])return L.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return L.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!T[t+" "]&&(!m||!m.test(t))&&(1!==x||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===x&&(q.test(t)||V.test(t))){for((y=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=w)),s=(d=a(t)).length;s--;)d[s]=(c?"#"+c:":scope")+" "+bt(d[s]);v=d.join(",")}try{return L.apply(r,y.querySelectorAll(v)),r}catch(e){T(t,!0)}finally{c===w&&e.removeAttribute("id")}}}return l(t.replace(B,"$1"),e,r,i)}function lt(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ut(t){return t[w]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ft(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ut((function(e){return e=+e,ut((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||n&&n.nodeName||"HTML")},f=st.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:x;return a!=p&&9===a.nodeType&&a.documentElement&&(d=(p=a).documentElement,g=!o(p),x!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.scope=ct((function(t){return d.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(p.getElementsByClassName),n.getById=ct((function(t){return d.appendChild(t).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=J.test(p.querySelectorAll))&&(ct((function(t){var e;d.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+$+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+$+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+$+"*name"+$+"*="+$+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+$+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",G)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(d.compareDocumentPosition),b=e||J.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},O=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==p||t.ownerDocument==x&&b(x,t)?-1:e==p||e.ownerDocument==x&&b(x,e)?1:c?j(c,t)-j(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t==p?-1:e==p?1:i?-1:o?1:c?j(c,t)-j(c,e):0;if(i===o)return ft(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ft(a[r],s[r]):a[r]==x?-1:s[r]==x?1:0}),p},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&g&&!T[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){T(e,!0)}return 0<st(e,p,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!=p&&f(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=p&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&P.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(rt,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(O),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return c=null,t},i=st.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&H.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+$+")"+t+"("+$+"|$)"))&&k(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&-1<i.indexOf(n):"$="===e?n&&i.slice(-n.length)===n:"~="===e?-1<(" "+i.replace(U," ")+" ").indexOf(n):"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,f,p,d,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(m){if(o){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&y){for(b=(p=(u=(c=(h=(f=m)[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===S&&u[1])&&u[2],f=p&&m.childNodes[p];f=++p&&f&&f[g]||(b=p=0)||d.pop();)if(1===f.nodeType&&++b&&f===e){c[t]=[S,p,b];break}}else if(y&&(b=p=(u=(c=(h=(f=e)[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===S&&u[1]),!1===b)for(;(f=++p&&f&&f[g]||(b=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((c=(h=f[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]=[S,b]),f!==e)););return(b-=i)===r||b%r==0&&0<=b/r}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return i[w]?i(e):1<i.length?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ut((function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=j(t,o[a])]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:ut((function(t){var e=[],n=[],r=s(t.replace(B,"$1"));return r[w]?ut((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:ut((function(t){return function(e){return 0<st(t,e).length}})),contains:ut((function(t){return t=t.replace(et,nt),function(e){return-1<(e.textContent||i(e)).indexOf(t)}})),lang:ut((function(t){return W.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t})),gt:mt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=dt(e);function yt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function wt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=_++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,l){var u,c,h,f=[S,s];if(l){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(c=(h=e[w]||(e[w]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((u=c[o])&&u[0]===S&&u[1]===s)return f[2]=u[2];if((c[o]=f)[2]=t(e,n,l))return!0}return!1}}function xt(t){return 1<t.length?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function St(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),u&&e.push(s)));return a}function _t(t,e,n,r,i,o){return r&&!r[w]&&(r=_t(r)),i&&!i[w]&&(i=_t(i,o)),ut((function(o,a,s,l){var u,c,h,f=[],p=[],d=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)st(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:St(g,f,t,s,l),v=n?i||(o?t:d||r)?[]:a:m;if(n&&n(m,v,s,l),r)for(u=St(v,p),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(v[p[c]]=!(m[p[c]]=h));if(o){if(i||t){if(i){for(u=[],c=v.length;c--;)(h=v[c])&&u.push(m[c]=h);i(null,v=[],u,l)}for(c=v.length;c--;)(h=v[c])&&-1<(u=i?j(o,h):f[c])&&(o[u]=!(a[u]=h))}}else v=St(v===a?v.splice(d,v.length):v),i?i(null,a,v,l):L.apply(a,v)}))}function kt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],l=a?1:0,c=wt((function(t){return t===e}),s,!0),h=wt((function(t){return-1<j(e,t)}),s,!0),f=[function(t,n,r){var i=!a&&(r||n!==u)||((e=n).nodeType?c(t,n,r):h(t,n,r));return e=null,i}];l<o;l++)if(n=r.relative[t[l].type])f=[wt(xt(f),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[w]){for(i=++l;i<o&&!r.relative[t[i].type];i++);return _t(1<l&&xt(f),1<l&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(B,"$1"),n,l<i&&kt(t.slice(l,i)),i<o&&kt(t=t.slice(i)),i<o&&bt(t))}f.push(n)}return xt(f)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,a=st.tokenize=function(t,e){var n,i,o,a,s,l,u,c=E[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=r.preFilter;s;){for(a in n&&!(i=z.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length)),r.filter)!(i=K[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):E(t,l).slice(0)},s=st.compile=function(t,e){var n,i,o,s,l,c,h=[],d=[],m=M[t+" "];if(!m){for(e||(e=a(t)),n=e.length;n--;)(m=kt(e[n]))[w]?h.push(m):d.push(m);(m=M(t,(i=d,s=0<(o=h).length,l=0<i.length,c=function(t,e,n,a,c){var h,d,m,v=0,y="0",b=t&&[],w=[],x=u,_=t||l&&r.find.TAG("*",c),k=S+=null==x?1:Math.random()||.1,E=_.length;for(c&&(u=e==p||e||c);y!==E&&null!=(h=_[y]);y++){if(l&&h){for(d=0,e||h.ownerDocument==p||(f(h),n=!g);m=i[d++];)if(m(h,e||p,n)){a.push(h);break}c&&(S=k)}s&&((h=!m&&h)&&v--,t&&b.push(h))}if(v+=y,s&&y!==v){for(d=0;m=o[d++];)m(b,w,e,n);if(t){if(0<v)for(;y--;)b[y]||w[y]||(w[y]=I.call(a));w=St(w)}L.apply(a,w),c&&!t&&0<w.length&&1<v+o.length&&st.uniqueSort(a)}return c&&(S=k,u=x),b},s?ut(c):c))).selector=t}return m},l=st.select=function(t,e,n,i){var o,l,u,c,h,f="function"==typeof t&&t,p=!i&&a(t=f.selector||t);if(n=n||[],1===p.length){if(2<(l=p[0]=p[0].slice(0)).length&&"ID"===(u=l[0]).type&&9===e.nodeType&&g&&r.relative[l[1].type]){if(!(e=(r.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=K.needsContext.test(t)?0:l.length;o--&&(u=l[o],!r.relative[c=u.type]);)if((h=r.find[c])&&(i=h(u.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(o,1),!(t=i.length&&bt(l)))return L.apply(n,i),n;break}}return(f||s(t,p))(i,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=w.split("").sort(O).join("")===w,n.detectDuplicates=!!h,f(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ht(N,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),st}(t);x.find=_,x.expr=_.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=_.uniqueSort,x.text=_.getText,x.isXMLDoc=_.isXML,x.contains=_.contains,x.escapeSelector=_.escape;var k=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&x(t).is(n))break;r.push(t)}return r},E=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},M=x.expr.match.needsContext;function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(t,e,n){return d(e)?x.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?x.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?x.grep(t,(function(t){return-1<s.call(e,t)!==n})):x.filter(e,t,n)}x.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?x.find.matchesSelector(r,t)?[r]:[]:x.find.matches(t,x.grep(e,(function(t){return 1===t.nodeType})))},x.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(x(t).filter((function(){for(e=0;e<r;e++)if(x.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)x.find(t,i[e],n);return 1<r?x.uniqueSort(n):n},filter:function(t){return this.pushStack(P(this,t||[],!1))},not:function(t){return this.pushStack(P(this,t||[],!0))},is:function(t){return!!P(this,"string"==typeof t&&M.test(t)?x(t):t||[],!1).length}});var C,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||C,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:I.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),O.test(r[1])&&x.isPlainObject(e))for(r in e)d(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=m.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):d(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,C=x(m);var A=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&x(t);if(!M.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&x.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?x.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?s.call(x(t),this[0]):s.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return E((t.parentNode||{}).firstChild,t)},children:function(t){return E(t.firstChild)},contents:function(t){return null!=t.contentDocument&&r(t.contentDocument)?t.contentDocument:(T(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},(function(t,e){x.fn[t]=function(n,r){var i=x.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),1<this.length&&(L[t]||x.uniqueSort(i),A.test(t)&&i.reverse()),this.pushStack(i)}}));var j=/[^\x20\t\r\n\f]+/g;function N(t){return t}function $(t){throw t}function F(t,e,n,r){var i;try{t&&d(i=t.promise)?i.call(t).done(e).fail(n):t&&d(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){var e,n;t="string"==typeof t?(e=t,n={},x.each(e.match(j)||[],(function(t,e){n[e]=!0})),n):x.extend({},t);var r,i,o,a,s=[],l=[],u=-1,c=function(){for(a=a||t.once,o=r=!0;l.length;u=-1)for(i=l.shift();++u<s.length;)!1===s[u].apply(i[0],i[1])&&t.stopOnFalse&&(u=s.length,i=!1);t.memory||(i=!1),r=!1,a&&(s=i?[]:"")},h={add:function(){return s&&(i&&!r&&(u=s.length-1,l.push(i)),function e(n){x.each(n,(function(n,r){d(r)?t.unique&&h.has(r)||s.push(r):r&&r.length&&"string"!==b(r)&&e(r)}))}(arguments),i&&!r&&c()),this},remove:function(){return x.each(arguments,(function(t,e){for(var n;-1<(n=x.inArray(e,s,n));)s.splice(n,1),n<=u&&u--})),this},has:function(t){return t?-1<x.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=i="",this},disabled:function(){return!s},lock:function(){return a=l=[],i||r||(s=i=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),r||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},x.extend({Deferred:function(e){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return x.Deferred((function(e){x.each(n,(function(n,r){var i=d(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&d(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(e,r,i){var o=0;function a(e,n,r,i){return function(){var s=this,l=arguments,u=function(){var t,u;if(!(e<o)){if((t=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");u=t&&("object"==typeof t||"function"==typeof t)&&t.then,d(u)?i?u.call(t,a(o,n,N,i),a(o,n,$,i)):(o++,u.call(t,a(o,n,N,i),a(o,n,$,i),a(o,n,N,n.notifyWith))):(r!==N&&(s=void 0,l=[t]),(i||n.resolveWith)(s,l))}},c=i?u:function(){try{u()}catch(u){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(u,c.stackTrace),o<=e+1&&(r!==$&&(s=void 0,l=[u]),n.rejectWith(s,l))}};e?c():(x.Deferred.getStackHook&&(c.stackTrace=x.Deferred.getStackHook()),t.setTimeout(c))}}return x.Deferred((function(t){n[0][3].add(a(0,t,d(i)?i:N,t.notifyWith)),n[1][3].add(a(0,t,d(e)?e:N)),n[2][3].add(a(0,t,d(r)?r:$))})).promise()},promise:function(t){return null!=t?x.extend(t,i):i}},o={};return x.each(n,(function(t,e){var a=e[2],s=e[5];i[e[1]]=a.add,s&&a.add((function(){r=s}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),o=i.call(arguments),a=x.Deferred(),s=function(t){return function(n){r[t]=this,o[t]=1<arguments.length?i.call(arguments):n,--e||a.resolveWith(r,o)}};if(e<=1&&(F(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||d(o[n]&&o[n].then)))return a.then();for(;n--;)F(o[n],s(n),a.reject);return a.promise()}});var D=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&D.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout((function(){throw e}))};var G=x.Deferred();function U(){m.removeEventListener("DOMContentLoaded",U),t.removeEventListener("load",U),x.ready()}x.fn.ready=function(t){return G.then(t).catch((function(t){x.readyException(t)})),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0)!==t&&0<--x.readyWait||G.resolveWith(m,[x])}}),x.ready.then=G.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?t.setTimeout(x.ready):(m.addEventListener("DOMContentLoaded",U),t.addEventListener("load",U));var B=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===b(n))for(s in i=!0,n)B(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,d(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(x(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},z=/^-ms-/,V=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function H(t){return t.replace(z,"ms-").replace(V,q)}var W=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function K(){this.expando=x.expando+K.uid++}K.uid=1,K.prototype={cache:function(t){var e=t[this.expando];return e||(e={},W(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[H(e)]=n;else for(r in e)i[H(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][H(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(H):(e=H(e))in r?[e]:e.match(j)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||x.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var Y=new K,X=new K,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:Z.test(i)?JSON.parse(i):i)}catch(t){}X.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return X.hasData(t)||Y.hasData(t)},data:function(t,e,n){return X.access(t,e,n)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,n){return Y.access(t,e,n)},_removeData:function(t,e){Y.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=X.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=H(r.slice(5)),Q(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){X.set(this,t)})):B(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=X.get(o,t))||void 0!==(n=Q(o,t))?n:void 0;this.each((function(){X.set(this,t,e)}))}),null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each((function(){X.remove(this,t)}))}}),x.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Y.get(t,e),n&&(!r||Array.isArray(n)?r=Y.access(t,e,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=x.queue(t,e),r=n.length,i=n.shift(),o=x._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){x.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Y.get(t,n)||Y.access(t,n,{empty:x.Callbacks("once memory").add((function(){Y.remove(t,[e+"queue",n])}))})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each((function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){x.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=x.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Y.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=m.documentElement,it=function(t){return x.contains(t.ownerDocument,t)},ot={composed:!0};rt.getRootNode&&(it=function(t){return x.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&it(t)&&"none"===x.css(t,"display")};function st(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return x.css(t,e,"")},l=s(),u=n&&n[3]||(x.cssNumber[e]?"":"px"),c=t.nodeType&&(x.cssNumber[e]||"px"!==u&&+l)&&et.exec(x.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)x.style(t,e,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,x.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var lt={};function ut(t,e){for(var n,r,i,o,a,s,l,u=[],c=0,h=t.length;c<h;c++)(r=t[c]).style&&(n=r.style.display,e?("none"===n&&(u[c]=Y.get(r,"display")||null,u[c]||(r.style.display="")),""===r.style.display&&at(r)&&(u[c]=(l=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(l=lt[s])||(o=a.body.appendChild(a.createElement(s)),l=x.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),lt[s]=l)))):"none"!==n&&(u[c]="none",Y.set(r,"display",n)));for(c=0;c<h;c++)null!=u[c]&&(t[c].style.display=u[c]);return t}x.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){at(this)?x(this).show():x(this).hide()}))}});var ct,ht,ft=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dt=/^$|^module$|\/(?:java|ecma)script/i;ct=m.createDocumentFragment().appendChild(m.createElement("div")),(ht=m.createElement("input")).setAttribute("type","radio"),ht.setAttribute("checked","checked"),ht.setAttribute("name","t"),ct.appendChild(ht),p.checkClone=ct.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ct.cloneNode(!0).lastChild.defaultValue,ct.innerHTML="<option></option>",p.option=!!ct.lastChild;var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?x.merge([t],n):n}function vt(t,e){for(var n=0,r=t.length;n<r;n++)Y.set(t[n],"globalEval",!e||Y.get(e[n],"globalEval"))}gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,p.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);var yt=/<|&#?\w+;/;function bt(t,e,n,r,i){for(var o,a,s,l,u,c,h=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if((o=t[p])||0===o)if("object"===b(o))x.merge(f,o.nodeType?[o]:o);else if(yt.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(pt.exec(o)||["",""])[1].toLowerCase(),l=gt[s]||gt._default,a.innerHTML=l[1]+x.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;x.merge(f,a.childNodes),(a=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",p=0;o=f[p++];)if(r&&-1<x.inArray(o,r))i&&i.push(o);else if(u=it(o),a=mt(h.appendChild(o),"script"),u&&vt(a),n)for(c=0;o=a[c++];)dt.test(o.type||"")&&n.push(o);return h}var wt=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function St(){return!1}function _t(t,e){return t===function(){try{return m.activeElement}catch(t){}}()==("focus"===e)}function kt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)kt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=St;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return x().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),t.each((function(){x.event.add(this,e,i,r,n)}))}function Et(t,e,n){n?(Y.set(t,e,!1),x.event.add(t,e,{namespace:!1,handler:function(t){var r,o,a=Y.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(x.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=i.call(arguments),Y.set(this,e,a),r=n(this,e),this[e](),a!==(o=Y.get(this,e))||r?Y.set(this,e,!1):o={},a!==o)return t.stopImmediatePropagation(),t.preventDefault(),o&&o.value}else a.length&&(Y.set(this,e,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Y.get(t,e)&&x.event.add(t,e,xt)}x.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,h,f,p,d,g,m=Y.get(t);if(W(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&x.find.matchesSelector(rt,i),n.guid||(n.guid=x.guid++),(l=m.events)||(l=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(j)||[""]).length;u--;)p=g=(s=wt.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),p&&(h=x.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=x.event.special[p]||{},c=x.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,d,a)||t.addEventListener&&t.addEventListener(p,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),x.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,h,f,p,d,g,m=Y.hasData(t)&&Y.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(j)||[""]).length;u--;)if(p=g=(s=wt.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),p){for(h=x.event.special[p]||{},f=l[p=(r?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,d,m.handle)||x.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)x.event.remove(t,p+e[u],n,r,!0);x.isEmptyObject(l)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),l=x.event.fix(t),u=(Y.get(this,"events")||Object.create(null))[l.type]||[],c=x.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=x.event.handlers.call(this,l,u),e=0;(i=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,r,i,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?-1<x(i,this).index(u):x.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:d(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ft.test(e.type)&&e.click&&T(e,"input")&&Et(e,"click",xt),!1},trigger:function(t){var e=this||t;return ft.test(e.type)&&e.click&&T(e,"input")&&Et(e,"click"),!0},_default:function(t){var e=t.target;return ft.test(e.type)&&e.click&&T(e,"input")&&Y.get(e,"click")||T(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},(function(t,e){x.event.special[t]={setup:function(){return Et(this,t,_t),!1},trigger:function(){return Et(this,t),!0},_default:function(e){return Y.get(e.target,t)},delegateType:e}})),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||x.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),x.fn.extend({on:function(t,e,n,r){return kt(this,t,e,n,r)},one:function(t,e,n,r){return kt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,x(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each((function(){x.event.remove(this,t,n,e)}))}});var Mt=/<script|<style|<link/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Pt(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Ct(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function It(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function At(t,e){var n,r,i,o,a,s;if(1===e.nodeType){if(Y.hasData(t)&&(s=Y.get(t).events))for(i in Y.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)x.event.add(e,i,s[i][n]);X.hasData(t)&&(o=X.access(t),a=x.extend({},o),X.set(e,a))}}function Lt(t,e,n,r){e=o(e);var i,a,s,l,u,c,h=0,f=t.length,g=f-1,m=e[0],v=d(m);if(v||1<f&&"string"==typeof m&&!p.checkClone&&Tt.test(m))return t.each((function(i){var o=t.eq(i);v&&(e[0]=m.call(this,i,o.html())),Lt(o,e,n,r)}));if(f&&(a=(i=bt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(l=(s=x.map(mt(i,"script"),Ct)).length;h<f;h++)u=i,h!==g&&(u=x.clone(u,!0,!0),l&&x.merge(s,mt(u,"script"))),n.call(t[h],u,h);if(l)for(c=s[s.length-1].ownerDocument,x.map(s,It),h=0;h<l;h++)u=s[h],dt.test(u.type||"")&&!Y.access(u,"globalEval")&&x.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?x._evalUrl&&!u.noModule&&x._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):y(u.textContent.replace(Ot,""),u,c))}return t}function Rt(t,e,n){for(var r,i=e?x.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||x.cleanData(mt(r)),r.parentNode&&(n&&it(r)&&vt(mt(r,"script")),r.parentNode.removeChild(r));return t}x.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s,l,u,c=t.cloneNode(!0),h=it(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(a=mt(c),r=0,i=(o=mt(t)).length;r<i;r++)s=o[r],"input"===(u=(l=a[r]).nodeName.toLowerCase())&&ft.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||mt(t),a=a||mt(c),r=0,i=o.length;r<i;r++)At(o[r],a[r]);else At(t,c);return 0<(a=mt(c,"script")).length&&vt(a,!h&&mt(t,"script")),c},cleanData:function(t){for(var e,n,r,i=x.event.special,o=0;void 0!==(n=t[o]);o++)if(W(n)){if(e=n[Y.expando]){if(e.events)for(r in e.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,e.handle);n[Y.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Rt(this,t,!0)},remove:function(t){return Rt(this,t)},text:function(t){return B(this,(function(t){return void 0===t?x.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Lt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)}))},prepend:function(){return Lt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Lt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Lt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return x.clone(this,t,e)}))},html:function(t){return B(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!gt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Lt(this,arguments,(function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(mt(this)),n&&n.replaceChild(e,this))}),t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){x.fn[t]=function(t){for(var n,r=[],i=x(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),x(i[s])[e](n),a.apply(r,n.get());return this.pushStack(r)}}));var jt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Nt=/^--/,$t=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Ft=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Dt=new RegExp(nt.join("|"),"i"),Gt="[\\x20\\t\\r\\n\\f]",Ut=new RegExp("^"+Gt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Gt+"+$","g");function Bt(t,e,n){var r,i,o,a,s=Nt.test(e),l=t.style;return(n=n||$t(t))&&(a=n.getPropertyValue(e)||n[e],s&&(a=a.replace(Ut,"$1")),""!==a||it(t)||(a=x.style(t,e)),!p.pixelBoxStyles()&&jt.test(a)&&Dt.test(e)&&(r=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=r,l.minWidth=i,l.maxWidth=o)),void 0!==a?a+"":a}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(u).appendChild(c);var e=t.getComputedStyle(c);r="1%"!==e.top,l=12===n(e.marginLeft),c.style.right="60%",a=36===n(e.right),i=36===n(e.width),c.style.position="absolute",o=12===n(c.offsetWidth/3),rt.removeChild(u),c=null}}function n(t){return Math.round(parseFloat(t))}var r,i,o,a,s,l,u=m.createElement("div"),c=m.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===c.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,n,r,i;return null==s&&(e=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",rt.appendChild(e).appendChild(n).appendChild(r),i=t.getComputedStyle(n),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,rt.removeChild(e)),s}}))}();var Vt=["Webkit","Moz","ms"],qt=m.createElement("div").style,Ht={};function Wt(t){return x.cssProps[t]||Ht[t]||(t in qt?t:Ht[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Vt.length;n--;)if((t=Vt[n]+e)in qt)return t}(t)||t)}var Kt=/^(none|table(?!-c[ea]).+)/,Yt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"};function Zt(t,e,n){var r=et.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Jt(t,e,n,r,i,o){var a="width"===e?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=x.css(t,n+nt[a],!0,i)),r?("content"===n&&(l-=x.css(t,"padding"+nt[a],!0,i)),"margin"!==n&&(l-=x.css(t,"border"+nt[a]+"Width",!0,i))):(l+=x.css(t,"padding"+nt[a],!0,i),"padding"!==n?l+=x.css(t,"border"+nt[a]+"Width",!0,i):s+=x.css(t,"border"+nt[a]+"Width",!0,i));return!r&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function Qt(t,e,n){var r=$t(t),i=(!p.boxSizingReliable()||n)&&"border-box"===x.css(t,"boxSizing",!1,r),o=i,a=Bt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(jt.test(a)){if(!n)return a;a="auto"}return(!p.boxSizingReliable()&&i||!p.reliableTrDimensions()&&T(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===x.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===x.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+Jt(t,e,n||(i?"border":"content"),o,r,a)+"px"}function te(t,e,n,r,i){return new te.prototype.init(t,e,n,r,i)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Bt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=H(e),l=Nt.test(e),u=t.style;if(l||(e=Wt(s)),a=x.cssHooks[e]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e];"string"==(o=typeof n)&&(i=et.exec(n))&&i[1]&&(n=st(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(x.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,r){var i,o,a,s=H(e);return Nt.test(e)||(e=Wt(s)),(a=x.cssHooks[e]||x.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Bt(t,e,r)),"normal"===i&&e in Xt&&(i=Xt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),x.each(["height","width"],(function(t,e){x.cssHooks[e]={get:function(t,n,r){if(n)return!Kt.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Qt(t,e,r):Ft(t,Yt,(function(){return Qt(t,e,r)}))},set:function(t,n,r){var i,o=$t(t),a=!p.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===x.css(t,"boxSizing",!1,o),l=r?Jt(t,e,r,s,o):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Jt(t,e,"border",!1,o)-.5)),l&&(i=et.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),Zt(0,n,l)}}})),x.cssHooks.marginLeft=zt(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Bt(t,"marginLeft"))||t.getBoundingClientRect().left-Ft(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),x.each({margin:"",padding:"",border:"Width"},(function(t,e){x.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+nt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(x.cssHooks[t+e].set=Zt)})),x.fn.extend({css:function(t,e){return B(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=$t(t),i=e.length;a<i;a++)o[e[a]]=x.css(t,e[a],!1,r);return o}return void 0!==n?x.style(t,e,n):x.css(t,e)}),t,e,1<arguments.length)}}),((x.Tween=te).prototype={constructor:te,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,n=te.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):te.propHooks._default.set(this),this}}).init.prototype=te.prototype,(te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||!x.cssHooks[t.prop]&&null==t.elem.style[Wt(t.prop)]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=te.prototype.init,x.fx.step={};var ee,ne,re,ie,oe=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function se(){ne&&(!1===m.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(se):t.setTimeout(se,x.fx.interval),x.fx.tick())}function le(){return t.setTimeout((function(){ee=void 0})),ee=Date.now()}function ue(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=nt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ce(t,e,n){for(var r,i=(he.tweeners[e]||[]).concat(he.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function he(t,e,n){var r,i,o=0,a=he.prefilters.length,s=x.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var e=ee||le(),n=Math.max(0,u.startTime+u.duration-e),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(t,[u,r,n]),r<1&&a?n:(a||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:ee||le(),duration:n.duration,tweens:[],createTween:function(e,n){var r=x.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=H(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);o<a;o++)if(r=he.prefilters[o].call(u,t,c,u.opts))return d(r.stop)&&(x._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return x.map(c,ce,u),d(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}x.Animation=x.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){d(t)?(e=t,t=["*"]):t=t.match(j);for(var n,r=0,i=t.length;r<i;r++)n=t[r],he.tweeners[n]=he.tweeners[n]||[],he.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,l,u,c,h="width"in e||"height"in e,f=this,p={},d=t.style,g=t.nodeType&&at(t),m=Y.get(t,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,x.queue(t,"fx").length||a.empty.fire()}))}))),e)if(i=e[r],oe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}p[r]=m&&m[r]||x.style(t,r)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(p))for(r in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(u=m&&m.display)&&(u=Y.get(t,"display")),"none"===(c=x.css(t,"display"))&&(u?c=u:(ut([t],!0),u=t.style.display||u,c=x.css(t,"display"),ut([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===x.css(t,"float")&&(l||(f.done((function(){d.display=u})),null==u&&(c=d.display,u="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=Y.access(t,"fxshow",{display:u}),o&&(m.hidden=!g),g&&ut([t],!0),f.done((function(){for(r in g||ut([t]),Y.remove(t,"fxshow"),p)x.style(t,r,p[r])}))),l=ce(g?m[r]:0,r,f),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),x.speed=function(t,e,n){var r=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||d(t)&&t,duration:t,easing:n&&e||e&&!d(e)&&e};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){d(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=x.isEmptyObject(t),o=x.speed(e,n,r),a=function(){var e=he(this,x.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=x.timers,a=Y.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ae.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||x.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=Y.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),x.each(["toggle","show","hide"],(function(t,e){var n=x.fn[e];x.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,r,i)}})),x.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){x.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(ee=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),ee=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ne||(ne=!0,se())},x.fx.stop=function(){ne=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,n=n||"fx",this.queue(n,(function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}}))},re=m.createElement("input"),ie=m.createElement("select").appendChild(m.createElement("option")),re.type="checkbox",p.checkOn=""!==re.value,p.optSelected=ie.selected,(re=m.createElement("input")).value="t",re.type="radio",p.radioValue="t"===re.value;var fe,pe=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return B(this,x.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each((function(){x.removeAttr(this,t)}))}}),x.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?x.prop(t,e,n):(1===o&&x.isXMLDoc(t)||(i=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?fe:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=x.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&T(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(j);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),fe={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=pe[e]||x.find.attr;pe[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=pe[a],pe[a]=i,i=null!=n(t,e,r)?a:null,pe[a]=o),i}}));var de=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;function me(t){return(t.match(j)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}x.fn.extend({prop:function(t,e){return B(this,x.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each((function(){delete this[x.propFix[t]||t]}))}}),x.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(t)||(e=x.propFix[e]||e,i=x.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){x.propFix[this.toLowerCase()]=this})),x.fn.extend({addClass:function(t){var e,n,r,i,o,a;return d(t)?this.each((function(e){x(this).addClass(t.call(this,e,ve(this)))})):(e=ye(t)).length?this.each((function(){if(r=ve(this),n=1===this.nodeType&&" "+me(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=me(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(t){var e,n,r,i,o,a;return d(t)?this.each((function(e){x(this).removeClass(t.call(this,e,ve(this)))})):arguments.length?(e=ye(t)).length?this.each((function(){if(r=ve(this),n=1===this.nodeType&&" "+me(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];-1<n.indexOf(" "+i+" ");)n=n.replace(" "+i+" "," ");a=me(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return d(t)?this.each((function(n){x(this).toggleClass(t.call(this,n,ve(this),e),e)})):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=ye(t),this.each((function(){if(s)for(o=x(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=ve(this))&&Y.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":Y.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+me(ve(n))+" ").indexOf(e))return!0;return!1}});var be=/\r/g;x.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=d(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,x(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,(function(t){return null==t?"":t+""}))),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(be,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:me(x.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(e=x(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=x.makeArray(e),a=i.length;a--;)((r=i[a]).selected=-1<x.inArray(x.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],(function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<x.inArray(x(t).val(),e)}},p.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),p.focusin="onfocusin"in t;var we=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,n,r,i){var o,a,s,l,u,h,f,p,v=[r||m],y=c.call(e,"type")?e.type:e,b=c.call(e,"namespace")?e.namespace.split("."):[];if(a=p=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!we.test(y+x.event.triggered)&&(-1<y.indexOf(".")&&(y=(b=y.split(".")).shift(),b.sort()),u=y.indexOf(":")<0&&"on"+y,(e=e[x.expando]?e:new x.Event(y,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:x.makeArray(n,[e]),f=x.event.special[y]||{},i||!f.trigger||!1!==f.trigger.apply(r,n))){if(!i&&!f.noBubble&&!g(r)){for(l=f.delegateType||y,we.test(l+y)||(a=a.parentNode);a;a=a.parentNode)v.push(a),s=a;s===(r.ownerDocument||m)&&v.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=v[o++])&&!e.isPropagationStopped();)p=a,e.type=1<o?l:f.bindType||y,(h=(Y.get(a,"events")||Object.create(null))[e.type]&&Y.get(a,"handle"))&&h.apply(a,n),(h=u&&a[u])&&h.apply&&W(a)&&(e.result=h.apply(a,n),!1===e.result&&e.preventDefault());return e.type=y,i||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(v.pop(),n)||!W(r)||u&&d(r[y])&&!g(r)&&((s=r[u])&&(r[u]=null),x.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,xe),r[y](),e.isPropagationStopped()&&p.removeEventListener(y,xe),x.event.triggered=void 0,s&&(r[u]=s)),e.result}},simulate:function(t,e,n){var r=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(r,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each((function(){x.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,e);i||r.addEventListener(t,n,!0),Y.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,e)-1;i?Y.access(r,e,i):(r.removeEventListener(t,n,!0),Y.remove(r,e))}}}));var Se=t.location,_e={guid:Date.now()},ke=/\?/;x.parseXML=function(e){var n,r;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=n&&n.getElementsByTagName("parsererror")[0],n&&!r||x.error("Invalid XML: "+(r?x.map(r.childNodes,(function(t){return t.textContent})).join("\n"):e)),n};var Ee=/\[\]$/,Me=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;function Pe(t,e,n,r){var i;if(Array.isArray(e))x.each(e,(function(e,i){n||Ee.test(t)?r(t,i):Pe(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==b(e))r(t,e);else for(i in e)Pe(t+"["+i+"]",e[i],n,r)}x.param=function(t,e){var n,r=[],i=function(t,e){var n=d(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,(function(){i(this.name,this.value)}));else for(n in t)Pe(n,t[n],e,i);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Oe.test(this.nodeName)&&!Te.test(t)&&(this.checked||!ft.test(t))})).map((function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,(function(t){return{name:e.name,value:t.replace(Me,"\r\n")}})):{name:e.name,value:n.replace(Me,"\r\n")}})).get()}});var Ce=/%20/g,Ie=/#.*$/,Ae=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,je=/^\/\//,Ne={},$e={},Fe="*/".concat("*"),De=m.createElement("a");function Ge(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(j)||[];if(d(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ue(t,e,n,r){var i={},o=t===$e;function a(s){var l;return i[s]=!0,x.each(t[s]||[],(function(t,s){var u=s(e,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)})),l}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Be(t,e){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&x.extend(!0,t,r),t}De.href=Se.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Be(Be(t,x.ajaxSettings),e):Be(x.ajaxSettings,t)},ajaxPrefilter:Ge(Ne),ajaxTransport:Ge($e),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,i,o,a,s,l,u,c,h,f,p=x.ajaxSetup({},n),d=p.context||p,g=p.context&&(d.nodeType||d.jquery)?x(d):x.event,v=x.Deferred(),y=x.Callbacks("once memory"),b=p.statusCode||{},w={},S={},_="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=Le.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=S[t.toLowerCase()]=S[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)k.always(t[k.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||_;return r&&r.abort(e),E(0,e),this}};if(v.promise(k),p.url=((e||p.url||Se.href)+"").replace(je,Se.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(j)||[""],null==p.crossDomain){l=m.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=De.protocol+"//"+De.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Ue(Ne,p,n,k),u)return k;for(h in(c=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Re.test(p.type),i=p.url.replace(Ie,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ce,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(ke.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Ae,"$1"),f=(ke.test(i)?"&":"?")+"_="+_e.guid+++f),p.url=i+f),p.ifModified&&(x.lastModified[i]&&k.setRequestHeader("If-Modified-Since",x.lastModified[i]),x.etag[i]&&k.setRequestHeader("If-None-Match",x.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Fe+"; q=0.01":""):p.accepts["*"]),p.headers)k.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(d,k,p)||u))return k.abort();if(_="abort",y.add(p.complete),k.done(p.success),k.fail(p.error),r=Ue($e,p,n,k)){if(k.readyState=1,c&&g.trigger("ajaxSend",[k,p]),u)return k;p.async&&0<p.timeout&&(s=t.setTimeout((function(){k.abort("timeout")}),p.timeout));try{u=!1,r.send(w,E)}catch(e){if(u)throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,n,a,l){var h,f,m,w,S,_=n;u||(u=!0,s&&t.clearTimeout(s),r=void 0,o=l||"",k.readyState=0<e?4:0,h=200<=e&&e<300||304===e,a&&(w=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,k,a)),!h&&-1<x.inArray("script",p.dataTypes)&&x.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),w=function(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(p,w,k,h),h?(p.ifModified&&((S=k.getResponseHeader("Last-Modified"))&&(x.lastModified[i]=S),(S=k.getResponseHeader("etag"))&&(x.etag[i]=S)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=w.state,f=w.data,h=!(m=w.error))):(m=_,!e&&_||(_="error",e<0&&(e=0))),k.status=e,k.statusText=(n||_)+"",h?v.resolveWith(d,[f,_,k]):v.rejectWith(d,[k,_,m]),k.statusCode(b),b=void 0,c&&g.trigger(h?"ajaxSuccess":"ajaxError",[k,p,h?f:m]),y.fireWith(d,[k,_]),c&&(g.trigger("ajaxComplete",[k,p]),--x.active||x.event.trigger("ajaxStop")))}return k},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],(function(t,e){x[e]=function(t,n,r,i){return d(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:i,data:n,success:r},x.isPlainObject(t)&&t))}})),x.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),x._evalUrl=function(t,e,n){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){x.globalEval(t,e,n)}})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(d(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return d(t)?this.each((function(e){x(this).wrapInner(t.call(this,e))})):this.each((function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=d(t);return this.each((function(n){x(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){x(this).replaceWith(this.childNodes)})),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var ze={0:200,1223:204},Ve=x.ajaxSettings.xhr();p.cors=!!Ve&&"withCredentials"in Ve,p.ajax=Ve=!!Ve,x.ajaxTransport((function(e){var n,r;if(p.cors||Ve&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(ze[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout((function(){n&&r()}))},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(i){if(n)throw i}},abort:function(){n&&n()}}})),x.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),x.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=x("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),m.head.appendChild(e[0])},abort:function(){n&&n()}}}));var qe,He=[],We=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=He.pop()||x.expando+"_"+_e.guid++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",(function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(We.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=d(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(We,"$1"+i):!1!==e.jsonp&&(e.url+=(ke.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||x.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always((function(){void 0===o?x(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,He.push(i)),a&&d(o)&&o(a[0]),a=o=void 0})),"script"})),p.createHTMLDocument=((qe=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((r=(e=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,e.head.appendChild(r)):e=m),o=!n&&[],(i=O.exec(t))?[e.createElement(i[1])]:(i=bt([t],e,o),o&&o.length&&x(o).remove(),x.merge([],i.childNodes)));var r,i,o},x.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return-1<s&&(r=me(t.slice(s)),t=t.slice(0,s)),d(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<a.length&&x.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(r?x("<div>").append(x.parseHTML(t)).find(r):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},x.expr.pseudos.animated=function(t){return x.grep(x.timers,(function(e){return t===e.elem})).length},x.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u=x.css(t,"position"),c=x(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=x.css(t,"top"),l=x.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),d(e)&&(e=e.call(t,n,x.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):c.css(h)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){x.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===x.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),i.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-x.css(r,"marginTop",!0),left:e.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||rt}))}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;x.fn[t]=function(r){return B(this,(function(t,r,i){var o;if(g(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),x.each(["top","left"],(function(t,e){x.cssHooks[e]=zt(p.pixelPosition,(function(t,n){if(n)return n=Bt(t,e),jt.test(n)?x(t).position()[e]+"px":n}))})),x.each({Height:"height",Width:"width"},(function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){x.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return B(this,(function(e,n,i){var o;return g(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?x.css(e,n,s):x.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){x.fn[e]=function(t){return this.on(e,t)}})),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){x.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}}));var Ke=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(t,e){var n,r,o;if("string"==typeof e&&(n=t[e],e=t,t=n),d(t))return r=i.call(arguments,2),(o=function(){return t.apply(e||this,r.concat(i.call(arguments)))}).guid=t.guid=t.guid||x.guid++,o},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=T,x.isFunction=d,x.isWindow=g,x.camelCase=H,x.type=b,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},x.trim=function(t){return null==t?"":(t+"").replace(Ke,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return x}));var Ye=t.jQuery,Xe=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=Xe),e&&t.jQuery===x&&(t.jQuery=Ye),x},void 0===e&&(t.jQuery=t.$=x),x})),function(t){"use strict";function e(t){if(!w(t))return Qn;b(t.objectMaxDepth)&&(Qn.objectMaxDepth=n(t.objectMaxDepth)?t.objectMaxDepth:NaN),b(t.urlErrorParamsEnabled)&&I(t.urlErrorParamsEnabled)&&(Qn.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function n(t){return _(t)&&0<t}function r(t,e){return e=e||Error,function(){var n,r=arguments[0];for(n="["+(t?t+":":"")+r+"] http://errors.angularjs.org/1.8.3/"+(t?t+"/":"")+r,r=1;r<arguments.length;r++){n=n+(1==r?"?":"&")+"p"+(r-1)+"=";var i,o=encodeURIComponent;n+=o(i="function"==typeof(i=arguments[r])?i.toString().replace(/ \{[\s\S]*$/,""):void 0===i?"undefined":"string"!=typeof i?JSON.stringify(i):i)}return new e(n)}}function i(t){if(null==t||P(t))return!1;if(E(t)||S(t)||Xn&&t instanceof Xn)return!0;var e="length"in Object(t)&&t.length;return _(e)&&(0<=e&&e-1 in t||"function"==typeof t.item)}function o(t,e,n){var r,a;if(t)if(T(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(E(t)||i(t)){var s="object"!=typeof t;for(r=0,a=t.length;r<a;r++)(s||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else if(x(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)er.call(t,r)&&e.call(n,t[r],r,t);return t}function a(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function s(t){return function(e,n){t(n,e)}}function l(){return++hr}function u(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(w(a)||T(a))for(var s=Object.keys(a),l=0,c=s.length;l<c;l++){var h=s[l],f=a[h];n&&w(f)?k(f)?t[h]=new Date(f.valueOf()):O(f)?t[h]=new RegExp(f):f.nodeName?t[h]=f.cloneNode(!0):A(f)?t[h]=f.clone():"__proto__"!==h&&(w(t[h])||(t[h]=E(f)?[]:{}),u(t[h],[f],!0)):t[h]=f}}return r?t.$$hashKey=r:delete t.$$hashKey,t}function c(t){return u(t,ir.call(arguments,1),!1)}function h(t){return u(t,ir.call(arguments,1),!0)}function f(t){return parseInt(t,10)}function p(t,e){return c(Object.create(t),e)}function d(){}function g(t){return t}function m(t){return function(){return t}}function v(t){return T(t.toString)&&t.toString!==sr}function y(t){return void 0===t}function b(t){return void 0!==t}function w(t){return null!==t&&"object"==typeof t}function x(t){return null!==t&&"object"==typeof t&&!lr(t)}function S(t){return"string"==typeof t}function _(t){return"number"==typeof t}function k(t){return"[object Date]"===sr.call(t)}function E(t){return Array.isArray(t)||t instanceof Array}function M(t){switch(sr.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function T(t){return"function"==typeof t}function O(t){return"[object RegExp]"===sr.call(t)}function P(t){return t&&t.window===t}function C(t){return t&&t.$evalAsync&&t.$watch}function I(t){return"boolean"==typeof t}function A(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function L(t){return nr(t.nodeName||t[0]&&t[0].nodeName)}function R(t,e){var n=t.indexOf(e);return 0<=n&&t.splice(n,1),n}function j(t,e,r){function i(t,e,n){if(0>--n)return"...";var r,i=e.$$hashKey;if(E(t)){r=0;for(var o=t.length;r<o;r++)e.push(a(t[r],n))}else if(x(t))for(r in t)e[r]=a(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=a(t[r],n));else for(r in t)er.call(t,r)&&(e[r]=a(t[r],n));return i?e.$$hashKey=i:delete e.$$hashKey,e}function a(t,e){if(!w(t))return t;if(-1!==(n=l.indexOf(t)))return u[n];if(P(t)||C(t))throw ur("cpws");var n=!1,r=s(t);return void 0===r&&(r=E(t)?[]:Object.create(lr(t)),n=!0),l.push(t),u.push(r),n?i(t,r,e):r}function s(t){switch(sr.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(a(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":return(e=new RegExp(t.source,t.toString().match(/[^/]*$/)[0])).lastIndex=t.lastIndex,e;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(T(t.cloneNode))return t.cloneNode(!0)}var l=[],u=[];if(r=n(r)?r:NaN,e){if(function(t){return t&&_(t.length)&&gr.test(sr.call(t))}(e)||"[object ArrayBuffer]"===sr.call(e))throw ur("cpta");if(t===e)throw ur("cpi");return E(e)?e.length=0:o(e,(function(t,n){"$$hashKey"!==n&&delete e[n]})),l.push(t),u.push(e),i(t,e,r)}return a(t,r)}function N(t,e){return t===e||t!=t&&e!=e}function $(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r=typeof t;if(r===typeof e&&"object"===r){if(!E(t)){if(k(t))return!!k(e)&&N(t.getTime(),e.getTime());if(O(t))return!!O(e)&&t.toString()===e.toString();if(C(t)||C(e)||P(t)||P(e)||E(e)||k(e)||O(e))return!1;for(n in r=st(),t)if("$"!==n.charAt(0)&&!T(t[n])){if(!$(t[n],e[n]))return!1;r[n]=!0}for(n in e)if(!(n in r)&&"$"!==n.charAt(0)&&b(e[n])&&!T(e[n]))return!1;return!0}if(!E(e))return!1;if((r=t.length)===e.length){for(n=0;n<r;n++)if(!$(t[n],e[n]))return!1;return!0}}return!1}function F(t,e,n){return t.concat(ir.call(e,n))}function D(t,e){var n=2<arguments.length?ir.call(arguments,2):[];return!T(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,F(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function G(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:P(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":C(n)&&(r="$SCOPE"),r}function U(t,e){if(!y(t))return _(e)||(e=e?2:null),JSON.stringify(t,G,e)}function B(t){return S(t)?JSON.parse(t):t}function z(t,e){t=t.replace(wr,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return fr(n)?e:n}function V(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function q(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return V(t,n*((e=z(e,r))-r))}function H(t){t=Xn(t).clone().empty();var e=Xn("<div></div>").append(t).html();try{return t[0].nodeType===Er?nr(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+nr(e)}))}catch(n){return nr(e)}}function W(t){try{return decodeURIComponent(t)}catch(dr){}}function K(t){var e={};return o((t||"").split("&"),(function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),b(r=W(r))&&(i=!b(i)||W(i),er.call(e,r)?E(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))})),e}function Y(t){return X(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function X(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function Z(e,n){var r,i,a={};o(xr,(function(t){t+="app",!r&&e.hasAttribute&&e.hasAttribute(t)&&(r=e,i=e.getAttribute(t))})),o(xr,(function(t){var n;t+="app",!r&&(n=e.querySelector("["+t.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(t))})),r&&(Sr?(a.strictDi=null!==function(t,e){var n,r,i=xr.length;for(r=0;r<i;++r)if(n=xr[r]+e,S(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],a)):t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function J(e,n,r){w(r)||(r={}),r=c({strictDi:!1},r);var i=function(){if((e=Xn(e)).injector()){var i=e[0]===t.document?"document":H(e);throw ur("btstrpd",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}return(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng"),(i=Gt(n,r.strictDi)).invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply((function(){e.data("$injector",r),n(e)(t)}))}]),i},a=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&a.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!s.test(t.name))return i();t.name=t.name.replace(s,""),cr.resumeBootstrap=function(t){return o(t,(function(t){n.push(t)})),i()},T(cr.resumeDeferredBootstrap)&&cr.resumeDeferredBootstrap()}function Q(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function tt(t){if(!(t=cr.element(t).injector()))throw ur("test");return t.get("$$testability")}function et(t,e){return e=e||"_",t.replace(_r,(function(t,n){return(n?e:"")+t.toLowerCase()}))}function nt(){gt.legacyXHTMLReplacement=!0}function rt(t,e,n){if(!t)throw ur("areq",e||"?",n||"required");return t}function it(t,e,n){return n&&E(t)&&(t=t[t.length-1]),rt(T(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function ot(t,e){if("hasOwnProperty"===t)throw ur("badname",e)}function at(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=Xn(ir.call(t,0,i))),e.push(n));return e||t}function st(){return Object.create(null)}function lt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!v(t)||E(t)||k(t)?U(t):t.toString()}return t}function ut(t,e){if(E(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(w(t))for(n in e=e||{},t)"$"===n.charAt(0)&&"$"===n.charAt(1)||(e[n]=t[n]);return e||t}function ct(t,e){var r=[];return n(e)&&(t=cr.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(w(e=G(t,e))){if(0<=r.indexOf(e))return"...";r.push(e)}return e}))}function ht(t,e){return e.toUpperCase()}function ft(t){return t.replace(Pr,ht)}function pt(t){return 1===(t=t.nodeType)||!t||9===t}function dt(e,n){var r,i,a,s,l=n.createDocumentFragment(),u=[];if(Rr.test(e)){if(r=l.appendChild(n.createElement("div")),i=(jr.exec(e)||["",""])[1].toLowerCase(),a=gt.legacyXHTMLReplacement?e.replace(Nr,"<$1></$2>"):e,10>Yn)for(i=Dr[i]||Dr._default,r.innerHTML=i[1]+a+i[2],s=i[0];s--;)r=r.firstChild;else{for(s=(i=$r[i]||[]).length;-1<--s;)r.appendChild(t.document.createElement(i[s])),r=r.firstChild;r.innerHTML=a}u=F(u,r.childNodes),(r=l.firstChild).textContent=""}else u.push(n.createTextNode(e));return l.textContent="",l.innerHTML="",o(u,(function(t){l.appendChild(t)})),l}function gt(e){if(e instanceof gt)return e;var n,r;if(S(e)&&(e=mr(e),n=!0),!(this instanceof gt)){if(n&&"<"!==e.charAt(0))throw Ar("nosel");return new gt(e)}n?(n=t.document,Tt(this,e=(r=Lr.exec(e))?[n.createElement(r[1])]:(r=dt(e,n))?r.childNodes:[])):T(e)?At(e):Tt(this,e)}function mt(t){return t.cloneNode(!0)}function vt(t,e){!e&&pt(t)&&Xn.cleanData([t]),t.querySelectorAll&&Xn.cleanData(t.querySelectorAll("*"))}function yt(t){for(var e in t)return!1;return!0}function bt(t){var e,n=t.ng339,r=(e=n&&Tr[n])&&e.events;(e=e&&e.data)&&!yt(e)||r&&!yt(r)||(delete Tr[n],t.ng339=void 0)}function wt(t,e,n,r){if(b(r))throw Ar("offargs");var i=(r=St(t))&&r.events,a=r&&r.handle;if(a){if(e){var s=function(e){var r=i[e];b(n)&&R(r||[],n),b(n)&&r&&0<r.length||(t.removeEventListener(e,a),delete i[e])};o(e.split(" "),(function(t){s(t),Ir[t]&&s(Ir[t])}))}else for(e in i)"$destroy"!==e&&t.removeEventListener(e,a),delete i[e];bt(t)}}function xt(t,e){var n=t.ng339;(n=n&&Tr[n])&&(e?delete n.data[e]:n.data={},bt(t))}function St(t,e){var n=(n=t.ng339)&&Tr[n];return e&&!n&&(t.ng339=n=++Or,n=Tr[n]={events:{},data:{},handle:void 0}),n}function _t(t,e,n){if(pt(t)){var r,i=b(n),o=!i&&e&&!w(e),a=!e;if(t=(t=St(t,!o))&&t.data,i)t[ft(e)]=n;else{if(a)return t;if(o)return t&&t[ft(e)];for(r in e)t[ft(r)]=e[r]}}}function kt(t,e){return!!t.getAttribute&&-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")}function Et(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;o(e.split(" "),(function(t){t=mr(t),r=r.replace(" "+t+" "," ")})),r!==n&&t.setAttribute("class",mr(r))}}function Mt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;o(e.split(" "),(function(t){t=mr(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")})),r!==n&&t.setAttribute("class",mr(r))}}function Tt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ot(t,e){return Pt(t,"$"+(e||"ngController")+"Controller")}function Pt(t,e,n){for(9===t.nodeType&&(t=t.documentElement),e=E(e)?e:[e];t;){for(var r=0,i=e.length;r<i;r++)if(b(n=Xn.data(t,e[r])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function Ct(t){for(vt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function It(t,e){e||vt(t);var n=t.parentNode;n&&n.removeChild(t)}function At(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}function Lt(t,e){var n=Vr[e.toLowerCase()];return n&&qr[L(t)]&&n}function Rt(t,e,n){n.call(t,e)}function jt(t,e,n){var r=e.relatedTarget;r&&(r===t||Br.call(t,r))||n.call(t,e)}function Nt(){this.$get=function(){return c(gt,{hasClass:function(t,e){return t.attr&&(t=t[0]),kt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Mt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Et(t,e)}})}}function $t(t,e){var n=t&&t.$$hashKey;return n?("function"==typeof n&&(n=t.$$hashKey()),n):"function"===(n=typeof t)||"object"===n&&null!==t?t.$$hashKey=n+":"+(e||l)():n+":"+t}function Ft(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function Dt(t){return(t=Function.prototype.toString.call(t).replace(ti,"")).match(Xr)||t.match(Zr)}function Gt(t,e){function n(t){return function(e,n){if(!w(e))return t(e,n);o(e,s(t))}}function r(t,e){if(ot(t,"service"),(T(e)||E(e))&&(e=d.instantiate(e)),!e.$get)throw ei("pget",t);return p[t+"Provider"]=e}function i(t,e){return function(){var n=b.invoke(e,this);if(y(n))throw ei("undef",t);return n}}function a(t,e,n){return r(t,{$get:!1!==n?i(t,e):e})}function l(t){rt(y(t)||E(t),"modulesToLoad","not an array");var e,n=[];return o(t,(function(t){function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=d.get(r[0]);i[r[1]].apply(i,r[2])}}if(!f.get(t)){f.set(t,!0);try{S(t)?(e=Jn(t),b.modules[t]=e,n=n.concat(l(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):T(t)||E(t)?n.push(d.invoke(t)):it(t,"module")}catch(i){throw E(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1===i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),ei("modulerr",t,i.stack||i.message||i)}}})),n}function u(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===c)throw ei("cdep",e+" <- "+h.join(" <- "));return t[e]}try{return h.unshift(e),t[e]=c,t[e]=n(e,r),t[e]}catch(a){throw t[e]===c&&delete t[e],a}finally{h.shift()}}function i(t,n,i){for(var o=[],a=0,s=(t=Gt.$$annotate(t,e,i)).length;a<s;a++){var l=t[a];if("string"!=typeof l)throw ei("itkn",l);o.push(n&&n.hasOwnProperty(l)?n[l]:r(l,i))}return o}return{invoke:function(t,e,n,r){if("string"==typeof n&&(r=n,n=null),n=i(t,n,r),E(t)&&(t=t[t.length-1]),r=t,Yn||"function"!=typeof r)r=!1;else{var o=r.$$ngIsClass;I(o)||(o=r.$$ngIsClass=/^class\b/.test(Function.prototype.toString.call(r))),r=o}return r?(n.unshift(null),new(Function.prototype.bind.apply(t,n))):t.apply(e,n)},instantiate:function(t,e,n){var r=E(t)?t[t.length-1]:t;return(t=i(t,e,n)).unshift(null),new(Function.prototype.bind.apply(r,t))},get:r,annotate:Gt.$$annotate,has:function(e){return p.hasOwnProperty(e+"Provider")||t.hasOwnProperty(e)}}}e=!0===e;var c={},h=[],f=new Kr,p={$provide:{provider:n(r),factory:n(a),service:n((function(t,e){return a(t,["$injector",function(t){return t.instantiate(e)}])})),value:n((function(t,e){return a(t,m(e),!1)})),constant:n((function(t,e){ot(t,"constant"),p[t]=e,g[t]=e})),decorator:function(t,e){var n=d.get(t+"Provider"),r=n.$get;n.$get=function(){var t=b.invoke(r,n);return b.invoke(e,null,{$delegate:t})}}}},d=p.$injector=u(p,(function(t,e){throw cr.isString(e)&&h.push(e),ei("unpr",h.join(" <- "))})),g={},v=u(g,(function(t,e){var n=d.get(t+"Provider",e);return b.invoke(n.$get,n,void 0,t)})),b=v;p.$injectorProvider={$get:m(v)},b.modules=d.modules=st();var x=l(t);return(b=v.get("$injector")).strictDi=e,o(x,(function(t){t&&b.invoke(t)})),b.loadNewModules=function(t){o(l(t),(function(t){t&&b.invoke(t)}))},b}function Ut(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){function o(t){var e;t?(t.scrollIntoView(),T(e=a.yOffset)?e=e():A(e)?(e=e[0],e="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom):_(e)||(e=0),e&&(t=t.getBoundingClientRect().top,n.scrollBy(0,t-e))):n.scrollTo(0,0)}function a(t){var e;(t=S(t)?t:_(t)?t.toString():r.hash())?(e=s.getElementById(t))||(e=function(t){var e=null;return Array.prototype.some.call(t,(function(t){if("a"===L(t))return e=t,!0})),e}(s.getElementsByName(t)))?o(e):"top"===t&&o(null):o(null)}var s=n.document;return e&&i.$watch((function(){return r.hash()}),(function(e,n){e===n&&""===e||function(e,n){"complete"===(n=n||t).document.readyState?n.setTimeout(e):Xn(n).on("load",e)}((function(){i.$evalAsync(a)}))})),a}]}function Bt(t,e){return t||e?t?e?(E(t)&&(t=t.join(" ")),E(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function zt(t){return w(t)?t:{}}function Vt(t,e,n,r,i){function a(){S=null,l()}function s(){$(v=y(v=_())?null:v,M)&&(v=M),b=M=v}function l(){var t=b;s(),w===u.url()&&t===v||(w=u.url(),b=v,o(k,(function(t){t(u.url(),v)})))}var u=this,c=t.location,h=t.history,f=t.setTimeout,p=t.clearTimeout,g={},m=i(n);u.isMock=!1,u.$$completeOutstandingRequest=m.completeTask,u.$$incOutstandingRequestCount=m.incTaskCount,u.notifyWhenNoOutstandingRequests=m.notifyWhenNoPendingTasks;var v,b,w=c.href,x=e.find("base"),S=null,_=r.history?function(){try{return h.state}catch(t){}}:d;s(),u.url=function(e,n,i){if(y(i)&&(i=null),c!==t.location&&(c=t.location),h!==t.history&&(h=t.history),e){var o=b===i;if(e=nn(e).href,w===e&&(!r.history||o))return u;var a=w&&xe(w)===xe(e);return w=e,b=i,!r.history||a&&o?(a||(S=e),n?c.replace(e):a?(n=c,o=(i=e).indexOf("#"),i=-1===o?"":i.substr(o),n.hash=i):c.href=e,c.href!==e&&(S=e)):(h[n?"replaceState":"pushState"](i,"",e),s()),S&&(S=e),u}return(S||c.href).replace(/#$/,"")},u.state=function(){return v};var k=[],E=!1,M=null;u.onUrlChange=function(e){return E||(r.history&&Xn(t).on("popstate",a),Xn(t).on("hashchange",a),E=!0),k.push(e),e},u.$$applicationDestroyed=function(){Xn(t).off("hashchange popstate",a)},u.$$checkUrlChange=l,u.baseHref=function(){var t=x.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},u.defer=function(t,e,n){var r;return e=e||0,n=n||m.DEFAULT_TASK_TYPE,m.incTaskCount(n),r=f((function(){delete g[r],m.completeTask(t,n)}),e),g[r]=n,r},u.defer.cancel=function(t){if(g.hasOwnProperty(t)){var e=g[t];return delete g[t],p(t),m.completeTask(d,e),!0}return!1}}function qt(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,r,i){return new Vt(t,r,e,n,i)}]}function Ht(){this.$get=function(){function t(t,n){function i(t){t!==f&&(p?p===t&&(p=t.n):p=t,o(t.n,t.p),o(t,f),(f=t).n=null)}function o(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid",t);var a=0,s=c({},n,{id:t}),l=st(),u=n&&n.capacity||Number.MAX_VALUE,h=st(),f=null,p=null;return e[t]={put:function(t,e){if(!y(e)){if(u<Number.MAX_VALUE)i(h[t]||(h[t]={key:t}));return t in l||a++,l[t]=e,a>u&&this.remove(p.key),e}},get:function(t){if(u<Number.MAX_VALUE){var e=h[t];if(!e)return;i(e)}return l[t]},remove:function(t){if(u<Number.MAX_VALUE){var e=h[t];if(!e)return;e===f&&(f=e.p),e===p&&(p=e.n),o(e.n,e.p),delete h[t]}t in l&&(delete l[t],a--)},removeAll:function(){l=st(),a=0,h=st(),f=p=null},destroy:function(){h=s=l=null,delete e[t]},info:function(){return c({},s,{size:a})}}}var e={};return t.info=function(){var t={};return o(e,(function(e,n){t[n]=e.info()})),t},t.get=function(t){return e[t]},t}}function Wt(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Kt(e,n){function r(t,e,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=st();return o(t,(function(t,o){if((t=t.trim())in x)i[o]=x[t];else{var a=t.match(r);if(!a)throw ui("iscp",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(x[t]=i[o])}})),i}function i(t){var e=t.require||t.controller&&t.name;return!E(e)&&w(e)&&o(e,(function(t,n){var r=t.match(f);t.substring(r[0].length)||(e[n]=r[0]+n)})),e}var a={},l=/^\s*directive:\s*([\w-]+)\s+(.*)$/,u=/(([\w-]+)(?::([^;]+))?;?)/,h=function(t){var e,n={};for(t=t.split(","),e=0;e<t.length;e++)n[t[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),f=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/,x=st();this.directive=function t(n,r){return rt(n,"name"),ot(n,"directive"),S(n)?(function(t){var e=t.charAt(0);if(!e||e!==nr(e))throw ui("baddir",t);if(t!==t.trim())throw ui("baddir",t)}(n),rt(r,"directiveFactory"),a.hasOwnProperty(n)||(a[n]=[],e.factory(n+"Directive",["$injector","$exceptionHandler",function(t,e){var r=[];return o(a[n],(function(o,a){try{var s=t.invoke(o);T(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=a,s.name=s.name||n,s.require=i(s);var l=s,u=s.restrict;if(u&&(!S(u)||!/[EACM]/.test(u)))throw ui("badrestrict",u,n);l.restrict=u||"EA",s.$$moduleName=o.$$moduleName,r.push(s)}catch(v){e(v)}})),r}])),a[n].push(r)):o(n,s(t)),this},this.component=function t(e,n){function r(t){function e(e){return T(e)||E(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var r=n.template||n.templateUrl?n.template:"",a={controller:i,controllerAs:Qt(n.controller)||n.controllerAs||"$ctrl",template:e(r),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return o(n,(function(t,e){"$"===e.charAt(0)&&(a[e]=t)})),a}if(!S(e))return o(e,s(D(this,t))),this;var i=n.controller||function(){};return o(n,(function(t,e){"$"===e.charAt(0)&&(r[e]=t,T(i)&&(i[e]=t))})),r.$inject=["$injector"],this.directive(e,r)},this.aHrefSanitizationTrustedUrlList=function(t){return b(t)?(n.aHrefSanitizationTrustedUrlList(t),this):n.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(t){this.aHrefSanitizationTrustedUrlList=t}}),this.imgSrcSanitizationTrustedUrlList=function(t){return b(t)?(n.imgSrcSanitizationTrustedUrlList(t),this):n.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(t){this.imgSrcSanitizationTrustedUrlList=t}});var _=!0;this.debugInfoEnabled=function(t){return b(t)?(_=t,this):_};var k=!1;this.strictComponentBindingsEnabled=function(t){return b(t)?(k=t,this):k};var O=10;this.onChangesTtl=function(t){return arguments.length?(O=t,this):O};var P=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(P=t,this):P};var A=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(A=t,this):A};var j=st();this.addPropertySecurityContext=function(t,e,n){var r=t.toLowerCase()+"|"+e.toLowerCase();if(r in j&&j[r]!==n)throw ui("ctxoverride",t,e,j[r],n);return j[r]=n,this},function(){function t(t,e){o(e,(function(e){j[e.toLowerCase()]=t}))}t(Di.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Di.CSS,["*|style"]),t(Di.URL,"area|href area|ping a|href a|ping blockquote|cite body|background del|cite input|src ins|cite q|cite".split(" ")),t(Di.MEDIA_URL,"audio|src img|src img|srcset source|src source|srcset track|src video|src video|poster".split(" ")),t(Di.RESOURCE_URL,"*|formAction applet|code applet|codebase base|href embed|src frame|src form|action head|profile html|manifest iframe|src link|href media|src object|codebase object|data script|src".split(" "))}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,i,s,m,b,x,F,G){function U(){try{if(!--Ct)throw Et=void 0,ui("infchng",O);x.$apply((function(){for(var t=0,e=Et.length;t<e;++t)try{Et[t]()}catch(r){i(r)}Et=void 0}))}finally{Ct++}}function B(t,e){if(!t)return t;if(!S(t))throw ui("srcset",e,t.toString());for(var n="",r=mr(t),i=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,o=(i=/\s/.test(r)?i:/(,)/,r=r.split(i),i=Math.floor(r.length/2),0);o<i;o++){var a=2*o;n=(n=n+F.getTrustedMediaUrl(mr(r[a])))+" "+mr(r[a+1])}return r=mr(r[2*o]).split(/\s/),n+=F.getTrustedMediaUrl(mr(r[0])),2===r.length&&(n+=" "+mr(r[1])),n}function z(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function V(t,e){try{t.addClass(e)}catch(i){}}function q(t,e,n,r,i){t instanceof Xn||(t=Xn(t));var o=W(t,e,t,n,r,i);q.$$addScopeClass(t);var a=null;return function(e,n,r){if(!t)throw ui("multilink");rt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var s=(r=r||{}).parentBoundTranscludeFn,l=r.transcludeControllers;if(r=r.futureParentElement,s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=(r=r&&r[0])&&"foreignobject"!==L(r)&&sr.call(r).match(/SVG/)?"svg":"html"),r="html"!==a?Xn(gt(a,Xn("<div></div>").append(t).html())):n?zr.clone.call(t):t,l)for(var u in l)r.data("$"+u+"Controller",l[u].instance);return q.$$addScopeInfo(r,e),n&&n(r,e),o&&o(e,r,r,s),n||(t=o=null),r}}function W(t,e,n,r,i,o){for(var a,s,l,u,c,h=[],f=E(t)||t instanceof Xn,p=0;p<t.length;p++)a=new z,11===Yn&&K(t,p,f),(o=(s=X(t[p],[],a,0===p?r:void 0,i)).length?nt(s,t[p],a,e,n,null,[],[],o):null)&&o.scope&&q.$$addScopeClass(a.$$element),a=o&&o.terminal||!(l=t[p].childNodes)||!l.length?null:W(l,o?(o.transcludeOnThisElement||!o.templateOnThisElement)&&o.transclude:e),(o||a)&&(h.push(p,o,a),u=!0,c=c||o),o=null;return u?function(t,n,r,i){var o,a,s,l,u,f;if(c)for(f=Array(n.length),l=0;l<h.length;l+=3)f[o=h[l]]=n[o];else f=n;for(l=0,u=h.length;l<u;)a=f[h[l++]],n=h[l++],o=h[l++],n?(n.scope?(s=t.$new(),q.$$addScopeInfo(Xn(a),s)):s=t,n(o,s,a,r,n.transcludeOnThisElement?Y(t,n.transclude,i):!n.templateOnThisElement&&i?i:!i&&e?Y(t,e):null)):o&&o(t,a.childNodes,void 0,i)}:null}function K(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType===Er)for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Er;)i.nodeValue+=r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function Y(t,e,n){function r(r,i,o,a,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i,o=r.$$slots=st();for(i in e.$$slots)o[i]=e.$$slots[i]?Y(t,e.$$slots[i],n):null;return r}function X(t,e,n,r,o){var a,s=n.$attr;switch(t.nodeType){case 1:lt(e,Xt(a=L(t)),"E",r,o);for(var l,c,h,f,p,d=t.attributes,g=0,v=d&&d.length;g<v;g++){var y,b=!1,_=!1,k=!1,E=!1,M=!1;c=(l=d[g]).name,f=l.value,(p=(h=Xt(c.toLowerCase())).match(jt))?(k="Attr"===p[1],E="Prop"===p[1],M="On"===p[1],c=c.replace(hi,"").toLowerCase().substr(4+p[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(y=h.match(Nt))&&ut(y[1])&&(b=c,_=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),E||M?(n[h]=f,s[h]=l.name,E?yt(t,e,h,c):e.push(Bn(m,x,i,h,c,!1))):(s[h=Xt(c.toLowerCase())]=c,!k&&n.hasOwnProperty(h)||(n[h]=f,Lt(t,h)&&(n[h]=!0)),bt(t,e,f,h,k),lt(e,h,"A",r,o,b,_))}if("input"===a&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!Pt)break;if(w(s=t.className)&&(s=s.animVal),S(s)&&""!==s)for(;t=u.exec(s);)lt(e,h=Xt(t[2]),"C",r,o)&&(n[h]=mr(t[3])),s=s.substr(t.index+t[0].length);break;case Er:dt(e,t.nodeValue);break;case 8:if(!Ot)break;Z(t,e,n,r,o)}return e.sort(ft),e}function Z(t,e,n,r,i){try{var o=l.exec(t.nodeValue);if(o){var a=Xt(o[1]);lt(e,a,"M",r,i)&&(n[a]=mr(o[2]))}}catch(u){}}function J(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw ui("uterdir",e,n);1===t.nodeType&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(0<i);else r.push(t);return Xn(r)}function Q(t,e,n){return function(r,i,o,a,s){return i=J(i[0],e,n),t(r,i,o,a,s)}}function tt(t,e,n,r,i,o){var a;return t?q(e,n,r,i,o):function(){return a||(a=q(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function nt(e,n,r,a,s,l,u,h,f){function p(t,e,n,r){t&&(n&&(t=Q(t,n,r)),t.require=g.require,t.directiveName=m,(M===g||g.$$isolateScope)&&(t=xt(t,{isolateScope:!0})),u.push(t)),e&&(n&&(e=Q(e,n,r)),e.require=g.require,e.directiveName=m,(M===g||g.$$isolateScope)&&(e=xt(e,{isolateScope:!0})),h.push(e))}function d(t,e,a,s,l){var f,p,d,g,m,v,b,x;for(f in n===a?(s=r,x=r.$$element):s=new z(x=Xn(a),r),m=e,M?g=e.$new(!0):_&&(m=e.$parent),l&&(b=function(t,e,n,r){var i;if(C(t)||(r=n,n=e,e=t,t=void 0),R&&(i=v),n||(n=R?x.parent():x),!r)return l(t,e,i,n,P);var o=l.$$slots[r];if(o)return o(t,e,i,n,P);if(y(o))throw ui("noslot",r,H(x))},b.$$boundTransclude=l,b.isSlotFilled=function(t){return!!l.$$slots[t]}),k&&(v=ot(x,s,b,k,g,e,M)),M&&(q.$$addScopeInfo(x,g,!0,!(O&&(O===M||O===M.$$originalDirective))),q.$$addScopeClass(x,!0),g.$$isolateBindings=M.$$isolateBindings,(p=kt(e,s,g,g.$$isolateBindings,M)).removeWatches&&g.$on("$destroy",p.removeWatches)),v){p=k[f],d=v[f];var S=p.$$bindings.bindToController;d.instance=d(),x.data("$"+p.name+"Controller",d.instance),d.bindingInfo=kt(m,s,d.instance,S,p)}for(o(k,(function(t,e){var n=t.require;t.bindToController&&!E(n)&&w(n)&&c(v[e].instance,it(e,n,x,v))})),o(v,(function(t){var n=t.instance;if(T(n.$onChanges))try{n.$onChanges(t.bindingInfo.initialChanges)}catch(r){i(r)}if(T(n.$onInit))try{n.$onInit()}catch(e){i(e)}T(n.$doCheck)&&(m.$watch((function(){n.$doCheck()})),n.$doCheck()),T(n.$onDestroy)&&m.$on("$destroy",(function(){n.$onDestroy()}))})),f=0,p=u.length;f<p;f++)St(d=u[f],d.isolateScope?g:e,x,s,d.require&&it(d.directiveName,d.require,x,v),b);var P=e;for(M&&(M.template||null===M.templateUrl)&&(P=g),t&&t(P,a.childNodes,void 0,l),f=h.length-1;0<=f;f--)St(d=h[f],d.isolateScope?g:e,x,s,d.require&&it(d.directiveName,d.require,x,v),b);o(v,(function(t){T((t=t.instance).$postLink)&&t.$postLink()}))}f=f||{};for(var g,m,v,b,x,S=-Number.MAX_VALUE,_=f.newScopeDirective,k=f.controllerDirectives,M=f.newIsolateScopeDirective,O=f.templateDirective,P=f.nonTlbTranscludeDirective,I=!1,A=!1,R=f.hasElementTranscludeDirective,j=r.$$element=Xn(n),N=a,$=!1,F=!1,G=0,U=e.length;G<U;G++){var B=(g=e[G]).$$start,V=g.$$end;if(B&&(j=J(n,B,V)),v=void 0,S>g.priority)break;if((x=g.scope)&&(g.templateUrl||(w(x)?(pt("new/isolated scope",M||_,g,j),M=g):pt("new/isolated scope",M,g,j)),_=_||g),m=g.name,!$&&(g.replace&&(g.templateUrl||g.template)||g.transclude&&!g.$$tlb)){for(x=G+1;$=e[x++];)if($.transclude&&!$.$$tlb||$.replace&&($.templateUrl||$.template)){F=!0;break}$=!0}if(!g.templateUrl&&g.controller&&(k=k||st(),pt("'"+m+"' controller",k[m],g,j),k[m]=g),x=g.transclude)if(I=!0,g.$$tlb||(pt("transclusion",P,g,j),P=g),"element"===x)R=!0,S=g.priority,v=j,j=r.$$element=Xn(q.$$createComment(m,r[m])),n=j[0],wt(s,ir.call(v,0),n),N=tt(F,v,a,S,l&&l.name,{nonTlbTranscludeDirective:P});else{var W=st();if(w(x)){v=t.document.createDocumentFragment();var K=st(),Y=st();for(var Z in o(x,(function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,K[t]=e,W[e]=null,Y[e]=n})),o(j.contents(),(function(e){var n=K[Xt(L(e))];n?(Y[n]=!0,W[n]=W[n]||t.document.createDocumentFragment(),W[n].appendChild(e)):v.appendChild(e)})),o(Y,(function(t,e){if(!t)throw ui("reqslot",e)})),W)W[Z]&&(N=Xn(W[Z].childNodes),W[Z]=tt(F,N,a));v=Xn(v.childNodes)}else v=Xn(mt(n)).contents();j.empty(),(N=tt(F,v,a,void 0,void 0,{needsNewScope:g.$$isolateScope||g.$$newScope})).$$slots=W}if(g.template)if(A=!0,pt("template",O,g,j),O=g,x=T(g.template)?g.template(j,r):g.template,x=Rt(x),g.replace){if(l=g,v=Rr.test(x)?Jt(gt(g.templateNamespace,mr(x))):[],n=v[0],1!==v.length||1!==n.nodeType)throw ui("tplrt",m,"");wt(s,j,n),x=X(n,[],U={$attr:{}});var et=e.splice(G+1,e.length-(G+1));(M||_)&&at(x,M,_),e=e.concat(x).concat(et),ct(r,U),U=e.length}else j.html(x);if(g.templateUrl)A=!0,pt("template",O,g,j),O=g,g.replace&&(l=g),d=ht(e.splice(G,e.length-G),j,r,s,I&&N,u,h,{controllerDirectives:k,newScopeDirective:_!==g&&_,newIsolateScopeDirective:M,templateDirective:O,nonTlbTranscludeDirective:P}),U=e.length;else if(g.compile)try{b=g.compile(j,r,N);var nt=g.$$originalDirective||g;T(b)?p(null,D(nt,b),B,V):b&&p(D(nt,b.pre),D(nt,b.post),B,V)}catch(ut){i(ut,H(j))}g.terminal&&(d.terminal=!0,S=Math.max(S,g.priority))}return d.scope=_&&!0===_.scope,d.transcludeOnThisElement=I,d.templateOnThisElement=A,d.transclude=N,f.hasElementTranscludeDirective=R,d}function it(t,e,n,r){var i;if(S(e)){var a=e.match(f);e=e.substring(a[0].length);var s=a[1]||a[3];a="?"===a[2];if("^^"===s?n=n.parent():i=(i=r&&r[e])&&i.instance,!i){var l="$"+e+"Controller";i="^^"===s&&n[0]&&9===n[0].nodeType?null:s?n.inheritedData(l):n.data(l)}if(!i&&!a)throw ui("ctreq",e,t)}else if(E(e))for(i=[],s=0,a=e.length;s<a;s++)i[s]=it(t,e[s],n,r);else w(e)&&(i={},o(e,(function(e,o){i[o]=it(t,e,n,r)})));return i||null}function ot(t,e,n,r,i,o,a){var s,l=st();for(s in r){var u=r[s],c={$scope:u===a||u.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},h=u.controller;"@"===h&&(h=e[u.name]),c=b(h,c,!0,u.controllerAs),l[u.name]=c,t.data("$"+u.name+"Controller",c.instance)}return l}function at(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=p(t[r],{$$isolateScope:e,$$newScope:n})}function lt(t,n,i,o,s,l,u){if(n===s)return null;var c=null;if(a.hasOwnProperty(n))for(var h=0,f=(s=e.get(n+"Directive")).length;h<f;h++)if(n=s[h],(y(o)||o>n.priority)&&-1!==n.restrict.indexOf(i)){if(l&&(n=p(n,{$$start:l,$$end:u})),!n.$$bindings){var d=c=n,g=n.name,m={isolateScope:null,bindToController:null};if(w(d.scope)&&(!0===d.bindToController?(m.bindToController=r(d.scope,g,!0),m.isolateScope={}):m.isolateScope=r(d.scope,g,!1)),w(d.bindToController)&&(m.bindToController=r(d.bindToController,g,!0)),m.bindToController&&!d.controller)throw ui("noctrl",g);w((c=c.$$bindings=m).isolateScope)&&(n.$$isolateBindings=c.isolateScope)}t.push(n),c=n}return c}function ut(t){if(a.hasOwnProperty(t))for(var n=e.get(t+"Directive"),r=0,i=n.length;r<i;r++)if((t=n[r]).multiElement)return!0;return!1}function ct(t,e){var n=e.$attr,r=t.$attr;o(t,(function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r=r.length?r+("style"===i?";":" ")+e[i]:e[i]),t.$set(i,r,!0,n[i]))})),o(e,(function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))}))}function ht(t,e,n,r,a,l,u,c){var h,f,d=[],g=e[0],m=t.shift(),v=p(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),y=T(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,b=m.templateNamespace;return e.empty(),s(y).then((function(i){var s,p;if(i=Rt(i),m.replace){if(i=Rr.test(i)?Jt(gt(b,mr(i))):[],s=i[0],1!==i.length||1!==s.nodeType)throw ui("tplrt",m.name,y);i={$attr:{}},wt(r,e,s);var x=X(s,[],i);w(m.scope)&&at(x,!0),t=x.concat(t),ct(n,i)}else s=g,e.html(i);for(t.unshift(v),h=nt(t,s,n,a,e,m,l,u,c),o(r,(function(t,n){t===s&&(r[n]=e[0])})),f=W(e[0].childNodes,a);d.length;){i=d.shift(),p=d.shift();var S=d.shift(),_=d.shift();x=e[0];if(!i.$$destroyed){if(p!==g){var k=p.className;c.hasElementTranscludeDirective&&m.replace||(x=mt(s)),wt(S,Xn(p),x),V(Xn(x),k)}p=h.transcludeOnThisElement?Y(i,h.transclude,_):_,h(f,i,x,r,p)}}d=null})).catch((function(t){M(t)&&i(t)})),function(t,e,n,r,i){t=i,e.$$destroyed||(d?d.push(e,n,r,t):(h.transcludeOnThisElement&&(t=Y(e,h.transclude,i)),h(f,e,n,r,t)))}}function ft(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function pt(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw ui("multidir",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,H(r))}function dt(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=!!(t=t.parent()).length;return e&&q.$$addBindingClass(t),function(t,n){var i=n.parent();e||q.$$addBindingClass(i),q.$$addBindingInfo(i,r.expressions),t.$watch(r,(function(t){n[0].nodeValue=t}))}}})}function gt(e,n){switch(e=nr(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function vt(t){return B(F.valueOf(t),"ng-prop-srcset")}function yt(t,e,n,r){if(v.test(r))throw ui("nodomevents");var i=function(t,e){var n=e.toLowerCase();return j[t+"|"+n]||j["*|"+n]}(t=L(t),r),o=g;"srcset"!==r||"img"!==t&&"source"!==t?i&&(o=F.getTrusted.bind(F,i)):o=vt,e.push({priority:100,compile:function(t,e){var i=m(e[n]),a=m(e[n],(function(t){return F.valueOf(t)}));return{pre:function(t,e){function n(){var n=i(t);e[0][r]=o(n)}n(),t.$watch(a,n)}}}})}function bt(t,e,r,i,o){var a=L(t),s=function(t,e){return"srcdoc"===e?F.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?F.RESOURCE_URL:F.MEDIA_URL:"xlinkHref"===e?"image"===t?F.MEDIA_URL:"a"===t?F.URL:F.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?F.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:F.URL}(a,i),l=h[i]||o,u=n(r,!o,s,l);if(u){if("multiple"===i&&"select"===a)throw ui("selmulti",H(t));if(v.test(i))throw ui("nodomevents");e.push({priority:100,compile:function(){return{pre:function(t,e,o){e=o.$$observers||(o.$$observers=st());var a=o[i];a!==r&&(u=a&&n(a,!0,s,l),r=a),u&&(o[i]=u(t),(e[i]||(e[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(u,(function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)})))}}}})}}function wt(e,n,r){var i,o,a=n[0],s=n.length,l=a.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===a){e[i++]=r,o=i+s-1;for(var u=e.length;i<u;i++,o++)o<u?e[i]=e[o]:delete e[i];e.length-=s-1,e.context===a&&(e.context=r);break}for(l&&l.replaceChild(r,a),e=t.document.createDocumentFragment(),i=0;i<s;i++)e.appendChild(n[i]);for(Xn.hasData(a)&&(Xn.data(r,Xn.data(a)),Xn(a).off("$destroy")),Xn.cleanData(e.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function xt(t,e){return c((function(){return t.apply(null,arguments)}),t,e)}function St(t,e,n,r,o,a){try{t(e,n,r,o,a)}catch(h){i(h,H(n))}}function _t(t,e){if(k)throw ui("missingattr",t,e)}function kt(t,e,r,i,a){function s(e,n,i){T(r.$onChanges)&&!N(n,i)&&(Et||(t.$$postDigest(U),Et=[]),u||(u={},Et.push(l)),u[e]&&(i=u[e].previousValue),u[e]=new Yt(i,n))}function l(){r.$onChanges(u),u=void 0}var u,c=[],h={};return o(i,(function(i,o){var l,u,f,p,g=i.attrName,v=i.optional;switch(i.mode){case"@":v||er.call(e,g)||(_t(g,a.name),r[o]=e[g]=void 0),v=e.$observe(g,(function(t){(S(t)||I(t))&&(s(o,t,r[o]),r[o]=t)})),e.$$observers[g].$$scope=t,S(l=e[g])?r[o]=n(l)(t):I(l)&&(r[o]=l),h[o]=new Yt(ci,r[o]),c.push(v);break;case"=":if(!er.call(e,g)){if(v)break;_t(g,a.name),e[g]=void 0}if(v&&!e[g])break;u=m(e[g]),p=u.literal?$:N,f=u.assign||function(){throw l=r[o]=u(t),ui("nonassign",e[g],g,a.name)},l=r[o]=u(t),v=function(e){return p(e,r[o])||(p(e,l)?f(t,e=r[o]):r[o]=e),l=e},v.$stateful=!0,v=i.collection?t.$watchCollection(e[g],v):t.$watch(m(e[g],v),null,u.literal),c.push(v);break;case"<":if(!er.call(e,g)){if(v)break;_t(g,a.name),e[g]=void 0}if(v&&!e[g])break;var y=(u=m(e[g])).literal,b=r[o]=u(t);h[o]=new Yt(ci,r[o]),v=t[i.collection?"$watchCollection":"$watch"](u,(function(t,e){if(e===t){if(e===b||y&&$(e,b))return;e=b}s(o,t,e),r[o]=t})),c.push(v);break;case"&":if(v||er.call(e,g)||_t(g,a.name),(u=e.hasOwnProperty(g)?m(e[g]):d)===d&&v)break;r[o]=function(e){return u(t,e)}}})),{initialChanges:h,removeWatches:c.length&&function(){for(var t=0,e=c.length;t<e;++t)c[t]()}}}var Et,Mt=/^\w/,Tt=t.document.createElement("div"),Ot=P,Pt=A,Ct=O;z.prototype={$normalize:Xt,$addClass:function(t){t&&0<t.length&&G.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&G.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Zt(t,e);n&&n.length&&G.addClass(this.$$element,n),(n=Zt(e,t))&&n.length&&G.removeClass(this.$$element,n)},$set:function(t,e,n,r){var a=Lt(this.$$element[0],t),s=Hr[t],l=t;a?(this.$$element.prop(t,e),r=a):s&&(this[s]=e,l=s),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=et(t,"-")),"img"===L(this.$$element)&&"srcset"===t&&(this[t]=e=B(e,"$set('srcset', value)")),!1!==n&&(null===e||y(e)?this.$$element.removeAttr(r):Mt.test(r)?a&&!1===e?this.$$element.removeAttr(r):this.$$element.attr(r,e):function(t,e,n){Tt.innerHTML="<span "+e+">";var r=(e=Tt.firstChild.attributes)[0];e.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],r,e)),(t=this.$$observers)&&o(t[l],(function(t){try{t(e)}catch(n){i(n)}}))},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=st()),i=r[t]||(r[t]=[]);return i.push(e),x.$evalAsync((function(){i.$$inter||!n.hasOwnProperty(t)||y(n[t])||e(n[t])})),function(){R(i,e)}}};var It=n.startSymbol(),At=n.endSymbol(),Rt="{{"===It&&"}}"===At?g:function(t){return t.replace(/\{\{/g,It).replace(/}}/g,At)},jt=/^ng(Attr|Prop|On)([A-Z].*)$/,Nt=/^(.+)Start$/;return q.$$addBindingInfo=_?function(t,e){var n=t.data("$binding")||[];E(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:d,q.$$addBindingClass=_?function(t){V(t,"ng-binding")}:d,q.$$addScopeInfo=_?function(t,e,n,r){t.data(n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope",e)}:d,q.$$addScopeClass=_?function(t,e){V(t,e?"ng-isolate-scope":"ng-scope")}:d,q.$$createComment=function(e,n){var r="";return _&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},q}]}function Yt(t,e){this.previousValue=t,this.currentValue=e}function Xt(t){return t.replace(hi,"").replace(fi,(function(t,e,n){return n?e.toUpperCase():e}))}function Zt(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/),o=0;t:for(;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue t;n+=(0<n.length?" ":"")+a}return n}function Jt(t){var e=(t=Xn(t)).length;if(1>=e)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===Er&&""===n.nodeValue.trim())&&or.call(t,e,1)}return t}function Qt(t,e){if(e&&S(e))return e;if(S(t)){var n=di.exec(t);if(n)return n[3]}}function te(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){ot(e,"controller"),w(e)?c(t,e):t[e]=n},this.$get=["$injector",function(e){function n(t,e,n,i){if(!t||!w(t.$scope))throw r("$controller")("noscp",i,e);t.$scope[e]=n}return function(r,i,o,a){var s,l,u;if(o=!0===o,a&&S(a)&&(u=a),S(r)){if(!(a=r.match(di)))throw pi("ctrlfmt",r);if(l=a[1],u=u||a[3],r=t.hasOwnProperty(l)?t[l]:function(t,e,n){if(!e)return t;for(var r,i=t,o=(e=e.split(".")).length,a=0;a<o;a++)r=e[a],t&&(t=(i=t)[r]);return!n&&T(t)?D(i,t):t}(i.$scope,l,!0),!r)throw pi("ctrlreg",l);it(r,l,!0)}return o?(o=(E(r)?r[r.length-1]:r).prototype,s=Object.create(o||null),u&&n(i,u,s,l||r.name),c((function(){var t=e.invoke(r,s,i,l);return t!==s&&(w(t)||T(t))&&(s=t,u&&n(i,u,s,l||r.name)),s}),{instance:s,identifier:u})):(s=e.instantiate(r,i,l),u&&n(i,u,s,l||r.name),s)}}]}function ee(){this.$get=["$window",function(t){return Xn(t.document)}]}function ne(){this.$get=["$document","$rootScope",function(t,e){function n(){i=r.hidden}var r=t[0],i=r&&r.hidden;return t.on("visibilitychange",n),e.$on("$destroy",(function(){t.off("visibilitychange",n)})),function(){return i}}]}function re(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function ie(t){return w(t)?k(t)?t.toISOString():U(t):t}function oe(){this.$get=function(){return function(t){if(!t)return"";var e=[];return a(t,(function(t,n){null===t||y(t)||T(t)||(E(t)?o(t,(function(t){e.push(X(n)+"="+X(ie(t)))})):e.push(X(n)+"="+X(ie(t))))})),e.join("&")}}}function ae(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){E(n)?o(n,(function(e,n){t(e,r+"["+(w(e)?n:"")+"]")})):w(n)&&!k(n)?a(n,(function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))})):(T(n)&&(n=n()),e.push(X(r)+"="+(null==n?"":X(ie(n)))))}(t,"",!0),e.join("&")}}}function se(t,e){if(S(t)){var n,r,i=t.replace(wi,"").trim();if(i)if((r=n=(n=e("Content-Type"))&&0===n.indexOf(mi))||(r=(r=i.match(yi))&&bi[r[0]].test(i)),r)try{t=B(i)}catch(o){if(!n)return t;throw xi("baddata",t,o)}}return t}function le(t){var e,n=st();return S(t)?o(t.split("\n"),(function(t){e=t.indexOf(":");var r=nr(mr(t.substr(0,e)));t=mr(t.substr(e+1)),r&&(n[r]=n[r]?n[r]+", "+t:t)})):w(t)&&o(t,(function(t,e){var r=nr(e),i=mr(t);r&&(n[r]=n[r]?n[r]+", "+i:i)})),n}function ue(t){var e;return function(n){return e||(e=le(t)),n?(void 0===(n=e[nr(n)])&&(n=null),n):e}}function ce(t,e,n,r){return T(r)?r(t,e,n):(o(r,(function(r){t=r(t,e,n)})),t)}function he(){var t=this.defaults={transformResponse:[se],transformRequest:[function(t){return w(t)&&"[object File]"!==sr.call(t)&&"[object Blob]"!==sr.call(t)&&"[object FormData]"!==sr.call(t)?U(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ut(vi),put:ut(vi),patch:ut(vi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return b(t)?(e=!!t,this):e};var n=this.interceptors=[],i=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(t){this.xsrfTrustedOrigins=t}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(a,s,l,u,h,f,p,g){function m(e){function n(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function i(t){var e=c({},t);return e.data=ce(t.data,t.headers,t.status,s.transformResponse),200<=(t=t.status)&&300>t?e:f.reject(e)}if(!w(e))throw r("$http")("badreq",e);if(!S(g.valueOf(e.url)))throw r("$http")("badreq",e.url);var s=c({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},e);s.headers=function(e){var n,r,i,a=t.headers,s=c({},e.headers);a=c({},a.common,a[nr(e.method)]);t:for(n in a){for(i in r=nr(n),s)if(nr(i)===r)continue t;s[n]=a[n]}return function(t,e){var n,r={};return o(t,(function(t,i){T(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t})),r}(s,ut(e))}(e),s.method=rr(s.method),s.paramSerializer=S(s.paramSerializer)?p.get(s.paramSerializer):s.paramSerializer,a.$$incOutstandingRequestCount("$http");var l=[],u=[];return e=f.resolve(s),o(_,(function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&u.push(t.response,t.responseError)})),e=(e=n(e,l)).then((function(e){var n=e.headers,r=ce(e.data,ue(n),void 0,e.transformRequest);return y(r)&&o(n,(function(t,e){"content-type"===nr(e)&&delete n[e]})),y(e.withCredentials)&&!y(t.withCredentials)&&(e.withCredentials=t.withCredentials),v(e,r).then(i,i)})),(e=n(e,u)).finally((function(){a.$$completeOutstandingRequest(d,"$http")}))}function v(n,r){function i(t){if(t){var n={};return o(t,(function(t,r){n[r]=function(n){function r(){t(n)}e?h.$applyAsync(r):h.$$phase?r():h.$apply(r)}})),n}}function a(t,e,r,i,o){(200<=(e=-1<=e?e:0)&&300>e?v.resolve:v.reject)({data:t,status:e,headers:ue(r),config:n,statusText:i,xhrStatus:o})}function u(t){a(t.data,t.status,ut(t.headers()),t.statusText,t.xhrStatus)}function c(){var t=m.pendingRequests.indexOf(n);-1!==t&&m.pendingRequests.splice(t,1)}var p,d,v=f.defer(),_=v.promise,M=n.headers,O="jsonp"===nr(n.method),P=n.url;return O?P=g.getTrustedResourceUrl(P):S(P)||(P=g.valueOf(P)),P=function(t,e){return 0<e.length&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(P,n.paramSerializer(n.params)),O&&(P=function(t,e){var n=t.split("?");if(2<n.length)throw xi("badjsonp",t);return o(n=K(n[1]),(function(n,r){if("JSON_CALLBACK"===n)throw xi("badjsonp",t);if(r===e)throw xi("badjsonp",e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(P,n.jsonpCallbackParam)),m.pendingRequests.push(n),_.then(c,c),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(p=w(n.cache)?n.cache:w(t.cache)?t.cache:x),p&&(b(d=p.get(P))?d&&T(d.then)?d.then(u,u):E(d)?a(d[1],d[0],ut(d[2]),d[3],d[4]):a(d,200,{},"OK","complete"):p.put(P,_)),y(d)&&((d=k(n.url)?l()[n.xsrfCookieName||t.xsrfCookieName]:void 0)&&(M[n.xsrfHeaderName||t.xsrfHeaderName]=d),s(n.method,P,r,(function(t,n,r,i,o){function s(){a(n,t,r,i,o)}p&&(200<=t&&300>t?p.put(P,[t,n,le(r),i,o]):p.remove(P)),e?h.$applyAsync(s):(s(),h.$$phase||h.$apply())}),M,n.timeout,n.withCredentials,n.responseType,i(n.eventHandlers),i(n.uploadEventHandlers))),_}var x=u("$http");t.paramSerializer=S(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var _=[];o(n,(function(t){_.unshift(S(t)?p.get(t):p.invoke(t))}));var k=function(t){var e=[Vi].concat(t.map(nn));return function(t){return t=nn(t),e.some(rn.bind(null,t))}}(i);return m.pendingRequests=[],function(t){o(arguments,(function(t){m[t]=function(e,n){return m(c({},n||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){o(arguments,(function(t){m[t]=function(e,n,r){return m(c({},r||{},{method:t,url:e,data:n}))}}))}("post","put","patch"),m.defaults=t,m}]}function fe(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function pe(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){function a(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var s=-1,l="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}return function(i,s,l,u,c,h,f,p,d,g){function m(t){_="timeout"===t,x&&x(),S&&S.abort()}function v(t,e,r,i,o,a){b(k)&&n.cancel(k),x=S=null,t(e,r,i,o,a)}if(s=s||t.url(),"jsonp"===nr(i))var w=r.createCallback(s),x=a(s,w,(function(t,e){var n=200===t&&r.getResponse(w);v(u,t,n,"",e,"complete"),r.removeCallback(w)}));else{var S=e(i,s),_=!1;if(S.open(i,s,!0),o(c,(function(t,e){b(t)&&S.setRequestHeader(e,t)})),S.onload=function(){var t=S.statusText||"",e="response"in S?S.response:S.responseText,n=1223===S.status?204:S.status;0===n&&(n=e?200:"file"===nn(s).protocol?404:0),v(u,n,e,S.getAllResponseHeaders(),t,"complete")},S.onerror=function(){v(u,-1,null,null,"","error")},S.ontimeout=function(){v(u,-1,null,null,"","timeout")},S.onabort=function(){v(u,-1,null,null,"",_?"timeout":"abort")},o(d,(function(t,e){S.addEventListener(e,t)})),o(g,(function(t,e){S.upload.addEventListener(e,t)})),f&&(S.withCredentials=!0),p)try{S.responseType=p}catch(E){if("json"!==p)throw E}S.send(y(l)?null:l)}if(0<h)var k=n((function(){m("timeout")}),h);else h&&T(h.then)&&h.then((function(){m(b(h.$$timeoutId)?"timeout":"abort")}))}}(t,r,t.defer,e,n[0])}]}function de(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(t){return"\\\\\\"+t}function a(n){return n.replace(f,t).replace(p,e)}function s(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function l(o,l,f,p){var d=f===i.URL||f===i.MEDIA_URL;if(!o.length||-1===o.indexOf(t)){if(l)return;return l=a(o),d&&(l=i.getTrusted(f,l)),(l=m(l)).exp=o,l.expressions=[],l.$$watchDelegate=s,l}p=!!p;for(var g,v,w,x,S=0,_=[],k=o.length,E=[],M=[];S<k;){if(-1===(g=o.indexOf(t,S))||-1===(v=o.indexOf(e,g+u))){S!==k&&E.push(a(o.substring(S)));break}S!==g&&E.push(a(o.substring(S,g))),S=o.substring(g+u,v),_.push(S),S=v+h,M.push(E.length),E.push("")}x=1===E.length&&1===M.length;var T=d&&x?void 0:function(t){try{return t=f&&!d?i.getTrusted(f,t):i.valueOf(t),p&&!b(t)?t:lt(t)}catch(e){r(Si.interr(o,e))}};if(w=_.map((function(t){return n(t,T)})),!l||_.length){var O=function(t){for(var e=0,n=_.length;e<n;e++){if(p&&y(t[e]))return;E[M[e]]=t[e]}return d?i.getTrusted(f,x?E[0]:E.join("")):(f&&1<E.length&&Si.throwNoconcat(o),E.join(""))};return c((function(t){var e=0,n=_.length,i=Array(n);try{for(;e<n;e++)i[e]=w[e](t);return O(i)}catch(a){r(Si.interr(o,a))}}),{exp:o,expressions:_,$$watchDelegate:function(t,e){var n;return t.$watchGroup(w,(function(r,i){var o=O(r);e.call(this,o,r!==i?n:o,t),n=o}))}})}}var u=t.length,h=e.length,f=new RegExp(t.replace(/./g,o),"g"),p=new RegExp(e.replace(/./g,o),"g");return l.startSymbol=function(){return t},l.endSymbol=function(){return e},l}]}function ge(){this.$get=["$$intervalFactory","$window",function(t,e){var n={},r=function(t){e.clearInterval(t),delete n[t]},i=t((function(t,r,i){return t=e.setInterval(t,r),n[t]=i,t}),r);return i.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw _i("badprom");if(!n.hasOwnProperty(t.$$intervalId))return!1;t=t.$$intervalId;var e=n[t],i=e.promise;return i.$$state&&(i.$$state.pur=!0),e.reject("canceled"),r(t),!0},i}]}function me(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,n,r){return function(i,o){return function(a,s,l,u){function c(){h?a.apply(null,f):a(p)}var h=4<arguments.length,f=h?ir.call(arguments,4):[],p=0,d=b(u)&&!u,g=(d?n:e).defer(),m=g.promise;return l=b(l)?l:0,m.$$intervalId=i((function(){d?t.defer(c):r.$evalAsync(c),g.notify(p++),0<l&&p>=l&&(g.resolve(p),o(m.$$intervalId)),d||r.$apply()}),s,g,d),m}}}]}function ve(t,e){var n=nn(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=f(n.port)||Mi[n.protocol]||null}function ye(t,e,n){if(Oi.test(t))throw Ti("badpath",t);(r="/"!==t.charAt(0))&&(t="/"+t),t=nn(t);for(var r,i=(r=(r&&"/"===t.pathname.charAt(0)?t.pathname.substring(1):t.pathname).split("/")).length;i--;)r[i]=decodeURIComponent(r[i]),n&&(r[i]=r[i].replace(/\//g,"%2F"));n=r.join("/"),e.$$path=n,e.$$search=K(t.search),e.$$hash=decodeURIComponent(t.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function be(t,e){return t.slice(0,e.length)===e}function we(t,e){if(be(e,t))return e.substr(t.length)}function xe(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function Se(t,e,n){this.$$html5=!0,n=n||"",ve(t,this),this.$$parse=function(t){var n=we(e,t);if(!S(n))throw Ti("ipthprfx",t,e);ye(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(b(o=we(t,r))?(a=o,a=n&&b(o=we(n,o))?e+(we("/",o)||o):t+a):b(o=we(e,r))?a=e+o:e===r+"/"&&(a=e),a&&this.$$parse(a),!!a);var o,a}}function _e(t,e,n){ve(t,this),this.$$parse=function(r){var i;y(o=we(t,r)||we(e,r))||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",y(o)&&(t=r,this.replace())):y(i=we(n,o))&&(i=o),ye(i,this,!1),r=this.$$path;var o,a=/^\/[A-Z]:(\/.*)/;be(i,o=t)&&(i=i.replace(o,"")),a.exec(i)||(r=(i=a.exec(r))?i[1]:r),this.$$path=r,this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?n+e:"")},this.$$parseLinkUrl=function(e,n){return xe(t)===xe(e)&&(this.$$parse(e),!0)}}function ke(t,e,n){this.$$html5=!0,_e.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===xe(r)?o=r:(a=we(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$normalizeUrl=function(e){return t+n+e}}function Ee(t){return function(){return this[t]}}function Me(t,e){return function(n){return y(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function Te(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return b(e)?(t=e,this):t},this.html5Mode=function(t){return I(t)?(e.enabled=t,this):w(t)?(I(t.enabled)&&(e.enabled=t.enabled),I(t.requireBase)&&(e.requireBase=t.requireBase),(I(t.rewriteLinks)||S(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(t,e,n){var i=u.url(),o=u.$$state;try{r.url(t,e,n),u.$$state=r.state()}catch(a){throw u.url(i),u.$$state=o,a}}function l(t,e){n.$broadcast("$locationChangeSuccess",u.absUrl(),t,u.$$state,e)}var u,c;c=r.baseHref();var h,f=r.url();if(e.enabled){if(!c&&e.requireBase)throw Ti("nobase");h=f.substring(0,f.indexOf("/",f.indexOf("//")+2))+(c||"/"),c=i.history?Se:ke}else h=xe(f),c=_e;var p=h.substr(0,xe(h).lastIndexOf("/")+1);(u=new c(h,p,"#"+t)).$$parseLinkUrl(f,f),u.$$state=r.state();var d=/^\s*(javascript|mailto):/i;o.on("click",(function(t){if((a=e.rewriteLinks)&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var i=Xn(t.target);"a"!==L(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;if(!S(a)||!y(i.attr(a))){var a=i.prop("href"),s=i.attr("href")||i.attr("xlink:href");w(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=nn(a.animVal).href),d.test(a)||!a||i.attr("target")||t.isDefaultPrevented()||!u.$$parseLinkUrl(a,s)||(t.preventDefault(),u.absUrl()!==r.url()&&n.$apply())}}})),u.absUrl()!==f&&r.url(u.absUrl(),!0);var g=!0;return r.onUrlChange((function(t,e){be(t,p)?(n.$evalAsync((function(){var r,i=u.absUrl(),o=u.$$state;u.$$parse(t),u.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,u.absUrl()===t&&(r?(u.$$parse(i),u.$$state=o,s(i,!1,o)):(g=!1,l(i,o)))})),n.$$phase||n.$digest()):a.location.href=t})),n.$watch((function(){if(g||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var t=r.url(),e=u.absUrl(),o=r.state(),a=u.$$replace,c=!function(t,e){return t===e||nn(t).href===nn(e).href}(t,e)||u.$$html5&&i.history&&o!==u.$$state;(g||c)&&(g=!1,n.$evalAsync((function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;u.absUrl()===e&&(r?(u.$$parse(t),u.$$state=o):(c&&s(e,a,o===u.$$state?null:u.$$state),l(t,o)))})))}u.$$replace=!1})),u}]}function Oe(){var t=!0,e=this;this.debugEnabled=function(e){return b(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return M(t)&&(t.stack&&a?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function i(t){var e=n.console||{},i=e[t]||e.log||d;return function(){var t=[];return o(arguments,(function(e){t.push(r(e))})),Function.prototype.apply.call(i,e,t)}}var a=Yn||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function Pe(t){return t+""}function Ce(t,e){return void 0!==t?t:e}function Ie(t,e){return void 0===t?e:void 0===e?t:t+e}function Ae(t,e,n){var r,i,a=t.isPure=function(t,e){switch(t.type){case ji.MemberExpression:if(t.computed)return!1;break;case ji.UnaryExpression:return 1;case ji.BinaryExpression:return"+"!==t.operator&&1;case ji.CallExpression:return!1}return void 0===e?Ni:e}(t,n);switch(t.type){case ji.Program:r=!0,o(t.body,(function(t){Ae(t.expression,e,a),r=r&&t.expression.constant})),t.constant=r;break;case ji.Literal:t.constant=!0,t.toWatch=[];break;case ji.UnaryExpression:Ae(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case ji.BinaryExpression:Ae(t.left,e,a),Ae(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case ji.LogicalExpression:Ae(t.left,e,a),Ae(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case ji.ConditionalExpression:Ae(t.test,e,a),Ae(t.alternate,e,a),Ae(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case ji.Identifier:t.constant=!1,t.toWatch=[t];break;case ji.MemberExpression:Ae(t.object,e,a),t.computed&&Ae(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case ji.CallExpression:r=n=!!t.filter&&!e(t.callee.name).$stateful,i=[],o(t.arguments,(function(t){Ae(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=n?i:[t];break;case ji.AssignmentExpression:Ae(t.left,e,a),Ae(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case ji.ArrayExpression:r=!0,i=[],o(t.elements,(function(t){Ae(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=i;break;case ji.ObjectExpression:r=!0,i=[],o(t.properties,(function(t){Ae(t.value,e,a),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(Ae(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))})),t.constant=r,t.toWatch=i;break;case ji.ThisExpression:case ji.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Le(t){if(1===t.length){var e=(t=t[0].expression).toWatch;return 1!==e.length||e[0]!==t?e:void 0}}function Re(t){return t.type===ji.Identifier||t.type===ji.MemberExpression}function je(t){if(1===t.body.length&&Re(t.body[0].expression))return{type:ji.AssignmentExpression,left:t.body[0].expression,right:{type:ji.NGValueParameter},operator:"="}}function Ne(t){this.$filter=t}function $e(t){this.$filter=t}function Fe(t,e,n){this.ast=new ji(t,n),this.astCompiler=n.csp?new $e(e):new Ne(e)}function De(t){return T(t.valueOf)?t.valueOf():Ii.call(t)}function Ge(){var t,e,n=st(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){function a(t,e){var r,o;switch(typeof t){case"string":return o=t=t.trim(),(r=n[o])||(r=new Fe(r=new Ri(m),i,m).parse(t),n[o]=f(r)),p(r,e);case"function":return p(t,e);default:return p(d,e)}}function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&(t=De(t),"object"==typeof t&&!n))&&(t===e||t!=t&&e!=e)}function l(t,e,n,r,i){var o;if(1===(l=r.inputs).length){var a=s,l=l[0];return t.$watch((function(t){var e=l(t);return s(e,a,l.isPure)||(o=r(t,void 0,void 0,[e]),a=e&&De(e)),o}),e,n,i)}for(var u=[],c=[],h=0,f=l.length;h<f;h++)u[h]=s,c[h]=null;return t.$watch((function(t){for(var e=!1,n=0,i=l.length;n<i;n++){var a=l[n](t);(e||(e=!s(a,u[n],l[n].isPure)))&&(c[n]=a,u[n]=a&&De(a))}return e&&(o=r(t,void 0,void 0,c)),o}),e,n,i)}function u(t,e,n,r,i){function o(){u(l)&&s()}function a(t,e,n,r){return l=d&&r?r[0]:h(t,e,n,r),u(l)&&t.$$postDigest(o),p(l)}var s,l,u=r.literal?c:b,h=r.$$intercepted||r,p=r.$$interceptor||g,d=r.inputs&&!h.inputs;return a.literal=r.literal,a.constant=r.constant,a.inputs=r.inputs,f(a),s=t.$watch(a,e,n,i)}function c(t){var e=!0;return o(t,(function(t){b(t)||(e=!1)})),e}function h(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function f(t){return t.constant?t.$$watchDelegate=h:t.oneTime?t.$$watchDelegate=u:t.inputs&&(t.$$watchDelegate=l),t}function p(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,r=function(r,i,o,a){return r=n&&a?a[0]:t(r,i,o,a),e(r)};return r.$$intercepted=t,r.$$interceptor=e,r.literal=t.literal,r.oneTime=t.oneTime,r.constant=t.constant,e.$stateful||(n=!t.inputs,r.inputs=t.inputs?t.inputs:[t],e.$$pure||(r.inputs=r.inputs.map((function(t){return t.isPure===Ni?function(e){return t(e)}:t})))),f(r)}var m={csp:yr().noUnsafeEval,literals:j(r),isIdentifierStart:T(t)&&t,isIdentifierContinue:T(e)&&e};return a.$$getAst=function(t){return new Fe(new Ri(m),i,m).getAst(t).ast},a}]}function Ue(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return ze((function(t){e.$evalAsync(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return b(e)?(t=e,this):t}}function Be(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return ze((function(t){e.defer(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return b(e)?(t=e,this):t}}function ze(t,e,n){function i(){return new a}function a(){var t=this.promise=new s;this.resolve=function(e){h(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){g(t,e)}}function s(){this.$$state={status:0}}function l(){for(;!_&&k.length;){var t=k.shift();if(!t.pur){t.pur=!0;var n="Possibly unhandled rejection: "+("function"==typeof(n=t.value)?n.toString().replace(/ \{[\s\S]*$/,""):y(n)?"undefined":"string"!=typeof n?ct(n,void 0):n);M(t.value)?e(t.value,n):e(n)}}}function u(r){!n||r.pending||2!==r.status||r.pur||(0===_&&0===k.length&&t(l),k.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++_,t((function(){var i,o,a;a=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var s=0,u=a.length;s<u;++s){r.pur=!0,o=a[s][0],i=a[s][r.status];try{T(i)?h(o,i(r.value)):1===r.status?h(o,r.value):p(o,r.value)}catch(d){p(o,d),d&&!0===d.$$passToExceptionHandler&&e(d)}}}finally{--_,n&&0===_&&t(l)}})))}function h(t,e){t.$$state.status||(e===t?d(t,S("qcycle",e)):f(t,e))}function f(t,e){function n(e){i||(i=!0,d(t,e))}var r,i=!1;try{(w(e)||T(e))&&(r=e.then),T(r)?(t.$$state.status=-1,r.call(e,(function(e){i||(i=!0,f(t,e))}),n,(function(e){g(t,e)}))):(t.$$state.value=e,t.$$state.status=1,u(t.$$state))}catch(h){n(h)}}function p(t,e){t.$$state.status||d(t,e)}function d(t,e){t.$$state.value=e,t.$$state.status=2,u(t.$$state)}function g(n,r){var i=n.$$state.pending;0>=n.$$state.status&&i&&i.length&&t((function(){for(var t,n,o=0,a=i.length;o<a;o++){n=i[o][0],t=i[o][3];try{g(n,T(t)?t(r):r)}catch(h){e(h)}}}))}function m(t){var e=new s;return p(e,t),e}function v(t,e,n){var r=null;try{T(n)&&(r=n())}catch(a){return m(a)}return r&&T(r.then)?r.then((function(){return e(t)}),m):e(t)}function b(t,e,n,r){var i=new s;return h(i,t),i.then(e,n,r)}function x(t){if(!T(t))throw S("norslvr",t);var e=new s;return t((function(t){h(e,t)}),(function(t){p(e,t)})),e}var S=r("$q",TypeError),_=0,k=[];c(s.prototype,{then:function(t,e,n){if(y(t)&&y(e)&&y(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),0<this.$$state.status&&u(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return v(e,O,t)}),(function(e){return v(e,m,t)}),e)}});var O=b;return x.prototype=s.prototype,x.defer=i,x.reject=m,x.when=b,x.resolve=O,x.all=function(t){var e=new s,n=0,r=E(t)?[]:{};return o(t,(function(t,i){n++,b(t).then((function(t){r[i]=t,--n||h(e,r)}),(function(t){p(e,t)}))})),0===n&&h(e,r),e},x.race=function(t){var e=i();return o(t,(function(t){b(t).then(e.resolve,e.reject)})),e.promise},x}function Ve(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function qe(){var t=10,e=r("$rootScope"),n=null,a=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(r,s,l){function u(t){t.currentScope.$$destroyed=!0}function c(t){9===Yn&&(t.$$childHead&&c(t.$$childHead),t.$$nextSibling&&c(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function h(){this.$id=++hr,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$suspended=this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function f(t){if(b.$$phase)throw e("inprog",b.$$phase);b.$$phase=t}function p(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function g(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function m(){}function v(){for(;k.length;)try{k.shift()()}catch(pr){r(pr)}a=null}h.prototype={constructor:h,$new:function(t,e){var n;return e=e||this,t?(n=new h).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++hr,this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",u),n},$watch:function(t,e,r,i){var o=s(t);if(e=T(e)?e:d,o.$$watchDelegate)return o.$$watchDelegate(this,e,r,o,t);var a=this,l=a.$$watchers,u={fn:e,last:m,get:o,exp:i||t,eq:!!r};return n=null,l||((l=a.$$watchers=[]).$$digestWatchIndex=-1),l.unshift(u),l.$$digestWatchIndex++,p(this,1),function(){var t=R(l,u);0<=t&&(p(a,-1),t<l.$$digestWatchIndex&&l.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){function n(){l=!1;try{u?(u=!1,e(i,i,s)):e(i,r,s)}finally{for(var n=0;n<t.length;n++)r[n]=i[n]}}var r=Array(t.length),i=Array(t.length),a=[],s=this,l=!1,u=!0;if(!t.length){var c=!0;return s.$evalAsync((function(){c&&e(i,i,s)})),function(){c=!1}}return 1===t.length?this.$watch(t[0],(function(t,n,o){i[0]=t,r[0]=n,e(i,t===n?i:r,o)})):(o(t,(function(t,e){var r=s.$watch(t,(function(t){i[e]=t,l||(l=!0,s.$evalAsync(n))}));a.push(r)})),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){var e,n,a;if(!y(r=t)){if(w(r))if(i(r))for(o!==f&&(g=(o=f).length=0,c++),t=r.length,g!==t&&(c++,o.length=g=t),e=0;e<t;e++)a=o[e],n=r[e],a!=a&&n!=n||a===n||(c++,o[e]=n);else{for(e in o!==p&&(o=p={},g=0,c++),t=0,r)er.call(r,e)&&(t++,n=r[e],a=o[e],e in o?a!=a&&n!=n||a===n||(c++,o[e]=n):(g++,o[e]=n,c++));if(g>t)for(e in c++,o)er.call(r,e)||(g--,delete o[e])}else o!==r&&(o=r,c++);return c}}n.$$pure=s(t).literal,n.$stateful=!n.$$pure;var r,o,a,l=this,u=1<e.length,c=0,h=s(t,n),f=[],p={},d=!0,g=0;return this.$watch(h,(function(){if(d?(d=!1,e(r,r,l)):e(r,a,l),u)if(w(r))if(i(r)){a=Array(r.length);for(var t=0;t<r.length;t++)a[t]=r[t]}else for(t in a={},r)er.call(r,t)&&(a[t]=r[t]);else a=r}))},$digest:function(){var i,o,s,u,c,h,p,g,y=t,k=x.length?b:this,M=[];f("$digest"),l.$$checkUrlChange(),this===b&&null!==a&&(l.defer.cancel(a),v()),n=null;do{for(c=!1,h=k,u=0;u<x.length;u++){try{(0,(g=x[u]).fn)(g.scope,g.locals)}catch(S){r(S)}n=null}x.length=0;t:do{if(u=!h.$$suspended&&h.$$watchers)for(u.$$digestWatchIndex=u.length;u.$$digestWatchIndex--;)try{if(i=u[u.$$digestWatchIndex])if((o=(0,i.get)(h))===(s=i.last)||(i.eq?$(o,s):fr(o)&&fr(s))){if(i===n){c=!1;break t}}else c=!0,n=i,i.last=i.eq?j(o,null):o,(0,i.fn)(o,s===m?o:s,h),5>y&&(M[p=4-y]||(M[p]=[]),M[p].push({msg:T(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,newVal:o,oldVal:s}))}catch(d){r(d)}if(!(u=!h.$$suspended&&h.$$watchersCount&&h.$$childHead||h!==k&&h.$$nextSibling))for(;h!==k&&!(u=h.$$nextSibling);)h=h.$parent}while(h=u);if((c||x.length)&&!y--)throw b.$$phase=null,e("infdig",t,M)}while(c||x.length);for(b.$$phase=null;E<_.length;)try{_[E++]()}catch(w){r(w)}_.length=E=0,l.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===b&&l.$$applicationDestroyed(),p(this,-this.$$watchersCount),this.$$listenerCount)g(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=d,this.$on=this.$watch=this.$watchGroup=function(){return d},this.$$listeners={},this.$$nextSibling=null,c(this)}},$eval:function(t,e){return s(t)(this,e)},$evalAsync:function(t,e){b.$$phase||x.length||l.defer((function(){x.length&&b.$digest()}),null,"$evalAsync"),x.push({scope:this,fn:s(t),locals:e})},$$postDigest:function(t){_.push(t)},$apply:function(e){try{f("$apply");try{return this.$eval(e)}finally{b.$$phase=null}}catch(t){r(t)}finally{try{b.$digest()}catch(n){throw r(n),n}}},$applyAsync:function(t){var e=this;t&&k.push((function(){e.$eval(t)})),t=s(t),null===a&&(a=l.defer((function(){b.$apply(v)}),null,"$applyAsync"))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],g(i,1,t))}},$emit:function(t,e){var n,i,o,a=[],s=this,l=!1,u={name:t,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=F([u],arguments,1);do{for(n=s.$$listeners[t]||a,u.currentScope=s,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,c)}catch(p){r(p)}else n.splice(i,1),i--,o--;if(l)break;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(t,e){var n=this,i=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var a,s,l=F([o],arguments,1);n=i;){for(o.currentScope=n,a=0,s=(i=n.$$listeners[t]||[]).length;a<s;a++)if(i[a])try{i[a].apply(null,l)}catch(c){r(c)}else i.splice(a,1),a--,s--;if(!(i=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var b=new h,x=b.$$asyncQueue=[],_=b.$$postDigestQueue=[],k=b.$$applyAsyncQueue=[],E=0;return b}]}function He(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return b(e)?(t=e,this):t},this.imgSrcSanitizationTrustedUrlList=function(t){return b(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i=r?e:t,o=nn(n&&n.trim()).href;return""===o||o.match(i)?n:"unsafe:"+o}}}function We(t){var e=[];return b(t)&&o(t,(function(t){e.push(function(t){if("self"===t)return t;if(S(t)){if(-1<t.indexOf("***"))throw Fi("iwcard",t);return t=vr(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(O(t))return new RegExp("^"+t.source+"$");throw Fi("imatcher")}(t))})),e}function Ke(){this.SCE_CONTEXTS=Di;var e=["self"],n=[];this.trustedResourceUrlList=function(t){return arguments.length&&(e=We(t)),e},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(t){this.trustedResourceUrlList=t}}),this.bannedResourceUrlList=function(t){return arguments.length&&(n=We(t)),n},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(t){this.bannedResourceUrlList=t}}),this.$get=["$injector","$$sanitizeUri",function(r,i){function o(e,n){var r;return"self"===e?(r=rn(n,Vi))||(t.document.baseURI?r=t.document.baseURI:($i||(($i=t.document.createElement("a")).href=".",$i=$i.cloneNode(!1)),r=$i.href),r=rn(n,r)):r=!!e.exec(n.href),r}function a(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}var s=function(t){throw Fi("unsafe")};r.has("$sanitize")&&(s=r.get("$sanitize"));var l=a(),u={};return u[Di.HTML]=a(l),u[Di.CSS]=a(l),u[Di.MEDIA_URL]=a(l),u[Di.URL]=a(u[Di.MEDIA_URL]),u[Di.JS]=a(l),u[Di.RESOURCE_URL]=a(u[Di.URL]),{trustAs:function(t,e){var n=u.hasOwnProperty(t)?u[t]:null;if(!n)throw Fi("icontext",t,e);if(null===e||y(e)||""===e)return e;if("string"!=typeof e)throw Fi("itype",t);return new n(e)},getTrusted:function(t,r){if(null===r||y(r)||""===r)return r;if((c=u.hasOwnProperty(t)?u[t]:null)&&r instanceof c)return r.$$unwrapTrustedValue();if(T(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),t===Di.MEDIA_URL||t===Di.URL)return i(r.toString(),t===Di.MEDIA_URL);if(t===Di.RESOURCE_URL){var a,l,c=nn(r.toString()),h=!1;for(a=0,l=e.length;a<l;a++)if(o(e[a],c)){h=!0;break}if(h)for(a=0,l=n.length;a<l;a++)if(o(n[a],c)){h=!1;break}if(h)return r;throw Fi("insecurl",r.toString())}if(t===Di.HTML)return s(r);throw Fi("unsafe")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function Ye(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>Yn)throw Fi("iequirks");var r=ut(Di);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=g),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,(function(e){return r.getTrusted(t,e)}))};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(Di,(function(t,e){var n=nr(e);r[("parse_as_"+n).replace(Gi,ht)]=function(e){return i(t,e)},r[("get_trusted_"+n).replace(Gi,ht)]=function(e){return a(t,e)},r[("trust_as_"+n).replace(Gi,ht)]=function(e){return s(t,e)}})),r}]}function Xe(){this.$get=["$window","$document",function(t,e){var n={},r=!((!t.nw||!t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=f((/android (\d+)/.exec(nr((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},s=a.body&&a.body.style,l=!1,u=!1;return s&&(l=!(!("transition"in s)&&!("webkitTransition"in s)),u=!(!("animation"in s)&&!("webkitAnimation"in s))),{history:!(!r||4>i||o),hasEvent:function(t){if("input"===t&&Yn)return!1;if(y(n[t])){var e=a.createElement("div");n[t]="on"+t in e}return n[t]},csp:yr(),transitions:l,animations:u,android:i}}]}function Ze(){this.$get=m((function(t){return new Je(t)}))}function Je(t){function e(){var t=i.pop();return t&&t.cb}function n(t){for(var e=i.length-1;0<=e;--e){var n=i[e];if(n.type===t)return i.splice(e,1),n.cb}}var r={},i=[],o=this.ALL_TASKS_TYPE="$$all$$",a=this.DEFAULT_TASK_TYPE="$$default$$";this.completeTask=function(i,s){s=s||a;try{i()}finally{var l;r[l=s||a]&&(r[l]--,r[o]--),l=r[s];var u=r[o];if(!u||!l)for(l=u?n:e;u=l(s);)try{u()}catch(c){t.error(c)}}},this.incTaskCount=function(t){r[t=t||a]=(r[t]||0)+1,r[o]=(r[o]||0)+1},this.notifyWhenNoPendingTasks=function(t,e){r[e=e||o]?i.push({type:e,cb:t}):t()}}function Qe(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function a(s,l){a.totalPendingRequests++,S(s)&&!y(n.get(s))||(s=o.getTrustedResourceUrl(s));var u=r.defaults&&r.defaults.transformResponse;return E(u)?u=u.filter((function(t){return t!==se})):u===se&&(u=null),r.get(s,c({cache:n,transformResponse:u},t)).finally((function(){a.totalPendingRequests--})).then((function(t){return n.put(s,t.data)}),(function(t){return l||(t=Ui("tpload",s,t.status,t.statusText),e(t)),i.reject(t)}))}return a.totalPendingRequests=0,a}]}function tn(){this.$get=["$rootScope","$browser","$location",function(t,e,n){return{findBindings:function(t,e,n){t=t.getElementsByClassName("ng-binding");var r=[];return o(t,(function(t){var i=cr.element(t).data("$binding");i&&o(i,(function(i){n?new RegExp("(^|\\s)"+vr(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)}))})),r},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=t.querySelectorAll("["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]');if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}function en(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){function o(o,s,l){T(o)||(l=s,s=o,o=d);var u,c=ir.call(arguments,3),h=b(l)&&!l,f=(h?r:n).defer(),p=f.promise;return u=e.defer((function(){try{f.resolve(o.apply(null,c))}catch(e){f.reject(e),i(e)}finally{delete a[p.$$timeoutId]}h||t.$apply()}),s,"$timeout"),p.$$timeoutId=u,a[u]=f,p}var a={};return o.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw Bi("badprom");if(!a.hasOwnProperty(t.$$timeoutId))return!1;t=t.$$timeoutId;var n=a[t],r=n.promise;return r.$$state&&(r.$$state.pur=!0),n.reject("canceled"),delete a[t],e.defer.cancel(t)},o}]}function nn(t){return S(t)?(Yn&&(zi.setAttribute("href",t),t=zi.href),zi.setAttribute("href",t),t=zi.hostname,!qi&&-1<t.indexOf(":")&&(t="["+t+"]"),{href:zi.href,protocol:zi.protocol?zi.protocol.replace(/:$/,""):"",host:zi.host,search:zi.search?zi.search.replace(/^\?/,""):"",hash:zi.hash?zi.hash.replace(/^#/,""):"",hostname:t,port:zi.port,pathname:"/"===zi.pathname.charAt(0)?zi.pathname:"/"+zi.pathname}):t}function rn(t,e){return t=nn(t),e=nn(e),t.protocol===e.protocol&&t.host===e.host}function on(){this.$get=m(t)}function an(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var n=t[0]||{},r={},i="";return function(){var t,o,a,s,l;try{t=n.cookie||""}catch(u){t=""}if(t!==i)for(t=(i=t).split("; "),r={},a=0;a<t.length;a++)0<(s=(o=t[a]).indexOf("="))&&(l=e(o.substring(0,s)),y(r[l])&&(r[l]=e(o.substring(s+1))));return r}}function sn(){this.$get=an}function ln(t){function e(n,r){if(w(n)){var i={};return o(n,(function(t,n){i[n]=e(n,t)})),i}return t.factory(n+"Filter",r)}this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],e("currency",fn),e("date",xn),e("filter",un),e("json",Sn),e("limitTo",_n),e("lowercase",Ji),e("number",pn),e("orderBy",En),e("uppercase",Qi)}function un(){return function(t,e,n,o){if(!i(t)){if(null==t)return t;throw r("filter")("notarray",t)}var a;switch(o=o||"$",hn(e)){case"function":break;case"boolean":case"null":case"number":case"string":a=!0;case"object":e=function(t,e,n,r){var i=w(t)&&n in t;return!0===e?e=$:T(e)||(e=function(t,e){return!y(t)&&(null===t||null===e?t===e:!(w(e)||w(t)&&!v(t))&&(t=nr(""+t),e=nr(""+e),-1!==t.indexOf(e)))}),function(o){return i&&!w(o)?cn(o,t[n],e,n,!1):cn(o,t,e,n,r)}}(e,n,o,a);break;default:return t}return Array.prototype.filter.call(t,e)}}function cn(t,e,n,r,i,o){var a=hn(t),s=hn(e);if("string"===s&&"!"===e.charAt(0))return!cn(t,e.substring(1),n,r,i);if(E(t))return t.some((function(t){return cn(t,e,n,r,i)}));switch(a){case"object":var l;if(i){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&cn(t[l],e,n,r,!0))return!0;return!o&&cn(t,e,n,r,!1)}if("object"===s){for(l in e)if(!T(o=e[l])&&!y(o)&&!cn((a=l===r)?t:t[l],o,n,r,a,a))return!1;return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function hn(t){return null===t?"null":typeof t}function fn(t){var e=t.NUMBER_FORMATS;return function(t,n,r){y(n)&&(n=e.CURRENCY_SYM),y(r)&&(r=e.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:dn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(i,n)}}function pn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:dn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function dn(t,e,n,r,i){if(!S(t)&&!_(t)||isNaN(t))return"";var o=!isFinite(t),a=!1,s=Math.abs(t)+"",l="";if(o)l="â";else{for(a=function(t){var e,n,r,i,o,a=0;for(-1<(n=t.indexOf(Wi))&&(t=t.replace(Wi,"")),0<(r=t.search(/e/i))?(0>n&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):0>n&&(n=t.length),r=0;t.charAt(r)===Ki;r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===Ki;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>Hi&&(e=e.splice(0,Hi-1),a=n-1,n=1),{d:e,e:a,i:n}}(s),function(t,e,n,r){var i=t.d,o=i.length-t.i;if(r=i[n=(e=y(e)?Math.min(Math.max(n,o),r):+e)+t.i],0<n){i.splice(Math.max(t.i,n));for(var a=n;a<i.length;a++)i[a]=0}else for(o=Math.max(0,o),t.i=1,i.length=Math.max(1,n=e+1),i[0]=0,a=1;a<n;a++)i[a]=0;if(5<=r)if(0>n-1){for(r=0;r>n;r--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[n-1]++;for(;o<Math.max(0,e);o++)i.push(0);(e=i.reduceRight((function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)}),0))&&(i.unshift(e),t.i++)}(a,i,e.minFrac,e.maxFrac),l=a.d,s=a.i,i=a.e,o=[],a=l.reduce((function(t,e){return t&&!e}),!0);0>s;)l.unshift(0),s++;for(0<s?o=l.splice(s,l.length):(o=l,l=[0]),s=[],l.length>=e.lgSize&&s.unshift(l.splice(-e.lgSize,l.length).join(""));l.length>e.gSize;)s.unshift(l.splice(-e.gSize,l.length).join(""));l.length&&s.unshift(l.join("")),l=s.join(n),o.length&&(l+=r+o.join("")),i&&(l+="e+"+i)}return 0>t&&!a?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function gn(t,e,n,r){var i="";for((0>t||r&&0>=t)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=Ki+t;return n&&(t=t.substr(t.length-e)),i+t}function mn(t,e,n,r,i){return n=n||0,function(o){return o=o["get"+t](),(0<n||o>-n)&&(o+=n),0===o&&-12===n&&(o=12),gn(o,e,r,i)}}function vn(t,e,n){return function(r,i){var o=r["get"+t]();return i[rr((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function yn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function bn(t){return function(e){var n=yn(e.getFullYear());return e=+new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))-+n,gn(e=1+Math.round(e/6048e5),t)}}function wn(t,e){return 0>=t.getFullYear()?e.ERAS[0]:e.ERAS[1]}function xn(t){function e(t){var e;if(e=t.match(n)){t=new Date(0);var r=0,i=0,o=e[8]?t.setUTCFullYear:t.setFullYear,a=e[8]?t.setUTCHours:t.setHours;e[9]&&(r=f(e[9]+e[10]),i=f(e[9]+e[11])),o.call(t,f(e[1]),f(e[2])-1,f(e[3])),r=f(e[4]||0)-r,i=f(e[5]||0)-i,o=f(e[6]||0),e=Math.round(1e3*parseFloat("0."+(e[7]||0))),a.call(t,r,i,o,e)}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,l="",u=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,S(n)&&(n=Zi.test(n)?f(n):e(n)),_(n)&&(n=new Date(n)),!k(n)||!isFinite(n.getTime()))return n;for(;r;)(s=Xi.exec(r))?r=(u=F(u,s,1)).pop():(u.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=z(i,c),n=q(n,i,!0)),o(u,(function(e){a=Yi[e],l+=a?a(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),l}}function Sn(){return function(t,e){return y(e)&&(e=2),U(t,e)}}function _n(){return function(t,e,n){return e=1/0===Math.abs(Number(e))?Number(e):f(e),fr(e)?t:(_(t)&&(t=t.toString()),i(t)?(n=0>(n=!n||isNaN(n)?0:f(n))?Math.max(0,t.length+n):n,0<=e?kn(t,n,n+e):0===n?kn(t,e,t.length):kn(t,Math.max(0,n+e),n)):t)}}function kn(t,e,n){return S(t)?t.slice(e,n):ir.call(t,e,n)}function En(t){function e(e){return e.map((function(e){var n=1,r=g;if(T(e))r=e;else if(S(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}}))}function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function o(t,e){var n=0,r=t.type;if(r===(i=e.type)){var i=t.value,o=e.value;"string"===r?(i=i.toLowerCase(),o=o.toLowerCase()):"object"===r&&(w(i)&&(i=t.index),w(o)&&(o=e.index)),i!==o&&(n=i<o?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i||r<i?-1:1;return n}return function(t,a,s,l){if(null==t)return t;if(!i(t))throw r("orderBy")("notarray",t);E(a)||(a=[a]),0===a.length&&(a=["+"]);var u=e(a),c=s?-1:1,h=T(l)?l:o;return t=Array.prototype.map.call(t,(function(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:u.map((function(r){var i=r.get(t);return r=typeof i,null===i?r="null":"object"===r&&(T(i.valueOf)&&n(i=i.valueOf())||v(i)&&n(i=i.toString())),{value:i,type:r,index:e}}))}})),t.sort((function(t,e){for(var n=0,r=u.length;n<r;n++){var i=h(t.predicateValues[n],e.predicateValues[n]);if(i)return i*u[n].descending*c}return(h(t.tieBreaker,e.tieBreaker)||o(t.tieBreaker,e.tieBreaker))*c})),t.map((function(t){return t.value}))}}function Mn(t){return T(t)&&(t={link:t}),t.restrict=t.restrict||"AC",m(t)}function Tn(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$valid=this.$pristine=!0,this.$submitted=this.$invalid=!1,this.$$parentForm=no,this.$$element=t,this.$$animate=r,On(this)}function On(t){t.$$classCache={},t.$$classCache[Do]=!(t.$$classCache[Fo]=t.$$element.hasClass(Fo))}function Pn(t){function e(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function n(t,n,r){n=n?"-"+et(n,"-"):"",e(t,Fo+n,!0===r),e(t,Do+n,!1===r)}var r=t.set,i=t.unset;t.clazz.prototype.$setValidity=function(t,o,a){y(o)?(this.$pending||(this.$pending={}),r(this.$pending,t,a)):(this.$pending&&i(this.$pending,t,a),Cn(this.$pending)&&(this.$pending=void 0)),I(o)?o?(i(this.$error,t,a),r(this.$$success,t,a)):(r(this.$error,t,a),i(this.$$success,t,a)):(i(this.$error,t,a),i(this.$$success,t,a)),this.$pending?(e(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,n(this,"",null)):(e(this,"ng-pending",!1),this.$valid=Cn(this.$error),this.$invalid=!this.$valid,n(this,"",this.$valid)),n(this,t,o=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,o,this)}}function Cn(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function In(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function An(t,e,n,r,i,o){var a=nr(e[0].type);if(!i.android){var s=!1;e.on("compositionstart",(function(){s=!0})),e.on("compositionupdate",(function(t){(y(t.data)||""===t.data)&&(s=!1)})),e.on("compositionend",(function(){s=!1,u()}))}var l,u=function(t){if(l&&(o.defer.cancel(l),l=null),!s){var i=e.val();t=t&&t.type,"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=mr(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,t)}};if(i.hasEvent("input"))e.on("input",u);else{var c=function(t,e,n){l||(l=o.defer((function(){l=null,e&&e.value===n||u(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&19>e||37<=e&&40>=e||c(t,this,this.value)})),i.hasEvent("paste")&&e.on("paste cut drop",c)}e.on("change",u),mo[a]&&r.$$hasNativeValidators&&a===n.type&&e.on("keydown wheel mousedown",(function(t){if(!l){var e=this.validity,n=e.badInput,r=e.typeMismatch;l=o.defer((function(){l=null,e.badInput===n&&e.typeMismatch===r||u(t)}))}})),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function Ln(t,e){return function(n,r){var i,a;if(k(n))return n;if(S(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ao.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,(function(t,n){n<e.length&&(a[e[n]]=+t)})),i=new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0),100>a.yyyy&&i.setFullYear(a.yyyy),i}return NaN}}function Rn(t,e,n,r){return function(i,o,a,s,l,u,c,h){function f(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function p(t){return b(t)&&!k(t)?d(t)||void 0:t}function d(t,e){var r=s.$options.getOption("timezone");m&&m!==r&&(e=V(e,z(m)));var i=n(t,e);return!isNaN(i)&&r&&(i=q(i,r)),i}jn(i,o,a,s,t),An(0,o,a,s,l,u);var g,m,v="time"===t||"datetimelocal"===t;if(s.$parsers.push((function(n){return s.$isEmpty(n)?null:e.test(n)?d(n,g):void(s.$$parserName=t)})),s.$formatters.push((function(t){if(t&&!k(t))throw Bo("datefmt",t);if(f(t)){g=t;var e=s.$options.getOption("timezone");e&&(m=e,g=q(g,e,!0));var n=r;return v&&S(s.$options.getOption("timeSecondsFormat"))&&(n=r.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,"")),t=c("date")(t,n,e),v&&s.$options.getOption("timeStripZeroSeconds")&&(t=t.replace(/(?::00)?(?:\.000)?$/,"")),t}return m=g=null,""})),b(a.min)||a.ngMin){var w=a.min||h(a.ngMin)(i),x=p(w);s.$validators.min=function(t){return!f(t)||y(x)||n(t)>=x},a.$observe("min",(function(t){t!==w&&(x=p(t),w=t,s.$validate())}))}if(b(a.max)||a.ngMax){var _=a.max||h(a.ngMax)(i),E=p(_);s.$validators.max=function(t){return!f(t)||y(E)||n(t)<=E},a.$observe("max",(function(t){t!==_&&(E=p(t),_=t,s.$validate())}))}}}function jn(t,e,n,r,i){(r.$$hasNativeValidators=w(e[0].validity))&&r.$parsers.push((function(t){var n=e.prop("validity")||{};if(!n.badInput&&!n.typeMismatch)return t;r.$$parserName=i}))}function Nn(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:uo.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!_(e))throw Bo("numfmt",e);e=e.toString()}return e}))}function $n(t){return b(t)&&!_(t)&&(t=parseFloat(t)),fr(t)?void 0:t}function Fn(t){var e=t.toString(),n=e.indexOf(".");return-1===n?-1<t&&1>t&&(t=/e-(\d+)$/.exec(e))?Number(t[1]):0:e.length-n-1}function Dn(t,e,n){var r=(0|(t=Number(t)))!==t,i=(0|e)!==e,o=(0|n)!==n;if(r||i||o){var a=r?Fn(t):0,s=i?Fn(e):0,l=o?Fn(n):0;a=Math.max(a,s,l);t*=a=Math.pow(10,a),e*=a,n*=a,r&&(t=Math.round(t)),i&&(e=Math.round(e)),o&&(n=Math.round(n))}return 0==(t-e)%n}function Gn(t,e,n,r,i){if(b(r)){if(!(t=t(r)).constant)throw Bo("constexpr",n,r);return t(e)}return i}function Un(t,e){function n(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[],r=0;t:for(;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function r(t){if(!t)return t;var e=t;return E(t)?e=t.map(r).join(" "):w(t)?e=Object.keys(t).filter((function(e){return t[e]})).join(" "):S(t)||(e=t+""),e}var i;return t="ngClass"+t,["$parse",function(a){return{restrict:"AC",link:function(s,l,u){function c(t,e){var n=[];return o(t,(function(t){(0<e||f[t])&&(f[t]=(f[t]||0)+e,f[t]===+(0<e)&&n.push(t))})),n.join(" ")}var h,f=l.data("$classCounts"),p=!0;f||(f=st(),l.data("$classCounts",f)),"ngClass"!==t&&(i||(i=a("$index",(function(t){return 1&t}))),s.$watch(i,(function(t){if(t===e){var n=c((n=h)&&n.split(" "),1);u.$addClass(n)}else n=c((n=h)&&n.split(" "),-1),u.$removeClass(n);p=t}))),s.$watch(a(u[t],r),(function(t){if(p===e){var r=h&&h.split(" "),i=t&&t.split(" "),o=n(r,i);r=n(i,r),o=c(o,-1),r=c(r,1);u.$addClass(r),u.$removeClass(o)}h=t}))}}}]}function Bn(t,e,n,r,i,o){return{restrict:"A",compile:function(a,s){var l=t(s[r]);return function(t,r){r.on(i,(function(r){var i=function(){l(t,{$event:r})};if(e.$$phase)if(o)t.$evalAsync(i);else try{i()}catch(a){n(a)}else t.$apply(i)}))}}}}function zn(t,e,n,r,i,o,a,s,l){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(t),this.$$parentForm=no,this.$options=zo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=e,On(this),function(t){t.$$scope.$watch((function(e){return(e=t.$$ngModelGet(e))===t.$modelValue||t.$modelValue!=t.$modelValue&&e!=e||t.$$setModelValue(e),e}))}(this)}function Vn(t){this.$$options=t}function qn(t,e){o(e,(function(e,n){b(t[n])||(t[n]=e)}))}function Hn(t,e){t.prop("selected",e),t.attr("selected",e)}function Wn(t,e,n){if(t){if(S(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw r("ngPattern")("noregexp",e,t,H(n));return t}}function Kn(t){return t=f(t),fr(t)?-1:t}var Yn,Xn,Zn,Jn,Qn={objectMaxDepth:5,urlErrorParamsEnabled:!0},tr=/^\/(.+)\/([a-z]*)$/,er=Object.prototype.hasOwnProperty,nr=function(t){return S(t)?t.toLowerCase():t},rr=function(t){return S(t)?t.toUpperCase():t},ir=[].slice,or=[].splice,ar=[].push,sr=Object.prototype.toString,lr=Object.getPrototypeOf,ur=r("ng"),cr=t.angular||(t.angular={}),hr=0;Yn=t.document.documentMode;var fr=Number.isNaN||function(t){return t!=t};d.$inject=[],g.$inject=[];var pr,dr,gr=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,mr=function(t){return S(t)?t.trim():t},vr=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},yr=function(){if(!b(yr.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");yr.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else{e=yr;try{new Function(""),n=!1}catch(r){n=!0}e.rules={noUnsafeEval:n,noInlineStyle:!1}}}return yr.rules},br=function(){if(b(br.name_))return br.name_;var e,n,r,i,o=xr.length;for(n=0;n<o;++n)if(r=xr[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return br.name_=i},wr=/:/g,xr=["ng-","data-ng-","ng:","x-ng-"],Sr=(pr=t.document,!(dr=pr.currentScript)||(dr instanceof t.HTMLScriptElement||dr instanceof t.SVGScriptElement)&&[(dr=dr.attributes).getNamedItem("src"),dr.getNamedItem("href"),dr.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var e=pr.createElement("a");if(e.href=t.value,pr.location.origin===e.origin)return!0;switch(e.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))),_r=/[A-Z]/g,kr=!1,Er=3,Mr={full:"1.8.3",major:1,minor:8,dot:3,codeName:"ultimate-farewell"};gt.expando="ng339";var Tr=gt.cache={},Or=1;gt._data=function(t){return this.cache[t[this.expando]]||{}};var Pr=/-([a-z])/g,Cr=/^-ms-/,Ir={mouseleave:"mouseout",mouseenter:"mouseover"},Ar=r("jqLite"),Lr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Rr=/<|&#?\w+;/,jr=/<([\w:-]+)/,Nr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,$r={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};$r.tbody=$r.tfoot=$r.colgroup=$r.caption=$r.thead,$r.th=$r.td;var Fr,Dr={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(Fr in $r){var Gr=$r[Fr],Ur=Gr.slice().reverse();Dr[Fr]=[Ur.length,"<"+Ur.join("><")+">","</"+Gr.join("></")+">"]}Dr.optgroup=Dr.option;var Br=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))},zr=gt.prototype={ready:At,toString:function(){var t=[];return o(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return Xn(0<=t?this[t]:this[this.length+t])},length:0,push:ar,sort:[].sort,splice:[].splice},Vr={};o("multiple selected checked disabled readOnly required open".split(" "),(function(t){Vr[nr(t)]=t}));var qr={};o("input select option textarea button form details".split(" "),(function(t){qr[t]=!0}));var Hr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};o({data:_t,removeData:xt,hasData:function(t){for(var e in Tr[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)xt(t[e]),wt(t[e])}},(function(t,e){gt[e]=t})),o({data:_t,inheritedData:Pt,scope:function(t){return Xn.data(t,"$scope")||Pt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return Xn.data(t,"$isolateScope")||Xn.data(t,"$isolateScopeNoTemplate")},controller:Ot,injector:function(t){return Pt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:kt,css:function(t,e,n){if(e=ft(e.replace(Cr,"ms-")),!b(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){if((r=t.nodeType)!==Er&&2!==r&&8!==r&&t.getAttribute){var r=nr(e),i=Vr[r];if(!b(n))return t=t.getAttribute(e),i&&null!==t&&(t=r),null===t?void 0:t;null===n||!1===n&&i?t.removeAttribute(e):t.setAttribute(e,i?r:n)}},prop:function(t,e,n){if(!b(n))return t[e];t[e]=n},text:function(){function t(t,e){if(y(e)){var n=t.nodeType;return 1===n||n===Er?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(y(e)){if(t.multiple&&"select"===L(t)){var n=[];return o(t.options,(function(t){t.selected&&n.push(t.value||t.text)})),n}return t.value}t.value=e},html:function(t,e){if(y(e))return t.innerHTML;vt(t,!0),t.innerHTML=e},empty:Ct},(function(t,e){gt.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==Ct&&y(2===t.length&&t!==kt&&t!==Ot?e:n)){if(w(e)){for(r=0;r<o;r++)if(t===_t)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(o=y(r=t.$dv)?Math.min(o,1):o,i=0;i<o;i++){var a=t(this[i],e,n);r=r?r+a:a}return r}for(r=0;r<o;r++)t(this[r],e,n);return this}})),o({removeData:xt,on:function(t,e,n,r){if(b(r))throw Ar("onargs");if(pt(t)){var i=(r=St(t,!0)).events,o=r.handle;o||(o=r.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(y(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Rt;1<o&&(i=ut(i));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||s(t,n,i[l])}};return n.elem=t,n}(t,i));for(var a=(r=0<=e.indexOf(" ")?e.split(" "):[e]).length,s=function(e,r,a){var s=i[e];s||((s=i[e]=[]).specialHandlerWrapper=r,"$destroy"===e||a||t.addEventListener(e,o)),s.push(n)};a--;)e=r[a],Ir[e]?(s(Ir[e],jt),s(e,void 0,!0)):s(e)}},off:wt,one:function(t,e,n){(t=Xn(t)).on(e,(function r(){t.off(e,n),t.off(e,r)})),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;vt(t),o(new gt(e),(function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e}))},children:function(t){var e=[];return o(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){if(1===(n=t.nodeType)||11===n)for(var n=0,r=(e=new gt(e)).length;n<r;n++)t.appendChild(e[n])},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;o(new gt(e),(function(e){t.insertBefore(e,n)}))}},wrap:function(t,e){var n=Xn(e).eq(0).clone()[0],r=t.parentNode;r&&r.replaceChild(n,t),n.appendChild(t)},remove:It,detach:function(t){It(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new gt(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Mt,removeClass:Et,toggleClass:function(t,e,n){e&&o(e.split(" "),(function(e){var r=n;y(r)&&(r=!kt(t,e)),(r?Mt:Et)(t,e)}))},parent:function(t){return(t=t.parentNode)&&11!==t.nodeType?t:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:mt,triggerHandler:function(t,e,n){var r,i,a=e.type||e,s=St(t);(s=(s=s&&s.events)&&s[a])&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:d,type:a,target:t},e.type&&(r=c(r,e)),e=ut(s),i=n?[r].concat(n):[r],o(e,(function(e){r.isImmediatePropagationStopped()||e.apply(t,i)})))}},(function(t,e){gt.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;o<a;o++)y(i)?b(i=t(this[o],e,n,r))&&(i=Xn(i)):Tt(i,t(this[o],e,n,r));return b(i)?i:this}})),gt.prototype.bind=gt.prototype.on,gt.prototype.unbind=gt.prototype.off;var Wr=Object.create(null);Ft.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return fr(t)?Wr:t},get:function(t){if(t=this._transformKey(t),-1!==(t=this._idx(t)))return this._values[t]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){return t=this._transformKey(t),-1!==(t=this._idx(t))&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Kr=Ft,Yr=[function(){this.$get=[function(){return Kr}]}],Xr=/^([^(]+?)=>/,Zr=/^[^(]*\(\s*([^)]*)\)/m,Jr=/,/,Qr=/^\s*(_?)(\S+?)\1\s*$/,ti=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ei=r("$injector");Gt.$$annotate=function(t,e,n){var r;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw S(n)&&n||(n=t.name||function(t){return(t=Dt(t))?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),ei("strictdi",n);o((e=Dt(t))[1].split(Jr),(function(t){t.replace(Qr,(function(t,e,n){r.push(n)}))}))}t.$inject=r}}else E(t)?(it(t[e=t.length-1],"fn"),r=t.slice(0,e)):it(t,"fn",!0);return r};var ni=r("$animate"),ri=function(){this.$get=d},ii=function(){var t=new Kr,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(t,e,n){var r=!1;return e&&o(e=S(e)?e.split(" "):E(e)?e:[],(function(e){e&&(r=!0,t[e]=n)})),r}function a(){o(e,(function(e){var n=t.get(e);if(n){var r=function(t){S(t)&&(t=t.split(" "));var e=st();return o(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),i="",a="";o(n,(function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:a+=(a.length?" ":"")+e)})),o(e,(function(t){i&&Mt(t,i),a&&Et(t,a)})),t.delete(e)}})),e.length=0}return{enabled:d,on:d,off:d,pin:d,push:function(o,s,l,u){return u&&u(),(l=l||{}).from&&o.css(l.from),l.to&&o.css(l.to),(l.addClass||l.removeClass)&&(s=l.addClass,u=l.removeClass,s=i(l=t.get(o)||{},s,!0),u=i(l,u,!1),(s||u)&&(t.set(o,l),e.push(o),1===e.length&&r.$$postDigest(a))),(o=new n).complete(),o}}}]},oi=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw ni("notcsel",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=T(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(n.toString()))throw n=null,ni("nongcls","ng-animate");return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r;t:{for(r=0;r<n.length;r++){var i=n[r];if(1===i.nodeType){r=i;break t}}r=void 0}!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,r,i,o){return r=r&&Xn(r),i=i&&Xn(i),e(n,r=r||i.parent(),i),t.push(n,"enter",zt(o))},move:function(n,r,i,o){return r=r&&Xn(r),i=i&&Xn(i),e(n,r=r||i.parent(),i),t.push(n,"move",zt(o))},leave:function(e,n){return t.push(e,"leave",zt(n),(function(){e.remove()}))},addClass:function(e,n,r){return(r=zt(r)).addClass=Bt(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=zt(r)).removeClass=Bt(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=zt(i)).addClass=Bt(i.addClass,n),i.removeClass=Bt(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=zt(o)).from=o.from?c(o.from,n):n,o.to=o.to?c(o.to,r):r,o.tempClasses=Bt(o.tempClasses,i||"ng-inline-animate"),t.push(e,"animate",o)}}}]}],ai=function(){this.$get=["$$rAF",function(t){function e(e){n.push(e),1<n.length||t((function(){for(var t=0;t<n.length;t++)n[t]();n=[]}))}var n=[];return function(){var t=!1;return e((function(){t=!0})),function(n){t?n():e(n)}}}]},si=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function a(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?i(t,0,!1):e(t)},this._state=0}return a.chain=function(t,e){var n=0;!function r(){n===t.length?e(!0):t[n]((function(t){!1===t?e(!1):(n++,r())}))}()},a.all=function(t,e){function n(n){i=i&&n,++r===t.length&&e(i)}var r=0,i=!0;o(t,(function(t){t.done(n)}))},a.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:d,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,n){e.done((function(e){!1===e?n():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(o(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},a}]},li=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){function i(){return t((function(){o.addClass&&(e.addClass(o.addClass),o.addClass=null),o.removeClass&&(e.removeClass(o.removeClass),o.removeClass=null),o.to&&(e.css(o.to),o.to=null),a||s.complete(),a=!0})),s}var o=r||{};o.$$prepared||(o=j(o)),o.cleanupStyles&&(o.from=o.to=null),o.from&&(e.css(o.from),o.from=null);var a,s=new n;return{start:i,end:i}}}]},ui=r("$compile"),ci=new function(){};Kt.$inject=["$provide","$$sanitizeUriProvider"],Yt.prototype.isFirstChange=function(){return this.previousValue===ci};var hi=/^((?:x|data)[:\-_])/i,fi=/[:\-_]+(.)/g,pi=r("$controller"),di=/^(\S+)(\s+as\s+([\w$]+))?$/,gi=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof Xn&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},mi="application/json",vi={"Content-Type":mi+";charset=utf-8"},yi=/^\[|^\{(?!\{)/,bi={"[":/]$/,"{":/}$/},wi=/^\)]\}',?\n/,xi=r("$http"),Si=cr.$interpolateMinErr=r("$interpolate");Si.throwNoconcat=function(t){throw Si("noconcat",t)},Si.interr=function(t,e){return Si("interr",t,e.toString())};var _i=r("$interval"),ki=function(){this.$get=function(){var t=cr.callbacks,e={};return{createCallback:function(n){var r="angular.callbacks."+(n="_"+(t.$$counter++).toString(36)),i=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(n);return e[r]=t[n]=i,r},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){delete t[e[n].id],delete e[n]}}}},Ei=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Mi={http:80,https:443,ftp:21},Ti=r("$location"),Oi=/^\s*[\\/]{2,}/,Pi={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){for(var t=this.$$path,e=this.$$hash,n=function(t){var e=[];return o(t,(function(t,n){E(t)?o(t,(function(t){e.push(X(n,!0)+(!0===t?"":"="+X(t,!0)))})):e.push(X(n,!0)+(!0===t?"":"="+X(t,!0)))})),e.length?e.join("&"):""}(this.$$search),r=(e=e?"#"+Y(e):"",(t=t.split("/")).length);r--;)t[r]=Y(t[r].replace(/%2F/g,"/"));this.$$url=t.join("/")+(n?"?"+n:"")+e,this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:Ee("$$absUrl"),url:function(t){if(y(t))return this.$$url;var e=Ei.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Ee("$$protocol"),host:Ee("$$host"),port:Ee("$$port"),path:Me("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(S(t)||_(t))t=t.toString(),this.$$search=K(t);else{if(!w(t))throw Ti("isrcharg");o(t=j(t,{}),(function(e,n){null==e&&delete t[n]})),this.$$search=t}break;default:y(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Me("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};o([ke,_e,Se],(function(t){t.prototype=Object.create(Pi),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Se||!this.$$html5)throw Ti("nostate");return this.$$state=y(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var Ci=r("$parse"),Ii={}.constructor.prototype.valueOf,Ai=st();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){Ai[t]=!0}));var Li={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ri=function(t){this.options=t};Ri.prototype={constructor:Ri,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;)if('"'===(t=this.text.charAt(this.index))||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var e=t+this.peek(),n=e+this.peek(2),r=Ai[e],i=Ai[n];Ai[t]||r||i?(t=i?n:r?e:t,this.tokens.push({index:this.index,text:t,operator:!0}),this.index+=t.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){return t=t||1,this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(t){return"0"<=t&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"Â "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&"z">=t||"A"<=t&&"Z">=t||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return 55296<=n&&56319>=n&&56320<=r&&57343>=r?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){throw n=n||this.index,e=b(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n,Ci("lexerr",t,e,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=nr(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);r=r+o;if(i)"u"===o?((i=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+i+"]"),this.index+=4,n+=String.fromCharCode(parseInt(i,16))):n+=Li[o]||o,i=!1;else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var ji=function(t,e){this.lexer=t,this.options=e};ji.Program="Program",ji.ExpressionStatement="ExpressionStatement",ji.AssignmentExpression="AssignmentExpression",ji.ConditionalExpression="ConditionalExpression",ji.LogicalExpression="LogicalExpression",ji.BinaryExpression="BinaryExpression",ji.UnaryExpression="UnaryExpression",ji.CallExpression="CallExpression",ji.MemberExpression="MemberExpression",ji.Identifier="Identifier",ji.Literal="Literal",ji.ArrayExpression="ArrayExpression",ji.Property="Property",ji.ObjectExpression="ObjectExpression",ji.ThisExpression="ThisExpression",ji.LocalsExpression="LocalsExpression",ji.NGValueParameter="NGValueParameter",ji.prototype={ast:function(t){return this.text=t,this.tokens=this.lexer.lex(t),t=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:ji.Program,body:t}},expressionStatement:function(){return{type:ji.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Re(t))throw Ci("lval");t={type:ji.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:ji.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:ji.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:ji.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:ji.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:ji.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:ji.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:ji.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:ji.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=j(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:ji.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:ji.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:ji.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:ji.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){t=[t];for(var e={type:ji.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return e},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:ji.Identifier,name:t.text}},constant:function(){return{type:ji.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:ji.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:ji.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:ji.ObjectExpression,properties:e}},throwError:function(t,e){throw Ci("syntax",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw Ci("ueoe",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw Ci("ueoe",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=(t=this.tokens[t]).text;if(o===e||o===n||o===r||o===i||!(e||n||r||i))return t}return!1},expect:function(t,e,n,r){return!!(t=this.peek(t,e,n,r))&&(this.tokens.shift(),t)},selfReferential:{this:{type:ji.ThisExpression},$locals:{type:ji.LocalsExpression}}};var Ni=2;Ne.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ae(t,e.$filter);var n,r="";return this.stage="assign",(n=je(t))&&(this.state.computing="assign",r=this.nextId(),this.recurse(n,r),this.return_(r),r="fn.assign="+this.generateFunction("assign","s,v,l")),n=Le(t.body),e.stage="inputs",o(n,(function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(t),t='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",t=new Function("$filter","getStringValue","ifDefined","plus",t)(this.$filter,Pe,Ce,Ie),this.state=this.stage=void 0,t},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return o(e,(function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return o(this.state.filters,(function(n,r){t.push(n+"=$filter("+e.escape(r)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,a){var s,l,u,c,h,f=this;if(r=r||d,!a&&b(t.watchId))e=e||this.nextId(),this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));else switch(t.type){case ji.Program:o(t.body,(function(e,n){f.recurse(e.expression,void 0,void 0,(function(t){l=t})),n!==t.body.length-1?f.current().body.push(l,";"):f.return_(l)}));break;case ji.Literal:c=this.escape(t.value),this.assign(e,c),r(e||c);break;case ji.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){l=t})),c=t.operator+"("+this.ifDefined(l,0)+")",this.assign(e,c),r(c);break;case ji.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){s=t})),this.recurse(t.right,void 0,void 0,(function(t){l=t})),c="+"===t.operator?this.plus(s,l):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(l,0):"("+s+")"+t.operator+"("+l+")",this.assign(e,c),r(c);break;case ji.LogicalExpression:e=e||this.nextId(),f.recurse(t.left,e),f.if_("&&"===t.operator?e:f.not(e),f.lazyRecurse(t.right,e)),r(e);break;case ji.ConditionalExpression:e=e||this.nextId(),f.recurse(t.test,e),f.if_(e,f.lazyRecurse(t.alternate,e),f.lazyRecurse(t.consequent,e)),r(e);break;case ji.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",t.name)),(function(){f.if_("inputs"===f.stage||"s",(function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",t.name)),f.lazyAssign(f.nonComputedMember("s",t.name),"{}")),f.assign(e,f.nonComputedMember("s",t.name))}))}),e&&f.lazyAssign(e,f.nonComputedMember("l",t.name))),r(e);break;case ji.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),f.recurse(t.object,s,void 0,(function(){f.if_(f.notNull(s),(function(){t.computed?(l=f.nextId(),f.recurse(t.property,l),f.getStringValue(l),i&&1!==i&&f.if_(f.not(f.computedMember(s,l)),f.lazyAssign(f.computedMember(s,l),"{}")),c=f.computedMember(s,l),f.assign(e,c),n&&(n.computed=!0,n.name=l)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(s,t.property.name)),f.lazyAssign(f.nonComputedMember(s,t.property.name),"{}")),c=f.nonComputedMember(s,t.property.name),f.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))}),(function(){f.assign(e,"undefined")})),r(e)}),!!i);break;case ji.CallExpression:e=e||this.nextId(),t.filter?(l=f.filter(t.callee.name),u=[],o(t.arguments,(function(t){var e=f.nextId();f.recurse(t,e),u.push(e)})),c=l+"("+u.join(",")+")",f.assign(e,c),r(e)):(l=f.nextId(),s={},u=[],f.recurse(t.callee,l,s,(function(){f.if_(f.notNull(l),(function(){o(t.arguments,(function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,(function(t){u.push(t)}))})),c=s.name?f.member(s.context,s.name,s.computed)+"("+u.join(",")+")":l+"("+u.join(",")+")",f.assign(e,c)}),(function(){f.assign(e,"undefined")})),r(e)})));break;case ji.AssignmentExpression:l=this.nextId(),s={},this.recurse(t.left,void 0,s,(function(){f.if_(f.notNull(s.context),(function(){f.recurse(t.right,l),c=f.member(s.context,s.name,s.computed)+t.operator+l,f.assign(e,c),r(e||c)}))}),1);break;case ji.ArrayExpression:u=[],o(t.elements,(function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,(function(t){u.push(t)}))})),c="["+u.join(",")+"]",this.assign(e,c),r(e||c);break;case ji.ObjectExpression:u=[],h=!1,o(t.properties,(function(t){t.computed&&(h=!0)})),h?(e=e||this.nextId(),this.assign(e,"{}"),o(t.properties,(function(t){t.computed?(s=f.nextId(),f.recurse(t.key,s)):s=t.key.type===ji.Identifier?t.key.name:""+t.key.value,l=f.nextId(),f.recurse(t.value,l),f.assign(f.member(e,s,t.computed),l)}))):(o(t.properties,(function(e){f.recurse(e.value,t.constant?void 0:f.nextId(),void 0,(function(t){u.push(f.escape(e.key.type===ji.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),c="{"+u.join(",")+"}",this.assign(e,c)),r(e||c);break;case ji.ThisExpression:this.assign(e,"s"),r(e||"s");break;case ji.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case ji.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(S(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(_(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw Ci("esc")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},$e.prototype={compile:function(t){var e,n,r,i=this;Ae(t,i.$filter),(e=je(t))&&(n=this.recurse(e)),(e=Le(t.body))&&(r=[],o(e,(function(t,e){var n=i.recurse(t);n.isPure=t.isPure,t.input=n,r.push(n),t.watchId=e})));var a=[];return o(t.body,(function(t){a.push(i.recurse(t.expression))})),t=0===t.body.length?d:1===t.body.length?a[0]:function(t,e){var n;return o(a,(function(r){n=r(t,e)})),n},n&&(t.assign=function(t,e,r){return n(t,r,e)}),r&&(t.inputs=r),t},recurse:function(t,e,n){var r,i,a,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case ji.Literal:return this.value(t.value,e);case ji.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case ji.BinaryExpression:case ji.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case ji.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case ji.Identifier:return s.identifier(t.name,e,n);case ji.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case ji.CallExpression:return a=[],o(t.arguments,(function(t){a.push(s.recurse(t))})),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,o){for(var s=[],l=0;l<a.length;++l)s.push(a[l](t,n,r,o));return t=i.apply(void 0,s,o),e?{context:void 0,name:void 0,value:t}:t}:function(t,n,r,o){var s,l=i(t,n,r,o);if(null!=l.value){s=[];for(var u=0;u<a.length;++u)s.push(a[u](t,n,r,o));s=l.value.apply(l.context,s)}return e?{value:s}:s};case ji.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,a){var s=r(t,n,o,a);return t=i(t,n,o,a),s.context[s.name]=t,e?{value:t}:t};case ji.ArrayExpression:return a=[],o(t.elements,(function(t){a.push(s.recurse(t))})),function(t,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](t,n,r,i));return e?{value:o}:o};case ji.ObjectExpression:return a=[],o(t.properties,(function(t){t.computed?a.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):a.push({key:t.key.type===ji.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})})),function(t,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(t,n,r,i)]=a[s].value(t,n,r,i):o[a[s].key]=a[s].value(t,n,r,i);return e?{value:o}:o};case ji.ThisExpression:return function(t){return e?{value:t}:t};case ji.LocalsExpression:return function(t,n){return e?{value:n}:n};case ji.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){return n=b(n=t(n,r,i,o))?+n:0,e?{value:n}:n}},"unary-":function(t,e){return function(n,r,i,o){return n=b(n=t(n,r,i,o))?-n:-0,e?{value:n}:n}},"unary!":function(t,e){return function(n,r,i,o){return n=!t(n,r,i,o),e?{value:n}:n}},"binary+":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a);return s=Ie(s,r=e(r,i,o,a)),n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a);return r=e(r,i,o,a),s=(b(s)?s:0)-(b(r)?r:0),n?{value:s}:s}},"binary*":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)*e(r,i,o,a),n?{value:r}:r}},"binary/":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)/e(r,i,o,a),n?{value:r}:r}},"binary%":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)%e(r,i,o,a),n?{value:r}:r}},"binary===":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)===e(r,i,o,a),n?{value:r}:r}},"binary!==":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)!==e(r,i,o,a),n?{value:r}:r}},"binary==":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)==e(r,i,o,a),n?{value:r}:r}},"binary!=":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)!=e(r,i,o,a),n?{value:r}:r}},"binary<":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)<e(r,i,o,a),n?{value:r}:r}},"binary>":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)>e(r,i,o,a),n?{value:r}:r}},"binary<=":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)<=e(r,i,o,a),n?{value:r}:r}},"binary>=":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)>=e(r,i,o,a),n?{value:r}:r}},"binary&&":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)&&e(r,i,o,a),n?{value:r}:r}},"binary||":function(t,e,n){return function(r,i,o,a){return r=t(r,i,o,a)||e(r,i,o,a),n?{value:r}:r}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){return i=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s),r?{value:i}:i}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,a){return r=i&&t in i?i:r,n&&1!==n&&r&&null==r[t]&&(r[t]={}),i=r?r[t]:void 0,e?{context:r,name:t,value:i}:i}},computedMember:function(t,e,n,r){return function(i,o,a,s){var l,u,c=t(i,o,a,s);return null!=c&&(l=e(i,o,a,s),l+="",r&&1!==r&&c&&!c[l]&&(c[l]={}),u=c[l]),n?{context:c,name:l,value:u}:u}},nonComputedMember:function(t,e,n,r){return function(i,o,a,s){return i=t(i,o,a,s),r&&1!==r&&i&&null==i[e]&&(i[e]={}),o=null!=i?i[e]:void 0,n?{context:i,name:e,value:o}:o}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Fe.prototype={constructor:Fe,parse:function(t){t=this.getAst(t);var e=this.astCompiler.compile(t.ast),n=t.ast;return e.literal=0===n.body.length||1===n.body.length&&(n.body[0].expression.type===ji.Literal||n.body[0].expression.type===ji.ArrayExpression||n.body[0].expression.type===ji.ObjectExpression),e.constant=t.ast.constant,e.oneTime=t.oneTime,e},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var $i,Fi=r("$sce"),Di={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gi=/_([a-z])/g,Ui=r("$templateRequest"),Bi=r("$timeout"),zi=t.document.createElement("a"),Vi=nn(t.location.href);zi.href="http://[::1]";var qi="[::1]"===zi.hostname;an.$inject=["$document"],ln.$inject=["$provide"];var Hi=22,Wi=".",Ki="0";fn.$inject=["$locale"],pn.$inject=["$locale"];var Yi={yyyy:mn("FullYear",4,0,!1,!0),yy:mn("FullYear",2,0,!0,!0),y:mn("FullYear",1,0,!1,!0),MMMM:vn("Month"),MMM:vn("Month",!0),MM:mn("Month",2,1),M:mn("Month",1,1),LLLL:vn("Month",!1,!0),dd:mn("Date",2),d:mn("Date",1),HH:mn("Hours",2),H:mn("Hours",1),hh:mn("Hours",2,-12),h:mn("Hours",1,-12),mm:mn("Minutes",2),m:mn("Minutes",1),ss:mn("Seconds",2),s:mn("Seconds",1),sss:mn("Milliseconds",3),EEEE:vn("Day"),EEE:vn("Day",!0),a:function(t,e){return 12>t.getHours()?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){return(0<=(t=-1*n)?"+":"")+(gn(Math[0<t?"floor":"ceil"](t/60),2)+gn(Math.abs(t%60),2))},ww:bn(2),w:bn(1),G:wn,GG:wn,GGG:wn,GGGG:function(t,e){return 0>=t.getFullYear()?e.ERANAMES[0]:e.ERANAMES[1]}},Xi=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Zi=/^-?\d+$/;xn.$inject=["$locale"];var Ji=m(nr),Qi=m(rr);En.$inject=["$parse"];var to=m({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===sr.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(n)||t.preventDefault()}))}}}}),eo={};o(Vr,(function(t,e){function n(t,n,i){t.$watch(i[r],(function(t){i.$set(e,!!t)}))}if("multiple"!==t){var r=Xt("ng-"+e),i=n;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[r]&&n(t,0,i)}),eo[r]=function(){return{restrict:"A",priority:100,link:i}}}})),o(Hr,(function(t,e){eo[e]=function(){return{priority:100,link:function(t,n,r){"ngPattern"===e&&"/"===r.ngPattern.charAt(0)&&(n=r.ngPattern.match(tr))?r.$set("ngPattern",new RegExp(n[1],n[2])):t.$watch(r[e],(function(t){r.$set(e,t)}))}}}})),o(["src","srcset","href"],(function(t){var e=Xt("ng-"+t);eo[e]=["$sce",function(n){return{priority:99,link:function(r,i,o){var a=t,s=t;"href"===t&&"[object SVGAnimatedString]"===sr.call(i.prop("href"))&&(s="xlinkHref",o.$attr[s]="xlink:href",a=null),o.$set(e,n.getTrustedMediaUrl(o[e])),o.$observe(e,(function(e){e?(o.$set(s,e),Yn&&a&&i.prop(a,o[s])):"href"===t&&o.$set(s,null)}))}}}]}));var no={$addControl:d,$getControls:m([]),$$renameControl:function(t,e){t.$name=e},$removeControl:d,$setValidity:d,$setDirty:d,$setPristine:d,$setSubmitted:d,$$setSubmitted:d};Tn.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Tn.prototype={$rollbackViewValue:function(){o(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){o(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){ot(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return ut(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],o(this.$pending,(function(e,n){this.$setValidity(n,null,t)}),this),o(this.$error,(function(e,n){this.$setValidity(n,null,t)}),this),o(this.$$success,(function(e,n){this.$setValidity(n,null,t)}),this),R(this.$$controls,t),t.$$parentForm=no},$setDirty:function(){this.$$animate.removeClass(this.$$element,Go),this.$$animate.addClass(this.$$element,Uo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Go,Uo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,o(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){o(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==no;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,o(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},Pn({clazz:Tn,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(R(r,n),0===r.length&&delete t[e])}});var ro=function(t){return["$timeout","$parse",function(e,n){function r(t){return""===t?n('this[""]').assign:n(t).assign||d}return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Tn,compile:function(n,i){n.addClass(Go).addClass(Fo);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var s=a[0];if(!("action"in i)){var l=function(e){t.$apply((function(){s.$commitViewValue(),s.$setSubmitted()})),e.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",(function(){e((function(){n[0].removeEventListener("submit",l)}),0,!1)}))}(a[1]||s.$$parentForm).$addControl(s);var u=o?r(s.$name):d;o&&(u(t,s),i.$observe(o,(function(e){s.$name!==e&&(u(t,void 0),s.$$parentForm.$$renameControl(s,e),(u=r(s.$name))(t,s))}))),n.on("$destroy",(function(){s.$$parentForm.$removeControl(s),u(t,void 0),c(s,no)}))}}}}}]},io=ro(),oo=ro(!0),ao=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,so=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,lo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,uo=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,co=/^(\d{4,})-(\d{2})-(\d{2})$/,ho=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,fo=/^(\d{4,})-W(\d\d)$/,po=/^(\d{4,})-(\d\d)$/,go=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,mo=st();o(["date","datetime-local","month","time","week"],(function(t){mo[t]=!0}));var vo={text:function(t,e,n,r,i,o){An(0,e,n,r,i,o),In(r)},date:Rn("date",co,Ln(co,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Rn("datetimelocal",ho,Ln(ho,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:Rn("time",go,Ln(go,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Rn("week",fo,(function(t,e){if(k(t))return t;if(S(t)){fo.lastIndex=0;var n=fo.exec(t);if(n){var r=+n[1],i=+n[2],o=n=0,a=0,s=0,l=yn(r);i=7*(i-1);return e&&(n=e.getHours(),o=e.getMinutes(),a=e.getSeconds(),s=e.getMilliseconds()),new Date(r,0,l.getDate()+i,n,o,a,s)}}return NaN}),"yyyy-Www"),month:Rn("month",po,Ln(po,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o,a,s){var l;if(jn(0,e,0,r,"number"),Nn(r),An(0,e,n,r,i,o),b(n.min)||n.ngMin){var u=n.min||s(n.ngMin)(t);l=$n(u),r.$validators.min=function(t,e){return r.$isEmpty(e)||y(l)||e>=l},n.$observe("min",(function(t){t!==u&&(l=$n(t),u=t,r.$validate())}))}if(b(n.max)||n.ngMax){var c=n.max||s(n.ngMax)(t),h=$n(c);r.$validators.max=function(t,e){return r.$isEmpty(e)||y(h)||e<=h},n.$observe("max",(function(t){t!==c&&(h=$n(t),c=t,r.$validate())}))}if(b(n.step)||n.ngStep){var f=n.step||s(n.ngStep)(t),p=$n(f);r.$validators.step=function(t,e){return r.$isEmpty(e)||y(p)||Dn(e,l||0,p)},n.$observe("step",(function(t){t!==f&&(p=$n(t),f=t,r.$validate())}))}},url:function(t,e,n,r,i,o){An(0,e,n,r,i,o),In(r),r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||so.test(n)}},email:function(t,e,n,r,i,o){An(0,e,n,r,i,o),In(r),r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||lo.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==mr(n.ngTrim);y(n.name)&&e.attr("name",++hr),e.on("change",(function(t){var o;e[0].checked&&(o=n.value,i&&(o=mr(o)),r.$setViewValue(o,t&&t.type))})),r.$render=function(){var t=n.value;i&&(t=mr(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){function a(t,r){e.attr(t,n[t]);var i=n[t];n.$observe(t,(function(t){t!==i&&(i=t,r(t))}))}jn(0,e,0,r,"range"),Nn(r),An(0,e,n,r,i,o);var s=r.$$hasNativeValidators&&"range"===e[0].type,l=s?0:void 0,u=s?100:void 0,c=s?1:void 0,h=e[0].validity;t=b(n.min),i=b(n.max),o=b(n.step);var f=r.$render;r.$render=s&&b(h.rangeUnderflow)&&b(h.rangeOverflow)?function(){f(),r.$setViewValue(e.val())}:f,t&&(l=$n(n.min),r.$validators.min=s?function(){return!0}:function(t,e){return r.$isEmpty(e)||y(l)||e>=l},a("min",(function(t){l=$n(t),fr(r.$modelValue)||(s?(t=e.val(),l>t&&(t=l,e.val(t)),r.$setViewValue(t)):r.$validate())}))),i&&(u=$n(n.max),r.$validators.max=s?function(){return!0}:function(t,e){return r.$isEmpty(e)||y(u)||e<=u},a("max",(function(t){u=$n(t),fr(r.$modelValue)||(s?(t=e.val(),u<t&&(e.val(u),t=u<l?l:u),r.$setViewValue(t)):r.$validate())}))),o&&(c=$n(n.step),r.$validators.step=s?function(){return!h.stepMismatch}:function(t,e){return r.$isEmpty(e)||y(c)||Dn(e,l||0,c)},a("step",(function(t){c=$n(t),fr(r.$modelValue)||(s?r.$viewValue!==e.val()&&r.$setViewValue(e.val()):r.$validate())})))},checkbox:function(t,e,n,r,i,o,a,s){var l=Gn(s,t,"ngTrueValue",n.ngTrueValue,!0),u=Gn(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",(function(t){r.$setViewValue(e[0].checked,t&&t.type)})),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push((function(t){return $(t,l)})),r.$parsers.push((function(t){return t?l:u}))},hidden:d,button:d,submit:d,reset:d,file:d},yo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(vo[nr(a.type)]||vo.text)(i,o,a,s[0],e,t,n,r)}}}}],bo=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,n){if("hidden"===nr(n.type))return{pre:function(e,n,r,i){(e=n[0]).parentNode&&e.parentNode.insertBefore(e,e.nextSibling),Object.defineProperty&&Object.defineProperty(e,"value",t)}}}}},wo=/^(true|false|\d+)$/,xo=function(){function t(t,e,n){var r=b(n)?n:9===Yn?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return wo.test(n.ngValue)?function(e,n,r){t(n,r,e=e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,(function(e){t(n,r,e)}))}}}},So=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,(function(t){n.textContent=lt(t)}))}}}}],_o=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){n=t(r.attr(i.$attr.ngBindTemplate)),e.$$addBindingInfo(r,n.expressions),r=r[0],i.$observe("ngBindTemplate",(function(t){r.textContent=y(t)?"":t}))}}}}],ko=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,(function(e){return t.valueOf(e)}));return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,(function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")}))}}}}],Eo=m({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push((function(){t.$eval(n.ngChange)}))}}),Mo=Un("",!0),To=Un("Odd",0),Oo=Un("Even",1),Po=Mn({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Co=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Io={},Ao={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=Xt("ng-"+t);Io[e]=["$parse","$rootScope","$exceptionHandler",function(n,r,i){return Bn(n,r,i,e,t,Ao[t])}]}));var Lo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,l,u;n.$watch(i.ngIf,(function(n){n?l||a((function(n,o){l=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)})):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=at(s.clone),t.leave(u).done((function(t){!1!==t&&(u=null)})),s=null))}))}}}],Ro=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:cr.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,l,u,c){var h,f,p,d=0,g=function(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).done((function(t){!1!==t&&(f=null)})),f=p,p=null)};r.$watch(o,(function(o){var l=function(t){!1===t||!b(s)||s&&!r.$eval(s)||e()},f=++d;o?(t(o,!0).then((function(t){if(!r.$$destroyed&&f===d){var e=r.$new();u.template=t,t=c(e,(function(t){g(),n.enter(t,null,i).done(l)})),p=t,(h=e).$emit("$includeContentLoaded",o),r.$eval(a)}}),(function(){r.$$destroyed||f!==d||(g(),r.$emit("$includeContentError",o))})),r.$emit("$includeContentRequested",o)):(g(),u.template=null)}))}}}}],jo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){sr.call(r[0]).match(/SVG/)?(r.empty(),e(dt(o.template,t.document).childNodes)(n,(function(t){r.append(t)}),{futureParentElement:r})):(r.html(o.template),e(r.contents())(n))}}}],No=Mn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),$o=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,s=a?mr(i):i;r.$parsers.push((function(t){if(!y(t)){var e=[];return t&&o(t.split(s),(function(t){t&&e.push(a?mr(t):t)})),e}})),r.$formatters.push((function(t){if(E(t))return t.join(i)})),r.$isEmpty=function(t){return!t||!t.length}}}},Fo="ng-valid",Do="ng-invalid",Go="ng-pristine",Uo="ng-dirty",Bo=r("ngModel");zn.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" "),zn.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return T(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){T(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Bo("nonassign",this.$$attr.ngModel,H(this.$$element))},$render:d,$isEmpty:function(t){return y(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Uo),this.$$animate.addClass(this.$$element,Go)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Go),this.$$animate.addClass(this.$$element,Uo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!fr(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,(function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())}))}},$$runValidators:function(t,e,n){function r(t,e){a===s.$$currentValidationRunId&&s.$setValidity(t,e)}function i(t){a===s.$$currentValidationRunId&&n(t)}this.$$currentValidationRunId++;var a=this.$$currentValidationRunId,s=this;!function(){var t=s.$$parserName;return y(s.$$parserValid)?(r(t,null),!0):(s.$$parserValid||(o(s.$validators,(function(t,e){r(e,null)})),o(s.$asyncValidators,(function(t,e){r(e,null)}))),r(t,s.$$parserValid),s.$$parserValid)}()?i(!1):function(){var n=!0;return o(s.$validators,(function(i,o){var a=Boolean(i(t,e));n=n&&a,r(o,a)})),!!n||(o(s.$asyncValidators,(function(t,e){r(e,null)})),!1)}()?function(){var n=[],a=!0;o(s.$asyncValidators,(function(i,o){var s=i(t,e);if(!s||!T(s.then))throw Bo("nopromise",s);r(o,void 0),n.push(s.then((function(){r(o,!0)}),(function(){a=!1,r(o,!1)})))})),n.length?s.$$q.all(n).then((function(){i(a)}),d):i(!0)}():i(!1)},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!y(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(y(t=this.$parsers[n](t))){this.$$parserValid=!1;break}fr(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");this.$$rawModelValue=t,i&&(this.$modelValue=t,e.$modelValue!==r&&e.$$writeModelToScope()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(n){i||(e.$modelValue=n?t:void 0,e.$modelValue!==r&&e.$$writeModelToScope())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),o(this.$viewChangeListeners,(function(t){try{t()}catch(dr){this.$$exceptionHandler(dr)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");_(e[t])?e=e[t]:_(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:_(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;0<e?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,d))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),(this.$$updateEvents=this.$options.getOption("updateOn"))&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Pn({clazz:zn,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var zo,Vo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:zn,priority:1,compile:function(e){return e.addClass(Go).addClass("ng-untouched").addClass(Fo),{pre:function(t,e,n,r){var i=r[0];e=r[1]||i.$$parentForm,(r=r[2])&&(i.$options=r.$options),i.$$initGetterSetters(),e.$addControl(i),n.$observe("name",(function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)})),t.$on("$destroy",(function(){i.$$parentForm.$removeControl(i)}))},post:function(e,n,r,i){function o(){a.$setTouched()}var a=i[0];a.$$setUpdateOnEvents(),n.on("blur",(function(){a.$touched||(t.$$phase?e.$evalAsync(o):e.$apply(o))}))}}}}}],qo=/(\s+|^)default(\s+|$)/;Vn.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return o(t=c({},t),(function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=mr(n.replace(qo,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],qn(t,this.$$options)),qn(t,zo.$$options),new Vn(t)}},zo=new Vn({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Ho=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:zo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}},Wo=Mn({terminal:!0,priority:1e3}),Ko=r("ngOptions"),Yo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Xo=["$compile","$document","$parse",function(e,n,r){function a(t,e,n){function o(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function a(t){var e;if(!u&&i(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}var s=t.match(Yo);if(!s)throw Ko("iexp",t,H(e));var l=s[5]||s[7],u=s[6];t=/ as /.test(s[0])&&s[1];var c=s[9];e=r(s[2]?s[1]:l);var h=t&&r(t)||e,f=c&&r(c),p=c?function(t,e){return f(n,e)}:function(t){return $t(t)},d=function(t,e){return p(t,w(t,e))},g=r(s[2]||s[1]),m=r(s[3]||""),v=r(s[4]||""),y=r(s[8]),b={},w=u?function(t,e){return b[u]=e,b[l]=t,b}:function(t){return b[l]=t,b};return{trackBy:c,getTrackByValue:d,getWatchables:r(y,(function(t){for(var e=[],r=a(t=t||[]),i=r.length,o=0;o<i;o++){var l=t[u=t===r?o:r[o]],u=w(l,u);l=p(l,u);e.push(l),(s[2]||s[1])&&(l=g(n,u),e.push(l)),s[4]&&(u=v(n,u),e.push(u))}return e})),getOptions:function(){for(var t=[],e={},r=y(n)||[],i=a(r),s=i.length,l=0;l<s;l++){var u=r===i?l:i[l],f=w(r[u],u),b=h(n,f);b=new o(u=p(b,f),b,g(n,f),m(n,f),f=v(n,f));t.push(b),e[u]=b}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[d(t)]},getViewValueFromOption:function(t){return c?j(t.viewValue):t.viewValue}}}}}var s=t.document.createElement("option"),l=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=d},post:function(t,r,i,u){function c(t){var e=(t=v.getOptionFromViewValue(t))&&t.element;return e&&!e.selected&&(e.selected=!0),t}function h(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}var f=u[0],p=u[1],d=i.multiple;u=0;for(var g=r.children(),m=g.length;u<m;u++)if(""===g[u].value){f.hasEmptyOption=!0,f.emptyOption=g.eq(u);break}r.empty(),u=!!f.emptyOption,Xn(s.cloneNode(!1)).val("?");var v,y=a(i.ngOptions,r,t),w=n[0].createDocumentFragment();f.generateUnknownOptionValue=function(t){return"?"},d?(f.writeValue=function(t){if(v){var e=t&&t.map(c)||[];v.items.forEach((function(t){t.element.selected&&-1===Array.prototype.indexOf.call(e,t)&&(t.element.selected=!1)}))}},f.readValue=function(){var t=r.val()||[],e=[];return o(t,(function(t){(t=v.selectValueMap[t])&&!t.disabled&&e.push(v.getViewValueFromOption(t))})),e},y.trackBy&&t.$watchCollection((function(){if(E(p.$viewValue))return p.$viewValue.map((function(t){return y.getTrackByValue(t)}))}),(function(){p.$render()}))):(f.writeValue=function(t){if(v){var e=r[0].options[r[0].selectedIndex],n=v.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(r[0].value!==n.selectValue&&(f.removeUnknownOption(),r[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):f.selectUnknownOrEmptyOption(t)}},f.readValue=function(){var t=v.selectValueMap[r.val()];return t&&!t.disabled?(f.unselectEmptyOption(),f.removeUnknownOption(),v.getViewValueFromOption(t)):null},y.trackBy&&t.$watch((function(){return y.getTrackByValue(p.$viewValue)}),(function(){p.$render()}))),u&&(e(f.emptyOption)(t),r.prepend(f.emptyOption),8===f.emptyOption[0].nodeType?(f.hasEmptyOption=!1,f.registerOption=function(t,e){""===e.val()&&(f.hasEmptyOption=!0,f.emptyOption=e,f.emptyOption.removeClass("ng-scope"),p.$render(),e.on("$destroy",(function(){var t=f.$isEmptyOptionSelected();f.hasEmptyOption=!1,f.emptyOption=void 0,t&&p.$render()})))}):f.emptyOption.removeClass("ng-scope")),t.$watchCollection(y.getWatchables,(function(){var t=v&&f.readValue();if(v)for(var e=v.items.length-1;0<=e;e--){var n=v.items[e];b(n.group)?It(n.element.parentNode):It(n.element)}v=y.getOptions();var i={};v.items.forEach((function(t){var e;if(b(t.group)){(e=i[t.group])||(e=l.cloneNode(!1),w.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e);var n=s.cloneNode(!1);e.appendChild(n),h(t,n)}else e=s.cloneNode(!1),w.appendChild(e),h(t,e)})),r[0].appendChild(w),p.$render(),p.$isEmpty(t)||(e=f.readValue(),(y.trackBy||d?$(t,e):t===e)||(p.$setViewValue(e),p.$render()))}))}}}}],Zo=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function u(t){s.text(t||"")}var c,h=l.count,f=l.$attr.when&&s.attr(l.$attr.when),p=l.offset||0,g=a.$eval(f)||{},m={},v=e.startSymbol(),b=e.endSymbol(),w=v+h+"-"+p+b,x=cr.noop;o(l,(function(t,e){var n=i.exec(e);n&&(n=(n[1]?"-":"")+nr(n[2]),g[n]=s.attr(l.$attr[e]))})),o(g,(function(t,n){m[n]=e(t.replace(r,w))})),a.$watch(h,(function(e){var r=parseFloat(e),i=fr(r);i||r in g||(r=t.pluralCat(r-p)),r===c||i&&fr(c)||(x(),y(i=m[r])?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),x=d,u()):x=a.$watch(i,u),c=r)}))}}}],Jo=r("ngRef"),Qo=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var r=Xt(L(e)),i=t(n.ngRef),o=i.assign||function(){throw Jo("nonassign",n.ngRef)};return function(t,e,a){var s;if(a.hasOwnProperty("ngRefRead")){if("$element"===a.ngRefRead)s=e;else if(!(s=e.data("$"+a.ngRefRead+"Controller")))throw Jo("noctrl",a.ngRefRead,n.ngRef)}else s=e.data("$"+r+"Controller");o(t,s=s||e),e.on("$destroy",(function(){i(t)===s&&o(t,null)}))}}}}],ta=["$parse","$animate","$compile",function(t,e,n){var a=r("ngRepeat"),s=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},l=function(t,e,n){return $t(n)},u=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,c){var h=c.ngRepeat,f=n.$$createComment("end ngRepeat",h);if(!(p=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/)))throw a("iexp",h);var p,d=p[1],g=p[2],m=p[3],v=p[4];if(!(p=d.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw a("iidexp",d);var y,b=p[3]||p[1],w=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw a("badident",m);if(v){var x={$id:$t},S=t(v);y=function(t,e,n,r){return w&&(x[w]=e),x[b]=n,x.$index=r,S(t,x)}}return function(t,n,r,c,p){var d=st();t.$watchCollection(g,(function(r){var c,g,v,S,_,k,E,M,T,O,P=n[0],C=st();if(m&&(t[m]=r),i(r))M=r,g=y||l;else for(O in g=y||u,M=[],r)er.call(r,O)&&"$"!==O.charAt(0)&&M.push(O);for(S=M.length,O=Array(S),c=0;c<S;c++)if(_=r===M?c:M[c],k=r[_],E=g(t,_,k,c),d[E])T=d[E],delete d[E],C[E]=T,O[c]=T;else{if(C[E])throw o(O,(function(t){t&&t.scope&&(d[t.id]=t)})),a("dupes",h,E,k);O[c]={id:E,scope:void 0,clone:void 0},C[E]=!0}for(v in x&&(x[b]=void 0),d){if(E=at((T=d[v]).clone),e.leave(E),E[0].parentNode)for(c=0,g=E.length;c<g;c++)E[c].$$NG_REMOVED=!0;T.scope.$destroy()}for(c=0;c<S;c++)if(_=r===M?c:M[c],k=r[_],(T=O[c]).scope){v=P;do{v=v.nextSibling}while(v&&v.$$NG_REMOVED);T.clone[0]!==v&&e.move(at(T.clone),null,P),P=T.clone[T.clone.length-1],s(T.scope,c,b,k,w,_,S)}else p((function(t,n){T.scope=n;var r=f.cloneNode(!1);t[t.length++]=r,e.enter(t,null,P),P=r,T.clone=t,C[T.id]=T,s(T.scope,c,b,k,w,_,S)}));d=C}))}}}}],ea=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,(function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],na=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,(function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],ra=Mn((function(t,e,n){t.$watchCollection(n.ngStyle,(function(t,n){n&&t!==n&&o(n,(function(t,n){e.css(n,"")})),t&&e.css(t)}))})),ia=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=[],l=[],u=[],c=[],h=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(i.ngSwitch||i.on,(function(n){for(var r,i;u.length;)t.cancel(u.pop());for(r=0,i=c.length;r<i;++r){var f=at(l[r].clone);c[r].$destroy(),(u[r]=t.leave(f)).done(h(u,r))}l.length=0,c.length=0,(s=a.cases["!"+n]||a.cases["?"])&&o(s,(function(n){n.transclude((function(r,i){c.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen"),l.push({clone:r}),t.enter(r,o.parent(),o)}))}))}))}}}],oa=Mn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){t=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(t,e,n){return n[e-1]!==t})),o(t,(function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})}))}}),aa=Mn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),sa=r("ngTransclude"),la=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){function a(){n(t,(function(t){e.append(t)}))}if(!o)throw sa("orphan",H(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude=""),o((function(t,n){var r;if(r=t.length)t:{r=0;for(var i=t.length;r<i;r++){var o=t[r];if(o.nodeType!==Er||o.nodeValue.trim()){r=!0;break t}}r=void 0}r?e.append(t):(a(),n.$destroy())}),null,r=r.ngTransclude||r.ngTranscludeSlot),r&&!o.isSlotFilled(r)&&a()}}}}],ua=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){"text/ng-template"===n.type&&t.put(n.id,e[0].text)}}}],ca={$setViewValue:d,$render:d},ha=["$element","$scope",function(e,n){function r(){s||(s=!0,n.$$postDigest((function(){s=!1,o.ngModelCtrl.$render()})))}function i(t){l||(l=!0,n.$$postDigest((function(){n.$$destroyed||(l=!1,o.ngModelCtrl.$setViewValue(o.readValue()),t&&o.ngModelCtrl.$render())})))}var o=this,a=new Kr;o.selectValueMap={},o.ngModelCtrl=ca,o.multiple=!1,o.unknownOption=Xn(t.document.createElement("option")),o.hasEmptyOption=!1,o.emptyOption=void 0,o.renderUnknownOption=function(t){t=o.generateUnknownOptionValue(t),o.unknownOption.val(t),e.prepend(o.unknownOption),Hn(o.unknownOption,!0),e.val(t)},o.updateUnknownOption=function(t){t=o.generateUnknownOptionValue(t),o.unknownOption.val(t),Hn(o.unknownOption,!0),e.val(t)},o.generateUnknownOptionValue=function(t){return"? "+$t(t)+" ?"},o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.selectEmptyOption=function(){o.emptyOption&&(e.val(""),Hn(o.emptyOption,!0))},o.unselectEmptyOption=function(){o.hasEmptyOption&&Hn(o.emptyOption,!1)},n.$on("$destroy",(function(){o.renderUnknownOption=d})),o.readValue=function(){var t=(t=e.val())in o.selectValueMap?o.selectValueMap[t]:t;return o.hasOption(t)?t:null},o.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];n&&Hn(Xn(n),!1),o.hasOption(t)?(o.removeUnknownOption(),n=$t(t),e.val(n in o.selectValueMap?n:t),Hn(Xn(e[0].options[e[0].selectedIndex]),!0)):o.selectUnknownOrEmptyOption(t)},o.addOption=function(t,e){if(8!==e[0].nodeType){ot(t,'"option value"'),""===t&&(o.hasEmptyOption=!0,o.emptyOption=e);var n=a.get(t)||0;a.set(t,n+1),r()}},o.removeOption=function(t){var e=a.get(t);e&&(1===e?(a.delete(t),""===t&&(o.hasEmptyOption=!1,o.emptyOption=void 0)):a.set(t,e-1))},o.hasOption=function(t){return!!a.get(t)},o.$hasEmptyOption=function(){return o.hasEmptyOption},o.$isUnknownOptionSelected=function(){return e[0].options[0]===o.unknownOption[0]},o.$isEmptyOptionSelected=function(){return o.hasEmptyOption&&e[0].options[e[0].selectedIndex]===o.emptyOption[0]},o.selectUnknownOrEmptyOption=function(t){null==t&&o.emptyOption?(o.removeUnknownOption(),o.selectEmptyOption()):o.unknownOption.parent().length?o.updateUnknownOption(t):o.renderUnknownOption(t)};var s=!1,l=!1;o.registerOption=function(t,e,n,a,s){var l,u;n.$attr.ngValue?n.$observe("value",(function(t){var n,r=e.prop("selected");b(u)&&(o.removeOption(l),delete o.selectValueMap[u],n=!0),u=$t(t),l=t,o.selectValueMap[u]=t,o.addOption(t,e),e.attr("value",u),n&&r&&i()})):a?n.$observe("value",(function(t){o.readValue();var n,r=e.prop("selected");b(l)&&(o.removeOption(l),n=!0),l=t,o.addOption(t,e),n&&r&&i()})):s?t.$watch(s,(function(t,r){n.$set("value",t);var a=e.prop("selected");r!==t&&o.removeOption(r),o.addOption(t,e),r&&a&&i()})):o.addOption(n.value,e);n.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(o.multiple?i(!0):(o.ngModelCtrl.$setViewValue(null),o.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=o.readValue(),e=n.value;o.removeOption(e),r(),(o.multiple&&t&&-1!==t.indexOf(e)||t===e)&&i(!0)}))}}],fa=function(){return{restrict:"E",require:["select","?ngModel"],controller:ha,priority:1,link:{pre:function(t,e,n,r){var i=r[0],a=r[1];if(a){if(i.ngModelCtrl=a,e.on("change",(function(){i.removeUnknownOption(),t.$apply((function(){a.$setViewValue(i.readValue())}))})),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return o(e.find("option"),(function(e){e.selected&&!e.disabled&&(e=e.value,t.push(e in i.selectValueMap?i.selectValueMap[e]:e))})),t},i.writeValue=function(t){o(e.find("option"),(function(e){var n=!!t&&(-1!==Array.prototype.indexOf.call(t,e.value)||-1!==Array.prototype.indexOf.call(t,i.selectValueMap[e.value]));n!==e.selected&&Hn(Xn(e),n)}))};var s,l=NaN;t.$watch((function(){l!==a.$viewValue||$(s,a.$viewValue)||(s=ut(a.$viewValue),a.$render()),l=a.$viewValue})),a.$isEmpty=function(t){return!t||0===t.length}}}else i.registerOption=d},post:function(t,e,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}}},pa=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return b(n.ngValue)||(b(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o=e.parent();(o=o.data("$selectController")||o.parent().data("$selectController"))&&o.registerOption(t,e,n,r,i)}}}}],da=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o=r.hasOwnProperty("required")||t(r.ngRequired)(e);r.ngRequired||(r.required=!0),i.$validators.required=function(t,e){return!o||!i.$isEmpty(e)},r.$observe("required",(function(t){o!==t&&(o=t,i.$validate())}))}}}}],ga=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,n){var r,i;return n.ngPattern&&(r=n.ngPattern,i="/"===n.ngPattern.charAt(0)&&tr.test(n.ngPattern)?function(){return n.ngPattern}:t(n.ngPattern)),function(t,e,n,o){if(o){var a=n.pattern;n.ngPattern?a=i(t):r=n.pattern;var s=Wn(a,r,e);n.$observe("pattern",(function(t){var n=s;s=Wn(t,r,e),(n&&n.toString())!==(s&&s.toString())&&o.$validate()})),o.$validators.pattern=function(t,e){return o.$isEmpty(e)||y(s)||s.test(e)}}}}}}],ma=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o=r.maxlength||t(r.ngMaxlength)(e),a=Kn(o);r.$observe("maxlength",(function(t){o!==t&&(a=Kn(t),o=t,i.$validate())})),i.$validators.maxlength=function(t,e){return 0>a||i.$isEmpty(e)||e.length<=a}}}}}],va=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o=r.minlength||t(r.ngMinlength)(e),a=Kn(o)||-1;r.$observe("minlength",(function(t){o!==t&&(a=Kn(t)||-1,o=t,i.$validate())})),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=a}}}}}];t.angular.bootstrap?t.console:(function(){var e;if(!kr){var n=br();(Zn=y(n)?t.jQuery:n?t[n]:void 0)&&Zn.fn.on?(Xn=Zn,c(Zn.fn,{scope:zr.scope,isolateScope:zr.isolateScope,controller:zr.controller,injector:zr.injector,inheritedData:zr.inheritedData})):Xn=gt,e=Xn.cleanData,Xn.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=(Xn._data(r)||{}).events)&&n.$destroy&&Xn(r).triggerHandler("$destroy");e(t)},cr.element=Xn,kr=!0}}(),function(n){c(n,{errorHandlingConfig:e,bootstrap:J,copy:j,extend:c,merge:h,equals:$,element:Xn,forEach:o,injector:Gt,noop:d,bind:D,toJson:U,fromJson:B,identity:g,isUndefined:y,isDefined:b,isString:S,isFunction:T,isObject:w,isNumber:_,isElement:A,isArray:E,version:Mr,isDate:k,callbacks:{$$counter:0},getTestability:tt,reloadWithDebugInfo:Q,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:nt,$$minErr:r,$$csp:yr,$$encodeUriSegment:Y,$$encodeUriQuery:X,$$lowercase:nr,$$stringify:lt,$$uppercase:rr}),Jn=function(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),i=r("ng");return(t=e(t,"angular",Object)).$$minErr=t.$$minErr||r,e(t,"module",(function(){var t={};return function(r,o,a){var s={};if("hasOwnProperty"===r)throw i("badname","module");return o&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,(function(){function t(t,e,n,r){return r||(r=l),function(){return r[n||"push"]([t,e,arguments]),f}}function e(t,e,n){return n||(n=l),function(i,o){return o&&T(o)&&(o.$$moduleName=r),n.push([t,e,arguments]),f}}if(!o)throw n("nomod",r);var l=[],u=[],c=[],h=t("$injector","invoke","push",u),f={_invokeQueue:l,_configBlocks:u,_runBlocks:c,info:function(t){if(b(t)){if(!w(t))throw i("aobj","value");return s=t,this}return s},requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:e("$provide","decorator",u),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),component:e("$compileProvider","component"),config:h,run:function(t){return c.push(t),this}};return a&&h(a),f}))}}))}(t),Jn("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:He}),t.provider("$compile",Kt).directive({a:to,input:yo,textarea:yo,form:io,script:ua,select:fa,option:pa,ngBind:So,ngBindHtml:ko,ngBindTemplate:_o,ngClass:Mo,ngClassEven:Oo,ngClassOdd:To,ngCloak:Po,ngController:Co,ngForm:oo,ngHide:na,ngIf:Lo,ngInclude:Ro,ngInit:No,ngNonBindable:Wo,ngPluralize:Zo,ngRef:Qo,ngRepeat:ta,ngShow:ea,ngStyle:ra,ngSwitch:ia,ngSwitchWhen:oa,ngSwitchDefault:aa,ngOptions:Xo,ngTransclude:la,ngModel:Vo,ngList:$o,ngChange:Eo,pattern:ga,ngPattern:ga,required:da,ngRequired:da,minlength:va,ngMinlength:va,maxlength:ma,ngMaxlength:ma,ngValue:xo,ngModelOptions:Ho}).directive({ngInclude:jo,input:bo}).directive(eo).directive(Io),t.provider({$anchorScroll:Ut,$animate:oi,$animateCss:li,$$animateJs:ri,$$animateQueue:ii,$$AnimateRunner:si,$$animateAsyncRun:ai,$browser:qt,$cacheFactory:Ht,$controller:te,$document:ee,$$isDocumentHidden:ne,$exceptionHandler:re,$filter:ln,$$forceReflow:gi,$interpolate:de,$interval:ge,$$intervalFactory:me,$http:he,$httpParamSerializer:oe,$httpParamSerializerJQLike:ae,$httpBackend:pe,$xhrFactory:fe,$jsonpCallbacks:ki,$location:Te,$log:Oe,$parse:Ge,$rootScope:qe,$q:Ue,$$q:Be,$sce:Ye,$sceDelegate:Ke,$sniffer:Xe,$$taskTrackerFactory:Ze,$templateCache:Wt,$templateRequest:Qe,$$testability:tn,$timeout:en,$window:on,$$rAF:Ve,$$jqLite:Nt,$$Map:Yr,$$cookieReader:sn})}]).info({angularVersion:"1.8.3"})}(cr),cr.module("ngLocale",[],["$provide",function(t){t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var n=0|t,r=e;return void 0===r&&(r=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3)),Math.pow(10,r),1==n&&0==r?"one":"other"}})}]),Xn((function(){Z(t.document,J)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}')),function(t,e){"use strict";function n(t,e){var n=[],r=t.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,(function(t,e,r,i){return t="?"===i||"*?"===i,i="*"===i||"*?"===i,n.push({name:r,optional:t}),e=e||"",(t?"(?:"+e:e+"(?:")+(i?"(.+?)":"([^/]+)")+(t?"?)?":")")})).replace(/([/$*])/g,"\\$1");return e.ignoreTrailingSlashes&&(r=r.replace(/\/+$/,"")+"/*"),{keys:n,regexp:new RegExp("^"+r+"(?:[?#]|$)",e.caseInsensitiveMatch?"i":"")}}function r(t){c&&t.get("$route")}function i(t,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,o,a,s,l){function u(){p&&(r.cancel(p),p=null),h&&(h.$destroy(),h=null),f&&((p=r.leave(f)).done((function(t){!1!==t&&(p=null)})),f=null)}function c(){var a=t.current&&t.current.locals;if(e.isDefined(a&&a.$template)){a=i.$new();var s=t.current;f=l(a,(function(t){r.enter(t,null,f||o).done((function(t){!1===t||!e.isDefined(d)||d&&!i.$eval(d)||n()})),u()})),(h=s.scope=a).$emit("$viewContentLoaded"),h.$eval(g)}else u()}var h,f,p,d=a.autoscroll,g=a.onload||"";i.$on("$routeChangeSuccess",c),c()}}}function o(t,e,n){return{restrict:"ECA",priority:-400,link:function(r,i){var o=n.current,a=o.locals;i.html(a.$template);var s=t(i.contents());if(o.controller){a.$scope=r;var l=e(o.controller,a);o.controllerAs&&(r[o.controllerAs]=l),i.data("$ngControllerController",l),i.children().data("$ngControllerController",l)}r[o.resolveAs||"$resolve"]=a,s(r)}}}var a,s,l,u,c,h=e.module("ngRoute",[]).info({angularVersion:"1.8.3"}).provider("$route",(function(){function t(t,n){return e.extend(Object.create(t),n)}a=e.isArray,s=e.isObject,l=e.isDefined,u=e.noop;var r={};this.when=function(t,i){var o;if(o=void 0,a(i)){o=o||[];for(var l=0,u=i.length;l<u;l++)o[l]=i[l]}else if(s(i))for(l in o=o||{},i)"$"===l.charAt(0)&&"$"===l.charAt(1)||(o[l]=i[l]);return o=o||i,e.isUndefined(o.reloadOnUrl)&&(o.reloadOnUrl=!0),e.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),e.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),r[t]=e.extend(o,{originalPath:t},t&&n(t,o)),t&&(l="/"===t[t.length-1]?t.substr(0,t.length-1):t+"/",r[l]=e.extend({originalPath:t,redirectTo:t},n(l,o))),this},this.caseInsensitiveMatch=!1,this.otherwise=function(t){return"string"==typeof t&&(t={redirectTo:t}),this.when(null,t),this},c=!0,this.eagerInstantiationEnabled=function(t){return l(t)?(c=t,this):c},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(n,i,o,a,s,l,c,h){function p(o){var a=S.current;b=function(){var n,o;return e.forEach(r,(function(r,a){var s;if(s=!o){var l=i.path();s=r.keys;var u={};if(r.regexp)if(l=r.regexp.exec(l)){for(var c=1,h=l.length;c<h;++c){var f=s[c-1],p=l[c];f&&p&&(u[f.name]=p)}s=u}else s=null;else s=null;s=n=s}s&&((o=t(r,{params:e.extend({},i.search(),n),pathParams:n})).$$route=r)})),o||r.null&&t(r.null,{params:{},pathParams:{}})}(),(w=!x&&b&&a&&b.$$route===a.$$route&&(!b.reloadOnUrl||!b.reloadOnSearch&&e.equals(b.pathParams,a.pathParams)))||!a&&!b||n.$broadcast("$routeChangeStart",b,a).defaultPrevented&&o&&o.preventDefault()}function d(){var t=S.current,r=b;if(w)t.params=r.params,e.copy(t.params,o),n.$broadcast("$routeUpdate",t);else if(r||t){x=!1,S.current=r;var i=a.resolve(r);h.$$incOutstandingRequestCount("$route"),i.then(g).then(m).then((function(a){return a&&i.then(v).then((function(i){r===S.current&&(r&&(r.locals=i,e.copy(r.params,o)),n.$broadcast("$routeChangeSuccess",r,t))}))})).catch((function(e){r===S.current&&n.$broadcast("$routeChangeError",r,t,e)})).finally((function(){h.$$completeOutstandingRequest(u,"$route")}))}}function g(t){var n={route:t,hasRedirection:!1};if(t)if(t.redirectTo)if(e.isString(t.redirectTo))n.path=y(t.redirectTo,t.params),n.search=t.params,n.hasRedirection=!0;else{var r=i.path(),o=i.search();t=t.redirectTo(t.pathParams,r,o),e.isDefined(t)&&(n.url=t,n.hasRedirection=!0)}else if(t.resolveRedirectTo)return a.resolve(s.invoke(t.resolveRedirectTo)).then((function(t){return e.isDefined(t)&&(n.url=t,n.hasRedirection=!0),n}));return n}function m(t){var e=!0;if(t.route!==S.current)e=!1;else if(t.hasRedirection){var n=i.url(),r=t.url;r?i.url(r).replace():r=i.path(t.path).search(t.search).replace().url(),r!==n&&(e=!1)}return e}function v(t){if(t){var n=e.extend({},t.resolve);return e.forEach(n,(function(t,r){n[r]=e.isString(t)?s.get(t):s.invoke(t,null,null,r)})),t=function(t){var n,r;return e.isDefined(n=t.template)?e.isFunction(n)&&(n=n(t.params)):e.isDefined(r=t.templateUrl)&&(e.isFunction(r)&&(r=r(t.params)),e.isDefined(r)&&(t.loadedTemplateUrl=c.valueOf(r),n=l(r))),n}(t),e.isDefined(t)&&(n.$template=t),a.all(n)}}function y(t,n){var r=[];return e.forEach((t||"").split(":"),(function(t,e){if(0===e)r.push(t);else{var i=t.match(/(\w+)(?:[?*])?(.*)/),o=i[1];r.push(n[o]),r.push(i[2]||""),delete n[o]}})),r.join("")}var b,w,x=!1,S={routes:r,reload:function(){x=!0;var t={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,x=!1}};n.$evalAsync((function(){p(t),t.defaultPrevented||d()}))},updateParams:function(t){if(!this.current||!this.current.$$route)throw f("norout");t=e.extend({},this.current.params,t),i.path(y(this.current.$$route.originalPath,t)),i.search(t)}};return n.$on("$locationChangeStart",p),n.$on("$locationChangeSuccess",d),S}]})).run(r),f=e.$$minErr("ngRoute");r.$inject=["$injector"],h.provider("$routeParams",(function(){this.$get=function(){return{}}})),h.directive("ngView",i),h.directive("ngView",o),i.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");var t,e,n;!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||3<e[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;return t(this).one("bsTransitionEnd",(function(){n=!0})),setTimeout((function(){n||t(r).trigger(t.support.transition.end)}),e),this},t((function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}))}(jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.4.1",n.TRANSITION_DURATION=150,n.prototype.close=function(e){var r=t(this),i=r.attr("data-target");i||(i=(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),i="#"===i?[]:i;var o=t(document).find(i);function a(){o.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a())};var r=t.fn.alert;t.fn.alert=function(e){return this.each((function(){var r=t(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof e&&i[e].call(r)}))},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),function(t){"use strict";var e=function(n,r){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,r),this.isLoading=!1};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.button"),o="object"==typeof n&&n;i||r.data("bs.button",i=new e(this,o)),"toggle"==n?i.toggle():n&&i.setState(n)}))}e.VERSION="3.4.1",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();e+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(t.proxy((function(){r[i](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))}),this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=t.fn.button;t.fn.button=n,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=r,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(e){var r=t(e.target).closest(".btn");n.call(r,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))}))}(jQuery),function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.carousel"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n),a="string"==typeof n?n:o.slide;i||r.data("bs.carousel",i=new e(this,o)),"number"==typeof n?i.to(n):a?i[a]():o.interval&&i.pause().cycle()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var r=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(r)},e.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",(function(){e.to(t)})):n==t?this.pause().cycle():this.slide(n<t?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(n,i),a=this.interval,s="next"==n?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),"object"==typeof o&&o.length&&o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",(function(){o.removeClass([n,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout((function(){l.$element.trigger(f)}),0)})).emulateTransitionEnd(e.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(f)),a&&this.cycle(),this}};var r=t.fn.carousel;t.fn.carousel=n,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=r,this};var i=function(e){var r=t(this),i=r.attr("href");i&&(i=i.replace(/.*(?=#[^\s]+$)/,""));var o=r.attr("data-target")||i,a=t(document).find(o);if(a.hasClass("carousel")){var s=t.extend({},a.data(),r.data()),l=r.attr("data-slide-to");l&&(s.interval=!1),n.call(a,s),l&&a.data("bs.carousel").to(l),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),t(window).on("load",(function(){t('[data-ride="carousel"]').each((function(){var e=t(this);n.call(e,e.data())}))}))}(jQuery),function(t){"use strict";var e=function(n,r){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,r),this.$trigger=t('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(e){var n,r=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(document).find(r)}function r(n){return this.each((function(){var r=t(this),i=r.data("bs.collapse"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),i||r.data("bs.collapse",i=new e(this,o)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(n=i.data("bs.collapse"))&&n.transitioning)){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[a](this.$element[0][l])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=t.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy((function(e,r){var i=t(r);this.addAriaAndCollapsedClass(n(i),i)}),this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=t.fn.collapse;t.fn.collapse=r,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(e){var i=t(this);i.attr("data-target")||e.preventDefault();var o=n(i),a=o.data("bs.collapse")?"toggle":i.data();r.call(o,a)}))}(jQuery),function(t){"use strict";var e='[data-toggle="dropdown"]',n=function(e){t(e).on("click.bs.dropdown",this.toggle)};function r(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r="#"!==n?t(document).find(n):null;return r&&r.length?r:e.parent()}function i(n){n&&3===n.which||(t(".dropdown-backdrop").remove(),t(e).each((function(){var e=t(this),i=r(e),o={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(i[0],n.target)||(i.trigger(n=t.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),i.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))})))}n.VERSION="3.4.1",n.prototype.toggle=function(e){var n=t(this);if(!n.is(".disabled, :disabled")){var o=r(n),a=o.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var s={relatedTarget:this};if(o.trigger(e=t.Event("show.bs.dropdown",s)),e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},n.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=r(i),a=o.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&o.find(e).trigger("focus"),i.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(n.target);38==n.which&&0<l&&l--,40==n.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each((function(){var r=t(this),i=r.data("bs.dropdown");i||r.data("bs.dropdown",i=new n(this)),"string"==typeof e&&i[e].call(r)}))},t.fn.dropdown.Constructor=n,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("click.bs.dropdown.data-api",e,n.prototype.toggle).on("keydown.bs.dropdown.data-api",e,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(t){"use strict";var e=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};function n(n,r){return this.each((function(){var i=t(this),o=i.data("bs.modal"),a=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.modal",o=new e(this,a)),"string"==typeof n?o[n](r):a.show&&o.show(r)}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(n){var r=this,i=t.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){r.$element.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is(r.$element)&&(r.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",(function(){r.$element.trigger("focus").trigger(o)})).emulateTransitionEnd(e.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)})))},e.prototype.hide=function(n){n&&n.preventDefault(),n=t.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")}),this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop((function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")}))},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy((function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),n&&n()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):a()}else n&&n()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var n=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+n),t(this.fixedContent).each((function(e,r){var i=r.style.paddingRight,o=t(r).css("padding-right");t(r).data("padding-right",i).css("padding-right",parseFloat(o)+n+"px")})))},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each((function(e,n){var r=t(n).data("padding-right");t(n).removeData("padding-right"),n.style.paddingRight=r||""}))},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=n,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(e){var r=t(this),i=r.attr("href"),o=r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""),a=t(document).find(o),s=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},a.data(),r.data());r.is("a")&&e.preventDefault(),a.one("show.bs.modal",(function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",(function(){r.is(":visible")&&r.trigger("focus")}))})),n.call(a,s,this)}))}(jQuery),function(t){"use strict";var e=["sanitize","whiteList","sanitizeFn"],n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,i=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(e,o){var a=e.nodeName.toLowerCase();if(-1!==t.inArray(a,o))return-1===t.inArray(a,n)||Boolean(e.nodeValue.match(r)||e.nodeValue.match(i));for(var s=t(o).filter((function(t,e){return e instanceof RegExp})),l=0,u=s.length;l<u;l++)if(a.match(s[l]))return!0;return!1}function a(e,n,r){if(0===e.length)return e;if(r&&"function"==typeof r)return r(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;var i=document.implementation.createHTMLDocument("sanitization");i.body.innerHTML=e;for(var a=t.map(n,(function(t,e){return e})),s=t(i.body).find("*"),l=0,u=s.length;l<u;l++){var c=s[l],h=c.nodeName.toLowerCase();if(-1!==t.inArray(h,a))for(var f=t.map(c.attributes,(function(t){return t})),p=[].concat(n["*"]||[],n[h]||[]),d=0,g=f.length;d<g;d++)o(f[d],p)||c.removeAttribute(f[d].nodeName);else c.parentNode.removeChild(c)}return i.body.innerHTML}var s=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};s.VERSION="3.4.1",s.TRANSITION_DURATION=150,s.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},s.prototype.init=function(e,n,r){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},s.prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.getOptions=function(n){var r=this.$element.data();for(var i in r)r.hasOwnProperty(i)&&-1!==t.inArray(i,e)&&delete r[i];return(n=t.extend({},this.getDefaults(),r,n)).delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),n.sanitize&&(n.template=a(n.template,n.whiteList,n.sanitizeFn)),n},s.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,(function(t,r){n[t]!=r&&(e[t]=r)})),e},s.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout((function(){"in"==n.hoverState&&n.show()}),n.options.delay.show)}},s.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},s.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout((function(){"out"==n.hoverState&&n.hide()}),n.options.delay.hide)}},s.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var r=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(a);u&&(a=a.replace(l,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?i.appendTo(t(document).find(this.options.container)):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=i[0].offsetWidth,f=i[0].offsetHeight;if(u){var p=a,d=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+f>d.bottom?"top":"top"==a&&c.top-f<d.top?"bottom":"right"==a&&c.right+h>d.width?"left":"left"==a&&c.left-h<d.left?"right":a,i.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,c,h,f);this.applyPlacement(g,a);var m=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(s.TRANSITION_DURATION):m()}},s.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var l=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),f=h?2*c.left-i+l:2*c.top-o+u,p=h?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(f,r[0][p],h)},s.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},s.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=a(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},s.prototype.hide=function(e){var n=this,r=t(this.$tip),i=t.Event("hide.bs."+this.type);function o(){"in"!=n.hoverState&&r.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}if(this.$element.trigger(i),!i.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(s.TRANSITION_DURATION):o(),this.hoverState=null,this},s.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},s.prototype.hasContent=function(){return this.getTitle()},s.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=r?{top:0,left:0}:o?null:e.offset(),s={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,s,l,a)},s.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},s.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+r;s<a.top?i.top=a.top-s:l>a.top+a.height&&(i.top=a.top+a.height-l)}else{var u=e.left-o,c=e.left+o+n;u<a.left?i.left=a.left-u:c>a.right&&(i.left=a.left+a.width-c)}return i},s.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},s.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},s.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.toggleEnabled=function(){this.enabled=!this.enabled},s.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},s.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null}))},s.prototype.sanitizeHtml=function(t){return a(t,this.options.whiteList,this.options.sanitizeFn)};var l=t.fn.tooltip;t.fn.tooltip=function(e){return this.each((function(){var n=t(this),r=n.data("bs.tooltip"),i="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||n.data("bs.tooltip",r=new s(this,i)),"string"==typeof e&&r[e]())}))},t.fn.tooltip.Constructor=s,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=l,this}}(jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.4.1",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype)).constructor=e).prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();if(this.options.html){var r=typeof n;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===r&&(n=this.sanitizeHtml(n))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===r?"html":"append"](n)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(n);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=function(n){return this.each((function(){var r=t(this),i=r.data("bs.popover"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.popover",i=new e(this,o)),"string"==typeof n&&i[n]())}))},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(t){"use strict";function e(n,r){this.$body=t(document.body),this.$scrollElement=t(n).is(document.body)?t(window):t(n),this.options=t.extend({},e.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each((function(){var r=t(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new e(this,o)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var e=t(this),i=e.data("target")||e.attr("href"),o=/^#./.test(i)&&t(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null})).sort((function(t,e){return t[0]-e[0]})).each((function(){e.offsets.push(this[0]),e.targets.push(this[1])}))},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),r<=e)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)a!=o[t]&&e>=i[t]&&(void 0===i[t+1]||e<i[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',r=t(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=r,this},t(window).on("load.bs.scrollspy.data-api",(function(){t('[data-spy="scroll"]').each((function(){var e=t(this);n.call(e,e.data())}))}))}(jQuery),function(t){"use strict";var e=function(e){this.element=t(e)};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new e(this)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=(r=e.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=t(document).find(r);this.activate(e.closest("li"),n),this.activate(s,s.parent(),(function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})}))}}},e.prototype.activate=function(n,r,i){var o=r.find("> .active"),a=i&&t.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(e.TRANSITION_DURATION):s(),o.removeClass("in")};var r=t.fn.tab;t.fn.tab=n,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=r,this};var i=function(e){e.preventDefault(),n.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(t){"use strict";var e=function(n,r){this.options=t.extend({},e.DEFAULTS,r);var i=this.options.target===e.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=i.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.affix"),o="object"==typeof n&&n;i||r.data("bs.affix",i=new e(this,o)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=t-r)&&"bottom";var s=null==this.affixed,l=s?i:o.top;return null!=n&&i<=n?"top":null!=r&&t-r<=l+(s?a:e)&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,n,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-n-o})}};var r=t.fn.affix;t.fn.affix=n,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",(function(){t('[data-spy="affix"]').each((function(){var e=t(this),r=e.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),n.call(e,r)}))}))}(jQuery),t=function(){function t(t){"use strict";var e=t.storageKey(),n=t.storage(),r=function(){var r=t.preferredLanguage();angular.isString(r)?t.use(r):n.put(e,t.use())};r.displayName="fallbackFromIncorrectStorageValue",n?n.get(e)?t.use(n.get(e)).catch(r):r():angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}function e(t,e,n,r){"use strict";var i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w={},x=[],S=t,_=[],k="translate-cloak",E=!1,M=!1,T=!0,O=".",P=!1,C=!1,I=0,A=!0,L="default",R={default:function(t){return(t||"").split("-").join("_")},java:function(t){var e=(t||"").split("-").join("_"),n=e.split("_");return 1<n.length?n[0].toLowerCase()+"_"+n[1].toUpperCase():e},bcp47:function(t){var e=(t||"").split("_").join("-"),n=e.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return e}return n.join("-")},"iso639-1":function(t){return(t||"").split("_").join("-").split("-")[0].toLowerCase()}},j=function(){if(angular.isFunction(r.getLocale))return r.getLocale();var t,n,i=e.$get().navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(i.languages))for(t=0;t<i.languages.length;t++)if((n=i.languages[t])&&n.length)return n;for(t=0;t<o.length;t++)if((n=i[o[t]])&&n.length)return n;return null};j.displayName="angular-translate/service: getFirstBrowserLanguage";var N=function(){var t=j()||"";return R[L]&&(t=R[L](t)),t};N.displayName="angular-translate/service: getLocale";var $=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},F=function(){return this.toString().replace(/^\s+|\s+$/g,"")},D=function(t){return angular.isString(t)?t.toLowerCase():t},G=function(t){if(t){for(var e,n=[],r=D(t),i=0,a=x.length;i<a;i++)n.push(D(x[i]));if(-1<(i=$(n,r)))return x[i];if(o)for(var s in o)if(o.hasOwnProperty(s)){var l=!1,u=Object.prototype.hasOwnProperty.call(o,s)&&D(s)===D(t);if("*"===s.slice(-1)&&(l=D(s.slice(0,-1))===D(t.slice(0,s.length-1))),(u||l)&&(e=o[s],-1<$(n,D(e))))return e}var c=t.split("_");return 1<c.length&&-1<$(n,D(c[0]))?c[0]:void 0}},U=function(t,e){if(!t&&!e)return w;if(t&&!e){if(angular.isString(t))return w[t]}else angular.isObject(w[t])||(w[t]={}),angular.extend(w[t],B(e));return this};this.translations=U,this.cloakClassName=function(t){return t?(k=t,this):k},this.allowNamespaces=function(t){return void 0===t?T:(T=t,this)},this.nestedObjectDelimeter=function(t){return t?(O=t,this):O};var B=function(t,e,n,r){var i,o,a;if(e||(e=[]),n||(n={}),!T)return t;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a=t[i],angular.isObject(a)?B(a,e.concat(i),n,i):(o=e.length?""+e.join(O)+O+i:i,e.length&&i===r&&(n[""+e.join(O)]="@:"+o),n[o]=a));return n};B.displayName="flatObject",this.addInterpolation=function(t){return _.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return p=t,this},this.useSanitizeValueStrategy=function(t){return n.useStrategy(t),this},this.preferredLanguage=function(t){return t?(z(t),this):i};var z=function(t){return t&&(i=t),i};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(m=t,this):m},this.translationNotFoundIndicatorRight=function(t){return t?(v=t,this):v},this.fallbackLanguage=function(t){return V(t),this};var V=function(t){return t?(angular.isString(t)?(s=!0,a=[t]):angular.isArray(t)&&(s=!1,a=t),angular.isString(i)&&$(a,i)<0&&a.push(i),this):s?a[0]:a};this.use=function(t){if(t){if(!w[t]&&!d)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return l=t,this}return l},this.resolveClientLocale=function(){return N()};var q=function(t){return t?(S=t,this):h?h+S:S};this.storageKey=q,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return d=t,g=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return c=t,this},this.storagePrefix=function(t){return t?(h=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return f=t,this},this.usePostCompiling=function(t){return E=!!t,this},this.forceAsyncReload=function(t){return M=!!t,this},this.uniformLanguageTag=function(t){return t?angular.isString(t)&&(t={standard:t}):t={},L=t.standard,this},this.determinePreferredLanguage=function(t){var e=t&&angular.isFunction(t)?t():N();return i=x.length&&G(e)||e,this},this.registerAvailableLanguageKeys=function(t,e){return t?(x=t,e&&(o=e),this):x},this.useLoaderCache=function(t){return!1===t?y=void 0:!0===t?y=!0:void 0===t?y="$translationCache":t&&(y=t),this},this.directivePriority=function(t){return void 0===t?I:(I=t,this)},this.statefulFilter=function(t){return void 0===t?A:(A=t,this)},this.postProcess=function(t){return b=t||void 0,this},this.keepContent=function(t){return C=!!t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,e,n,r){var o,h,L,R=e.get(p||"$translateDefaultInterpolation"),j=!1,D={},H={},W=function(t,e,n,s,u,f){!l&&i&&(l=i);var p=u&&u!==l?G(u)||u:l;if(u&&at(u),angular.isArray(t))return function(t){for(var i={},o=[],a=function(t){var o=r.defer(),a=function(e){i[t]=e,o.resolve([t,e])};return W(t,e,n,s,u,f).then(a,a),o.promise},l=0,c=t.length;l<c;l++)o.push(a(t[l]));return r.all(o).then((function(){return i}))}(t);var d=r.defer();if(!t)throw new TypeError("translationId must be a not empty string");t=F.apply(t);var g=function(){var t=H[p]||H[i];if(h=0,c&&!t){var e=o.get(S);if(t=H[e],a&&a.length){var n=$(a,e);h=0===n?1:0,$(a,i)<0&&a.push(i)}}return t}();if(g){var m=function(){u||(p=l),rt(t,e,n,s,p,f).then(d.resolve,d.reject)};m.displayName="promiseResolved",g.finally(m).catch(angular.noop)}else rt(t,e,n,s,p,f).then(d.resolve,d.reject);return d.promise},K=function(t){return m&&(t=[m,t].join(" ")),v&&(t=[t,v].join(" ")),t},Y=function(t){l=t,c&&o.put(W.storageKey(),l),n.$emit("$translateChangeSuccess",{language:t}),R.setLocale(l);var e=function(t,e){D[e].setLocale(l)};e.displayName="eachInterpolatorLocaleSetter",angular.forEach(D,e),n.$emit("$translateChangeEnd",{language:t})},X=function(t){if(!t)throw"No language key specified for loading.";var i=r.defer();n.$emit("$translateLoadingStart",{language:t}),j=!0;var o=y;"string"==typeof o&&(o=e.get(o));var a=angular.extend({},g,{key:t,$http:angular.extend({},{cache:o},g.$http)}),s=function(e){var r={};n.$emit("$translateLoadingSuccess",{language:t}),angular.isArray(e)?angular.forEach(e,(function(t){angular.extend(r,B(t))})):angular.extend(r,B(e)),j=!1,i.resolve({key:t,table:r}),n.$emit("$translateLoadingEnd",{language:t})};s.displayName="onLoaderSuccess";var l=function(t){n.$emit("$translateLoadingError",{language:t}),i.reject(t),n.$emit("$translateLoadingEnd",{language:t})};return l.displayName="onLoaderError",e.get(d)(a).then(s,l),i.promise};if(c&&(!(o=e.get(c)).get||!o.put))throw new Error("Couldn't use storage '"+c+"', missing get() or put() method!");if(_.length){var Z=function(t){var n=e.get(t);n.setLocale(i||l),D[n.getInterpolationIdentifier()]=n};Z.displayName="interpolationFactoryAdder",angular.forEach(_,Z)}var J=function(t,e,n,i,o){var a=r.defer(),s=function(r){if(Object.prototype.hasOwnProperty.call(r,e)&&null!==r[e]){i.setLocale(t);var s=r[e];if("@:"===s.substr(0,2))J(t,s.substr(2),n,i,o).then(a.resolve,a.reject);else{var u=i.interpolate(r[e],n,"service",o,e);u=ot(e,r[e],u,n,t),a.resolve(u)}i.setLocale(l)}else a.reject()};return s.displayName="fallbackTranslationResolver",function(t){var e=r.defer();if(Object.prototype.hasOwnProperty.call(w,t))e.resolve(w[t]);else if(H[t]){var n=function(t){U(t.key,t.table),e.resolve(t.table)};n.displayName="translationTableResolver",H[t].then(n,e.reject)}else e.reject();return e.promise}(t).then(s,a.reject),a.promise},Q=function(t,e,n,r,i){var o,a=w[t];if(a&&Object.prototype.hasOwnProperty.call(a,e)&&null!==a[e]){if(r.setLocale(t),o=r.interpolate(a[e],n,"filter",i,e),o=ot(e,a[e],o,n,t,i),!angular.isString(o)&&angular.isFunction(o.$$unwrapTrustedValue)){var s=o.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return Q(t,s.substr(2),n,r,i)}else if("@:"===o.substr(0,2))return Q(t,o.substr(2),n,r,i);r.setLocale(l)}return o},tt=function(t,n,r,i){return f?e.get(f)(t,l,n,r,i):t},et=function(t,e,n,i,o,s){var l=r.defer();if(t<a.length){var u=a[t];J(u,e,n,i,s).then((function(t){l.resolve(t)}),(function(){return et(t+1,e,n,i,o,s).then(l.resolve,l.reject)}))}else if(o)l.resolve(o);else{var c=tt(e,n,o);f&&c?l.resolve(c):l.reject(K(e))}return l.promise},nt=function(t,e,n,r,i){var o;if(t<a.length){var s=a[t];(o=Q(s,e,n,r,i))||""===o||(o=nt(t+1,e,n,r))}return o},rt=function(t,e,n,i,o,s){var l,u,c,p,d,g=r.defer(),m=o?w[o]:w,v=n?D[n]:R;if(m&&Object.prototype.hasOwnProperty.call(m,t)&&null!==m[t]){var y=m[t];if("@:"===y.substr(0,2))W(y.substr(2),e,n,i,o,s).then(g.resolve,g.reject);else{var b=v.interpolate(y,e,"service",s,t);b=ot(t,y,b,e,o),g.resolve(b)}}else{var x;f&&!j&&(x=tt(t,e,i)),o&&a&&a.length?(l=t,u=e,c=v,p=i,d=s,et(0<L?L:h,l,u,c,p,d)).then((function(t){g.resolve(t)}),(function(t){g.reject(K(t))})):f&&!j&&x?i?g.resolve(i):g.resolve(x):i?g.resolve(i):g.reject(K(t))}return g.promise},it=function(t,e,n,r,i){var o,s=r?w[r]:w,l=R;if(D&&Object.prototype.hasOwnProperty.call(D,n)&&(l=D[n]),s&&Object.prototype.hasOwnProperty.call(s,t)&&null!==s[t]){var u=s[t];o="@:"===u.substr(0,2)?it(u.substr(2),e,n,r,i):(o=l.interpolate(u,e,"filter",i,t),ot(t,u,o,e,r,i))}else{var c;f&&!j&&(c=tt(t,e,i)),o=r&&a&&a.length?nt((h=0)<L?L:h,t,e,l,i):f&&!j&&c?c:K(t)}return o},ot=function(t,n,r,i,o,a){var s=b;return s&&("string"==typeof s&&(s=e.get(s)),s)?s(t,n,r,i,o,a):r},at=function(t){w[t]||!d||H[t]||(H[t]=X(t).then((function(t){return U(t.key,t.table),t})))};W.preferredLanguage=function(t){return t&&z(t),i},W.cloakClassName=function(){return k},W.allowNamespaces=function(){return T},W.nestedObjectDelimeter=function(){return O},W.fallbackLanguage=function(t){if(null!=t){if(V(t),d&&a&&a.length)for(var e=0,n=a.length;e<n;e++)H[a[e]]||(H[a[e]]=X(a[e]));W.use(W.use())}return s?a[0]:a},W.useFallbackLanguage=function(t){if(null!=t)if(t){var e=$(a,t);-1<e&&(L=e)}else L=0},W.proposedLanguage=function(){return u},W.storage=function(){return o},W.negotiateLocale=G,W.use=function(t){if(!t)return l;var e=r.defer();e.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:t});var i=G(t);return 0<x.length&&!i?r.reject(t):(i&&(t=i),u=t,!M&&w[t]||!d||H[t]?H[t]?H[t].then((function(t){return u===t.key&&Y(t.key),e.resolve(t.key),t}),(function(t){return!l&&a&&0<a.length&&a[0]!==t?W.use(a[0]).then(e.resolve,e.reject):e.reject(t)})):(e.resolve(t),Y(t)):(H[t]=X(t).then((function(n){return U(n.key,n.table),e.resolve(n.key),u===t&&Y(n.key),n}),(function(t){return n.$emit("$translateChangeError",{language:t}),e.reject(t),n.$emit("$translateChangeEnd",{language:t}),r.reject(t)})),H[t].finally((function(){var e;u===(e=t)&&(u=void 0),H[e]=void 0})).catch(angular.noop)),e.promise)},W.resolveClientLocale=function(){return N()},W.storageKey=function(){return q()},W.isPostCompilingEnabled=function(){return E},W.isForceAsyncReloadEnabled=function(){return M},W.isKeepContent=function(){return C},W.refresh=function(t){if(!d)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:t});var e=r.defer(),i={};function o(t){var e=X(t);return(H[t]=e).then((function(e){w[t]={},U(t,e.table),i[t]=!0}),angular.noop),e}if(e.promise.then((function(){for(var t in w)w.hasOwnProperty(t)&&(t in i||delete w[t]);l&&Y(l)}),angular.noop).finally((function(){n.$emit("$translateRefreshEnd",{language:t})})),t)w[t]?o(t).then(e.resolve,e.reject):e.reject();else{var s=a&&a.slice()||[];l&&-1===s.indexOf(l)&&s.push(l),r.all(s.map(o)).then(e.resolve,e.reject)}return e.promise},W.instant=function(t,e,n,r,o){var s=r&&r!==l?G(r)||r:l;if(null===t||angular.isUndefined(t))return t;if(r&&at(r),angular.isArray(t)){for(var u={},c=0,h=t.length;c<h;c++)u[t[c]]=W.instant(t[c],e,n,r,o);return u}if(angular.isString(t)&&t.length<1)return t;t&&(t=F.apply(t));var p,d,g=[];i&&g.push(i),s&&g.push(s),a&&a.length&&(g=g.concat(a));for(var y=0,b=g.length;y<b;y++){var x=g[y];if(w[x]&&void 0!==w[x][t]&&(p=it(t,e,n,s,o)),void 0!==p)break}return p||""===p||(m||v?p=K(t):(p=R.interpolate(t,e,"filter",o),f&&!j&&(d=tt(t,e,o)),f&&!j&&d&&(p=d))),p},W.versionInfo=function(){return"2.19.0"},W.loaderCache=function(){return y},W.directivePriority=function(){return I},W.statefulFilter=function(){return A},W.isReady=function(){return P};var st=r.defer();st.promise.then((function(){P=!0})),W.onReady=function(t){var e=r.defer();return angular.isFunction(t)&&e.promise.then(t),P?e.resolve():st.promise.then(e.resolve),e.promise},W.getAvailableLanguageKeys=function(){return 0<x.length?x:null},W.getTranslationTable=function(t){return(t=t||W.use())&&w[t]?angular.copy(w[t]):null};var lt=n.$on("$translateReady",(function(){st.resolve(),lt(),lt=null})),ut=n.$on("$translateChangeEnd",(function(){st.resolve(),ut(),ut=null}));if(d){if(angular.equals(w,{})&&W.use()&&W.use(W.use()),a&&a.length)for(var ct=function(t){return U(t.key,t.table),n.$emit("$translateChangeEnd",{language:t.key}),t},ht=0,ft=a.length;ht<ft;ht++){var pt=a[ht];!M&&w[pt]||(H[pt]=X(pt).then(ct))}}else n.$emit("$translateReady",{language:W.use()});return W}]}function n(t,e){"use strict";var n={setLocale:function(t){},getInterpolationIdentifier:function(){return"default"},useSanitizeValueStrategy:function(t){return e.useStrategy(t),this},interpolate:function(n,r,i,o,a){var s;return r=r||{},r=e.sanitize(r,"params",o,i),angular.isNumber(n)?""+n:angular.isString(n)?(s=t(n)(r),e.sanitize(s,"text",o,i)):""}};return n}function r(t,e,n,r,i){"use strict";var o=function(t){return angular.isString(t)?t.toLowerCase():t};return{restrict:"AE",scope:!0,priority:t.directivePriority(),compile:function(a,s){var l=s.translateValues?s.translateValues:void 0,u=s.translateInterpolation?s.translateInterpolation:void 0,c=s.translateSanitizeStrategy?s.translateSanitizeStrategy:void 0,h=a[0].outerHTML.match(/translate-value-+/i),f="^(.*)("+e.startSymbol()+".*"+e.endSymbol()+")(.*)",p="^(.*)"+e.startSymbol()+"(.*)"+e.endSymbol()+"(.*)";return function(a,d,g){a.interpolateParams={},a.preText="",a.postText="",a.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(a);var m={},v=function(t){if(angular.isFunction(v._unwatchOld)&&(v._unwatchOld(),v._unwatchOld=void 0),angular.equals(t,"")||!angular.isDefined(t)){var n=function(){return this.toString().replace(/^\s+|\s+$/g,"")}.apply(d.text()).replace(/\n/g," "),r=n.match(f);if(angular.isArray(r)){a.preText=r[1],a.postText=r[3],m.translate=e(r[2])(a.$parent);var i=n.match(p);angular.isArray(i)&&i[2]&&i[2].length&&(v._unwatchOld=a.$watch(i[2],(function(t){m.translate=t,_()})))}else m.translate=n||void 0}else m.translate=t;_()},y=function(t){g.$observe(t,(function(e){m[t]=e,_()}))};!function(t,e,n){if(e.translateValues&&angular.extend(t,r(e.translateValues)(a.$parent)),h)for(var i in n)Object.prototype.hasOwnProperty.call(e,i)&&"translateValue"===i.substr(0,14)&&"translateValues"!==i&&(t[o(i.substr(14,1))+i.substr(15)]=n[i])}(a.interpolateParams,g,s);var b=!0;for(var w in g.$observe("translate",(function(t){void 0===t?v(""):""===t&&b||(m.translate=t,_()),b=!1})),g)g.hasOwnProperty(w)&&"translateAttr"===w.substr(0,13)&&13<w.length&&y(w);if(g.$observe("translateDefault",(function(t){a.defaultText=t,_()})),c&&g.$observe("translateSanitizeStrategy",(function(t){a.sanitizeStrategy=r(t)(a.$parent),_()})),l&&g.$observe("translateValues",(function(t){t&&a.$parent.$watch((function(){angular.extend(a.interpolateParams,r(t)(a.$parent))}))})),h){var x=function(t){g.$observe(t,(function(e){var n=o(t.substr(14,1))+t.substr(15);a.interpolateParams[n]=e}))};for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&"translateValue"===S.substr(0,14)&&"translateValues"!==S&&x(S)}var _=function(){for(var t in m)m.hasOwnProperty(t)&&void 0!==m[t]&&k(t,m[t],a,a.interpolateParams,a.defaultText,a.translateNamespace)},k=function(e,n,r,i,o,a){n?(a&&"."===n.charAt(0)&&(n=a+n),t(n,i,u,o,r.translateLanguage,r.sanitizeStrategy).then((function(t){E(t,r,!0,e)}),(function(t){E(t,r,!1,e)}))):E(n,r,!1,e)},E=function(e,r,i,o){if(i||void 0!==r.defaultText&&(e=r.defaultText),"translate"===o){(i||!i&&!t.isKeepContent()&&void 0===g.translateKeepContent)&&d.empty().append(r.preText+e+r.postText);var a=t.isPostCompilingEnabled(),l=void 0!==s.translateCompile,u=l&&"false"!==s.translateCompile;(a&&!l||u)&&n(d.contents())(r)}else{var c=g.$attr[o];"data-"===c.substr(0,5)&&(c=c.substr(5)),c=c.substr(15),d.attr(c,e)}};(l||h||g.translateDefault)&&a.$watch("interpolateParams",_,!0),a.$on("translateLanguageChanged",_);var M=i.$on("$translateChangeSuccess",_);d.text().length?g.translate?v(g.translate):v(""):g.translate&&v(g.translate),_(),a.$on("$destroy",M)}}}}function i(t,e){"use strict";return{restrict:"A",priority:t.directivePriority(),link:function(n,r,i){var a,s,l,u={},c=function(){angular.forEach(a,(function(e,o){e&&(u[o]=!0,n.translateNamespace&&"."===e.charAt(0)&&(e=n.translateNamespace+e),t(e,s,i.translateInterpolation,void 0,n.translateLanguage,l).then((function(t){r.attr(o,t)}),(function(t){r.attr(o,t)})))})),angular.forEach(u,(function(t,e){a[e]||(r.removeAttr(e),delete u[e])}))};o(n,i.translateAttr,(function(t){a=t}),c),o(n,i.translateValues,(function(t){s=t}),c),o(n,i.translateSanitizeStrategy,(function(t){l=t}),c),i.translateValues&&n.$watch(i.translateValues,c,!0),n.$on("translateLanguageChanged",c);var h=e.$on("$translateChangeSuccess",c);c(),n.$on("$destroy",h)}}}function o(t,e,n,r){"use strict";e&&("::"===e.substr(0,2)?e=e.substr(2):t.$watch(e,(function(t){n(t),r()}),!0),n(t.$eval(e)))}function a(t,e){"use strict";return{compile:function(n){var r=function(e){e.addClass(t.cloakClassName())};return r(n),function(n,i,o){var a=function(e){e.removeClass(t.cloakClassName())}.bind(this,i),s=r.bind(this,i);o.translateCloak&&o.translateCloak.length?(o.$observe("translateCloak",(function(e){t(e).then(a,s)})),e.$on("$translateChangeSuccess",(function(){t(o.translateCloak).then(a,s)}))):t.onReady(a)}}}}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(t,e,n){t.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(t),t.translateNamespace&&"."===n.translateNamespace.charAt(0)?t.translateNamespace+=n.translateNamespace:t.translateNamespace=n.translateNamespace}}}}}function l(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(t,e,n){n.$observe("translateLanguage",(function(e){t.translateLanguage=e})),t.$watch("translateLanguage",(function(){t.$broadcast("translateLanguageChanged")}))}}}}function u(t,e){"use strict";var n=function(n,r,i,o){if(!angular.isObject(r)){var a=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};r=t(r)(a)}return e.instant(n,r,i,o)};return e.statefulFilter()&&(n.$stateful=!0),n}function c(t){"use strict";return t("translations")}return t.$inject=["$translate"],e.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],r.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],i.$inject=["$translate","$rootScope"],a.$inject=["$translate","$rootScope"],u.$inject=["$parse","$translate"],c.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(t),t.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",(function(){"use strict";var t,e,n,r=null,i=!1,o=!1;(n={sanitize:function(t,e){return"text"===e&&(t=s(t)),t},escape:function(t,e){return"text"===e&&(t=a(t)),t},sanitizeParameters:function(t,e){return"params"===e&&(t=u(t,s)),t},escapeParameters:function(t,e){return"params"===e&&(t=u(t,a)),t},sce:function(t,e,n){return"text"===e?t=l(t):"params"===e&&"filter"!==n&&(t=u(t,a)),t},sceParameters:function(t,e){return"params"===e&&(t=u(t,l)),t}}).escaped=n.escapeParameters,this.addStrategy=function(t,e){return n[t]=e,this},this.removeStrategy=function(t){return delete n[t],this},this.useStrategy=function(t){return i=!0,r=t,this},this.$get=["$injector","$log",function(a,s){var l,u={};return a.has("$sanitize")&&(t=a.get("$sanitize")),a.has("$sce")&&(e=a.get("$sce")),{useStrategy:(l=this,function(t){l.useStrategy(t)}),sanitize:function(t,e,l,c){if(r||i||o||(s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),o=!0),l||null===l||(l=r),!l)return t;c||(c="service");var h,f,p,d,g=angular.isArray(l)?l:[l];return h=t,f=e,p=c,d=g,angular.forEach(d,(function(e){if(angular.isFunction(e))h=e(h,f,p);else if(angular.isFunction(n[e]))h=n[e](h,f,p);else{if(!angular.isString(n[e]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'");if(!u[n[e]])try{u[n[e]]=a.get(n[e])}catch(t){throw u[n[e]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'")}h=u[n[e]](h,f,p)}})),h}}}];var a=function(t){var e=angular.element("<div></div>");return e.text(t),e.html()},s=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return t(e)},l=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return e.trustAsHtml(t)},u=function(t,e,n){if(angular.isDate(t))return t;if(angular.isObject(t)){var r=angular.isArray(t)?[]:{};if(n){if(-1<n.indexOf(t))throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(t),angular.forEach(t,(function(t,i){angular.isFunction(t)||(r[i]=u(t,e,n))})),n.splice(-1,1),r}return angular.isNumber(t)||!0===t||!1===t||angular.isUndefined(t)||null===t?t:e(t)}})),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",e),e.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",r),r.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",i),i.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",a),a.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",l),l.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",u),u.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",c),c.displayName="$translationCache","pascalprecht.translate"},"function"==typeof define&&define.amd?define([],(function(){return t()})):"object"==typeof module&&module.exports?module.exports=t():t(),e=this,n=function(){"use strict";function t(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(lt,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(lt,"")===i)return t[n]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ct}function n(t){return new e(t).output()}function r(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,o=n.reduce((function(t,e){return i(e,t),t}),r);e&&(t[e]=o)}function i(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void i(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var o;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&i(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&i(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void r(e,n,t);default:for(o=-1;++o<t.length;)if(!Array.isArray(t[o]))return i(t,e[n]);return r(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}function o(t){return t*mt}function a(t){function e(e){return e*(t.to_meter||1)}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var a=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==a[0].indexOf("north")||("y"===a[0]||"lat"===a[0])&&"north"===a[1]?n+="n":-1!==a[0].indexOf("south")||("y"===a[0]||"lat"===a[0])&&"south"===a[1]?n+="s":-1!==a[0].indexOf("east")||("x"===a[0]||"lon"===a[0])&&"east"===a[1]?n+="e":-1===a[0].indexOf("west")&&("x"!==a[0]&&"lon"!==a[0]||"west"!==a[1])||(n+="w")}2===n.length&&(n+="u"),3===n.length&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",o],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",o],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",o],["lat0","latitude_of_origin",o],["lat0","standard_parallel_1",o],["lat1","standard_parallel_1",o],["lat2","standard_parallel_2",o],["azimuth","Azimuth"],["alpha","azimuth",o],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=o(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function s(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?s[t]=ut(arguments[1]):s[t]=vt(arguments[1]):s[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?s.apply(e,t):s(t)}));if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t&&(s["IAU2000:"+t.IAU2000]=t);return}}function l(e){var n=t(e,"authority");if(n){var r=t(n,"epsg");return r&&bt.indexOf(r)>-1}}function u(e){var n=t(e,"extension");if(n)return t(n,"proj4")}function c(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in s}(t))return s[t];if(function(t){return yt.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=vt(t);if(l(e))return s["EPSG:3857"];var n=u(e);return n?ut(n):e}return function(t){return"+"===t[0]}(t)?ut(t):void 0}function h(t){return t}function f(t,e){var n=Ot.length;return!t.names||(Ot[n]=t,t.names.forEach((function(t){Tt[t.toLowerCase()]=n})),this)}function p(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Lt[t]||null,isNull:!1}}function d(t){return t/3600*Math.PI/180}function g(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function m(t,e,n){for(var r=[],i=0;i<e.nSubgrids;i++){var o=y(t,176,n),a=b(t,176,o,n),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[d(o.lowerLongitude),d(o.lowerLatitude)],del:[d(o.longitudeInterval),d(o.latitudeInterval)],lim:[s,l],count:o.gridNodeCount,cvs:v(a)})}return r}function v(t){return t.map((function(t){return[d(t.longitudeShift),d(t.latitudeShift)]}))}function y(t,e,n){return{name:g(t,e+8,e+16).trim(),parent:g(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function b(t,e,n,r){for(var i=e+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,r),longitudeShift:t.getFloat32(i+16*a+4,r),latitudeAccuracy:t.getFloat32(i+16*a+8,r),longitudeAccuracy:t.getFloat32(i+16*a+12,r)};o.push(s)}return o}function w(e,n){if(!(this instanceof w))return new w(e);n=n||function(t){if(t)throw t};var r=c(e);if("object"==typeof r){var i=w.projections.get(r.projName);if(i){if(r.datumCode&&"none"!==r.datumCode){var o=t(At,r.datumCode);o&&(r.datum_params=r.datum_params||(o.towgs84?o.towgs84.split(","):null),r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var a=function(e,n,r,i,o){if(!e){var a=t(Ct,i);a||(a=It),e=a.a,n=a.b,r=a.rf}return r&&!n&&(n=(1-1/r)*e),(0===r||Math.abs(e-n)<tt)&&(o=!0,n=e),{a:e,b:n,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),s=function(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(Z+a*(J+a*Q)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(a.a,a.b,a.rf,r.R_A),l=function(t){return void 0===t?null:t.split(",").map(p)}(r.nadgrids),u=r.datum||function(t,e,n,r,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?K:W,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=V),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=q,s.datum_params[3]*=Y,s.datum_params[4]*=Y,s.datum_params[5]*=Y,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=H,s.grids=a),s.a=n,s.b=r,s.es=i,s.ep2=o,s}(r.datumCode,r.datum_params,a.a,a.b,s.es,s.ep2,l);wt(this,r),wt(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=u,this.init(),n(null,this)}else n(e)}else n(e)}function x(t,e,n){var r,i,o,a,s=t.x,l=t.y,u=t.z?t.z:0;if(l<-X&&l>-1.001*X)l=-X;else if(l>X&&l<1.001*X)l=X;else{if(l<-X)return{x:-1/0,y:-1/0,z:t.z};if(l>X)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-e)+u)*i}}function S(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b=t.x,w=t.y,x=t.z?t.z:0;if(i=Math.sqrt(b*b+w*w),o=Math.sqrt(b*b+w*w+x*x),i/n<1e-12){if(v=0,o/n<1e-12)return y=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,b);a=x/o,h=(s=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*l,m=0;do{m++,u=e*(c=n/Math.sqrt(1-e*f*f))/(c+(y=i*h+x*f-c*(1-e*f*f))),g=(d=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*h-(p=s*(1-u)*l)*f,h=p,f=d}while(g*g>1e-24&&m<30);return{x:v,y:Math.atan(d/Math.abs(p)),z:y}}function _(t){return t===V||t===q}function k(t,e,n){if(null===t.grids||0===t.grids.length)return-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=r;break}if(null!==s.grid){var l=s.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,h=l.ll[1]-u,f=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(h>r.y||c>r.x||p<r.y||f<r.x||(i=E(r,e,l),isNaN(i.x))))break}else if(s.mandatory)return-1}return isNaN(i.x)?-1:(n.x=-i.x,n.y=i.y,0)}function E(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=_t(i.x-Math.PI)+Math.PI;var o=M(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,l=9;do{if(s=M(o,n),isNaN(s.x))break;a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return r;r.x=_t(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function M(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),a=r.x-1*i,s=r.y-1*o,l={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return l;if(o<0||o>=e.lim[1])return l;n=o*e.lim[0]+i;var u=e.cvs[n][0],c=e.cvs[n][1];n++;var h=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],d=e.cvs[n][1];n--;var g=e.cvs[n][0],m=e.cvs[n][1],v=a*s,y=a*(1-s),b=(1-a)*(1-s),w=(1-a)*s;return l.x=b*u+y*h+w*g+v*p,l.y=b*c+y*f+w*m+v*d,l}function T(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function O(t,e,n,r){var i;if(Array.isArray(n)&&(n=Nt(n)),$t(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===V||t.datum.datum_type===q)&&"WGS84"!==e.datumCode||(e.datum.datum_type===V||e.datum.datum_type===q)&&"WGS84"!==t.datumCode}(t,e)&&(n=O(t,i=new w("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=jt(t,!1,n)),"longlat"===t.projName)n={x:n.x*et,y:n.y*et,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=Rt(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*nt,y:n.y*nt,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?jt(e,!0,n):n}function P(t,e,n,r){var i,o,a;return Array.isArray(n)?(i=O(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(o=O(t,e,n,r),2===(a=Object.keys(n)).length||a.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]})),o)}function C(t){return t instanceof w?t:t.oProj?t.oProj:w(t)}function I(t,e,n){t=C(t);var r,i=!1;return void 0===e?(e=t,t=Ft,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=Ft,i=!0),e=C(e),n?P(t,e,n):(r={forward:function(n,r){return P(t,e,n,r)},inverse:function(n,r){return P(e,t,n,r)}},i&&(r.oProj=e),r)}function A(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var r=F(n);return function(t,e,n){var r=n-1,i=Gt.charCodeAt(r),o=Ut.charCodeAt(r),a=i+t-1,s=o+e,l=!1;return a>Ht&&(a=a-Ht+Bt-1,l=!0),(a===zt||i<zt&&a>zt||(a>zt||i<zt)&&l)&&a++,(a===Vt||i<Vt&&a>Vt||(a>Vt||i<Vt)&&l)&&++a===zt&&a++,a>Ht&&(a=a-Ht+Bt-1),s>qt?(s=s-qt+Bt-1,l=!0):l=!1,(s===zt||o<zt&&s>zt||(s>zt||o<zt)&&l)&&s++,(s===Vt||o<Vt&&s>Vt||(s>Vt||o<Vt)&&l)&&++s===zt&&s++,s>qt&&(s=s-qt+Bt-1),String.fromCharCode(a)+String.fromCharCode(s)}(Math.floor(t/1e5),Math.floor(e/1e5)%20,r)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}(function(t){var e,n,r,i,o,a,s=t.lat,l=t.lon,u=6378137,c=R(s),h=R(l);a=Math.floor((l+180)/6)+1,180===l&&(a=60),s>=56&&s<64&&l>=3&&l<12&&(a=32),s>=72&&s<84&&(l>=0&&l<9?a=31:l>=9&&l<21?a=33:l>=21&&l<33?a=35:l>=33&&l<42&&(a=37)),o=R(6*(a-1)-180+3),e=u/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),n=Math.tan(c)*Math.tan(c),r=.006739496752268451*Math.cos(c)*Math.cos(c);var f=.9996*e*((i=Math.cos(c)*(h-o))+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,p=.9996*(u*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c))+e*Math.tan(c)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));return s<0&&(p+=1e7),{northing:Math.round(p),easting:Math.round(f),zoneNumber:a,zoneLetter:$(s)}}({lat:t[1],lon:t[0]}),e)}function L(t){var e=N(D(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function R(t){return t*(Math.PI/180)}function j(t){return t/Math.PI*180}function N(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,u,c,h,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),g=n-5e5,m=e;r<"N"&&(m-=1e7),c=6*(i-1)-180+3,f=(h=m/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),o=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),l=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),u=g/(.9996*o);var v=f-o*Math.tan(f)/l*(u*u/2-(5+3*a+10*s-4*s*s-.06065547077041606)*u*u*u*u/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*u*u*u*u*u*u/720);v=j(v);var y,b=(u-(1+2*a+s)*u*u*u/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*u*u*u*u*u/120)/Math.cos(f);if(b=c+j(b),t.accuracy){var w=N({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});y={top:w.lat,right:w.lon,bottom:v,left:b}}else y={lat:v,lon:b};return y}function $(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function F(t){var e=t%Dt;return 0===e&&(e=Dt),e}function D(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var l=F(a),u=function(t,e){for(var n=Gt.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(++n===zt&&n++,n===Vt&&n++,n>Ht){if(i)throw"Bad character: "+t;n=Bt,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=Ut.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(++n===zt&&n++,n===Vt&&n++,n>qt){if(i)throw"Bad character: "+t;n=Bt,i=!0}r+=1e5}return r}(r.charAt(1),l);c<G(s);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,m=0,v=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),m=parseFloat(p)*f,d=t.substring(o+g),v=parseFloat(d)*f),{easting:m+u,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function G(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function U(t,e,n){if(!(this instanceof U))return new U(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0}function B(t,e,n,r){var i;return t<tt?(r.value=Je.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=rt?r.value=Je.AREA_0:i>rt&&i<=X+rt?(r.value=Je.AREA_1,i-=X):i>X+rt||i<=-(X+rt)?(r.value=Je.AREA_2,i=i>=0?i-ot:i+ot):(r.value=Je.AREA_3,i+=X)),i}function z(t,e){var n=t+e;return n<-ot?n+=it:n>+ot&&(n-=it),n}var V=1,q=2,H=3,W=4,K=5,Y=484813681109536e-20,X=Math.PI/2,Z=.16666666666666666,J=.04722222222222222,Q=.022156084656084655,tt=1e-10,et=.017453292519943295,nt=57.29577951308232,rt=Math.PI/4,it=2*Math.PI,ot=3.14159265359,at={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},st={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},lt=/[\s_\-\/\(\)]/g,ut=function(e){var n,r,i,o={},a=e.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*et},lat_1:function(t){o.lat1=t*et},lat_2:function(t){o.lat2=t*et},lat_ts:function(t){o.lat_ts=t*et},lon_0:function(t){o.long0=t*et},lon_1:function(t){o.long1=t*et},lon_2:function(t){o.long2=t*et},alpha:function(t){o.alpha=parseFloat(t)*et},gamma:function(t){o.rectified_grid_angle=parseFloat(t)},lonc:function(t){o.longc=t*et},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(e){o.units=e;var n=t(st,e);n&&(o.to_meter=n.to_meter)},from_greenwich:function(t){o.from_greenwich=t*et},pm:function(e){var n=t(at,e);o.from_greenwich=(n||parseFloat(e))*et},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)},approx:function(){o.approx=!0}};for(n in a)r=a[n],n in s?"function"==typeof(i=s[n])?i(r):o[i]=r:o[n]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},ct=1,ht=/\s/,ft=/[A-Za-z]/,pt=/[A-Za-z84]/,dt=/[,\]]/,gt=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;ht.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case ct:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(dt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=ct)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=ct,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if(!gt.test(t)){if(dt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},e.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},e.prototype.keyword=function(t){if(pt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=ct)}if(!dt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},e.prototype.neutral=function(t){if(ft.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(gt.test(t))return this.word=t,void(this.state=3);if(!dt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var mt=.017453292519943295,vt=function(t){var e=n(t),r=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",r]);var s={};return i(e,s),a(s),s};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(s);var yt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],bt=["3857","900913","3785","102113"],wt=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},xt=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},St=function(t){return t<0?-1:1},_t=function(t){return Math.abs(t)<=ot?t:t-St(t)*it},kt=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(X-e))/r},Et=function(t,e){for(var n,r,i=.5*t,o=X-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=X-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999},Mt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=xt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*nt>90&&i*nt<-90&&r*nt>180&&r*nt<-180)return null;if(Math.abs(Math.abs(i)-X)<=tt)return null;if(this.sphere)e=this.x0+this.a*this.k0*_t(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(rt+.5*i));else{var o=Math.sin(i),a=kt(this.e,i,o);e=this.x0+this.a*this.k0*_t(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=X-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=Et(this.e,o)))return null}return e=_t(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:h,inverse:h,names:["longlat","identity"]}],Tt={},Ot=[],Pt={start:function(){Mt.forEach(f)},add:f,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Tt[e]&&Ot[Tt[e]]?Ot[Tt[e]]:void 0}},Ct={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},It=Ct.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ct.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var At={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},Lt={};w.projections=Pt,w.projections.start();var Rt=function(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===V?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==q||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(t.datum_type===K||e.datum_type===K)return n;var r=t.a,i=t.es;if(t.datum_type===H){if(0!==k(t,!1,n))return;r=6378137,i=.0066943799901413165}var o=e.a,a=e.b,s=e.es;return e.datum_type===H&&(o=6378137,a=6356752.314,s=.0066943799901413165),i!==s||r!==o||_(t.datum_type)||_(e.datum_type)?(n=x(n,i,r),_(t.datum_type)&&(n=function(t,e,n){if(e===V)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===q){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+s*t.z)+r,y:u*(l*t.x+t.y-a*t.z)+i,z:u*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),_(e.datum_type)&&(n=function(t,e,n){if(e===V)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===q){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=(t.x-r)/u,h=(t.y-i)/u,f=(t.z-o)/u;return{x:c+l*h-s*f,y:-l*c+h+a*f,z:s*c-a*h+f}}}(n,e.datum_type,e.datum_params)),n=S(n,s,o,a),e.datum_type!==H||0===k(e,!0,n)?n:void 0):n},jt=function(t,e,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=l,i="z"),t.axis[o]){case"e":case"n":u[i]=r;break;case"w":case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u},Nt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},$t=function(t){T(t.x),T(t.y)},Ft=w("WGS84"),Dt=6,Gt="AJSAJS",Ut="AFAFAF",Bt=65,zt=73,Vt=79,qt=86,Ht=90,Wt={forward:A,inverse:function(t){var e=N(D(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:L};U.fromMGRS=function(t){return new U(L(t))},U.prototype.toMGRS=function(t){return A([this.x,this.y],t)};var Kt=.01068115234375,Yt=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Kt))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Kt)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},Xt=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},Zt=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(Xt(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<tt)return i}return i},Jt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Yt(this.es),this.ml0=Xt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=_t(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),p=Math.abs(l)>tt?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),u/=Math.sqrt(e);var m=Xt(o,s,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*u/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var v=l*Math.sin(a);if(Math.abs(Math.abs(v)-1)<tt)return 93;if(n=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(r))>=1){if(v-1>tt)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=Zt(e,this.es,this.en),Math.abs(n)<X){var s=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>tt?Math.tan(n):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),f=Math.pow(u,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);r=n-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*h-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),i=_t(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/l)}else r=X*St(a),i=0;else{var m=Math.exp(o/this.k0),v=.5*(m-1/m),y=this.lat0+a/this.k0,b=Math.cos(y);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),r=Math.asin(e),a<0&&(r=-r),i=0===v&&0===b?0:_t(Math.atan2(v,b)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},Qt=function(t){var e=Math.exp(t);return(e-1/e)/2},te=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},ee=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(te(1,e)+1))),t<0?-e:e},ne=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},re=function(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=Qt(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),u=2*a*l,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)r=d,i=p,f=u*(d=f)-r-c*(p=g)+t[h],g=c*d-i+u*p;return[(u=o*l)*f-(c=a*s)*g,u*g+c*f]},ie={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Jt.init.apply(this),this.forward=Jt.forward,this.inverse=Jt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=ne(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=_t(t.x-this.long0),n=t.y;n=ne(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,te(r,i*a)),e=ee(Math.tan(e));var s,l,u=re(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=re(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Qt(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(a*u,te(l,u*s)),r=Math.atan2(l,u*s),e=_t(r+this.long0),n=ne(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},oe={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(_t(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*et,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ie.init.apply(this),this.forward=ie.forward,this.inverse=ie.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},ae=function(t,e){return Math.pow((1-t)/(1+t),e)},se={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+rt)/(Math.pow(Math.tan(.5*this.lat0+rt),this.C)*ae(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+rt),this.C)*ae(this.e*Math.sin(n),this.ratexp))-X,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+rt)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*ae(this.e*Math.sin(t.y),-.5*this.e))-X,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]},le={init:function(){se.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=_t(t.x-this.long0),se.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,se.inverse.apply(this,[t]),t.x=_t(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},ue={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=tt&&(this.k0=.5*(1+St(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=tt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=tt&&(this.k0=.5*this.cons*xt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/kt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=xt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-X,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=_t(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=tt&&Math.abs(l+this.lat0)<=tt?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,u,this.e))-X,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=tt?(o=kt(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<tt?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=tt?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=_t(Math.abs(this.coslat0)<tt?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=tt){if(a<=tt)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*Et(this.e,r),e=this.con*_t(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=tt?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=_t(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*Et(this.e,Math.tan(.5*(X+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(X+t))*Math.pow((1-e)/(1+e),.5*n)}},ce={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},names:["somerc"]},he=1e-7,fe={init:function(){var t,e,n,r,i,o,a,s,l,u,c,h=0,f=0,p=0,d=0,g=0,m=0,v=0;this.no_off=function(t){var e="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(e)}(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),y&&(v=this.alpha),b&&(h=this.rectified_grid_angle*et),y||b)f=this.longc;else if(p=this.long1,g=this.lat1,d=this.long2,m=this.lat2,Math.abs(g-m)<=he||(t=Math.abs(g))<=he||Math.abs(t-X)<=he||Math.abs(Math.abs(this.lat0)-X)<=he||Math.abs(Math.abs(m)-X)<=he)throw new Error;var w=1-this.es;e=Math.sqrt(w),Math.abs(this.lat0)>tt?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(kt(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),y||b?(y?(c=Math.asin(Math.sin(v)/r),b||(h=v)):(c=h,v=Math.asin(r*Math.sin(c))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(o=Math.pow(kt(this.e,g,Math.sin(g)),this.B),a=Math.pow(kt(this.e,m,Math.sin(m)),this.B),i=this.E/o,l=(a-o)/(a+o),u=((u=this.E*this.E)-a*o)/(u+a*o),(t=p-d)<-Math.pi?d-=it:t>Math.pi&&(d+=it),this.lam0=_t(.5*(p+d)-Math.atan(u*Math.tan(.5*this.B*(p-d))/l)/this.B),c=Math.atan(2*Math.sin(this.B*_t(p-this.lam0))/(i-1/i)),h=v=Math.asin(r*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(rt-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(rt+i))},forward:function(t){var e,n,r,i,o,a,s,l,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-X)>tt){if(e=.5*((o=this.E/Math.pow(kt(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),n=.5*(o+a),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<tt)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*t.x),s=Math.abs(a)<he?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(u.x=s,u.y=l):(s-=this.u_0,u.x=l*this.cosrot+s*this.sinrot,u.y=s*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,n,r,i,o,a,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),o=.5*(r+1/r),s=((a=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<tt)l.x=0,l.y=s<0?-X:X;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=Et(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},pe={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<tt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=xt(this.e,e,n),i=kt(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=xt(this.e,o,a),l=kt(this.e,this.lat2,o),u=kt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>tt?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=tt&&(n=St(n)*(X-2*tt));var r,i,o=Math.abs(Math.abs(n)-X);if(o>tt)r=kt(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*_t(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=Et(this.e,r)))return null}else i=-X;return o=_t(l/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},de={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,l=t.x,u=t.y,c=_t(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1}while(0===s&&u<15);return u>=15?null:t},names:["Krovak","krovak"]},ge=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},me=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},ve=function(t){return.375*t*(1+.25*t*(1+.46875*t))},ye=function(t){return.05859375*t*t*(1+.75*t)},be=function(t){return t*t*t*(35/3072)},we=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},xe=function(t){return Math.abs(t)<X?t:t-St(t)*Math.PI},Se=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN},_e={init:function(){this.sphere||(this.e0=me(this.es),this.e1=ve(this.es),this.e2=ye(this.es),this.e3=be(this.es),this.ml0=this.a*ge(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=_t(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=we(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,h=this.es*a*a/(1-this.es);e=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=this.a*ge(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=Se(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-X)<=tt)return t.x=this.long0,t.y=X,i<0&&(t.y*=-1),t;var l=we(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=r*this.a/l,f=h*h;e=s-l*Math.tan(s)/u*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return t.x=_t(n+this.long0),t.y=xe(e),t},names:["Cassini","Cassini_Soldner","cass"]},ke=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e},Ee=.3333333333333333,Me=.17222222222222222,Te=.10257936507936508,Oe=.06388888888888888,Pe=.0664021164021164,Ce=.016415012942191543,Ie={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-X)<tt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<tt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=ke(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*Ee,e=t*t,n[0]+=e*Me,n[1]=e*Oe,e*=t,n[0]+=e*Te,n[1]+=e*Pe,n[2]=e*Ce,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ke(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,l,u,c,h=t.x,f=t.y;if(h=_t(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=tt)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<tt)return null;n=rt-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,l=0,u=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=ke(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=X+f,a=this.qp-a;break;case this.S_POLE:u=f-X,a=this.qp+a}if(Math.abs(u)<tt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?u:-u)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,l=t.x/this.a,u=t.y/this.a;if(this.sphere){var c,h=0,f=0;if((n=.5*(c=Math.sqrt(l*l+u*u)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=tt?0:Math.asin(u*f/c),l*=f,u=h*c;break;case this.OBLIQ:n=Math.abs(c)<=tt?this.lat0:Math.asin(h*this.sinph0+u*f*this.cosph0/c),l*=f*this.cosph0,u=(h-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:u=-u,n=X-n;break;case this.S_POLE:n-=X}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(a=Math.sqrt(l*l+u*u))<tt)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+u*i*this.cosb1/a,o=this.qp*s,u=a*this.cosb1*r-u*this.sinb1*i):(s=u*i/a,o=this.qp*s,u=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=l*l+u*u))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(l,u),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return t.x=_t(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Ae=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},Le={init:function(){Math.abs(this.lat1+this.lat2)<tt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=xt(this.e3,this.sin_po,this.cos_po),this.qs1=ke(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=xt(this.e3,this.sin_po,this.cos_po),this.qs2=ke(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ke(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>tt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=ke(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*_t(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=_t(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=Ae(.5*e);if(t<tt)return a;for(var s=t*t,l=1;l<=25;l++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}},Re={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,l=t.x,u=t.y;return r=_t(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=tt?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=Ae(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=_t(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},je={init:function(){this.sphere||(this.k0=xt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=_t(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=ke(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=_t(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*X:X;for(var r,i,o,a,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=_t(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},Ne={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=_t(e-this.long0),i=xe(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=_t(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=xe(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},$e={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=me(this.es),this.e1=ve(this.es),this.e2=ye(this.es),this.e3=be(this.es),this.ml0=this.a*ge(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=_t(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=tt?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(xe(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=tt)e=this.a*a,n=-1*this.ml0;else{var s=we(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*ge(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,l,u;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=tt)e=_t(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=tt){n=l;break}e=_t(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=tt)n=0,e=_t(this.long0+r/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),f=this.a*ge(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*l)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=tt){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=_t(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},Fe={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/Y*1e-5,a=i,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var u,c=l,h=a,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)u=p*c+f*h,f=f*c-p*h,p=u,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)n=u*a+l*s,l=l*a-u*s,u=n,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var p,d=c,g=h,m=a,v=s;for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,m+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var y=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,y+=e*(this.B_re[e]*d-this.B_im[e]*g),b+=e*(this.B_im[e]*d+this.B_re[e]*g);var w=y*y+b*b;c=(m*y+v*b)/w,h=(v*y-m*b)/w}var x=c,S=h,_=1,k=0;for(e=1;e<=9;e++)_*=x,k+=this.D[e]*_;var E=this.lat0+k*Y*1e5,M=this.long0+S;return t.x=M,t.y=E,t},names:["New_Zealand_Map_Grid","nzmg"]},De={init:function(){},forward:function(t){var e=t.x,n=t.y,r=_t(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=_t(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},Ge={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Yt(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=_t(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<tt)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*Xt(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=Ae((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Ae(Math.sin(e)/this.n)),r=_t(r+this.long0),e=xe(e)):(e=Zt(t.y/this.a,this.es,this.en),(i=Math.abs(e))<X?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=_t(n)):i-tt<X&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]},Ue={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=_t(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<tt)break}i/=2,Math.PI/2-Math.abs(n)<tt&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=_t(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]},Be={init:function(){Math.abs(this.lat1+this.lat2)<tt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=me(this.es),this.e1=ve(this.es),this.e2=ye(this.es),this.e3=be(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=xt(this.e,this.sinphi,this.cosphi),this.ml1=ge(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<tt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=xt(this.e,this.sinphi,this.cosphi),this.ml2=ge(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ge(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=ge(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*_t(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=_t(this.long0+o/this.ns),r=xe(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=Se(a,this.e0,this.e1,this.e2,this.e3),i=_t(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]},ze={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=_t(r-this.long0);Math.abs(i)<=tt&&(e=this.x0+this.R*o,n=this.y0);var a=Ae(2*Math.abs(i/Math.PI));(Math.abs(o)<=tt||Math.abs(Math.abs(i)-X)<=tt)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),f=h*h,p=h*(2/u-1),d=p*p,g=Math.PI*this.R*(s*(h-d)+Math.sqrt(l*(h-d)*(h-d)-(d+l)*(f-d)))/(d+l);o<0&&(g=-g),e=this.x0+g;var m=l+h;return g=Math.PI*this.R*(p*m-s*Math.sqrt((d+l)*(l+1)-m*m))/(d+l),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,l,u,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<tt?this.long0:_t(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Ve={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x,S,_=t.x,k=t.y,E=Math.sin(t.y),M=Math.cos(t.y),T=_t(_-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=tt?(t.x=this.x0+this.a*(X-k)*Math.sin(T),t.y=this.y0-this.a*(X-k)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=tt?(t.x=this.x0+this.a*(X+k)*Math.sin(T),t.y=this.y0+this.a*(X+k)*Math.cos(T),t):(y=this.sin_p12*E+this.cos_p12*M*Math.cos(T),v=(m=Math.acos(y))?m/Math.sin(m):1,t.x=this.x0+this.a*v*M*Math.sin(T),t.y=this.y0+this.a*v*(this.cos_p12*E-this.sin_p12*M*Math.cos(T)),t):(e=me(this.es),n=ve(this.es),r=ye(this.es),i=be(this.es),Math.abs(this.sin_p12-1)<=tt?(o=this.a*ge(e,n,r,i,X),a=this.a*ge(e,n,r,i,k),t.x=this.x0+(o-a)*Math.sin(T),t.y=this.y0-(o-a)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=tt?(o=this.a*ge(e,n,r,i,X),a=this.a*ge(e,n,r,i,k),t.x=this.x0+(o+a)*Math.sin(T),t.y=this.y0+(o+a)*Math.cos(T),t):(s=E/M,l=we(this.a,this.e,this.sin_p12),u=we(this.a,this.e,E),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*M)),b=0===(h=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=tt?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(T)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*b*(1-(w=b*b)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(x=w*b)/8*(d=f*p)*(1-2*g)+(S=x*b)/120*(g*(4-7*g)-3*f*f*(1-7*g))-S*b/48*d),t.x=this.x0+m*Math.sin(h),t.y=this.y0+m*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x,S,_;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*X*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=tt?a=this.lat0:(a=Ae(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-X,o=_t(Math.abs(s)<=tt?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return l=me(this.es),u=ve(this.es),c=ye(this.es),h=be(this.es),Math.abs(this.sin_p12-1)<=tt?(f=this.a*ge(l,u,c,h,X),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Se((f-e)/this.a,l,u,c,h),o=_t(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=tt?(f=this.a*ge(l,u,c,h,X),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Se((e-f)/this.a,l,u,c,h),o=_t(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=we(this.a,this.e,this.sin_p12),m=Math.cos(g),y=-(v=this.e*this.cos_p12*m)*v/(1-this.es),b=3*this.es*(1-y)*this.sin_p12*this.cos_p12*m/(1-this.es),S=1-y*(x=(w=e/p)-y*(1+y)*Math.pow(w,3)/6-b*(1+3*y)*Math.pow(w,4)/24)*x/2-w*x*x*x/6,d=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*m),o=_t(this.long0+Math.asin(Math.sin(g)*Math.sin(x)/Math.cos(d))),_=Math.sin(d),a=Math.atan2((_-this.es*S*this.sin_p12)*Math.tan(d),_*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]},qe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l=t.x,u=t.y;return r=_t(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=tt)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Ae(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=tt?(s=this.lat0,t.x=a,t.y=s,t):(s=Ae(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-X,Math.abs(o)<=tt?(a=_t(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=_t(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]},He=1,We=2,Ke=3,Ye=4,Xe=5,Ze=6,Je={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Qe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=X-rt/2?this.face=Xe:this.lat0<=-(X-rt/2)?this.face=Ze:Math.abs(this.long0)<=rt?this.face=He:Math.abs(this.long0)<=X+rt?this.face=this.long0>0?We:Ye:this.face=Ke,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Xe)i=X-e,n>=rt&&n<=X+rt?(l.value=Je.AREA_0,r=n-X):n>X+rt||n<=-(X+rt)?(l.value=Je.AREA_1,r=n>0?n-ot:n+ot):n>-(X+rt)&&n<=-rt?(l.value=Je.AREA_2,r=n+X):(l.value=Je.AREA_3,r=n);else if(this.face===Ze)i=X+e,n>=rt&&n<=X+rt?(l.value=Je.AREA_0,r=-n+X):n<rt&&n>=-rt?(l.value=Je.AREA_1,r=-n):n<-rt&&n>=-(X+rt)?(l.value=Je.AREA_2,r=-n-X):(l.value=Je.AREA_3,r=n>0?-n+ot:-n-ot);else{var u,c,h,f,p,d;this.face===We?n=z(n,+X):this.face===Ke?n=z(n,+ot):this.face===Ye&&(n=z(n,-X)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),u=p*Math.cos(n),c=p*d,h=f,this.face===He?r=B(i=Math.acos(u),h,c,l):this.face===We?r=B(i=Math.acos(c),h,-u,l):this.face===Ke?r=B(i=Math.acos(-u),h,-c,l):this.face===Ye?r=B(i=Math.acos(-c),h,u,l):(i=r=0,l.value=Je.AREA_0)}return a=Math.atan(12/ot*(r+Math.acos(Math.sin(r)*Math.cos(rt))-X)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Je.AREA_1?a+=X:l.value===Je.AREA_2?a+=ot:l.value===Je.AREA_3&&(a+=1.5*ot),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=Je.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=Je.AREA_1,e-=X):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=Je.AREA_2,e=e<0?e+ot:e-ot):(d.value=Je.AREA_3,e+=X),u=ot/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Xe)l=Math.acos(s),p.phi=X-l,d.value===Je.AREA_0?p.lam=a+X:d.value===Je.AREA_1?p.lam=a<0?a+ot:a-ot:d.value===Je.AREA_2?p.lam=a-X:p.lam=a;else if(this.face===Ze)l=Math.acos(s),p.phi=l-X,d.value===Je.AREA_0?p.lam=-a+X:d.value===Je.AREA_1?p.lam=-a:d.value===Je.AREA_2?p.lam=-a-X:p.lam=a<0?-a-ot:-a+ot;else{var g,m,v;u=(g=s)*g,m=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*v)>=1?0:Math.sqrt(1-u),d.value===Je.AREA_1?(u=m,m=-v,v=u):d.value===Je.AREA_2?(m=-m,v=-v):d.value===Je.AREA_3&&(u=m,m=v,v=-u),this.face===We?(u=g,g=-m,m=u):this.face===Ke?(g=-g,m=-m):this.face===Ye&&(u=g,g=m,m=-u),p.phi=Math.acos(-v)-X,p.lam=Math.atan2(m,g),this.face===We?p.lam=z(p.lam,-X):this.face===Ke?p.lam=z(p.lam,-ot):this.face===Ye&&(p.lam=z(p.lam,+X))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},tn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],en=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],nn=.8487,rn=1.3523,on=nt/5,an=1/on,sn=18,ln=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},un={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=_t(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*on);r<0?r=0:r>=sn&&(r=17);var i={x:ln(tn[r],n=nt*(n-an*r))*e,y:ln(en[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*nn+this.x0,i.y=i.y*this.a*rn+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*nn),y:Math.abs(t.y-this.y0)/(this.a*rn)};if(e.y>=1)e.x/=tn[sn][0],e.y=t.y<0?-X:X;else{var n=Math.floor(e.y*sn);for(n<0?n=0:n>=sn&&(n=17);;)if(en[n][0]>e.y)--n;else{if(!(en[n+1][0]<=e.y))break;++n}var r=en[n],i=5*(e.y-r[0])/(en[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(ln(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,tt,100),e.x/=ln(tn[n],i),e.y=(5*n+i)*et,t.y<0&&(e.y=-e.y)}return e.x=_t(e.x+this.long0),e},names:["Robinson","robin"]},cn={init:function(){this.name="geocent"},forward:function(t){return x(t,this.es,this.a)},inverse:function(t){return S(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},hn=0,fn=1,pn=2,dn=3,gn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},mn={init:function(){if(Object.keys(gn).forEach(function(t){if(void 0===this[t])this[t]=gn[t].def;else{if(gn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);gn[t].num&&(this[t]=parseFloat(this[t]))}gn[t].degrees&&(this[t]=this[t]*et)}.bind(this)),Math.abs(Math.abs(this.lat0)-X)<tt?this.mode=this.lat0<0?fn:hn:Math.abs(this.lat0)<tt?this.mode=pn:(this.mode=dn,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case dn:n=this.sinph0*o+this.cosph0*a*s;break;case pn:n=a*s;break;case fn:n=-o;break;case hn:n=o}switch(e=(n=this.pn1/(this.p-n))*a*Math.sin(t.x),this.mode){case dn:n*=this.cosph0*o-this.sinph0*a*s;break;case pn:n*=o;break;case hn:n*=-a*s;break;case fn:n*=a*s}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=te(t.x,t.y);if(Math.abs(o)<tt)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case dn:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case pn:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case hn:i.y=Math.asin(a),t.y=-t.y;break;case fn:i.y=-Math.asin(a)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]},vn={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/te(this.radius_p*Math.cos(a),Math.sin(a));if(n=s*Math.cos(o)*Math.cos(a),r=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/te(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/te(r,e)))}else"sphere"===this.shape&&(e=Math.cos(a),n=Math.cos(o)*e,r=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/te(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/te(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*te(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*te(1,a));var l=s/this.radius_p;if(e=a*a+l*l+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};return I.defaultDatum="WGS84",I.Proj=w,I.WGS84=new I.Proj("WGS84"),I.Point=U,I.toPoint=Nt,I.defs=s,I.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);return 11!==e&&(e=t.getInt32(8,!0),!0)}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:g(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r);i.nSubgrids;var o={header:i,subgrids:m(n,i,r)};return Lt[t]=o,o},I.transform=O,I.mgrs=Wt,I.version="2.8.0",function(t){t.Proj.projections.add(Jt),t.Proj.projections.add(ie),t.Proj.projections.add(oe),t.Proj.projections.add(le),t.Proj.projections.add(ue),t.Proj.projections.add(ce),t.Proj.projections.add(fe),t.Proj.projections.add(pe),t.Proj.projections.add(de),t.Proj.projections.add(_e),t.Proj.projections.add(Ie),t.Proj.projections.add(Le),t.Proj.projections.add(Re),t.Proj.projections.add(je),t.Proj.projections.add(Ne),t.Proj.projections.add($e),t.Proj.projections.add(Fe),t.Proj.projections.add(De),t.Proj.projections.add(Ge),t.Proj.projections.add(Ue),t.Proj.projections.add(Be),t.Proj.projections.add(ze),t.Proj.projections.add(Ve),t.Proj.projections.add(qe),t.Proj.projections.add(Qe),t.Proj.projections.add(un),t.Proj.projections.add(cn),t.Proj.projections.add(mn),t.Proj.projections.add(vn)}(I),I},"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.proj4=n(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PouchDB=t()}}((function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){return i(e[a][1][t]||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){return function(){var e=arguments.length;if(e){for(var n=[],r=-1;++r<e;)n[r]=arguments[r];return t.call(this,n)}return t.call(this,[])}}},{}],2:[function(t,e,n){},{}],3:[function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,n)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,a;if(u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,console&&console.warn}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var u=l.length,c=m(l,u);for(n=0;n<u;++n)o(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return u(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},{}],4:[function(t,e,n){"use strict";var r,i,o,a=[t("./nextTick"),t("./queueMicrotask"),t("./mutation.js"),t("./messageChannel"),t("./stateChange"),t("./timeout")],s=-1,l=[],u=!1;function c(){r&&i&&(r=!1,i.length?l=i.concat(l):s=-1,l.length&&h())}function h(){if(!r){u=!1,r=!0;for(var t=l.length,e=setTimeout(c);t;){for(i=l,l=[];i&&++s<t;)i[s].run();s=-1,t=l.length}i=null,s=-1,r=!1,clearTimeout(e)}}for(var f=-1,p=a.length;++f<p;)if(a[f]&&a[f].test&&a[f].test()){o=a[f].install(h);break}function d(t,e){this.fun=t,this.array=e}d.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}},e.exports=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),u||r||(u=!0,o())}},{"./messageChannel":5,"./mutation.js":6,"./nextTick":2,"./queueMicrotask":7,"./stateChange":8,"./timeout":9}],5:[function(t,e,n){(function(t){(function(){"use strict";n.test=function(){return!t.setImmediate&&void 0!==t.MessageChannel},n.install=function(e){var n=new t.MessageChannel;return n.port1.onmessage=e,function(){n.port2.postMessage(0)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,n){(function(t){(function(){"use strict";var e=t.MutationObserver||t.WebKitMutationObserver;n.test=function(){return e},n.install=function(n){var r=0,i=new e(n),o=t.document.createTextNode("");return i.observe(o,{characterData:!0}),function(){o.data=r=++r%2}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){(function(t){(function(){"use strict";n.test=function(){return"function"==typeof t.queueMicrotask},n.install=function(e){return function(){t.queueMicrotask(e)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,n){(function(t){(function(){"use strict";n.test=function(){return"document"in t&&"onreadystatechange"in t.document.createElement("script")},n.install=function(e){return function(){var n=t.document.createElement("script");return n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n),e}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){"use strict";n.test=function(){return!0},n.install=function(t){return function(){setTimeout(t,0)}}},{}],10:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],11:[function(e,n,r){(function(r){(function(){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var o,a,s=i(e("immediate")),l=e("uuid"),u=i(e("spark-md5")),c=i(e("vuvuzela")),h=i(e("argsarray")),f=i(e("inherits")),p=i(e("events"));function d(t){return"$"+t}function g(t){return t.substring(1)}function m(){this._store={}}function v(t){if(this._store=new m,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}function y(t){if(t instanceof ArrayBuffer)return function(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),r=new Uint8Array(t);return n.set(r),e}(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}m.prototype.get=function(t){var e=d(t);return this._store[e]},m.prototype.set=function(t,e){var n=d(t);return this._store[n]=e,!0},m.prototype.has=function(t){return d(t)in this._store},m.prototype.keys=function(){return Object.keys(this._store).map((t=>g(t)))},m.prototype.delete=function(t){var e=d(t),n=e in this._store;return delete this._store[e],n},m.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var i=e[n];t(this._store[i],i=g(i))}},Object.defineProperty(m.prototype,"size",{get:function(){return Object.keys(this._store).length}}),v.prototype.add=function(t){return this._store.set(t,!0)},v.prototype.has=function(t){return this._store.has(t)},v.prototype.forEach=function(t){this._store.forEach((function(e,n){t(n)}))},Object.defineProperty(v.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(o=v,a=m):(o=Set,a=Map);var b=Function.prototype.toString,w=b.call(Object);function x(t){var e,n,r;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,r=t.length;n<r;n++)e[n]=x(t[n]);return e}if(t instanceof Date&&isFinite(t))return t.toISOString();if(function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}(t))return y(t);if(!function(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&b.call(n)==w}(t))return t;for(n in e={},t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=x(t[n]);void 0!==i&&(e[n]=i)}return e}function S(t){var e=!1;return h((function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)}))}function _(e){return h((function(n){n=x(n);var r=this,i="function"==typeof n[n.length-1]&&n.pop(),o=new Promise((function(i,o){var a;try{var s=S((function(t,e){t?o(t):i(e)}));n.push(s),(a=e.apply(r,n))&&"function"==typeof a.then&&i(a)}catch(t){o(t)}}));return i&&o.then((function(t){i(null,t)}),i),o}))}function k(t,e){return _(h((function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return function(t,e,n){if(t.constructor.listeners("debug").length){for(var r=["api",t.name,e],i=0;i<n.length-1;i++)r.push(n[i]);t.constructor.emit("debug",r);var o=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",t.name,e];i=i.concat(n?["error",n]:["success",r]),t.constructor.emit("debug",i),o(n,r)}}}(r,t,n),this.taskqueue.isReady?e.apply(this,n):new Promise((function(e,i){r.taskqueue.addTask((function(o){o?i(o):e(r[t].apply(r,n))}))}))})))}function E(t,e){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];o in t&&(n[o]=t[o])}return n}var M,T;function O(t){return t}function P(t){return[{ok:t}]}function C(t,e,n){var r=e.docs,i=new a;r.forEach((function(t){i.has(t.id)?i.get(t.id).push(t):i.set(t.id,[t])}));var o=i.size,s=0,l=new Array(o);function u(){var t;++s===o&&(t=[],l.forEach((function(e){e.docs.forEach((function(n){t.push({id:e.id,docs:[n]})}))})),n(null,{results:t}))}var c=[];i.forEach((function(t,e){c.push(e)}));var h=0;function f(){if(!(h>=c.length)){var n=Math.min(h+6,c.length),r=c.slice(h,n);!function(n,r){n.forEach((function(n,o){var a=r+o,s=i.get(n),c=E(s[0],["atts_since","attachments"]);c.open_revs=s.map((function(t){return t.rev})),c.open_revs=c.open_revs.filter(O);var h=O;0===c.open_revs.length&&(delete c.open_revs,h=P),["revs","attachments","binary","ajax","latest"].forEach((function(t){t in e&&(c[t]=e[t])})),t.get(n,c,(function(t,e){var r,i,o;r=t?[{error:t}]:h(e),i=n,o=r,l[a]={id:i,docs:o},u(),f()}))}))}(r,h),h+=r.length}}f()}try{localStorage.setItem("_pouch_check_localstorage",1),M=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){M=!1}function I(){return M}function A(){p.call(this),this._listeners={},function(t){I()&&addEventListener("storage",(function(e){t.emit(e.key)}))}(this)}function L(t){if("undefined"!=typeof console&&"function"==typeof console[t])Array.prototype.slice.call(arguments,1)}function R(t){var e=0;return t||(e=2e3),function(t,e){var n=6e5;return t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,e>n&&(t=3e5,e=n),~~((e-t)*Math.random()+t)}(t,e)}function j(t,e){L("info","The above "+t+" is totally normal. "+e)}f(A,p),A.prototype.addListener=function(t,e,n,r){if(!this._listeners[e]){var i=this,o=!1;this._listeners[e]=a,this.on(t,a)}function a(){if(i._listeners[e])if(o)o="waiting";else{o=!0;var t=E(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(t).on("change",(function(t){t.seq>r.since&&!r.cancelled&&(r.since=t.seq,r.onChange(t))})).on("complete",(function(){"waiting"===o&&s(a),o=!1})).on("error",(function(){o=!1}))}}},A.prototype.removeListener=function(t,e){e in this._listeners&&(p.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},A.prototype.notifyLocalWindows=function(t){I()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},A.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)},T="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var N=T;function $(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}f($,Error),$.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new $(401,"unauthorized","Name or password is incorrect.");var F=new $(400,"bad_request","Missing JSON list of 'docs'"),D=new $(404,"not_found","missing"),G=new $(409,"conflict","Document update conflict"),U=new $(400,"bad_request","_id field must contain a string"),B=new $(412,"missing_id","_id is required for puts"),z=new $(400,"bad_request","Only reserved document ids may start with underscore."),V=(new $(412,"precondition_failed","Database not open"),new $(500,"unknown_error","Database encountered an unknown error")),q=new $(500,"badarg","Some query argument is invalid"),H=(new $(400,"invalid_request","Request was invalid"),new $(400,"query_parse_error","Some query parameter is invalid")),W=new $(500,"doc_validation","Bad special document member"),K=new $(400,"bad_request","Something wrong with the request"),Y=new $(400,"bad_request","Document must be a JSON object"),X=(new $(404,"not_found","Database not found"),new $(500,"indexed_db_went_bad","unknown")),Z=(new $(500,"web_sql_went_bad","unknown"),new $(500,"levelDB_went_went_bad","unknown"),new $(403,"forbidden","Forbidden by design doc validate_doc_update function"),new $(400,"bad_request","Invalid rev format")),J=(new $(412,"file_exists","The database could not be created, the file already exists."),new $(412,"missing_stub","A pre-existing attachment stub wasn't found"));new $(413,"invalid_url","Provided URL is invalid");function Q(t,e){function n(e){for(var n=Object.getOwnPropertyNames(t),r=0,i=n.length;r<i;r++)"function"!=typeof t[n[r]]&&(this[n[r]]=t[n[r]]);void 0===this.stack&&(this.stack=(new Error).stack),void 0!==e&&(this.reason=e)}return n.prototype=$.prototype,new n(e)}function tt(t){if("object"!=typeof t){var e=t;(t=V).data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),"stack"in t||(t.stack=(new Error).stack),t}function et(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(r){r.doc||(r.doc={});var i=n&&function(t,e,n){try{return!t(e,n)}catch(i){var r="Filter function threw: "+i.toString();return Q(K,r)}}(t.filter,r.doc,e);if("object"==typeof i)return i;if(i)return!1;if(t.include_docs){if(!t.attachments)for(var o in r.doc._attachments)Object.prototype.hasOwnProperty.call(r.doc._attachments,o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}}function nt(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function rt(t){var e;if(t?"string"!=typeof t?e=Q(U):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=Q(z)):e=Q(B),e)throw e}function it(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(L("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function ot(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function at(t){var e=ot(t);return e?e.join("/"):null}var st=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],lt="queryKey",ut=/(?:^|&)([^&=]*)=?([^&]*)/g,ct=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function ht(t){for(var e=ct.exec(t),n={},r=14;r--;){var i=st[r],o=e[r]||"",a=-1!==["user","password"].indexOf(i);n[i]=a?decodeURIComponent(o):o}return n[lt]={},n[st[12]].replace(ut,(function(t,e,r){e&&(n[lt][e]=r)})),n}function ft(t,e){var n=[],r=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n.push(i),r.push(e[i]));return n.push(t),Function.apply(null,n).apply(null,r)}function pt(t,e,n){return t.get(e).catch((function(t){if(404!==t.status)throw t;return{}})).then((function(r){var i=r._rev,o=n(r);return o?(o._id=e,o._rev=i,function(t,e,n){return t.put(e).then((function(t){return{updated:!0,rev:t.rev}}),(function(r){if(409!==r.status)throw r;return pt(t,e._id,n)}))}(t,o,n)):{updated:!1,rev:i}}))}var dt=function(t){return atob(t)},gt=function(t){return btoa(t)};function mt(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(t){if("TypeError"!==t.name)throw t;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(n.type)}}function vt(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function yt(t,e){return mt([vt(t)],{type:e})}function bt(t,e){return yt(dt(t),e)}function wt(t,e){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";if(r)return e(n);e(function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return e}(n))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function xt(t,e){wt(t,(function(t){e(t)}))}function St(t,e){xt(t,(function(t){e(gt(t))}))}var _t=self.setImmediate||self.setTimeout;function kt(t,e,n,r,i){(n>0||r<e.size)&&(e=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}(e,n,r)),function(t,e){var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}(e,(function(e){t.append(e),i()}))}function Et(t,e,n,r,i){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),i()}function Mt(t,e){var n="string"==typeof t,r=n?t.length:t.size,i=Math.min(32768,r),o=Math.ceil(r/i),a=0,s=n?new u:new u.ArrayBuffer,l=n?Et:kt;function c(){_t(f)}function h(){var t=function(t){return gt(t)}(s.end(!0));e(t),s.destroy()}function f(){var e=a*i,n=e+i;a++,l(s,t,e,n,a<o?c:h)}f()}function Tt(t){return u.hash(t)}function Ot(t,e){if(!e)return l.v4().replace(/-/g,"").toLowerCase();var n=N({},t);return delete n._rev_tree,Tt(JSON.stringify(n))}var Pt=l.v4;function Ct(t){for(var e,n,r,i,o=t.rev_tree.slice();i=o.pop();){var a=i.ids,s=a[2],l=i.pos;if(s.length)for(var u=0,c=s.length;u<c;u++)o.push({pos:l+1,ids:s[u]});else{var h=!!a[1].deleted,f=a[0];e&&!(r!==h?r:n!==l?n<l:e<f)||(e=f,n=l,r=h)}}return n+"-"+e}function It(t,e){for(var n,r=t.slice();n=r.pop();)for(var i=n.pos,o=n.ids,a=o[2],s=e(0===a.length,i,o[0],n.ctx,o[1]),l=0,u=a.length;l<u;l++)r.push({pos:i+1,ids:a[l],ctx:s})}function At(t,e){return t.pos-e.pos}function Lt(t){var e=[];It(t,(function(t,n,r,i,o){t&&e.push({rev:n+"-"+r,pos:n,opts:o})})),e.sort(At).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function Rt(t){for(var e=Ct(t),n=Lt(t.rev_tree),r=[],i=0,o=n.length;i<o;i++){var a=n[i];a.rev===e||a.opts.deleted||r.push(a.rev)}return r}function jt(t){for(var e,n=[],r=t.slice();e=r.pop();){var i=e.pos,o=e.ids,a=o[0],s=o[1],l=o[2],u=0===l.length,c=e.history?e.history.slice():[];c.push({id:a,opts:s}),u&&n.push({pos:i+1-c.length,ids:c});for(var h=0,f=l.length;h<f;h++)r.push({pos:i+1,ids:l[h],history:c})}return n.reverse()}function Nt(t,e){return t.pos-e.pos}function $t(t,e,n){var r=function(t,e,n){for(var r,i=0,o=t.length;i<o;)n(t[r=i+o>>>1],e)<0?i=r+1:o=r;return i}(t,e,n);t.splice(r,0,e)}function Ft(t,e){for(var n,r,i=e,o=t.length;i<o;i++){var a=t[i],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function Dt(t,e){return t[0]<e[0]?-1:1}function Gt(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,a=i.tree2;(o[1].status||a[1].status)&&(o[1].status="available"===o[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(o[2][0]){for(var l=!1,u=0;u<o[2].length;u++)o[2][u][0]===a[2][s][0]&&(n.push({tree1:o[2][u],tree2:a[2][s]}),l=!0);l||(r="new_branch",$t(o[2],a[2][s],Dt))}else r="new_leaf",o[2][0]=a[2][s]}return{conflicts:r,tree:t}}function Ut(t,e,n){var r,i=[],o=!1,a=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var s=0,l=t.length;s<l;s++){var u=t[s];if(u.pos===e.pos&&u.ids[0]===e.ids[0])r=Gt(u.ids,e.ids),i.push({pos:u.pos,ids:r.tree}),o=o||r.conflicts,a=!0;else if(!0!==n){var c=u.pos<e.pos?u:e,h=u.pos<e.pos?e:u,f=h.pos-c.pos,p=[],d=[];for(d.push({ids:c.ids,diff:f,parent:null,parentIdx:null});d.length>0;){var g=d.pop();if(0!==g.diff)for(var m=g.ids[2],v=0,y=m.length;v<y;v++)d.push({ids:m[v],diff:g.diff-1,parent:g.ids,parentIdx:v});else g.ids[0]===h.ids[0]&&p.push(g)}var b=p[0];b?(r=Gt(b.ids,h.ids),b.parent[2][b.parentIdx]=r.tree,i.push({pos:c.pos,ids:c.ids}),o=o||r.conflicts,a=!0):i.push(u)}else i.push(u)}return a||i.push(e),i.sort(Nt),{tree:i,conflicts:o||"internal_node"}}function Bt(t,e,n){var r=Ut(t,e),i=function(t,e){for(var n,r,i=jt(t),o=0,a=i.length;o<a;o++){var s,l=i[o],u=l.ids;if(u.length>e){n||(n={});var c=u.length-e;s={pos:l.pos+c,ids:Ft(u,c)};for(var h=0;h<c;h++){var f=l.pos+h+"-"+u[h].id;n[f]=!0}}else s={pos:l.pos,ids:Ft(u,0)};r=r?Ut(r,s,!0).tree:[s]}return n&&It(r,(function(t,e,r){delete n[e+"-"+r]})),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function zt(t){return t.ids}function Vt(t,e){e||(e=Ct(t));for(var n,r=e.substring(e.indexOf("-")+1),i=t.rev_tree.map(zt);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function qt(t){return/^_local/.test(t)}function Ht(e,n,r){p.call(this);var i=this;this.db=e;var o=(n=n?x(n):{}).complete=S((function(t,n){var r,o;t?(o="error",("listenerCount"in(r=i)?r.listenerCount(o):p.listenerCount(r,o))>0&&i.emit("error",t)):i.emit("complete",n),i.removeAllListeners(),e.removeListener("destroyed",a)}));function a(){i.cancel()}r&&(i.on("complete",(function(t){r(null,t)})),i.on("error",r)),e.once("destroyed",a),n.onChange=function(e,n,r){i.isCancelled||function(e,n,r,i){try{e.emit("change",n,r,i)}catch(t){L("error",'Error in .on("change", function):',t)}}(i,e,n,r)};var s=new Promise((function(t,e){n.complete=function(n,r){n?e(n):t(r)}}));i.once("cancel",(function(){e.removeListener("destroyed",a),n.complete(null,{status:"cancelled"})})),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then((function(t){o(null,t)}),o),e.taskqueue.isReady?i.validateChanges(n):e.taskqueue.addTask((function(t){t?n.complete(t):i.isCancelled?i.emit("cancel"):i.validateChanges(n)}))}function Wt(t,e,n){var r=[{rev:t._rev}];"all_docs"===n.style&&(r=Lt(e.rev_tree).map((function(t){return{rev:t.rev}})));var i={id:e.id,changes:r,doc:t};return Vt(e,t._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=Rt(e),i.doc._conflicts.length||delete i.doc._conflicts),i}function Kt(t,e){return t<e?-1:t>e?1:0}function Yt(t,e){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=e,t(n)):t(null,r.length?r[0]:r)}}function Xt(t,e){var n=Kt(t._id,e._id);return 0!==n?n:Kt(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function Zt(t){var e=t._compactionQueue[0],n=e.opts,r=e.callback;t.get("_local/compaction").catch((function(){return!1})).then((function(e){e&&e.last_seq&&(n.last_seq=e.last_seq),t._compact(n,(function(e,n){e?r(e):r(null,n),s((function(){t._compactionQueue.shift(),t._compactionQueue.length&&Zt(t)}))}))}))}function Jt(){for(var t in p.call(this),Jt.prototype)"function"==typeof this[t]&&(this[t]=this[t].bind(this))}function Qt(){this.isReady=!1,this.failed=!1,this.queue=[]}function te(t,e){if(!(this instanceof te))return new te(t,e);var n=this;if(e=e||{},t&&"object"==typeof t&&(t=(e=t).name,delete e.name),void 0===e.deterministic_revs&&(e.deterministic_revs=!0),this.__opts=e=x(e),n.auto_compaction=e.auto_compaction,n.prefix=te.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var r=function(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=te.adapters,i=te.preferredAdapters,o=te.prefix,a=e.adapter;if(!a)for(var s=0;s<i.length&&"idb"===(a=i[s])&&"websql"in r&&I()&&localStorage["_pouch__websqldb_"+o+t];++s)L("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var l=r[a];return{name:l&&"use_prefix"in l&&!l.use_prefix?t:o+t,adapter:a}}((e.prefix||"")+t,e);if(e.name=r.name,e.adapter=e.adapter||r.adapter,n.name=t,n._adapter=e.adapter,te.emit("debug",["adapter","Picked adapter: ",e.adapter]),!te.adapters[e.adapter]||!te.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);if(e.view_adapter&&(!te.adapters[e.view_adapter]||!te.adapters[e.view_adapter].valid()))throw new Error("Invalid View Adapter: "+e.view_adapter);Jt.call(n),n.taskqueue=new Qt,n.adapter=e.adapter,te.adapters[e.adapter].call(n,e,(function(t){if(t)return n.taskqueue.fail(t);!function(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}(n),n.emit("created",n),te.emit("created",n.name),n.taskqueue.ready(n)}))}f(Ht,p),Ht.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Ht.prototype.validateChanges=function(t){var e=t.complete,n=this;te._changesFilterPlugin?te._changesFilterPlugin.validate(t,(function(r){if(r)return e(r);n.doChanges(t)})):n.doChanges(t)},Ht.prototype.doChanges=function(t){var e=this,n=t.complete;if("live"in(t=x(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=Wt,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(te._changesFilterPlugin){if(te._changesFilterPlugin.normalize(t),te._changesFilterPlugin.shouldFilter(this,t))return te._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach((function(e){e in t&&L("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')}));"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var r=this.db._changes(t);if(r&&"function"==typeof r.cancel){var i=e.cancel;e.cancel=h((function(t){r.cancel(),i.apply(this,t)}))}}else this.db.info().then((function(r){e.isCancelled?n(null,{status:"cancelled"}):(t.since=r.update_seq,e.doChanges(t))}),n)},f(Jt,p),Jt.prototype.post=k("post",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(Q(Y));this.bulkDocs({docs:[t]},e,Yt(n,t._id))})),Jt.prototype.put=k("put",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(Q(Y));if(rt(t._id),qt(t._id)&&"function"==typeof this._putLocal)return t._deleted?this._removeLocal(t,n):this._putLocal(t,n);var r,i,o,a,s=this;function l(n){"function"==typeof s._put&&!1!==e.new_edits?s._put(t,e,n):s.bulkDocs({docs:[t]},e,Yt(n,t._id))}e.force&&t._rev?(r=t._rev.split("-"),i=r[1],o=parseInt(r[0],10)+1,a=Ot(),t._revisions={start:o,ids:[a,i]},t._rev=o+"-"+a,e.new_edits=!1,l((function(e){var r=e?null:{ok:!0,id:t._id,rev:t._rev};n(e,r)}))):l(n)})),Jt.prototype.putAttachment=k("putAttachment",(function(t,e,n,r,i){var o=this;function a(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:i,data:r,revpos:++n},o.put(t)}return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||L("warn","Attachment",e,"on document",t,"is missing content_type"),o.get(t).then((function(t){if(t._rev!==n)throw Q(G);return a(t)}),(function(e){if(e.reason===D.message)return a({_id:t});throw e}))})),Jt.prototype.removeAttachment=k("removeAttachment",(function(t,e,n,r){var i=this;i.get(t,(function(t,o){if(t)r(t);else if(o._rev===n){if(!o._attachments)return r();delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,i.put(o,r)}else r(Q(G))}))})),Jt.prototype.remove=k("remove",(function(t,e,n,r){var i;"string"==typeof e?(i={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(i=t,"function"==typeof e?(r=e,n={}):(r=n,n=e)),(n=n||{}).was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(qt(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,Yt(r,o._id))})),Jt.prototype.revsDiff=k("revsDiff",(function(t,e,n){"function"==typeof e&&(n=e,e={});var r=Object.keys(t);if(!r.length)return n(null,{});var i=0,o=new a;function s(t,e){o.has(t)||o.set(t,{missing:[]}),o.get(t).missing.push(e)}r.map((function(e){this._getRevisionTree(e,(function(a,l){if(a&&404===a.status&&"missing"===a.message)o.set(e,{missing:t[e]});else{if(a)return n(a);!function(e,n){var r=t[e].slice(0);It(n,(function(t,n,i,o,a){var l=n+"-"+i,u=r.indexOf(l);-1!==u&&(r.splice(u,1),"available"!==a.status&&s(e,l))})),r.forEach((function(t){s(e,t)}))}(e,l)}if(++i===r.length){var u={};return o.forEach((function(t,e){u[e]=t})),n(null,u)}}))}),this)})),Jt.prototype.bulkGet=k("bulkGet",(function(t,e){C(this,t,e)})),Jt.prototype.compactDocument=k("compactDocument",(function(t,e,n){var r=this;this._getRevisionTree(t,(function(i,o){if(i)return n(i);var a=function(t){var e={},n=[];return It(t,(function(t,r,i,o){var a=r+"-"+i;return t&&(e[a]=0),void 0!==o&&n.push({from:o,to:a}),a})),n.reverse(),n.forEach((function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])})),e}(o),s=[],l=[];Object.keys(a).forEach((function(t){a[t]>e&&s.push(t)})),It(o,(function(t,e,n,r,i){var o=e+"-"+n;"available"===i.status&&-1!==s.indexOf(o)&&l.push(o)})),r._doCompaction(t,l,n)}))})),Jt.prototype.compact=k("compact",(function(t,e){"function"==typeof t&&(e=t,t={});var n=this;t=t||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:t,callback:e}),1===n._compactionQueue.length&&Zt(n)})),Jt.prototype._compact=function(t,e){var n=this,r={return_docs:!1,last_seq:t.last_seq||0},i=[];n.changes(r).on("change",(function(t){i.push(n.compactDocument(t.id,0))})).on("complete",(function(t){var r=t.last_seq;Promise.all(i).then((function(){return pt(n,"_local/compaction",(function(t){return(!t.last_seq||t.last_seq<r)&&(t.last_seq=r,t)}))})).then((function(){e(null,{ok:!0})})).catch(e)})).on("error",e)},Jt.prototype.get=k("get",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(Q(U));if(qt(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var r=[],i=this;function o(){var o=[],a=r.length;if(!a)return n(null,o);r.forEach((function(r){i.get(t,{rev:r,revs:e.revs,latest:e.latest,attachments:e.attachments,binary:e.binary},(function(t,e){if(t)o.push({missing:r});else{for(var i,s=0,l=o.length;s<l;s++)if(o[s].ok&&o[s].ok._rev===e._rev){i=!0;break}i||o.push({ok:e})}--a||n(null,o)}))}))}if(!e.open_revs)return this._get(t,e,(function(r,o){if(r)return r.docId=t,n(r);var a=o.doc,s=o.metadata,l=o.ctx;if(e.conflicts){var u=Rt(s);u.length&&(a._conflicts=u)}if(Vt(s,a._rev)&&(a._deleted=!0),e.revs||e.revs_info){for(var c=a._rev.split("-"),h=parseInt(c[0],10),f=c[1],p=jt(s.rev_tree),d=null,g=0;g<p.length;g++){var m=p[g],v=m.ids.map((function(t){return t.id})).indexOf(f);(v===h-1||!d&&-1!==v)&&(d=m)}if(!d)return(r=new Error("invalid rev tree")).docId=t,n(r);var y=d.ids.map((function(t){return t.id})).indexOf(a._rev.split("-")[1])+1,b=d.ids.length-y;if(d.ids.splice(y,b),d.ids.reverse(),e.revs&&(a._revisions={start:d.pos+d.ids.length-1,ids:d.ids.map((function(t){return t.id}))}),e.revs_info){var w=d.pos+d.ids.length;a._revs_info=d.ids.map((function(t){return{rev:--w+"-"+t.id,status:t.opts.status}}))}}if(e.attachments&&a._attachments){var x=a._attachments,S=Object.keys(x).length;if(0===S)return n(null,a);Object.keys(x).forEach((function(t){this._getAttachment(a._id,t,x[t],{rev:a._rev,binary:e.binary,ctx:l},(function(e,r){var i=a._attachments[t];i.data=r,delete i.stub,delete i.length,--S||n(null,a)}))}),i)}else{if(a._attachments)for(var _ in a._attachments)Object.prototype.hasOwnProperty.call(a._attachments,_)&&(a._attachments[_].stub=!0);n(null,a)}}));if("all"===e.open_revs)this._getRevisionTree(t,(function(t,e){if(t)return n(t);r=Lt(e).map((function(t){return t.rev})),o()}));else{if(!Array.isArray(e.open_revs))return n(Q(V,"function_clause"));r=e.open_revs;for(var a=0;a<r.length;a++){var s=r[a];if("string"!=typeof s||!/^\d+-/.test(s))return n(Q(Z))}o()}})),Jt.prototype.getAttachment=k("getAttachment",(function(t,e,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(t,n,(function(o,a){return o?r(o):a.doc._attachments&&a.doc._attachments[e]?(n.ctx=a.ctx,n.binary=!0,void i._getAttachment(t,e,a.doc._attachments[e],n,r)):r(Q(D))}))})),Jt.prototype.allDocs=k("allDocs",(function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter((function(e){return e in t}))[0];if(n)return void e(Q(H,"Query parameter `"+n+"` is not compatible with multi-get"));if(!it(this)&&(function(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}(t),0===t.keys.length))return this._allDocs({limit:0},e)}return this._allDocs(t,e)})),Jt.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),(t=t||{}).return_docs="return_docs"in t?t.return_docs:!t.live,new Ht(this,t,e)},Jt.prototype.close=k("close",(function(t){return this._closed=!0,this.emit("closed"),this._close(t)})),Jt.prototype.info=k("info",(function(t){var e=this;this._info((function(n,r){if(n)return t(n);r.db_name=r.db_name||e.name,r.auto_compaction=!(!e.auto_compaction||it(e)),r.adapter=e.adapter,t(null,r)}))})),Jt.prototype.id=k("id",(function(t){return this._id(t)})),Jt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Jt.prototype.bulkDocs=k("bulkDocs",(function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(Q(F));for(var r=0;r<t.docs.length;++r)if("object"!=typeof t.docs[r]||Array.isArray(t.docs[r]))return n(Q(Y));var i;if(t.docs.forEach((function(t){t._attachments&&Object.keys(t._attachments).forEach((function(e){i=i||function(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}(e),t._attachments[e].content_type||L("warn","Attachment",e,"on document",t._id,"is missing content_type")}))})),i)return n(Q(K,i));"new_edits"in e||(e.new_edits=!("new_edits"in t)||t.new_edits);var o=this;e.new_edits||it(o)||t.docs.sort(Xt),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=E(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(t.docs);var a=t.docs.map((function(t){return t._id}));return this._bulkDocs(t,e,(function(t,r){if(t)return n(t);if(e.new_edits||(r=r.filter((function(t){return t.error}))),!it(o))for(var i=0,s=r.length;i<s;i++)r[i].id=r[i].id||a[i];n(null,r)}))})),Jt.prototype.registerDependentDatabase=k("registerDependentDatabase",(function(t,e){var n=x(this.__opts);this.__opts.view_adapter&&(n.adapter=this.__opts.view_adapter);var r=new this.constructor(t,n);pt(this,"_local/_pouch_dependentDbs",(function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)})).then((function(){e(null,{db:r})})).catch(e)})),Jt.prototype.destroy=k("destroy",(function(t,e){"function"==typeof t&&(e=t,t={});var n=this,r=!("use_prefix"in n)||n.use_prefix;function i(){n._destroy(t,(function(t,r){if(t)return e(t);n._destroyed=!0,n.emit("destroyed"),e(null,r||{ok:!0})}))}if(it(n))return i();n.get("_local/_pouch_dependentDbs",(function(t,o){if(t)return 404!==t.status?e(t):i();var a=o.dependentDbs,s=n.constructor,l=Object.keys(a).map((function(t){var e=r?t.replace(new RegExp("^"+s.prefix),""):t;return new s(e,n.__opts).destroy()}));Promise.all(l).then(i,e)}))})),Qt.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},Qt.prototype.fail=function(t){this.failed=t,this.execute()},Qt.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},Qt.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},f(te,Jt);var ee="undefined"!=typeof AbortController?AbortController:function(){return{abort:function(){}}},ne=fetch,re=Headers;te.adapters={},te.preferredAdapters=[],te.prefix="_pouch_";var ie=new p;!function(t){Object.keys(p.prototype).forEach((function(e){"function"==typeof p.prototype[e]&&(t[e]=ie[e].bind(ie))}));var e=t._destructionListeners=new a;t.on("ref",(function(t){e.has(t.name)||e.set(t.name,[]),e.get(t.name).push(t)})),t.on("unref",(function(t){if(e.has(t.name)){var n=e.get(t.name),r=n.indexOf(t);r<0||(n.splice(r,1),n.length>1?e.set(t.name,n):e.delete(t.name))}})),t.on("destroyed",(function(t){if(e.has(t)){var n=e.get(t);e.delete(t),n.forEach((function(t){t.emit("destroyed",!0)}))}}))}(te),te.adapter=function(t,e,n){e.valid()&&(te.adapters[t]=e,n&&te.preferredAdapters.push(t))},te.plugin=function(t){if("function"==typeof t)t(te);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach((function(e){te.prototype[e]=t[e]}))}return this.__defaults&&(te.__defaults=N({},this.__defaults)),te},te.defaults=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);n=n||{},t&&"object"==typeof t&&(t=(n=t).name,delete n.name),n=N({},e.__defaults,n),te.call(this,t,n)}return f(e,te),e.preferredAdapters=te.preferredAdapters.slice(),Object.keys(te).forEach((function(t){t in e||(e[t]=te[t])})),e.__defaults=N({},this.__defaults,t),e},te.fetch=function(t,e){return ne(t,e)};function oe(t,e){for(var n=t,r=0,i=e.length;r<i;r++){if(!(n=n[e[r]]))break}return n}function ae(t){for(var e=[],n="",r=0,i=t.length;r<i;r++){var o=t[r];r>0&&"\\"===t[r-1]&&("$"===o||"."===o)?n=n.substring(0,n.length-1)+o:"."===o?(e.push(n),n=""):n+=o}return e.push(n),e}var se=["$or","$nor","$not"];function le(t){return se.indexOf(t)>-1}function ue(t){return Object.keys(t)[0]}function ce(t){var e={},n={$or:!0,$nor:!0};return t.forEach((function(t){Object.keys(t).forEach((function(r){var i=t[r];if("object"!=typeof i&&(i={$eq:i}),le(r))if(i instanceof Array){if(n[r])return n[r]=!1,void(e[r]=i);var o=[];e[r].forEach((function(t){Object.keys(i).forEach((function(e){var n=i[e],r=Math.max(Object.keys(t).length,Object.keys(n).length),a=ce([t,n]);Object.keys(a).length<=r||o.push(a)}))})),e[r]=o}else e[r]=ce([i]);else{var a=e[r]=e[r]||{};Object.keys(i).forEach((function(t){var e=i[t];return"$gt"===t||"$gte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e}(t,e,a):"$lt"===t||"$lte"===t?function(t,e,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e}(t,e,a):"$ne"===t?function(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}(e,a):"$eq"===t?function(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}(e,a):"$regex"===t?function(t,e){"$regex"in e?e.$regex.push(t):e.$regex=[t]}(e,a):void(a[t]=e)}))}}))})),e}function he(t){for(var e in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=ce(t[n].$and));var r=t[e];"object"==typeof r&&he(r)}return t}function fe(t,e){for(var n in t){"$and"===n&&(e=!0);var r=t[n];"object"==typeof r&&(e=fe(r,e))}return e}function pe(t){var e=x(t),n=!1;fe(e,!1)&&("$and"in(e=he(e))&&(e=ce(e.$and)),n=!0),["$or","$nor"].forEach((function(t){t in e&&e[t].forEach((function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n],i=t[r];"object"==typeof i&&null!==i||(t[r]={$eq:i})}}))})),"$not"in e&&(e.$not=ce([e.$not]));for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=e[o];"object"!=typeof a||null===a?a={$eq:a}:n||("$ne"in a&&(a.$ne=[a.$ne]),"$regex"in a&&(a.$regex=[a.$regex])),e[o]=a}return e}var de=-324;function ge(t,e){if(t===e)return 0;t=me(t),e=me(e);var n=xe(t),r=xe(e);if(n-r!=0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return function(t,e){return t===e?0:t>e?1:-1}(t,e)}return Array.isArray(t)?function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=ge(t[r],e[r]);if(0!==i)return i}return t.length===e.length?0:t.length>e.length?1:-1}(t,e):function(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=ge(n[o],r[o]);if(0!==a)return a;if(0!==(a=ge(t[n[o]],e[r[o]])))return a}return n.length===r.length?0:n.length>r.length?1:-1}(t,e)}function me(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=me(e[r])}else{if(t instanceof Date)return t.toJSON();if(null!==t)for(var i in t={},e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];void 0!==o&&(t[i]=me(o))}}}return t}function ve(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return function(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,i=r?"0":"2",o=(a=((r?-n:n)-de).toString(),s="0",l=3,u=function(t,e,n){for(var r="",i=n-t.length;r.length<i;)r+=e;return r}(a,s,l),u+a);var a,s,l,u;i+=""+o;var c=Math.abs(parseFloat(e[0]));r&&(c=10-c);var h=c.toFixed(20);return h=h.replace(/\.?0+$/,""),i+=""+h}(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,i=n.length,o="";if(e)for(;++r<i;)o+=ye(n[r]);else for(;++r<i;){var a=n[r];o+=ye(a)+ye(t[a])}return o}return""}function ye(t){return xe(t=me(t))+""+ve(t)+"\0"}function be(t,e){var n,r=e;if("1"===t[e])n=0,e++;else{var i="0"===t[e];e++;var o="",a=t.substring(e,e+3),s=parseInt(a,10)+de;for(i&&(s=-s),e+=3;;){var l=t[e];if("\0"===l)break;o+=l,e++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:e-r}}function we(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===t.length-2){i[t.pop()]=n}else t.push(n)}}function xe(t){var e=["boolean","number","string","object"].indexOf(typeof t);return~e?null===t?1:Array.isArray(t)?5:e<3?e+2:e+3:Array.isArray(t)?5:void 0}function Se(t,e,n){if(t=t.filter((function(t){return _e(t.doc,e.selector,n)})),e.sort){var r=function(t){function e(e){return t.map((function(t){var n=ae(ue(t));return oe(e,n)}))}return function(t,n){var r,i,o=ge(e(t.doc),e(n.doc));return 0!==o?o:(r=t.doc._id)<(i=n.doc._id)?-1:r>i?1:0}}(e.sort);t=t.sort(r),"string"!=typeof e.sort[0]&&"desc"===(i=e.sort[0])[ue(i)]&&(t=t.reverse())}var i;if("limit"in e||"skip"in e){var o=e.skip||0,a=("limit"in e?e.limit:t.length)+o;t=t.slice(o,a)}return t}function _e(t,e,n){return n.every((function(n){var r=e[n],i=ae(n),o=oe(t,i);return le(n)?function(t,e,n){if("$or"===t)return e.some((function(t){return _e(n,t,Object.keys(t))}));if("$not"===t)return!_e(n,e,Object.keys(e));return!e.find((function(t){return _e(n,t,Object.keys(t))}))}(n,r,t):ke(r,t,i,o)}))}function ke(t,e,n,r){return!t||("object"==typeof t?Object.keys(t).every((function(i){var o=t[i];if(0===i.indexOf("$"))return Ee(i,e,o,n,r);var a=ae(i);if(void 0===r&&"object"!=typeof o&&a.length>0)return!1;var s=oe(r,a);return"object"==typeof o?ke(o,e,n,s):Ee("$eq",e,o,a,s)})):t===r)}function Ee(t,e,n,r,i){if(!Pe[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Pe[t](e,n,r,i)}function Me(t){return null!=t}function Te(t){return void 0!==t}function Oe(t,e){return e.some((function(e){return t instanceof Array?t.some((function(t){return 0===ge(e,t)})):0===ge(e,t)}))}var Pe={$elemMatch:function(t,e,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.some((function(t){return _e(t,e,Object.keys(e))})):r.some((function(r){return ke(e,t,n,r)}))))},$allMatch:function(t,e,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.every((function(t){return _e(t,e,Object.keys(e))})):r.every((function(r){return ke(e,t,n,r)}))))},$eq:function(t,e,n,r){return Te(r)&&0===ge(r,e)},$gte:function(t,e,n,r){return Te(r)&&ge(r,e)>=0},$gt:function(t,e,n,r){return Te(r)&&ge(r,e)>0},$lte:function(t,e,n,r){return Te(r)&&ge(r,e)<=0},$lt:function(t,e,n,r){return Te(r)&&ge(r,e)<0},$exists:function(t,e,n,r){return e?Te(r):!Te(r)},$mod:function(t,e,n,r){return Me(r)&&function(t,e){return"number"==typeof t&&parseInt(t,10)===t&&t%e[0]===e[1]}(r,e)},$ne:function(t,e,n,r){return e.every((function(t){return 0!==ge(r,t)}))},$in:function(t,e,n,r){return Me(r)&&Oe(r,e)},$nin:function(t,e,n,r){return Me(r)&&!Oe(r,e)},$size:function(t,e,n,r){return Me(r)&&Array.isArray(r)&&function(t,e){return t.length===e}(r,e)},$all:function(t,e,n,r){return Array.isArray(r)&&function(t,e){return e.every((function(e){return t.some((function(t){return 0===ge(e,t)}))}))}(r,e)},$regex:function(t,e,n,r){return Me(r)&&"string"==typeof r&&e.every((function(t){return function(t,e){return new RegExp(e).test(t)}(r,t)}))},$type:function(t,e,n,r){return function(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}}(r,e)}};function Ce(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter){var n="string"==typeof t.filter?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function Ie(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=at(t.view):t.filter=at(t.filter))}function Ae(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!it(t.db)}function Le(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=Q(K,"`view` filter parameter not found or invalid.");return n(r)}var i=ot(e.view);t.db.get("_design/"+i[0],(function(r,o){if(t.isCancelled)return n(null,{status:"cancelled"});if(r)return n(tt(r));var a=o&&o.views&&o.views[i[1]]&&o.views[i[1]].map;if(!a)return n(Q(D,o.views?"missing json key: "+i[1]:"missing json key: views"));e.filter=ft(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+a+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),t.doChanges(e)}))}else if(e.selector)e.filter=function(t){return function(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");var n=Se([{doc:t}],{selector:e=pe(e)},Object.keys(e));return n&&1===n.length}(t,e.selector)},t.doChanges(e);else{var o=ot(e.filter);t.db.get("_design/"+o[0],(function(r,i){if(t.isCancelled)return n(null,{status:"cancelled"});if(r)return n(tt(r));var a=i&&i.filters&&i.filters[o[1]];if(!a)return n(Q(D,i&&i.filters?"missing json key: "+o[1]:"missing json key: filters"));e.filter=ft('"use strict";\nreturn '+a+";",{}),t.doChanges(e)}))}}function Re(t){return t.reduce((function(t,e){return t[e]=!0,t}),{})}te.plugin((function(t){t._changesFilterPlugin={validate:Ce,normalize:Ie,shouldFilter:Ae,filter:Le}})),te.version="7.3.0";var je=Re(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Ne=Re(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function $e(t){if(!/^\d+-/.test(t))return Q(Z);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function Fe(t,e,n){var r,i,o;n||(n={deterministic_revs:!0});var a={status:"available"};if(t._deleted&&(a.deleted=!0),e)if(t._id||(t._id=Pt()),i=Ot(t,n.deterministic_revs),t._rev){if((o=$e(t._rev)).error)return o;t._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[i,a,[]]]]}],r=o.prefix+1}else t._rev_tree=[{pos:1,ids:[i,a,[]]}],r=1;else if(t._revisions&&(t._rev_tree=function(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,i=[r[0],e,[]],o=1,a=r.length;o<a;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}(t._revisions,a),r=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if((o=$e(t._rev)).error)return o;r=o.prefix,i=o.id,t._rev_tree=[{pos:r,ids:[i,a,[]]}]}rt(t._id),t._rev=r+"-"+i;var s={metadata:{},data:{}};for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var u="_"===l[0];if(u&&!je[l]){var c=Q(W,l);throw c.message=W.message+": "+l,c}u&&!Ne[l]?s.metadata[l.slice(1)]=t[l]:s.data[l]=t[l]}return s}function De(e,n,r){var i=function(e){try{return dt(e)}catch(t){return{error:Q(q,"Attachment is not a valid base64 string")}}}(e.data);if(i.error)return r(i.error);e.length=i.length,e.data="blob"===n?yt(i,e.content_type):"base64"===n?gt(i):i,Mt(i,(function(t){e.digest="md5-"+t,r()}))}function Ge(t,e,n){if(t.stub)return n();"string"==typeof t.data?De(t,e,n):function(t,e,n){Mt(t.data,(function(r){t.digest="md5-"+r,t.length=t.data.size||t.data.length||0,"binary"===e?xt(t.data,(function(e){t.data=e,n()})):"base64"===e?St(t.data,(function(e){t.data=e,n()})):n()}))}(t,e,n)}function Ue(t,e,n,r,i,o,a,s){if(function(t,e){for(var n,r=t.slice(),i=e.split("-"),o=parseInt(i[0],10),a=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===a)return!0;for(var s=n.ids[2],l=0,u=s.length;l<u;l++)r.push({pos:n.pos+1,ids:s[l]})}return!1}(e.rev_tree,n.metadata.rev)&&!s)return r[i]=n,o();var l=e.winningRev||Ct(e),u="deleted"in e?e.deleted:Vt(e,l),c="deleted"in n.metadata?n.metadata.deleted:Vt(n.metadata),h=/^1-/.test(n.metadata.rev);if(u&&!c&&s&&h){var f=n.data;f._rev=l,f._id=n.metadata.id,n=Fe(f,s)}var p=Bt(e.rev_tree,n.metadata.rev_tree[0],t);if(s&&(u&&c&&"new_leaf"!==p.conflicts||!u&&"new_leaf"!==p.conflicts||u&&!c&&"new_branch"===p.conflicts)){var d=Q(G);return r[i]=d,o()}var g=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var m=Ct(n.metadata),v=Vt(n.metadata,m),y=u===v?0:u<v?-1:1;a(n,m,v,g===m?v:Vt(n.metadata,g),!0,y,i,o)}function Be(t,e,n,r,i,o,s,l,u){t=t||1e3;var c=l.new_edits,h=new a,f=0,p=e.length;function d(){++f===p&&u&&u()}e.forEach((function(t,e){if(t._id&&qt(t._id)){var r=t._deleted?"_removeLocal":"_putLocal";n[r](t,{ctx:i},(function(t,n){o[e]=t||n,d()}))}else{var a=t.metadata.id;h.has(a)?(p--,h.get(a).push([t,e])):h.set(a,[[t,e]])}})),h.forEach((function(e,n){var i=0;function a(){++i<e.length?u():d()}function u(){var u=e[i],h=u[0],f=u[1];if(r.has(n))Ue(t,r.get(n),h,o,f,a,s,c);else{var p=Bt([],h.metadata.rev_tree[0],t);h.metadata.rev_tree=p.tree,h.stemmedRevs=p.stemmedRevs||[],function(t,e,n){var r=Ct(t.metadata),i=Vt(t.metadata,r);if("was_delete"in l&&i)return o[e]=Q(D,"deleted"),n();var a=c&&function(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}(t);if(a){var u=Q(G);return o[e]=u,n()}s(t,r,i,i,!1,i?0:1,e,n)}(h,f,a)}}u()}))}var ze="document-store",Ve="by-sequence",qe="attach-store",He="attach-seq-store",We="meta-store",Ke="local-store",Ye="detect-blob-support";function Xe(e){try{return JSON.stringify(e)}catch(t){return c.stringify(e)}}function Ze(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(Q(X,n,e.type))}}function Je(t,e,n){return{data:Xe(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function Qe(e){if(!e)return null;var n=function(e){try{return JSON.parse(e)}catch(t){return c.parse(e)}}(e.data);return n.winningRev=e.winningRev,n.deleted="1"===e.deletedOrLocal,n.seq=e.seq,n}function tn(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function en(t,e,n,r){n?r(t?"string"!=typeof t?t:bt(t,e):mt([""],{type:e})):t?"string"!=typeof t?wt(t,(function(t){r(gt(t))})):r(t):r("")}function nn(t,e,n,r){var i=Object.keys(t._attachments||{});if(!i.length)return r&&r();var o=0;function a(){++o===i.length&&r&&r()}i.forEach((function(r){e.attachments&&e.include_docs?function(t,e){var r=t._attachments[e],i=r.digest;n.objectStore(qe).get(i).onsuccess=function(t){r.body=t.target.result.body,a()}}(t,r):(t._attachments[r].stub=!0,a())}))}function rn(t,e){return Promise.all(t.map((function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return Promise.all(n.map((function(n){var r=t.doc._attachments[n];if("body"in r){var i=r.body,o=r.content_type;return new Promise((function(a){en(i,o,e,(function(e){t.doc._attachments[n]=N(E(r,["digest","content_type"]),{data:e}),a()}))}))}})))}})))}function on(t,e,n){var r=[],i=n.objectStore(Ve),o=n.objectStore(qe),a=n.objectStore(He),s=t.length;function l(){--s||function(){if(!r.length)return;r.forEach((function(t){a.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::ï¿¿",!1,!1)).onsuccess=function(e){e.target.result||o.delete(t)}}))}()}t.forEach((function(t){var n=i.index("_doc_id_rev"),o=e+"::"+t;n.getKey(o).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return l();i.delete(e),a.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];r.push(n),a.delete(e.primaryKey),e.continue()}else l()}}}))}function an(t,e,n){try{return{txn:t.transaction(e,n)}}catch(r){return{error:r}}}var sn=new A;function ln(t,e,n,r,i,o){for(var s,l,u,c,h,f,p,d,g=e.docs,m=0,v=g.length;m<v;m++){var y=g[m];y._id&&qt(y._id)||(y=g[m]=Fe(y,n.new_edits,t)).error&&!p&&(p=y)}if(p)return o(p);var b=!1,w=0,x=new Array(g.length),S=new a,_=!1,k=r._meta.blobSupport?"blob":"base64";function E(){b=!0,M()}function M(){d&&b&&(d.docCount+=w,f.put(d))}function T(){_||(sn.notify(r._meta.name),o(null,x))}function O(t,e,n,r,i,o,a,s){t.metadata.winningRev=e,t.metadata.deleted=n;var l=t.data;if(l._id=t.metadata.id,l._rev=t.metadata.rev,r&&(l._deleted=!0),l._attachments&&Object.keys(l._attachments).length)return function(t,e,n,r,i,o){var a=t.data,s=0,l=Object.keys(a._attachments);function u(){s===l.length&&P(t,e,n,r,i,o)}function h(){s++,u()}l.forEach((function(n){var r=t.data._attachments[n];if(r.stub)s++,u();else{var i=r.data;delete r.data,r.revpos=parseInt(e,10),function(t,e,n){c.count(t).onsuccess=function(r){if(r.target.result)return n();var i={digest:t,body:e};c.put(i).onsuccess=n}}(r.digest,i,h)}}))}(t,e,n,i,a,s);w+=o,M(),P(t,e,n,i,a,s)}function P(t,e,n,i,o,a){var c=t.data,f=t.metadata;function p(o){var a=t.stemmedRevs||[];i&&r.auto_compaction&&(a=a.concat(function(t){var e=[];return It(t.rev_tree,(function(t,n,r,i,o){"available"!==o.status||t||(e.push(n+"-"+r),o.status="missing")})),e}(t.metadata))),a&&a.length&&on(a,t.metadata.id,s),f.seq=o.target.result;var u=Je(f,e,n);l.put(u).onsuccess=d}function d(){x[o]={ok:!0,id:f.id,rev:f.rev},S.set(t.metadata.id,t.metadata),function(t,e,n){var r=0,i=Object.keys(t.data._attachments||{});if(!i.length)return n();function o(){++r===i.length&&n()}function a(n){var r=t.data._attachments[n].digest,i=h.put({seq:e,digestSeq:r+"::"+e});i.onsuccess=o,i.onerror=function(t){t.preventDefault(),t.stopPropagation(),o()}}for(var s=0;s<i.length;s++)a(i[s])}(t,f.seq,a)}c._doc_id_rev=f.id+"::"+f.rev,delete c._id,delete c._rev;var g=u.put(c);g.onsuccess=p,g.onerror=function(t){t.preventDefault(),t.stopPropagation(),u.index("_doc_id_rev").getKey(c._doc_id_rev).onsuccess=function(t){u.put(c,t.target.result).onsuccess=p}}}!function(t,e,n){if(!t.length)return n();var r,i=0;function o(){i++,t.length===i&&(r?n(r):n())}t.forEach((function(t){var n=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],i=0;if(!n.length)return o();function a(t){r=t,++i===n.length&&o()}for(var s in t.data._attachments)Object.prototype.hasOwnProperty.call(t.data._attachments,s)&&Ge(t.data._attachments[s],e,a)}))}(g,k,(function(e){if(e)return o(e);!function(){var e=an(i,[ze,Ve,qe,Ke,He,We],"readwrite");if(e.error)return o(e.error);(s=e.txn).onabort=Ze(o),s.ontimeout=Ze(o),s.oncomplete=T,l=s.objectStore(ze),u=s.objectStore(Ve),c=s.objectStore(qe),h=s.objectStore(He),(f=s.objectStore(We)).get(We).onsuccess=function(t){d=t.target.result,M()},function(t){var e=[];if(g.forEach((function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach((function(n){var r=t.data._attachments[n];r.stub&&e.push(r.digest)}))})),!e.length)return t();var n,r=0;function i(){++r===e.length&&t(n)}e.forEach((function(t){!function(t,e){c.get(t).onsuccess=function(n){if(n.target.result)e();else{var r=Q(J,"unknown stub attachment with digest "+t);r.status=412,e(r)}}}(t,(function(t){t&&!n&&(n=t),i()}))}))}((function(e){if(e)return _=!0,o(e);!function(){if(!g.length)return;var e=0;function i(){++e===g.length&&Be(t.revs_limit,g,r,S,s,x,O,n,E)}function o(t){var e=Qe(t.target.result);e&&S.set(e.id,e),i()}for(var a=0,u=g.length;a<u;a++){var c=g[a];if(c._id&&qt(c._id))i();else l.get(c.metadata.id).onsuccess=o}}()}))}()}))}function un(e,n,r,i,o){var a,s,l;function u(t){s=t.target.result,a&&o(a,s,l)}function c(t){a=t.target.result,s&&o(a,s,l)}function h(t){var e=t.target.result;if(!e)return o();o([e.key],[e.value],e)}-1===i&&(i=1e3),"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&i>1&&!r?(l={continue:function(){if(!a.length)return o();var r,l=a[a.length-1];if(n&&n.upper)try{r=IDBKeyRange.bound(l,n.upper,!0,n.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return o()}else r=IDBKeyRange.lowerBound(l,!0);n=r,a=null,s=null,e.getAll(n,i).onsuccess=u,e.getAllKeys(n,i).onsuccess=c}},e.getAll(n,i).onsuccess=u,e.getAllKeys(n,i).onsuccess=c):r?e.openCursor(n,"prev").onsuccess=h:e.openCursor(n).onsuccess=h}function cn(e,n,r){var i,o,a="startkey"in e&&e.startkey,s="endkey"in e&&e.endkey,l="key"in e&&e.key,u="keys"in e&&e.keys,c=e.skip||0,h="number"==typeof e.limit?e.limit:-1,f=!1!==e.inclusive_end;if(!u&&(i=function(e,n,r,i,o){try{if(e&&n)return o?IDBKeyRange.bound(n,e,!r,!1):IDBKeyRange.bound(e,n,!1,!r);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(n)return o?IDBKeyRange.lowerBound(n,!r):IDBKeyRange.upperBound(n,!r);if(i)return IDBKeyRange.only(i)}catch(t){return{error:t}}return null}(a,s,f,l,e.descending),(o=i&&i.error)&&("DataError"!==o.name||0!==o.code)))return r(Q(X,o.name,o.message));var p=[ze,Ve,We];e.attachments&&p.push(qe);var d=an(n,p,"readonly");if(d.error)return r(d.error);var g=d.txn;g.oncomplete=function(){e.attachments?rn(S,e.binary).then(M):M()},g.onabort=Ze(r);var m,v,y=g.objectStore(ze),b=g.objectStore(Ve),w=g.objectStore(We),x=b.index("_doc_id_rev"),S=[];function _(t,n){var r={id:n.id,key:n.id,value:{rev:t}};n.deleted?u&&(S.push(r),r.value.deleted=!0,r.doc=null):c--<=0&&(S.push(r),e.include_docs&&function(t,n,r){var i=t.id+"::"+r;x.get(i).onsuccess=function(r){if(n.doc=tn(r.target.result)||{},e.conflicts){var i=Rt(t);i.length&&(n.doc._conflicts=i)}nn(n.doc,e,g)}}(n,r,t))}function k(t){for(var e=0,n=t.length;e<n&&S.length!==h;e++){var r=t[e];if(r.error&&u)S.push(r);else{var i=Qe(r);_(i.winningRev,i)}}}function E(t,e,n){n&&(k(e),S.length<h&&n.continue())}function M(){var t={total_rows:m,offset:e.skip,rows:S};e.update_seq&&void 0!==v&&(t.update_seq=v),r(null,t)}return w.get(We).onsuccess=function(t){m=t.target.result.docCount},e.update_seq&&function(t,e){function n(t){var n=t.target.result,r=void 0;return n&&n.key&&(r=n.key),e({target:{result:[r]}})}t.openCursor(null,"prev").onsuccess=n}(b,(function(t){t.target.result&&t.target.result.length>0&&(v=t.target.result[0])})),o||0===h?void 0:u?function(t,e,n){var r=new Array(t.length),i=0;t.forEach((function(o,a){e.get(o).onsuccess=function(e){e.target.result?r[a]=e.target.result:r[a]={key:o,error:"not_found"},++i===t.length&&n(t,r,{})}}))}(e.keys,y,E):-1===h?function(t,e,n){if("function"!=typeof t.getAll){var r=[];t.openCursor(e).onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),e.continue()):n({target:{result:r}})}}else t.getAll(e).onsuccess=n}(y,i,(function(t){var n=t.target.result;e.descending&&(n=n.reverse()),k(n)})):void un(y,i,e.descending,h+c,E)}var hn=!1,fn=[];function pn(){!hn&&fn.length&&(hn=!0,fn.shift()())}function dn(t,e,n,r){if((t=x(t)).continuous){var i=n+":"+Pt();return sn.addListener(n,i,e,t),sn.notify(n),{cancel:function(){sn.removeListener(n,i)}}}var s=t.doc_ids&&new o(t.doc_ids);t.since=t.since||0;var l=t.since,u="limit"in t?t.limit:-1;0===u&&(u=1);var c,h,f,p,d=[],g=0,m=et(t),v=new a;function y(t,e,n,r){if(n.seq!==e)return r();if(n.winningRev===t._rev)return r(n,t);var i=t._id+"::"+n.winningRev;p.get(i).onsuccess=function(t){r(n,tn(t.target.result))}}function b(){t.complete(null,{results:d,last_seq:l})}var w=[ze,Ve];t.attachments&&w.push(qe);var S=an(r,w,"readonly");if(S.error)return t.complete(S.error);(c=S.txn).onabort=Ze(t.complete),c.oncomplete=function(){!t.continuous&&t.attachments?rn(d).then(b):b()},h=c.objectStore(Ve),f=c.objectStore(ze),p=h.index("_doc_id_rev"),un(h,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,u,(function(e,n,r){if(r&&e.length){var i=new Array(e.length),o=new Array(e.length),a=0;n.forEach((function(n,l){!function(t,e,n){if(s&&!s.has(t._id))return n();var r=v.get(t._id);if(r)return y(t,e,r,n);f.get(t._id).onsuccess=function(i){r=Qe(i.target.result),v.set(t._id,r),y(t,e,r,n)}}(tn(n),e[l],(function(n,s){o[l]=n,i[l]=s,++a===e.length&&function(){for(var e=[],n=0,a=i.length;n<a&&g!==u;n++){var s=i[n];if(s){var l=o[n];e.push(h(l,s))}}Promise.all(e).then((function(e){for(var n=0,r=e.length;n<r;n++)e[n]&&t.onChange(e[n])})).catch(t.complete),g!==u&&r.continue()}()}))}))}function h(e,n){var r=t.processChange(n,e,t);l=r.seq=e.seq;var i=m(r);return"object"==typeof i?Promise.reject(i):i?(g++,t.return_docs&&d.push(r),t.attachments&&t.include_docs?new Promise((function(e){nn(n,t,c,(function(){rn([r],t.binary).then((function(){e(r)}))}))})):Promise.resolve(r)):Promise.resolve()}}))}var gn,mn=new a,vn=new a;function yn(t,e){var n=this;!function(t,e,n){fn.push((function(){t((function(t,r){!function(t,e,n,r){try{t(e,n)}catch(e){r.emit("error",e)}}(e,t,r,n),hn=!1,s((function(){pn()}))}))})),pn()}((function(e){!function(t,e,n){var r=e.name,i=null,o=null;function a(t){return function(e,n){e&&e instanceof Error&&!e.reason&&o&&(e.reason=o),t(e,n)}}function l(t){var e=t.createObjectStore(ze,{keyPath:"id"});t.createObjectStore(Ve,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(qe,{keyPath:"digest"}),t.createObjectStore(We,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(Ye),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(Ke,{keyPath:"_id"});var n=t.createObjectStore(He,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function u(t,e){var n=t.objectStore(ze);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value,o=Vt(i);i.deletedOrLocal=o?"1":"0",n.put(i),r.continue()}else e()}}function c(t){t.createObjectStore(Ke,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function h(t,e){var n=t.objectStore(Ke),r=t.objectStore(ze),i=t.objectStore(Ve);r.openCursor().onsuccess=function(t){var o=t.target.result;if(o){var a=o.value,s=a.id,l=qt(s),u=Ct(a);if(l){var c=s+"::"+u,h=s+"::",f=s+"::~",p=i.index("_doc_id_rev"),d=IDBKeyRange.bound(h,f,!1,!1),g=p.openCursor(d);g.onsuccess=function(t){if(g=t.target.result){var e=g.value;e._doc_id_rev===c&&n.put(e),i.delete(g.primaryKey),g.continue()}else r.delete(o.primaryKey),o.continue()}}else o.continue()}else e&&e()}}function f(t){var e=t.createObjectStore(He,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function p(t,e){var n=t.objectStore(Ve),r=t.objectStore(qe),i=t.objectStore(He);r.count().onsuccess=function(t){if(!t.target.result)return e();n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var r=n.value,o=n.primaryKey,a=Object.keys(r._attachments||{}),s={},l=0;l<a.length;l++){s[r._attachments[a[l]].digest]=!0}var u=Object.keys(s);for(l=0;l<u.length;l++){var c=u[l];i.put({seq:o,digestSeq:c+"::"+o})}n.continue()}}}function d(t){function e(t){return t.data?Qe(t):(t.deleted="1"===t.deletedOrLocal,t)}var n=t.objectStore(Ve),r=t.objectStore(ze);r.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var o=e(i.value);if(o.winningRev=o.winningRev||Ct(o),o.seq)return s();a()}function a(){var t=o.id+"::",e=o.id+"::ï¿¿",r=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,e)),i=0;r.onsuccess=function(t){var e=t.target.result;if(!e)return o.seq=i,s();var n=e.primaryKey;n>i&&(i=n),e.continue()}}function s(){var t=Je(o,o.winningRev,o.deleted);r.put(t).onsuccess=function(){i.continue()}}}}t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=_((function(e){e(null,t._meta.instanceId)})),t._bulkDocs=function(n,r,o){ln(e,n,r,t,i,a(o))},t._get=function(t,e,n){var r,o,a,s=e.ctx;if(!s){var l=an(i,[ze,Ve,qe],"readonly");if(l.error)return n(l.error);s=l.txn}function u(){n(a,{doc:r,metadata:o,ctx:s})}s.objectStore(ze).get(t).onsuccess=function(t){if(!(o=Qe(t.target.result)))return a=Q(D,"missing"),u();var n;if(e.rev)n=e.latest?function(t,e){for(var n,r=e.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,a=o[0],s=o[1],l=o[2],u=0===l.length,c=n.history?n.history.slice():[];if(c.push({id:a,pos:i,opts:s}),u)for(var h=0,f=c.length;h<f;h++){var p=c[h];if(p.pos+"-"+p.id===t)return i+"-"+a}for(var d=0,g=l.length;d<g;d++)r.push({pos:i+1,ids:l[d],history:c})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}(e.rev,o):e.rev;else if(n=o.winningRev,Vt(o))return a=Q(D,"deleted"),u();var i=s.objectStore(Ve),l=o.id+"::"+n;i.index("_doc_id_rev").get(l).onsuccess=function(t){if((r=t.target.result)&&(r=tn(r)),!r)return a=Q(D,"missing"),u();u()}}},t._getAttachment=function(t,e,n,r,o){var a;if(r.ctx)a=r.ctx;else{var s=an(i,[ze,Ve,qe],"readonly");if(s.error)return o(s.error);a=s.txn}var l=n.digest,u=n.content_type;a.objectStore(qe).get(l).onsuccess=function(t){en(t.target.result.body,u,r.binary,(function(t){o(null,t)}))}},t._info=function(e){var n,r,o=an(i,[We,Ve],"readonly");if(o.error)return e(o.error);var a=o.txn;a.objectStore(We).get(We).onsuccess=function(t){r=t.target.result.docCount},a.objectStore(Ve).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},a.oncomplete=function(){e(null,{doc_count:r,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){cn(t,i,a(e))},t._changes=function(e){return dn(e,t,r,i)},t._close=function(t){i.close(),mn.delete(r),t()},t._getRevisionTree=function(t,e){var n=an(i,[ze],"readonly");if(n.error)return e(n.error);n.txn.objectStore(ze).get(t).onsuccess=function(t){var n=Qe(t.target.result);n?e(null,n.rev_tree):e(Q(D))}},t._doCompaction=function(t,e,n){var r=an(i,[ze,Ve,qe,He],"readwrite");if(r.error)return n(r.error);var o=r.txn;o.objectStore(ze).get(t).onsuccess=function(n){var r=Qe(n.target.result);It(r.rev_tree,(function(t,n,r,i,o){var a=n+"-"+r;-1!==e.indexOf(a)&&(o.status="missing")})),on(e,t,o);var i=r.winningRev,a=r.deleted;o.objectStore(ze).put(Je(r,i,a))},o.onabort=Ze(n),o.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=an(i,[Ke],"readonly");if(n.error)return e(n.error);var r=n.txn.objectStore(Ke).get(t);r.onerror=Ze(e),r.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(Q(D))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var r=t._rev,o=t._id;t._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var a,s=e.ctx;if(!s){var l=an(i,[Ke],"readwrite");if(l.error)return n(l.error);(s=l.txn).onerror=Ze(n),s.oncomplete=function(){a&&n(null,a)}}var u,c=s.objectStore(Ke);r?(u=c.get(o)).onsuccess=function(i){var o=i.target.result;o&&o._rev===r?c.put(t).onsuccess=function(){a={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,a)}:n(Q(G))}:((u=c.add(t)).onerror=function(t){n(Q(G)),t.preventDefault(),t.stopPropagation()},u.onsuccess=function(){a={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,a)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var r,o=e.ctx;if(!o){var a=an(i,[Ke],"readwrite");if(a.error)return n(a.error);(o=a.txn).oncomplete=function(){r&&n(null,r)}}var s=t._id,l=o.objectStore(Ke),u=l.get(s);u.onerror=Ze(n),u.onsuccess=function(i){var o=i.target.result;o&&o._rev===t._rev?(l.delete(s),r={ok:!0,id:s,rev:"0-0"},e.ctx&&n(null,r)):n(Q(D))}},t._destroy=function(t,e){sn.removeAllListeners(r);var n=vn.get(r);n&&n.result&&(n.result.close(),mn.delete(r));var i=indexedDB.deleteDatabase(r);i.onsuccess=function(){vn.delete(r),I()&&r in localStorage&&delete localStorage[r],e(null,{ok:!0})},i.onerror=Ze(e)};var g=mn.get(r);if(g)return i=g.idb,t._meta=g.global,s((function(){n(null,t)}));var m=indexedDB.open(r,5);vn.set(r,m),m.onupgradeneeded=function(t){var e=t.target.result;if(t.oldVersion<1)return l(e);var n=t.currentTarget.transaction;t.oldVersion<3&&c(e),t.oldVersion<4&&f(e);var r=[u,h,p,d],i=t.oldVersion;function o(){var t=r[i-1];i++,t&&t(n,o)}o()},m.onsuccess=function(e){(i=e.target.result).onversionchange=function(){i.close(),mn.delete(r)},i.onabort=function(t){L("error","Database has a global failure",t.target.error),o=t.target.error,i.close(),mn.delete(r)};var a,s,l,u,c=i.transaction([We,Ye,ze],"readwrite"),h=!1;function f(){void 0!==l&&h&&(t._meta={name:r,instanceId:u,blobSupport:l},mn.set(r,{idb:i,global:t._meta}),n(null,t))}function p(){if(void 0!==s&&void 0!==a){var t=r+"_id";t in a?u=a[t]:a[t]=u=Pt(),a.docCount=s,c.objectStore(We).put(a)}}c.objectStore(We).get(We).onsuccess=function(t){a=t.target.result||{id:We},p()},function(t,e){t.objectStore(ze).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}(c,(function(t){s=t,p()})),gn||(gn=function(t){return new Promise((function(e){var n=mt([""]),r=t.objectStore(Ye).put(n,"key");r.onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},r.onerror=t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}})).catch((function(){return!1}))}(c)),gn.then((function(t){l=t,f()})),c.oncomplete=function(){h=!0,f()},c.onabort=Ze(n)},m.onerror=function(t){var e=t.target.error&&t.target.error.message;e?-1!==e.indexOf("stored database is a higher version")&&(e=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):e="Failed to open indexedDB, are you in private browsing mode?",L("error",e),n(Q(X,e))}}(n,t,e)}),e,n.constructor)}yn.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}};var bn=5e3,wn={};function xn(t){var e=t.doc||t.ok,n=e&&e._attachments;n&&Object.keys(n).forEach((function(t){var e=n[t];e.data=bt(e.data,e.content_type)}))}function Sn(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function _n(t){return t._attachments&&Object.keys(t._attachments)?Promise.all(Object.keys(t._attachments).map((function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new Promise((function(t){St(n.data,t)})).then((function(t){n.data=t}))}))):Promise.resolve()}function kn(t,e){if(function(t){if(!t.prefix)return!1;var e=ht(t.prefix).protocol;return"http"===e||"https"===e}(e)){var n=e.name.substr(e.prefix.length);t=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(n)}var r=ht(t);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=i.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=i.join("/"),r}function En(t,e){return Mn(t,t.db+"/"+e)}function Mn(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function Tn(t){return"?"+Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&")}function On(t,e){var n=this,i=kn(t.name,t),o=En(i,"");t=x(t);var a,l=function(e,n){if((n=n||{}).headers=n.headers||new re,n.credentials="include",t.auth||i.auth){var r=t.auth||i.auth,o=r.username+":"+r.password,a=gt(unescape(encodeURIComponent(o)));n.headers.set("Authorization","Basic "+a)}var s=t.headers||{};return Object.keys(s).forEach((function(t){n.headers.append(t,s[t])})),function(t){var e="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==e.indexOf("msie"),r=-1!==e.indexOf("trident"),i=-1!==e.indexOf("edge"),o=!("method"in t)||"GET"===t.method;return(n||r||i)&&o}(n)&&(e+=(-1===e.indexOf("?")?"?":"&")+"_nonce="+Date.now()),(t.fetch||ne)(e,n)};function u(t,e){return k(t,h((function(t){f().then((function(){return e.apply(this,t)})).catch((function(e){t.pop()(e)}))}))).bind(n)}function c(t,e,n){var r={};return(e=e||{}).headers=e.headers||new re,e.headers.get("Content-Type")||e.headers.set("Content-Type","application/json"),e.headers.get("Accept")||e.headers.set("Accept","application/json"),l(t,e).then((function(t){return r.ok=t.ok,r.status=t.status,t.json()})).then((function(t){if(r.data=t,!r.ok){r.data.status=r.status;var e=tt(r.data);if(n)return n(e);throw e}if(Array.isArray(r.data)&&(r.data=r.data.map((function(t){return t.error||t.missing?tt(t):t}))),!n)return r;n(null,r.data)}))}function f(){return t.skip_setup?Promise.resolve():a||((a=c(o).catch((function(t){return t&&t.status&&404===t.status?(j(404,"PouchDB is just detecting if the remote exists."),c(o,{method:"PUT"})):Promise.reject(t)})).catch((function(t){return!(!t||!t.status||412!==t.status)||Promise.reject(t)}))).catch((function(){a=null})),a)}function p(t){return t.split("/").map(encodeURIComponent).join("/")}s((function(){e(null,n)})),n._remote=!0,n.type=function(){return"http"},n.id=u("id",(function(t){l(Mn(i,"")).then((function(t){return t.json()})).catch((function(){return{}})).then((function(e){var n=e&&e.uuid?e.uuid+i.db:En(i,"");t(null,n)}))})),n.compact=u("compact",(function(t,e){"function"==typeof t&&(e=t,t={}),t=x(t),c(En(i,"_compact"),{method:"POST"}).then((function(){!function r(){n.info((function(n,i){i&&!i.compact_running?e(null,{ok:!0}):setTimeout(r,t.interval||200)}))}()}))})),n.bulkGet=k("bulkGet",(function(t,e){var n=this;function r(e){var n={};t.revs&&(n.revs=!0),t.attachments&&(n.attachments=!0),t.latest&&(n.latest=!0),c(En(i,"_bulk_get"+Tn(n)),{method:"POST",body:JSON.stringify({docs:t.docs})}).then((function(n){t.attachments&&t.binary&&n.data.results.forEach((function(t){t.docs.forEach(xn)})),e(null,n.data)})).catch(e)}function o(){var r=Math.ceil(t.docs.length/50),i=0,o=new Array(r);function a(t){return function(n,a){o[t]=a.results,++i===r&&e(null,{results:nt(o)})}}for(var s=0;s<r;s++){var l=E(t,["revs","attachments","binary","latest"]);l.docs=t.docs.slice(50*s,Math.min(t.docs.length,50*(s+1))),C(n,l,a(s))}}var a=Mn(i,""),s=wn[a];"boolean"!=typeof s?r((function(t,n){t?(wn[a]=!1,j(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(wn[a]=!0,e(null,n))})):s?r(e):o()})),n._info=function(t){f().then((function(){return l(En(i,""))})).then((function(t){return t.json()})).then((function(e){e.host=En(i,""),t(null,e)})).catch(t)},n.fetch=function(t,e){return f().then((function(){var n="/"===t.substring(0,1)?Mn(i,t.substring(1)):En(i,t);return l(n,e)}))},n.get=u("get",(function(t,e,n){"function"==typeof e&&(n=e,e={});var r={};function o(t){var n=t._attachments,r=n&&Object.keys(n);if(n&&r.length)return function(t,e){return new Promise((function(n,r){var i,o=0,a=0,s=0,l=t.length;function u(){++s===l?i?r(i):n():f()}function c(){o--,u()}function h(t){o--,i=i||t,u()}function f(){for(;o<e&&a<l;)o++,t[a++]().then(c,h)}f()}))}(r.map((function(r){return function(){return function(r){var o=n[r],a=Sn(t._id)+"/"+p(r)+"?rev="+t._rev;return l(En(i,a)).then((function(t){return"buffer"in t?t.buffer():t.blob()})).then((function(t){if(e.binary){var n=Object.getOwnPropertyDescriptor(t.__proto__,"type");return n&&!n.set||(t.type=o.content_type),t}return new Promise((function(e){St(t,e)}))})).then((function(t){delete o.stub,delete o.length,o.data=t}))}(r)}})),5)}(e=x(e)).revs&&(r.revs=!0),e.revs_info&&(r.revs_info=!0),e.latest&&(r.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),r.open_revs=e.open_revs),e.rev&&(r.rev=e.rev),e.conflicts&&(r.conflicts=e.conflicts),e.update_seq&&(r.update_seq=e.update_seq),t=Sn(t),c(En(i,t+Tn(r))).then((function(t){return Promise.resolve().then((function(){if(e.attachments)return n=t.data,Array.isArray(n)?Promise.all(n.map((function(t){if(t.ok)return o(t.ok)}))):o(n);var n})).then((function(){n(null,t.data)}))})).catch((function(e){e.docId=t,n(e)}))})),n.remove=u("remove",(function(t,e,n,r){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(o=t,"function"==typeof e?(r=e,n={}):(r=n,n=e));var a=o._rev||n.rev;c(En(i,Sn(o._id))+"?rev="+a,{method:"DELETE"},r).catch(r)})),n.getAttachment=u("getAttachment",(function(t,e,n,o){"function"==typeof n&&(o=n,n={});var a,s=n.rev?"?rev="+n.rev:"",u=En(i,Sn(t))+"/"+p(e)+s;l(u,{method:"GET"}).then((function(t){if(a=t.headers.get("content-type"),t.ok)return void 0===r||r.browser||"function"!=typeof t.buffer?t.blob():t.buffer();throw t})).then((function(t){void 0===r||r.browser||(t.type=a),o(null,t)})).catch((function(t){o(t)}))})),n.removeAttachment=u("removeAttachment",(function(t,e,n,r){c(En(i,Sn(t)+"/"+p(e))+"?rev="+n,{method:"DELETE"},r).catch(r)})),n.putAttachment=u("putAttachment",(function(t,e,n,r,o,a){"function"==typeof o&&(a=o,o=r,r=n,n=null);var s=Sn(t)+"/"+p(e),l=En(i,s);if(n&&(l+="?rev="+n),"string"==typeof r){var u;try{u=dt(r)}catch(h){return a(Q(q,"Attachment is not a valid base64 string"))}r=u?yt(u,o):""}c(l,{headers:new re({"Content-Type":o}),method:"PUT",body:r},a).catch(a)})),n._bulkDocs=function(t,e,n){t.new_edits=e.new_edits,f().then((function(){return Promise.all(t.docs.map(_n))})).then((function(){return c(En(i,"_bulk_docs"),{method:"POST",body:JSON.stringify(t)},n)})).catch(n)},n._put=function(t,e,n){f().then((function(){return _n(t)})).then((function(){return c(En(i,Sn(t._id)),{method:"PUT",body:JSON.stringify(t)})})).then((function(t){n(null,t.data)})).catch((function(e){e.docId=t&&t._id,n(e)}))},n.allDocs=u("allDocs",(function(t,e){"function"==typeof t&&(e=t,t={});var n,r={},o="GET";(t=x(t)).conflicts&&(r.conflicts=!0),t.update_seq&&(r.update_seq=!0),t.descending&&(r.descending=!0),t.include_docs&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.key&&(r.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(r.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(r.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(r.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(r.limit=t.limit),void 0!==t.skip&&(r.skip=t.skip);var a=Tn(r);void 0!==t.keys&&(o="POST",n={keys:t.keys}),c(En(i,"_all_docs"+a),{method:o,body:JSON.stringify(n)}).then((function(n){t.include_docs&&t.attachments&&t.binary&&n.data.rows.forEach(xn),e(null,n.data)})).catch(e)})),n._changes=function(t){var e="batch_size"in t?t.batch_size:25;(t=x(t)).continuous&&!("heartbeat"in t)&&(t.heartbeat=1e4);var n="timeout"in t?t.timeout:3e4;"timeout"in t&&t.timeout&&n-t.timeout<bn&&(n=t.timeout+bn),"heartbeat"in t&&t.heartbeat&&n-t.heartbeat<bn&&(n=t.heartbeat+bn);var r={};"timeout"in t&&t.timeout&&(r.timeout=t.timeout);var o=void 0!==t.limit&&t.limit,a=o;if(t.style&&(r.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.continuous&&(r.feed="longpoll"),t.seq_interval&&(r.seq_interval=t.seq_interval),t.conflicts&&(r.conflicts=!0),t.descending&&(r.descending=!0),t.update_seq&&(r.update_seq=!0),"heartbeat"in t&&t.heartbeat&&(r.heartbeat=t.heartbeat),t.filter&&"string"==typeof t.filter&&(r.filter=t.filter),t.view&&"string"==typeof t.view&&(r.filter="_view",r.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var l in t.query_params)Object.prototype.hasOwnProperty.call(t.query_params,l)&&(r[l]=t.query_params[l]);var u,h="GET";t.doc_ids?(r.filter="_doc_ids",h="POST",u={doc_ids:t.doc_ids}):t.selector&&(r.filter="_selector",h="POST",u={selector:t.selector});var p,d=new ee,g=function(n,s){if(!t.aborted){r.since=n,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),t.descending?o&&(r.limit=a):r.limit=!o||a>e?e:a;var l=En(i,"_changes"+Tn(r)),g={signal:d.signal,method:h,body:JSON.stringify(u)};p=n,t.aborted||f().then((function(){return c(l,g,s)})).catch(s)}},m={results:[]},v=function(n,r){if(!t.aborted){var i=0;if(r&&r.results){i=r.results.length,m.last_seq=r.last_seq;var l=null,u=null;"number"==typeof r.pending&&(l=r.pending),"string"!=typeof m.last_seq&&"number"!=typeof m.last_seq||(u=m.last_seq);t.query_params,r.results=r.results.filter((function(e){a--;var n=et(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&xn(e),t.return_docs&&m.results.push(e),t.onChange(e,l,u)),n}))}else if(n)return t.aborted=!0,void t.complete(n);r&&r.last_seq&&(p=r.last_seq);var c=o&&a<=0||r&&i<e||t.descending;(!t.continuous||o&&a<=0)&&c?t.complete(null,m):s((function(){g(p,v)}))}};return g(t.since||0,v),{cancel:function(){t.aborted=!0,d.abort()}}},n.revsDiff=u("revsDiff",(function(t,e,n){"function"==typeof e&&(n=e,e={}),c(En(i,"_revs_diff"),{method:"POST",body:JSON.stringify(t)},n).catch(n)})),n._close=function(t){t()},n._destroy=function(t,e){c(En(i,""),{method:"DELETE"}).then((function(t){e(null,t)})).catch((function(t){404===t.status?e(null,{ok:!0}):e(t)}))}}function Pn(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Pn)}catch(t){}}function Cn(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Cn)}catch(t){}}function In(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,In)}catch(t){}}function An(t,e){return e&&t.then((function(t){s((function(){e(null,t)}))}),(function(t){s((function(){e(t)}))})),t}function Ln(t,e){return function(){var n=arguments,r=this;return t.add((function(){return e.apply(r,n)}))}}function Rn(t){var e=new o(t),n=new Array(e.size),r=-1;return e.forEach((function(t){n[++r]=t})),n}function jn(t){var e=new Array(t.size),n=-1;return t.forEach((function(t,r){e[++n]=r})),e}function Nn(t){return new In("builtin "+t+" function requires map values to be numbers or number arrays")}function $n(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];if("number"!=typeof i){if(!Array.isArray(i))throw Nn("_sum");e="number"==typeof e?[e]:e;for(var o=0,a=i.length;o<a;o++){var s=i[o];if("number"!=typeof s)throw Nn("_sum");void 0===e[o]?e.push(s):e[o]+=s}}else"number"==typeof e?e+=i:e[0]+=i}return e}On.valid=function(){return!0},f(Pn,Error),f(Cn,Error),f(In,Error);var Fn=L.bind(null,"log"),Dn=Array.isArray,Gn=JSON.parse;function Un(t,e){return ft("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:$n,log:Fn,isArray:Dn,toJSON:Gn})}function Bn(){this.promise=new Promise((function(t){t()}))}function zn(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function Vn(t,e,n,r,i,o){var a,s=function(t,e){return zn(t)+zn(e)+"undefined"}(n,r);if(!i&&(a=t._cachedViews=t._cachedViews||{})[s])return a[s];var l=t.info().then((function(l){var u=l.db_name+"-mrview-"+(i?"temp":Tt(s));return pt(t,"_local/"+o,(function(t){t.views=t.views||{};var n=e;-1===n.indexOf("/")&&(n=e+"/"+e);var r=t.views[n]=t.views[n]||{};if(!r[u])return r[u]=!0,t})).then((function(){return t.registerDependentDatabase(u).then((function(e){var i=e.db;i.auto_compaction=!0;var o={name:u,db:i,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:r};return o.db.get("_local/lastSeq").catch((function(t){if(404!==t.status)throw t})).then((function(t){return o.seq=t?t.seq:0,a&&o.db.once("destroyed",(function(){delete a[s]})),o}))}))}))}));return a&&(a[s]=l),l}Bn.prototype.add=function(t){return this.promise=this.promise.catch((function(){})).then((function(){return t()})),this.promise},Bn.prototype.finish=function(){return this.promise};var qn={},Hn=new Bn;function Wn(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function Kn(t,e){try{t.emit("error",e)}catch(n){L("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),L("error",e)}}var Yn=function(t,e){return $n(e)},Xn=function(t,e){return e.length},Zn=function(t,e){return{sum:$n(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];e+=i*i}return e}(e)}};var Jn=function(e,n,r,i){function l(e,n,r){try{n(r)}catch(t){Kn(e,t)}}function u(e,n,r,i,o){try{return{output:n(r,i,o)}}catch(t){return Kn(e,t),{error:t}}}function c(t,e){var n=ge(t.key,e.key);return 0!==n?n:ge(t.value,e.value)}function f(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function p(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function d(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&function(t){t.rows.forEach((function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach((function(t){var n=e[t];e[t].data=bt(n.data,n.content_type)}))}))}(e),e}}function g(t,e,n,r){var i=e[t];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(t+"="+i))}function m(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function v(t,e){var n=t.descending?"endkey":"startkey",r=t.descending?"startkey":"endkey";if(void 0!==t[n]&&void 0!==t[r]&&ge(t[n],t[r])>0)throw new Pn("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new Pn("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new Pn("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(e){var n=function(t){if(t){if("number"!=typeof t)return new Pn('Invalid value for integer: "'+t+'"');if(t<0)return new Pn('Invalid value for positive integer: "'+t+'"')}}(t[e]);if(n)throw n}))}function y(t){return function(e){if(404===e.status)return t;throw e}}function b(t,e,n){var r="_local/doc_"+t,i={_id:r,keys:[]},a=n.get(t),s=a[0];return(function(t){return 1===t.length&&/^1-/.test(t[0].rev)}(a[1])?Promise.resolve(i):e.db.get(r).catch(y(i))).then((function(t){return function(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):Promise.resolve({rows:[]})}(t).then((function(e){return function(t,e){for(var n=[],r=new o,i=0,a=e.rows.length;i<a;i++){var l=e.rows[i].doc;if(l&&(n.push(l),r.add(l._id),l._deleted=!s.has(l._id),!l._deleted)){var u=s.get(l._id);"value"in u&&(l.value=u.value)}}var c=jn(s);return c.forEach((function(t){if(!r.has(t)){var e={_id:t},i=s.get(t);"value"in i&&(e.value=i.value),n.push(e)}})),t.keys=Rn(c.concat(t.keys)),n.push(t),n}(t,e)}))}))}function w(t){var e="string"==typeof t?t:t.name,n=qn[e];return n||(n=qn[e]=new Bn),n}function x(t,e){return Ln(w(t),(function(){return function(t,e){var r,i;function o(t,e){var n={id:i._id,key:me(t)};null!=e&&(n.value=me(e)),r.push(n)}var s=n(t.mapFun,o),u=t.seq||0;function h(e,n){return function(){return function(t,e,n){var r="_local/lastSeq";return t.db.get(r).catch(y({_id:r,seq:0})).then((function(r){var i=jn(e);return Promise.all(i.map((function(n){return b(n,t,e)}))).then((function(e){var i=nt(e);return r.seq=n,i.push(r),t.db.bulkDocs({docs:i})}))}))}(t,e,n)}}let f=0,p={view:t.name,indexed_docs:f};t.sourceDB.emit("indexing",p);var d=new Bn;function g(){return t.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:u,limit:e.changes_batch_size}).then(m)}function m(n){var r=n.results;if(!r.length)return;var i=v(r);d.add(h(i,u)),f+=r.length;let o={view:t.name,last_seq:n.last_seq,results_count:r.length,indexed_docs:f};return t.sourceDB.emit("indexing",o),r.length<e.changes_batch_size?void 0:g()}function v(e){for(var n=new a,o=0,h=e.length;o<h;o++){var f=e[o];if("_"!==f.doc._id[0]){r=[],(i=f.doc)._deleted||l(t.sourceDB,s,i),r.sort(c);var p=w(r);n.set(f.doc._id,[p,f.changes])}u=f.seq}return n}function w(t){for(var e,n=new a,r=0,i=t.length;r<i;r++){var o=t[r],s=[o.key,o.id];r>0&&0===ge(o.key,e)&&s.push(r),n.set(ye(s),o),e=o.key}return n}return g().then((function(){return d.finish()})).then((function(){t.seq=u}))}(t,e)}))()}function S(t,e){return Ln(w(t),(function(){return function(t,e){var n,i=t.reduceFun&&!1!==e.reduce,o=e.skip||0;void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys);function s(e){return e.include_docs=!0,t.db.allDocs(e).then((function(t){return n=t.total_rows,t.rows.map((function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var r=function(t){for(var e=[],n=[],r=0;;){var i=t[r++];if("\0"!==i)switch(i){case"1":e.push(null);break;case"2":e.push("1"===t[r]),r++;break;case"3":var o=be(t,r);e.push(o.num),r+=o.length;break;case"4":for(var a="";;){var s=t[r];if("\0"===s)break;a+=s,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(a);break;case"5":var l={element:[],index:e.length};e.push(l.element),n.push(l);break;case"6":var u={element:{},index:e.length};e.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===e.length)return e.pop();we(e,n)}}}(t.doc._id);return{key:r[0],id:r[1],value:"value"in t.doc?t.doc.value:null}}))}))}function l(s){var l;if(l=i?function(t,e,n){0===n.group_level&&delete n.group_level;var i=n.group||n.group_level,o=r(t.reduceFun),a=[],s=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;e.forEach((function(t){var e=a[a.length-1],n=i?t.key:null;if(i&&Array.isArray(n)&&(n=n.slice(0,s)),e&&0===ge(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);a.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})})),e=[];for(var l=0,c=a.length;l<c;l++){var h=a[l],p=u(t.sourceDB,o,h.keys,h.values,!1);if(p.error&&p.error instanceof In)throw p.error;e.push({value:p.error?null:p.output,key:h.groupKey})}return{rows:f(e,n.limit,n.skip)}}(t,s,e):void 0===e.keys?{total_rows:n,offset:o,rows:s}:{total_rows:n,offset:o,rows:f(s,e.limit,e.skip)},e.update_seq&&(l.update_seq=t.seq),e.include_docs){var c=Rn(s.map(p));return t.sourceDB.allDocs({keys:c,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then((function(t){var e=new a;return t.rows.forEach((function(t){e.set(t.id,t.doc)})),s.forEach((function(t){var n=p(t),r=e.get(n);r&&(t.doc=r)})),l}))}return l}if(void 0!==e.keys){var c=e.keys.map((function(t){var n={startkey:ye([t]),endkey:ye([t,{}])};return e.update_seq&&(n.update_seq=!0),s(n)}));return Promise.all(c).then(nt).then(l)}var h,d,g={descending:e.descending};if(e.update_seq&&(g.update_seq=!0),"start_key"in e&&(h=e.start_key),"startkey"in e&&(h=e.startkey),"end_key"in e&&(d=e.end_key),"endkey"in e&&(d=e.endkey),void 0!==h&&(g.startkey=e.descending?ye([h,{}]):ye([h])),void 0!==d){var m=!1!==e.inclusive_end;e.descending&&(m=!m),g.endkey=ye(m?[d,{}]:[d])}if(void 0!==e.key){var v=ye([e.key]),y=ye([e.key,{}]);g.descending?(g.endkey=v,g.startkey=y):(g.startkey=v,g.endkey=y)}return i||("number"==typeof e.limit&&(g.limit=e.limit),g.skip=o),s(g).then(l)}(t,e)}))()}function _(t,n,r){if("function"==typeof t._query)return function(t,e,n){return new Promise((function(r,i){t._query(e,n,(function(t,e){if(t)return i(t);r(e)}))}))}(t,n,r);if(it(t))return function(t,e,n){var r,i,o,a=[],s="GET";if(g("reduce",n,a),g("include_docs",n,a),g("attachments",n,a),g("limit",n,a),g("descending",n,a),g("group",n,a),g("group_level",n,a),g("skip",n,a),g("stale",n,a),g("conflicts",n,a),g("startkey",n,a,!0),g("start_key",n,a,!0),g("endkey",n,a,!0),g("end_key",n,a,!0),g("inclusive_end",n,a),g("key",n,a,!0),g("update_seq",n,a),a=""===(a=a.join("&"))?"":"?"+a,void 0!==n.keys){var l="keys="+encodeURIComponent(JSON.stringify(n.keys));l.length+a.length+1<=2e3?a+=("?"===a[0]?"&":"?")+l:(s="POST","string"==typeof e?r={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var u=Wn(e);return t.fetch("_design/"+u[0]+"/_view/"+u[1]+a,{headers:new re({"Content-Type":"application/json"}),method:s,body:JSON.stringify(r)}).then((function(t){return i=t.ok,o=t.status,t.json()})).then((function(t){if(!i)throw t.status=o,tt(t);return t.rows.forEach((function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)})),t})).then(d(n))}return r=r||{},Object.keys(e).forEach((function(t){Array.isArray(e[t])?r[t]=e[t]:r[t]=e[t].toString()})),t.fetch("_temp_view"+a,{headers:new re({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(r)}).then((function(t){return i=t.ok,o=t.status,t.json()})).then((function(t){if(!i)throw t.status=o,tt(t);return t})).then(d(n))}(t,n,r);var o={changes_batch_size:t.__opts.view_update_changes_batch_size||50};if("string"!=typeof n)return v(r,n),Hn.add((function(){return Vn(t,"temp_view/temp_view",n.map,n.reduce,!0,e).then((function(t){return e=x(t,o).then((function(){return S(t,r)})),n=function(){return t.db.destroy()},e.then((function(t){return n().then((function(){return t}))}),(function(t){return n().then((function(){throw t}))}));var e,n}))})),Hn.finish();var a=n,l=Wn(a),u=l[0],c=l[1];return t.get("_design/"+u).then((function(n){var l=n.views&&n.views[c];if(!l)throw new Cn("ddoc "+n._id+" has no view named "+c);return i(n,c),v(r,l),Vn(t,a,l.map,l.reduce,!1,e).then((function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&s((function(){x(t,o)})),S(t,r)):x(t,o).then((function(){return S(t,r)}))}))}))}var k;return{query:function(t,e,n){var r=this;"function"==typeof e&&(n=e,e={}),e=e?function(t){return t.group_level=m(t.group_level),t.limit=m(t.limit),t.skip=m(t.skip),t}(e):{},"function"==typeof t&&(t={map:t});var i=Promise.resolve().then((function(){return _(r,t,e)}));return An(i,n),i},viewCleanup:(k=function(){var t=this;return"function"==typeof t._viewCleanup?function(t){return new Promise((function(e,n){t._viewCleanup((function(t,r){if(t)return n(t);e(r)}))}))}(t):it(t)?function(t){return t.fetch("_view_cleanup",{headers:new re({"Content-Type":"application/json"}),method:"POST"}).then((function(t){return t.json()}))}(t):function(t){return t.get("_local/"+e).then((function(e){var n=new a;Object.keys(e.views).forEach((function(t){var e=Wn(t),r="_design/"+e[0],i=e[1],a=n.get(r);a||(a=new o,n.set(r,a)),a.add(i)}));var r={keys:jn(n),include_docs:!0};return t.allDocs(r).then((function(r){var i={};r.rows.forEach((function(t){var r=t.key.substring(8);n.get(t.key).forEach((function(n){var o=r+"/"+n;e.views[o]||(o=n);var a=Object.keys(e.views[o]),s=t.doc&&t.doc.views&&t.doc.views[n];a.forEach((function(t){i[t]=i[t]||s}))}))}));var o=Object.keys(i).filter((function(t){return!i[t]})).map((function(e){return Ln(w(e),(function(){return new t.constructor(e,t.__opts).destroy()}))()}));return Promise.all(o).then((function(){return{ok:!0}}))}))}),y({ok:!0}))}(t)},h((function(t){var e=t.pop(),n=k.apply(this,t);return"function"==typeof e&&An(n,e),n})))}}("mrviews",(function(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(t){return n(t,e)}}return Un(t.toString(),e)}),(function(t){var e=t.toString(),n=function(t){if(/^_sum/.test(t))return Yn;if(/^_count/.test(t))return Xn;if(/^_stats/.test(t))return Zn;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}(e);return n||Un(e)}),(function(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new Cn("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}));var Qn={query:function(t,e,n){return Jn.query.call(this,t,e,n)},viewCleanup:function(t){return Jn.viewCleanup.call(this,t)}};function tr(t){return/^1-/.test(t)}function er(t,e){var n=Object.keys(e._attachments);return Promise.all(n.map((function(n){return t.getAttachment(e._id,n,{rev:e._rev})})))}function nr(t,e,n,r){n=x(n);var i=[],o=!0;function a(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then((function(t){if(r.cancelled)throw new Error("cancelled");t.rows.forEach((function(t){var e;t.deleted||!t.doc||!tr(t.value.rev)||(e=t.doc,e._attachments&&Object.keys(e._attachments).length>0)||function(t){return t._conflicts&&t._conflicts.length>0}(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,i.push(t.doc),delete n[t.id])}))}))}return Promise.resolve().then((function(){var t=Object.keys(n).filter((function(t){var e=n[t].missing;return 1===e.length&&tr(e[0])}));if(t.length>0)return a(t)})).then((function(){var a=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].missing.forEach((function(t){e.push({id:n,rev:t})}))})),{docs:e,revs:!0,latest:!0}}(n);if(a.docs.length)return t.bulkGet(a).then((function(n){if(r.cancelled)throw new Error("cancelled");return Promise.all(n.results.map((function(n){return Promise.all(n.docs.map((function(n){var r=n.ok;return n.error&&(o=!1),r&&r._attachments?function(t,e,n){var r=it(e)&&!it(t),i=Object.keys(n._attachments);return r?t.get(n._id).then((function(r){return Promise.all(i.map((function(i){return function(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}(r,n,i)?e.getAttachment(n._id,i):t.getAttachment(r._id,i)})))})).catch((function(t){if(404!==t.status)throw t;return er(e,n)})):er(e,n)}(e,t,r).then((function(t){var e=Object.keys(r._attachments);return t.forEach((function(t,n){var i=r._attachments[e[n]];delete i.stub,delete i.length,i.data=t})),r})):r})))}))).then((function(t){i=i.concat(nt(t).filter(Boolean))}))}))})).then((function(){return{ok:o,docs:i}}))}var rr="pouchdb";function ir(t,e,n,r,i){return t.get(e).catch((function(n){if(404===n.status)return"http"!==t.adapter&&"https"!==t.adapter||j(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:rr,version:1};throw n})).then((function(o){if(!i.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter((function(t){return t.session_id!==r})),o.history.unshift({last_seq:n,session_id:r}),o.history=o.history.slice(0,5),o.version=1,o.replicator=rr,o.session_id=r,o.last_seq=n,t.put(o).catch((function(o){if(409===o.status)return ir(t,e,n,r,i);throw o}))}))}function or(t,e,n,r,i){this.src=t,this.target=e,this.id=n,this.returnValue=r,this.opts=i||{}}or.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then((function(){return n.updateSource(t,e)}))},or.prototype.updateTarget=function(t,e){return this.opts.writeTargetCheckpoint?ir(this.target,this.id,t,e,this.returnValue):Promise.resolve(!0)},or.prototype.updateSource=function(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return ir(this.src,this.id,t,e,this.returnValue).catch((function(t){if(ur(t))return n.opts.writeSourceCheckpoint=!1,!0;throw t}))}return Promise.resolve(!0)};var ar={undefined:function(t,e){return 0===ge(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return function(t,e){if(t.session_id===e.session_id)return{last_seq:t.last_seq,history:t.history};return sr(t.history,e.history)}(e,t).last_seq}};function sr(t,e){var n=t[0],r=t.slice(1),i=e[0],o=e.slice(1);return n&&0!==e.length?lr(n.session_id,e)?{last_seq:n.last_seq,history:t}:lr(i.session_id,r)?{last_seq:i.last_seq,history:o}:sr(r,o):{last_seq:0,history:[]}}function lr(t,e){var n=e[0],r=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||lr(t,r))}function ur(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}or.prototype.getCheckpoint=function(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then((function(t){return t.last_seq||0})).catch((function(t){if(404!==t.status)throw t;return 0})):t.target.get(t.id).then((function(e){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?e.last_seq||0:t.src.get(t.id).then((function(t){return e.version!==t.version?0:(n=e.version?e.version.toString():"undefined")in ar?ar[n](e,t):0;var n}),(function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:0}).then((function(){return 0}),(function(n){return ur(n)?(t.opts.writeSourceCheckpoint=!1,e.last_seq):0}));throw n}))})).catch((function(t){if(404!==t.status)throw t;return 0}))};function cr(t,e,n){var r=n.doc_ids?n.doc_ids.sort(ge):"",i=n.filter?n.filter.toString():"",o="",a="",s="";return n.selector&&(s=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(function(t){return Object.keys(t).sort(ge).reduce((function(e,n){return e[n]=t[n],e}),{})}(n.query_params))),n.filter&&"_view"===n.filter&&(a=n.view.toString()),Promise.all([t.id(),e.id()]).then((function(t){var e=t[0]+t[1]+i+a+o+r+s;return new Promise((function(t){Mt(e,t)}))})).then((function(t){return"_local/"+(t=t.replace(/\//g,".").replace(/\+/g,"_"))}))}function hr(t,e,n,r,i){var o,a,l,u=[],c={seq:0,changes:[],docs:[]},h=!1,f=!1,p=!1,d=0,g=n.continuous||n.live||!1,m=n.batch_size||100,v=n.batches_limit||10,y=n.style||"all_docs",b=!1,w=n.doc_ids,S=n.selector,_=[],k=Pt();i=i||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var E={};function M(){return l?Promise.resolve():cr(t,e,n).then((function(i){a=i;var o={};o=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},l=new or(t,e,a,r,o)}))}function T(){if(_=[],0!==o.docs.length){var t=o.docs,a={timeout:n.timeout};return e.bulkDocs({docs:t,new_edits:!1},a).then((function(e){if(r.cancelled)throw L(),new Error("cancelled");var n=Object.create(null);e.forEach((function(t){t.error&&(n[t.id]=t)}));var o=Object.keys(n).length;i.doc_write_failures+=o,i.docs_written+=t.length-o,t.forEach((function(t){var e=n[t._id];if(e){i.errors.push(e);var o=(e.name||"").toLowerCase();if("unauthorized"!==o&&"forbidden"!==o)throw e;r.emit("denied",x(e))}else _.push(t)}))}),(function(e){throw i.doc_write_failures+=t.length,e}))}}function O(){if(o.error)throw new Error("There was a problem getting docs.");i.last_seq=d=o.seq;var t=x(i);return _.length&&(t.docs=_,"number"==typeof o.pending&&(t.pending=o.pending,delete o.pending),r.emit("change",t)),h=!0,l.writeCheckpoint(o.seq,k).then((function(){if(r.emit("checkpoint",{checkpoint:o.seq}),h=!1,r.cancelled)throw L(),new Error("cancelled");o=void 0,F()})).catch((function(t){throw G(t),t}))}function P(){return nr(t,e,o.diffs,r).then((function(t){o.error=!t.ok,t.docs.forEach((function(t){delete o.diffs[t._id],i.docs_read++,o.docs.push(t)}))}))}function C(){var t;r.cancelled||o||(0!==u.length?(o=u.shift(),r.emit("checkpoint",{start_next_batch:o.seq}),(t={},o.changes.forEach((function(e){r.emit("checkpoint",{revs_diff:e}),"_user/"!==e.id&&(t[e.id]=e.changes.map((function(t){return t.rev})))})),e.revsDiff(t).then((function(t){if(r.cancelled)throw L(),new Error("cancelled");o.diffs=t}))).then(P).then(T).then(O).then(C).catch((function(t){A("batch processing terminated with error",t)}))):I(!0))}function I(t){0!==c.changes.length?(t||f||c.changes.length>=m)&&(u.push(c),c={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),C()):0!==u.length||o||((g&&E.live||f)&&(r.state="pending",r.emit("paused")),f&&L())}function A(t,e){p||(e.message||(e.message=t),i.ok=!1,i.status="aborting",u=[],c={seq:0,changes:[],docs:[]},L(e))}function L(o){if(!(p||r.cancelled&&(i.status="cancelled",h)))if(i.status=i.status||"complete",i.end_time=(new Date).toISOString(),i.last_seq=d,p=!0,o){(o=Q(o)).result=i;var a=(o.name||"").toLowerCase();"unauthorized"===a||"forbidden"===a?(r.emit("error",o),r.removeAllListeners()):function(t,e,n,r){if(!1===t.retry)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=R),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var i=function(){t.current_back_off=0};e.once("paused",(function(){e.removeListener("active",i)})),e.once("active",i)}t.current_back_off=t.current_back_off||0,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(r,t.current_back_off)}(n,r,o,(function(){hr(t,e,n,r)}))}else r.emit("complete",i),r.removeAllListeners()}function j(t,e,i){if(r.cancelled)return L();"number"==typeof e&&(c.pending=e),et(n)(t)&&(c.seq=t.seq||i,c.changes.push(t),r.emit("checkpoint",{pending_batch:c.seq}),s((function(){I(0===u.length&&E.live)})))}function N(t){if(b=!1,r.cancelled)return L();if(t.results.length>0)E.since=t.results[t.results.length-1].seq,F(),I(!0);else{var e=function(){g?(E.live=!0,F()):f=!0,I(!0)};o||0!==t.results.length?e():(h=!0,l.writeCheckpoint(t.last_seq,k).then((function(){h=!1,i.last_seq=d=t.last_seq,e()})).catch(G))}}function $(t){if(b=!1,r.cancelled)return L();A("changes rejected",t)}function F(){if(!b&&!f&&u.length<v){b=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",i);var e=t.changes(E).on("change",j);e.then(o,o),e.then(N).catch($),n.retry&&(r._changes=e,r._abortChanges=i)}function i(){e.cancel()}function o(){r.removeListener("cancel",i)}}function D(){M().then((function(){if(!r.cancelled)return l.getCheckpoint().then((function(t){E={since:d=t,limit:m,batch_size:m,style:y,doc_ids:w,selector:S,return_docs:!0},n.filter&&("string"!=typeof n.filter?E.include_docs=!0:E.filter=n.filter),"heartbeat"in n&&(E.heartbeat=n.heartbeat),"timeout"in n&&(E.timeout=n.timeout),n.query_params&&(E.query_params=n.query_params),n.view&&(E.view=n.view),F()}));L()})).catch((function(t){A("getCheckpoint rejected with ",t)}))}function G(t){h=!1,A("writeCheckpoint completed with error",t)}r.ready(t,e),r.cancelled?L():(r._addedListeners||(r.once("cancel",L),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",(function(t){n.complete(null,t)}))),r._addedListeners=!0),void 0===n.since?D():M().then((function(){return h=!0,l.writeCheckpoint(n.since,k)})).then((function(){h=!1,r.cancelled?L():(d=n.since,D())})).catch(G))}function fr(){p.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new Promise((function(e,n){t.once("complete",e),t.once("error",n)}));t.then=function(t,n){return e.then(t,n)},t.catch=function(t){return e.catch(t)},t.catch((function(){}))}function pr(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function dr(t,e,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw Q(K,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=x(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new fr(n);return hr(pr(t,n),pr(e,n),n,i),i}function gr(t,e,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=x(n)).PouchConstructor=n.PouchConstructor||this,new mr(t=pr(t,n),e=pr(e,n),n,r)}function mr(t,e,n,r){var i=this;this.canceled=!1;var o=n.push?N({},n,n.push):n,a=n.pull?N({},n,n.pull):n;function s(t){i.emit("change",{direction:"pull",change:t})}function l(t){i.emit("change",{direction:"push",change:t})}function u(t){i.emit("denied",{direction:"push",doc:t})}function c(t){i.emit("denied",{direction:"pull",doc:t})}function h(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function f(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function p(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function d(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}this.push=dr(t,e,o),this.pull=dr(e,t,a),this.pushPaused=!0,this.pullPaused=!0;var g={};function m(t){return function(e,n){("change"===e&&(n===s||n===l)||"denied"===e&&(n===c||n===u)||"paused"===e&&(n===f||n===h)||"active"===e&&(n===d||n===p))&&(e in g||(g[e]={}),g[e][t]=!0,2===Object.keys(g[e]).length&&i.removeAllListeners(e))}}function v(t,e,n){-1==t.listeners(e).indexOf(n)&&t.on(e,n)}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push))),this.on("newListener",(function(t){"change"===t?(v(i.pull,"change",s),v(i.push,"change",l)):"denied"===t?(v(i.pull,"denied",c),v(i.push,"denied",u)):"active"===t?(v(i.pull,"active",d),v(i.push,"active",p)):"paused"===t&&(v(i.pull,"paused",f),v(i.push,"paused",h))})),this.on("removeListener",(function(t){"change"===t?(i.pull.removeListener("change",s),i.push.removeListener("change",l)):"denied"===t?(i.pull.removeListener("denied",c),i.push.removeListener("denied",u)):"active"===t?(i.pull.removeListener("active",d),i.push.removeListener("active",p)):"paused"===t&&(i.pull.removeListener("paused",f),i.push.removeListener("paused",h))})),this.pull.on("removeListener",m("pull")),this.push.on("removeListener",m("push"));var y=Promise.all([this.push,this.pull]).then((function(t){var e={push:t[0],pull:t[1]};return i.emit("complete",e),r&&r(null,e),i.removeAllListeners(),e}),(function(t){if(i.cancel(),r?r(t):i.emit("error",t),i.removeAllListeners(),r)throw t}));this.then=function(t,e){return y.then(t,e)},this.catch=function(t){return y.catch(t)}}f(fr,p),fr.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},fr.prototype.ready=function(t,e){var n=this;function r(){n.cancel()}function i(){t.removeListener("destroyed",r),e.removeListener("destroyed",r)}n._readyCalled||(n._readyCalled=!0,t.once("destroyed",r),e.once("destroyed",r),n.once("complete",i),n.once("error",i))},f(mr,p),mr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},te.plugin((function(t){t.adapter("idb",yn,!0)})).plugin((function(t){t.adapter("http",On,!1),t.adapter("https",On,!1)})).plugin(Qn).plugin((function(t){t.replicate=dr,t.sync=gr,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(e,n,r){return t.constructor.replicate(e,t,n,r)},to:function(e,n,r){return t.constructor.replicate(t,e,n,r)}}),this.replicateMethods}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}})),n.exports=te}).call(this)}).call(this,e("_process"))},{_process:12,argsarray:1,events:3,immediate:4,inherits:10,"spark-md5":13,uuid:14,vuvuzela:29}],12:[function(e,n,r){var i,o,a=n.exports={};function s(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function u(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{o="function"==typeof clearTimeout?clearTimeout:l}catch(t){o=l}}();var c,h=[],f=!1,p=-1;function d(){f&&c&&(f=!1,c.length?h=c.concat(h):p=-1,h.length&&g())}function g(){if(!f){var e=u(d);f=!0;for(var n=h.length;n;){for(c=h,h=[];++p<n;)c&&c[p].run();p=-1,n=h.length}c=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===l||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(t,e){this.fun=t,this.array=e}function v(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new m(t,e)),1!==h.length||f||u(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],13:[function(e,n,r){!function(e){if("object"==typeof r)n.exports=e();else{var i;try{i=window}catch(t){i=self}i.SparkMD5=e()}}((function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+e[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+e[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+e[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+e[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+e[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+e[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+e[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+e[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+e[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+e[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+e[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+e[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+e[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+e[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+e[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+e[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+e[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+e[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+e[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+e[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+e[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+e[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+e[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+e[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+e[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+e[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+e[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+e[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+e[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+e[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+i|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=i+t[2]|0,t[3]=o+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function o(t){var e,i,o,a,s,l,u=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)n(c,r(t.substring(e-64,e)));for(i=(t=t.substring(e-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return a=(a=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),l=parseInt(a[1],16)||0,o[14]=s,o[15]=l,n(c,o),c}function a(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function s(t){var e;for(e=0;e<t.length;e+=1)t[e]=a(t[e]);return t.join("")}function l(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==s(o("hello"))&&function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var i,o,a,s,l=this.byteLength,u=e(n,l),c=l;return r!==t&&(c=e(r,l)),u>c?new ArrayBuffer(0):(i=c-u,o=new ArrayBuffer(i),a=new Uint8Array(o),s=new Uint8Array(this,u,i),a.set(s),o)}}(),c.prototype.append=function(t){return this.appendBinary(l(t)),this},c.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,i=this._buff.length;for(e=64;e<=i;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},c.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(o,i),n=s(this._hash),t&&(n=u(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(t,e){var r,i,o,a=e;if(t[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,t),a=0;a<16;a+=1)t[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,t[14]=i,t[15]=o,n(this._hash,t)},c.hash=function(t,e){return c.hashBinary(l(t),e)},c.hashBinary=function(t,e){var n=s(o(t));return e?u(n):n},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(t){var e,r,o,a,s,l=(r=this._buff.buffer,o=t,a=!0,(s=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),s.set(new Uint8Array(o),r.byteLength),a?s:s.buffer),u=l.length;for(this._length+=t.byteLength,e=64;e<=u;e+=64)n(this._hash,i(l.subarray(e-64,e)));return this._buff=e-64<u?new Uint8Array(l.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r[e]<<(e%4<<3);return this._finish(o,i),n=s(this._hash),t&&(n=u(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var t,e=c.prototype.getState.call(this);return e.buff=(t=e.buff,String.fromCharCode.apply(null,new Uint8Array(t))),e},c.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,r=t.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=t.charCodeAt(n);return e?o:i}(t.buff,!0),c.prototype.setState.call(this,t)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(t,e){var r=s(function(t){var e,r,o,a,s,l,u=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=u;e+=64)n(c,i(t.subarray(e-64,e)));for(r=(t=e-64<u?t.subarray(e-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)o[e>>2]|=t[e]<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return a=(a=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),l=parseInt(a[1],16)||0,o[14]=s,o[15]=l,n(c,o),c}(new Uint8Array(t)));return e?u(r):r},c}))},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return h.default}});var r=f(t("./v1.js")),i=f(t("./v3.js")),o=f(t("./v4.js")),a=f(t("./v5.js")),s=f(t("./nil.js")),l=f(t("./version.js")),u=f(t("./validate.js")),c=f(t("./stringify.js")),h=f(t("./parse.js"));function f(t){return t&&t.__esModule?t:{default:t}}},{"./nil.js":16,"./parse.js":17,"./stringify.js":21,"./v1.js":22,"./v3.js":23,"./v4.js":25,"./v5.js":26,"./validate.js":27,"./version.js":28}],15:[function(t,e,n){"use strict";function r(t){return 14+(t+64>>>9<<4)+1}function i(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function o(t,e,n,r,o,a){return i((s=i(i(e,t),i(r,a)))<<(l=o)|s>>>32-l,n);var s,l}function a(t,e,n,r,i,a,s){return o(e&n|~e&r,t,e,i,a,s)}function s(t,e,n,r,i,a,s){return o(e&r|n&~r,t,e,i,a,s)}function l(t,e,n,r,i,a,s){return o(e^n^r,t,e,i,a,s)}function u(t,e,n,r,i,a,s){return o(n^(e|~r),t,e,i,a,s)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,r="0123456789abcdef";for(let i=0;i<n;i+=8){const n=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[r(e)-1]=e;let n=1732584193,o=-271733879,c=-1732584194,h=271733878;for(let r=0;r<t.length;r+=16){const e=n,f=o,p=c,d=h;n=a(n,o,c,h,t[r],7,-680876936),h=a(h,n,o,c,t[r+1],12,-389564586),c=a(c,h,n,o,t[r+2],17,606105819),o=a(o,c,h,n,t[r+3],22,-1044525330),n=a(n,o,c,h,t[r+4],7,-176418897),h=a(h,n,o,c,t[r+5],12,1200080426),c=a(c,h,n,o,t[r+6],17,-1473231341),o=a(o,c,h,n,t[r+7],22,-45705983),n=a(n,o,c,h,t[r+8],7,1770035416),h=a(h,n,o,c,t[r+9],12,-1958414417),c=a(c,h,n,o,t[r+10],17,-42063),o=a(o,c,h,n,t[r+11],22,-1990404162),n=a(n,o,c,h,t[r+12],7,1804603682),h=a(h,n,o,c,t[r+13],12,-40341101),c=a(c,h,n,o,t[r+14],17,-1502002290),o=a(o,c,h,n,t[r+15],22,1236535329),n=s(n,o,c,h,t[r+1],5,-165796510),h=s(h,n,o,c,t[r+6],9,-1069501632),c=s(c,h,n,o,t[r+11],14,643717713),o=s(o,c,h,n,t[r],20,-373897302),n=s(n,o,c,h,t[r+5],5,-701558691),h=s(h,n,o,c,t[r+10],9,38016083),c=s(c,h,n,o,t[r+15],14,-660478335),o=s(o,c,h,n,t[r+4],20,-405537848),n=s(n,o,c,h,t[r+9],5,568446438),h=s(h,n,o,c,t[r+14],9,-1019803690),c=s(c,h,n,o,t[r+3],14,-187363961),o=s(o,c,h,n,t[r+8],20,1163531501),n=s(n,o,c,h,t[r+13],5,-1444681467),h=s(h,n,o,c,t[r+2],9,-51403784),c=s(c,h,n,o,t[r+7],14,1735328473),o=s(o,c,h,n,t[r+12],20,-1926607734),n=l(n,o,c,h,t[r+5],4,-378558),h=l(h,n,o,c,t[r+8],11,-2022574463),c=l(c,h,n,o,t[r+11],16,1839030562),o=l(o,c,h,n,t[r+14],23,-35309556),n=l(n,o,c,h,t[r+1],4,-1530992060),h=l(h,n,o,c,t[r+4],11,1272893353),c=l(c,h,n,o,t[r+7],16,-155497632),o=l(o,c,h,n,t[r+10],23,-1094730640),n=l(n,o,c,h,t[r+13],4,681279174),h=l(h,n,o,c,t[r],11,-358537222),c=l(c,h,n,o,t[r+3],16,-722521979),o=l(o,c,h,n,t[r+6],23,76029189),n=l(n,o,c,h,t[r+9],4,-640364487),h=l(h,n,o,c,t[r+12],11,-421815835),c=l(c,h,n,o,t[r+15],16,530742520),o=l(o,c,h,n,t[r+2],23,-995338651),n=u(n,o,c,h,t[r],6,-198630844),h=u(h,n,o,c,t[r+7],10,1126891415),c=u(c,h,n,o,t[r+14],15,-1416354905),o=u(o,c,h,n,t[r+5],21,-57434055),n=u(n,o,c,h,t[r+12],6,1700485571),h=u(h,n,o,c,t[r+3],10,-1894986606),c=u(c,h,n,o,t[r+10],15,-1051523),o=u(o,c,h,n,t[r+1],21,-2054922799),n=u(n,o,c,h,t[r+8],6,1873313359),h=u(h,n,o,c,t[r+15],10,-30611744),c=u(c,h,n,o,t[r+6],15,-1560198380),o=u(o,c,h,n,t[r+13],21,1309151649),n=u(n,o,c,h,t[r+4],6,-145523070),h=u(h,n,o,c,t[r+11],10,-1120210379),c=u(c,h,n,o,t[r+2],15,718787259),o=u(o,c,h,n,t[r+9],21,-343485551),n=i(n,e),o=i(o,f),c=i(c,p),h=i(h,d)}return[n,o,c,h]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(r(e));for(let r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))};n.default=c},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="00000000-0000-0000-0000-000000000000"},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./validate.js"))&&r.__esModule?r:{default:r};var o=function(t){if(!(0,i.default)(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};n.default=o},{"./validate.js":27}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],19:[function(t,e,n){"use strict";let r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)};const i=new Uint8Array(16)},{}],20:[function(t,e,n){"use strict";function r(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function i(t,e){return t<<e|t>>>32-e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const o=t.length/4+2,a=Math.ceil(o/16),s=new Array(a);for(let r=0;r<a;++r){const e=new Uint32Array(16);for(let n=0;n<16;++n)e[n]=t[64*r+4*n]<<24|t[64*r+4*n+1]<<16|t[64*r+4*n+2]<<8|t[64*r+4*n+3];s[r]=e}s[a-1][14]=8*(t.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1)&4294967295;for(let l=0;l<a;++l){const t=new Uint32Array(80);for(let e=0;e<16;++e)t[e]=s[l][e];for(let e=16;e<80;++e)t[e]=i(t[e-3]^t[e-8]^t[e-14]^t[e-16],1);let o=n[0],a=n[1],u=n[2],c=n[3],h=n[4];for(let n=0;n<80;++n){const s=Math.floor(n/20),l=i(o,5)+r(s,a,u,c)+h+e[s]+t[n]>>>0;h=c,c=u,u=i(a,30)>>>0,a=o,o=l}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+h>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};n.default=o},{}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./validate.js"))&&r.__esModule?r:{default:r};const o=[];for(let s=0;s<256;++s)o.push((s+256).toString(16).substr(1));var a=function(t,e=0){const n=(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase();if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n};n.default=a},{"./validate.js":27}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./rng.js")),i=o(t("./stringify.js"));function o(t){return t&&t.__esModule?t:{default:t}}let a,s,l=0,u=0;var c=function(t,e,n){let o=e&&n||0;const c=e||new Array(16);let h=(t=t||{}).node||a,f=void 0!==t.clockseq?t.clockseq:s;if(null==h||null==f){const e=t.random||(t.rng||r.default)();null==h&&(h=a=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==f&&(f=s=16383&(e[6]<<8|e[7]))}let p=void 0!==t.msecs?t.msecs:Date.now(),d=void 0!==t.nsecs?t.nsecs:u+1;const g=p-l+(d-u)/1e4;if(g<0&&void 0===t.clockseq&&(f=f+1&16383),(g<0||p>l)&&void 0===t.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=p,u=d,s=f,p+=122192928e5;const m=(1e4*(268435455&p)+d)%4294967296;c[o++]=m>>>24&255,c[o++]=m>>>16&255,c[o++]=m>>>8&255,c[o++]=255&m;const v=p/4294967296*1e4&268435455;c[o++]=v>>>8&255,c[o++]=255&v,c[o++]=v>>>24&15|16,c[o++]=v>>>16&255,c[o++]=f>>>8|128,c[o++]=255&f;for(let r=0;r<6;++r)c[o+r]=h[r];return e||(0,i.default)(c)};n.default=c},{"./rng.js":19,"./stringify.js":21}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./v35.js")),i=o(t("./md5.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a=(0,r.default)("v3",48,i.default);n.default=a},{"./md5.js":15,"./v35.js":24}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){function o(t,o,a,s){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof o&&(o=(0,i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+t.length);if(l.set(o),l.set(t,o.length),l=n(l),l[6]=15&l[6]|e,l[8]=63&l[8]|128,a){s=s||0;for(let t=0;t<16;++t)a[s+t]=l[t];return a}return(0,r.default)(l)}try{o.name=t}catch(l){}return o.DNS=a,o.URL=s,o},n.URL=n.DNS=void 0;var r=o(t("./stringify.js")),i=o(t("./parse.js"));function o(t){return t&&t.__esModule?t:{default:t}}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=s},{"./parse.js":17,"./stringify.js":21}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./rng.js")),i=o(t("./stringify.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,n){const o=(t=t||{}).random||(t.rng||r.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=o[t];return e}return(0,i.default)(o)};n.default=a},{"./rng.js":19,"./stringify.js":21}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./v35.js")),i=o(t("./sha1.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a=(0,r.default)("v5",80,i.default);n.default=a},{"./sha1.js":20,"./v35.js":24}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./regex.js"))&&r.__esModule?r:{default:r};var o=function(t){return"string"==typeof t&&i.default.test(t)};n.default=o},{"./regex.js":18}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./validate.js"))&&r.__esModule?r:{default:r};var o=function(t){if(!(0,i.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)};n.default=o},{"./validate.js":27}],29:[function(t,e,n){"use strict";function r(t,e,n){var r=n[n.length-1];t===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(t);else if(o===e.length-2){i[e.pop()]=t}else e.push(t)}n.stringify=function(t){var e=[];e.push({obj:t});for(var n,r,i,o,a,s,l,u,c,h,f="";n=e.pop();)if(r=n.obj,f+=n.prefix||"",i=n.val||"")f+=i;else if("object"!=typeof r)f+=void 0===r?null:JSON.stringify(r);else if(null===r)f+="null";else if(Array.isArray(r)){for(e.push({val:"]"}),o=r.length-1;o>=0;o--)a=0===o?"":",",e.push({obj:r[o],prefix:a});e.push({val:"["})}else{for(l in s=[],r)r.hasOwnProperty(l)&&s.push(l);for(e.push({val:"}"}),o=s.length-1;o>=0;o--)c=r[u=s[o]],h=o>0?",":"",h+=JSON.stringify(u)+":",e.push({obj:c,prefix:h});e.push({val:"{"})}return f},n.parse=function(t){for(var e,n,i,o,a,s,l,u,c,h=[],f=[],p=0;;)if("}"!==(e=t[p++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,r(null,h,f);break;case"t":p+=3,r(!0,h,f);break;case"f":p+=4,r(!1,h,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(i=t[p++],!/[\d\.\-e\+]/.test(i)){p--;break}n+=i}r(parseFloat(n),h,f);break;case'"':for(o="",a=void 0,s=0;'"'!==(l=t[p++])||"\\"===a&&s%2==1;)o+=l,"\\"===(a=l)?s++:s=0;r(JSON.parse('"'+o+'"'),h,f);break;case"[":u={element:[],index:h.length},h.push(u.element),f.push(u);break;case"{":c={element:{},index:h.length},h.push(c.element),f.push(c);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();r(h.pop(),h,f)}}},{}]},{},[11])(11)}));var r,i,o,a=null,s=null;function l(t,e,n){t.addEventListener(e,(function(t){var r=new MouseEvent(n,t);r.pointerId=1,r.isPrimary=!0,r.pointerType="mouse",r.width=1,r.height=1,r.tiltX=0,r.tiltY=0,"buttons"in t&&0!==t.buttons?r.pressure=.5:r.pressure=0;var i=t.target;null!==s&&(i=s,"mouseup"===e&&(s=null)),i.dispatchEvent(r),r.defaultPrevented&&t.preventDefault()}))}function u(t,e,n){t.addEventListener(e,(function(t){for(var r=t.changedTouches,i=r.length,o=0;o<i;o++){var s=new CustomEvent(n,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var l=r.item(o);s.clientX=l.clientX,s.clientY=l.clientY,s.screenX=l.screenX,s.screenY=l.screenY,s.pageX=l.pageX,s.pageY=l.pageY;var u=l.target.getBoundingClientRect();s.offsetX=l.clientX-u.left,s.offsetY=l.clientY-u.top,s.pointerId=1+l.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===a&&(a=l.identifier),s.isPrimary=l.identifier===a,"touchend"===e&&s.isPrimary&&(a=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}}))}
/*! For license information please see ol.js.LICENSE.txt */"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(l(document,"mousedown","pointerdown"),l(document,"mousemove","pointermove"),l(document,"mouseup","pointerup")),u(document,"touchstart","pointerdown"),u(document,"touchmove","pointermove"),u(document,"touchend","pointerup")),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ol=e():t.ol=e()}(self,(function(){return function(){var t={4919:function(t,e){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=l(t),a=o[0],s=o[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),c=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e),1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=16383,s=0,l=r-i;s<l;s+=a)o.push(u(t,s,s+a>l?l:s+a));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9033:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(4919),o=n(3226),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;var s=2147483647;function l(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|m(t,e),r=l(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(B(t,Uint8Array)){var e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return p(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+r(t));if(B(t,ArrayBuffer)||t&&B(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(B(t,SharedArrayBuffer)||t&&B(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return u.from(i,e,n);var o=function(t){if(u.isBuffer(t)){var e=0|g(t.length),n=l(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||z(t.length)?l(0):p(t):"Buffer"===t.type&&Array.isArray(t.data)?p(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+r(t))}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return h(t),l(t<0?0:0|g(t))}function p(t){for(var e=t.length<0?0:0|g(t.length),n=l(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function g(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function m(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||B(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+r(t));var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(o)return i?-1:D(t).length;e=(""+e).toLowerCase(),o=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return M(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),z(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){h=!1;break}if(h)return o}return-1}function x(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(z(s))return a;t[n+a]=s}return a}function S(t,e,n,r){return U(D(e,t.length-n),t,n,r)}function _(t,e,n,r){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return U(G(e),t,n,r)}function E(t,e,n,r){return U(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function M(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,u=t[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||console.error,Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return h(t),t<=0?l(t):void 0!==e?"string"==typeof n?l(t).fill(e,n):l(t).fill(e):l(t)}(t,e,n)},u.allocUnsafe=function(t){return f(t)},u.allocUnsafeSlow=function(t){return f(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(B(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),B(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(B(o,Uint8Array))i+o.length>r.length?u.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(t,e,n,i,o){if(B(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+r(t));if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),l=Math.min(a,s),c=this.slice(i,o),h=t.slice(e,n),f=0;f<l;++f)if(c[f]!==h[f]){a=c[f],s=h[f];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":case"latin1":case"binary":return _(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V[t[o]];return i}function A(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function j(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function $(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return $(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return $(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:u.from(t,r),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+/0-9A-Za-z-_]/g;function D(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function B(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function z(t){return t!=t}var V=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},9796:function(t,e,n){var r;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(r=!1,function(){r||(r=!0)}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=n(4701)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},4701:function(t,e,n){function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){function e(t){var n,r=null;function o(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(o.enabled){var a=o,s=Number(new Date),l=s-(n||s);a.diff=l,a.prev=n,a.curr=s,n=s,r[0]=e.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var u=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return"%";u++;var i=e.formatters[n];if("function"==typeof i){var o=r[u];t=i.call(a,o),r.splice(u,1),u--}return t})),e.formatArgs.call(a,r);var c=a.log||e.log;c.apply(a,r)}}return o.namespace=t,o.useColors=e.useColors(),o.color=e.selectColor(t),o.extend=i,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===r?e.enabled(t):r},set:function(t){r=t}}),"function"==typeof e.init&&e.init(o),o}function i(t,n){var r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[].concat(r(e.names.map(o)),r(e.skips.map(o).map((function(t){return"-"+t})))).join(",");return e.enable(""),t},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(7937),e.destroy=function(){},Object.keys(t).forEach((function(n){e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},8291:function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,r="object"===("undefined"==typeof Reflect?"undefined":e(Reflect))?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&m(t,"error",e,{once:!0})}(t,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+e(t))}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,a;if(l(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(t))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,s,console&&console.warn}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function m(t,n,r,i){if("function"==typeof t.on)i.once?t.once(n,r):t.on(n,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+e(t));t.addEventListener(n,(function e(o){i.once&&t.removeEventListener(n,e),r(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)i(l,this,e);else{var u=l.length,c=g(l,u);for(n=0;n<u;++n)i(c[n],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){return l(e),this.on(t,f(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,f(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,a;if(l(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},3226:function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*g}},1736:function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.t=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.t=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},152:function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return!!t&&("symbol"===e(Symbol.observable)&&"function"==typeof t[Symbol.observable]?t===t[Symbol.observable]():"function"==typeof t["@@observable"]&&t===t["@@observable"]())}},6943:function(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d;r={defaultNoDataValue:-34027999387901484e22,decode:function(t,e){var n=(e=e||{}).encodedMaskData||null===e.encodedMaskData,l=s(t,e.inputOffset||0,n),u=null!==e.noDataValue?e.noDataValue:r.defaultNoDataValue,c=i(l,e.pixelType||Float32Array,e.encodedMaskData,u,e.returnMask),h={width:l.width,height:l.height,pixelData:c.resultPixels,minValue:c.minValue,maxValue:l.pixels.maxValue,noDataValue:u};return c.resultMask&&(h.maskData=c.resultMask),e.returnEncodedMask&&l.mask&&(h.encodedMaskData=l.mask.bitset?l.mask.bitset:null),e.returnFileInfo&&(h.fileInfo=o(l),e.computeUsedBitDepths&&(h.fileInfo.bitDepths=a(l))),h}},i=function(t,e,n,r,i){var o,a,s,u=0,c=t.pixels.numBlocksX,h=t.pixels.numBlocksY,f=Math.floor(t.width/c),p=Math.floor(t.height/h),d=2*t.maxZError,g=Number.MAX_VALUE;n=n||(t.mask?t.mask.bitset:null),a=new e(t.width*t.height),i&&n&&(s=new Uint8Array(t.width*t.height));for(var m,v,y=new Float32Array(f*p),b=0;b<=h;b++){var w=b!==h?p:t.height%h;if(0!==w)for(var x=0;x<=c;x++){var S=x!==c?f:t.width%c;if(0!==S){var _,k,E,M,T=b*t.width*p+x*f,O=t.width-S,P=t.pixels.blocks[u];if(P.encoding<2?(0===P.encoding?_=P.rawData:(l(P.stuffedData,P.bitsPerPixel,P.numValidPixels,P.offset,d,y,t.pixels.maxValue),_=y),k=0):E=2===P.encoding?0:P.offset,n)for(v=0;v<w;v++){for(7&T&&(M=n[T>>3],M<<=7&T),m=0;m<S;m++)7&T||(M=n[T>>3]),128&M?(s&&(s[T]=1),g=g>(o=P.encoding<2?_[k++]:E)?o:g,a[T++]=o):(s&&(s[T]=0),a[T++]=r),M<<=1;T+=O}else if(P.encoding<2)for(v=0;v<w;v++){for(m=0;m<S;m++)g=g>(o=_[k++])?o:g,a[T++]=o;T+=O}else for(g=g>E?E:g,v=0;v<w;v++){for(m=0;m<S;m++)a[T++]=E;T+=O}if(1===P.encoding&&k!==P.numValidPixels)throw"Block and Mask do not match";u++}}}return{resultPixels:a,resultMask:s,minValue:g}},o=function(t){return{fileIdentifierString:t.fileIdentifierString,fileVersion:t.fileVersion,imageType:t.imageType,height:t.height,width:t.width,maxZError:t.maxZError,eofOffset:t.eofOffset,mask:t.mask?{numBlocksX:t.mask.numBlocksX,numBlocksY:t.mask.numBlocksY,numBytes:t.mask.numBytes,maxValue:t.mask.maxValue}:null,pixels:{numBlocksX:t.pixels.numBlocksX,numBlocksY:t.pixels.numBlocksY,numBytes:t.pixels.numBytes,maxValue:t.pixels.maxValue,noDataValue:t.noDataValue}}},a=function(t){for(var e=t.pixels.numBlocksX*t.pixels.numBlocksY,n={},r=0;r<e;r++){var i=t.pixels.blocks[r];0===i.encoding?n.float32=!0:1===i.encoding?n[i.bitsPerPixel]=!0:n[0]=!0}return Object.keys(n)},s=function(t,e,n){var r={},i=new Uint8Array(t,e,10);if(r.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==r.fileIdentifierString.trim())throw"Unexpected file identifier string: "+r.fileIdentifierString;e+=10;var o=new DataView(t,e,24);if(r.fileVersion=o.getInt32(0,!0),r.imageType=o.getInt32(4,!0),r.height=o.getUint32(8,!0),r.width=o.getUint32(12,!0),r.maxZError=o.getFloat64(16,!0),e+=24,!n)if(o=new DataView(t,e,16),r.mask={},r.mask.numBlocksY=o.getUint32(0,!0),r.mask.numBlocksX=o.getUint32(4,!0),r.mask.numBytes=o.getUint32(8,!0),r.mask.maxValue=o.getFloat32(12,!0),e+=16,r.mask.numBytes>0){var a=new Uint8Array(Math.ceil(r.width*r.height/8)),s=(o=new DataView(t,e,r.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(s>0)for(;s--;)a[u++]=o.getUint8(l++);else{var c=o.getUint8(l++);for(s=-s;s--;)a[u++]=c}s=o.getInt16(l,!0),l+=2}while(l<r.mask.numBytes);if(-32768!==s||u<a.length)throw"Unexpected end of mask RLE encoding";r.mask.bitset=a,e+=r.mask.numBytes}else 0==(r.mask.numBytes|r.mask.numBlocksY|r.mask.maxValue)&&(r.mask.bitset=new Uint8Array(Math.ceil(r.width*r.height/8)));o=new DataView(t,e,16),r.pixels={},r.pixels.numBlocksY=o.getUint32(0,!0),r.pixels.numBlocksX=o.getUint32(4,!0),r.pixels.numBytes=o.getUint32(8,!0),r.pixels.maxValue=o.getFloat32(12,!0),e+=16;var h=r.pixels.numBlocksX,f=r.pixels.numBlocksY,p=h+(r.width%h>0?1:0),d=f+(r.height%f>0?1:0);r.pixels.blocks=new Array(p*d);for(var g=0,m=0;m<d;m++)for(var v=0;v<p;v++){var y=0,b=t.byteLength-e;o=new DataView(t,e,Math.min(10,b));var w={};r.pixels.blocks[g++]=w;var x=o.getUint8(0);if(y++,w.encoding=63&x,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==x&&2!==x){if(x>>=6,w.offsetType=x,2===x)w.offset=o.getInt8(1),y++;else if(1===x)w.offset=o.getInt16(1,!0),y+=2;else{if(0!==x)throw"Invalid block offset type";w.offset=o.getFloat32(1,!0),y+=4}if(1===w.encoding)if(x=o.getUint8(y),y++,w.bitsPerPixel=63&x,x>>=6,w.numValidPixelsType=x,2===x)w.numValidPixels=o.getUint8(y),y++;else if(1===x)w.numValidPixels=o.getUint16(y,!0),y+=2;else{if(0!==x)throw"Invalid valid pixel count type";w.numValidPixels=o.getUint32(y,!0),y+=4}}var S;if(e+=y,3!==w.encoding)if(0===w.encoding){var _=(r.pixels.numBytes-1)/4;if(_!==Math.floor(_))throw"uncompressed block has invalid length";S=new ArrayBuffer(4*_),new Uint8Array(S).set(new Uint8Array(t,e,4*_));var k=new Float32Array(S);w.rawData=k,e+=4*_}else if(1===w.encoding){var E=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),M=Math.ceil(E/4);S=new ArrayBuffer(4*M),new Uint8Array(S).set(new Uint8Array(t,e,E)),w.stuffedData=new Uint32Array(S),e+=E}}else e++}return r.eofOffset=e,r},l=function(t,e,n,r,i,o,a){var s,l,u,c=(1<<e)-1,h=0,f=0,p=Math.ceil((a-r)/i),d=4*t.length-Math.ceil(e*n/8);for(t[t.length-1]<<=8*d,s=0;s<n;s++){if(0===f&&(u=t[h++],f=32),f>=e)l=u>>>f-e&c,f-=e;else{var g=e-f;l=(u&c)<<g&c,l+=(u=t[h++])>>>(f=32-g)}o[s]=l<p?r+l*i:a}return o},h=r,f=function(){"use strict";var t=function(t,e,n,r,i,o,a,s){var l,u,c,h,f,p=(1<<n)-1,d=0,g=0,m=4*t.length-Math.ceil(n*r/8);if(t[t.length-1]<<=8*m,i)for(l=0;l<r;l++)0===g&&(c=t[d++],g=32),g>=n?(u=c>>>g-n&p,g-=n):(u=(c&p)<<(h=n-g)&p,u+=(c=t[d++])>>>(g=32-h)),e[l]=i[u];else for(f=Math.ceil((s-o)/a),l=0;l<r;l++)0===g&&(c=t[d++],g=32),g>=n?(u=c>>>g-n&p,g-=n):(u=(c&p)<<(h=n-g)&p,u+=(c=t[d++])>>>(g=32-h)),e[l]=u<f?o+u*a:s},e=function(t,e,n,r,i,o,a,s){var l,u,c,h,f=(1<<n)-1,p=0,d=0,g=0;if(i)for(l=0;l<r;l++)0===d&&(c=t[p++],d=32,g=0),d>=n?(u=c>>>g&f,d-=n,g+=n):(u=c>>>g&f,d=32-(h=n-d),u|=((c=t[p++])&(1<<h)-1)<<n-h,g=h),e[l]=i[u];else{var m=Math.ceil((s-o)/a);for(l=0;l<r;l++)0===d&&(c=t[p++],d=32,g=0),d>=n?(u=c>>>g&f,d-=n,g+=n):(u=c>>>g&f,d=32-(h=n-d),u|=((c=t[p++])&(1<<h)-1)<<n-h,g=h),e[l]=u<m?o+u*a:s}return e},n={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(t){for(var e=65535,n=65535,r=t.length,i=Math.floor(r/2),o=0;i;){var a=i>=359?359:i;i-=a;do{e+=t[o++]<<8,n+=e+=t[o++]}while(--a);e=(65535&e)+(e>>>16),n=(65535&n)+(n>>>16)}return 1&r&&(n+=e+=t[o]<<8),((n=(65535&n)+(n>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(t,e){var n=e.ptr,r=new Uint8Array(t,n,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,r),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;n+=6;var o,a=new DataView(t,n,8),s=a.getInt32(0,!0);if(i.fileVersion=s,n+=4,s>=3&&(i.checksum=a.getUint32(4,!0),n+=4),a=new DataView(t,n,12),i.height=a.getUint32(0,!0),i.width=a.getUint32(4,!0),n+=8,s>=4?(i.numDims=a.getUint32(8,!0),n+=4):i.numDims=1,a=new DataView(t,n,40),i.numValidPixel=a.getUint32(0,!0),i.microBlockSize=a.getInt32(4,!0),i.blobSize=a.getInt32(8,!0),i.imageType=a.getInt32(12,!0),i.maxZError=a.getFloat64(16,!0),i.zMin=a.getFloat64(24,!0),i.zMax=a.getFloat64(32,!0),n+=40,e.headerInfo=i,e.ptr=n,s>=3&&(o=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(t,n-o,i.blobSize-14))!==i.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(t,e){var n=e.headerInfo,r=this.getDataTypeArray(n.imageType),i=n.numDims*this.getDataTypeSize(n.imageType),o=this.readSubArray(t,e.ptr,r,i),a=this.readSubArray(t,e.ptr+i,r,i);e.ptr+=2*i;var s,l=!0;for(s=0;s<n.numDims;s++)if(o[s]!==a[s]){l=!1;break}return n.minValues=o,n.maxValues=a,l},readSubArray:function(t,e,n,r){var i;if(n===Uint8Array)i=new Uint8Array(t,e,r);else{var o=new ArrayBuffer(r);new Uint8Array(o).set(new Uint8Array(t,e,r)),i=new n(o)}return i},readMask:function(t,e){var n,r,i=e.ptr,o=e.headerInfo,a=o.width*o.height,s=o.numValidPixel,l=new DataView(t,i,4),u={};if(u.numBytes=l.getUint32(0,!0),i+=4,(0===s||a===s)&&0!==u.numBytes)throw"invalid mask";if(0===s)n=new Uint8Array(Math.ceil(a/8)),u.bitset=n,r=new Uint8Array(a),e.pixels.resultMask=r,i+=u.numBytes;else if(u.numBytes>0){n=new Uint8Array(Math.ceil(a/8));var c=(l=new DataView(t,i,u.numBytes)).getInt16(0,!0),h=2,f=0,p=0;do{if(c>0)for(;c--;)n[f++]=l.getUint8(h++);else for(p=l.getUint8(h++),c=-c;c--;)n[f++]=p;c=l.getInt16(h,!0),h+=2}while(h<u.numBytes);if(-32768!==c||f<n.length)throw"Unexpected end of mask RLE encoding";r=new Uint8Array(a);var d=0,g=0;for(g=0;g<a;g++)7&g?(d=n[g>>3],d<<=7&g):d=n[g>>3],128&d&&(r[g]=1);e.pixels.resultMask=r,u.bitset=n,i+=u.numBytes}return e.ptr=i,e.mask=u,!0},readDataOneSweep:function(t,e,r,i){var o,a=e.ptr,s=e.headerInfo,l=s.numDims,u=s.width*s.height,c=s.imageType,h=s.numValidPixel*n.getDataTypeSize(c)*l,f=e.pixels.resultMask;if(r===Uint8Array)o=new Uint8Array(t,a,h);else{var p=new ArrayBuffer(h);new Uint8Array(p).set(new Uint8Array(t,a,h)),o=new r(p)}if(o.length===u*l)e.pixels.resultPixels=i?n.swapDimensionOrder(o,u,l,r,!0):o;else{e.pixels.resultPixels=new r(u*l);var d=0,g=0,m=0,v=0;if(l>1){if(i){for(g=0;g<u;g++)if(f[g])for(v=g,m=0;m<l;m++,v+=u)e.pixels.resultPixels[v]=o[d++]}else for(g=0;g<u;g++)if(f[g])for(v=g*l,m=0;m<l;m++)e.pixels.resultPixels[v+m]=o[d++]}else for(g=0;g<u;g++)f[g]&&(e.pixels.resultPixels[g]=o[d++])}return a+=h,e.ptr=a,!0},readHuffmanTree:function(t,e){var i=this.HUFFMAN_LUT_BITS_MAX,o=new DataView(t,e.ptr,16);if(e.ptr+=16,o.getInt32(0,!0)<2)throw"unsupported Huffman version";var a=o.getInt32(4,!0),s=o.getInt32(8,!0),l=o.getInt32(12,!0);if(s>=l)return!1;var u=new Uint32Array(l-s);n.decodeBits(t,e,u);var c,h,f,p,d=[];for(c=s;c<l;c++)d[h=c-(c<a?0:a)]={first:u[c-s],second:null};var g=t.byteLength-e.ptr,m=Math.ceil(g/4),v=new ArrayBuffer(4*m);new Uint8Array(v).set(new Uint8Array(t,e.ptr,g));var y,b=new Uint32Array(v),w=0,x=0;for(y=b[0],c=s;c<l;c++)(p=d[h=c-(c<a?0:a)].first)>0&&(d[h].second=y<<w>>>32-p,32-w>=p?32===(w+=p)&&(w=0,y=b[++x]):(w+=p-32,y=b[++x],d[h].second|=y>>>32-w));var S,_=0,k=new r;for(c=0;c<d.length;c++)void 0!==d[c]&&(_=Math.max(_,d[c].first));S=_>=i?i:_;var E,M,T,O,P,C=[];for(c=s;c<l;c++)if((p=d[h=c-(c<a?0:a)].first)>0)if(E=[p,h],p<=S)for(M=d[h].second<<S-p,T=1<<S-p,f=0;f<T;f++)C[M|f]=E;else for(M=d[h].second,P=k,O=p-1;O>=0;O--)M>>>O&1?(P.right||(P.right=new r),P=P.right):(P.left||(P.left=new r),P=P.left),0!==O||P.val||(P.val=E[1]);return{decodeLut:C,numBitsLUTQick:S,numBitsLUT:_,tree:k,stuffedData:b,srcPtr:x,bitPos:w}},readHuffman:function(t,e,r,i){var o,a,s,l,u,c,h,f,p,d=e.headerInfo.numDims,g=e.headerInfo.height,m=e.headerInfo.width,v=m*g,y=this.readHuffmanTree(t,e),b=y.decodeLut,w=y.tree,x=y.stuffedData,S=y.srcPtr,_=y.bitPos,k=y.numBitsLUTQick,E=y.numBitsLUT,M=0===e.headerInfo.imageType?128:0,T=e.pixels.resultMask,O=0;_>0&&(S++,_=0);var P,C=x[S],I=1===e.encodeMode,A=new r(v*d),L=A;if(d<2||I){for(P=0;P<d;P++)if(d>1&&(L=new r(A.buffer,v*P,v),O=0),e.headerInfo.numValidPixel===m*g)for(f=0,c=0;c<g;c++)for(h=0;h<m;h++,f++){if(a=0,u=l=C<<_>>>32-k,32-_<k&&(u=l|=x[S+1]>>>64-_-k),b[u])a=b[u][1],_+=b[u][0];else for(u=l=C<<_>>>32-E,32-_<E&&(u=l|=x[S+1]>>>64-_-E),o=w,p=0;p<E;p++)if(!(o=l>>>E-p-1&1?o.right:o.left).left&&!o.right){a=o.val,_=_+p+1;break}_>=32&&(_-=32,C=x[++S]),s=a-M,I?(s+=h>0?O:c>0?L[f-m]:O,s&=255,L[f]=s,O=s):L[f]=s}else for(f=0,c=0;c<g;c++)for(h=0;h<m;h++,f++)if(T[f]){if(a=0,u=l=C<<_>>>32-k,32-_<k&&(u=l|=x[S+1]>>>64-_-k),b[u])a=b[u][1],_+=b[u][0];else for(u=l=C<<_>>>32-E,32-_<E&&(u=l|=x[S+1]>>>64-_-E),o=w,p=0;p<E;p++)if(!(o=l>>>E-p-1&1?o.right:o.left).left&&!o.right){a=o.val,_=_+p+1;break}_>=32&&(_-=32,C=x[++S]),s=a-M,I?(h>0&&T[f-1]?s+=O:c>0&&T[f-m]?s+=L[f-m]:s+=O,s&=255,L[f]=s,O=s):L[f]=s}}else for(f=0,c=0;c<g;c++)for(h=0;h<m;h++)if(f=c*m+h,!T||T[f])for(P=0;P<d;P++,f+=v){if(a=0,u=l=C<<_>>>32-k,32-_<k&&(u=l|=x[S+1]>>>64-_-k),b[u])a=b[u][1],_+=b[u][0];else for(u=l=C<<_>>>32-E,32-_<E&&(u=l|=x[S+1]>>>64-_-E),o=w,p=0;p<E;p++)if(!(o=l>>>E-p-1&1?o.right:o.left).left&&!o.right){a=o.val,_=_+p+1;break}_>=32&&(_-=32,C=x[++S]),s=a-M,L[f]=s}e.ptr=e.ptr+4*(S+1)+(_>0?4:0),e.pixels.resultPixels=A,d>1&&!i&&(e.pixels.resultPixels=n.swapDimensionOrder(A,v,d,r))},decodeBits:function(n,r,i,o,a){var s=r.headerInfo,l=s.fileVersion,u=0,c=n.byteLength-r.ptr>=5?5:n.byteLength-r.ptr,h=new DataView(n,r.ptr,c),f=h.getUint8(0);u++;var p=f>>6,d=0===p?4:3-p,g=(32&f)>0,m=31&f,v=0;if(1===d)v=h.getUint8(u),u++;else if(2===d)v=h.getUint16(u,!0),u+=2;else{if(4!==d)throw"Invalid valid pixel count type";v=h.getUint32(u,!0),u+=4}var y,b,w,x,S,_,k,E,M,T=2*s.maxZError,O=s.numDims>1?s.maxValues[a]:s.zMax;if(g){for(r.counter.lut++,E=h.getUint8(u),u++,x=Math.ceil((E-1)*m/8),S=Math.ceil(x/4),b=new ArrayBuffer(4*S),w=new Uint8Array(b),r.ptr+=u,w.set(new Uint8Array(n,r.ptr,x)),k=new Uint32Array(b),r.ptr+=x,M=0;E-1>>>M;)M++;x=Math.ceil(v*M/8),S=Math.ceil(x/4),b=new ArrayBuffer(4*S),(w=new Uint8Array(b)).set(new Uint8Array(n,r.ptr,x)),y=new Uint32Array(b),r.ptr+=x,_=l>=3?function(t,e,n,r,i,o){var a,s=(1<<e)-1,l=0,u=0,c=0,h=0,f=0,p=0,d=[],g=Math.ceil((o-r)/i);for(u=0;u<n;u++)0===h&&(a=t[l++],h=32,p=0),h>=e?(f=a>>>p&s,h-=e,p+=e):(f=a>>>p&s,h=32-(c=e-h),f|=((a=t[l++])&(1<<c)-1)<<e-c,p=c),d[u]=f<g?r+f*i:o;return d.unshift(r),d}(k,m,E-1,o,T,O):function(t,e,n,r,i,o){var a,s=(1<<e)-1,l=0,u=0,c=0,h=0,f=0,p=[],d=4*t.length-Math.ceil(e*n/8);t[t.length-1]<<=8*d;var g=Math.ceil((o-r)/i);for(u=0;u<n;u++)0===h&&(a=t[l++],h=32),h>=e?(f=a>>>h-e&s,h-=e):(f=(a&s)<<(c=e-h)&s,f+=(a=t[l++])>>>(h=32-c)),p[u]=f<g?r+f*i:o;return p.unshift(r),p}(k,m,E-1,o,T,O),l>=3?e(y,i,M,v,_):t(y,i,M,v,_)}else r.counter.bitstuffer++,M=m,r.ptr+=u,M>0&&(x=Math.ceil(v*M/8),S=Math.ceil(x/4),b=new ArrayBuffer(4*S),(w=new Uint8Array(b)).set(new Uint8Array(n,r.ptr,x)),y=new Uint32Array(b),r.ptr+=x,l>=3?null==o?function(t,e,n,r){var i,o,a,s,l=(1<<n)-1,u=0,c=0,h=0;for(i=0;i<r;i++)0===c&&(a=t[u++],c=32,h=0),c>=n?(o=a>>>h&l,c-=n,h+=n):(o=a>>>h&l,c=32-(s=n-c),o|=((a=t[u++])&(1<<s)-1)<<n-s,h=s),e[i]=o}(y,i,M,v):e(y,i,M,v,!1,o,T,O):null==o?function(t,e,n,r){var i,o,a,s,l=(1<<n)-1,u=0,c=0,h=4*t.length-Math.ceil(n*r/8);for(t[t.length-1]<<=8*h,i=0;i<r;i++)0===c&&(a=t[u++],c=32),c>=n?(o=a>>>c-n&l,c-=n):(o=(a&l)<<(s=n-c)&l,o+=(a=t[u++])>>>(c=32-s)),e[i]=o}(y,i,M,v):t(y,i,M,v,!1,o,T,O))},readTiles:function(t,e,r,i){var o=e.headerInfo,a=o.width,s=o.height,l=a*s,u=o.microBlockSize,c=o.imageType,h=n.getDataTypeSize(c),f=Math.ceil(a/u),p=Math.ceil(s/u);e.pixels.numBlocksY=p,e.pixels.numBlocksX=f,e.pixels.ptr=0;var d,g,m,v,y,b,w,x,S,_,k=0,E=0,M=0,T=0,O=0,P=0,C=0,I=0,A=0,L=0,R=0,j=0,N=0,$=0,F=0,D=new r(u*u),G=s%u||u,U=a%u||u,B=o.numDims,z=e.pixels.resultMask,V=e.pixels.resultPixels,q=o.fileVersion>=5?14:15,H=o.zMax;for(M=0;M<p;M++)for(O=M!==p-1?u:G,T=0;T<f;T++)for(L=M*a*u+T*u,R=a-(P=T!==f-1?u:U),x=0;x<B;x++){if(B>1?(_=V,L=M*a*u+T*u,V=new r(e.pixels.resultPixels.buffer,l*x*h,l),H=o.maxValues[x]):_=null,C=t.byteLength-e.ptr,g={},F=0,I=(d=new DataView(t,e.ptr,Math.min(10,C))).getUint8(0),F++,S=o.fileVersion>=5?4&I:0,A=I>>6&255,(I>>2&q)!=(T*u>>3&q))throw"integrity issue";if(S&&0===x)throw"integrity issue";if((y=3&I)>3)throw e.ptr+=F,"Invalid block encoding ("+y+")";if(2!==y)if(0===y){if(S)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=F,j=(j=O*P*h)<(N=t.byteLength-e.ptr)?j:N,m=new ArrayBuffer(j%h==0?j:j+h-j%h),new Uint8Array(m).set(new Uint8Array(t,e.ptr,j)),v=new r(m),$=0,z)for(k=0;k<O;k++){for(E=0;E<P;E++)z[L]&&(V[L]=v[$++]),L++;L+=R}else for(k=0;k<O;k++){for(E=0;E<P;E++)V[L++]=v[$++];L+=R}e.ptr+=$*h}else if(b=n.getDataTypeUsed(S&&c<6?4:c,A),w=n.getOnePixel(g,F,b,d),F+=n.getDataTypeSize(b),3===y)if(e.ptr+=F,e.counter.constantoffset++,z)for(k=0;k<O;k++){for(E=0;E<P;E++)z[L]&&(V[L]=S?Math.min(H,_[L]+w):w),L++;L+=R}else for(k=0;k<O;k++){for(E=0;E<P;E++)V[L]=S?Math.min(H,_[L]+w):w,L++;L+=R}else if(e.ptr+=F,n.decodeBits(t,e,D,w,x),F=0,S)if(z)for(k=0;k<O;k++){for(E=0;E<P;E++)z[L]&&(V[L]=D[F++]+_[L]),L++;L+=R}else for(k=0;k<O;k++){for(E=0;E<P;E++)V[L]=D[F++]+_[L],L++;L+=R}else if(z)for(k=0;k<O;k++){for(E=0;E<P;E++)z[L]&&(V[L]=D[F++]),L++;L+=R}else for(k=0;k<O;k++){for(E=0;E<P;E++)V[L++]=D[F++];L+=R}else{if(S)if(z)for(k=0;k<O;k++)for(E=0;E<P;E++)z[L]&&(V[L]=_[L]),L++;else for(k=0;k<O;k++)for(E=0;E<P;E++)V[L]=_[L],L++;e.counter.constant++,e.ptr+=F}}B>1&&!i&&(e.pixels.resultPixels=n.swapDimensionOrder(e.pixels.resultPixels,l,B,r))},formatFileInfo:function(t){return{fileIdentifierString:t.headerInfo.fileIdentifierString,fileVersion:t.headerInfo.fileVersion,imageType:t.headerInfo.imageType,height:t.headerInfo.height,width:t.headerInfo.width,numValidPixel:t.headerInfo.numValidPixel,microBlockSize:t.headerInfo.microBlockSize,blobSize:t.headerInfo.blobSize,maxZError:t.headerInfo.maxZError,pixelType:n.getPixelType(t.headerInfo.imageType),eofOffset:t.eofOffset,mask:t.mask?{numBytes:t.mask.numBytes}:null,pixels:{numBlocksX:t.pixels.numBlocksX,numBlocksY:t.pixels.numBlocksY,maxValue:t.headerInfo.zMax,minValue:t.headerInfo.zMin,noDataValue:t.noDataValue}}},constructConstantSurface:function(t,e){var n=t.headerInfo.zMax,r=t.headerInfo.zMin,i=t.headerInfo.maxValues,o=t.headerInfo.numDims,a=t.headerInfo.height*t.headerInfo.width,s=0,l=0,u=0,c=t.pixels.resultMask,h=t.pixels.resultPixels;if(c)if(o>1){if(e)for(s=0;s<o;s++)for(u=s*a,n=i[s],l=0;l<a;l++)c[l]&&(h[u+l]=n);else for(l=0;l<a;l++)if(c[l])for(u=l*o,s=0;s<o;s++)h[u+o]=i[s]}else for(l=0;l<a;l++)c[l]&&(h[l]=n);else if(o>1&&r!==n)if(e)for(s=0;s<o;s++)for(u=s*a,n=i[s],l=0;l<a;l++)h[u+l]=n;else for(l=0;l<a;l++)for(u=l*o,s=0;s<o;s++)h[u+s]=i[s];else for(l=0;l<a*o;l++)h[l]=n},getDataTypeArray:function(t){var e;switch(t){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:default:e=Float32Array;break;case 7:e=Float64Array}return e},getPixelType:function(t){var e;switch(t){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:default:e="F32";break;case 7:e="F64"}return e},isValidPixelValue:function(t,e){if(null==e)return!1;var n;switch(t){case 0:n=e>=-128&&e<=127;break;case 1:n=e>=0&&e<=255;break;case 2:n=e>=-32768&&e<=32767;break;case 3:n=e>=0&&e<=65536;break;case 4:n=e>=-2147483648&&e<=2147483647;break;case 5:n=e>=0&&e<=4294967296;break;case 6:n=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:n=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:n=!1}return n},getDataTypeSize:function(t){var e=0;switch(t){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=t}return e},getDataTypeUsed:function(t,e){var n=t;switch(t){case 2:case 4:n=t-e;break;case 3:case 5:n=t-2*e;break;case 6:n=0===e?t:1===e?2:1;break;case 7:n=0===e?t:t-2*e+1;break;default:n=t}return n},getOnePixel:function(t,e,n,r){var i=0;switch(n){case 0:i=r.getInt8(e);break;case 1:i=r.getUint8(e);break;case 2:i=r.getInt16(e,!0);break;case 3:i=r.getUint16(e,!0);break;case 4:i=r.getInt32(e,!0);break;case 5:i=r.getUInt32(e,!0);break;case 6:i=r.getFloat32(e,!0);break;case 7:i=r.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return i},swapDimensionOrder:function(t,e,n,r,i){var o=0,a=0,s=0,l=0,u=t;if(n>1)if(u=new r(e*n),i)for(o=0;o<e;o++)for(l=o,s=0;s<n;s++,l+=e)u[l]=t[a++];else for(o=0;o<e;o++)for(l=o,s=0;s<n;s++,l+=e)u[a++]=t[l];return u}},r=function(t,e,n){this.val=t,this.left=e,this.right=n};return{decode:function(t,e){var r=(e=e||{}).noDataValue,i=0,o={};if(o.ptr=e.inputOffset||0,o.pixels={},n.readHeaderInfo(t,o)){var a=o.headerInfo,s=a.fileVersion,l=n.getDataTypeArray(a.imageType);if(s>5)throw"unsupported lerc version 2."+s;n.readMask(t,o),a.numValidPixel===a.width*a.height||o.pixels.resultMask||(o.pixels.resultMask=e.maskData);var u=a.width*a.height;o.pixels.resultPixels=new l(u*a.numDims),o.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var c,h=!e.returnPixelInterleavedDims;if(0!==a.numValidPixel)if(a.zMax===a.zMin)n.constructConstantSurface(o,h);else if(s>=4&&n.checkMinMaxRanges(t,o))n.constructConstantSurface(o,h);else{var f=new DataView(t,o.ptr,2),p=f.getUint8(0);if(o.ptr++,p)n.readDataOneSweep(t,o,l,h);else if(s>1&&a.imageType<=1&&Math.abs(a.maxZError-.5)<1e-5){var d=f.getUint8(1);if(o.ptr++,o.encodeMode=d,d>2||s<4&&d>1)throw"Invalid Huffman flag "+d;d?n.readHuffman(t,o,l,h):n.readTiles(t,o,l,h)}else n.readTiles(t,o,l,h)}o.eofOffset=o.ptr,e.inputOffset?(c=o.headerInfo.blobSize+e.inputOffset-o.ptr,Math.abs(c)>=1&&(o.eofOffset=e.inputOffset+o.headerInfo.blobSize)):(c=o.headerInfo.blobSize-o.ptr,Math.abs(c)>=1&&(o.eofOffset=o.headerInfo.blobSize));var g={width:a.width,height:a.height,pixelData:o.pixels.resultPixels,minValue:a.zMin,maxValue:a.zMax,validPixelCount:a.numValidPixel,dimCount:a.numDims,dimStats:{minValues:a.minValues,maxValues:a.maxValues},maskData:o.pixels.resultMask};if(o.pixels.resultMask&&n.isValidPixelValue(a.imageType,r)){var m=o.pixels.resultMask;for(i=0;i<u;i++)m[i]||(g.pixelData[i]=r);g.noDataValue=r}return o.noDataValue=r,e.returnFileInfo&&(g.fileInfo=n.formatFileInfo(o)),g}},getBandCount:function(t){for(var e=0,r=0,i={ptr:0,pixels:{}};r<t.byteLength-58;)n.readHeaderInfo(t,i),r+=i.headerInfo.blobSize,e++,i.ptr=r;return e}}}(),u=new ArrayBuffer(4),c=new Uint8Array(u),new Uint32Array(u)[0]=1,p=1===c[0],d={decode:function(t,e){if(!p)throw"Big endian system is not supported.";var n,r,i=(e=e||{}).inputOffset||0,o=new Uint8Array(t,i,10),a=String.fromCharCode.apply(null,o);if("CntZImage"===a.trim())n=h,r=1;else{if("Lerc2"!==a.substring(0,5))throw"Unexpected file identifier string: "+a;n=f,r=2}for(var s,l,u,c,d,g,m=0,v=t.byteLength-10,y=[],b={width:0,height:0,pixels:[],pixelType:e.pixelType,mask:null,statistics:[]},w=0;i<v;){var x=n.decode(t,{inputOffset:i,encodedMaskData:s,maskData:u,returnMask:0===m,returnEncodedMask:0===m,returnFileInfo:!0,returnPixelInterleavedDims:e.returnPixelInterleavedDims,pixelType:e.pixelType||null,noDataValue:e.noDataValue||null});i=x.fileInfo.eofOffset,u=x.maskData,0===m&&(s=x.encodedMaskData,b.width=x.width,b.height=x.height,b.dimCount=x.dimCount||1,b.pixelType=x.pixelType||x.fileInfo.pixelType,b.mask=u),r>1&&(u&&y.push(u),x.fileInfo.mask&&x.fileInfo.mask.numBytes>0&&w++),m++,b.pixels.push(x.pixelData),b.statistics.push({minValue:x.minValue,maxValue:x.maxValue,noDataValue:x.noDataValue,dimStats:x.dimStats})}if(r>1&&w>1){for(g=b.width*b.height,b.bandMasks=y,(u=new Uint8Array(g)).set(y[0]),c=1;c<y.length;c++)for(l=y[c],d=0;d<g;d++)u[d]=u[d]&l[d];b.maskData=u}return b}},void 0===(n=function(){return d}.apply(e,[]))||(t.exports=n)},6875:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(8692),a=Symbol("max"),s=Symbol("length"),l=Symbol("lengthCalculator"),u=Symbol("allowStale"),c=Symbol("maxAge"),h=Symbol("dispose"),f=Symbol("noDisposeOnSet"),p=Symbol("lruList"),d=Symbol("cache"),g=Symbol("updateAgeOnGet"),m=function(){return 1},v=function(){function t(e){if(r(this,t),"number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[a]=e.max||1/0;var n=e.length||m;if(this[l]="function"!=typeof n?m:n,this[u]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[h]=e.dispose,this[f]=e.noDisposeOnSet||!1,this[g]=e.updateAgeOnGet||!1,this.reset()}var e,n;return e=t,(n=[{key:"max",get:function(){return this[a]},set:function(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[a]=t||1/0,w(this)}},{key:"allowStale",get:function(){return this[u]},set:function(t){this[u]=!!t}},{key:"maxAge",get:function(){return this[c]},set:function(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[c]=t,w(this)}},{key:"lengthCalculator",get:function(){return this[l]},set:function(t){var e=this;"function"!=typeof t&&(t=m),t!==this[l]&&(this[l]=t,this[s]=0,this[p].forEach((function(t){t.length=e[l](t.value,t.key),e[s]+=t.length}))),w(this)}},{key:"length",get:function(){return this[s]}},{key:"itemCount",get:function(){return this[p].length}},{key:"rforEach",value:function(t,e){e=e||this;for(var n=this[p].tail;null!==n;){var r=n.prev;_(this,t,n,e),n=r}}},{key:"forEach",value:function(t,e){e=e||this;for(var n=this[p].head;null!==n;){var r=n.next;_(this,t,n,e),n=r}}},{key:"keys",value:function(){return this[p].toArray().map((function(t){return t.key}))}},{key:"values",value:function(){return this[p].toArray().map((function(t){return t.value}))}},{key:"reset",value:function(){var t=this;this[h]&&this[p]&&this[p].length&&this[p].forEach((function(e){return t[h](e.key,e.value)})),this[d]=new Map,this[p]=new o,this[s]=0}},{key:"dump",value:function(){var t=this;return this[p].map((function(e){return!b(t,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}})).toArray().filter((function(t){return t}))}},{key:"dumpLru",value:function(){return this[p]}},{key:"set",value:function(t,e,n){if((n=n||this[c])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,i=this[l](e,t);if(this[d].has(t)){if(i>this[a])return x(this,this[d].get(t)),!1;var o=this[d].get(t).value;return this[h]&&(this[f]||this[h](t,o.value)),o.now=r,o.maxAge=n,o.value=e,this[s]+=i-o.length,o.length=i,this.get(t),w(this),!0}var u=new S(t,e,i,r,n);return u.length>this[a]?(this[h]&&this[h](t,e),!1):(this[s]+=u.length,this[p].unshift(u),this[d].set(t,this[p].head),w(this),!0)}},{key:"has",value:function(t){if(!this[d].has(t))return!1;var e=this[d].get(t).value;return!b(this,e)}},{key:"get",value:function(t){return y(this,t,!0)}},{key:"peek",value:function(t){return y(this,t,!1)}},{key:"pop",value:function(){var t=this[p].tail;return t?(x(this,t),t.value):null}},{key:"del",value:function(t){x(this,this[d].get(t))}},{key:"load",value:function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var o=i-e;o>0&&this.set(r.k,r.v,o)}}}},{key:"prune",value:function(){var t=this;this[d].forEach((function(e,n){return y(t,n,!1)}))}}])&&i(e.prototype,n),t}(),y=function(t,e,n){var r=t[d].get(e);if(r){var i=r.value;if(b(t,i)){if(x(t,r),!t[u])return}else n&&(t[g]&&(r.value.now=Date.now()),t[p].unshiftNode(r));return i.value}},b=function(t,e){if(!e||!e.maxAge&&!t[c])return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[c]&&n>t[c]},w=function(t){if(t[s]>t[a])for(var e=t[p].tail;t[s]>t[a]&&null!==e;){var n=e.prev;x(t,e),e=n}},x=function(t,e){if(e){var n=e.value;t[h]&&t[h](n.key,n.value),t[s]-=n.length,t[d].delete(n.key),t[p].removeNode(e)}},S=function t(e,n,i,o,a){r(this,t),this.key=e,this.value=n,this.length=i,this.now=o,this.maxAge=a||0},_=function(t,e,n,r){var i=n.value;b(t,i)&&(x(t,n),t[u]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};t.exports=v},1063:function(t){var e={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},n=" ",r=/(italic|oblique)$/i,i={};t.exports=function(t,o,a){var s=i[t];if(!s){Array.isArray(t)||(t=[t]);for(var l=400,u="normal",c=[],h=0,f=t.length;h<f;++h){var p=t[h].split(" "),d=p[p.length-1].toLowerCase();for(var g in"normal"==d||"italic"==d||"oblique"==d?(u=d,p.pop(),d=p[p.length-1].toLowerCase()):r.test(d)&&(d=d.replace(r,""),u=p[p.length-1].replace(d,"")),e)if(d==g||d==g.replace("-","")||d==g.replace("-",n)){l=e[g],p.pop();break}"number"==typeof d&&(l=d);var m=p.join(n).replace("Klokantech Noto Sans","Noto Sans");-1!==m.indexOf(n)&&(m='"'+m+'"'),c.push(m)}s=i[t]=[u,l,c]}return s[0]+n+s[1]+n+o+"px"+(a?"/"+a:"")+n+s[2]}},7937:function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=1e3,r=60*n,i=60*r,o=24*i;function a(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,s){s=s||{};var l=e(t);if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===l&&isFinite(t))return s.long?function(t){var e=Math.abs(t);return e>=o?a(t,e,o,"day"):e>=i?a(t,e,i,"hour"):e>=r?a(t,e,r,"minute"):e>=n?a(t,e,n,"second"):t+" ms"}(t):function(t){var e=Math.abs(t);return e>=o?Math.round(t/o)+"d":e>=i?Math.round(t/i)+"h":e>=r?Math.round(t/r)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},9694:function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,{Observable:function(){return C},Subject:function(){return H},filter:function(){return A},flatMap:function(){return j},interval:function(){return N},map:function(){return $},merge:function(){return F},multicast:function(){return W},scan:function(){return K},unsubscribe:function(){return I}});var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseObserver=e,this._pendingPromises=new Set}var e,n;return e=t,(n=[{key:"complete",value:function(){var t=this;Promise.all(this._pendingPromises).then((function(){return t._baseObserver.complete()})).catch((function(e){return t._baseObserver.error(e)}))}},{key:"error",value:function(t){this._baseObserver.error(t)}},{key:"schedule",value:function(t){var e=this,n=Promise.all(this._pendingPromises),i=[],o=function(t){return i.push(t)},a=Promise.resolve().then((function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}(e,void 0,void 0,regeneratorRuntime.mark((function e(){var s,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return e.next=4,t(o);case 4:this._pendingPromises.delete(a),s=r(i);try{for(s.s();!(l=s.n()).done;)u=l.value,this._baseObserver.next(u)}catch(t){s.e(t)}finally{s.f()}case 7:case"end":return e.stop()}}),e,this)})))})).catch((function(t){e._pendingPromises.delete(a),e._baseObserver.error(t)}));this._pendingPromises.add(a)}}])&&o(e.prototype,n),t}(),s=function(){return"function"==typeof Symbol},l=function(t){return s()&&Boolean(Symbol[t])},u=function(t){return l(t)?Symbol[t]:"@@"+t};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}l("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));var m=u("iterator"),v=u("observable"),y=u("species");function b(t,e){var n=t[e];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function w(t){var e=t.constructor;return void 0!==e&&null===(e=e[y])&&(e=void 0),void 0!==e?e:P}function x(t){x.log?x.log(t):setTimeout((function(){throw t}),0)}function S(t){Promise.resolve().then((function(){try{t()}catch(t){x(t)}}))}function _(t){var e=t._cleanup;if(void 0!==e&&(t._cleanup=void 0,e))try{if("function"==typeof e)e();else{var n=b(e,"unsubscribe");n&&n.call(e)}}catch(t){x(t)}}function k(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function E(t,e,n){t._state="running";var r=t._observer;try{var i=r?b(r,e):void 0;switch(e){case"next":i&&i.call(r,n);break;case"error":if(k(t),!i)throw n;i.call(r,n);break;case"complete":k(t),i&&i.call(r)}}catch(t){x(t)}"closed"===t._state?_(t):"running"===t._state&&(t._state="ready")}function M(t,e,n){if("closed"!==t._state)return"buffering"===t._state?(t._queue=t._queue||[],void t._queue.push({type:e,value:n})):"ready"!==t._state?(t._state="buffering",t._queue=[{type:e,value:n}],void S((function(){return function(t){var e=t._queue;if(e){t._queue=void 0,t._state="ready";var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(E(t,i.type,i.value),"closed"===t._state)break}}catch(t){r.e(t)}finally{r.f()}}}(t)}))):void E(t,e,n)}var T=function(){function t(e,n){h(this,t),this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var r=new O(this);try{this._cleanup=n.call(void 0,r)}catch(t){r.error(t)}"initializing"===this._state&&(this._state="ready")}return p(t,[{key:"closed",get:function(){return"closed"===this._state}},{key:"unsubscribe",value:function(){"closed"!==this._state&&(k(this),_(this))}}]),t}(),O=function(){function t(e){h(this,t),this._subscription=e}return p(t,[{key:"closed",get:function(){return"closed"===this._subscription._state}},{key:"next",value:function(t){M(this._subscription,"next",t)}},{key:"error",value:function(t){M(this._subscription,"error",t)}},{key:"complete",value:function(){M(this._subscription,"complete")}}]),t}(),P=function(t){function e(t){if(h(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return p(e,[{key:"subscribe",value:function(t,e,n){return"object"===c(t)&&null!==t||(t={next:t,error:e,complete:n}),new T(t,this._subscriber)}},{key:"pipe",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=[t].concat(r);o<a.length;o++){var s=a[o];e=s(e)}return e}},{key:"tap",value:function(t,n,r){var i=this,o="object"!==c(t)||null===t?{next:t,error:n,complete:r}:t;return new e((function(t){return i.subscribe({next:function(e){o.next&&o.next(e),t.next(e)},error:function(e){o.error&&o.error(e),t.error(e)},complete:function(){o.complete&&o.complete(),t.complete()},start:function(t){o.start&&o.start(t)}})}))}},{key:"forEach",value:function(t){var e=this;return new Promise((function(n,r){if("function"==typeof t)var i=e.subscribe({next:function(e){try{t(e,o)}catch(t){r(t),i.unsubscribe()}},error:function(t){r(t)},complete:function(){n(void 0)}});else r(new TypeError(t+" is not a function"));function o(){i.unsubscribe(),n(void 0)}}))}},{key:"map",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(w(this))((function(n){return e.subscribe({next:function(e){var r=e;try{r=t(e)}catch(t){return n.error(t)}n.next(r)},error:function(t){n.error(t)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(w(this))((function(n){return e.subscribe({next:function(e){try{if(!t(e))return}catch(t){return n.error(t)}n.next(e)},error:function(t){n.error(t)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(t,e){var n=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var r=w(this),i=arguments.length>1,o=!1,a=e;return new r((function(e){return n.subscribe({next:function(n){var r=!o;if(o=!0,!r||i)try{a=t(a,n)}catch(t){return e.error(t)}else a=n},error:function(t){e.error(t)},complete:function(){if(!o&&!i)return e.error(new TypeError("Cannot reduce an empty sequence"));e.next(a),e.complete()}})}))}},{key:"concat",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=w(this);return new i((function(e){var r,o=0;return function t(a){r=a.subscribe({next:function(t){e.next(t)},error:function(t){e.error(t)},complete:function(){o===n.length?(r=void 0,e.complete()):t(i.from(n[o++]))}})}(t),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=w(this);return new n((function(r){var i=[],o=e.subscribe({next:function(e){var o;if(t)try{o=t(e)}catch(t){return r.error(t)}else o=e;var s=n.from(o).subscribe({next:function(t){r.next(t)},error:function(t){r.error(t)},complete:function(){var t=i.indexOf(s);t>=0&&i.splice(t,1),a()}});i.push(s)},error:function(t){r.error(t)},complete:function(){a()}});function a(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(t){return t.unsubscribe()})),o.unsubscribe()}}))}},{key:t,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=b(t,v);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return function(t){return t instanceof P}(i)&&i.constructor===n?i:new n((function(t){return i.subscribe(t)}))}if(l("iterator")){var o=b(t,m);if(o)return new n((function(e){S((function(){if(!e.closed){var n,r=d(o.call(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.next(i),e.closed)return}}catch(t){r.e(t)}finally{r.f()}e.complete()}}))}))}if(Array.isArray(t))return new n((function(e){S((function(){if(!e.closed){var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.next(i),e.closed)return}}catch(t){r.e(t)}finally{r.f()}e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="function"==typeof this?this:e;return new i((function(t){S((function(){if(!t.closed){var e,r=d(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(t.next(i),t.closed)return}}catch(t){r.e(t)}finally{r.f()}t.complete()}}))}))}},{key:y,get:function(){return this}}]),e}((Symbol.observable,v));s()&&Object.defineProperty(P,Symbol("extensions"),{value:{symbol:v,hostReportError:x},configurable:!0});var C=P,I=function(t){"function"==typeof t?t():t&&"function"==typeof t.unsubscribe&&t.unsubscribe()},A=function(t){return function(e){return new C((function(n){var r=new a(n),i=e.subscribe({complete:function(){r.complete()},error:function(t){r.error(t)},next:function(e){var n=this;r.schedule((function(r){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:if(!n.sent){n.next=4;break}r(e);case 4:case"end":return n.stop()}}),n)})))}))}});return function(){return I(i)}}))}};function L(t){return t&&l("asyncIterator")&&t[Symbol.asyncIterator]}var R=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}},j=function(t){return function(e){return new C((function(n){var r=new a(n),i=e.subscribe({complete:function(){r.complete()},error:function(t){r.error(t)},next:function(e){var n=this;r.schedule((function(r){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,a,s,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:if(!((h=a=n.sent)&&l("iterator")&&h[Symbol.iterator]||L(a))){n.next=31;break}n.prev=4,s=R(a);case 6:return n.next=8,s.next();case 8:if((u=n.sent).done){n.next=14;break}c=u.value,r(c);case 12:n.next=6;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(4),i={error:n.t0};case 19:if(n.prev=19,n.prev=20,!u||u.done||!(o=s.return)){n.next=24;break}return n.next=24,o.call(s);case 24:if(n.prev=24,!i){n.next=27;break}throw i.error;case 27:return n.finish(24);case 28:return n.finish(19);case 29:n.next=32;break;case 31:a.map((function(t){return r(t)}));case 32:case"end":return n.stop()}var h}),n,null,[[4,16,19,29],[20,,24,28]])})))}))}});return function(){return I(i)}}))}};function N(t){return new P((function(e){var n=0,r=setInterval((function(){e.next(n++)}),t);return function(){return clearInterval(r)}}))}var $=function(t){return function(e){return new C((function(n){var r=new a(n),i=e.subscribe({complete:function(){r.complete()},error:function(t){r.error(t)},next:function(e){var n=this;r.schedule((function(r){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:i=n.sent,r(i);case 4:case"end":return n.stop()}}),n)})))}))}});return function(){return I(i)}}))}},F=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?P.from([]):new P((function(t){var n=0,r=e.map((function(r){return r.subscribe({error:function(e){t.error(e),i()},next:function(e){t.next(e)},complete:function(){++n===e.length&&(t.complete(),i())}})})),i=function(){r.forEach((function(t){return I(t)}))};return i}))};function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var i=q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return V(this,n)}}(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,(function(e){return t._observers.add(e),function(){return t._observers.delete(e)}})))._observers=new Set,t}return e=i,(n=[{key:"next",value:function(t){var e,n=G(this._observers);try{for(n.s();!(e=n.n()).done;)e.value.next(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"error",value:function(t){var e,n=G(this._observers);try{for(n.s();!(e=n.n()).done;)e.value.error(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"complete",value:function(){var t,e=G(this._observers);try{for(e.s();!(t=e.n()).done;)t.value.complete()}catch(t){e.e(t)}finally{e.f()}}}])&&B(e.prototype,n),i}(C),W=function(t){var e,n=new H,r=0;return new C((function(i){e||(e=t.subscribe(n));var o=n.subscribe(i);return r++,function(){r--,o.unsubscribe(),0===r&&(I(e),e=void 0)}}))},K=function(t,e){return function(n){return new C((function(r){var i,o=0,s=new a(r),l=n.subscribe({complete:function(){s.complete()},error:function(t){s.error(t)},next:function(n){var r=this;s.schedule((function(a){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}(r,void 0,void 0,regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=0===o?void 0===e?n:e:i,r.next=3,t(s,n,o++);case 3:i=r.sent,a(i);case 5:case"end":return r.stop()}}),r)})))}))}});return function(){return I(l)}}))}}},9853:function(t,e,n){"use strict";var r=n(3534),i=n(1307),o=n(2825),a=n(9806),s=n(8021),l=n(7563),u=n(6511),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);if(this.header=new u,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(s[n])}h.prototype.push=function(t,e){var n,s,l,u,h,f=this.strm,p=this.options.chunkSize,d=this.options.dictionary,g=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&d&&(n=r.inflateSetDictionary(this.strm,d)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),u=f.next_out-l,h=o.buf2string(f.output,l),f.next_out=u,f.avail_out=p-u,u&&i.arraySet(f.output,f.output,l,u,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.rr=function(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}},1307:function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!==n(r))throw new TypeError(r+"must be non-object");for(var o in r)i(r,o)&&(t[o]=r[o])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},2825:function(t,e,n){"use strict";var r=n(1307),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,i,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,o,s=e||t.length,u=new Array(2*s);for(r=0,n=0;n<s;)if((i=t[n++])<128)u[r++]=i;else if((o=a[i])>4)u[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&t[n++],o--;o>1?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return l(u,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},7506:function(t){"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},9806:function(t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},8548:function(t){"use strict";var e=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,n,r,i){var o=e,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^n[s])];return-1^t}},6511:function(t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},2399:function(t){"use strict";t.exports=function(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x,S,_,k,E,M;n=t.state,r=t.next_in,E=t.input,i=r+(t.avail_in-5),o=t.next_out,M=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{d<15&&(p+=E[r++]<<d,d+=8,p+=E[r++]<<d,d+=8),b=g[p&v];e:for(;;){if(p>>>=w=b>>>24,d-=w,0==(w=b>>>16&255))M[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&b,(w&=15)&&(d<w&&(p+=E[r++]<<d,d+=8),x+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=E[r++]<<d,d+=8,p+=E[r++]<<d,d+=8),b=m[p&y];n:for(;;){if(p>>>=w=b>>>24,d-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=m[(65535&b)+(p&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(S=65535&b,d<(w&=15)&&(p+=E[r++]<<d,(d+=8)<w&&(p+=E[r++]<<d,d+=8)),(S+=p&(1<<w)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=w,d-=w,S>(w=o-a)){if((w=S-w)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(_=0,k=f,0===h){if(_+=u-w,w<x){x-=w;do{M[o++]=f[_++]}while(--w);_=o-S,k=M}}else if(h<w){if(_+=u+h-w,(w-=h)<x){x-=w;do{M[o++]=f[_++]}while(--w);if(_=0,h<x){x-=w=h;do{M[o++]=f[_++]}while(--w);_=o-S,k=M}}}else if(_+=h-w,w<x){x-=w;do{M[o++]=f[_++]}while(--w);_=o-S,k=M}for(;x>2;)M[o++]=k[_++],M[o++]=k[_++],M[o++]=k[_++],x-=3;x&&(M[o++]=k[_++],x>1&&(M[o++]=k[_++]))}else{_=o-S;do{M[o++]=M[_++],M[o++]=M[_++],M[o++]=M[_++],x-=3}while(x>2);x&&(M[o++]=M[_++],x>1&&(M[o++]=M[_++]))}break}}break}}while(r<i&&o<s);r-=x=d>>3,p&=(1<<(d-=x<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=d}},3534:function(t,e,n){"use strict";var r=n(1307),i=n(7506),o=n(8548),a=n(2399),s=n(1721),l=-2,u=12,c=30;function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):l}function d(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,p(t)):l}function g(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?l:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,d(t))):l}function m(t,e){var n,r;return t?(r=new f,t.state=r,r.window=null,0!==(n=g(t,e))&&(t.state=null),n):l}var v,y,b=!0;function w(t){if(b){var e;for(v=new r.Buf32(512),y=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,v,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,y,0,t.work,{bits:5}),b=!1}t.lencode=v,t.lenbits=9,t.distcode=y,t.distbits=5}function x(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=d,e.inflateReset2=g,e.inflateResetKeep=p,e.inflateInit=function(t){return m(t,15)},e.inflateInit2=m,e.inflate=function(t,e){var n,f,p,d,g,m,v,y,b,S,_,k,E,M,T,O,P,C,I,A,L,R,j,N,$=0,F=new r.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return l;(n=t.state).mode===u&&(n.mode=13),g=t.next_out,p=t.output,v=t.avail_out,d=t.next_in,f=t.input,m=t.avail_in,y=n.hold,b=n.bits,S=m,_=v,R=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(2&n.wrap&&35615===y){n.check=0,F[0]=255&y,F[1]=y>>>8&255,n.check=o(n.check,F,2,0),y=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){t.msg="incorrect header check",n.mode=c;break}if(8!=(15&y)){t.msg="unknown compression method",n.mode=c;break}if(b-=4,L=8+(15&(y>>>=4)),0===n.wbits)n.wbits=L;else if(L>n.wbits){t.msg="invalid window size",n.mode=c;break}n.dmax=1<<L,t.adler=n.check=1,n.mode=512&y?10:u,y=0,b=0;break;case 2:for(;b<16;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(n.flags=y,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=c;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=c;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(F[0]=255&y,F[1]=y>>>8&255,n.check=o(n.check,F,2,0)),y=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}n.head&&(n.head.time=y),512&n.flags&&(F[0]=255&y,F[1]=y>>>8&255,F[2]=y>>>16&255,F[3]=y>>>24&255,n.check=o(n.check,F,4,0)),y=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(F[0]=255&y,F[1]=y>>>8&255,n.check=o(n.check,F,2,0)),y=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(F[0]=255&y,F[1]=y>>>8&255,n.check=o(n.check,F,2,0)),y=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((k=n.length)>m&&(k=m),k&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,d,k,L)),512&n.flags&&(n.check=o(n.check,f,k,d)),m-=k,d+=k,n.length-=k),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break t;k=0;do{L=f[d+k++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L))}while(L&&k<m);if(512&n.flags&&(n.check=o(n.check,f,k,d)),m-=k,d+=k,L)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break t;k=0;do{L=f[d+k++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L))}while(L&&k<m);if(512&n.flags&&(n.check=o(n.check,f,k,d)),m-=k,d+=k,L)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(y!==(65535&n.check)){t.msg="header crc mismatch",n.mode=c;break}y=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=u;break;case 10:for(;b<32;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}t.adler=n.check=h(y),y=0,b=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=g,t.avail_out=v,t.next_in=d,t.avail_in=m,n.hold=y,n.bits=b,2;t.adler=n.check=1,n.mode=u;case u:if(5===e||6===e)break t;case 13:if(n.last){y>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}switch(n.last=1&y,b-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(w(n),n.mode=20,6===e){y>>>=2,b-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=c}y>>>=2,b-=2;break;case 14:for(y>>>=7&b,b-=7&b;b<32;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if((65535&y)!=(y>>>16^65535)){t.msg="invalid stored block lengths",n.mode=c;break}if(n.length=65535&y,y=0,b=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(k=n.length){if(k>m&&(k=m),k>v&&(k=v),0===k)break t;r.arraySet(p,f,d,k,g),m-=k,d+=k,v-=k,g+=k,n.length-=k;break}n.mode=u;break;case 17:for(;b<14;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(n.nlen=257+(31&y),y>>>=5,b-=5,n.ndist=1+(31&y),y>>>=5,b-=5,n.ncode=4+(15&y),y>>>=4,b-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=c;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}n.lens[D[n.have++]]=7&y,y>>>=3,b-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,j={bits:n.lenbits},R=s(0,n.lens,0,19,n.lencode,0,n.work,j),n.lenbits=j.bits,R){t.msg="invalid code lengths set",n.mode=c;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=($=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,P=65535&$,!((T=$>>>24)<=b);){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(P<16)y>>>=T,b-=T,n.lens[n.have++]=P;else{if(16===P){for(N=T+2;b<N;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(y>>>=T,b-=T,0===n.have){t.msg="invalid bit length repeat",n.mode=c;break}L=n.lens[n.have-1],k=3+(3&y),y>>>=2,b-=2}else if(17===P){for(N=T+3;b<N;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}b-=T,L=0,k=3+(7&(y>>>=T)),y>>>=3,b-=3}else{for(N=T+7;b<N;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}b-=T,L=0,k=11+(127&(y>>>=T)),y>>>=7,b-=7}if(n.have+k>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=c;break}for(;k--;)n.lens[n.have++]=L}}if(n.mode===c)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=c;break}if(n.lenbits=9,j={bits:n.lenbits},R=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,j),n.lenbits=j.bits,R){t.msg="invalid literal/lengths set",n.mode=c;break}if(n.distbits=6,n.distcode=n.distdyn,j={bits:n.distbits},R=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,j),n.distbits=j.bits,R){t.msg="invalid distances set",n.mode=c;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(m>=6&&v>=258){t.next_out=g,t.avail_out=v,t.next_in=d,t.avail_in=m,n.hold=y,n.bits=b,a(t,_),g=t.next_out,p=t.output,v=t.avail_out,d=t.next_in,f=t.input,m=t.avail_in,y=n.hold,b=n.bits,n.mode===u&&(n.back=-1);break}for(n.back=0;O=($=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,P=65535&$,!((T=$>>>24)<=b);){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(O&&0==(240&O)){for(C=T,I=O,A=P;O=($=n.lencode[A+((y&(1<<C+I)-1)>>C)])>>>16&255,P=65535&$,!(C+(T=$>>>24)<=b);){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}y>>>=C,b-=C,n.back+=C}if(y>>>=T,b-=T,n.back+=T,n.length=P,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=u;break}if(64&O){t.msg="invalid literal/length code",n.mode=c;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(N=n.extra;b<N;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=($=n.distcode[y&(1<<n.distbits)-1])>>>16&255,P=65535&$,!((T=$>>>24)<=b);){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(0==(240&O)){for(C=T,I=O,A=P;O=($=n.distcode[A+((y&(1<<C+I)-1)>>C)])>>>16&255,P=65535&$,!(C+(T=$>>>24)<=b);){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}y>>>=C,b-=C,n.back+=C}if(y>>>=T,b-=T,n.back+=T,64&O){t.msg="invalid distance code",n.mode=c;break}n.offset=P,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(N=n.extra;b<N;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=c;break}n.mode=25;case 25:if(0===v)break t;if(k=_-v,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=c;break}k>n.wnext?(k-=n.wnext,E=n.wsize-k):E=n.wnext-k,k>n.length&&(k=n.length),M=n.window}else M=p,E=g-n.offset,k=n.length;k>v&&(k=v),v-=k,n.length-=k;do{p[g++]=M[E++]}while(--k);0===n.length&&(n.mode=21);break;case 26:if(0===v)break t;p[g++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===m)break t;m--,y|=f[d++]<<b,b+=8}if(_-=v,t.total_out+=_,n.total+=_,_&&(t.adler=n.check=n.flags?o(n.check,p,_,g-_):i(n.check,p,_,g-_)),_=v,(n.flags?y:h(y))!==n.check){t.msg="incorrect data check",n.mode=c;break}y=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===m)break t;m--,y+=f[d++]<<b,b+=8}if(y!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=c;break}y=0,b=0}n.mode=29;case 29:R=1;break t;case c:R=-3;break t;case 31:return-4;default:return l}return t.next_out=g,t.avail_out=v,t.next_in=d,t.avail_in=m,n.hold=y,n.bits=b,(n.wsize||_!==t.avail_out&&n.mode<c&&(n.mode<27||4!==e))&&x(t,t.output,t.next_out,_-t.avail_out)?(n.mode=31,-4):(S-=t.avail_in,_-=t.avail_out,t.total_in+=S,t.total_out+=_,n.total+=_,n.wrap&&_&&(t.adler=n.check=n.flags?o(n.check,p,_,t.next_out-_):i(n.check,p,_,t.next_out-_)),t.data_type=n.bits+(n.last?64:0)+(n.mode===u?128:0)+(20===n.mode||15===n.mode?256:0),(0===S&&0===_||4===e)&&0===R&&(R=-5),R)},e.inflateEnd=function(t){if(!t||!t.state)return l;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?l:(n.head=e,e.done=!1,0):l},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,e,r,0)!==n.check?-3:x(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},e.inflateInfo="pako inflate (from Nodeca project)"},1721:function(t,e,n){"use strict";var r=n(1307),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,u,c,h,f){var p,d,g,m,v,y,b,w,x,S=f.bits,_=0,k=0,E=0,M=0,T=0,O=0,P=0,C=0,I=0,A=0,L=null,R=0,j=new r.Buf16(16),N=new r.Buf16(16),$=null,F=0;for(_=0;_<=15;_++)j[_]=0;for(k=0;k<l;k++)j[e[n+k]]++;for(T=S,M=15;M>=1&&0===j[M];M--);if(T>M&&(T=M),0===M)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(E=1;E<M&&0===j[E];E++);for(T<E&&(T=E),C=1,_=1;_<=15;_++)if(C<<=1,(C-=j[_])<0)return-1;if(C>0&&(0===t||1!==M))return-1;for(N[1]=0,_=1;_<15;_++)N[_+1]=N[_]+j[_];for(k=0;k<l;k++)0!==e[n+k]&&(h[N[e[n+k]]++]=k);if(0===t?(L=$=h,y=19):1===t?(L=i,R-=257,$=o,F-=257,y=256):(L=a,$=s,y=-1),A=0,k=0,_=E,v=c,O=T,P=0,g=-1,m=(I=1<<T)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){b=_-P,h[k]<y?(w=0,x=h[k]):h[k]>y?(w=$[F+h[k]],x=L[R+h[k]]):(w=96,x=0),p=1<<_-P,E=d=1<<O;do{u[v+(A>>P)+(d-=p)]=b<<24|w<<16|x|0}while(0!==d);for(p=1<<_-1;A&p;)p>>=1;if(0!==p?(A&=p-1,A+=p):A=0,k++,0==--j[_]){if(_===M)break;_=e[n+h[k]]}if(_>T&&(A&m)!==g){for(0===P&&(P=T),v+=E,C=1<<(O=_-P);O+P<M&&!((C-=j[O+P])<=0);)O++,C<<=1;if(I+=1<<O,1===t&&I>852||2===t&&I>592)return 1;u[g=A&m]=T<<24|O<<16|v-c|0}}return 0!==A&&(u[v+A]=_-P<<24|64<<16|0),f.bits=T,0}},8021:function(t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},7563:function(t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},2098:function(t,e,n){"use strict";t.exports=i;var r=n(3226);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function u(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function h(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function b(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function S(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=S(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=w(this.buf,this.pos)+w(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=w(this.buf,this.pos)+S(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return u(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return u(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return u(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,n){return s.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=l(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&c(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},9891:function(t){"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var l=t.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,h,f,p,d=t[u].replace(a,"%20"),g=d.indexOf(r);g>=0?(c=d.substr(0,g),h=d.substr(g+1)):(c=d,h=""),f=decodeURIComponent(c),p=decodeURIComponent(h),e(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}},3418:function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){switch(e(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,r,i,o){return r=r||"&",i=i||"=",null===t&&(t=void 0),"object"===e(t)?Object.keys(t).map((function(e){var o=encodeURIComponent(n(e))+i;return Array.isArray(t[e])?t[e].map((function(t){return o+encodeURIComponent(n(t))})).join(r):o+encodeURIComponent(n(t[e]))})).join(r):o?encodeURIComponent(n(o))+i+encodeURIComponent(n(t)):""}},8320:function(t,e,n){"use strict";e.decode=e.parse=n(9891),e.encode=e.stringify=n(3418)},7072:function(t,e,n){var r,i,o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var f=n[r],p=i,d=o;for(e(n,i,r),a(n[o],f)>0&&e(n,i,o);p<d;){for(e(n,p,d),p++,d--;a(n[p],f)<0;)p++;for(;a(n[d],f)>0;)d--}0===a(n[i],f)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!f(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));g(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);g(t,c,h,l,this.compareMinY);for(var f=c;f<=h;f+=l){var p=Math.min(f+l-1,h);i.children.push(this._build(t,f,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var f,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,f=1/0,p=1/0,d=e;d<=n-e;d++){var g=a(t,0,d,this.toBBox),m=a(t,d,n,this.toBBox),v=(i=g,o=m,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),y=c(g)+c(m);v<f?(f=v,r=d,p=y<p?y:p):v===f&&y<p&&(p=y,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),u+=h(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p];s(l,t.leaf?i(d):d),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r},"object"==a(e)?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},9024:function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n={};function r(t,e,r){r||(r=Error);var i=function(t){var n,r;function i(n,r,i){return t.call(this,function(t,n,r){return"string"==typeof e?e:e(t,n,r)}(n,r,i))||this}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function i(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}r("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(t,n,r){var o,a,s,l,u;if("string"==typeof n&&function(t,e,n){return t.substr(0,e.length)===e}(n,"not ")?(o="must not be",n=n.replace(/^not /,"")):o="must be",s=t,l=" argument",(void 0===u||u>s.length)&&(u=s.length),s.substring(u-l.length,u)===l)a="The ".concat(t," ").concat(o," ").concat(i(n,"type"));else{var c=function(t,e,n){return"number"!=typeof n&&(n=0),!(n+".".length>t.length)&&-1!==t.indexOf(".",n)}(t)?"property":"argument";a='The "'.concat(t,'" ').concat(c," ").concat(o," ").concat(i(n,"type"))}return a+". Received type ".concat(e(r))}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=n},6884:function(t,e,n){"use strict";var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=u;var i=n(6297),o=n(1471);n(1736)(u,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var l=a[s];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||process.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},3582:function(t,e,n){"use strict";t.exports=i;var r=n(9154);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(1736)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},6297:function(t,e,n){"use strict";var r;t.exports=k,k.ReadableState=_,n(8291).EventEmitter;var i,o=function(t,e){return t.listeners(e).length},a=n(7144),s=n(9033).Buffer,l=n.g.Uint8Array||function(){},u=n(4616);i=u&&u.debuglog?u.debuglog("stream"):function(){};var c,h,f,p=n(5392),d=n(7572),g=n(6756).getHighWaterMark,m=n(9024).q,v=m.ERR_INVALID_ARG_TYPE,y=m.ERR_STREAM_PUSH_AFTER_EOF,b=m.ERR_METHOD_NOT_IMPLEMENTED,w=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(1736)(k,a);var x=d.errorOrDestroy,S=["error","close","destroy","pause","resume"];function _(t,e,i){r=r||n(6884),t=t||{},"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(c||(c=n(3462).s),this.decoder=new c(t.encoding),this.encoding=t.encoding)}function k(t){if(r=r||n(6884),!(this instanceof k))return new k(t);var e=this instanceof r;this._readableState=new _(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function E(t,e,n,r,o){i("readableAddChunk",e);var a,u=t._readableState;if(null===e)u.reading=!1,function(t,e){if(i("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?P(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,C(t)))}}(t,u);else if(o||(a=function(t,e){var n,r;return r=e,s.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],e)),n}(u,e)),a)x(t,a);else if(u.objectMode||e&&e.length>0)if("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r)u.endEmitted?x(t,new w):M(t,u,e,!0);else if(u.ended)x(t,new y);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(e=u.decoder.write(e),u.objectMode||0!==e.length?M(t,u,e,!1):I(t,u)):M(t,u,e,!1)}else r||(u.reading=!1,I(t,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function M(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&P(t)),I(t,e)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),k.prototype.destroy=d.destroy,k.prototype._undestroy=d.undestroy,k.prototype._destroy=function(t,e){e(t)},k.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),E(this,t,e,!1,n)},k.prototype.unshift=function(t){return E(this,t,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){c||(c=n(3462).s);var e=new c(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function O(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function P(t){var e=t._readableState;i("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(i("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(C,t))}function C(t){var e=t._readableState;i("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function I(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(A,t,e))}function A(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(i("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function L(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function R(t){i("readable nexttick read 0"),t.read(0)}function j(t,e){i("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(i("flow",e.flowing);e.flowing&&null!==t.read(););}function $(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function F(t){var e=t._readableState;i("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(D,e,t))}function D(t,e){if(i("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function G(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}k.prototype.read=function(t){i("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return i("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?F(this):P(this),null;if(0===(t=O(t,e))&&e.ended)return 0===e.length&&F(this),null;var r,o=e.needReadable;return i("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&i("length less than watermark",o=!0),e.ended||e.reading?i("reading or ended",o=!1):o&&(i("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=O(n,e))),null===(r=t>0?$(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&F(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(t){x(this,new b("_read()"))},k.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===process.stdout||t===process.stderr?d:s;function s(){i("onend"),t.end()}r.endEmitted?process.nextTick(a):n.once("end",a),t.on("unpipe",(function e(o,a){i("onunpipe"),o===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,i("cleanup"),t.removeListener("close",f),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",e),n.removeListener("end",s),n.removeListener("end",d),n.removeListener("data",c),u=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}));var l=function(t){return function(){var e=t._readableState;i("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",l);var u=!1;function c(e){i("ondata");var o=t.write(e);i("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==G(r.pipes,t))&&!u&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(e){i("onerror",e),d(),t.removeListener("error",h),0===o(t,"error")&&x(t,e)}function f(){t.removeListener("finish",p),d()}function p(){i("onfinish"),t.removeListener("close",f),d()}function d(){i("unpipe"),n.unpipe(t)}return n.on("data",c),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",h),t.once("close",f),t.once("finish",p),t.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),t},k.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=G(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},k.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===t&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?P(this):r.reading||process.nextTick(R,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(L,this),n},k.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(L,this),e},k.prototype.resume=function(){var t=this._readableState;return t.flowing||(i("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(j,t,e))}(this,t)),t.paused=!1,this},k.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var o in t.on("end",(function(){if(i("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(o){i("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))})),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var a=0;a<S.length;a++)t.on(S[a],this.emit.bind(this,S[a]));return this._read=function(e){i("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(2317)),h(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),k._fromList=$,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(t,e){return void 0===f&&(f=n(6218)),f(k,t,e)})},9154:function(t,e,n){"use strict";t.exports=c;var r=n(9024).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(6884);function u(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);l.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,n){f(t,e,n)}))}function f(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}n(1736)(c,l),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,n){n(new i("_transform()"))},c.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},1471:function(t,e,n){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(undefined),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var i;t.exports=k,k.WritableState=_;var o,a={deprecate:n(6219)},s=n(7144),l=n(9033).Buffer,u=n.g.Uint8Array||function(){},c=n(7572),h=n(6756).getHighWaterMark,f=n(9024).q,p=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,x=c.errorOrDestroy;function S(){}function _(t,e,o){i=i||n(6884),t=t||{},"boolean"!=typeof o&&(o=e instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=h(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(process.nextTick(i,r),process.nextTick(C,t,e),t._writableState.errorEmitted=!0,x(t,r)):(i(r),t._writableState.errorEmitted=!0,x(t,r),C(t,e))}(t,n,r,e,i);else{var o=O(n)||t.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(t,n),r?process.nextTick(M,t,n,o,i):M(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function k(t){var e=this instanceof(i=i||n(6884));if(!e&&!o.call(k,this))return new k(t);this._writableState=new _(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function E(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function M(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),C(t,e)}function T(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,o=new Array(i),a=e.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)o[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;o.allBuffers=l,E(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,h=n.callback;if(E(t,e,!1,e.objectMode?1:u.length,u,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function O(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function P(t,e){t._final((function(n){e.pendingcb--,n&&x(t,n),e.prefinished=!0,t.emit("prefinish"),C(t,e)}))}function C(t,e){var n=O(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(P,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}n(1736)(k,s),_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(_.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===k&&t&&t._writableState instanceof _}})):o=function(t){return t instanceof this},k.prototype.pipe=function(){x(this,new m)},k.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,a=!i.objectMode&&(r=t,l.isBuffer(r)||r instanceof u);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=S),i.ending?function(t,e){var n=new b;x(t,n),process.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i;return null===n?i=new y:"string"==typeof n||e.objectMode||(i=new p("chunk",["string","Buffer"],n)),!i||(x(t,i),process.nextTick(r,i),!1)}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else E(t,e,!1,s,r,i,o);return u}(this,i,a,t,e,n)),o},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||T(this,t))},k.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(t,e,n){n(new d("_write()"))},k.prototype._writev=null,k.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,n){e.ending=!0,C(t,e),n&&(e.finished?process.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function(t,e){e(t)}},2317:function(t,e,n){"use strict";var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(5831),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var n=t[f].read();null!==n&&(t[c]=null,t[a]=null,t[s]=null,e(p(n,!1)))}}function g(t){process.nextTick(d,t)}var m=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var t=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(e,n){process.nextTick((function(){t[l]?n(t[l]):e(p(void 0,!0))}))}));var n,r=this[c];if(r)n=new Promise(function(t,e){return function(n,r){t.then((function(){e[u]?n(p(void 0,!0)):e[h](n,r)}),r)}}(r,this));else{var i=this[f].read();if(null!==i)return Promise.resolve(p(i,!1));n=new Promise(this[h])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var t=this;return new Promise((function(e,n){t[f].destroy(null,(function(t){t?n(t):e(p(void 0,!0))}))}))})),r),m);t.exports=function(t){var e,n=Object.create(v,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,l,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var r=n[f].read();r?(n[c]=null,n[a]=null,n[s]=null,t(p(r,!1))):(n[a]=t,n[s]=e)},writable:!0}),e));return n[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[s];return null!==e&&(n[c]=null,n[a]=null,n[s]=null,e(t)),void(n[l]=t)}var r=n[a];null!==r&&(n[c]=null,n[a]=null,n[s]=null,r(p(void 0,!0))),n[u]=!0})),t.on("readable",g.bind(null,n)),n}},5392:function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=n(9033).Buffer,s=n(2361).inspect,l=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,n;return e=t,(n=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,n,r,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=i,r=s,a.prototype.copy.call(e,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?r+=i:r+=i.slice(0,t),0==(t-=o)){o===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:l,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,n),t}()},7572:function(t){"use strict";function e(t,e){r(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,i){var o=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,t)):process.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!i&&t?o._writableState?o._writableState.errorEmitted?process.nextTick(n,o):(o._writableState.errorEmitted=!0,process.nextTick(e,o,t)):process.nextTick(e,o,t):i?(process.nextTick(n,o),i(t)):process.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}},5831:function(t,e,n){"use strict";var r=n(9024).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&e.readable,s=n.writable||!1!==n.writable&&e.writable,l=function(){e.writable||c()},u=e._writableState&&e._writableState.finished,c=function(){s=!1,u=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):s&&!u?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},g=function(){e.req.on("finish",c)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",c),e.on("abort",d),e.req?g():e.on("request",g)):s&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",f),e.on("finish",c),!1!==n.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",g),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}},6218:function(t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},384:function(t,e,n){"use strict";var r,i=n(9024).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function l(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===r&&(r=n(5831)),r(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var l=!1;return function(e){if(!s&&!l)return l=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function u(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,n){var o=n<e.length-1;return l(t,o,n>0,(function(t){r||(r=t),t&&a.forEach(u),o||(a.forEach(u),i(r))}))}));return e.reduce(c)}},6756:function(t,e,n){"use strict";var r=n(9024).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},7144:function(t,e,n){t.exports=n(8291).EventEmitter},6505:function(t,e,n){(e=t.exports=n(6297)).Stream=e,e.Readable=e,e.Writable=n(1471),e.Duplex=n(6884),e.Transform=n(9154),e.PassThrough=n(3582),e.finished=n(5831),e.pipeline=n(384)},6760:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=M(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=h(t,e,n);if("normal"===l.type){if(r=n.done?g:p,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=g,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",g="completed",m={};function v(){}function y(){}function b(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(C([])));S&&S!==n&&i.call(S,a)&&(w=S);var _=b.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,a,s,l){var u=h(t[o],t,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===r(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,l)}))}l(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}}function M(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return y.prototype=b,u(_,"constructor",b),u(b,"constructor",y),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},k(E.prototype),u(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),u(_,l,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}("object"===r(t=n.nmd(t))?t.exports:{});try{regeneratorRuntime=i}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},3462:function(t,e,n){"use strict";var r=n(5406).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"ï¿½";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"ï¿½";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"ï¿½"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.s=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},5406:function(t,e,n){var r=n(9033),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},2335:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=e.deserialize=e.registerSerializer=void 0;var r=n(9713),i=r.DefaultSerializer;e.registerSerializer=function(t){i=r.extendSerializer(i,t)},e.deserialize=function(t){return i.deserialize(t)},e.serialize=function(t){return i.serialize(t)}},769:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.Transfer=e.DefaultSerializer=e.expose=e.registerSerializer=void 0;var o=n(2335);Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return o.registerSerializer}}),i(n(2305),e);var a=n(1459);Object.defineProperty(e,"expose",{enumerable:!0,get:function(){return a.expose}});var s=n(9713);Object.defineProperty(e,"DefaultSerializer",{enumerable:!0,get:function(){return s.DefaultSerializer}});var l=n(6126);Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return l.Transfer}})},406:function(t,e){"use strict";var n;function r(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}Object.defineProperty(e,"__esModule",{value:!0}),e.getBundleURL=e.getBaseURL=void 0,e.getBundleURL=function(){return n||(n=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return r(t[0])}return"/"}()),n},e.getBaseURL=r},4002:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function a(t){var e=c();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)})(t)}function u(t,e,n){return(u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.isWorkerRuntime=e.getWorkerImplementation=e.defaultPoolSize=void 0;var d=n(406);e.defaultPoolSize="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;var g,m=function(t){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(t)};function v(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}e.getWorkerImplementation=function(){return g||(g=function(){if("undefined"==typeof Worker)return function t(){throw p(this,t),Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")};var t=function(t){o(n,t);var e=a(n);function n(t,r){var i,o;return p(this,n),"string"==typeof t&&r&&r._baseURL?t=new URL(t,r._baseURL):"string"==typeof t&&!m(t)&&d.getBundleURL().match(/^file:\/\//i)&&(t=new URL(t,d.getBundleURL().replace(/\/[^\/]+$/,"/")),(null===(i=null==r?void 0:r.CORSWorkaround)||void 0===i||i)&&(t=v("importScripts(".concat(JSON.stringify(t),");")))),"string"==typeof t&&m(t)&&(null===(o=null==r?void 0:r.CORSWorkaround)||void 0===o||o)&&(t=v("importScripts(".concat(JSON.stringify(t),");"))),e.call(this,t,r)}return n}(l(Worker));return{blob:function(t){o(s,t);var e,n,r=a(s);function s(t,e){p(this,s);var n=window.URL.createObjectURL(t);return r.call(this,n,e)}return e=s,n=[{key:"fromText",value:function(t,e){return new s(new window.Blob([t],{type:"text/javascript"}),e)}}],n&&i(e,n),s}(t),default:t}}()),g},e.isWorkerRuntime=function(){var t="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||t)}},2305:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Worker=e.BlobWorker=e.isWorkerRuntime=e.Thread=e.spawn=e.Pool=void 0;var r=n(4002);Object.defineProperty(e,"isWorkerRuntime",{enumerable:!0,get:function(){return r.isWorkerRuntime}});var i=n(3008);Object.defineProperty(e,"Pool",{enumerable:!0,get:function(){return i.Pool}});var o=n(5441);Object.defineProperty(e,"spawn",{enumerable:!0,get:function(){return o.spawn}});var a=n(906);Object.defineProperty(e,"Thread",{enumerable:!0,get:function(){return a.Thread}}),e.BlobWorker=r.getWorkerImplementation().blob,e.Worker=r.getWorkerImplementation().default},943:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createProxyModule=e.createProxyFunction=void 0;var l=s(n(9796)),u=n(9694),c=n(2335),h=n(4455),f=n(6126),p=n(8453),d=l.default("threads:master:messages"),g=1;function m(t,e){return new u.Observable((function(n){var r,i=function i(o){var a;if(d("Message from worker:",o.data),o.data&&o.data.uid===e)if((a=o.data)&&a.type===p.WorkerMessageType.running)r=o.data.resultType;else if(function(t){return t&&t.type===p.WorkerMessageType.result}(o.data))"promise"===r?(void 0!==o.data.payload&&n.next(c.deserialize(o.data.payload)),n.complete(),t.removeEventListener("message",i)):(o.data.payload&&n.next(c.deserialize(o.data.payload)),o.data.complete&&(n.complete(),t.removeEventListener("message",i)));else if(function(t){return t&&t.type===p.WorkerMessageType.error}(o.data)){var s=c.deserialize(o.data.error);n.error(s),t.removeEventListener("message",i)}};return t.addEventListener("message",i),function(){if("observable"===r||!r){var n={type:p.MasterMessageType.cancel,uid:e};t.postMessage(n)}t.removeEventListener("message",i)}}))}function v(t){if(0===t.length)return{args:[],transferables:[]};var e,n,o=[],a=[],s=i(t);try{for(s.s();!(e=s.n()).done;){var l=e.value;f.isTransferDescriptor(l)?(o.push(c.serialize(l.send)),a.push.apply(a,r(l.transferables))):o.push(c.serialize(l))}}catch(t){s.e(t)}finally{s.f()}return{args:o,transferables:0===a.length?a:(n=a,Array.from(new Set(n)))}}function y(t,e){return function(){for(var n=g++,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=v(i),s=a.args,l=a.transferables,c={type:p.MasterMessageType.run,uid:n,method:e,args:s};d("Sending command to run function to worker:",c);try{t.postMessage(c,l)}catch(t){return h.ObservablePromise.from(Promise.reject(t))}return h.ObservablePromise.from(u.multicast(m(t,n)))}}e.createProxyFunction=y,e.createProxyModule=function(t,e){var n,r={},o=i(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;r[a]=y(t,a)}}catch(t){o.e(t)}finally{o.f()}return r}},2753:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PoolEventType=void 0,function(t){t.initialized="initialized",t.taskCanceled="taskCanceled",t.taskCompleted="taskCompleted",t.taskFailed="taskFailed",t.taskQueued="taskQueued",t.taskQueueDrained="taskQueueDrained",t.taskStart="taskStart",t.terminated="terminated"}(e.PoolEventType||(e.PoolEventType={}))},3008:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Pool=e.Thread=e.PoolEventType=void 0;var l=s(n(9796)),u=n(9694),c=n(2137),h=n(4002),f=n(2753);Object.defineProperty(e,"PoolEventType",{enumerable:!0,get:function(){return f.PoolEventType}});var p=n(906);Object.defineProperty(e,"Thread",{enumerable:!0,get:function(){return p.Thread}});var d=1;function g(t){return new Promise((function(e){return setTimeout(e,t)}))}function m(t,e){return t.reduce((function(t,n){return[].concat(i(t),i(e(n)))}),[])}var v=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventSubject=new u.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];var i="number"==typeof n?{size:n}:n||{},o=i.size,a=void 0===o?h.defaultPoolSize:o;this.debug=l.default("threads:pool:".concat((i.name||String(d++)).replace(/\W/g," ").trim().replace(/\s+/g,"-"))),this.options=i,this.workers=function(t,e){return function(t){for(var e=[],n=0;n<t;n++)e.push(n);return e}(e).map((function(){return{init:t(),runningTasks:[]}}))}(e,a),this.eventObservable=u.multicast(u.Observable.from(this.eventSubject)),Promise.all(this.workers.map((function(t){return t.init}))).then((function(){return r.eventSubject.next({type:f.PoolEventType.initialized,size:r.workers.length})}),(function(t){r.debug("Error while initializing pool worker:",t),r.eventSubject.error(t),r.initErrors.push(t)}))}var e,n;return e=t,(n=[{key:"findIdlingWorker",value:function(){var t=this.options.concurrency,e=void 0===t?1:t;return this.workers.find((function(t){return t.runningTasks.length<e}))}},{key:"runPoolTask",value:function(t,e){return a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.workers.indexOf(t)+1,this.debug("Running task #".concat(e.id," on worker #").concat(r,"...")),this.eventSubject.next({type:f.PoolEventType.taskStart,taskID:e.id,workerID:r}),n.prev=3,n.t0=e,n.next=7,t.init;case 7:return n.t1=n.sent,n.next=10,n.t0.run.call(n.t0,n.t1);case 10:i=n.sent,this.debug("Task #".concat(e.id," completed successfully")),this.eventSubject.next({type:f.PoolEventType.taskCompleted,returnValue:i,taskID:e.id,workerID:r}),n.next=19;break;case 15:n.prev=15,n.t2=n.catch(3),this.debug("Task #".concat(e.id," failed")),this.eventSubject.next({type:f.PoolEventType.taskFailed,taskID:e.id,error:n.t2,workerID:r});case 19:case"end":return n.stop()}}),n,this,[[3,15]])})))}},{key:"run",value:function(t,e){return a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a(i,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(){t.runningTasks=t.runningTasks.filter((function(t){return t!==r}))},n.next=3,g(0);case 3:return n.prev=3,n.next=6,this.runPoolTask(t,e);case 6:return n.prev=6,i(),this.isClosing||this.scheduleWork(),n.finish(6);case 10:case"end":return n.stop()}}),n,this,[[3,,6,10]])}))),t.runningTasks.push(r);case 2:case"end":return n.stop()}}),n)})))}},{key:"scheduleWork",value:function(){this.debug("Attempt de-queueing a task in order to run it...");var t=this.findIdlingWorker();if(t){var e=this.taskQueue.shift();if(!e)return this.debug("Task queue is empty"),void this.eventSubject.next({type:f.PoolEventType.taskQueueDrained});this.run(t,e)}}},{key:"taskCompletion",value:function(t){var e=this;return new Promise((function(n,r){var i=e.events().subscribe((function(e){e.type===f.PoolEventType.taskCompleted&&e.taskID===t?(i.unsubscribe(),n(e.returnValue)):e.type===f.PoolEventType.taskFailed&&e.taskID===t?(i.unsubscribe(),r(e.error)):e.type===f.PoolEventType.terminated&&(i.unsubscribe(),r(Error("Pool has been terminated before task was run.")))}))}))}},{key:"settled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){return m(o.workers,(function(t){return t.runningTasks}))},r=[],i=this.eventObservable.subscribe((function(t){t.type===f.PoolEventType.taskFailed&&r.push(t.error)})),!(this.initErrors.length>0)){e.next=5;break}return e.abrupt("return",Promise.reject(this.initErrors[0]));case 5:if(!t||0!==this.taskQueue.length){e.next=9;break}return e.next=8,c.allSettled(n());case 8:return e.abrupt("return",r);case 9:return e.next=11,new Promise((function(t,e){var n=o.eventObservable.subscribe({next:function(e){e.type===f.PoolEventType.taskQueueDrained&&(n.unsubscribe(),t(void 0))},error:e})}));case 11:return e.next=13,c.allSettled(n());case 13:return i.unsubscribe(),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"completed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.settled(t),r=new Promise((function(t,e){var r=o.eventObservable.subscribe({next:function(i){i.type===f.PoolEventType.taskQueueDrained?(r.unsubscribe(),t(n)):i.type===f.PoolEventType.taskFailed&&(r.unsubscribe(),e(i.error))},error:e})})),e.next=4,Promise.race([n,r]);case 4:if(!((i=e.sent).length>0)){e.next=7;break}throw i[0];case 7:case"end":return e.stop()}}),e,this)})))}},{key:"events",value:function(){return this.eventObservable}},{key:"queue",value:function(t){var e=this,n=this.options.maxQueuedJobs,r=void 0===n?1/0:n;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];var i=this.nextTaskID++,o=this.taskCompletion(i);o.catch((function(t){e.debug("Task #".concat(i," errored:"),t)}));var a={id:i,run:t,cancel:function(){-1!==e.taskQueue.indexOf(a)&&(e.taskQueue=e.taskQueue.filter((function(t){return t!==a})),e.eventSubject.next({type:f.PoolEventType.taskCanceled,taskID:a.id}))},then:o.then.bind(o)};if(this.taskQueue.length>=r)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug("Queueing task #".concat(a.id,"...")),this.taskQueue.push(a),this.eventSubject.next({type:f.PoolEventType.taskQueued,taskID:a.id}),this.scheduleWork(),a}},{key:"terminate",value:function(t){return a(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isClosing=!0,t){e.next=4;break}return e.next=4,this.completed(!0);case 4:return this.eventSubject.next({type:f.PoolEventType.terminated,remainingQueue:i(this.taskQueue)}),this.eventSubject.complete(),e.next=8,Promise.all(this.workers.map((function(t){return a(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p.Thread,e.next=3,t.init;case 3:return e.t1=e.sent,e.abrupt("return",e.t0.terminate.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))})));case 8:case"end":return e.stop()}}),e,this)})))}}])&&r(e.prototype,n),t}();function y(t,e){return new v(t,e)}v.EventType=f.PoolEventType,y.EventType=f.PoolEventType,e.Pool=y},5441:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.spawn=void 0;var l=s(n(9796)),u=n(9694),c=n(2335),h=n(2981),f=n(6277),p=n(6439),d=n(943),g=l.default("threads:master:messages"),m=l.default("threads:master:spawn"),v=l.default("threads:master:thread-utils"),y="undefined"!=typeof process&&process.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(process.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function b(t,e,n){return a(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new Promise((function(t,r){i=setTimeout((function(){return r(Error(n))}),e)})),r.next=3,Promise.race([t,o]);case 3:return a=r.sent,clearTimeout(i),r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))}function w(t){return new Promise((function(e,n){t.addEventListener("message",(function r(i){var o;g("Message from worker before finishing initialization:",i.data),(o=i.data)&&"init"===o.type?(t.removeEventListener("message",r),e(i.data)):function(t){return t&&"uncaughtError"===t.type}(i.data)&&(t.removeEventListener("message",r),n(c.deserialize(i.data.error)))}))}))}function x(t,e){return new u.Observable((function(n){var r=function(t){var e={type:p.WorkerEventType.message,data:t.data};n.next(e)},i=function(t){v("Unhandled promise rejection event in thread:",t);var e={type:p.WorkerEventType.internalError,error:Error(t.reason)};n.next(e)};t.addEventListener("message",r),t.addEventListener("unhandledrejection",i),e.then((function(){var e={type:p.WorkerEventType.termination};t.removeEventListener("message",r),t.removeEventListener("unhandledrejection",i),n.next(e),n.complete()}))}))}function S(t){var e=this,n=i(h.createPromiseWithResolver(),2),r=n[0],o=n[1];return{terminate:function(){return a(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v("Terminating worker"),e.next=3,t.terminate();case 3:o();case 4:case"end":return e.stop()}}),e)})))},termination:r}}function _(t,e,n,i){var o,a=n.filter((function(t){return t.type===p.WorkerEventType.internalError})).map((function(t){return t.error}));return Object.assign(t,(r(o={},f.$errors,a),r(o,f.$events,n),r(o,f.$terminate,i),r(o,f.$worker,e),o))}e.spawn=function(t,e){return a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m("Initializing new thread"),r=e&&e.timeout?e.timeout:y,n.next=4,b(w(t),r,"Timeout: Did not receive an init message from worker after ".concat(r,"ms. Make sure the worker calls expose()."));case 4:if(i=n.sent,o=i.exposed,a=S(t),s=a.termination,l=a.terminate,u=x(t,s),"function"!==o.type){n.next=13;break}return c=d.createProxyFunction(t),n.abrupt("return",_(c,t,u,l));case 13:if("module"!==o.type){n.next=18;break}return h=d.createProxyModule(t,o.methods),n.abrupt("return",_(h,t,u,l));case 18:throw f=o.type,Error("Worker init message states unexpected type of expose(): ".concat(f));case 20:case"end":return n.stop()}}),n)})))}},906:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Thread=void 0;var r=n(6277);function i(t){throw Error(t)}e.Thread={errors:function(t){return t[r.$errors]||i("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events:function(t){return t[r.$events]||i("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate:function(t){return t[r.$terminate]()}}},4455:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ObservablePromise=void 0;var p=n(9694),d=function(){},g=function(t){return t},m=function(t){return Promise.resolve().then(t)};function v(t){throw t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(c,t);var e,n,r,o=u(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=o.call(this,(function(n){var r=h(e),i=Object.assign(Object.assign({},n),{complete:function(){n.complete(),r.onCompletion()},error:function(t){n.error(t),r.onError(t)},next:function(t){n.next(t),r.onNext(t)}});try{return e.initHasRun=!0,t(i)}catch(t){i.error(t)}}))).initHasRun=!1,e.fulfillmentCallbacks=[],e.rejectionCallbacks=[],e.firstValueSet=!1,e.state="pending",e}return e=c,r=[{key:"from",value:function(t){return function(t){return t&&"function"==typeof t.then}(t)?new c((function(e){t.then((function(t){e.next(t),e.complete()}),(function(t){e.error(t)}))})):s(f(c),"from",this).call(this,t)}}],(n=[{key:"onNext",value:function(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}},{key:"onError",value:function(t){this.state="rejected",this.rejection=t;var e,n=i(this.rejectionCallbacks);try{var r=function(){var n=e.value;m((function(){return n(t)}))};for(n.s();!(e=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}}},{key:"onCompletion",value:function(){var t=this;this.state="fulfilled";var e,n=i(this.fulfillmentCallbacks);try{var r=function(){var n=e.value;m((function(){return n(t.firstValue)}))};for(n.s();!(e=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}}},{key:"then",value:function(t,e){var n=this,r=t||g,i=e||v,o=!1;return new Promise((function(t,e){var a=function(n){if(!o){o=!0;try{t(i(n))}catch(t){e(t)}}};return n.initHasRun||n.subscribe({error:a}),"fulfilled"===n.state?t(r(n.firstValue)):"rejected"===n.state?(o=!0,t(i(n.rejection))):(n.fulfillmentCallbacks.push((function(e){try{t(r(e))}catch(t){a(t)}})),void n.rejectionCallbacks.push(a))}))}},{key:"catch",value:function(t){return this.then(void 0,t)}},{key:"finally",value:function(t){var e=t||d;return this.then((function(t){return e(),t}),(function(){return e()}))}}])&&a(e.prototype,n),r&&a(e,r),c}(p.Observable);e.ObservablePromise=y},2137:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allSettled=void 0,e.allSettled=function(t){return Promise.all(t.map((function(t){var e=Promise.resolve(t);try{return e.then((function(t){return{status:"fulfilled",value:t}}),(function(t){return{status:"rejected",reason:t}}))}catch(t){return Promise.reject(t)}})))}},2981:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPromiseWithResolver=void 0;var n=function(){};e.createPromiseWithResolver=function(){var t,e=!1,r=n;return[new Promise((function(n){e?n(t):r=n})),function(n){e=!0,r(t=n)}]}},9713:function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultSerializer=e.extendSerializer=void 0,e.extendSerializer=function(t,e){var n=t.deserialize.bind(t),r=t.serialize.bind(t);return{deserialize:function(t){return e.deserialize(t,n)},serialize:function(t){return e.serialize(t,r)}}};e.DefaultSerializer={deserialize:function(t){return(e=t)&&"object"===n(e)&&"__error_marker"in e&&"$$error"===e.__error_marker?function(t){return Object.assign(Error(t.message),{name:t.name,stack:t.stack})}(t):t;var e},serialize:function(t){return t instanceof Error?function(t){return{__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack}}(t):t}}},6277:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$worker=e.$transferable=e.$terminate=e.$events=e.$errors=void 0,e.$errors=Symbol("thread.errors"),e.$events=Symbol("thread.events"),e.$terminate=Symbol("thread.terminate"),e.$transferable=Symbol("thread.transferable"),e.$worker=Symbol("thread.worker")},6126:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Transfer=e.isTransferDescriptor=void 0;var o=n(6277);e.isTransferDescriptor=function(t){return t&&"object"===i(t)&&t[o.$transferable]},e.Transfer=function(t,e){var n,a;if(!e){if(!(a=t)||"object"!==i(a))throw Error();e=[t]}return r(n={},o.$transferable,!0),r(n,"send",t),r(n,"transferables",e),n}},6439:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerEventType=void 0,n(6277),function(t){t.internalError="internalError",t.message="message",t.termination="termination"}(e.WorkerEventType||(e.WorkerEventType={}))},8453:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageType=e.MasterMessageType=void 0,function(t){t.cancel="cancel",t.run="run"}(e.MasterMessageType||(e.MasterMessageType={})),function(t){t.error="error",t.init="init",t.result="result",t.running="running",t.uncaughtError="uncaughtError"}(e.WorkerMessageType||(e.WorkerMessageType={}))},2257:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={isWorkerRuntime:function(){var t="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||t)},postMessageToMaster:function(t,e){self.postMessage(t,e)},subscribeToMasterMessages:function(t){var e=function(e){t(e.data)};return self.addEventListener("message",e),function(){self.removeEventListener("message",e)}}}},1459:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;var l=s(n(152)),u=n(2335),c=n(6126),h=n(8453),f=s(n(2257)),p=n(2335);Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return p.registerSerializer}});var d=n(6126);Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return d.Transfer}}),e.isWorkerRuntime=f.default.isWorkerRuntime;var g=!1,m=new Map,v=function(t){return t&&t.type===h.MasterMessageType.run},y=function(t){return l.default(t)||function(t){return t&&"object"===o(t)&&"function"==typeof t.subscribe}(t)};function b(t){return c.isTransferDescriptor(t)?{payload:t.send,transferables:t.transferables}:{payload:t,transferables:void 0}}function w(t,e){var n=b(e),r=n.payload,i=n.transferables,o={type:h.WorkerMessageType.error,uid:t,error:u.serialize(r)};f.default.postMessageToMaster(o,i)}function x(t,e,n){var r=b(n),i=r.payload,o=r.transferables,a={type:h.WorkerMessageType.result,uid:t,complete:!!e||void 0,payload:i};f.default.postMessageToMaster(a,o)}function S(t,e){var n={type:h.WorkerMessageType.running,uid:t,resultType:e};f.default.postMessageToMaster(n)}function _(t){try{var e={type:h.WorkerMessageType.uncaughtError,error:u.serialize(t)};f.default.postMessageToMaster(e)}catch(e){}}function k(t,e,n){return a(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,a,s,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.prev=0,o=e.apply(void 0,r(n)),i.next=7;break;case 4:return i.prev=4,i.t0=i.catch(0),i.abrupt("return",w(t,i.t0));case 7:if(a=y(o)?"observable":"promise",S(t,a),!y(o)){i.next=14;break}s=o.subscribe((function(e){return x(t,!1,u.serialize(e))}),(function(e){w(t,u.serialize(e)),m.delete(t)}),(function(){x(t,!0),m.delete(t)})),m.set(t,s),i.next=24;break;case 14:return i.prev=14,i.next=17,o;case 17:l=i.sent,x(t,!0,u.serialize(l)),i.next=24;break;case 21:i.prev=21,i.t1=i.catch(14),w(t,u.serialize(i.t1));case 24:case"end":return i.stop()}}),i,null,[[0,4],[14,21]])})))}e.expose=function(t){if(!f.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(g)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(g=!0,"function"==typeof t)f.default.subscribeToMasterMessages((function(e){v(e)&&!e.method&&k(e.uid,t,e.args.map(u.deserialize))})),e={type:h.WorkerMessageType.init,exposed:{type:"function"}},f.default.postMessageToMaster(e);else{if("object"!==o(t)||!t)throw Error("Invalid argument passed to expose(). Expected a function or an object, got: ".concat(t));f.default.subscribeToMasterMessages((function(e){v(e)&&e.method&&k(e.uid,t[e.method],e.args.map(u.deserialize))})),function(t){var e={type:h.WorkerMessageType.init,exposed:{type:"module",methods:t}};f.default.postMessageToMaster(e)}(Object.keys(t).filter((function(e){return"function"==typeof t[e]})))}var e;f.default.subscribeToMasterMessages((function(t){if((r=t)&&r.type===h.MasterMessageType.cancel){var e=t.uid,n=m.get(e);n&&(n.unsubscribe(),m.delete(e))}var r}))},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&f.default.isWorkerRuntime()&&(self.addEventListener("error",(function(t){setTimeout((function(){return _(t.error||t)}),250)})),self.addEventListener("unhandledrejection",(function(t){var e=t.reason;e&&"string"==typeof e.message&&setTimeout((function(){return _(e)}),250)}))),"undefined"!=typeof process&&"function"==typeof process.on&&f.default.isWorkerRuntime()&&(process.on("uncaughtException",(function(t){setTimeout((function(){return _(t)}),250)})),process.on("unhandledRejection",(function(t){t&&"string"==typeof t.message&&setTimeout((function(){return _(t)}),250)})))},8150:function(t,e,n){var r=n(6505).Transform,i=n(1736);function o(t){r.call(this,t),this._destroyed=!1}function a(t,e,n){n(null,t)}function s(t){return function(e,n,r){return"function"==typeof e&&(r=n,n=e,e={}),"function"!=typeof n&&(n=a),"function"!=typeof r&&(r=null),t(e,n,r)}}i(o,r),o.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;process.nextTick((function(){t&&e.emit("error",t),e.emit("close")}))}},t.exports=s((function(t,e,n){var r=new o(t);return r._transform=e,n&&(r._flush=n),r})),t.exports.ctor=s((function(t,e,n){function r(e){if(!(this instanceof r))return new r(e);this.options=Object.assign({},t,e),o.call(this,this.options)}return i(r,o),r.prototype._transform=e,n&&(r.prototype._flush=n),r})),t.exports.obj=s((function(t,e,n){var r=new o(Object.assign({objectMode:!0,highWaterMark:16},t));return r._transform=e,n&&(r._flush=n),r}))},5222:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){"use strict";var n=(e=e||{}).pos||0,r="<".charCodeAt(0),o=">".charCodeAt(0),a="-".charCodeAt(0),s="/".charCodeAt(0),l="!".charCodeAt(0),u="'".charCodeAt(0),c='"'.charCodeAt(0),h="[".charCodeAt(0);function f(){for(var e=[];t[n];)if(t.charCodeAt(n)==r){if(t.charCodeAt(n+1)===s)return(n=t.indexOf(">",n))+1&&(n+=1),e;if(t.charCodeAt(n+1)===l){if(t.charCodeAt(n+2)==a){for(;-1!==n&&(t.charCodeAt(n)!==o||t.charCodeAt(n-1)!=a||t.charCodeAt(n-2)!=a||-1==n);)n=t.indexOf(">",n+1);-1===n&&(n=t.length)}else{if(t.charCodeAt(n+2)===h&&t.charCodeAt(n+8)===h&&"cdata"===t.substr(n+3,5).toLowerCase()){var i=t.indexOf("]]>",n);-1==i?(e.push(t.substr(n+8)),n=t.length):(e.push(t.substring(n+9,i)),n=i+3);continue}for(n+=2;t.charCodeAt(n)!==o&&t[n];)n++}n++;continue}var u=m();e.push(u)}else{var c=p();c.trim().length>0&&e.push(c),n++}return e}function p(){var e=n;return-2==(n=t.indexOf("<",n)-1)&&(n=t.length),t.slice(e,n+1)}function d(){for(var e=n;-1==="\r\n\t>/= ".indexOf(t[n])&&t[n];)n++;return t.slice(e,n)}"]".charCodeAt(0);var g=e.noChildNodes||["img","br","input","meta","link"];function m(){n++;for(var e=d(),r={},i=[];t.charCodeAt(n)!==o&&t[n];){var a=t.charCodeAt(n);if(a>64&&a<91||a>96&&a<123){for(var l=d(),h=t.charCodeAt(n);h&&h!==u&&h!==c&&!(h>64&&h<91||h>96&&h<123)&&h!==o;)n++,h=t.charCodeAt(n);if(h===u||h===c){var p=v();if(-1===n)return{tagName:e,attributes:r,children:i}}else p=null,n--;r[l]=p}n++}if(t.charCodeAt(n-1)!==s)if("script"==e){var m=n+1;n=t.indexOf("<\/script>",n),i=[t.slice(m,n)],n+=9}else"style"==e?(m=n+1,n=t.indexOf("</style>",n),i=[t.slice(m,n)],n+=8):-1==g.indexOf(e)&&(n++,i=f());else n++;return{tagName:e,attributes:r,children:i}}function v(){var e=t[n],r=n+1;return n=t.indexOf(e,r),t.slice(r,n)}var y,b=null;if(void 0!==e.attrValue)for(e.attrName=e.attrName||"id",b=[];-1!==(void 0,y=new RegExp("\\s"+e.attrName+"\\s*=['\"]"+e.attrValue+"['\"]").exec(t),n=y?y.index:-1);)-1!==(n=t.lastIndexOf("<",n))&&b.push(m()),t=t.substr(n),n=0;else b=e.parseNode?m():f();return e.filter&&(b=i.filter(b,e.filter)),e.setPos&&(b.pos=n),b}t=n.nmd(t),i.simplify=function(t){var e={};if(!t.length)return"";if(1===t.length&&"string"==typeof t[0])return t[0];for(var n in t.forEach((function(t){if("object"===r(t)){e[t.tagName]||(e[t.tagName]=[]);var n=i.simplify(t.children);e[t.tagName].push(n),Object.keys(t.attributes).length&&(n._attributes=t.attributes)}})),e)1==e[n].length&&(e[n]=e[n][0]);return e},i.simplifyLostLess=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return t.length?1===t.length&&"string"==typeof t[0]?Object.keys(e).length?{_attributes:e,value:t[0]}:t[0]:(t.forEach((function(t){if("object"===r(t)){n[t.tagName]||(n[t.tagName]=[]);var e=i.simplifyLostLess(t.children||[],t.attributes);n[t.tagName].push(e),Object.keys(t.attributes).length&&(e._attributes=t.attributes)}})),n):""},i.filter=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=[];return t.forEach((function(t,s){if("object"===r(t)&&e(t,s,n,o)&&a.push(t),t.children){var l=i.filter(t.children,e,n+1,(o?o+".":"")+s+"."+t.tagName);a=a.concat(l)}})),a},i.stringify=function(t){var e="";function n(t){if(t)for(var n=0;n<t.length;n++)"string"==typeof t[n]?e+=t[n].trim():r(t[n])}function r(t){for(var r in e+="<"+t.tagName,t.attributes)null===t.attributes[r]?e+=" "+r:-1===t.attributes[r].indexOf('"')?e+=" "+r+'="'+t.attributes[r].trim()+'"':e+=" "+r+"='"+t.attributes[r].trim()+"'";e+=">",n(t.children),e+="</"+t.tagName+">"}return n(t),e},i.toContentString=function(t){if(Array.isArray(t)){var e="";return t.forEach((function(t){e=(e+=" "+i.toContentString(t)).trim()})),e}return"object"===r(t)?i.toContentString(t.children):" "+t},i.getElementById=function(t,e,n){var r=i(t,{attrValue:e});return n?i.simplify(r):r[0]},i.getElementsByClassName=function(t,e,n){var r=i(t,{attrName:"class",attrValue:"[a-zA-Z0-9- ]*"+e+"[a-zA-Z0-9- ]*"});return n?i.simplify(r):r},i.parseStream=function(t,e){if("string"==typeof e&&(e=e.length+2),"string"==typeof t){var r=n(4865);t=r.createReadStream(t,{start:e}),e=0}var o=e,a="";return t.on("data",(function(e){a+=e;for(var n=0;;){if(!(o=a.indexOf("<",o)+1))return void(o=n);if("/"!==a[o+1]){var r=i(a,{pos:o-1,parseNode:!0,setPos:!0});if((o=r.pos)>a.length-1||o<n)return a=a.slice(n),o=0,void(n=0);t.emit("xml",r),n=o}else o+=1,n=pos}})),t},i.transformStream=function(t){var e=n(8150);"string"==typeof t&&(t=t.length+2);var r=t||0,o="";return e({readableObjectMode:!0},(function(t,e,n){o+=t;for(var a=0;;){if(!(r=o.indexOf("<",r)+1))return r=a,n();if("/"!==o[r+1]){var s=i(o,{pos:r-1,parseNode:!0,setPos:!0});if((r=s.pos)>o.length-1||r<a)return o=o.slice(a),r=0,n();this.push(s),a=r}else r+=1,a=pos}n()}))},"object"===r(t)&&(t.exports=i,i.xml=i)},8677:function(t,e,n){var r;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=n.nmd(t),function(o){var a="object"==i(e)&&e&&!e.nodeType&&e,s="object"==i(t)&&t&&!t.nodeType&&t,l="object"==(void 0===n.g?"undefined":i(n.g))&&n.g;l.global!==l&&l.window!==l&&l.self!==l||(o=l);var u,c,h=2147483647,f=36,p=/^xn--/,d=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,y=String.fromCharCode;function b(t){throw RangeError(m[t])}function w(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function x(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+w((t=t.replace(g,".")).split("."),e).join(".")}function S(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function _(t){return w(t,(function(t){var e="";return t>65535&&(e+=y((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+y(t)})).join("")}function k(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,n){var r=0;for(t=n?v(t/700):t>>1,t+=v(t/e);t>455;r+=f)t=v(t/35);return v(r+36*t/(t+38))}function M(t){var e,n,r,i,o,a,s,l,u,c,p,d=[],g=t.length,m=0,y=128,w=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&b("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=m,a=1,s=f;i>=g&&b("invalid-input"),((l=(p=t.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:f)>=f||l>v((h-m)/a))&&b("overflow"),m+=l*a,!(l<(u=s<=w?1:s>=w+26?26:s-w));s+=f)a>v(h/(c=f-u))&&b("overflow"),a*=c;w=E(m-o,e=d.length+1,0==o),v(m/e)>h-y&&b("overflow"),y+=v(m/e),m%=e,d.splice(m++,0,y)}return _(d)}function T(t){var e,n,r,i,o,a,s,l,u,c,p,d,g,m,w,x=[];for(d=(t=S(t)).length,e=128,n=0,o=72,a=0;a<d;++a)(p=t[a])<128&&x.push(y(p));for(r=i=x.length,i&&x.push("-");r<d;){for(s=h,a=0;a<d;++a)(p=t[a])>=e&&p<s&&(s=p);for(s-e>v((h-n)/(g=r+1))&&b("overflow"),n+=(s-e)*g,e=s,a=0;a<d;++a)if((p=t[a])<e&&++n>h&&b("overflow"),p==e){for(l=n,u=f;!(l<(c=u<=o?1:u>=o+26?26:u-o));u+=f)w=l-c,m=f-c,x.push(y(k(c+w%m,0))),l=v(w/m);x.push(y(k(l,0))),o=E(n,g,r==i),n=0,++r}++n,++e}return x.join("")}if(u={version:"1.3.2",ucs2:{decode:S,encode:_},decode:M,encode:T,toASCII:function(t){return x(t,(function(t){return d.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return x(t,(function(t){return p.test(t)?M(t.slice(4).toLowerCase()):t}))}},"object"==i(n.amdO)&&n.amdO)void 0===(r=function(){return u}.call(e,n,e,t))||(t.exports=r);else if(a&&s)if(t.exports==a)s.exports=u;else for(c in u)u.hasOwnProperty(c)&&(a[c]=u[c]);else o.punycode=u}(this)},1143:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(8677),o=n(5751);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){return o.isString(t)&&(t=w(t)),t instanceof a?t.format():a.prototype.format.call(t)},e.Url=a;var s=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(c),f=["%","/","?",";","#"].concat(h),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(8320);function w(t,e,n){if(t&&o.isObject(t)&&t instanceof a)return t;var r=new a;return r.parse(t,e,n),r}a.prototype.parse=function(t,e,n){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+r(t));var a=t.indexOf("?"),l=-1!==a&&a<t.indexOf("#")?"?":"#",c=t.split(l);c[0]=c[0].replace(/\\/g,"/");var w=t=c.join(l);if(w=w.trim(),!n&&1===t.split("#").length){var x=u.exec(w);if(x)return this.path=w,this.href=w,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var S=s.exec(w);if(S){var _=(S=S[0]).toLowerCase();this.protocol=_,w=w.substr(S.length)}if(n||S||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===w.substr(0,2);!k||S&&v[S]||(w=w.substr(2),this.slashes=!0)}if(!v[S]&&(k||S&&!y[S])){for(var E,M,T=-1,O=0;O<p.length;O++)-1!==(P=w.indexOf(p[O]))&&(-1===T||P<T)&&(T=P);for(-1!==(M=-1===T?w.lastIndexOf("@"):w.lastIndexOf("@",T))&&(E=w.slice(0,M),w=w.slice(M+1),this.auth=decodeURIComponent(E)),T=-1,O=0;O<f.length;O++){var P;-1!==(P=w.indexOf(f[O]))&&(-1===T||P<T)&&(T=P)}-1===T&&(T=w.length),this.host=w.slice(0,T),w=w.slice(T),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var I=this.hostname.split(/\./),A=(O=0,I.length);O<A;O++){var L=I[O];if(L&&!L.match(d)){for(var R="",j=0,N=L.length;j<N;j++)L.charCodeAt(j)>127?R+="x":R+=L[j];if(!R.match(d)){var $=I.slice(0,O),F=I.slice(O+1),D=L.match(g);D&&($.push(D[1]),F.unshift(D[2])),F.length&&(w="/"+F.join(".")+w),this.hostname=$.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=i.toASCII(this.hostname));var G=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+G,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!m[_])for(O=0,A=h.length;O<A;O++){var B=h[O];if(-1!==w.indexOf(B)){var z=encodeURIComponent(B);z===B&&(z=escape(B)),w=w.split(B).join(z)}}var V=w.indexOf("#");-1!==V&&(this.hash=w.substr(V),w=w.slice(0,V));var q=w.indexOf("?");if(-1!==q?(this.search=w.substr(q),this.query=w.substr(q+1),e&&(this.query=b.parse(this.query)),w=w.slice(0,q)):e&&(this.search="",this.query={}),w&&(this.pathname=w),y[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var H=this.search||"";this.path=G+H}return this.href=this.format(),this},a.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},a.prototype.resolveObject=function(t){if(o.isString(t)){var e=new a;e.parse(t,!1,!0),t=e}for(var n=new a,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=t[c])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||v[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=w||b||n.host&&t.pathname,S=x,_=n.pathname&&n.pathname.split("/")||[],k=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(k&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),x=x&&(""===d[0]||""===_[0])),w)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),n.search=t.search,n.query=t.query;else if(!o.isNullOrUndefined(t.search))return k&&(n.hostname=n.host=_.shift(),(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift())),n.search=t.search,n.query=t.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=_.slice(-1)[0],M=(n.host||t.host||_.length>1)&&("."===E||".."===E)||""===E,T=0,O=_.length;O>=0;O--)"."===(E=_[O])?_.splice(O,1):".."===E?(_.splice(O,1),T++):T&&(_.splice(O,1),T--);if(!x&&!S)for(;T--;T)_.unshift("..");!x||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),M&&"/"!==_.join("/").substr(-1)&&_.push("");var P,C=""===_[0]||_[0]&&"/"===_[0].charAt(0);return k&&(n.hostname=n.host=C?"":_.length?_.shift():"",(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift())),(x=x||n.host&&_.length)&&!C&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},5751:function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===e(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},6219:function(t,e,n){function r(t){try{if(!n.g.localStorage)return!1}catch(t){return!1}var e=n.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation"),n=!0}return t.apply(this,arguments)}}},8338:function(t){(function(){var e;t.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return e},getLink:function(t){return"https://fonts.google.com/specimen/"+t.replace(/( )/g,"+")},normalizeName:function(t){return t}},e=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},8518:function(t){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.head;case 1:if(!e){t.next=7;break}return t.next=4,e.value;case 4:e=e.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}},8692:function(t,e,n){"use strict";function r(t){var e=this;if(e instanceof r||(e=new r),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}function i(t,e,n){var r=e===t.head?new s(n,null,e,t):new s(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function o(t,e){t.tail=new s(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function a(t,e){t.head=new s(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,e,n,r){if(!(this instanceof s))return new s(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},r.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)a(this,arguments[t]);return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},r.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},r.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},r.prototype.map=function(t,e){e=e||this;for(var n=new r,i=this.head;null!==i;)n.push(t.call(e,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(t,e){e=e||this;for(var n=new r,i=this.tail;null!==i;)n.push(t.call(e,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=t(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=t(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},r.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<e;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,o=this.tail;null!==o&&i>e;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;var o=[];for(n=0;r&&n<e;n++)o.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=i(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return o},r.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{n(8518)(r)}catch(t){}},1555:function(){},2913:function(){},713:function(){},2361:function(){},4616:function(){},4865:function(){},7312:function(t,e,n){"use strict";function r(t,e,n){for(var r,o,a=n||i,s=0,l=t.length,u=!1;s<l;)(o=+a(t[r=s+(l-s>>1)],e))<0?s=r+1:(l=r,u=!o);return u?s:~s}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function a(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var i=void 0;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return r-1}function s(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function l(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function u(t,e){for(var n,r=t.length>>>0,i=0;i<r;i++)if(e(n=t[i],i,t))return n;return null}function c(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function h(t,e){var n;return t.every((function(r,i){return n=i,!e(r,i,t)}))?-1:n}function f(t,e,n){var r=e||i;return t.every((function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(o>0||n&&0===o)}))}function p(){return function(){throw new Error("Unimplemented abstract method.")}()}n.d(e,{default:function(){return t$}});var d=0;function g(t){return t.ol_uid||(t.ol_uid=String(++d))}var m,v="6.7.1-dev",y=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t){function e(e){var n=this,r="Assertion failed. See https://openlayers.org/en/v"+v.split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,r)||this).code=e,n.name="AssertionError",n.message=r,n}return y(e,t),e}(Error);function w(t,e){if(!t)throw new b(e)}function x(t,e,n){return Math.min(Math.max(t,e),n)}var S="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},_="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function k(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return E(t,e,n,r)}function E(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function M(t){for(var e=t.length,n=0;n<e;n++){for(var r=n,i=Math.abs(t[n][n]),o=n+1;o<e;o++){var a=Math.abs(t[o][n]);a>i&&(i=a,r=o)}if(0===i)return null;var s=t[r];t[r]=t[n],t[n]=s;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}function T(t){return 180*t/Math.PI}function O(t){return t*Math.PI/180}function P(t,e){var n=t%e;return n*e<0?n+e:n}function C(t,e,n){return t+n*(e-t)}function I(t,e,n){return function(r,i,o,a,s){if(r){var l=e?0:o[0]*i,u=e?0:o[1]*i,c=s?s[0]:0,h=s?s[1]:0,f=t[0]+l/2+c,p=t[2]-l/2+c,d=t[1]+u/2+h,g=t[3]-u/2+h;f>p&&(p=f=(p+f)/2),d>g&&(g=d=(g+d)/2);var m=x(r[0],f,p),v=x(r[1],d,g),y=30*i;return a&&n&&(m+=-y*Math.log(1+Math.max(0,f-r[0])/y)+y*Math.log(1+Math.max(0,r[0]-p)/y),v+=-y*Math.log(1+Math.max(0,d-r[1])/y)+y*Math.log(1+Math.max(0,r[1]-g)/y)),[m,v]}}}function A(t){return t}function L(t){t.stopPropagation()}var R=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),j="propertychange",N=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function $(){return!0}function F(){return!1}function D(){}function G(t){var e,n,r,i=!1;return function(){var o=Array.prototype.slice.call(arguments);return i&&this===r&&c(o,n)||(i=!0,r=this,n=o,e=t.apply(this,arguments)),e}}var U="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function B(t){for(var e in t)delete t[e]}var z="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function V(t){var e;for(e in t)return!1;return!e}var q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(t){function e(e){var n=t.call(this)||this;return n.u=e,n.p=null,n.S=null,n._=null,n}return q(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this._||(this._={}),r=n[t]||(n[t]=[]);-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new R(t):t,n=e.type;e.target||(e.target=this.u||this);var r,i=this._&&this._[n];if(i){var o=this.S||(this.S={}),a=this.p||(this.p={});n in o||(o[n]=0,a[n]=0),++o[n];for(var s=0,l=i.length;s<l;++s)if(!1===(r="handleEvent"in i[s]?i[s].handleEvent(e):i[s].call(this,e))||e.propagationStopped){r=!1;break}if(--o[n],0===o[n]){var u=a[n];for(delete a[n];u--;)this.removeEventListener(n,D);delete o[n]}return r}},e.prototype.disposeInternal=function(){this._&&B(this._)},e.prototype.getListeners=function(t){return this._&&this._[t]||void 0},e.prototype.hasListener=function(t){return!!this._&&(t?t in this._:Object.keys(this._).length>0)},e.prototype.removeEventListener=function(t,e){var n=this._&&this._[t];if(n){var r=n.indexOf(e);-1!==r&&(this.p&&t in this.p?(n[r]=D,++this.p[t]):(n.splice(r,1),0===n.length&&delete this._[t]))}},e}(N),W="change",K="error",Y="contextmenu",X="click",Z="drop",J="keydown",Q="keypress",tt="load",et="resize",nt="touchmove",rt="wheel";function it(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function ot(t,e,n,r){return it(t,e,n,r,!0)}function at(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),B(t))}var st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.O=0,e}return st(e,t),e.prototype.changed=function(){++this.O,this.dispatchEvent(W)},e.prototype.getRevision=function(){return this.O},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=it(this,t[i],e);return r}return it(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var r=t.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=ot(this,t[i],e)}else n=ot(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)ut(n);else if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(H);function ut(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)at(t[e]);else at(t)}lt.prototype.on,lt.prototype.once,lt.prototype.un;var ct=lt,ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.key=n,i.oldValue=r,i}return ht(e,t),e}(R),pt=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,g(n),n.A=null,void 0!==e&&n.setProperties(e),n}return ht(e,t),e.prototype.get=function(t){var e;return this.A&&this.A.hasOwnProperty(t)&&(e=this.A[t]),e},e.prototype.getKeys=function(){return this.A&&Object.keys(this.A)||[]},e.prototype.getProperties=function(){return this.A&&U({},this.A)||{}},e.prototype.hasProperties=function(){return!!this.A},e.prototype.notify=function(t,e){var n;n="change:"+t,this.dispatchEvent(new ft(n,t,e)),n=j,this.dispatchEvent(new ft(n,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var r=this.A||(this.A={});if(n)r[t]=e;else{var i=r[t];r[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.A&&U(this.A||(this.A={}),t.A)},e.prototype.unset=function(t,e){if(this.A&&t in this.A){var n=this.A[t];delete this.A[t],V(this.A)&&(this.A=null),e||this.notify(t,n)}},e}(ct),dt="add",gt="remove",mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt="length",yt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.element=n,i.index=r,i}return mt(e,t),e}(R),bt=function(t){function e(e,n){var r=t.call(this)||this;r.on,r.once,r.un;var i=n||{};if(r.T=!!i.unique,r.R=e||[],r.T)for(var o=0,a=r.R.length;o<a;++o)r.C(r.R[o],o);return r.P(),r}return mt(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.R,n=0,r=e.length;n<r;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.R},e.prototype.item=function(t){return this.R[t]},e.prototype.getLength=function(){return this.get(vt)},e.prototype.insertAt=function(t,e){this.T&&this.C(e),this.R.splice(t,0,e),this.P(),this.dispatchEvent(new yt(dt,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.T&&this.C(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.R,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.R[t];return this.R.splice(t,1),this.P(),this.dispatchEvent(new yt(gt,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.T&&this.C(e,t);var r=this.R[t];this.R[t]=e,this.dispatchEvent(new yt(gt,r,t)),this.dispatchEvent(new yt(dt,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.P=function(){this.set(vt,this.R.length)},e.prototype.C=function(t,e){for(var n=0,r=this.R.length;n<r;++n)if(this.R[n]===t&&n!==e)throw new b(58)},e}(pt),wt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,xt=/^([a-z]*)$|^hsla?\(.*\)$/i;function St(t){return"string"==typeof t?t:Tt(t)}function _t(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}var kt=function(){var t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){var i=0;for(var o in t)0==(3&i++)&&(delete t[o],--e)}r=function(t){var e,n,r,i,o;if(xt.exec(t)&&(t=_t(t)),wt.exec(t)){var a,s=t.length-1;a=s<=4?1:2;var l=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),n=parseInt(t.substr(1+1*a,a),16),r=parseInt(t.substr(1+2*a,a),16),i=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,l&&(i=(i<<4)+i)),o=[e,n,r,i/255]}else 0==t.indexOf("rgba(")?Mt(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Mt(o)):w(!1,14);return o}(n),t[n]=r,++e}return r}}();function Et(t){return Array.isArray(t)?t:kt(t)}function Mt(t){return t[0]=x(t[0]+.5|0,0,255),t[1]=x(t[1]+.5|0,0,255),t[2]=x(t[2]+.5|0,0,255),t[3]=x(t[3],0,1),t}function Tt(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+n+","+r+","+(void 0===t[3]?1:t[3])+")"}function Ot(t){return xt.test(t)&&(t=_t(t)),wt.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}function Pt(t){return Array.isArray(t)?Tt(t):t}var Ct="postrender",It="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",At=-1!==It.indexOf("firefox"),Lt=-1!==It.indexOf("safari")&&-1==It.indexOf("chrom"),Rt=-1!==It.indexOf("webkit")&&-1==It.indexOf("edge"),jt=-1!==It.indexOf("macintosh"),Nt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,$t="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Ft="undefined"!=typeof Image&&Image.prototype.decode,Dt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function Gt(t,e,n,r){var i;return n&&n.length?i=n.shift():$t?i=new OffscreenCanvas(t||300,e||300):(i=document.createElement("canvas")).style.all="unset",t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}function Ut(t){var e=t.offsetWidth,n=getComputedStyle(t);return e+(parseInt(n.marginLeft,10)+parseInt(n.marginRight,10))}function Bt(t){var e=t.offsetHeight,n=getComputedStyle(t);return e+(parseInt(n.marginTop,10)+parseInt(n.marginBottom,10))}function zt(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function Vt(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function qt(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function Ht(t,e){for(var n=t.childNodes,r=0;;++r){var i=n[r],o=e[r];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--r):t.appendChild(o))}}var Wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=function(t){function e(e){var n=t.call(this)||this,r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),n.element=r||null,n.D=null,n.L=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return Wt(e,t),e.prototype.disposeInternal=function(){Vt(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.L},e.prototype.setMap=function(t){this.L&&Vt(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)at(this.listenerKeys[e]);this.listenerKeys.length=0,this.L=t,this.L&&((this.D?this.D:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==D&&this.listenerKeys.push(it(t,Ct,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.D="string"==typeof t?document.getElementById(t):t},e}(pt),Yt="ol-hidden",Xt="ol-unselectable",Zt="ol-unsupported",Jt="ol-control",Qt="ol-collapsed",te=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),ee=["style","variant","weight","size","lineHeight","family"],ne=function(t){var e=t.match(te);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,i=ee.length;r<i;++r){var o=e[r+1];void 0!==o&&(n[ee[r]]=o)}return n.families=n.family.split(/,\s?/),n},re="opacity",ie="visible",oe="extent",ae="zIndex",se="maxResolution",le="minResolution",ue="maxZoom",ce="minZoom",he="source";function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),de=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=U({},e);return"object"===fe(e.properties)&&(delete r.properties,U(r,e.properties)),r[re]=void 0!==e.opacity?e.opacity:1,w("number"==typeof r[re],64),r[ie]=void 0===e.visible||e.visible,r[ae]=e.zIndex,r[se]=void 0!==e.maxResolution?e.maxResolution:1/0,r[le]=void 0!==e.minResolution?e.minResolution:0,r[ce]=void 0!==e.minZoom?e.minZoom:-1/0,r[ue]=void 0!==e.maxZoom?e.maxZoom:1/0,n.U=void 0!==r.className?e.className:"ol-layer",delete r.className,n.setProperties(r),n.B=null,n}return pe(e,t),e.prototype.getClassName=function(){return this.U},e.prototype.getLayerState=function(t){var e=this.B||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=x(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.B=e,e},e.prototype.getLayersArray=function(t){return p()},e.prototype.getLayerStatesArray=function(t){return p()},e.prototype.getExtent=function(){return this.get(oe)},e.prototype.getMaxResolution=function(){return this.get(se)},e.prototype.getMinResolution=function(){return this.get(le)},e.prototype.getMinZoom=function(){return this.get(ce)},e.prototype.getMaxZoom=function(){return this.get(ue)},e.prototype.getOpacity=function(){return this.get(re)},e.prototype.getSourceState=function(){return p()},e.prototype.getVisible=function(){return this.get(ie)},e.prototype.getZIndex=function(){return this.get(ae)},e.prototype.setExtent=function(t){this.set(oe,t)},e.prototype.setMaxResolution=function(t){this.set(se,t)},e.prototype.setMinResolution=function(t){this.set(le,t)},e.prototype.setMaxZoom=function(t){this.set(ue,t)},e.prototype.setMinZoom=function(t){this.set(ce,t)},e.prototype.setOpacity=function(t){w("number"==typeof t,64),this.set(re,t)},e.prototype.setVisible=function(t){this.set(ie,t)},e.prototype.setZIndex=function(t){this.set(ae,t)},e.prototype.disposeInternal=function(){this.B&&(this.B.layer=null,this.B=null),t.prototype.disposeInternal.call(this)},e}(pt),ge="prerender",me="postrender",ve="precompose",ye="rendercomplete",be="undefined",we="loading",xe="ready",Se="error",_e=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ke(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}var Ee=function(t){function e(e){var n=this,r=U({},e);delete r.source,(n=t.call(this,r)||this).on,n.once,n.un,n.G=null,n.V=null,n.W=null,n.H=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(he,n.K);var i=e.source?e.source:null;return n.setSource(i),n}return _e(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(he)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():be},e.prototype.tt=function(){this.changed()},e.prototype.K=function(){this.W&&(at(this.W),this.W=null);var t=this.getSource();t&&(this.W=it(t,W,this.tt,this)),this.changed()},e.prototype.getFeatures=function(t){return this.H?this.H.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.G&&(at(this.G),this.G=null),t||this.changed(),this.V&&(at(this.V),this.V=null),t&&(this.G=it(t,ve,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);w(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.V=it(this,W,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(he,t)},e.prototype.getRenderer=function(){return this.H||(this.H=this.createRenderer()),this.H},e.prototype.hasRenderer=function(){return!!this.H},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(de),Me=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Te=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).nt=document.createElement("ul"),n.et=void 0===r.collapsed||r.collapsed,n.rt=n.et,n.it=void 0!==r.collapsible,n.ot=void 0===r.collapsible||r.collapsible,n.ot||(n.et=!1);var i=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.expandClassName?r.expandClassName:i+"-expand",s=void 0!==r.collapseLabel?r.collapseLabel:"Â»",l=void 0!==r.collapseClassName?r.collapseClassName:i+"-collpase";"string"==typeof s?(n.st=document.createElement("span"),n.st.textContent=s,n.st.className=l):n.st=s;var u=void 0!==r.label?r.label:"i";"string"==typeof u?(n.ut=document.createElement("span"),n.ut.textContent=u,n.ut.className=a):n.ut=u;var c=n.ot&&!n.et?n.st:n.ut;n.ft=document.createElement("button"),n.ft.setAttribute("type","button"),n.ft.setAttribute("aria-expanded",String(!n.et)),n.ft.title=o,n.ft.appendChild(c),n.ft.addEventListener(X,n.ct.bind(n),!1);var h=i+" ol-unselectable "+Jt+(n.et&&n.ot?" ol-collapsed":"")+(n.ot?"":" ol-uncollapsible"),f=n.element;return f.className=h,f.appendChild(n.ft),f.appendChild(n.nt),n.ht=[],n.lt=!0,n}return Me(e,t),e.prototype.vt=function(t){for(var e={},n=[],r=!0,i=t.layerStatesArray,o=0,a=i.length;o<a;++o){var s=i[o];if(ke(s,t.viewState)){var l=s.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(r=r&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,f=c.length;h<f;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.it||this.setCollapsible(r),n},e.prototype.dt=function(t){if(t){var e=this.vt(t),n=e.length>0;if(this.lt!=n&&(this.element.style.display=n?"":"none",this.lt=n),!c(e,this.ht)){qt(this.nt);for(var r=0,i=e.length;r<i;++r){var o=document.createElement("li");o.innerHTML=e[r],this.nt.appendChild(o)}this.ht=e}}else this.lt&&(this.element.style.display="none",this.lt=!1)},e.prototype.ct=function(t){t.preventDefault(),this.yt(),this.rt=this.et},e.prototype.yt=function(){this.element.classList.toggle(Qt),this.et?zt(this.st,this.ut):zt(this.ut,this.st),this.et=!this.et,this.ft.setAttribute("aria-expanded",String(!this.et))},e.prototype.getCollapsible=function(){return this.ot},e.prototype.setCollapsible=function(t){this.ot!==t&&(this.ot=t,this.element.classList.toggle("ol-uncollapsible"),this.rt&&this.yt())},e.prototype.setCollapsed=function(t){this.rt=t,this.ot&&this.et!==t&&this.yt()},e.prototype.getCollapsed=function(){return this.et},e.prototype.render=function(t){this.dt(t.frameState)},e}(Kt),Oe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function Ce(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function Ie(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Ae(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var Le=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,n.once,n.un,n.bt=void 0!==r.className?r.className:"ol-full-screen",n.wt=void 0!==r.activeClassName?r.activeClassName.split(" "):[n.bt+"-true"],n.gt=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[n.bt+"-false"];var i=void 0!==r.label?r.label:"â¤¢";n.kt="string"==typeof i?document.createTextNode(i):i;var o=void 0!==r.labelActive?r.labelActive:"Ã";n.xt="string"==typeof o?document.createTextNode(o):o,n.St=document.createElement("button");var a=r.tipLabel?r.tipLabel:"Toggle full-screen";n._t(n.St,Ie()),n.St.setAttribute("type","button"),n.St.title=a,n.St.appendChild(n.kt),n.St.addEventListener(X,n.ct.bind(n),!1);var s=n.bt+" ol-unselectable ol-control "+(Ce()?"":Zt),l=n.element;return l.className=s,l.appendChild(n.St),n.Mt=void 0!==r.keys&&r.keys,n.jt=r.source,n}return Oe(e,t),e.prototype.ct=function(t){t.preventDefault(),this.Ot()},e.prototype.Ot=function(){if(Ce()){var t=this.getMap();if(t)if(Ie())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e;e=this.jt?"string"==typeof this.jt?document.getElementById(this.jt):this.jt:t.getTargetElement(),this.Mt?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Ae(t)}(e):Ae(e)}}},e.prototype.At=function(){var t=this.getMap();Ie()?(this._t(this.St,!0),zt(this.xt,this.kt),this.dispatchEvent("enterfullscreen")):(this._t(this.St,!1),zt(this.kt,this.xt),this.dispatchEvent("leavefullscreen")),t&&t.updateSize()},e.prototype._t=function(t,e){var n,r,i,o=this.wt,a=this.gt,s=e?o:a;(n=t.classList).remove.apply(n,o),(r=t.classList).remove.apply(r,a),(i=t.classList).add.apply(i,s)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var n=0,r=Pe.length;n<r;++n)this.listenerKeys.push(it(document,Pe[n],this.At,this))},e}(Kt),Re="pointermove",je="pointerdown",Ne="pointerup",$e={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Fe={9001:$e.METERS,9002:$e.FEET,9003:$e.USFEET,9101:$e.RADIANS,9102:$e.DEGREES};function De(t){return Fe[t]}var Ge={};Ge[$e.RADIANS]=6370997/(2*Math.PI),Ge[$e.DEGREES]=2*Math.PI*6370997/360,Ge[$e.FEET]=.3048,Ge[$e.METERS]=1,Ge[$e.USFEET]=1200/3937;var Ue=$e,Be=function(){function t(t){this.Tt=t.code,this.Et=t.units,this.Rt=void 0!==t.extent?t.extent:null,this.Ct=void 0!==t.worldExtent?t.worldExtent:null,this.It=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.Pt=void 0!==t.global&&t.global,this.Dt=!(!this.Pt||!this.Rt),this.Nt=t.getPointResolution,this.Lt=null,this.zt=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.Dt},t.prototype.getCode=function(){return this.Tt},t.prototype.getExtent=function(){return this.Rt},t.prototype.getUnits=function(){return this.Et},t.prototype.getMetersPerUnit=function(){return this.zt||Ge[this.Et]},t.prototype.getWorldExtent=function(){return this.Ct},t.prototype.getAxisOrientation=function(){return this.It},t.prototype.isGlobal=function(){return this.Pt},t.prototype.setGlobal=function(t){this.Pt=t,this.Dt=!(!t||!this.Rt)},t.prototype.getDefaultTileGrid=function(){return this.Lt},t.prototype.setDefaultTileGrid=function(t){this.Lt=t},t.prototype.setExtent=function(t){this.Rt=t,this.Dt=!(!this.Pt||!t)},t.prototype.setWorldExtent=function(t){this.Ct=t},t.prototype.setGetPointResolution=function(t){this.Nt=t},t.prototype.getPointResolutionFunc=function(){return this.Nt},t}(),ze=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=6378137,qe=Math.PI*Ve,He=[-qe,-qe,qe,qe],We=[-180,-85,180,85],Ke=Ve*Math.log(Math.tan(Math.PI/2)),Ye=function(t){function e(e){return t.call(this,{code:e,units:Ue.METERS,extent:He,global:!0,worldExtent:We,getPointResolution:function(t,e){return t/S(e[1]/Ve)}})||this}return ze(e,t),e}(Be),Xe=[new Ye("EPSG:3857"),new Ye("EPSG:102100"),new Ye("EPSG:102113"),new Ye("EPSG:900913"),new Ye("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ye("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ze(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i){o[a]=qe*t[a]/180;var s=Ve*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));s>Ke?s=Ke:s<-Ke&&(s=-Ke),o[a+1]=s}return o}function Je(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i)o[a]=180*t[a]/qe,o[a+1]=360*Math.atan(Math.exp(t[a+1]/Ve))/Math.PI-90;return o}var Qe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tn=6378137,en=[-180,-90,180,90],nn=Math.PI*tn/180,rn=function(t){function e(e,n){return t.call(this,{code:e,units:Ue.DEGREES,extent:en,axisOrientation:n,global:!0,metersPerUnit:nn,worldExtent:en})||this}return Qe(e,t),e}(Be),on=[new rn("CRS:84"),new rn("EPSG:4326","neu"),new rn("urn:ogc:def:crs:OGC:1.3:CRS84"),new rn("urn:ogc:def:crs:OGC:2:84"),new rn("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new rn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new rn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],an={};function sn(){an={}}function ln(t){return an[t]||an[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function un(t,e){an[t]=e}var cn={};function hn(){cn={}}function fn(t,e,n){var r=t.getCode(),i=e.getCode();r in cn||(cn[r]={}),cn[r][i]=n}function pn(t,e){var n;return t in cn&&e in cn[t]&&(n=cn[t][e]),n}var dn="top-left";function gn(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,r=t.length;n<r;++n)In(e,t[n]);return e}function mn(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function vn(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function yn(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function bn(t,e){return xn(t,e[0],e[1])}function wn(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function xn(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Sn(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=0;return a<n?l|=16:a>i&&(l|=4),s<r?l|=8:s>o&&(l|=2),0===l&&(l=1),l}function _n(){return[1/0,1/0,-1/0,-1/0]}function kn(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function En(t){return kn(1/0,1/0,-1/0,-1/0,t)}function Mn(t,e){var n=t[0],r=t[1];return kn(n,r,n,r,e)}function Tn(t,e,n,r,i){return Ln(En(i),t,e,n,r)}function On(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Pn(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function Cn(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function In(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function An(t,e){for(var n=0,r=e.length;n<r;++n)In(t,e[n]);return t}function Ln(t,e,n,r,i){for(;n<r;n+=i)jn(t,e[n],e[n+1]);return t}function Rn(t,e){for(var n=0,r=e.length;n<r;++n)An(t,e[n]);return t}function jn(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Nn(t,e){var n;return(n=e(Fn(t)))||(n=e(Dn(t)))||(n=e(Hn(t)))?n:(n=e(qn(t)))||!1}function $n(t){return Wn(t)*zn(t)}function Fn(t){return[t[0],t[1]]}function Dn(t){return[t[2],t[1]]}function Gn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Un(t,e){var n;return"bottom-left"===e?n=Fn(t):"bottom-right"===e?n=Dn(t):e===dn?n=qn(t):"top-right"===e?n=Hn(t):w(!1,13),n}function Bn(t,e,n,r,i){var o=e*r[0]/2,a=e*r[1]/2,s=Math.cos(n),l=Math.sin(n),u=o*s,c=o*l,h=a*s,f=a*l,p=t[0],d=t[1],g=p-u+f,m=p-u-f,v=p+u-f,y=p+u+f,b=d-c-h,w=d-c+h,x=d+c+h,S=d+c-h;return kn(Math.min(g,m,v,y),Math.min(b,w,x,S),Math.max(g,m,v,y),Math.max(b,w,x,S),i)}function zn(t){return t[3]-t[1]}function Vn(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return Kn(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):En(r),r}function qn(t){return[t[0],t[3]]}function Hn(t){return[t[2],t[3]]}function Wn(t){return t[2]-t[0]}function Kn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Yn(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Xn(t,e){var n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}function Zn(t,e,n){var r=!1,i=Sn(t,e),o=Sn(t,n);if(1===i||1===o)r=!0;else{var a=t[0],s=t[1],l=t[2],u=t[3],c=e[0],h=e[1],f=n[0],p=n[1],d=(p-h)/(f-c),g=void 0,m=void 0;2&o&&!(2&i)&&(r=(g=f-(p-u)/d)>=a&&g<=l),r||!(4&o)||4&i||(r=(m=p-(f-l)*d)>=s&&m<=u),r||!(8&o)||8&i||(r=(g=f-(p-s)/d)>=a&&g<=l),r||!(16&o)||16&i||(r=(m=p-(f-a)*d)>=s&&m<=u)}return r}function Jn(t,e,n,r){var i=[];if(r>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<r;++s)i.push(t[0]+o*s/r,t[1],t[2],t[1]+a*s/r,t[2]-o*s/r,t[3],t[0],t[3]-a*s/r);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var l=[],u=[],c=(s=0,i.length);s<c;s+=2)l.push(i[s]),u.push(i[s+1]);return function(t,e,n){return kn(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(l,u,n)}function Qn(t,e){var n=e.getExtent(),r=Gn(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){var i=Wn(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}var tr={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},er=6371008.8;function nr(t,e,n){var r=n||er,i=O(t[1]),o=O(e[1]),a=(o-i)/2,s=O(e[0]-t[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function rr(t,e){for(var n=0,r=0,i=t.length;r<i-1;++r)n+=nr(t[r],t[r+1],e);return n}function ir(t,e){for(var n=0,r=t.length,i=t[r-1][0],o=t[r-1][1],a=0;a<r;a++){var s=t[a][0],l=t[a][1];n+=O(s-i)*(2+Math.sin(O(o))+Math.sin(O(l))),i=s,o=l}return n*e*e/2}function or(t,e,n,r){var i=r||er,o=O(t[1]),a=O(t[0]),s=e/i,l=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(n));return[T(a+Math.atan2(Math.sin(n)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(l))),T(l)]}function ar(t,e,n){var r=void 0!==n?t.toFixed(n):""+t,i=r.indexOf(".");return(i=-1===i?r.length:i)>e?r:new Array(1+e-i).join("0")+r}function sr(t,e){for(var n=(""+t).split("."),r=(""+e).split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),a=parseInt(r[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function lr(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function ur(t,e){var n=e.getRadius(),r=e.getCenter(),i=r[0],o=r[1],a=t[0]-i,s=t[1]-o;0===a&&0===s&&(a=1);var l=Math.sqrt(a*a+s*s);return[i+n*a/l,o+n*s/l]}function cr(t,e){var n,r,i=t[0],o=t[1],a=e[0],s=e[1],l=a[0],u=a[1],c=s[0],h=s[1],f=c-l,p=h-u,d=0===f&&0===p?0:(f*(i-l)+p*(o-u))/(f*f+p*p||0);return d<=0?(n=l,r=u):d>=1?(n=c,r=h):(n=l+d*f,r=u+d*p),[n,r]}function hr(t,e,n){var r=P(e+180,360)-180,i=Math.abs(3600*r),o=n||0,a=Math.pow(10,o),s=Math.floor(i/3600),l=Math.floor((i-3600*s)/60),u=i-3600*s-60*l;return(u=Math.ceil(u*a)/a)>=60&&(u=0,l+=1),l>=60&&(l=0,s+=1),s+"Â° "+ar(l,2)+"â² "+ar(u,2,o)+"â³"+(0==r?"":" "+t.charAt(r<0?1:0))}function fr(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}function pr(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function dr(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function gr(t,e){return t[0]*=e,t[1]*=e,t}function mr(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function vr(t,e){return Math.sqrt(mr(t,e))}function yr(t,e){return mr(t,cr(t,e))}function br(t,e){return fr(t,"{x}, {y}",e)}function wr(t,e){if(e.canWrapX()){var n=Wn(e.getExtent()),r=xr(t,e,n);r&&(t[0]-=r*n)}return t}function xr(t,e,n){var r=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=n||Wn(r);i=Math.floor((t[0]-r[0])/o)}return i}function Sr(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function _r(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function kr(t){un(t.getCode(),t),fn(t,t,Sr)}function Er(t){t.forEach(kr)}function Mr(t){return"string"==typeof t?ln(t):t||null}function Tr(t,e,n,r){var i,o=(t=Mr(t)).getPointResolutionFunc();if(o)i=o(e,n),r&&r!==t.getUnits()&&(s=t.getMetersPerUnit())&&(i=i*s/Ge[r]);else{var a=t.getUnits();if(a==Ue.DEGREES&&!r||r==Ue.DEGREES)i=e;else{var s,l=Rr(t,Mr("EPSG:4326"));if(l===_r&&a!==Ue.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(nr((u=l(u,u,2)).slice(0,2),u.slice(2,4))+nr(u.slice(4,6),u.slice(6,8)))/2}void 0!==(s=r?Ge[r]:t.getMetersPerUnit())&&(i/=s)}}return i}function Or(t){Er(t),t.forEach((function(e){t.forEach((function(t){e!==t&&fn(e,t,Sr)}))}))}function Pr(t,e,n,r){t.forEach((function(t){e.forEach((function(e){fn(t,e,n),fn(e,t,r)}))}))}function Cr(t,e){return t?"string"==typeof t?Mr(t):t:Mr(e)}function Ir(t){return function(e,n,r){for(var i=e.length,o=void 0!==r?r:2,a=void 0!==n?n:new Array(i),s=0;s<i;s+=o){var l=t([e[s],e[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var u=o-1;u>=2;--u)a[s+u]=e[s+u]}return a}}function Ar(t,e,n,r){var i=Mr(t),o=Mr(e);fn(i,o,Ir(n)),fn(o,i,Ir(r))}function Lr(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Rr(t,e)===Sr)&&n}function Rr(t,e){var n=pn(t.getCode(),e.getCode());return n||(n=_r),n}function jr(t,e){return Rr(Mr(t),Mr(e))}function Nr(t,e,n){return jr(e,n)(t,void 0,t.length)}function $r(t,e,n,r){return Jn(t,jr(e,n),void 0,r)}var Fr=null;function Dr(t){Fr=Mr(t)}function Gr(){return Fr}function Ur(t,e){return Fr?Nr(t,e,Fr):t}function Br(t,e){return Fr?Nr(t,Fr,e):t}function zr(t,e){return Fr?$r(t,e,Fr):t}function Vr(t,e){return Fr?$r(t,Fr,e):t}function qr(t,e){if(!Fr)return t;var n=Mr(e).getUnits(),r=Fr.getUnits();return n&&r?t*Ge[n]/Ge[r]:t}function Hr(t,e){if(!Fr)return t;var n=Mr(e).getUnits(),r=Fr.getUnits();return n&&r?t*Ge[r]/Ge[n]:t}function Wr(t,e,n){return function(r){var i,o,a=r[0],s=r[1];if(t.canWrapX()){var l=t.getExtent(),u=Wn(l);(o=xr(r,t,u))&&(a-=o*u),a=x(a,l[0],l[2]),s=x(s,l[1],l[3]),i=n([a,s])}else i=n(r);return o&&e.canWrapX()&&(i[0]+=o*Wn(e.getExtent())),i}}function Kr(){Or(Xe),Or(on),Pr(on,Xe,Ze,Je)}Kr();var Yr,Xr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zr="projection",Jr="coordinateFormat",Qr=function(t){function e(e){var n=this,r=e||{},i=document.createElement("div");i.className=void 0!==r.className?r.className:"ol-mouse-position",(n=t.call(this,{element:i,render:r.render,target:r.target})||this).on,n.once,n.un,n.addChangeListener(Zr,n.Ft),r.coordinateFormat&&n.setCoordinateFormat(r.coordinateFormat),r.projection&&n.setProjection(r.projection);var o=!0,a="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(a=r.undefinedHTML),o=!!a):"placeholder"in r&&(!1===r.placeholder?o=!1:a=String(r.placeholder)),n.Ut=a,n.Bt=o,n.Gt=i.innerHTML,n.qt=null,n.Vt=null,n}return Xr(e,t),e.prototype.Ft=function(){this.Vt=null},e.prototype.getCoordinateFormat=function(){return this.get(Jr)},e.prototype.getProjection=function(){return this.get(Zr)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.Zt(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.Zt(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(it(n,Re,this.handleMouseMove,this)),this.Bt&&this.listenerKeys.push(it(n,"pointerout",this.handleMouseOut,this)),this.Zt(null)}},e.prototype.setCoordinateFormat=function(t){this.set(Jr,t)},e.prototype.setProjection=function(t){this.set(Zr,Mr(t))},e.prototype.Zt=function(t){var e=this.Ut;if(t&&this.qt){if(!this.Vt){var n=this.getProjection();this.Vt=n?Rr(this.qt,n):_r}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var i=Gr();i&&(this.Vt=Rr(this.qt,i)),this.Vt(r,r);var o=this.getCoordinateFormat();e=o?o(r):r.toString()}}this.Gt&&e===this.Gt||(this.element.innerHTML=e,this.Gt=e)},e.prototype.render=function(t){var e=t.frameState;e?this.qt!=e.viewState.projection&&(this.qt=e.viewState.projection,this.Vt=null):this.qt=null},e}(Kt),ti=new Array(6);function ei(t){return ri(t,1,0,0,1,0,0)}function ni(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=n*l+i*u,t[1]=r*l+o*u,t[2]=n*c+i*h,t[3]=r*c+o*h,t[4]=n*f+i*p+a,t[5]=r*f+o*p+s,t}function ri(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function ii(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function oi(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function ai(t,e){var n=Math.cos(e),r=Math.sin(e);return ni(t,ri(ti,n,r,-r,n,0,0))}function si(t,e,n){return ni(t,ri(ti,e,0,0,n,0,0))}function li(t,e,n){return ri(t,e,0,0,n,0,0)}function ui(t,e,n){return ni(t,ri(ti,1,0,0,1,e,n))}function ci(t,e,n,r,i,o,a,s){var l=Math.sin(o),u=Math.cos(o);return t[0]=r*u,t[1]=i*l,t[2]=-r*l,t[3]=i*u,t[4]=a*r*u-s*r*l+e,t[5]=a*i*l+s*i*u+n,t}function hi(t,e){var n=fi(e);w(0!==n,32);var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5];return t[0]=a/n,t[1]=-i/n,t[2]=-o/n,t[3]=r/n,t[4]=(o*l-a*s)/n,t[5]=-(r*l-i*s)/n,t}function fi(t){return t[0]*t[3]-t[1]*t[2]}function pi(t){var e="matrix("+t.join(", ")+")";if($t)return e;var n=Yr||(Yr=document.createElement("div"));return n.style.transform=e,n.style.transform}var di=function(){function t(){this.Wt={},this.$t=0,this.Ht=32}return t.prototype.clear=function(){this.Wt={},this.$t=0},t.prototype.canExpireCache=function(){return this.$t>this.Ht},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.Wt){var n=this.Wt[e];0!=(3&t++)||n.hasListener()||(delete this.Wt[e],--this.$t)}}},t.prototype.get=function(t,e,n){var r=gi(t,e,n);return r in this.Wt?this.Wt[r]:null},t.prototype.set=function(t,e,n,r){var i=gi(t,e,n);this.Wt[i]=r,++this.$t},t.prototype.setSize=function(t){this.Ht=t,this.expire()},t}();function gi(t,e,n){return e+":"+t+":"+(n?St(n):"null")}var mi=di,vi=new di,yi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function bi(t,e){vi.expire()}var wi=function(t){function e(e){var n=t.call(this)||this;return n.L=e,n}return yi(e,t),e.prototype.dispatchRenderEvent=function(t,e){p()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;ci(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),hi(r,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o,a,s){var l,u=e.viewState;function c(t,e,n,r){return i.call(o,e,t?n:null,r)}var h=u.projection,f=wr(t.slice(),h),p=[[0,0]];if(h.canWrapX()&&r){var d=Wn(h.getExtent());p.push([-d,0],[d,0])}for(var g=e.layerStatesArray,m=g.length,v=[],y=[],b=0;b<p.length;b++)for(var w=m-1;w>=0;--w){var x=g[w],S=x.layer;if(S.hasRenderer()&&ke(x,u)&&a.call(s,S)){var _=S.getRenderer(),k=S.getSource();if(_&&k){var E=k.getWrapX()?f:t,M=c.bind(null,x.managed);y[0]=E[0]+p[b][0],y[1]=E[1]+p[b][1],l=_.forEachFeatureAtCoordinate(y,e,n,M,v)}if(l)return l}}if(0!==v.length){var T=1/v.length;return v.forEach((function(t,e){return t.distanceSq+=e*T})),v.sort((function(t,e){return t.distanceSq-e.distanceSq})),v.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){return p()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,r,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,r,$,this,i,o)},e.prototype.getMap=function(){return this.L},e.prototype.renderFrame=function(t){p()},e.prototype.scheduleExpireIconCache=function(t){vi.canExpireCache()&&t.postRenderFunctions.push(bi)},e}(N),xi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Si=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=r,o.context=i,o}return xi(e,t),e}(R),_i="10px sans-serif",ki="#000",Ei="round",Mi=[],Ti="round",Oi=10,Pi="#000",Ci="center",Ii="middle",Ai=[0,0,0,0],Li=new pt,Ri=new H;Ri.setSize=function(){};var ji,Ni,$i=null,Fi={},Di=function(){var t,e,n="32px ",r=["monospace","serif"],i=r.length,o="wmytzilWMYTZIL@#/&?$%10ï";function a(t,a,s){for(var l=!0,u=0;u<i;++u){var c=r[u];if(e=Bi(t+" "+a+" "+n+c,o),s!=c){var h=Bi(t+" "+a+" "+n+s+","+c,o);l=l&&h!=e}}return!!l}function s(){for(var e=!0,n=Li.getKeys(),r=0,i=n.length;r<i;++r){var o=n[r];Li.get(o)<100&&(a.apply(this,o.split("\n"))?(B(Fi),$i=null,ji=void 0,Li.set(o,100)):(Li.set(o,Li.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=ne(e);if(n)for(var r=n.families,i=0,o=r.length;i<o;++i){var l=r[i],u=n.style+"\n"+n.weight+"\n"+l;void 0===Li.get(u)&&(Li.set(u,100,!0),a(n.style,n.weight,l)||(Li.set(u,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),Gi=function(t){var e=Fi[t];if(null==e){if($t){var n=ne(t),r=Ui(t,"Å½g");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Ni||((Ni=document.createElement("div")).innerHTML="M",Ni.style.minHeight="0",Ni.style.maxHeight="none",Ni.style.height="auto",Ni.style.padding="0",Ni.style.border="none",Ni.style.position="absolute",Ni.style.display="block",Ni.style.left="-99999px"),Ni.style.font=t,document.body.appendChild(Ni),e=Ni.offsetHeight,document.body.removeChild(Ni);Fi[t]=e}return e};function Ui(t,e){return $i||($i=Gt(1,1)),t!=ji&&($i.font=t,ji=$i.font),$i.measureText(e)}function Bi(t,e){return Ui(t,e).width}function zi(t,e,n){if(e in n)return n[e];var r=Bi(t,e);return n[e]=r,r}function Vi(t,e,n){for(var r=e.length,i=0,o=0;o<r;++o){var a=Bi(t,e[o]);i=Math.max(i,a),n.push(a)}return i}function qi(t,e,n,r,i,o,a,s,l,u,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),r.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(t,e){for(var n=t.contextInstructions,r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}(r,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(r,i,o,a,s,0,0,a,s)):t.drawImage(r,i,o,a,s,l,u,a*c[0],s*c[1]),t.restore()}var Hi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wi=function(t){function e(e){var n=t.call(this,e)||this;n.Kt=it(Li,j,e.redrawText.bind(e)),n.Xt=document.createElement("div");var r=n.Xt.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.Xt.className="ol-unselectable ol-layers";var i=e.getViewport();return i.insertBefore(n.Xt,i.firstChild||null),n.Yt=[],n.lt=!0,n}return Hi(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var r=new Si(t,void 0,e);n.dispatchEvent(r)}},e.prototype.disposeInternal=function(){at(this.Kt),this.Xt.parentNode.removeChild(this.Xt),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(ve,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.Yt.length=0;for(var r=[],i=null,o=0,a=e.length;o<a;++o){var s=e[o];if(t.layerIndex=o,ke(s,n)&&(s.sourceState==xe||s.sourceState==be)){var l=s.layer,u=l.render(t,i);u&&(u!==i&&(this.Yt.push(u),i=u),"getDeclutter"in l&&r.push(l))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);Ht(this.Xt,this.Yt),this.dispatchRenderEvent("postcompose",t),this.lt||(this.Xt.style.display="",this.lt=!0),this.scheduleExpireIconCache(t)}else this.lt&&(this.Xt.style.display="none",this.lt=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],u=l.layer;if(u.hasRenderer()&&ke(l,o)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=r(u,c);if(h)return h}}}},e}(wi),Ki="layergroup",Yi="size",Xi="target",Zi="view",Ji="bottom-center",Qi="bottom-right",to="center-center",eo="center-right";function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ro=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),io="element",oo="map",ao="offset",so="position",lo="positioning",uo=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",n.element.style.position="absolute",n.element.style.pointerEvents="auto";var r=e.autoPan;return r&&"object"!==no(r)&&(r={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=r||!1,n.rendered={Vt:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(io,n.handleElementChanged),n.addChangeListener(oo,n.handleMapChanged),n.addChangeListener(ao,n.handleOffsetChanged),n.addChangeListener(so,n.handlePositionChanged),n.addChangeListener(lo,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&n.setPosition(e.position),n}return ro(e,t),e.prototype.getElement=function(){return this.get(io)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(oo)},e.prototype.getOffset=function(){return this.get(ao)},e.prototype.getPosition=function(){return this.get(so)},e.prototype.getPositioning=function(){return this.get(lo)},e.prototype.handleElementChanged=function(){qt(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Vt(this.element),at(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=it(t,Ct,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(io,t)},e.prototype.setMap=function(t){this.set(oo,t)},e.prototype.setOffset=function(t){this.set(ao,t)},e.prototype.setPosition=function(t){this.set(so,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(so)){var n=this.getRect(e.getTargetElement(),e.getSize()),r=this.getElement(),i=this.getRect(r,[Ut(r),Bt(r)]),o=t||{},a=void 0===o.margin?20:o.margin;if(!wn(n,i)){var s=i[0]-n[0],l=n[2]-i[2],u=i[1]-n[1],c=n[3]-i[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),u<0?h[1]=u-a:c<0&&(h[1]=Math.abs(c)+a),0!==h[0]||0!==h[1]){var f=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(f);if(!p)return;var d=[p[0]+h[0],p[1]+h[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),r=n.left+window.pageXOffset,i=n.top+window.pageYOffset;return[r,i,r+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(lo,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(n,r)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,r=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px",s="0%",l="0%";i==Qi||i==eo||"top-right"==i?s="-100%":i!=Ji&&i!=to&&"top-center"!=i||(s="-50%"),"bottom-left"==i||i==Ji||i==Qi?l="-100%":"center-left"!=i&&i!=to&&i!=eo||(l="-50%");var u="translate("+s+", "+l+") translate("+o+", "+a+")";this.rendered.Vt!=u&&(this.rendered.Vt=u,n.transform=u,n.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(pt),co=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ho="layers",fo=function(t){function e(e){var n=this,r=e||{},i=U({},r);delete i.layers;var o=r.layers;return(n=t.call(this,i)||this).on,n.once,n.un,n.Jt=[],n.Qt={},n.addChangeListener(ho,n.tn),o?Array.isArray(o)?o=new bt(o.slice(),{unique:!0}):w("function"==typeof o.getArray,43):o=new bt(void 0,{unique:!0}),n.setLayers(o),n}return co(e,t),e.prototype.nn=function(){this.changed()},e.prototype.tn=function(){this.Jt.forEach(at),this.Jt.length=0;var t=this.getLayers();for(var e in this.Jt.push(it(t,dt,this.en,this),it(t,gt,this.rn,this)),this.Qt)this.Qt[e].forEach(at);B(this.Qt);for(var n=t.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.Qt[g(o)]=[it(o,j,this.nn,this),it(o,W,this.nn,this)]}this.changed()},e.prototype.en=function(t){var e=t.element;this.Qt[g(e)]=[it(e,j,this.nn,this),it(e,W,this.nn,this)],this.changed()},e.prototype.rn=function(t){var e=g(t.element);this.Qt[e].forEach(at),delete this.Qt[e],this.changed()},e.prototype.getLayers=function(){return this.get(ho)},e.prototype.setLayers=function(t){this.set(ho,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var r=this.getLayerState(),i=r.zIndex;t||void 0!==r.zIndex||(i=0);for(var o=n,a=e.length;o<a;o++){var s=e[o];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),s.minZoom=Math.max(s.minZoom,r.minZoom),s.maxZoom=Math.min(s.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==s.extent?s.extent=Vn(s.extent,r.extent):s.extent=r.extent),void 0===s.zIndex&&(s.zIndex=i)}return e},e.prototype.getSourceState=function(){return xe},e}(de),po=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),go=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==r?r:null,i}return po(e,t),e}(R),mo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vo=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=r,a.an=null,a.sn=null,a.dragging=void 0!==i&&i,a}return mo(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.an||(this.an=this.map.getEventPixel(this.originalEvent)),this.an},set:function(t){this.an=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.sn||(this.sn=this.map.getCoordinateFromPixel(this.pixel)),this.sn},set:function(t){this.sn=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(go),yo={SINGLECLICK:"singleclick",CLICK:X,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},bo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wo=function(t){function e(e,n){var r=t.call(this,e)||this;r.L=e,r.fn,r.cn=!1,r.hn=!1,r.vn=[],r.dn=void 0===n?1:n,r.pn=null;var i=r.L.getViewport();return r.yn=0,r.mn={},r.Xt=i,r.bn=it(i,je,r.wn,r),r.gn,r.kn=it(i,Re,r.xn,r),r.Sn=r._n.bind(r),r.Xt.addEventListener(nt,r.Sn,!!Dt&&{passive:!1}),r}return bo(e,t),e.prototype.Mn=function(t){var e=new vo(yo.CLICK,this.L,t);this.dispatchEvent(e),void 0!==this.fn?(clearTimeout(this.fn),this.fn=void 0,e=new vo(yo.DBLCLICK,this.L,t),this.dispatchEvent(e)):this.fn=setTimeout(function(){this.fn=void 0;var e=new vo(yo.SINGLECLICK,this.L,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.jn=function(t){var e=t;e.type==yo.POINTERUP||e.type==yo.POINTERCANCEL?delete this.mn[e.pointerId]:e.type==yo.POINTERDOWN&&(this.mn[e.pointerId]=!0),this.yn=Object.keys(this.mn).length},e.prototype.On=function(t){this.jn(t);var e=new vo(yo.POINTERUP,this.L,t);this.dispatchEvent(e),this.cn&&!e.defaultPrevented&&!this.hn&&this.An(t)&&this.Mn(this.pn),0===this.yn&&(this.vn.forEach(at),this.vn.length=0,this.hn=!1,this.pn=null)},e.prototype.An=function(t){return 0===t.button},e.prototype.wn=function(t){this.cn=0===this.yn,this.jn(t);var e=new vo(yo.POINTERDOWN,this.L,t);for(var n in this.dispatchEvent(e),this.pn={},t){var r=t[n];this.pn[n]="function"==typeof r?D:r}if(0===this.vn.length){var i=this.L.getOwnerDocument();this.vn.push(it(i,yo.POINTERMOVE,this.Tn,this),it(i,yo.POINTERUP,this.On,this),it(this.Xt,yo.POINTERCANCEL,this.On,this)),this.Xt.getRootNode&&this.Xt.getRootNode()!==i&&this.vn.push(it(this.Xt.getRootNode(),yo.POINTERUP,this.On,this))}},e.prototype.Tn=function(t){if(this.En(t)){this.hn=!0;var e=new vo(yo.POINTERDRAG,this.L,t,this.hn);this.dispatchEvent(e)}},e.prototype.xn=function(t){this.gn=t;var e=!(!this.pn||!this.En(t));this.dispatchEvent(new vo(t.type,this.L,t,e))},e.prototype._n=function(t){var e=this.gn;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.En=function(t){return this.hn||Math.abs(t.clientX-this.pn.clientX)>this.dn||Math.abs(t.clientY-this.pn.clientY)>this.dn},e.prototype.disposeInternal=function(){this.kn&&(at(this.kn),this.kn=null),this.Xt.removeEventListener(nt,this.Sn),this.bn&&(at(this.bn),this.bn=null),this.vn.forEach(at),this.vn.length=0,this.Xt=null,t.prototype.disposeInternal.call(this)},e}(H),xo=1/0,So=function(){function t(t,e){this.Rn=t,this.Cn=e,this.In=[],this.Pn=[],this.Dn={}}return t.prototype.clear=function(){this.In.length=0,this.Pn.length=0,B(this.Dn)},t.prototype.dequeue=function(){var t=this.In,e=this.Pn,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.Nn(0));var r=this.Cn(n);return delete this.Dn[r],n},t.prototype.enqueue=function(t){w(!(this.Cn(t)in this.Dn),31);var e=this.Rn(t);return e!=xo&&(this.In.push(t),this.Pn.push(e),this.Dn[this.Cn(t)]=!0,this.Ln(0,this.In.length-1),!0)},t.prototype.getCount=function(){return this.In.length},t.prototype.zn=function(t){return 2*t+1},t.prototype.Fn=function(t){return 2*t+2},t.prototype.Un=function(t){return t-1>>1},t.prototype.Bn=function(){var t;for(t=(this.In.length>>1)-1;t>=0;t--)this.Nn(t)},t.prototype.isEmpty=function(){return 0===this.In.length},t.prototype.isKeyQueued=function(t){return t in this.Dn},t.prototype.isQueued=function(t){return this.isKeyQueued(this.Cn(t))},t.prototype.Nn=function(t){for(var e=this.In,n=this.Pn,r=e.length,i=e[t],o=n[t],a=t;t<r>>1;){var s=this.zn(t),l=this.Fn(t),u=l<r&&n[l]<n[s]?l:s;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=o,this.Ln(a,t)},t.prototype.Ln=function(t,e){for(var n=this.In,r=this.Pn,i=n[e],o=r[e];e>t;){var a=this.Un(e);if(!(r[a]>o))break;n[e]=n[a],r[e]=r[a],e=a}n[e]=i,r[e]=o},t.prototype.reprioritize=function(){var t,e,n,r=this.Rn,i=this.In,o=this.Pn,a=0,s=i.length;for(e=0;e<s;++e)(n=r(t=i[e]))==xo?delete this.Dn[this.Cn(t)]:(o[a]=n,i[a++]=t);i.length=a,o.length=a,this.Bn()},t}(),_o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ko=function(t){function e(e,n){var r=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.Gn=r.handleTileChange.bind(r),r.qn=n,r.Vn=0,r.Zn={},r}return _o(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(W,this.Gn),n},e.prototype.getTilesLoading=function(){return this.Vn},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(W,this.Gn);var r=e.getKey();r in this.Zn&&(delete this.Zn[r],--this.Vn),this.qn()}},e.prototype.loadMoreTiles=function(t,e){for(var n,r,i=0;this.Vn<t&&i<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),0!==n.getState()||r in this.Zn||(this.Zn[r]=!0,++this.Vn,++i,n.load())},e}(So);function Eo(t,e,n,r,i){if(!t||!(n in t.wantedTiles))return xo;if(!t.wantedTiles[n][e.getKey()])return xo;var o=t.viewState.center,a=r[0]-o[0],s=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}var Mo="center",To="resolution",Oo="rotation",Po=256;function Co(t,e,n,r){var i=Wn(e)/n[0],o=zn(e)/n[1];return r?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function Io(t,e,n){var r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/t-1))/50+1),x(r,n/2,2*e)}function Ao(t,e,n,r){return function(i,o,s,l){if(void 0!==i){var u=t[0],c=t[t.length-1],h=n?Co(u,n,s,r):u;if(l)return void 0===e||e?Io(i,h,c):x(i,c,h);var f=Math.min(h,i),p=Math.floor(a(t,f,o));return t[p]>h&&p<t.length-1?t[p+1]:t[p]}}}function Lo(t,e,n,r,i,o){return function(a,s,l,u){if(void 0!==a){var c=i?Co(e,i,l,o):e,h=void 0!==n?n:0;if(u)return void 0===r||r?Io(a,c,h):x(a,h,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),g=Math.floor(Math.log(e/d)/Math.log(t)+p),m=Math.max(f,g);return x(e/Math.pow(t,m),h,c)}}}function Ro(t,e,n,r,i){return function(o,a,s,l){if(void 0!==o){var u=r?Co(t,r,s,i):t;return(void 0===n||n)&&l?Io(o,u,e):x(o,e,u)}}}function jo(t){return void 0!==t?0:void 0}function No(t){return void 0!==t?t:void 0}function $o(t){var e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function Fo(t){var e=t||O(5);return function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}function Do(t){return Math.pow(t,3)}function Go(t){return 1-Do(1-t)}function Uo(t){return 3*t*t-2*t*t*t}function Bo(t){return t}var zo="XY",Vo="XYZ",qo="XYM",Ho="XYZM";function Wo(t,e,n,r,i,o){for(var a=o||[],s=0,l=e;l<n;l+=r){var u=t[l],c=t[l+1];a[s++]=i[0]*u+i[2]*c+i[4],a[s++]=i[1]*u+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}function Ko(t,e,n,r,i,o,a){for(var s=a||[],l=Math.cos(i),u=Math.sin(i),c=o[0],h=o[1],f=0,p=e;p<n;p+=r){var d=t[p]-c,g=t[p+1]-h;s[f++]=c+d*l-g*u,s[f++]=h+d*u+g*l;for(var m=p+2;m<p+r;++m)s[f++]=t[m]}return a&&s.length!=f&&(s.length=f),s}function Yo(t,e,n,r,i,o,a,s){for(var l=s||[],u=a[0],c=a[1],h=0,f=e;f<n;f+=r){var p=t[f]-u,d=t[f+1]-c;l[h++]=u+i*p,l[h++]=c+o*d;for(var g=f+2;g<f+r;++g)l[h++]=t[g]}return s&&l.length!=h&&(l.length=h),l}function Xo(t,e,n,r,i,o,a){for(var s=a||[],l=0,u=e;u<n;u+=r){s[l++]=t[u]+i,s[l++]=t[u+1]+o;for(var c=u+2;c<u+r;++c)s[l++]=t[c]}return a&&s.length!=l&&(s.length=l),s}var Zo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jo=[1,0,0,1,0,0],Qo=function(t){function e(){var e=t.call(this)||this;return e.Rt=[1/0,1/0,-1/0,-1/0],e.Wn=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=G((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})),e}return Zo(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return p()},e.prototype.closestPointXY=function(t,e,n,r){return p()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return p()},e.prototype.getExtent=function(t){if(this.Wn!=this.getRevision()){var e=this.computeExtent(this.Rt);(isNaN(e[0])||isNaN(e[1]))&&En(e),this.Wn=this.getRevision()}return Yn(this.Rt,t)},e.prototype.rotate=function(t,e){p()},e.prototype.scale=function(t,e,n){p()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return p()},e.prototype.getType=function(){return p()},e.prototype.applyTransform=function(t){p()},e.prototype.intersectsExtent=function(t){return p()},e.prototype.translate=function(t,e){p()},e.prototype.transform=function(t,e){var n=Mr(t),r=n.getUnits()==Ue.TILE_PIXELS?function(t,r,i){var o=n.getExtent(),a=n.getWorldExtent(),s=zn(a)/zn(o);return ci(Jo,a[0],a[3],s,-s,0,0,0),Wo(t,0,t.length,i,Jo,r),jr(n,e)(t,r,i)}:jr(n,e);return this.applyTransform(r),this},e}(pt),ta=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ea(t){var e;return t==zo?e=2:t==Vo||t==qo?e=3:t==Ho&&(e=4),e}function na(t,e,n){var r=t.getFlatCoordinates();if(r){var i=t.getStride();return Wo(r,0,r.length,i,e,n)}return null}var ra=function(t){function e(){var e=t.call(this)||this;return e.layout=zo,e.stride=2,e.flatCoordinates=null,e}return ta(e,t),e.prototype.computeExtent=function(t){return Tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return p()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=ea(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){p()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=ea(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=zo,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=zo:3==t?e=Vo:4==t&&(e=Ho),e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Ko(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i||(i=Gn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();Yo(o,0,o.length,a,t,r,i,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Xo(n,0,n.length,r,t,e,n),this.changed()}},e}(Qo);function ia(t,e,n,r,i,o,a){var s,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)s=e;else{var f=((i-l)*c+(o-u)*h)/(c*c+h*h);if(f>1)s=n;else{if(f>0){for(var p=0;p<r;++p)a[p]=C(t[e+p],t[n+p],f);return void(a.length=r)}s=e}}for(p=0;p<r;++p)a[p]=t[s+p];a.length=r}function oa(t,e,n,r,i){var o=t[e],a=t[e+1];for(e+=r;e<n;e+=r){var s=t[e],l=t[e+1],u=E(o,a,s,l);u>i&&(i=u),o=s,a=l}return i}function aa(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=oa(t,e,s,r,i),e=s}return i}function sa(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=aa(t,e,s,r,i),e=s[s.length-1]}return i}function la(t,e,n,r,i,o,a,s,l,u,c){if(e==n)return u;var h,f;if(0===i){if((f=E(a,s,t[e],t[e+1]))<u){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,f}return u}for(var p=c||[NaN,NaN],d=e+r;d<n;)if(ia(t,d-r,d,r,a,s,p),(f=E(a,s,p[0],p[1]))<u){for(u=f,h=0;h<r;++h)l[h]=p[h];l.length=r,d+=r}else d+=r*Math.max((Math.sqrt(f)-Math.sqrt(u))/i|0,1);if(o&&(ia(t,n-r,e,r,a,s,p),(f=E(a,s,p[0],p[1]))<u)){for(u=f,h=0;h<r;++h)l[h]=p[h];l.length=r}return u}function ua(t,e,n,r,i,o,a,s,l,u,c){for(var h=c||[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];u=la(t,e,d,r,i,o,a,s,l,u,h),e=d}return u}function ca(t,e,n,r,i,o,a,s,l,u,c){for(var h=c||[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];u=ua(t,e,d,r,i,o,a,s,l,u,h),e=d[d.length-1]}return u}function ha(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function fa(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=n[i],s=0;s<r;++s)t[e++]=a[s];return e}function pa(t,e,n,r,i){for(var o=i||[],a=0,s=0,l=n.length;s<l;++s){var u=fa(t,e,n[s],r);o[a++]=u,e=u}return o.length=a,o}function da(t,e,n,r,i){for(var o=i||[],a=0,s=0,l=n.length;s<l;++s){var u=pa(t,e,n[s],r,o[a]);o[a++]=u,e=u[u.length-1]}return o.length=a,o}function ga(t,e,n,r,i,o,a){var s=(n-e)/r;if(s<3){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}var l=new Array(s);l[0]=1,l[s-1]=1;for(var u=[e,n-r],c=0;u.length>0;){for(var h=u.pop(),f=u.pop(),p=0,d=t[f],g=t[f+1],m=t[h],v=t[h+1],y=f+r;y<h;y+=r){var b=k(t[y],t[y+1],d,g,m,v);b>p&&(c=y,p=b)}p>i&&(l[(c-e)/r]=1,f+r<c&&u.push(f,c),c+r<h&&u.push(c,h))}for(y=0;y<s;++y)l[y]&&(o[a++]=t[e+y*r],o[a++]=t[e+y*r+1]);return a}function ma(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l];a=ga(t,e,c,r,i,o,a),s.push(a),e=c}return a}function va(t,e,n,r,i,o,a){if(n<=e+r){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}var s=t[e],l=t[e+1];o[a++]=s,o[a++]=l;var u=s,c=l;for(e+=r;e<n;e+=r)E(s,l,u=t[e],c=t[e+1])>i&&(o[a++]=u,o[a++]=c,s=u,l=c);return u==s&&c==l||(o[a++]=u,o[a++]=c),a}function ya(t,e){return e*Math.round(t/e)}function ba(t,e,n,r,i,o,a){if(e==n)return a;var s,l,u=ya(t[e],i),c=ya(t[e+1],i);e+=r,o[a++]=u,o[a++]=c;do{if(s=ya(t[e],i),l=ya(t[e+1],i),(e+=r)==n)return o[a++]=s,o[a++]=l,a}while(s==u&&l==c);for(;e<n;){var h=ya(t[e],i),f=ya(t[e+1],i);if(e+=r,h!=s||f!=l){var p=s-u,d=l-c,g=h-u,m=f-c;p*m==d*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(d<0&&m<d||d==m||d>0&&m>d)?(s=h,l=f):(o[a++]=s,o[a++]=l,u=s,c=l,s=h,l=f)}}return o[a++]=s,o[a++]=l,a}function wa(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l];a=ba(t,e,c,r,i,o,a),s.push(a),e=c}return a}function xa(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l],h=[];a=wa(t,e,c,r,i,o,a,h),s.push(h),e=c[c.length-1]}return a}function Sa(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=e;s<n;s+=r)o[a++]=t.slice(s,s+r);return o.length=a,o}function _a(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=0,l=n.length;s<l;++s){var u=n[s];o[a++]=Sa(t,e,u,r,o[a]),e=u}return o.length=a,o}function ka(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=0,l=n.length;s<l;++s){var u=n[s];o[a++]=_a(t,e,u,r,o[a]),e=u[u.length-1]}return o.length=a,o}function Ea(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],l=t[e+1];i+=a*s-o*l,o=s,a=l}return i/2}function Ma(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=Ea(t,e,s,r),e=s}return i}function Ta(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=Ma(t,e,s,r),e=s[s.length-1]}return i}var Oa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pa=function(t){function e(e,n){var r=t.call(this)||this;return r.$n=-1,r.Hn=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return Oa(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<yn(this.getExtent(),t,e)?r:(this.Hn!=this.getRevision()&&(this.$n=Math.sqrt(oa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.Hn=this.getRevision()),la(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.$n,!0,t,e,n,r))},e.prototype.getArea=function(){return Ea(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Sa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=ga(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,zo)},e.prototype.getType=function(){return tr.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fa(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ra),Ca=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ia=function(t){function e(e,n){var r=t.call(this)||this;return r.setCoordinates(e,n),r}return Ca(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=E(t,e,i[0],i[1]);if(o<r){for(var a=this.stride,s=0;s<a;++s)n[s]=i[s];return n.length=a,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Mn(this.flatCoordinates,t)},e.prototype.getType=function(){return tr.POINT},e.prototype.intersectsExtent=function(t){return xn(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ha(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ra);function Aa(t,e,n,r,i){return!Nn(i,(function(i){return!La(t,e,n,r,i[0],i[1])}))}function La(t,e,n,r,i,o){for(var a=0,s=t[n-r],l=t[n-r+1];e<n;e+=r){var u=t[e],c=t[e+1];l<=o?c>o&&(u-s)*(o-l)-(i-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(i-s)*(c-l)<0&&a--,s=u,l=c}return 0!==a}function Ra(t,e,n,r,i,o){if(0===n.length)return!1;if(!La(t,e,n[0],r,i,o))return!1;for(var a=1,s=n.length;a<s;++a)if(La(t,n[a-1],n[a],r,i,o))return!1;return!0}function ja(t,e,n,r,i,o){if(0===n.length)return!1;for(var a=0,s=n.length;a<s;++a){var l=n[a];if(Ra(t,e,l,r,i,o))return!0;e=l[l.length-1]}return!1}function Na(t,e,n,r,o,a,s){for(var l,u,c,h,f,p,d,g=o[a+1],m=[],v=0,y=n.length;v<y;++v){var b=n[v];for(h=t[b-r],p=t[b-r+1],l=e;l<b;l+=r)f=t[l],d=t[l+1],(g<=p&&d<=g||p<=g&&g<=d)&&(c=(g-p)/(d-p)*(f-h)+h,m.push(c)),h=f,p=d}var w=NaN,x=-1/0;for(m.sort(i),h=m[0],l=1,u=m.length;l<u;++l){f=m[l];var S=Math.abs(f-h);S>x&&Ra(t,e,n,r,c=(h+f)/2,g)&&(w=c,x=S),h=f}return isNaN(w)&&(w=o[a]),s?(s.push(w,g,x),s):[w,g,x]}function $a(t,e,n,r,i){for(var o=[],a=0,s=n.length;a<s;++a){var l=n[a];o=Na(t,e,l,r,i,2*a,o),e=l[l.length-1]}return o}function Fa(t,e,n,r,i){var o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)))return o;return!1}function Da(t,e,n,r,i){var o=Ln([1/0,1/0,-1/0,-1/0],t,e,n,r);return!!Kn(i,o)&&(!!wn(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]||Fa(t,e,n,r,(function(t,e){return Zn(i,t,e)})))}function Ga(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){if(Da(t,e,n[o],r,i))return!0;e=n[o]}return!1}function Ua(t,e,n,r,i){return!!(Da(t,e,n,r,i)||La(t,e,n,r,i[0],i[1])||La(t,e,n,r,i[0],i[3])||La(t,e,n,r,i[2],i[1])||La(t,e,n,r,i[2],i[3]))}function Ba(t,e,n,r,i){if(!Ua(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(Aa(t,n[o-1],n[o],r,i)&&!Da(t,n[o-1],n[o],r,i))return!1;return!0}function za(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(Ba(t,e,s,r,i))return!0;e=s[s.length-1]}return!1}function Va(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function qa(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],l=t[e+1];i+=(s-o)*(l+a),o=s,a=l}return 0===i?void 0:i>0}function Ha(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var l=n[a],u=qa(t,e,l,r);if(0===a){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=l}return!0}function Wa(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(!Ha(t,e,s,r,i))return!1;s.length&&(e=s[s.length-1])}return!0}function Ka(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var l=n[a],u=qa(t,e,l,r);(0===a?o&&u||!o&&!u:o&&!u||!o&&u)&&Va(t,e,l,r),e=l}return e}function Ya(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o)e=Ka(t,e,n[o],r,i);return e}var Xa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Za=function(t){function e(e,n,r){var i=t.call(this)||this;return i.Kn=[],i.Xn=-1,i.Yn=null,i.$n=-1,i.Hn=-1,i.Jn=-1,i.Qn=null,void 0!==n&&r?(i.setFlatCoordinates(n,e),i.Kn=r):i.setCoordinates(e,n),i}return Xa(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?l(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.Kn.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.Kn.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<yn(this.getExtent(),t,e)?r:(this.Hn!=this.getRevision()&&(this.$n=Math.sqrt(aa(this.flatCoordinates,0,this.Kn,this.stride,0)),this.Hn=this.getRevision()),ua(this.flatCoordinates,0,this.Kn,this.stride,this.$n,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Ra(this.getOrientedFlatCoordinates(),0,this.Kn,this.stride,t,e)},e.prototype.getArea=function(){return Ma(this.getOrientedFlatCoordinates(),0,this.Kn,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ka(e=this.getOrientedFlatCoordinates().slice(),0,this.Kn,this.stride,t):e=this.flatCoordinates,_a(e,0,this.Kn,this.stride)},e.prototype.getEnds=function(){return this.Kn},e.prototype.getFlatInteriorPoint=function(){if(this.Xn!=this.getRevision()){var t=Gn(this.getExtent());this.Yn=Na(this.getOrientedFlatCoordinates(),0,this.Kn,this.stride,t,0),this.Xn=this.getRevision()}return this.Yn},e.prototype.getInteriorPoint=function(){return new Ia(this.getFlatInteriorPoint(),qo)},e.prototype.getLinearRingCount=function(){return this.Kn.length},e.prototype.getLinearRing=function(t){return t<0||this.Kn.length<=t?null:new Pa(this.flatCoordinates.slice(0===t?0:this.Kn[t-1],this.Kn[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.Kn,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o],l=new Pa(e.slice(i,s),t);r.push(l),i=s}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.Jn!=this.getRevision()){var t=this.flatCoordinates;Ha(t,0,this.Kn,this.stride)?this.Qn=t:(this.Qn=t.slice(),this.Qn.length=Ka(this.Qn,0,this.Kn,this.stride)),this.Jn=this.getRevision()}return this.Qn},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=wa(this.flatCoordinates,0,this.Kn,this.stride,Math.sqrt(t),n,0,r),new e(n,zo,r)},e.prototype.getType=function(){return tr.POLYGON},e.prototype.intersectsExtent=function(t){return Ba(this.getOrientedFlatCoordinates(),0,this.Kn,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=pa(this.flatCoordinates,0,t,this.stride,this.Kn);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(ra),Ja=Za;function Qa(t,e,n,r){for(var i=n||32,o=[],a=0;a<i;++a)l(o,or(t,e,2*Math.PI*a/i,r));return o.push(o[0],o[1]),new Za(o,zo,[o.length])}function ts(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new Za(o,zo,[o.length])}function es(t,e,n){for(var r=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(r+1),l=new Array(s),u=0;u<s;u+=i){l[u]=0,l[u+1]=0;for(var c=2;c<i;c++)l[u+c]=a[c]}var h=[l.length],f=new Za(l,o,h);return ns(f,a,t.getRadius(),n),f}function ns(t,e,n,r){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=r||0,l=0;l<=a;++l){var u=l*o,c=s+2*P(l,a)*Math.PI/a;i[u]=e[0]+n*Math.cos(c),i[u+1]=e[1]+n*Math.sin(c)}t.changed()}var rs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function is(t,e){setTimeout((function(){t(e)}),0)}function os(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return I(t.extent,t.constrainOnlyCenter,e)}var n=Cr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var r=n.getExtent().slice();return r[0]=-1/0,r[2]=1/0,I(r,!1,!1)}return A}function as(t){var e,n,r,i=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,u=void 0!==t.showFullExtent&&t.showFullExtent,c=Cr(t.projection,"EPSG:3857"),h=c.getExtent(),f=t.constrainOnlyCenter,p=t.extent;if(s||p||!c.isGlobal()||(f=!1,p=h),void 0!==t.resolutions){var d=t.resolutions;n=d[i],r=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?Ao(d,l,!f&&p,u):Ro(n,r,l,!f&&p,u)}else{var g=(h?Math.max(Wn(h),zn(h)):360*Ge[Ue.DEGREES]/c.getMetersPerUnit())/Po/Math.pow(2,0),m=g/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=g/Math.pow(a,i),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,o):g/Math.pow(a,o):m),o=i+Math.floor(Math.log(n/r)/Math.log(a)),r=n/Math.pow(a,o-i),e=t.constrainResolution?Lo(a,n,r,l,!f&&p,u):Ro(n,r,l,!f&&p,u)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:a}}function ss(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Fo():!1===e?No:"number"==typeof e?$o(e):No}return jo}function ls(t){return!(t.sourceCenter&&t.targetCenter&&!pr(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function us(t,e,n,r,i){var o=Math.cos(-i),a=Math.sin(-i),s=t[0]*o-t[1]*a,l=t[1]*o+t[0]*a;return[(s+=(e[0]/2-n[0])*r)*o-(l+=(n[1]-e[1]/2)*r)*(a=-a),l*o+s*a]}var cs=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=U({},e);return n.te=[0,0],n.ne=[],n.ee,n.re=Cr(r.projection,"EPSG:3857"),n.ie=[100,100],n.oe=null,n.ae,n.se,n.ue=void 0,r.center&&(r.center=Br(r.center,n.re)),r.extent&&(r.extent=Vr(r.extent,n.re)),n.fe(r),n}return rs(e,t),e.prototype.fe=function(t){var e=as(t);this.ce=e.maxResolution,this.he=e.minResolution,this.le=e.zoomFactor,this.ve=t.resolutions,this.de=t.padding,this.pe=e.minZoom;var n=os(t),r=e.constraint,i=ss(t);this.ye={center:n,resolution:r,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.me=t},Object.defineProperty(e.prototype,"padding",{get:function(){return this.de},set:function(t){var e=this.de;this.de=t;var n=this.getCenter();if(n){var r=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),o=i/2*(r[3]-e[3]+e[1]-r[1]),a=i/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}},enumerable:!1,configurable:!0}),e.prototype.be=function(t){var e=U({},this.me);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),U({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&((r=U({},r)).center=Br(r.center,this.getProjection())),r.anchor&&((r=U({},r)).anchor=Br(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var r=arguments[n-1];return r.center&&this.setCenterInternal(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&is(e,!0))}for(var i=Date.now(),o=this.oe.slice(),a=this.ae,s=this.se,l=[],u=0;u<n;++u){var c=arguments[u],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Uo,callback:e};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=s;var f=P(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+f,s=h.targetRotation}ls(h)?h.complete=!0:i+=h.duration,l.push(h)}this.ne.push(l),this.setHint(0,1),this.we()},e.prototype.getAnimating=function(){return this.te[0]>0},e.prototype.getInteracting=function(){return this.te[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.te[0]);for(var e=0,n=this.ne.length;e<n;++e){var r=this.ne[e];if(r[0].callback&&is(r[0].callback,!1),!t)for(var i=0,o=r.length;i<o;++i){var a=r[i];if(!a.complete){t=a.anchor;break}}}this.ne.length=0,this.ue=t},e.prototype.we=function(){if(void 0!==this.ee&&(cancelAnimationFrame(this.ee),this.ee=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.ne.length-1;n>=0;--n){for(var r=this.ne[n],i=!0,o=0,a=r.length;o<a;++o){var s=r[o];if(!s.complete){var l=t-s.start,u=s.duration>0?l/s.duration:1;u>=1?(s.complete=!0,u=1):i=!1;var c=s.easing(u);if(s.sourceCenter){var h=s.sourceCenter[0],f=s.sourceCenter[1],p=h+c*(s.targetCenter[0]-h),d=f+c*(s.targetCenter[1]-f);this.oe=[p,d]}if(s.sourceResolution&&s.targetResolution){var g=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var m=this.ge(this.getRotation()),v=this.ye.resolution(g,0,m,!0);this.oe=this.calculateCenterZoom(v,s.anchor)}this.ae=g,this.ke(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var y=1===c?P(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var b=this.ye.rotation(y,!0);this.oe=this.calculateCenterRotate(b,s.anchor)}this.se=y}if(this.ke(!0),e=!0,!s.complete)break}}if(i){this.ne[n]=null,this.setHint(0,-1);var w=r[0].callback;w&&is(w,!0)}}this.ne=this.ne.filter(Boolean),e&&void 0===this.ee&&(this.ee=requestAnimationFrame(this.we.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,r=this.getCenterInternal();return void 0!==r&&(dr(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),lr(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenterInternal(),i=this.getResolution();return void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]),n},e.prototype.ge=function(t){var e=this.ie;if(t){var n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.ie=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Ur(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(Mo)},e.prototype.getConstraints=function(){return this.ye},e.prototype.getConstrainResolution=function(){return this.me.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.te[0],t[1]=this.te[1],t):this.te.slice()},e.prototype.calculateExtent=function(t){return zr(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.xe(),n=this.getCenterInternal();w(n,1);var r=this.getResolution();w(void 0!==r,2);var i=this.getRotation();return w(void 0!==i,3),Bn(n,r,i,e)},e.prototype.getMaxResolution=function(){return this.ce},e.prototype.getMinResolution=function(){return this.he},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.he)},e.prototype.setMaxZoom=function(t){this.fe(this.be({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.ce)},e.prototype.setMinZoom=function(t){this.fe(this.be({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.fe(this.be({constrainResolution:t}))},e.prototype.getProjection=function(){return this.re},e.prototype.getResolution=function(){return this.get(To)},e.prototype.getResolutions=function(){return this.ve},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Vr(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.xe(),r=Wn(t)/n[0],i=zn(t)/n[1];return Math.max(r,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.ce),r=this.he,i=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(Oo)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.ce),r=this.he,i=Math.log(n/r)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.xe=function(t){var e=this.ge(t),n=this.de;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),i=this.de;if(i){var o=this.xe();r=us(r,this.ge(),[o[0]/2+i[3],o[1]/2+i[0]],e,n)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,r=this.pe||0;if(this.ve){var i=a(this.ve,t,1);r=i,e=this.ve[i],n=i==this.ve.length-1?2:e/this.ve[i+1]}else e=this.ce,n=this.le;return r+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.ve){if(this.ve.length<=1)return 0;var e=x(Math.floor(t),0,this.ve.length-2),n=this.ve[e]/this.ve[e+1];return this.ve[e]/Math.pow(n,x(t-e,0,1))}return this.ce/Math.pow(this.le,t-this.pe)},e.prototype.fit=function(t,e){var n;if(w(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))w(!0,25),n=ts(r=Vr(t,this.getProjection()));else if(t.getType()===tr.CIRCLE){var r;(n=ts(r=Vr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Gn(r))}else{var i=Gr();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride(),a=1/0,s=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=o){var f=i[c]*n-i[c+1]*r,p=i[c]*r+i[c+1]*n;a=Math.min(a,f),s=Math.min(s,p),l=Math.max(l,f),u=Math.max(u,p)}return[a,s,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},r=n.size;r||(r=this.xe());var i,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var s=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(s,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,a?0:1);var u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),f=Gn(s);f[0]+=(o[1]-o[3])/2*l,f[1]+=(o[0]-o[2])/2*l;var p=f[0]*h-f[1]*c,d=f[1]*h+f[0]*c,g=this.getConstrainedCenter([p,d],l),m=n.callback?n.callback:D;void 0!==n.duration?this.animateInternal({resolution:l,center:g,duration:n.duration,easing:n.easing},m):(this.ae=l,this.oe=g,this.ke(!1,!0),is(m,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Br(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(us(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,r){var i,o=this.de;if(o&&t){var a=this.xe(-n),s=us(t,r,[a[0]/2+o[3],a[1]/2+o[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Ur(this.oe,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.oe;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Br(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.ge(this.getRotation()),i=this.ye.resolution(this.ae*t,0,r,n);e&&(this.oe=this.calculateCenterZoom(i,e)),this.ae*=t,this.ke()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.le,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Br(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.ye.rotation(this.se+t,n);e&&(this.oe=this.calculateCenterRotate(r,e)),this.se+=t,this.ke()},e.prototype.setCenter=function(t){this.setCenterInternal(Br(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.oe=t,this.ke()},e.prototype.setHint=function(t,e){return this.te[t]+=e,this.changed(),this.te[t]},e.prototype.setResolution=function(t){this.ae=t,this.ke()},e.prototype.setRotation=function(t){this.se=t,this.ke()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.ke=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.ye.rotation(this.se,n),i=this.ge(r),o=this.ye.resolution(this.ae,0,i,n),a=this.ye.center(this.oe,o,i,n,this.calculateCenterShift(this.oe,o,r,i));this.get(Oo)!==r&&this.set(Oo,r),this.get(To)!==o&&this.set(To,o),this.get(Mo)&&pr(this.get(Mo),a)||this.set(Mo,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.ue=void 0},e.prototype.resolveConstraints=function(t,e,n){var r=void 0!==t?t:200,i=e||0,o=this.ye.rotation(this.se),a=this.ge(o),s=this.ye.resolution(this.ae,i,a),l=this.ye.center(this.oe,s,a,!1,this.calculateCenterShift(this.oe,s,o,a));if(0===r&&!this.ue)return this.ae=s,this.se=o,this.oe=l,void this.ke();var u=n||(0===r?this.ue:void 0);this.ue=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&pr(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:s,duration:r,easing:Go,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var r=n&&Br(n,this.getProjection());this.endInteractionInternal(t,e,r)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.ge(this.getRotation());return this.ye.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,r=this.ge(this.getRotation());return this.ye.resolution(t,n,r)},e}(pt);function hs(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]+2*e,n[1]=t[1]+2*e,n}function fs(t){return t[0]>0&&t[1]>0}function ps(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function ds(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var gs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ms=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new fo({layers:t.layers});return o[Ki]=a,o[Xi]=t.target,o[Zi]=void 0!==t.view?t.view:new cs,void 0!==t.controls&&(Array.isArray(t.controls)?n=new bt(t.controls.slice()):(w("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new bt(t.interactions.slice()):(w("function"==typeof t.interactions.getArray,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new bt(t.overlays.slice()):(w("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new bt,{controls:n,interactions:r,keyboardEventTarget:e,overlays:i,values:o}}(e);return n.Se=n.handleBrowserEvent.bind(n),n._e=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.Me=void 0!==e.pixelRatio?e.pixelRatio:Nt,n.je,n.Oe,n.Ae=function(){this.Oe=void 0,this.Te(Date.now())}.bind(n),n.Ee=[1,0,0,1,0,0],n.Re=[1,0,0,1,0,0],n.Ce=0,n.Ie=null,n.Pe=null,n.De=null,n.Ne=null,n.Le=null,n.ze=document.createElement("div"),n.ze.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.ze.style.position="relative",n.ze.style.overflow="hidden",n.ze.style.width="100%",n.ze.style.height="100%",n.Fe=document.createElement("div"),n.Fe.style.position="absolute",n.Fe.style.zIndex="0",n.Fe.style.width="100%",n.Fe.style.height="100%",n.Fe.style.pointerEvents="none",n.Fe.className="ol-overlaycontainer",n.ze.appendChild(n.Fe),n.Ue=document.createElement("div"),n.Ue.style.position="absolute",n.Ue.style.zIndex="0",n.Ue.style.width="100%",n.Ue.style.height="100%",n.Ue.style.pointerEvents="none",n.Ue.className="ol-overlaycontainer-stopevent",n.ze.appendChild(n.Ue),n.Be=null,n.dn=e.moveTolerance,n.Ge=r.keyboardEventTarget,n.qe=null,n.controls=r.controls||new bt,n.interactions=r.interactions||new bt,n.Ve=r.overlays,n.Ze={},n.H=null,n.We,n.$e=[],n.He=new ko(n.getTilePriority.bind(n),n.Ke.bind(n)),n.addChangeListener(Ki,n.Xe),n.addChangeListener(Zi,n.Ye),n.addChangeListener(Yi,n.Je),n.addChangeListener(Xi,n.Qe),n.setProperties(r.values),n.controls.addEventListener(dt,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(gt,function(t){t.element.setMap(null)}.bind(n)),n.interactions.addEventListener(dt,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(gt,function(t){t.element.setMap(null)}.bind(n)),n.Ve.addEventListener(dt,function(t){this.tr(t.element)}.bind(n)),n.Ve.addEventListener(gt,function(t){var e=t.element.getId();void 0!==e&&delete this.Ze[e.toString()],t.element.setMap(null)}.bind(n)),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.Ve.forEach(n.tr.bind(n)),n}return gs(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.tr=function(t){var e=t.getId();void 0!==e&&(this.Ze[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.Ie){var r=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:$,a=!1!==n.checkWrapped;return this.H.forEachFeatureAtCoordinate(r,this.Ie,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.Ie){var r=n||{},i=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||$;return this.H.forEachLayerAtPixel(t,this.Ie,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.Ie)return!1;var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:$,i=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.H.hasFeatureAtCoordinate(n,this.Ie,i,o,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.ze.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Xi)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Ur(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.Ie;return e?oi(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.Ve},e.prototype.getOverlayById=function(t){var e=this.Ze[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ki)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer.getSource();if(r&&r.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Br(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.Ie;return e?oi(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.H},e.prototype.getSize=function(){return this.get(Yi)},e.prototype.getView=function(){return this.get(Zi)},e.prototype.getViewport=function(){return this.ze},e.prototype.getOverlayContainer=function(){return this.Fe},e.prototype.getOverlayContainerStopEvent=function(){return this.Ue},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,r){return Eo(this.Ie,t,e,n,r)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new vo(n,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.Ie){var e=t.originalEvent,n=e.type;if(n===je||n===rt||n===J){var r=this.getOwnerDocument(),i=this.ze.getRootNode?this.ze.getRootNode():r,o=e.target;if(this.Ue.contains(o)||!(i===r?r.documentElement:i).contains(o))return}if(t.frameState=this.Ie,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var l=a[s];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.Ie,e=this.He;if(!e.isEmpty()){var n=this._e,r=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var o=Date.now()-t.time>8;n=o?0:8,r=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}!t||!this.hasListener(ye)||t.animate||this.He.getTilesLoading()||this.getLoading()||this.H.dispatchRenderEvent(ye,t);for(var a=this.$e,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.Je=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.Qe=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.Be){for(var e=0,n=this.qe.length;e<n;++e)at(this.qe[e]);this.qe=null,this.ze.removeEventListener(Y,this.Se),this.ze.removeEventListener(rt,this.Se),void 0!==this.We&&(removeEventListener(et,this.We,!1),this.We=void 0),this.Be.dispose(),this.Be=null,Vt(this.ze)}if(t){for(var r in t.appendChild(this.ze),this.H||(this.H=this.createRenderer()),this.Be=new wo(this,this.dn),yo)this.Be.addEventListener(yo[r],this.handleMapBrowserEvent.bind(this));this.ze.addEventListener(Y,this.Se,!1),this.ze.addEventListener(rt,this.Se,!!Dt&&{passive:!1});var i=this.Ge?this.Ge:t;this.qe=[it(i,J,this.handleBrowserEvent,this),it(i,Q,this.handleBrowserEvent,this)],this.We||(this.We=this.updateSize.bind(this),window.addEventListener(et,this.We,!1))}else this.H&&(clearTimeout(this.je),this.je=void 0,this.$e.length=0,this.H.dispose(),this.H=null),this.Oe&&(cancelAnimationFrame(this.Oe),this.Oe=void 0);this.updateSize()},e.prototype.Ke=function(){this.render()},e.prototype.nr=function(){this.render()},e.prototype.Ye=function(){this.De&&(at(this.De),this.De=null),this.Ne&&(at(this.Ne),this.Ne=null);var t=this.getView();t&&(this.er(),this.De=it(t,j,this.nr,this),this.Ne=it(t,W,this.nr,this),t.resolveConstraints(0)),this.render()},e.prototype.Xe=function(){this.Le&&(this.Le.forEach(at),this.Le=null);var t=this.getLayerGroup();t&&(this.Le=[it(t,j,this.render,this),it(t,W,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.Ie},e.prototype.renderSync=function(){this.Oe&&cancelAnimationFrame(this.Oe),this.Ae()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.H&&void 0===this.Oe&&(this.Oe=requestAnimationFrame(this.Ae))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.Te=function(t){var e=this,n=this.getSize(),r=this.getView(),i=this.Ie,o=null;if(void 0!==n&&fs(n)&&r&&r.isDef()){var a=r.getHints(this.Ie?this.Ie.viewHints:void 0),s=r.getState();o={animate:!1,coordinateToPixelTransform:this.Ee,declutterTree:null,extent:Bn(s.center,s.resolution,s.rotation,n),index:this.Ce++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.Me,pixelToCoordinateTransform:this.Re,postRenderFunctions:[],size:n,tileQueue:this.He,time:t,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{}}}this.Ie=o,this.H.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.$e,o.postRenderFunctions),i&&(!this.Pe||(this.Pe,!On(o.extent,this.Pe)))&&(this.dispatchEvent(new go("movestart",this,i)),this.Pe=En(this.Pe)),this.Pe&&!o.viewHints[0]&&!o.viewHints[1]&&!On(o.extent,this.Pe)&&(this.dispatchEvent(new go("moveend",this,o)),vn(o.extent,this.Pe))),this.dispatchEvent(new go(Ct,this,o)),this.je||(this.je=setTimeout((function(){e.je=void 0,e.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){this.set(Ki,t)},e.prototype.setSize=function(t){this.set(Yi,t)},e.prototype.setTarget=function(t){this.set(Xi,t)},e.prototype.setView=function(t){this.set(Zi,t)},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),r=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(r)||isNaN(i)||!fs(e=[r,i])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}this.setSize(e),this.er()},e.prototype.er=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.ze);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(pt),vs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vs(e,t),e.prototype.createRenderer=function(){return new Wi(this)},e}(ms),bs=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ir=n.ar.bind(n),n.et=void 0===r.collapsed||r.collapsed,n.ot=void 0===r.collapsible||r.collapsible,n.ot||(n.et=!1),n.sr=void 0!==r.rotateWithView&&r.rotateWithView,n.ur=void 0;var i=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",a=void 0!==r.collapseLabel?r.collapseLabel:"Â«";"string"==typeof a?(n.st=document.createElement("span"),n.st.textContent=a):n.st=a;var s=void 0!==r.label?r.label:"Â»";"string"==typeof s?(n.ut=document.createElement("span"),n.ut.textContent=s):n.ut=s;var l=n.ot&&!n.et?n.st:n.ut,u=document.createElement("button");u.setAttribute("type","button"),u.title=o,u.appendChild(l),u.addEventListener(X,n.ct.bind(n),!1),n.cr=document.createElement("div"),n.cr.className="ol-overviewmap-map",n.hr=r.view,n.lr=new ys({view:r.view});var c=n.lr;r.layers&&r.layers.forEach((function(t){c.addLayer(t)}));var h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",n.vr=new uo({position:[0,0],positioning:to,element:h}),n.lr.addOverlay(n.vr);var f=i+" ol-unselectable "+Jt+(n.et&&n.ot?" ol-collapsed":"")+(n.ot?"":" ol-uncollapsible"),p=n.element;p.className=f,p.appendChild(n.cr),p.appendChild(u);var d=n,g=n.vr,m=n.vr.getElement(),v=function(t){var e,n={clientX:(e=t).clientX,clientY:e.clientY},r=c.getEventCoordinateInternal(n);g.setPosition(r)},y=function t(e){var n=c.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(n),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",t)};return m.addEventListener("mousedown",(function(){window.addEventListener("mousemove",v),window.addEventListener("mouseup",y)})),n}return vs(e,t),e.prototype.setMap=function(e){var n=this.getMap();if(e!==n){if(n){var r=n.getView();r&&this.dr(r),this.lr.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.lr.setTarget(this.cr),this.listenerKeys.push(it(e,j,this.pr,this));var i=e.getView();i&&(this.yr(i),i.isDef()&&(this.lr.updateSize(),this.mr())),this.lr.isRendered()||this.br()}}},e.prototype.pr=function(t){if(t.key===Zi){var e=t.oldValue;e&&this.dr(e);var n=this.getMap().getView();this.yr(n)}else this.lr.isRendered()||t.key!==Xi&&t.key!==Yi||this.lr.updateSize()},e.prototype.yr=function(t){if(!this.hr){var e=new cs({projection:t.getProjection()});this.lr.setView(e)}t.addChangeListener(Oo,this.ir),this.ar()},e.prototype.dr=function(t){t.removeChangeListener(Oo,this.ir)},e.prototype.ar=function(){this.sr&&this.lr.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.wr=function(){var t=this.getMap(),e=this.lr;if(t.isRendered()&&e.isRendered()){var n=t.getSize(),r=t.getView().calculateExtentInternal(n);if(!this.ur||!On(r,this.ur)){this.ur=r;var i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=e.getPixelFromCoordinateInternal(qn(r)),s=e.getPixelFromCoordinateInternal(Dn(r)),l=Math.abs(a[0]-s[0]),u=Math.abs(a[1]-s[1]),c=i[0],h=i[1];l<.1*c||u<.1*h||l>.75*c||u>.75*h?this.mr():wn(o,r)||this.gr()}}},e.prototype.mr=function(){var t=this.getMap(),e=this.lr,n=t.getSize(),r=t.getView().calculateExtentInternal(n),i=e.getView(),o=Math.log(7.5)/Math.LN2;Xn(r,1/(.1*Math.pow(2,o/2))),i.fitInternal(ts(r))},e.prototype.gr=function(){var t=this.getMap(),e=this.lr,n=t.getView();e.getView().setCenterInternal(n.getCenterInternal())},e.prototype.kr=function(){var t=this.getMap(),e=this.lr;if(t.isRendered()&&e.isRendered()){var n=t.getSize(),r=t.getView(),i=e.getView(),o=this.sr?0:-r.getRotation(),a=this.vr,s=this.vr.getElement(),l=r.getCenterInternal(),u=r.getResolution(),c=i.getResolution(),h=n[0]*u/c,f=n[1]*u/c;if(a.setPosition(l),s){s.style.width=h+"px",s.style.height=f+"px";var p="rotate("+o+"rad)";s.style.transform=p}}},e.prototype.br=function(){this.Sr||(this.Sr=ot(this.lr,Ct,(function(t){delete this.Sr,this.kr()}),this))},e.prototype.ct=function(t){t.preventDefault(),this.yt()},e.prototype.yt=function(){this.element.classList.toggle(Qt),this.et?zt(this.st,this.ut):zt(this.ut,this.st),this.et=!this.et;var t=this.lr;if(!this.et){if(t.isRendered())return this.ur=void 0,void t.render();t.updateSize(),this.mr(),this.br()}},e.prototype.getCollapsible=function(){return this.ot},e.prototype.setCollapsible=function(t){this.ot!==t&&(this.ot=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.et&&this.yt())},e.prototype.setCollapsed=function(t){this.ot&&this.et!==t&&this.yt()},e.prototype.getCollapsed=function(){return this.et},e.prototype.getRotateWithView=function(){return this.sr},e.prototype.setRotateWithView=function(t){this.sr!==t&&(this.sr=t,0!==this.getMap().getView().getRotation()&&(this.sr?this.ar():this.lr.getView().setRotation(0),this.ur=void 0,this.wr(),this.kr()))},e.prototype.getOverviewMap=function(){return this.lr},e.prototype.render=function(t){this.wr(),this.kr()},e}(Kt),ws=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xs=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var i=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"â§",a=void 0!==r.compassClassName?r.compassClassName:"ol-compass";n.ut=null,"string"==typeof o?(n.ut=document.createElement("span"),n.ut.className=a,n.ut.textContent=o):(n.ut=o,n.ut.classList.add(a));var s=r.tipLabel?r.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(n.ut),l.addEventListener(X,n.ct.bind(n),!1);var u=i+" ol-unselectable "+Jt,c=n.element;return c.className=u,c.appendChild(l),n._r=r.resetNorth?r.resetNorth:void 0,n.Mr=void 0!==r.duration?r.duration:250,n.jr=void 0===r.autoHide||r.autoHide,n.Ar=void 0,n.jr&&n.element.classList.add(Yt),n}return ws(e,t),e.prototype.ct=function(t){t.preventDefault(),void 0!==this._r?this._r():this.Tr()},e.prototype.Tr=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.Mr>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.Mr,easing:Go}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.Ar){var r="rotate("+n+"rad)";if(this.jr){var i=this.element.classList.contains(Yt);i||0!==n?i&&0!==n&&this.element.classList.remove(Yt):this.element.classList.add(Yt)}this.ut.style.transform=r}this.Ar=n}},e}(Kt),Ss=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_s="units",ks="degrees",Es="metric",Ms=[1,2,5],Ts=25.4/.28,Os=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,n.once,n.un,n.Er=document.createElement("div"),n.Er.className=i+"-inner",n.element.className=i+" "+Xt,n.element.appendChild(n.Er),n.Rr=null,n.Cr=void 0!==r.minWidth?r.minWidth:64,n.lt=!1,n.Ir=void 0,n.Gt="",n.addChangeListener(_s,n.Pr),n.setUnits(r.units||Es),n.Dr=r.bar||!1,n.Nr=r.steps||4,n.Lr=r.text||!1,n.zr=r.dpi||void 0,n}return Ss(e,t),e.prototype.getUnits=function(){return this.get(_s)},e.prototype.Pr=function(){this.dt()},e.prototype.setUnits=function(t){this.set(_s,t)},e.prototype.setDpi=function(t){this.zr=t},e.prototype.dt=function(){var t=this.Rr;if(t){var e=t.center,n=t.projection,r=this.getUnits(),i=r==ks?Ue.DEGREES:Ue.METERS,o=Tr(n,t.resolution,e,i),a=this.Cr*(this.zr||Ts)/Ts,s=a*o,l="";if(r==ks){var u=Ge[Ue.DEGREES];(s*=u)<u/60?(l="â³",o*=3600):s<u?(l="â²",o*=60):l="Â°"}else"imperial"==r?s<.9144?(l="in",o/=.0254):s<1609.344?(l="ft",o/=.3048):(l="mi",o/=1609.344):"nautical"==r?(o/=1852,l="nm"):r==Es?s<.001?(l="Î¼m",o*=1e6):s<1?(l="mm",o*=1e3):s<1e3?l="m":(l="km",o/=1e3):"us"==r?s<.9144?(l="in",o*=39.37):s<1609.344?(l="ft",o/=.30480061):(l="mi",o/=1609.3472):w(!1,33);for(var c,h,f,p,d=3*Math.floor(Math.log(a*o)/Math.log(10));;){f=Math.floor(d/3);var g=Math.pow(10,f);if(c=Ms[(d%3+3)%3]*g,h=Math.round(c/o),isNaN(h))return this.element.style.display="none",void(this.lt=!1);if(h>=a)break;++d}p=this.Dr?this.createScaleBar(h,c,l):c.toFixed(f<0?-f:0)+" "+l,this.Gt!=p&&(this.Er.innerHTML=p,this.Gt=p),this.Ir!=h&&(this.Er.style.width=h+"px",this.Ir=h),this.lt||(this.element.style.display="",this.lt=!0)}else this.lt&&(this.element.style.display="none",this.lt=!1)},e.prototype.createScaleBar=function(t,e,n){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.Nr,a="#ffffff",s=0;s<this.Nr;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.Nr?this.createStepText(s,t,!1,e,n):"")+"</div>"),s===this.Nr-1&&i.push(this.createStepText(s+1,t,!0,e,n)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.Lr?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,n,r,i){var o=(0===t?0:Math.round(r/this.Nr*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.Nr*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.Nr*2)+"px;left: "+(n?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=Tr(this.Rr.projection,this.Rr.resolution,this.Rr.center),e=this.zr||Ts,n=this.Rr.projection.getMetersPerUnit();return parseFloat(t.toString())*n*(1e3/25.4)*e},e.prototype.render=function(t){var e=t.frameState;this.Rr=e?e.viewState:null,this.dt()},e}(Kt),Ps=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cs=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),target:r.target})||this;var i=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,a=void 0!==r.zoomInClassName?r.zoomInClassName:i+"-in",s=void 0!==r.zoomOutClassName?r.zoomOutClassName:i+"-out",l=void 0!==r.zoomInLabel?r.zoomInLabel:"+",u=void 0!==r.zoomOutLabel?r.zoomOutLabel:"â",c=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",h=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=c,f.appendChild("string"==typeof l?document.createTextNode(l):l),f.addEventListener(X,n.ct.bind(n,o),!1);var p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof u?document.createTextNode(u):u),p.addEventListener(X,n.ct.bind(n,-o),!1);var d=i+" ol-unselectable "+Jt,g=n.element;return g.className=d,g.appendChild(f),g.appendChild(p),n.Mr=void 0!==r.duration?r.duration:250,n}return Ps(e,t),e.prototype.ct=function(t,e){e.preventDefault(),this.Fr(t)},e.prototype.Fr=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var r=e.getConstrainedZoom(n+t);this.Mr>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.Mr,easing:Go})):e.setZoom(r)}}},e}(Kt),Is=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),As=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render})||this).vn=[],n.Ur=void 0,n.Br=0,n.hn,n.Gr=0,n.qr=0,n.Vr,n.Zr,n.Wr=null,n.$r=!1,n.Mr=void 0!==r.duration?r.duration:200;var i=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=i+"-thumb "+Xt;var a=n.element;return a.className=i+" ol-unselectable "+Jt,a.appendChild(o),a.addEventListener(je,n.Hr.bind(n),!1),a.addEventListener(Re,n.Kr.bind(n),!1),a.addEventListener(Ne,n.Xr.bind(n),!1),a.addEventListener(X,n.Yr.bind(n),!1),o.addEventListener(X,L,!1),n}return Is(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.Jr=function(){var t=this.element,e=t.offsetWidth,n=t.offsetHeight;if(0===e&&0===n)return this.$r=!1;var r=getComputedStyle(t);e-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var i=t.firstElementChild,o=getComputedStyle(i),a=i.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=i.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.Wr=[a,s],e>n?(this.Br=1,this.qr=e-a):(this.Br=0,this.Gr=n-s),this.$r=!0},e.prototype.Yr=function(t){var e=this.getMap().getView(),n=this.Qr(t.offsetX-this.Wr[0]/2,t.offsetY-this.Wr[1]/2),r=this.ti(n),i=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:i,duration:this.Mr,easing:Go})},e.prototype.Hr=function(t){if(!this.hn&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.Vr=t.clientX-parseFloat(e.style.left),this.Zr=t.clientY-parseFloat(e.style.top),this.hn=!0,0===this.vn.length){var n=this.Kr,r=this.Xr,i=this.getMap().getOwnerDocument();this.vn.push(it(i,Re,n,this),it(i,Ne,r,this))}}},e.prototype.Kr=function(t){if(this.hn){var e=t.clientX-this.Vr,n=t.clientY-this.Zr,r=this.Qr(e,n);this.Ur=this.ti(r),this.getMap().getView().setResolution(this.Ur)}},e.prototype.Xr=function(t){this.hn&&(this.getMap().getView().endInteraction(),this.hn=!1,this.Vr=void 0,this.Zr=void 0,this.vn.forEach(at),this.vn.length=0)},e.prototype.ni=function(t){var e=this.ei(t),n=this.element.firstElementChild;1==this.Br?n.style.left=this.qr*e+"px":n.style.top=this.Gr*e+"px"},e.prototype.Qr=function(t,e){return x(1===this.Br?t/this.qr:e/this.Gr,0,1)},e.prototype.ti=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.ei=function(t){return x(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e.prototype.render=function(t){if(t.frameState&&(this.$r||this.Jr())){var e=t.frameState.viewState.resolution;this.Ur=e,this.ni(e)}},e}(Kt),Ls=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rs=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var i=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",a=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(X,n.ct.bind(n),!1);var l=i+" ol-unselectable "+Jt,u=n.element;return u.className=l,u.appendChild(s),n}return Ls(e,t),e.prototype.ct=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(ts(e))},e}(Kt);function js(t){var e=t||{},n=new bt;return(void 0===e.zoom||e.zoom)&&n.push(new Cs(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new xs(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Te(e.attributionOptions)),n}var Ns=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$s=function(t){function e(e,n,r){var i=t.call(this)||this,o=r||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.ri=void 0===o.transition?250:o.transition,i.ii={},i}return Ns(e,t),e.prototype.changed=function(){this.dispatchEvent(W)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.ri=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){p()},e.prototype.getAlpha=function(t,e){if(!this.ri)return 1;var n=this.ii[t];if(n){if(-1===n)return 1}else n=e,this.ii[t]=n;var r=e-n+1e3/60;return r>=this.ri?1:Do(r/this.ri)},e.prototype.inTransition=function(t){return!!this.ri&&-1!==this.ii[t]},e.prototype.endTransition=function(t){this.ri&&(this.ii[t]=-1)},e}(H),Fs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ds=function(t){function e(e){var n=this;return(n=t.call(this,e.tileCoord,0,{transition:e.transition})||this).oi=e.loader,n.ai=null,n.si=null,n}return Fs(e,t),e.prototype.getData=function(){return this.ai},e.prototype.getError=function(){return this.si},e.prototype.load=function(){this.state=1,this.changed();var t=this;this.oi().then((function(e){t.ai=e,t.state=2,t.changed()})).catch((function(e){t.si=e,t.state=3,t.changed()}))},e}($s);function Gs(t){var e=arguments;return function(t){for(var n=!0,r=0,i=e.length;r<i&&(n=n&&e[r](t));++r);return n}}var Us=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Bs=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zs=function(t){return t.target.getTargetElement().contains(document.activeElement)},Vs=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||zs(t)},qs=$,Hs=function(t){var e=t.originalEvent;return 0==e.button&&!(Rt&&jt&&e.ctrlKey)},Ws=F,Ks=function(t){return t.type==yo.SINGLECLICK},Ys=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Xs=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zs=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Js=function(t){var e=t.originalEvent;return w(void 0!==e,56),"mouse"==e.pointerType},Qs=function(t){var e=t.originalEvent;return w(void 0!==e,56),e.isPrimary&&0===e.button},tl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function el(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(w("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}var nl=function(t){function e(e){var n=t.call(this)||this;if(n.on,n.once,n.un,n.ui=void 0,n.fi="geometry",n.ci=null,n.hi=void 0,n.li=null,n.addChangeListener(n.fi,n.vi),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;n.setGeometry(r)}else{var i=e;n.setProperties(i)}return n}return tl(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.fi)},e.prototype.getId=function(){return this.ui},e.prototype.getGeometryName=function(){return this.fi},e.prototype.getStyle=function(){return this.ci},e.prototype.getStyleFunction=function(){return this.hi},e.prototype.di=function(){this.changed()},e.prototype.vi=function(){this.li&&(at(this.li),this.li=null);var t=this.getGeometry();t&&(this.li=it(t,W,this.di,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.fi,t)},e.prototype.setStyle=function(t){this.ci=t,this.hi=t?el(t):void 0,this.changed()},e.prototype.setId=function(t){this.ui=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.fi,this.vi),this.fi=t,this.addChangeListener(this.fi,this.vi),this.vi()},e}(pt),rl="arraybuffer",il="json",ol="text",al=!1;function sl(t,e,n,r,i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,r,i):t,!0),e.getType()==rl&&(s.responseType="arraybuffer"),s.withCredentials=al,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r=e.getType(),l=void 0;r==il||r==ol?l=s.responseText:"xml"==r?(l=s.responseXML)||(l=(new DOMParser).parseFromString(s.responseText,"application/xml")):r==rl&&(l=s.response),l?o(e.readFeatures(l,{extent:n,featureProjection:i}),e.readProjection(l)):a()}else a()},s.onerror=a,s.send()}function ll(t,e){return function(n,r,i,o,a){var s=this;sl(t,e,n,r,i,(function(t,e){s.addFeatures(t),void 0!==o&&o(t)}),a||D)}}var ul=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var n;if(e){var r=e.dataProjection?Mr(e.dataProjection):this.readProjection(t);e.extent&&r&&r.getUnits()===Ue.TILE_PIXELS&&(r=Mr(r)).setWorldExtent(e.extent),n={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(n)},t.prototype.adaptOptions=function(t){return U({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return p()},t.prototype.readFeature=function(t,e){return p()},t.prototype.readFeatures=function(t,e){return p()},t.prototype.readGeometry=function(t,e){return p()},t.prototype.readProjection=function(t){return p()},t.prototype.writeFeature=function(t,e){return p()},t.prototype.writeFeatures=function(t,e){return p()},t.prototype.writeGeometry=function(t,e){return p()},t}();function cl(t,e,n){var r,i=n?Mr(n.featureProjection):null,o=n?Mr(n.dataProjection):null;if(r=i&&o&&!Lr(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&n&&void 0!==n.decimals){var a=Math.pow(10,n.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return r}function hl(t,e){var n=e?Mr(e.featureProjection):null,r=e?Mr(e.dataProjection):null;return n&&r&&!Lr(n,r)?$r(t,r,n):t}var fl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function pl(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var dl=function(t){function e(){return t.call(this)||this}return fl(e,t),e.prototype.getType=function(){return il},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(pl(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(pl(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return p()},e.prototype.readFeaturesFromObject=function(t,e){return p()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(pl(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return p()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(pl(t))},e.prototype.readProjectionFromObject=function(t){return p()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return p()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return p()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return p()},e}(ul);function gl(t,e,n,i,o,a,s){var l,u,c=(n-e)/i;if(1===c)l=e;else if(2===c)l=e,u=o;else if(0!==c){for(var h=t[e],f=t[e+1],p=0,d=[0],g=e+i;g<n;g+=i){var m=t[g],v=t[g+1];p+=Math.sqrt((m-h)*(m-h)+(v-f)*(v-f)),d.push(p),h=m,f=v}var y=o*p,b=r(d,y);b<0?(u=(y-d[-b-2])/(d[-b-1]-d[-b-2]),l=e+(-b-2)*i):l=e+b*i}var w=s>1?s:2,x=a||new Array(w);for(g=0;g<w;++g)x[g]=void 0===l?NaN:void 0===u?t[l+g]:C(t[l+g],t[l+i+g],u);return x}function ml(t,e,n,r,i,o){if(n==e)return null;var a;if(i<t[e+r-1])return o?((a=t.slice(e,e+r))[r-1]=i,a):null;if(t[n-1]<i)return o?((a=t.slice(n-r,n))[r-1]=i,a):null;if(i==t[e+r-1])return t.slice(e,e+r);for(var s=e/r,l=n/r;s<l;){var u=s+l>>1;i<t[(u+1)*r-1]?l=u:s=u+1}var c=t[s*r-1];if(i==c)return t.slice((s-1)*r,(s-1)*r+r);var h=(i-c)/(t[(s+1)*r-1]-c);a=[];for(var f=0;f<r-1;++f)a.push(C(t[(s-1)*r+f],t[s*r+f],h));return a.push(i),a}function vl(t,e,n,r,i,o,a){if(a)return ml(t,e,n[n.length-1],r,i,o);var s;if(i<t[r-1])return o?((s=t.slice(0,r))[r-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-r))[r-1]=i,s):null;for(var l=0,u=n.length;l<u;++l){var c=n[l];if(e!=c){if(i<t[e+r-1])return null;if(i<=t[c-1])return ml(t,e,c,r,i,!1);e=c}}return null}function yl(t,e,n,r){for(var i=t[e],o=t[e+1],a=0,s=e+r;s<n;s+=r){var l=t[s],u=t[s+1];a+=Math.sqrt((l-i)*(l-i)+(u-o)*(u-o)),i=l,o=u}return a}var bl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wl=function(t){function e(e,n){var r=t.call(this)||this;return r.yi=null,r.mi=-1,r.$n=-1,r.Hn=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return bl(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?l(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<yn(this.getExtent(),t,e)?r:(this.Hn!=this.getRevision()&&(this.$n=Math.sqrt(oa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.Hn=this.getRevision()),la(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.$n,!1,t,e,n,r))},e.prototype.forEachSegment=function(t){return Fa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=qo&&this.layout!=Ho)return null;var n=void 0!==e&&e;return ml(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return Sa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return gl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return yl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.mi!=this.getRevision()&&(this.yi=this.getCoordinateAt(.5,this.yi),this.mi=this.getRevision()),this.yi},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=ga(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,zo)},e.prototype.getType=function(){return tr.LINE_STRING},e.prototype.intersectsExtent=function(t){return Da(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fa(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ra),xl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sl=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.Kn=[],i.$n=-1,i.Hn=-1,Array.isArray(e[0]))i.setCoordinates(e,n);else if(void 0!==n&&r)i.setFlatCoordinates(n,e),i.Kn=r;else{for(var o=i.getLayout(),a=e,s=[],u=[],c=0,h=a.length;c<h;++c){var f=a[c];0===c&&(o=f.getLayout()),l(s,f.getFlatCoordinates()),u.push(s.length)}i.setFlatCoordinates(o,s),i.Kn=u}return i}return xl(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?l(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.Kn.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.Kn.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<yn(this.getExtent(),t,e)?r:(this.Hn!=this.getRevision()&&(this.$n=Math.sqrt(aa(this.flatCoordinates,0,this.Kn,this.stride,0)),this.Hn=this.getRevision()),ua(this.flatCoordinates,0,this.Kn,this.stride,this.$n,!1,t,e,n,r))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=qo&&this.layout!=Ho||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,i=void 0!==n&&n;return vl(this.flatCoordinates,0,this.Kn,this.stride,t,r,i)},e.prototype.getCoordinates=function(){return _a(this.flatCoordinates,0,this.Kn,this.stride)},e.prototype.getEnds=function(){return this.Kn},e.prototype.getLineString=function(t){return t<0||this.Kn.length<=t?null:new wl(this.flatCoordinates.slice(0===t?0:this.Kn[t-1],this.Kn[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.Kn,n=this.layout,r=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],l=new wl(t.slice(i,s),n);r.push(l),i=s}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.Kn,i=this.stride,o=0,a=r.length;o<a;++o){var s=r[o];l(t,gl(e,n,s,i,.5)),n=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=ma(this.flatCoordinates,0,this.Kn,this.stride,t,n,0,r),new e(n,zo,r)},e.prototype.getType=function(){return tr.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Ga(this.flatCoordinates,0,this.Kn,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=pa(this.flatCoordinates,0,t,this.stride,this.Kn);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(ra),_l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kl=function(t){function e(e,n){var r=t.call(this)||this;return n&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return _l(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?l(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<yn(this.getExtent(),t,e))return r;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var l=E(t,e,i[a],i[a+1]);if(l<r){r=l;for(var u=0;u<o;++u)n[u]=i[a+u];n.length=o}}return r},e.prototype.getCoordinates=function(){return Sa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Ia(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,o=t.length;i<o;i+=n){var a=new Ia(t.slice(i,i+n),e);r.push(a)}return r},e.prototype.getType=function(){return tr.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,r=0,i=e.length;r<i;r+=n)if(xn(t,e[r],e[r+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fa(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ra);function El(t,e,n,r){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=n.length;a<s;++a){var l=n[a];o=Tn(t,e,l[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return i}var Ml=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tl=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.bi=[],i.wi=-1,i.gi=null,i.$n=-1,i.Hn=-1,i.Jn=-1,i.Qn=null,!r&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],u=[],c=0,h=a.length;c<h;++c){var f=a[c];0===c&&(o=f.getLayout());for(var p=s.length,d=f.getEnds(),g=0,m=d.length;g<m;++g)d[g]+=p;l(s,f.getFlatCoordinates()),u.push(d)}n=o,e=s,r=u}return void 0!==n&&r?(i.setFlatCoordinates(n,e),i.bi=r):i.setCoordinates(e,n),i}return Ml(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;l(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,i=(e=t.getEnds().slice()).length;r<i;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.bi.push();this.bi.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.bi.length,n=new Array(t),r=0;r<t;++r)n[r]=this.bi[r].slice();var i=new e(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i},e.prototype.closestPointXY=function(t,e,n,r){return r<yn(this.getExtent(),t,e)?r:(this.Hn!=this.getRevision()&&(this.$n=Math.sqrt(sa(this.flatCoordinates,0,this.bi,this.stride,0)),this.Hn=this.getRevision()),ca(this.getOrientedFlatCoordinates(),0,this.bi,this.stride,this.$n,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return ja(this.getOrientedFlatCoordinates(),0,this.bi,this.stride,t,e)},e.prototype.getArea=function(){return Ta(this.getOrientedFlatCoordinates(),0,this.bi,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ya(e=this.getOrientedFlatCoordinates().slice(),0,this.bi,this.stride,t):e=this.flatCoordinates,ka(e,0,this.bi,this.stride)},e.prototype.getEndss=function(){return this.bi},e.prototype.getFlatInteriorPoints=function(){if(this.wi!=this.getRevision()){var t=El(this.flatCoordinates,0,this.bi,this.stride);this.gi=$a(this.getOrientedFlatCoordinates(),0,this.bi,this.stride,t),this.wi=this.getRevision()}return this.gi},e.prototype.getInteriorPoints=function(){return new kl(this.getFlatInteriorPoints().slice(),qo)},e.prototype.getOrientedFlatCoordinates=function(){if(this.Jn!=this.getRevision()){var t=this.flatCoordinates;Wa(t,0,this.bi,this.stride)?this.Qn=t:(this.Qn=t.slice(),this.Qn.length=Ya(this.Qn,0,this.bi,this.stride)),this.Jn=this.getRevision()}return this.Qn},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=xa(this.flatCoordinates,0,this.bi,this.stride,Math.sqrt(t),n,0,r),new e(n,zo,r)},e.prototype.getPolygon=function(t){if(t<0||this.bi.length<=t)return null;var e;if(0===t)e=0;else{var n=this.bi[t-1];e=n[n.length-1]}var r=this.bi[t].slice(),i=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new Ja(this.flatCoordinates.slice(e,i),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.bi,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o].slice(),l=s[s.length-1];if(0!==i)for(var u=0,c=s.length;u<c;++u)s[u]-=i;var h=new Ja(e.slice(i,l),t,s);r.push(h),i=l}return r},e.prototype.getType=function(){return tr.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return za(this.getOrientedFlatCoordinates(),0,this.bi,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=da(this.flatCoordinates,0,t,this.stride,this.bi);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(ra),Ol=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pl={};Pl[tr.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new Ia([t.x,t.y,t.z,t.m],Ho):void 0!==t.z?new Ia([t.x,t.y,t.z],Vo):void 0!==t.m?new Ia([t.x,t.y,t.m],qo):new Ia([t.x,t.y])},Pl[tr.LINE_STRING]=function(t){var e=Al(t);return new wl(t.paths[0],e)},Pl[tr.POLYGON]=function(t){var e=Al(t);return new Ja(t.rings,e)},Pl[tr.MULTI_POINT]=function(t){var e=Al(t);return new kl(t.points,e)},Pl[tr.MULTI_LINE_STRING]=function(t){var e=Al(t);return new Sl(t.paths,e)},Pl[tr.MULTI_POLYGON]=function(t){var e=Al(t);return new Tl(t.rings,e)};var Cl={};function Il(t,e){var n,r,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=tr.POINT;else if(t.points)i=tr.MULTI_POINT;else if(t.paths)i=1===t.paths.length?tr.LINE_STRING:tr.MULTI_LINE_STRING;else if(t.rings){var o=t,a=Al(o),s=function(t,e){var n,r,i=[],o=[],a=[];for(n=0,r=t.length;n<r;++n)i.length=0,fa(i,0,t[n],e.length),qa(i,0,i.length,e.length)?o.push([t[n]]):a.push(t[n]);for(;a.length;){var s=a.shift(),l=!1;for(n=o.length-1;n>=0;n--){var u=o[n][0];if(wn(new Pa(u).getExtent(),new Pa(s).getExtent())){o[n].push(s),l=!0;break}}l||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(i=tr.POLYGON,t=U({},t,((n={}).rings=s[0],n))):(i=tr.MULTI_POLYGON,t=U({},t,((r={}).rings=s,r)))}return cl((0,Pl[i])(t),!1,e)}function Al(t){var e=zo;return!0===t.hasZ&&!0===t.hasM?e=Ho:!0===t.hasZ?e=Vo:!0===t.hasM&&(e=qo),e}function Ll(t){var e=t.getLayout();return{hasZ:e===Vo||e===Ho,hasM:e===qo||e===Ho}}function Rl(t,e){return(0,Cl[t.getType()])(cl(t,!0,e),e)}Cl[tr.POINT]=function(t,e){var n,r=t.getCoordinates(),i=t.getLayout();return i===Vo?n={x:r[0],y:r[1],z:r[2]}:i===qo?n={x:r[0],y:r[1],m:r[2]}:i===Ho?n={x:r[0],y:r[1],z:r[2],m:r[3]}:i===zo?n={x:r[0],y:r[1]}:w(!1,34),n},Cl[tr.LINE_STRING]=function(t,e){var n=Ll(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:[t.getCoordinates()]}},Cl[tr.POLYGON]=function(t,e){var n=Ll(t);return{hasZ:n.hasZ,hasM:n.hasM,rings:t.getCoordinates(!1)}},Cl[tr.MULTI_POINT]=function(t,e){var n=Ll(t);return{hasZ:n.hasZ,hasM:n.hasM,points:t.getCoordinates()}},Cl[tr.MULTI_LINE_STRING]=function(t,e){var n=Ll(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:t.getCoordinates()}},Cl[tr.MULTI_POLYGON]=function(t,e){for(var n=Ll(t),r=t.getCoordinates(!1),i=[],o=0;o<r.length;o++)for(var a=r[o].length-1;a>=0;a--)i.push(r[o][a]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}};var jl=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this)||this).fi=r.geometryName,n}return Ol(e,t),e.prototype.readFeatureFromObject=function(t,e,n){var r=t,i=Il(r.geometry,e),o=new nl;if(this.fi&&o.setGeometryName(this.fi),o.setGeometry(i),r.attributes){o.setProperties(r.attributes,!0);var a=r.attributes[n];void 0!==a&&o.setId(a)}return o},e.prototype.readFeaturesFromObject=function(t,e){var n=e||{};if(t.features){for(var r=[],i=t.features,o=0,a=i.length;o<a;++o)r.push(this.readFeatureFromObject(i[o],n,t.objectIdFieldName));return r}return[this.readFeatureFromObject(t,n)]},e.prototype.readGeometryFromObject=function(t,e){return Il(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?Mr("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return Rl(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={};if(!t.hasProperties())return n.attributes={},n;var r=t.getProperties(),i=t.getGeometry();if(i){n.geometry=Rl(i,e);var o=e&&(e.dataProjection||e.featureProjection);o&&(n.geometry.spatialReference={wkid:Number(Mr(o).getCode().split(":").pop())}),delete r[t.getGeometryName()]}return V(r)?n.attributes={}:n.attributes=r,n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(this.writeFeatureObject(t[r],e));return{features:n}},e}(dl),Nl=function(){function t(t){this.ki=t}return t.prototype.getTagName=function(){return this.ki},t}(),$l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fl=function(t){function e(e,n){var r=t.call(this,e)||this;return r.conditions=n,w(r.conditions.length>=2,57),r}return $l(e,t),e}(Nl),Dl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gl=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return Dl(e,t),e}(Fl),Ul=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bl=function(t){function e(e,n,r){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=n,4!==n.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=r,i}return Ul(e,t),e}(Nl),zl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vl=function(t){function e(e,n){var r=t.call(this,e)||this;return r.propertyName=n,r}return zl(e,t),e}(Nl),ql=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hl=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.expression=r,o.matchCase=i,o}return ql(e,t),e}(Vl),Wl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kl=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.geometryName=n||"the_geom",o.geometry=r,o.srsName=i,o}return Wl(e,t),e}(Nl),Yl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xl=function(t){function e(e,n,r){return t.call(this,"Contains",e,n,r)||this}return Yl(e,t),e}(Kl),Zl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jl=function(t){function e(e,n,r){return t.call(this,"Disjoint",e,n,r)||this}return Zl(e,t),e}(Kl),Ql=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tu=function(t){function e(e,n,r){var i=t.call(this,"During",e)||this;return i.begin=n,i.end=r,i}return Ql(e,t),e}(Vl),eu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nu=function(t){function e(e,n,r,i,o){var a=t.call(this,"DWithin",e,n,o)||this;return a.distance=r,a.unit=i,a}return eu(e,t),e}(Kl),ru=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iu=function(t){function e(e,n,r){return t.call(this,"PropertyIsEqualTo",e,n,r)||this}return ru(e,t),e}(Hl),ou=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),au=function(t){function e(e,n){return t.call(this,"PropertyIsGreaterThan",e,n)||this}return ou(e,t),e}(Hl),su=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lu=function(t){function e(e,n){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,n)||this}return su(e,t),e}(Hl),uu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cu=function(t){function e(e,n,r){return t.call(this,"Intersects",e,n,r)||this}return uu(e,t),e}(Kl),hu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fu=function(t){function e(e,n,r){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=n,i.upperBoundary=r,i}return hu(e,t),e}(Vl),pu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),du=function(t){function e(e,n,r,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=n,s.wildCard=void 0!==r?r:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return pu(e,t),e}(Vl),gu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mu=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return gu(e,t),e}(Vl),vu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yu=function(t){function e(e,n){return t.call(this,"PropertyIsLessThan",e,n)||this}return vu(e,t),e}(Hl),bu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wu=function(t){function e(e,n){return t.call(this,"PropertyIsLessThanOrEqualTo",e,n)||this}return bu(e,t),e}(Hl),xu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Su=function(t){function e(e){var n=t.call(this,"Not")||this;return n.condition=e,n}return xu(e,t),e}(Nl),_u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ku=function(t){function e(e,n,r){return t.call(this,"PropertyIsNotEqualTo",e,n,r)||this}return _u(e,t),e}(Hl),Eu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mu=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return Eu(e,t),e}(Fl),Tu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ou=function(t){function e(e){var n=t.call(this,"ResourceId")||this;return n.rid=e,n}return Tu(e,t),e}(Nl),Pu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cu=function(t){function e(e,n,r){return t.call(this,"Within",e,n,r)||this}return Pu(e,t),e}(Kl);function Iu(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Gl,e))}function Au(t,e,n){return new Bl(t,e,n)}var Lu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ru(t){for(var e=[],n=0,r=t.length;n<r;++n)e.push(t[n].clone());return e}var ju=function(t){function e(e){var n=t.call(this)||this;return n.xi=e||null,n.Si=[],n._i(),n}return Lu(e,t),e.prototype.Mi=function(){this.Si.forEach(at),this.Si.length=0},e.prototype._i=function(){if(this.xi)for(var t=0,e=this.xi.length;t<e;++t)this.Si.push(it(this.xi[t],W,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.xi),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<yn(this.getExtent(),t,e))return r;for(var i=this.xi,o=0,a=i.length;o<a;++o)r=i[o].closestPointXY(t,e,n,r);return r},e.prototype.containsXY=function(t,e){for(var n=this.xi,r=0,i=n.length;r<i;++r)if(n[r].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){En(t);for(var e=this.xi,n=0,r=e.length;n<r;++n)Cn(t,e[n].getExtent());return t},e.prototype.getGeometries=function(){return Ru(this.xi)},e.prototype.getGeometriesArray=function(){return this.xi},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.xi,n=0,r=e.length;n<r;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],r=this.xi,i=!1,o=0,a=r.length;o<a;++o){var s=r[o],l=s.getSimplifiedGeometry(t);n.push(l),l!==s&&(i=!0)}if(i){var u=new e(null);return u.setGeometriesArray(n),u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return tr.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.xi,n=0,r=e.length;n<r;++n)if(e[n].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.xi.length},e.prototype.rotate=function(t,e){for(var n=this.xi,r=0,i=n.length;r<i;++r)n[r].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var r=n;r||(r=Gn(this.getExtent()));for(var i=this.xi,o=0,a=i.length;o<a;++o)i[o].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Ru(t))},e.prototype.setGeometriesArray=function(t){this.Mi(),this.xi=t,this._i(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.xi,n=0,r=e.length;n<r;++n)e[n].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.xi,r=0,i=n.length;r<i;++r)n[r].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.Mi(),t.prototype.disposeInternal.call(this)},e}(Qo),Nu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function $u(t,e){if(!t)return null;var n;switch(t.type){case tr.POINT:n=function(t){return new Ia(t.coordinates)}(t);break;case tr.LINE_STRING:n=function(t){return new wl(t.coordinates)}(t);break;case tr.POLYGON:n=function(t){return new Ja(t.coordinates)}(t);break;case tr.MULTI_POINT:n=function(t){return new kl(t.coordinates)}(t);break;case tr.MULTI_LINE_STRING:n=function(t){return new Sl(t.coordinates)}(t);break;case tr.MULTI_POLYGON:n=function(t){return new Tl(t.coordinates)}(t);break;case tr.GEOMETRY_COLLECTION:n=function(t,e){var n=t.geometries.map((function(t){return $u(t,undefined)}));return new ju(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return cl(n,!1,e)}function Fu(t,e){var n,r=(t=cl(t,!0,e)).getType();switch(r){case tr.POINT:n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case tr.LINE_STRING:n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case tr.POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case tr.MULTI_POINT:n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case tr.MULTI_LINE_STRING:n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case tr.MULTI_POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case tr.GEOMETRY_COLLECTION:n=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var n=U({},e);return delete n.featureProjection,Fu(t,n)}))}}(t,e);break;case tr.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return n}var Du=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this)||this).dataProjection=Mr(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(n.defaultFeatureProjection=Mr(r.featureProjection)),n.fi=r.geometryName,n.ji=r.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return Nu(e,t),e.prototype.readFeatureFromObject=function(t,e){var n,r=$u((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new nl;return this.fi?i.setGeometryName(this.fi):this.ji&&"geometry_name"in n!==void 0&&i.setGeometryName(n.geometry_name),i.setGeometry(r),"id"in n&&i.setId(n.id),n.properties&&i.setProperties(n.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var r=t.features,i=0,o=r.length;i<o;++i)n.push(this.readFeatureFromObject(r[i],e))}else n=[this.readFeatureFromObject(t,e)];return n},e.prototype.readGeometryFromObject=function(t,e){return $u(t,e)},e.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=Mr(n.properties.name):"EPSG"===n.type?e=Mr("EPSG:"+n.properties.code):w(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(n.id=r),!t.hasProperties())return n;var i=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=Fu(o,e),delete i[t.getGeometryName()]),V(i)||(n.properties=i),n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return Fu(t,this.adaptOptions(e))},e}(dl),Gu="http://www.w3.org/2001/XMLSchema-instance";function Uu(t,e){return hc().createElementNS(t,e)}function Bu(t,e){return zu(t,e,[]).join("")}function zu(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)zu(r,e,n)}return n}function Vu(t){return"documentElement"in t}function qu(t,e,n){return t.getAttributeNS(e,n)||""}function Hu(t){return(new DOMParser).parseFromString(t,"application/xml")}function Wu(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&l(r[r.length-1],i)}}function Ku(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&r[r.length-1].push(i)}}function Yu(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&(r[r.length-1]=i)}}function Xu(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:r.localName,l=void 0;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function Zu(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);void 0!==o&&(i[i.length-1][void 0!==e?e:r.localName]=o)}}function Ju(t,e){return function(n,r,i){t.call(void 0!==e?e:this,n,r,i),i[i.length-1].node.appendChild(n)}}function Qu(t,e){var n,r;return function(e,i,o){if(void 0===n){n={};var a={};a[e.localName]=t,n[e.namespaceURI]=a,r=tc(e.localName)}ac(n,r,i,o)}}function tc(t,e){var n=t;return function(t,r,i){var o=r[r.length-1].node,a=n;return void 0===a&&(a=i),Uu(void 0!==e?e:o.namespaceURI,a)}}var ec=tc();function nc(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=t[e[i]];return r}function rc(t,e,n){var r,i,o=void 0!==n?n:{};for(r=0,i=t.length;r<i;++r)o[t[r]]=e;return o}function ic(t,e,n,r){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(r,i,n)}}}function oc(t,e,n,r,i){return r.push(t),ic(e,n,r,i),r.pop()}function ac(t,e,n,r,i,o){for(var a,s,l=(void 0!==i?i:n).length,u=0;u<l;++u)void 0!==(a=n[u])&&void 0!==(s=e.call(void 0!==o?o:this,a,r,void 0!==i?i[u]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,r)}function sc(t,e,n,r,i,o,a){return i.push(t),ac(e,n,r,i,o,a),i.pop()}var lc=void 0;function uc(){return void 0===lc&&"undefined"!=typeof XMLSerializer&&(lc=new XMLSerializer),lc}var cc=void 0;function hc(){return void 0===cc&&"undefined"!=typeof document&&(cc=document.implementation.createDocument("","",null)),cc}var fc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pc=function(t){function e(){var e=t.call(this)||this;return e.Oi=uc(),e}return fc(e,t),e.prototype.getType=function(){return"xml"},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var n=Hu(t);return this.readFeatureFromDocument(n,e)}return Vu(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var n=this.readFeaturesFromDocument(t,e);return n.length>0?n[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var n=Hu(t);return this.readFeaturesFromDocument(n,e)}return Vu(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var n=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&l(n,this.readFeaturesFromNode(r,e));return n},e.prototype.readFeaturesFromNode=function(t,e){return p()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var n=Hu(t);return this.readGeometryFromDocument(n,e)}return Vu(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Hu(t);return this.readProjectionFromDocument(e)}return Vu(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var n=this.writeFeatureNode(t,e);return this.Oi.serializeToString(n)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var n=this.writeFeaturesNode(t,e);return this.Oi.serializeToString(n)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var n=this.writeGeometryNode(t,e);return this.Oi.serializeToString(n)},e.prototype.writeGeometryNode=function(t,e){return null},e}(ul),dc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gc="http://www.opengis.net/gml",mc=/^[\s\xa0]*$/,vc=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.featureType=r.featureType,n.featureNS=r.featureNS,n.srsName=r.srsName,n.schemaLocation="",n.FEATURE_COLLECTION_PARSERS={},n.FEATURE_COLLECTION_PARSERS[n.namespace]={featureMember:Ku(n.readFeaturesInternal),featureMembers:Yu(n.readFeaturesInternal)},n.supportedMediaTypes=["application/gml+xml"],n}return dc(e,t),e.prototype.readFeaturesInternal=function(t,e){var n=t.localName,r=null;if("FeatureCollection"==n)r=oc([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==n||"featureMember"==n||"member"==n){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,l=t.childNodes.length;s<l;++s){var u=t.childNodes[s];if(1===u.nodeType){var c=u.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",f=0,p=u.namespaceURI;for(var d in a){if(a[d]===p){h=d;break}++f}h||(a[h="p"+f]=p),o.push(h+":"+c)}}}"featureMember"!=n&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var m={},v=Array.isArray(o)?o:[o];for(var y in a){var b={};for(s=0,l=v.length;s<l;++s)(-1===v[s].indexOf(":")?"p0":v[s].split(":")[0])===y&&(b[v[s].split(":").pop()]="featureMembers"==n?Ku(this.readFeatureElement,this):Yu(this.readFeatureElement,this));m[a[y]]=b}r=oc("featureMember"==n||"member"==n?void 0:[],m,t,e)}return null===r&&(r=[]),r},e.prototype.readGeometryElement=function(t,e){var n=e[0];n.srsName=t.firstElementChild.getAttribute("srsName"),n.srsDimension=t.firstElementChild.getAttribute("srsDimension");var r=oc(null,this.GEOMETRY_PARSERS,t,e,this);return r?Array.isArray(r)?hl(r,n):cl(r,!1,n):void 0},e.prototype.readFeatureElementInternal=function(t,e,n){for(var r,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=Bu(o,!1),mc.test(a)&&(a=void 0)):(n&&(a=this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(r=s):a=this.readFeatureElementInternal(o,e,!1)),i[s]?(i[s]instanceof Array||(i[s]=[i[s]]),i[s].push(a)):i[s]=a;var l=o.attributes.length;if(l>0){i[s]={Ai:i[s]};for(var u=0;u<l;u++){var c=o.attributes[u].name;i[s][c]=o.attributes[u].value}}}if(n){var h=new nl(i);r&&h.setGeometryName(r);var f=t.getAttribute("fid")||qu(t,this.namespace,"id");return f&&h.setId(f),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);if(n)return new Ia(n,Vo)},e.prototype.readMultiPoint=function(t,e){var n=oc([],this.MULTIPOINT_PARSERS,t,e,this);return n?new kl(n):void 0},e.prototype.readMultiLineString=function(t,e){var n=oc([],this.MULTILINESTRING_PARSERS,t,e,this);if(n)return new Sl(n)},e.prototype.readMultiPolygon=function(t,e){var n=oc([],this.MULTIPOLYGON_PARSERS,t,e,this);if(n)return new Tl(n)},e.prototype.pointMemberParser=function(t,e){ic(this.POINTMEMBER_PARSERS,t,e,this)},e.prototype.lineStringMemberParser=function(t,e){ic(this.LINESTRINGMEMBER_PARSERS,t,e,this)},e.prototype.polygonMemberParser=function(t,e){ic(this.POLYGONMEMBER_PARSERS,t,e,this)},e.prototype.readLineString=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);return n?new wl(n,Vo):void 0},e.prototype.readFlatLinearRing=function(t,e){return oc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var n=this.readFlatCoordinatesFromNode(t,e);if(n)return new Pa(n,Vo)},e.prototype.readPolygon=function(t,e){var n=oc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(n&&n[0]){var r,i=n[0],o=[i.length],a=void 0;for(a=1,r=n.length;a<r;++a)l(i,n[a]),o.push(i.length);return new Ja(i,Vo,o)}},e.prototype.readFlatCoordinatesFromNode=function(t,e){return oc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var n={featureType:this.featureType,featureNS:this.featureNS};return e&&U(n,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[n])||[]},e.prototype.readProjectionFromNode=function(t){return Mr(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(pc);vc.prototype.namespace=gc,vc.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},vc.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},vc.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},vc.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Ku(vc.prototype.pointMemberParser),pointMembers:Ku(vc.prototype.pointMemberParser)}},vc.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Ku(vc.prototype.lineStringMemberParser),lineStringMembers:Ku(vc.prototype.lineStringMemberParser)}},vc.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Ku(vc.prototype.polygonMemberParser),polygonMembers:Ku(vc.prototype.polygonMemberParser)}},vc.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Ku(vc.prototype.readFlatCoordinatesFromNode)}},vc.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Ku(vc.prototype.readLineString)}},vc.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Ku(vc.prototype.readPolygon)}},vc.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Yu(vc.prototype.readFlatLinearRing)}};var yc=vc;function bc(t){return wc(Bu(t,!1))}function wc(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function xc(t){var e=Bu(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function Sc(t){return _c(Bu(t,!1))}function _c(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function kc(t){return Ec(Bu(t,!1))}function Ec(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Mc(t){return Bu(t,!1).trim()}function Tc(t,e){Ac(t,e?"1":"0")}function Oc(t,e){t.appendChild(hc().createCDATASection(e))}function Pc(t,e){var n=new Date(1e3*e),r=n.getUTCFullYear()+"-"+ar(n.getUTCMonth()+1,2)+"-"+ar(n.getUTCDate(),2)+"T"+ar(n.getUTCHours(),2)+":"+ar(n.getUTCMinutes(),2)+":"+ar(n.getUTCSeconds(),2)+"Z";t.appendChild(hc().createTextNode(r))}function Cc(t,e){var n=e.toPrecision();t.appendChild(hc().createTextNode(n))}function Ic(t,e){var n=e.toString();t.appendChild(hc().createTextNode(n))}function Ac(t,e){t.appendChild(hc().createTextNode(e))}var Lc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rc={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},jc=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[gc].featureMember=Ku(n.readFeaturesInternal),n.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",n}return Lc(e,t),e.prototype.readFlatCoordinates=function(t,e){var n=Bu(t,!1).replace(/^\s*|\s*$/g,""),r=e[0].srsName,i="enu";if(r){var o=Mr(r);o&&(i=o.getAxisOrientation())}for(var a=n.trim().split(/\s+/),s=[],l=0,u=a.length;l<u;l++){var c=a[l].split(/,+/),h=parseFloat(c[0]),f=parseFloat(c[1]),p=3===c.length?parseFloat(c[2]):0;"en"===i.substr(0,2)?s.push(h,f,p):s.push(f,h,p)}return s},e.prototype.readBox=function(t,e){var n=oc([null],this.Ti,t,e,this);return kn(n[1][0],n[1][1],n[1][3],n[1][4])},e.prototype.innerBoundaryIsParser=function(t,e){var n=oc(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)},e.prototype.outerBoundaryIsParser=function(t,e){var n=oc(void 0,this.RING_PARSERS,t,e,this);n&&(e[e.length-1][0]=n)},e.prototype.Ei=function(t,e,n){var r,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"MultiLineString"===r&&!0===s&&(r="MultiCurve"),Uu("http://www.opengis.net/gml",r)},e.prototype.writeFeatureElement=function(t,e,n){var r=e.getId();r&&t.setAttribute("fid",r);var i=n[n.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(s.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=Ju(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=Ju(Ac)))}}var f=U({},i);f.node=t,sc(f,i.serializers,tc(void 0,o),l,n,s)},e.prototype.writeCurveOrLineString=function(t,e,n){var r=n[n.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.Ri(t.namespaceURI);t.appendChild(i),this.Ci(i,e,n)}else if("Curve"===t.nodeName){var o=Uu(t.namespaceURI,"segments");t.appendChild(o),this.Ii(o,e,n)}},e.prototype.writeLineStringOrCurveMember=function(t,e,n){var r=this.Ei(e,n);r&&(t.appendChild(r),this.writeCurveOrLineString(r,e,n))},e.prototype.writeMultiCurveOrLineString=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();sc({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.Pi,s,n,void 0,this)},e.prototype.writeGeometryElement=function(t,e,n){var r,i=n[n.length-1],o=U({},i);o.node=t,r=Array.isArray(e)?hl(e,i):cl(e,!0,i),sc(o,this.GEOMETRY_SERIALIZERS,this.Ei,[r],n,void 0,this)},e.prototype.Ri=function(t){var e=Uu(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.Ci=function(t,e,n){for(var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=e.getCoordinates(),s=a.length,l=new Array(s),u=0;u<s;++u){var c=a[u];l[u]=this.Di(c,o,i)}Ac(t,l.join(" "))},e.prototype.Ii=function(t,e,n){var r=Uu(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,e,n)},e.prototype.writeSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();sc({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.Ni,a,n,void 0,this)}else if("Surface"===t.nodeName){var s=Uu(t.namespaceURI,"patches");t.appendChild(s),this.Li(s,e,n)}},e.prototype.Ni=function(t,e,n){var r=e[e.length-1],i=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Uu(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.Li=function(t,e,n){var r=Uu(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n)},e.prototype.writeRing=function(t,e,n){var r=Uu(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,e,n)},e.prototype.Di=function(t,e,n){var r="enu";e&&(r=Mr(e).getAxisOrientation());var i="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return n&&(i+=","+(t[2]||0)),i},e.prototype.writePoint=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var a=this.Ri(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();Ac(a,this.Di(s,o,i))},e.prototype.writeMultiPoint=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();sc({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS,tc("pointMember"),a,n,void 0,this)},e.prototype.writePointMember=function(t,e,n){var r=Uu(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,e,n)},e.prototype.writeLinearRing=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=this.Ri(t.namespaceURI);t.appendChild(i),this.Ci(i,e,n)},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();sc({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.Pi,s,n,void 0,this)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,n){var r=this.Ei(e,n);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n))},e.prototype.writeEnvelope=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];sc({node:t},this.ENVELOPE_SERIALIZERS,ec,i,n,["lowerCorner","upperCorner"],this)},e.prototype.Pi=function(t,e,n){var r=e[e.length-1].node;return Uu("http://www.opengis.net/gml",Rc[r.nodeName])},e}(yc);jc.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Yu(jc.prototype.readFlatCoordinates)}},jc.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:jc.prototype.innerBoundaryIsParser,outerBoundaryIs:jc.prototype.outerBoundaryIsParser}},jc.prototype.Ti={"http://www.opengis.net/gml":{coordinates:Ku(jc.prototype.readFlatCoordinates)}},jc.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Yu(yc.prototype.readPoint),MultiPoint:Yu(yc.prototype.readMultiPoint),LineString:Yu(yc.prototype.readLineString),MultiLineString:Yu(yc.prototype.readMultiLineString),LinearRing:Yu(yc.prototype.readLinearRing),Polygon:Yu(yc.prototype.readPolygon),MultiPolygon:Yu(yc.prototype.readMultiPolygon),Box:Yu(jc.prototype.readBox)}},jc.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ju(jc.prototype.writeCurveOrLineString),MultiCurve:Ju(jc.prototype.writeMultiCurveOrLineString),Point:Ju(jc.prototype.writePoint),MultiPoint:Ju(jc.prototype.writeMultiPoint),LineString:Ju(jc.prototype.writeCurveOrLineString),MultiLineString:Ju(jc.prototype.writeMultiCurveOrLineString),LinearRing:Ju(jc.prototype.writeLinearRing),Polygon:Ju(jc.prototype.writeSurfaceOrPolygon),MultiPolygon:Ju(jc.prototype.writeMultiSurfaceOrPolygon),Surface:Ju(jc.prototype.writeSurfaceOrPolygon),MultiSurface:Ju(jc.prototype.writeMultiSurfaceOrPolygon),Envelope:Ju(jc.prototype.writeEnvelope)}},jc.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ju(jc.prototype.writeLineStringOrCurveMember),curveMember:Ju(jc.prototype.writeLineStringOrCurveMember)}},jc.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Ju(jc.prototype.writeRing),innerBoundaryIs:Ju(jc.prototype.writeRing)}},jc.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ju(jc.prototype.writePointMember)}},jc.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ju(jc.prototype.writeSurfaceOrPolygonMember),polygonMember:Ju(jc.prototype.writeSurfaceOrPolygonMember)}},jc.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ju(Ac),upperCorner:Ju(Ac)}};var Nc=jc,$c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fc={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Dc=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).zi=void 0!==r.surface&&r.surface,n.Fi=void 0!==r.curve&&r.curve,n.Ui=void 0===r.multiCurve||r.multiCurve,n.Bi=void 0===r.multiSurface||r.multiSurface,n.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",n.hasZ=void 0!==r.hasZ&&r.hasZ,n}return $c(e,t),e.prototype.readMultiCurve=function(t,e){var n=oc([],this.MULTICURVE_PARSERS,t,e,this);return n?new Sl(n):void 0},e.prototype.readMultiSurface=function(t,e){var n=oc([],this.MULTISURFACE_PARSERS,t,e,this);if(n)return new Tl(n)},e.prototype.curveMemberParser=function(t,e){ic(this.CURVEMEMBER_PARSERS,t,e,this)},e.prototype.surfaceMemberParser=function(t,e){ic(this.SURFACEMEMBER_PARSERS,t,e,this)},e.prototype.readPatch=function(t,e){return oc([null],this.PATCHES_PARSERS,t,e,this)},e.prototype.readSegment=function(t,e){return oc([null],this.SEGMENTS_PARSERS,t,e,this)},e.prototype.readPolygonPatch=function(t,e){return oc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment=function(t,e){return oc([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser=function(t,e){var n=oc(void 0,this.RING_PARSERS,t,e,this);n&&e[e.length-1].push(n)},e.prototype.exteriorParser=function(t,e){var n=oc(void 0,this.RING_PARSERS,t,e,this);n&&(e[e.length-1][0]=n)},e.prototype.readSurface=function(t,e){var n=oc([null],this.SURFACE_PARSERS,t,e,this);if(n&&n[0]){var r,i=n[0],o=[i.length],a=void 0;for(a=1,r=n.length;a<r;++a)l(i,n[a]),o.push(i.length);return new Ja(i,Vo,o)}},e.prototype.readCurve=function(t,e){var n=oc([null],this.CURVE_PARSERS,t,e,this);return n?new wl(n,Vo):void 0},e.prototype.readEnvelope=function(t,e){var n=oc([null],this.ENVELOPE_PARSERS,t,e,this);return kn(n[1][0],n[1][1],n[2][0],n[2][1])},e.prototype.readFlatPos=function(t,e){for(var n,r=Bu(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];n=i.exec(r);)o.push(parseFloat(n[1])),r=r.substr(n[0].length);if(""===r){var a=e[0].srsName,s="enu";if(a&&(s=Mr(a).getAxisOrientation()),"neu"===s){var l,u=void 0;for(u=0,l=o.length;u<l;u+=3){var c=o[u],h=o[u+1];o[u]=h,o[u+1]=c}}var f=o.length;if(2==f&&o.push(0),0!==f)return o}},e.prototype.readFlatPosList=function(t,e){var n=Bu(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],i=r.srsName,o=r.srsDimension,a="enu";i&&(a=Mr(i).getAxisOrientation());var s,l,u,c=n.split(/\s+/),h=2;t.getAttribute("srsDimension")?h=Ec(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=Ec(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=Ec(t.parentNode.getAttribute("srsDimension")):o&&(h=Ec(o));for(var f=[],p=0,d=c.length;p<d;p+=h)s=parseFloat(c[p]),l=parseFloat(c[p+1]),u=3===h?parseFloat(c[p+2]):0,"en"===a.substr(0,2)?f.push(s,l,u):f.push(l,s,u);return f},e.prototype.Gi=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var a=r.srsName,s="enu";a&&(s=Mr(a).getAxisOrientation());var l,u=e.getCoordinates();l="en"===s.substr(0,2)?u[0]+" "+u[1]:u[1]+" "+u[0],i&&(l+=" "+(u[2]||0)),Ac(t,l)},e.prototype.Di=function(t,e,n){var r="enu";e&&(r=Mr(e).getAxisOrientation());var i="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return n&&(i+=" "+(t[2]||0)),i},e.prototype.qi=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,s=r.srsName,l=e.getCoordinates(),u=l.length,c=new Array(u),h=0;h<u;++h)a=l[h],c[h]=this.Di(a,s,i);Ac(t,c.join(" "))},e.prototype.writePoint=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=Uu(t.namespaceURI,"pos");t.appendChild(i),this.Gi(i,e,n)},e.prototype.writeEnvelope=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];sc({node:t},this.ENVELOPE_SERIALIZERS,ec,i,n,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing=function(t,e,n){var r=n[n.length-1].srsName;r&&t.setAttribute("srsName",r);var i=Uu(t.namespaceURI,"posList");t.appendChild(i),this.qi(i,e,n)},e.prototype.Ni=function(t,e,n){var r=e[e.length-1],i=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Uu(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();sc({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.Ni,a,n,void 0,this)}else if("Surface"===t.nodeName){var s=Uu(t.namespaceURI,"patches");t.appendChild(s),this.Li(s,e,n)}},e.prototype.writeCurveOrLineString=function(t,e,n){var r=n[n.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=Uu(t.namespaceURI,"posList");t.appendChild(i),this.qi(i,e,n)}else if("Curve"===t.nodeName){var o=Uu(t.namespaceURI,"segments");t.appendChild(o),this.Ii(o,e,n)}},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();sc({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.Pi,s,n,void 0,this)},e.prototype.writeMultiPoint=function(t,e,n){var r=n[n.length-1],i=r.srsName,o=r.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();sc({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,tc("pointMember"),a,n,void 0,this)},e.prototype.writeMultiCurveOrLineString=function(t,e,n){var r=n[n.length-1],i=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();sc({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.Pi,s,n,void 0,this)},e.prototype.writeRing=function(t,e,n){var r=Uu(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,e,n)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,n){var r=this.Ei(e,n);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n))},e.prototype.writePointMember=function(t,e,n){var r=Uu(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,e,n)},e.prototype.writeLineStringOrCurveMember=function(t,e,n){var r=this.Ei(e,n);r&&(t.appendChild(r),this.writeCurveOrLineString(r,e,n))},e.prototype.Li=function(t,e,n){var r=Uu(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,e,n)},e.prototype.Ii=function(t,e,n){var r=Uu(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,e,n)},e.prototype.writeGeometryElement=function(t,e,n){var r,i=n[n.length-1],o=U({},i);o.node=t,r=Array.isArray(e)?hl(e,i):cl(e,!0,i),sc(o,this.GEOMETRY_SERIALIZERS,this.Ei,[r],n,void 0,this)},e.prototype.writeFeatureElement=function(t,e,n){var r=e.getId();r&&t.setAttribute("fid",r);var i=n[n.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(s.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=Ju(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=Ju(Ac)))}}var f=U({},i);f.node=t,sc(f,i.serializers,tc(void 0,o),l,n,s)},e.prototype.Vi=function(t,e,n){var r=n[n.length-1],i=r.featureType,o=r.featureNS,a={};a[o]={},a[o][i]=Ju(this.writeFeatureElement,this);var s=U({},r);s.node=t,sc(s,a,tc(i,o),e,n)},e.prototype.Pi=function(t,e,n){var r=e[e.length-1].node;return Uu(this.namespace,Fc[r.nodeName])},e.prototype.Ei=function(t,e,n){var r,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,l=i.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"LineString"===r&&!0===s?r="Curve":"MultiLineString"===r&&!0===l&&(r="MultiCurve"),Uu(this.namespace,r)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var n=Uu(this.namespace,"geom"),r={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.Fi,surface:this.zi,multiSurface:this.Bi,multiCurve:this.Ui};return e&&U(r,e),this.writeGeometryElement(n,t,[r]),n},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Uu(this.namespace,"featureMembers");n.setAttributeNS(Gu,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.Fi,surface:this.zi,multiSurface:this.Bi,multiCurve:this.Ui,featureNS:this.featureNS,featureType:this.featureType};return e&&U(r,e),this.Vi(n,t,[r]),n},e}(yc);Dc.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Yu(Dc.prototype.readFlatPos),posList:Yu(Dc.prototype.readFlatPosList),coordinates:Yu(Nc.prototype.readFlatCoordinates)}},Dc.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Dc.prototype.interiorParser,exterior:Dc.prototype.exteriorParser}},Dc.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Yu(yc.prototype.readPoint),MultiPoint:Yu(yc.prototype.readMultiPoint),LineString:Yu(yc.prototype.readLineString),MultiLineString:Yu(yc.prototype.readMultiLineString),LinearRing:Yu(yc.prototype.readLinearRing),Polygon:Yu(yc.prototype.readPolygon),MultiPolygon:Yu(yc.prototype.readMultiPolygon),Surface:Yu(Dc.prototype.readSurface),MultiSurface:Yu(Dc.prototype.readMultiSurface),Curve:Yu(Dc.prototype.readCurve),MultiCurve:Yu(Dc.prototype.readMultiCurve),Envelope:Yu(Dc.prototype.readEnvelope)}},Dc.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Ku(Dc.prototype.curveMemberParser),curveMembers:Ku(Dc.prototype.curveMemberParser)}},Dc.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Ku(Dc.prototype.surfaceMemberParser),surfaceMembers:Ku(Dc.prototype.surfaceMemberParser)}},Dc.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Ku(yc.prototype.readLineString),Curve:Ku(Dc.prototype.readCurve)}},Dc.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Ku(yc.prototype.readPolygon),Surface:Ku(Dc.prototype.readSurface)}},Dc.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Yu(Dc.prototype.readPatch)}},Dc.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Yu(Dc.prototype.readSegment)}},Dc.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Ku(Dc.prototype.readFlatPosList),upperCorner:Ku(Dc.prototype.readFlatPosList)}},Dc.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Yu(Dc.prototype.readPolygonPatch)}},Dc.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Yu(Dc.prototype.readLineStringSegment)}},Dc.prototype.writeFeatures,Dc.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Ju(Dc.prototype.writeRing),interior:Ju(Dc.prototype.writeRing)}},Dc.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ju(Ac),upperCorner:Ju(Ac)}},Dc.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ju(Dc.prototype.writeSurfaceOrPolygonMember),polygonMember:Ju(Dc.prototype.writeSurfaceOrPolygonMember)}},Dc.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ju(Dc.prototype.writePointMember)}},Dc.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ju(Dc.prototype.writeLineStringOrCurveMember),curveMember:Ju(Dc.prototype.writeLineStringOrCurveMember)}},Dc.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ju(Dc.prototype.writeCurveOrLineString),MultiCurve:Ju(Dc.prototype.writeMultiCurveOrLineString),Point:Ju(Dc.prototype.writePoint),MultiPoint:Ju(Dc.prototype.writeMultiPoint),LineString:Ju(Dc.prototype.writeCurveOrLineString),MultiLineString:Ju(Dc.prototype.writeMultiCurveOrLineString),LinearRing:Ju(Dc.prototype.writeLinearRing),Polygon:Ju(Dc.prototype.writeSurfaceOrPolygon),MultiPolygon:Ju(Dc.prototype.writeMultiSurfaceOrPolygon),Surface:Ju(Dc.prototype.writeSurfaceOrPolygon),MultiSurface:Ju(Dc.prototype.writeMultiSurfaceOrPolygon),Envelope:Ju(Dc.prototype.writeEnvelope)}};var Gc=Dc,Uc=Gc;Uc.prototype.writeFeatures,Uc.prototype.writeFeaturesNode;var Bc=Uc,zc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vc=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:n.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",n}return zc(e,t),e}(Gc);Vc.prototype.namespace="http://www.opengis.net/gml/3.2",Vc.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Yu(Gc.prototype.readFlatPos),posList:Yu(Gc.prototype.readFlatPosList),coordinates:Yu(Nc.prototype.readFlatCoordinates)}},Vc.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Gc.prototype.interiorParser,exterior:Gc.prototype.exteriorParser}},Vc.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Yu(yc.prototype.readPoint),MultiPoint:Yu(yc.prototype.readMultiPoint),LineString:Yu(yc.prototype.readLineString),MultiLineString:Yu(yc.prototype.readMultiLineString),LinearRing:Yu(yc.prototype.readLinearRing),Polygon:Yu(yc.prototype.readPolygon),MultiPolygon:Yu(yc.prototype.readMultiPolygon),Surface:Yu(Vc.prototype.readSurface),MultiSurface:Yu(Gc.prototype.readMultiSurface),Curve:Yu(Vc.prototype.readCurve),MultiCurve:Yu(Gc.prototype.readMultiCurve),Envelope:Yu(Vc.prototype.readEnvelope)}},Vc.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Ku(Gc.prototype.curveMemberParser),curveMembers:Ku(Gc.prototype.curveMemberParser)}},Vc.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ku(Gc.prototype.surfaceMemberParser),surfaceMembers:Ku(Gc.prototype.surfaceMemberParser)}},Vc.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Ku(yc.prototype.readLineString),Curve:Ku(Gc.prototype.readCurve)}},Vc.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Ku(yc.prototype.readPolygon),Surface:Ku(Gc.prototype.readSurface)}},Vc.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Yu(Gc.prototype.readPatch)}},Vc.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Yu(Gc.prototype.readSegment)}},Vc.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ku(Gc.prototype.readFlatPosList),upperCorner:Ku(Gc.prototype.readFlatPosList)}},Vc.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Yu(Gc.prototype.readPolygonPatch)}},Vc.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Yu(Gc.prototype.readLineStringSegment)}},Vc.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Ku(yc.prototype.pointMemberParser),pointMembers:Ku(yc.prototype.pointMemberParser)}},Vc.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ku(yc.prototype.lineStringMemberParser),lineStringMembers:Ku(yc.prototype.lineStringMemberParser)}},Vc.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Ku(yc.prototype.polygonMemberParser),polygonMembers:Ku(yc.prototype.polygonMemberParser)}},Vc.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Ku(yc.prototype.readFlatCoordinatesFromNode)}},Vc.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Ku(yc.prototype.readLineString)}},Vc.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Ku(yc.prototype.readPolygon)}},Vc.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Yu(yc.prototype.readFlatLinearRing)}},Vc.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Ju(Gc.prototype.writeRing),interior:Ju(Gc.prototype.writeRing)}},Vc.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ju(Ac),upperCorner:Ju(Ac)}},Vc.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ju(Gc.prototype.writeSurfaceOrPolygonMember),polygonMember:Ju(Gc.prototype.writeSurfaceOrPolygonMember)}},Vc.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Ju(Gc.prototype.writePointMember)}},Vc.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ju(Gc.prototype.writeLineStringOrCurveMember),curveMember:Ju(Gc.prototype.writeLineStringOrCurveMember)}},Vc.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Ju(Gc.prototype.writeCurveOrLineString),MultiCurve:Ju(Gc.prototype.writeMultiCurveOrLineString),Point:Ju(Vc.prototype.writePoint),MultiPoint:Ju(Gc.prototype.writeMultiPoint),LineString:Ju(Gc.prototype.writeCurveOrLineString),MultiLineString:Ju(Gc.prototype.writeMultiCurveOrLineString),LinearRing:Ju(Gc.prototype.writeLinearRing),Polygon:Ju(Gc.prototype.writeSurfaceOrPolygon),MultiPolygon:Ju(Gc.prototype.writeMultiSurfaceOrPolygon),Surface:Ju(Gc.prototype.writeSurfaceOrPolygon),MultiSurface:Ju(Gc.prototype.writeMultiSurfaceOrPolygon),Envelope:Ju(Gc.prototype.writeEnvelope)}};var qc=Vc,Hc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wc=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Kc={rte:Sh,trk:_h,wpt:kh},Yc=rc(Wc,{rte:Ku(Sh),trk:Ku(_h),wpt:Ku(kh)}),Xc=rc(Wc,{text:Zu(Mc,"linkText"),type:Zu(Mc,"linkType")}),Zc=rc(Wc,{rte:Ju((function(t,e,n){var r=n[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==tr.LINE_STRING){var s=cl(a,!0,r);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var l=n[n.length-1].node,u=sh[l.namespaceURI],c=nc(i,u);sc(o,lh,ec,c,n,u)})),trk:Ju((function(t,e,n){var r=n[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==tr.MULTI_LINE_STRING){var s=cl(a,!0,r);i.trkseg=s.getLineStrings()}var l=n[n.length-1].node,u=ch[l.namespaceURI],c=nc(i,u);sc(o,hh,ec,c,n,u)})),wpt:Ju((function(t,e,n){var r=n[0],i=n[n.length-1];i.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==tr.POINT){var a=cl(o,!0,r);i.geometryLayout=a.getLayout(),Mh(t,a.getCoordinates(),n)}}))}),Jc=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=Mr("EPSG:4326"),n.Zi=r.readExtensions,n}return Hc(e,t),e.prototype.Wi=function(t){t||(t=[]);for(var e=0,n=t.length;e<n;++e){var r=t[e];if(this.Zi){var i=r.get("extensionsNode_")||null;this.Zi(r,i)}r.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!o(Wc,t.namespaceURI))return null;var n=Kc[t.localName];if(!n)return null;var r=n(t,[this.getReadOptions(t,e)]);return r?(this.Wi([r]),r):null},e.prototype.readFeaturesFromNode=function(t,e){if(!o(Wc,t.namespaceURI))return[];if("gpx"==t.localName){var n=oc([],Yc,t,[this.getReadOptions(t,e)]);return n?(this.Wi(n),n):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Uu("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Gu),n.setAttributeNS(Gu,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),sc({node:n},Zc,vh,t,[e]),n},e}(pc),Qc=rc(Wc,{name:Zu(Mc),cmt:Zu(Mc),desc:Zu(Mc),src:Zu(Mc),link:wh,number:Zu(kc),extensions:xh,type:Zu(Mc),rtept:function(t,e){var n=oc({},th,t,e);if(n){var r=e[e.length-1];yh(r.flatCoordinates,r.layoutOptions,t,n)}}}),th=rc(Wc,{ele:Zu(Sc),time:Zu(xc)}),eh=rc(Wc,{name:Zu(Mc),cmt:Zu(Mc),desc:Zu(Mc),src:Zu(Mc),link:wh,number:Zu(kc),type:Zu(Mc),extensions:xh,trkseg:function(t,e){var n=e[e.length-1];ic(nh,t,e);var r=n.flatCoordinates;n.ends.push(r.length)}}),nh=rc(Wc,{trkpt:function(t,e){var n=oc({},rh,t,e);if(n){var r=e[e.length-1];yh(r.flatCoordinates,r.layoutOptions,t,n)}}}),rh=rc(Wc,{ele:Zu(Sc),time:Zu(xc)}),ih=rc(Wc,{ele:Zu(Sc),time:Zu(xc),magvar:Zu(Sc),geoidheight:Zu(Sc),name:Zu(Mc),cmt:Zu(Mc),desc:Zu(Mc),src:Zu(Mc),link:wh,sym:Zu(Mc),type:Zu(Mc),fix:Zu(Mc),sat:Zu(kc),hdop:Zu(Sc),vdop:Zu(Sc),pdop:Zu(Sc),ageofdgpsdata:Zu(Sc),dgpsid:Zu(kc),extensions:xh}),oh=["text","type"],ah=rc(Wc,{text:Ju(Ac),type:Ju(Ac)}),sh=rc(Wc,["name","cmt","desc","src","link","number","type","rtept"]),lh=rc(Wc,{name:Ju(Ac),cmt:Ju(Ac),desc:Ju(Ac),src:Ju(Ac),link:Ju(Eh),number:Ju(Ic),type:Ju(Ac),rtept:Qu(Ju(Mh))}),uh=rc(Wc,["ele","time"]),ch=rc(Wc,["name","cmt","desc","src","link","number","type","trkseg"]),hh=rc(Wc,{name:Ju(Ac),cmt:Ju(Ac),desc:Ju(Ac),src:Ju(Ac),link:Ju(Eh),number:Ju(Ic),type:Ju(Ac),trkseg:Qu(Ju((function(t,e,n){var r={node:t};r.geometryLayout=e.getLayout(),r.properties={},sc(r,ph,fh,e.getCoordinates(),n)})))}),fh=tc("trkpt"),ph=rc(Wc,{trkpt:Ju(Mh)}),dh=rc(Wc,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),gh=rc(Wc,{ele:Ju(Cc),time:Ju(Pc),magvar:Ju(Cc),geoidheight:Ju(Cc),name:Ju(Ac),cmt:Ju(Ac),desc:Ju(Ac),src:Ju(Ac),link:Ju(Eh),sym:Ju(Ac),type:Ju(Ac),fix:Ju(Ac),sat:Ju(Ic),hdop:Ju(Cc),vdop:Ju(Cc),pdop:Ju(Cc),ageofdgpsdata:Ju(Cc),dgpsid:Ju(Ic)}),mh={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function vh(t,e,n){var r=t.getGeometry();if(r){var i=mh[r.getType()];if(i)return Uu(e[e.length-1].node.namespaceURI,i)}}function yh(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function bh(t,e,n){var r=zo,i=2;if(t.hasZ&&t.hasM?(r=Ho,i=4):t.hasZ?(r=Vo,i=3):t.hasM&&(r=qo,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,n)for(o=0,a=n.length;o<a;o++)n[o]=n[o]/4*i}return r}function wh(t,e){var n=e[e.length-1],r=t.getAttribute("href");null!==r&&(n.link=r),ic(Xc,t,e)}function xh(t,e){e[e.length-1].$i=t}function Sh(t,e){var n=e[0],r=oc({flatCoordinates:[],layoutOptions:{}},Qc,t,e);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var a=bh(o,i),s=new wl(i,a);cl(s,!1,n);var l=new nl(s);return l.setProperties(r,!0),l}}function _h(t,e){var n=e[0],r=oc({flatCoordinates:[],ends:[],layoutOptions:{}},eh,t,e);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var a=r.layoutOptions;delete r.layoutOptions;var s=bh(a,i,o),l=new Sl(i,s,o);cl(l,!1,n);var u=new nl(l);return u.setProperties(r,!0),u}}function kh(t,e){var n=e[0],r=oc({},ih,t,e);if(r){var i={},o=yh([],i,t,r),a=bh(i,o),s=new Ia(o,a);cl(s,!1,n);var l=new nl(s);return l.setProperties(r,!0),l}}function Eh(t,e,n){t.setAttribute("href",e);var r=n[n.length-1].properties,i=[r.linkText,r.linkType];sc({node:t},ah,ec,i,n,oh)}function Mh(t,e,n){var r=n[n.length-1],i=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case Ho:0!==e[3]&&(o.time=e[3]);case Vo:0!==e[2]&&(o.ele=e[2]);break;case qo:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?uh[i]:dh[i],s=nc(o,a);sc({node:t,properties:o},gh,ec,s,n,a)}var Th=Jc,Oh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ph(t){return"string"==typeof t?t:""}var Ch=function(t){function e(){return t.call(this)||this}return Oh(e,t),e.prototype.getType=function(){return ol},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(Ph(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return p()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(Ph(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return p()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(Ph(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return p()},e.prototype.readProjection=function(t){return this.readProjectionFromText(Ph(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return p()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return p()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return p()},e}(ul),Ih=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ah="none",Lh=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Rh=/^H.([A-Z]{3}).*?:(.*)/,jh=/^HFDTE(\d{2})(\d{2})(\d{2})/,Nh=/\r\n|\r|\n/,$h=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=Mr("EPSG:4326"),n.Hi=r.altitudeMode?r.altitudeMode:Ah,n}return Ih(e,t),e.prototype.readFeatureFromText=function(t,e){var n,r,i=this.Hi,o=t.split(Nh),a={},s=[],l=2e3,u=0,c=1,h=-1;for(n=0,r=o.length;n<r;++n){var f=o[n],p=void 0;if("B"==f.charAt(0)){if(p=Lh.exec(f)){var d=parseInt(p[1],10),g=parseInt(p[2],10),m=parseInt(p[3],10),v=parseInt(p[4],10)+parseInt(p[5],10)/6e4;"S"==p[6]&&(v=-v);var y=parseInt(p[7],10)+parseInt(p[8],10)/6e4;if("W"==p[9]&&(y=-y),s.push(y,v),i!=Ah){var b;b="gps"==i?parseInt(p[11],10):"barometric"==i?parseInt(p[12],10):0,s.push(b)}var w=Date.UTC(l,u,c,d,g,m);w<h&&(w=Date.UTC(l,u,c+1,d,g,m)),s.push(w/1e3),h=w}}else"H"==f.charAt(0)&&((p=jh.exec(f))?(c=parseInt(p[1],10),u=parseInt(p[2],10)-1,l=2e3+parseInt(p[3],10)):(p=Rh.exec(f))&&(a[p[1]]=p[2].trim()))}if(0===s.length)return null;var x=new wl(s,i==Ah?qo:Ho),S=new nl(cl(x,!1,e));return S.setProperties(a,!0),S},e.prototype.readFeaturesFromText=function(t,e){var n=this.readFeatureFromText(t,e);return n?[n]:[]},e}(Ch),Fh=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},Dh="version1",Gh="version2",Uh="version3",Bh={version1:{level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},version2:{level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},version3:{level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},none:{none:{supports:[],formats:[],qualities:[]}}},zh=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Vh=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,qh=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/,Hh={version1:function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=Bh[Dh].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:Fh(e.formats,[void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:Fh(e.qualities,[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},version2:function(t){var e=t.getComplianceLevelSupportedFeatures(),n=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,r=n&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=n&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=n&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:Fh(e.supports,r),formats:Fh(e.formats,i),qualities:Fh(e.qualities,o)}},version3:function(t){var e=t.getComplianceLevelSupportedFeatures(),n=void 0===t.imageInfo.extraFormats?e.formats:Fh(e.formats,t.imageInfo.extraFormats),r=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return o(["jpg","png","gif"],t)})).reduce((function(t,e){return void 0===t&&o(n,e)?e:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:Fh(e.supports,t.imageInfo.extraFeatures),formats:n,qualities:void 0===t.imageInfo.extraQualities?e.qualities:Fh(e.qualities,t.imageInfo.extraQualities),preferredFormat:r}}},Wh=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Dh;case"http://iiif.io/api/image/2/context.json":return Gh;case"http://iiif.io/api/image/3/context.json":return Uh;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Dh)&&this.imageInfo.identifier)return Dh}w(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case Dh:if(zh.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Uh:if(qh.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Gh:if("string"==typeof this.imageInfo.profile&&Vh.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&Vh.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var n=e.match(/level[0-2](?:\.json)?$/g);return Array.isArray(n)?n[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?Bh.none.none:Bh[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},n=this.getImageApiVersion();if(void 0!==n){var r=void 0===n?void 0:Hh[n](this);if(void 0!==r)return{url:r.url,version:n,size:[this.imageInfo.width,this.imageInfo.height],sizes:r.sizes,format:void 0!==e.format&&o(r.formats,e.format)?e.format:void 0!==r.preferredFormat?r.preferredFormat:"jpg",supports:r.supports,quality:e.quality&&o(r.qualities,e.quality)?e.quality:o(r.qualities,"native")?"native":"default",resolutions:Array.isArray(r.resolutions)?r.resolutions.sort((function(t,e){return e-t})):void 0,tileSize:r.tileSize}}},t}(),Kh=function(){function t(t){var e=t||{};this.Ki=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.Ki},t.prototype.setColor=function(t){this.Ki=t},t}(),Yh="fraction",Xh="pixels",Zh="bottom-left",Jh="bottom-right",Qh="top-left",tf="top-right",ef=function(){function t(t){this.Xi=t.opacity,this.sr=t.rotateWithView,this.Ar=t.rotation,this.Yi=t.scale,this.Ji=ds(t.scale),this.Qi=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.Xi},t.prototype.getRotateWithView=function(){return this.sr},t.prototype.getRotation=function(){return this.Ar},t.prototype.getScale=function(){return this.Yi},t.prototype.getScaleArray=function(){return this.Ji},t.prototype.getDisplacement=function(){return this.Qi},t.prototype.getAnchor=function(){return p()},t.prototype.getImage=function(t){return p()},t.prototype.getHitDetectionImage=function(){return p()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return p()},t.prototype.getImageSize=function(){return p()},t.prototype.getOrigin=function(){return p()},t.prototype.getSize=function(){return p()},t.prototype.setOpacity=function(t){this.Xi=t},t.prototype.setRotateWithView=function(t){this.sr=t},t.prototype.setRotation=function(t){this.Ar=t},t.prototype.setScale=function(t){this.Yi=t,this.Ji=ds(t)},t.prototype.listenImageChange=function(t){p()},t.prototype.load=function(){p()},t.prototype.unlistenImageChange=function(t){p()},t}(),nf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rf=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.extent=e,o.Me=r,o.resolution=n,o.state=i,o}return nf(e,t),e.prototype.changed=function(){this.dispatchEvent(W)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return p()},e.prototype.getPixelRatio=function(){return this.Me},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){p()},e}(H),of=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function af(t,e,n){var r=t;if(r.src&&Ft){var i=r.decode(),o=!0;return i.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){o=!1}}var a=[ot(r,tt,e),ot(r,K,n)];return function(){a.forEach(at)}}var sf=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,0)||this;return s.no=i,s.eo=new Image,null!==o&&(s.eo.crossOrigin=o),s.ro=null,s.state=0,s.io=a,s}return of(e,t),e.prototype.getImage=function(){return this.eo},e.prototype.oo=function(){this.state=3,this.ao(),this.changed()},e.prototype.so=function(){void 0===this.resolution&&(this.resolution=zn(this.extent)/this.eo.height),this.state=2,this.ao(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.io(this,this.no),this.ro=af(this.eo,this.so.bind(this),this.oo.bind(this)))},e.prototype.setImage=function(t){this.eo=t,this.resolution=zn(this.extent)/this.eo.height},e.prototype.ao=function(){this.ro&&(this.ro(),this.ro=null)},e}(rf),lf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uf=null,cf=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.uo=null,s.eo=e||new Image,null!==i&&(s.eo.crossOrigin=i),s.fo={},s.Ki=a,s.ro=null,s.co=o,s.ho=r,s.no=n,s.lo,s}return lf(e,t),e.prototype.vo=function(){if(void 0===this.lo&&2===this.co){uf||(uf=Gt(1,1)),uf.drawImage(this.eo,0,0);try{uf.getImageData(0,0,1,1),this.lo=!1}catch(t){uf=null,this.lo=!0}}return!0===this.lo},e.prototype.do=function(){this.dispatchEvent(W)},e.prototype.oo=function(){this.co=3,this.ao(),this.do()},e.prototype.so=function(){this.co=2,this.ho?(this.eo.width=this.ho[0],this.eo.height=this.ho[1]):this.ho=[this.eo.width,this.eo.height],this.ao(),this.do()},e.prototype.getImage=function(t){return this.po(t),this.fo[t]?this.fo[t]:this.eo},e.prototype.getPixelRatio=function(t){return this.po(t),this.fo[t]?t:1},e.prototype.getImageState=function(){return this.co},e.prototype.getHitDetectionImage=function(){if(!this.uo)if(this.vo()){var t=this.ho[0],e=this.ho[1],n=Gt(t,e);n.fillRect(0,0,t,e),this.uo=n.canvas}else this.uo=this.eo;return this.uo},e.prototype.getSize=function(){return this.ho},e.prototype.getSrc=function(){return this.no},e.prototype.load=function(){if(0==this.co){this.co=1;try{this.eo.src=this.no}catch(t){this.oo()}this.ro=af(this.eo,this.so.bind(this),this.oo.bind(this))}},e.prototype.po=function(t){if(this.Ki&&!this.fo[t]){var e=document.createElement("canvas");this.fo[t]=e,e.width=Math.ceil(this.eo.width*t),e.height=Math.ceil(this.eo.height*t);var n=e.getContext("2d");if(n.scale(t,t),n.drawImage(this.eo,0,0),n.globalCompositeOperation="multiply","multiply"===n.globalCompositeOperation||this.vo())n.fillStyle=St(this.Ki),n.fillRect(0,0,e.width/t,e.height/t),n.globalCompositeOperation="destination-in",n.drawImage(this.eo,0,0);else{for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,o=this.Ki[0]/255,a=this.Ki[1]/255,s=this.Ki[2]/255,l=this.Ki[3],u=0,c=i.length;u<c;u+=4)i[u]*=o,i[u+1]*=a,i[u+2]*=s,i[u+3]*=l;n.putImageData(r,0,0)}}},e.prototype.ao=function(){this.ro&&(this.ro(),this.ro=null)},e}(H);function hf(t,e,n,r,i,o){var a=vi.get(e,r,o);return a||(a=new cf(t,e,n,r,i,o),vi.set(e,r,o,a)),a}var ff=cf,pf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),df=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.opacity?r.opacity:1,o=void 0!==r.rotation?r.rotation:0,a=void 0!==r.scale?r.scale:1,s=void 0!==r.rotateWithView&&r.rotateWithView;(n=t.call(this,{opacity:i,rotation:o,scale:a,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:s})||this).yo=void 0!==r.anchor?r.anchor:[.5,.5],n.mo=null,n.bo=void 0!==r.anchorOrigin?r.anchorOrigin:Qh,n.wo=void 0!==r.anchorXUnits?r.anchorXUnits:Yh,n.ko=void 0!==r.anchorYUnits?r.anchorYUnits:Yh,n.xo=void 0!==r.crossOrigin?r.crossOrigin:null;var l=void 0!==r.img?r.img:null,u=void 0!==r.imgSize?r.imgSize:null,c=r.src;w(!(void 0!==c&&l),4),w(!l||l&&u,5),void 0!==c&&0!==c.length||!l||(c=l.src||g(l)),w(void 0!==c&&c.length>0,6);var h=void 0!==r.src?0:2;return n.Ki=void 0!==r.color?Et(r.color):null,n.So=hf(l,c,u,n.xo,h,n.Ki),n._o=void 0!==r.offset?r.offset:[0,0],n.Mo=void 0!==r.offsetOrigin?r.offsetOrigin:Qh,n.jo=null,n.ho=void 0!==r.size?r.size:null,n}return pf(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.yo.slice(),anchorOrigin:this.bo,anchorXUnits:this.wo,anchorYUnits:this.ko,crossOrigin:this.xo,color:this.Ki&&this.Ki.slice?this.Ki.slice():this.Ki||void 0,src:this.getSrc(),offset:this._o.slice(),offsetOrigin:this.Mo,size:null!==this.ho?this.ho.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.mo)return this.mo;var t=this.yo,e=this.getSize();if(this.wo==Yh||this.ko==Yh){if(!e)return null;t=this.yo.slice(),this.wo==Yh&&(t[0]*=e[0]),this.ko==Yh&&(t[1]*=e[1])}if(this.bo!=Qh){if(!e)return null;t===this.yo&&(t=this.yo.slice()),this.bo!=tf&&this.bo!=Jh||(t[0]=-t[0]+e[0]),this.bo!=Zh&&this.bo!=Jh||(t[1]=-t[1]+e[1])}var n=this.getDisplacement();return t[0]-=n[0],t[1]+=n[1],this.mo=t,this.mo},e.prototype.setAnchor=function(t){this.yo=t,this.mo=null},e.prototype.getColor=function(){return this.Ki},e.prototype.getImage=function(t){return this.So.getImage(t)},e.prototype.getPixelRatio=function(t){return this.So.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.So.getSize()},e.prototype.getImageState=function(){return this.So.getImageState()},e.prototype.getHitDetectionImage=function(){return this.So.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.jo)return this.jo;var t=this._o;if(this.Mo!=Qh){var e=this.getSize(),n=this.So.getSize();if(!e||!n)return null;t=t.slice(),this.Mo!=tf&&this.Mo!=Jh||(t[0]=n[0]-e[0]-t[0]),this.Mo!=Zh&&this.Mo!=Jh||(t[1]=n[1]-e[1]-t[1])}return this.jo=t,this.jo},e.prototype.getSrc=function(){return this.So.getSrc()},e.prototype.getSize=function(){return this.ho?this.ho:this.So.getSize()},e.prototype.listenImageChange=function(t){this.So.addEventListener(W,t)},e.prototype.load=function(){this.So.load()},e.prototype.unlistenImageChange=function(t){this.So.removeEventListener(W,t)},e}(ef),gf=function(){function t(t){var e=t||{};this.Ki=void 0!==e.color?e.color:null,this.Oo=e.lineCap,this.Ao=void 0!==e.lineDash?e.lineDash:null,this.To=e.lineDashOffset,this.Eo=e.lineJoin,this.Ro=e.miterLimit,this.Co=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.Ki},t.prototype.getLineCap=function(){return this.Oo},t.prototype.getLineDash=function(){return this.Ao},t.prototype.getLineDashOffset=function(){return this.To},t.prototype.getLineJoin=function(){return this.Eo},t.prototype.getMiterLimit=function(){return this.Ro},t.prototype.getWidth=function(){return this.Co},t.prototype.setColor=function(t){this.Ki=t},t.prototype.setLineCap=function(t){this.Oo=t},t.prototype.setLineDash=function(t){this.Ao=t},t.prototype.setLineDashOffset=function(t){this.To=t},t.prototype.setLineJoin=function(t){this.Eo=t},t.prototype.setMiterLimit=function(t){this.Ro=t},t.prototype.setWidth=function(t){this.Co=t},t}(),mf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vf=function(t){function e(e){var n=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return(n=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).fo=void 0,n.Io=null,n.Po=void 0!==e.fill?e.fill:null,n.jo=[0,0],n.Do=e.points,n.No=void 0!==e.radius?e.radius:e.radius1,n.Lo=e.radius2,n.zo=void 0!==e.angle?e.angle:0,n.Fo=void 0!==e.stroke?e.stroke:null,n.yo=null,n.ho=null,n.Uo=null,n.render(),n}return mf(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){return this.yo},e.prototype.getAngle=function(){return this.zo},e.prototype.getFill=function(){return this.Po},e.prototype.getHitDetectionImage=function(){return this.Io||this.Bo(this.Uo),this.Io},e.prototype.getImage=function(t){var e=this.fo[t];if(!e){var n=this.Uo,r=Gt(n.size*t,n.size*t);this.Go(n,r,t),e=r.canvas,this.fo[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.ho},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.jo},e.prototype.getPoints=function(){return this.Do},e.prototype.getRadius=function(){return this.No},e.prototype.getRadius2=function(){return this.Lo},e.prototype.getSize=function(){return this.ho},e.prototype.getStroke=function(){return this.Fo},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.qo=function(t,e,n){if(0===e||this.Do===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.No,i=void 0===this.Lo?r:this.Lo;if(r<i){var o=r;r=i,i=o}var a=void 0===this.Lo?this.Do:2*this.Do,s=2*Math.PI/a,l=i*Math.sin(s),u=r-Math.sqrt(i*i-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if("miter"===t&&h<=n)return h*e;var f=e/2/h,p=e/2*(u/c),d=Math.sqrt((r+f)*(r+f)+p*p)-r;if(void 0===this.Lo||"bevel"===t)return 2*d;var g=r*Math.sin(s),m=i-Math.sqrt(r*r-g*g),v=Math.sqrt(g*g+m*m)/g;if(v<=n){var y=v*e/2-i-r;return 2*Math.max(d,y)}return 2*d},e.prototype.createRenderOptions=function(){var t,e=Ti,n=0,r=null,i=0,o=0;this.Fo&&(null===(t=this.Fo.getColor())&&(t=Pi),t=Pt(t),void 0===(o=this.Fo.getWidth())&&(o=1),r=this.Fo.getLineDash(),i=this.Fo.getLineDashOffset(),void 0===(e=this.Fo.getLineJoin())&&(e=Ti),void 0===(n=this.Fo.getMiterLimit())&&(n=Oi));var a=this.qo(e,o,n),s=Math.max(this.No,this.Lo||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*s+a),lineDash:r,lineDashOffset:i,lineJoin:e,miterLimit:n}},e.prototype.render=function(){this.Uo=this.createRenderOptions();var t=this.Uo.size,e=this.getDisplacement();this.fo={},this.yo=[t/2-e[0],t/2+e[1]],this.ho=[t,t]},e.prototype.Go=function(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.Vo(e),this.Po){var r=this.Po.getColor();null===r&&(r=ki),e.fillStyle=Pt(r),e.fill()}this.Fo&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.Bo=function(t){if(this.Po){var e=this.Po.getColor(),n=0;if("string"==typeof e&&(e=Et(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){var r=Gt(t.size,t.size);this.Io=r.canvas,this.Zo(t,r)}}this.Io||(this.Io=this.getImage(1))},e.prototype.Vo=function(t){var e=this.Do,n=this.No;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{var r=void 0===this.Lo?n:this.Lo;void 0!==this.Lo&&(e*=2);for(var i=this.zo-Math.PI/2,o=2*Math.PI/e,a=0;a<e;a++){var s=i+a*o,l=a%2==0?n:r;t.lineTo(l*Math.cos(s),l*Math.sin(s))}t.closePath()}},e.prototype.Zo=function(t,e){e.translate(t.size/2,t.size/2),this.Vo(e),e.fillStyle=ki,e.fill(),this.Fo&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(ef),yf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bf=function(t){function e(e){var n=e||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:void 0!==n.scale?n.scale:1,rotation:void 0!==n.rotation?n.rotation:0,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this}return yf(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.No=t,this.render()},e}(vf);function wf(t){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var xf=function(){function t(t){var e=t||{};this.Wo=null,this.$o=Mf,void 0!==e.geometry&&this.setGeometry(e.geometry),this.Po=void 0!==e.fill?e.fill:null,this.eo=void 0!==e.image?e.image:null,this.H=void 0!==e.renderer?e.renderer:null,this.Fo=void 0!==e.stroke?e.stroke:null,this.Ho=void 0!==e.text?e.text:null,this.Ko=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===wf(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.H},t.prototype.setRenderer=function(t){this.H=t},t.prototype.getGeometry=function(){return this.Wo},t.prototype.getGeometryFunction=function(){return this.$o},t.prototype.getFill=function(){return this.Po},t.prototype.setFill=function(t){this.Po=t},t.prototype.getImage=function(){return this.eo},t.prototype.setImage=function(t){this.eo=t},t.prototype.getStroke=function(){return this.Fo},t.prototype.setStroke=function(t){this.Fo=t},t.prototype.getText=function(){return this.Ho},t.prototype.setText=function(t){this.Ho=t},t.prototype.getZIndex=function(){return this.Ko},t.prototype.setGeometry=function(t){"function"==typeof t?this.$o=t:"string"==typeof t?this.$o=function(e){return e.get(t)}:t?void 0!==t&&(this.$o=function(){return t}):this.$o=Mf,this.Wo=t},t.prototype.setZIndex=function(t){this.Ko=t},t}();function Sf(t){var e,n;"function"==typeof t?e=t:(Array.isArray(t)?n=t:(w("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n});return e}var _f=null;function kf(t,e){if(!_f){var n=new Kh({color:"rgba(255,255,255,0.4)"}),r=new gf({color:"#3399CC",width:1.25});_f=[new xf({image:new bf({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return _f}function Ef(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t[tr.POLYGON]=[new xf({fill:new Kh({color:[255,255,255,.5]})})],t[tr.MULTI_POLYGON]=t[tr.POLYGON],t[tr.LINE_STRING]=[new xf({stroke:new gf({color:e,width:5})}),new xf({stroke:new gf({color:n,width:3})})],t[tr.MULTI_LINE_STRING]=t[tr.LINE_STRING],t[tr.CIRCLE]=t[tr.POLYGON].concat(t[tr.LINE_STRING]),t[tr.POINT]=[new xf({image:new bf({radius:6,fill:new Kh({color:n}),stroke:new gf({color:e,width:1.5})}),zIndex:1/0})],t[tr.MULTI_POINT]=t[tr.POINT],t[tr.GEOMETRY_COLLECTION]=t[tr.POLYGON].concat(t[tr.LINE_STRING],t[tr.POINT]),t}function Mf(t){return t.getGeometry()}var Tf=xf,Of=function(){function t(t){var e=t||{};this.Xo=e.font,this.Ar=e.rotation,this.sr=e.rotateWithView,this.Yi=e.scale,this.Ji=ds(void 0!==e.scale?e.scale:1),this.Ho=e.text,this.Yo=e.textAlign,this.Jo=e.textBaseline,this.Po=void 0!==e.fill?e.fill:new Kh({color:"#333"}),this.Qo=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.ta=void 0!==e.placement?e.placement:"point",this.na=!!e.overflow,this.Fo=void 0!==e.stroke?e.stroke:null,this.ea=void 0!==e.offsetX?e.offsetX:0,this.ra=void 0!==e.offsetY?e.offsetY:0,this.ia=e.backgroundFill?e.backgroundFill:null,this.oa=e.backgroundStroke?e.backgroundStroke:null,this.de=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.na},t.prototype.getFont=function(){return this.Xo},t.prototype.getMaxAngle=function(){return this.Qo},t.prototype.getPlacement=function(){return this.ta},t.prototype.getOffsetX=function(){return this.ea},t.prototype.getOffsetY=function(){return this.ra},t.prototype.getFill=function(){return this.Po},t.prototype.getRotateWithView=function(){return this.sr},t.prototype.getRotation=function(){return this.Ar},t.prototype.getScale=function(){return this.Yi},t.prototype.getScaleArray=function(){return this.Ji},t.prototype.getStroke=function(){return this.Fo},t.prototype.getText=function(){return this.Ho},t.prototype.getTextAlign=function(){return this.Yo},t.prototype.getTextBaseline=function(){return this.Jo},t.prototype.getBackgroundFill=function(){return this.ia},t.prototype.getBackgroundStroke=function(){return this.oa},t.prototype.getPadding=function(){return this.de},t.prototype.setOverflow=function(t){this.na=t},t.prototype.setFont=function(t){this.Xo=t},t.prototype.setMaxAngle=function(t){this.Qo=t},t.prototype.setOffsetX=function(t){this.ea=t},t.prototype.setOffsetY=function(t){this.ra=t},t.prototype.setPlacement=function(t){this.ta=t},t.prototype.setRotateWithView=function(t){this.sr=t},t.prototype.setFill=function(t){this.Po=t},t.prototype.setRotation=function(t){this.Ar=t},t.prototype.setScale=function(t){this.Yi=t,this.Ji=ds(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.Fo=t},t.prototype.setText=function(t){this.Ho=t},t.prototype.setTextAlign=function(t){this.Yo=t},t.prototype.setTextBaseline=function(t){this.Jo=t},t.prototype.setBackgroundFill=function(t){this.ia=t},t.prototype.setBackgroundStroke=function(t){this.oa=t},t.prototype.setPadding=function(t){this.de=t},t}();function Pf(t){return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Cf,If,Af,Lf,Rf,jf,Nf,$f,Ff,Df=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gf=["http://www.google.com/kml/ext/2.2"],Uf=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Bf={fraction:Yh,pixels:Xh,insetPixels:Xh},zf=rc(Uf,{ExtendedData:$p,Region:Fp,MultiGeometry:Zu(Op,"geometry"),LineString:Zu(Ep,"geometry"),LinearRing:Zu(Mp,"geometry"),Point:Zu(Pp,"geometry"),Polygon:Zu(Ip,"geometry"),Style:Zu(Lp),StyleMap:function(t,e){var n=hp.call(this,t,e);if(n){var r=e[e.length-1];Array.isArray(n)?r.Style=n:"string"==typeof n?r.styleUrl=n:w(!1,38)}},address:Zu(Mc),description:Zu(Mc),name:Zu(Mc),open:Zu(bc),phoneNumber:Zu(Mc),styleUrl:Zu(lp),visibility:Zu(bc)},rc(Gf,{MultiTrack:Zu((function(t,e){var n=oc([],yp,t,e);if(n)return new Sl(n)}),"geometry"),Track:Zu(wp,"geometry")})),Vf=rc(Uf,{ExtendedData:$p,Region:Fp,Link:function(t,e){ic(qf,t,e)},address:Zu(Mc),description:Zu(Mc),name:Zu(Mc),open:Zu(bc),phoneNumber:Zu(Mc),visibility:Zu(bc)}),qf=rc(Uf,{href:Zu(sp)}),Hf=rc(Uf,{LatLonAltBox:function(t,e){var n=oc({},Up,t,e);if(n){var r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}},Lod:function(t,e){var n=oc({},Bp,t,e);if(n){var r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}}}),Wf=rc(Uf,["Document","Placemark"]),Kf=rc(Uf,{Document:Ju((function(t,e,n){sc({node:t},Wp,Kp,e,n,void 0,this)})),Placemark:Ju(yd)}),Yf=null,Xf=null,Zf=null,Jf=null,Qf=null,tp=null;function ep(t){return 32/Math.min(t[0],t[1])}function np(t){return t}var rp=function(t){function e(e){var n=t.call(this)||this,r=e||{};return tp||(Yf=new Kh({color:Cf=[255,255,255,1]}),jf="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Xf=new df({anchor:If=[20,2],anchorOrigin:Zh,anchorXUnits:Af=Xh,anchorYUnits:Lf=Xh,crossOrigin:"anonymous",rotation:0,scale:ep(Rf=[64,64]),size:Rf,src:jf}),Nf="NO_IMAGE",Zf=new gf({color:Cf,width:1}),$f=new gf({color:[51,51,51,1],width:2}),Jf=new Of({font:"bold 16px Helvetica",fill:Yf,stroke:$f,scale:.8}),Qf=new Tf({fill:Yf,image:Xf,text:Jf,stroke:Zf,zIndex:0}),tp=[Qf]),n.dataProjection=Mr("EPSG:4326"),n.aa=r.defaultStyle?r.defaultStyle:tp,n.sa=void 0===r.extractStyles||r.extractStyles,n.ua=void 0===r.writeStyles||r.writeStyles,n.fa={},n.ca=void 0===r.showPointNames||r.showPointNames,n.xo=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",n.ha=r.iconUrlFunction?r.iconUrlFunction:np,n.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],n}return Df(e,t),e.prototype.la=function(t,e){return oc([],rc(Uf,{Document:Wu(this.la,this),Folder:Wu(this.la,this),Placemark:Ku(this.va,this),Style:this.da.bind(this),StyleMap:this.pa.bind(this)}),t,e,this)||void 0},e.prototype.va=function(t,e){var n=oc({geometry:null},zf,t,e,this);if(n){var r=new nl,i=t.getAttribute("id");null!==i&&r.setId(i);var o=e[0],a=n.geometry;if(a&&cl(a,!1,o),r.setGeometry(a),delete n.geometry,this.sa){var s=function(t,e,n,r,i){return function(o,a){var s=i,l="",u=[];if(s){var c=o.getGeometry();if(c){var h=c.getType();s=h===tr.GEOMETRY_COLLECTION?(u=c.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===tr.POINT||e===tr.MULTI_POINT}))).length>0:h===tr.POINT||h===tr.MULTI_POINT}}s&&(l=o.get("name"),(s=s&&!!l)&&l.search(/&[^&]+;/)>-1&&(Ff||(Ff=document.createElement("textarea")),Ff.innerHTML=l,l=Ff.value));var f=n;if(t?f=t:e&&(f=ip(e,n,r)),s){var p=function(t,e){var n=[0,0],r="start",i=t.getImage();if(i){var o=i.getSize();if(o&&2==o.length){var a=i.getScaleArray(),s=i.getAnchor();n[0]=a[0]*(o[0]-s[0]),n[1]=a[1]*(o[1]/2-s[1]),r="left"}}var l=t.getText();return l?((l=l.clone()).setFont(l.getFont()||Jf.getFont()),l.setScale(l.getScale()||Jf.getScale()),l.setFill(l.getFill()||Jf.getFill()),l.setStroke(l.getStroke()||$f)):l=Jf.clone(),l.setText(e),l.setOffsetX(n[0]),l.setOffsetY(n[1]),l.setTextAlign(r),new Tf({image:i,text:l})}(f[0],l);return u.length>0?(p.setGeometry(new ju(u)),[p,new Tf({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null})].concat(f.slice(1))):p}return f}}(n.Style,n.styleUrl,this.aa,this.fa,this.ca);r.setStyle(s)}return delete n.Style,r.setProperties(n,!0),r}},e.prototype.da=function(t,e){var n=t.getAttribute("id");if(null!==n){var r=Lp.call(this,t,e);if(r){var i=void 0,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+n,o).href:"#"+n,this.fa[i]=r}}},e.prototype.pa=function(t,e){var n=t.getAttribute("id");if(null!==n){var r=hp.call(this,t,e);if(r){var i,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+n,o).href:"#"+n,this.fa[i]=r}}},e.prototype.readFeatureFromNode=function(t,e){return o(Uf,t.namespaceURI)&&this.va(t,[this.getReadOptions(t,e)])||null},e.prototype.readFeaturesFromNode=function(t,e){if(!o(Uf,t.namespaceURI))return[];var n,r=t.localName;if("Document"==r||"Folder"==r)return(n=this.la(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==r){var i=this.va(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==r){n=[];for(var a=t.firstElementChild;a;a=a.nextElementSibling){var s=this.readFeaturesFromNode(a,e);s&&l(n,s)}return n}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Hu(t);return this.readNameFromDocument(e)}return Vu(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var n=this.readNameFromNode(e);if(n)return n}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(o(Uf,e.namespaceURI)&&"name"==e.localName)return Mc(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var n=e.localName;if(o(Uf,e.namespaceURI)&&("Document"==n||"Folder"==n||"Placemark"==n||"kml"==n)){var r=this.readNameFromNode(e);if(r)return r}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var n=Hu(t);l(e,this.readNetworkLinksFromDocument(n))}else Vu(t)?l(e,this.readNetworkLinksFromDocument(t)):l(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&l(e,this.readNetworkLinksFromNode(n));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],n=t.firstElementChild;n;n=n.nextElementSibling)if(o(Uf,n.namespaceURI)&&"NetworkLink"==n.localName){var r=oc({},Vf,n,[]);e.push(r)}for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;!o(Uf,n.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||l(e,this.readNetworkLinksFromNode(n))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var n=Hu(t);l(e,this.readRegionFromDocument(n))}else Vu(t)?l(e,this.readRegionFromDocument(t)):l(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&l(e,this.readRegionFromNode(n));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],n=t.firstElementChild;n;n=n.nextElementSibling)if(o(Uf,n.namespaceURI)&&"Region"==n.localName){var r=oc({},Hf,n,[]);e.push(r)}for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;!o(Uf,n.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||l(e,this.readRegionFromNode(n))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var n=Uu(Uf[4],"kml"),r="http://www.w3.org/2000/xmlns/";n.setAttributeNS(r,"xmlns:gx",Gf[0]),n.setAttributeNS(r,"xmlns:xsi",Gu),n.setAttributeNS(Gu,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:n},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=Wf[n.namespaceURI],s=nc(o,a);return sc(i,Kf,ec,s,[e],a,this),n},e}(pc);function ip(t,e,n){return Array.isArray(t)?t:"string"==typeof t?ip(n[t],e,n):e}function op(t){var e=Bu(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){var r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function ap(t){var e=Bu(t,!1),n=[];e=e.replace(/\s*,\s*/g,",");for(var r,i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=i.exec(e);){var o=parseFloat(r[1]),a=parseFloat(r[2]),s=r[3]?parseFloat(r[3]):0;n.push(o,a,s),e=e.substr(r[0].length)}if(""===e)return n}function sp(t){var e=Bu(t,!1).trim(),n=t.baseURI;return n&&"about:blank"!=n||(n=window.location.href),n?new URL(e,n).href:e}function lp(t){var e=Bu(t,!1).trim().replace(/^(?!.*#)/,"#"),n=t.baseURI;return n&&"about:blank"!=n||(n=window.location.href),n?new URL(e,n).href:e}function up(t){return Sc(t)}var cp=rc(Uf,{Pair:function(t,e){var n=oc({},Dp,t,e,this);if(n){var r=n.key;if(r&&"normal"==r){var i=n.styleUrl;i&&(e[e.length-1]=i);var o=n.Style;o&&(e[e.length-1]=o)}}}});function hp(t,e){return oc(void 0,cp,t,e,this)}var fp=rc(Uf,{Icon:Zu((function(t,e){return oc({},xp,t,e)||null})),color:Zu(op),heading:Zu(Sc),hotSpot:Zu((function(t){var e,n=t.getAttribute("xunits"),r=t.getAttribute("yunits");return e="insetPixels"!==n?"insetPixels"!==r?Zh:Qh:"insetPixels"!==r?Jh:tf,{x:parseFloat(t.getAttribute("x")),xunits:Bf[n],y:parseFloat(t.getAttribute("y")),yunits:Bf[r],origin:e}})),scale:Zu(up)}),pp=rc(Uf,{color:Zu(op),scale:Zu(up)}),dp=rc(Uf,{color:Zu(op),width:Zu(Sc)}),gp=rc(Uf,{color:Zu(op),fill:Zu(bc),outline:Zu(bc)}),mp=rc(Uf,{coordinates:Yu(ap)});function vp(t,e){return oc(null,mp,t,e)}var yp=rc(Gf,{Track:Ku(wp)}),bp=rc(Uf,{when:function(t,e){var n=e[e.length-1].whens,r=Bu(t,!1),i=Date.parse(r);n.push(isNaN(i)?0:i)}},rc(Gf,{coord:function(t,e){var n=e[e.length-1].coordinates,r=Bu(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);n.push([o,a,s])}else n.push([])}}));function wp(t,e){var n=oc({coordinates:[],whens:[]},bp,t,e);if(n){for(var r=[],i=n.coordinates,o=n.whens,a=0,s=Math.min(i.length,o.length);a<s;++a)3==i[a].length&&r.push(i[a][0],i[a][1],i[a][2],o[a]);return new wl(r,Ho)}}var xp=rc(Uf,{href:Zu(sp)},rc(Gf,{x:Zu(Sc),y:Zu(Sc),w:Zu(Sc),h:Zu(Sc)})),Sp=rc(Uf,{coordinates:Yu(ap)});function _p(t,e){return oc(null,Sp,t,e)}var kp=rc(Uf,{extrude:Zu(bc),tessellate:Zu(bc),altitudeMode:Zu(Mc)});function Ep(t,e){var n=oc({},kp,t,e),r=_p(t,e);if(r){var i=new wl(r,Vo);return i.setProperties(n,!0),i}}function Mp(t,e){var n=oc({},kp,t,e),r=_p(t,e);if(r){var i=new Ja(r,Vo,[r.length]);return i.setProperties(n,!0),i}}var Tp=rc(Uf,{LineString:Ku(Ep),LinearRing:Ku(Mp),MultiGeometry:Ku(Op),Point:Ku(Pp),Polygon:Ku(Ip)});function Op(t,e){var n,r=oc([],Tp,t,e);if(!r)return null;if(0===r.length)return new ju(r);for(var i=!0,o=r[0].getType(),a=1,s=r.length;a<s;++a)if(r[a].getType()!=o){i=!1;break}if(i){var u=void 0,c=void 0;if(o==tr.POINT){var h=r[0];for(u=h.getLayout(),c=h.getFlatCoordinates(),a=1,s=r.length;a<s;++a)l(c,r[a].getFlatCoordinates());Rp(n=new kl(c,u),r)}else o==tr.LINE_STRING?Rp(n=new Sl(r),r):o==tr.POLYGON?Rp(n=new Tl(r),r):o==tr.GEOMETRY_COLLECTION?n=new ju(r):w(!1,37)}else n=new ju(r);return n}function Pp(t,e){var n=oc({},kp,t,e),r=_p(t,e);if(r){var i=new Ia(r,Vo);return i.setProperties(n,!0),i}}var Cp=rc(Uf,{innerBoundaryIs:function(t,e){var n=oc([],zp,t,e);if(n.length>0){var r=e[e.length-1];r.push.apply(r,n)}},outerBoundaryIs:function(t,e){var n=oc(void 0,Vp,t,e);n&&(e[e.length-1][0]=n)}});function Ip(t,e){var n=oc({},kp,t,e),r=oc([null],Cp,t,e);if(r&&r[0]){for(var i=r[0],o=[i.length],a=1,s=r.length;a<s;++a)l(i,r[a]),o.push(i.length);var u=new Ja(i,Vo,o);return u.setProperties(n,!0),u}}var Ap=rc(Uf,{IconStyle:function(t,e){var n=oc({},fp,t,e);if(n){var r,i,o,a,s=e[e.length-1],l="Icon"in n?n.Icon:{},u=!("Icon"in n)||Object.keys(l).length>0,c=l.href;c?r=c:u&&(r=jf);var h,f=Zh,p=n.hotSpot;p?(i=[p.x,p.y],o=p.xunits,a=p.yunits,f=p.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(i=If,o=Af,a=Lf):/arrow-reverse/.test(r)?(i=[54,42],o=Af,a=Lf):/paddle/.test(r)&&(i=[32,1],o=Af,a=Lf));var d,g=l.x,m=l.y;void 0!==g&&void 0!==m&&(h=[g,m]);var v,y=l.w,b=l.h;void 0!==y&&void 0!==b&&(d=[y,b]);var w=n.heading;void 0!==w&&(v=O(w));var x=n.scale,S=n.color;if(u){r==jf&&(d=Rf);var _=new df({anchor:i,anchorOrigin:f,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.xo,offset:h,offsetOrigin:Zh,rotation:v,scale:x,size:d,src:this.ha(r),color:S}),k=_.getScaleArray()[0],E=_.getSize();if(null===E){var M=_.getImageState();0!==M&&1!==M||(_.listenImageChange((function t(){var e=_.getImageState();if(0!==e&&1!==e){var n=_.getSize();if(n&&2==n.length){var r=ep(n);_.setScale(k*r)}_.unlistenImageChange(t)}})),0===M&&_.load())}else if(2==E.length){var T=ep(E);_.setScale(k*T)}s.imageStyle=_}else s.imageStyle=Nf}},LabelStyle:function(t,e){var n=oc({},pp,t,e);if(n){var r=e[e.length-1],i=new Of({fill:new Kh({color:"color"in n?n.color:Cf}),scale:n.scale});r.textStyle=i}},LineStyle:function(t,e){var n=oc({},dp,t,e);if(n){var r=e[e.length-1],i=new gf({color:"color"in n?n.color:Cf,width:"width"in n?n.width:1});r.strokeStyle=i}},PolyStyle:function(t,e){var n=oc({},gp,t,e);if(n){var r=e[e.length-1],i=new Kh({color:"color"in n?n.color:Cf});r.fillStyle=i;var o=n.fill;void 0!==o&&(r.fill=o);var a=n.outline;void 0!==a&&(r.outline=a)}}});function Lp(t,e){var n=oc({},Ap,t,e,this);if(!n)return null;var r,i="fillStyle"in n?n.fillStyle:Yf,o=n.fill;void 0===o||o||(i=null),"imageStyle"in n?n.imageStyle!=Nf&&(r=n.imageStyle):r=Xf;var a="textStyle"in n?n.textStyle:Jf,s="strokeStyle"in n?n.strokeStyle:Zf,l=n.outline;return void 0===l||l?[new Tf({fill:i,image:r,stroke:s,text:a,zIndex:void 0})]:[new Tf({geometry:function(t){var e=t.getGeometry(),n=e.getType();return n===tr.GEOMETRY_COLLECTION?new ju(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e!==tr.POLYGON&&e!==tr.MULTI_POLYGON}))):n!==tr.POLYGON&&n!==tr.MULTI_POLYGON?e:void 0},fill:i,image:r,stroke:s,text:a,zIndex:void 0}),new Tf({geometry:function(t){var e=t.getGeometry(),n=e.getType();return n===tr.GEOMETRY_COLLECTION?new ju(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===tr.POLYGON||e===tr.MULTI_POLYGON}))):n===tr.POLYGON||n===tr.MULTI_POLYGON?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function Rp(t,e){var n,r,i,o=e.length,a=new Array(e.length),s=new Array(e.length),l=new Array(e.length);n=!1,r=!1,i=!1;for(var u=0;u<o;++u){var c=e[u];a[u]=c.get("extrude"),s[u]=c.get("tessellate"),l[u]=c.get("altitudeMode"),n=n||void 0!==a[u],r=r||void 0!==s[u],i=i||l[u]}n&&t.set("extrude",a),r&&t.set("tessellate",s),i&&t.set("altitudeMode",l)}var jp=rc(Uf,{displayName:Zu(Mc),value:Zu(Mc)}),Np=rc(Uf,{Data:function(t,e){var n=t.getAttribute("name");ic(jp,t,e);var r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==n?r[n]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,e){ic(Gp,t,e)}});function $p(t,e){ic(Np,t,e)}function Fp(t,e){ic(Hf,t,e)}var Dp=rc(Uf,{Style:Zu(Lp),key:Zu(Mc),styleUrl:Zu(lp)}),Gp=rc(Uf,{SimpleData:function(t,e){var n=t.getAttribute("name");if(null!==n){var r=Mc(t);e[e.length-1][n]=r}}}),Up=rc(Uf,{altitudeMode:Zu(Mc),minAltitude:Zu(Sc),maxAltitude:Zu(Sc),north:Zu(Sc),south:Zu(Sc),east:Zu(Sc),west:Zu(Sc)}),Bp=rc(Uf,{minLodPixels:Zu(Sc),maxLodPixels:Zu(Sc),minFadeExtent:Zu(Sc),maxFadeExtent:Zu(Sc)}),zp=rc(Uf,{LinearRing:Ku(vp)}),Vp=rc(Uf,{LinearRing:Yu(vp)});function qp(t,e){for(var n=Et(e),r=[255*(4==n.length?n[3]:1),n[2],n[1],n[0]],i=0;i<4;++i){var o=Math.floor(r[i]).toString(16);r[i]=1==o.length?"0"+o:o}Ac(t,r.join(""))}var Hp=rc(Uf,{Data:Ju((function(t,e,n){t.setAttribute("name",e.name);var r={node:t},i=e.value;"object"==Pf(i)?(null!==i&&i.displayName&&sc(r,Hp,ec,[i.displayName],n,["displayName"]),null!==i&&i.value&&sc(r,Hp,ec,[i.value],n,["value"])):sc(r,Hp,ec,[i],n,["value"])})),value:Ju((function(t,e){Ac(t,e)})),displayName:Ju((function(t,e){Oc(t,e)}))}),Wp=rc(Uf,{Placemark:Ju(yd)}),Kp=function(t,e,n){return Uu(e[e.length-1].node.namespaceURI,"Placemark")},Yp=tc("Data"),Xp=rc(Uf,["href"],rc(Gf,["x","y","w","h"])),Zp=rc(Uf,{href:Ju(Ac)},rc(Gf,{x:Ju(Cc),y:Ju(Cc),w:Ju(Cc),h:Ju(Cc)})),Jp=function(t,e,n){return Uu(Gf[0],"gx:"+n)},Qp=rc(Uf,["scale","heading","Icon","color","hotSpot"]),td=rc(Uf,{Icon:Ju((function(t,e,n){var r={node:t},i=n[n.length-1].node,o=Xp[i.namespaceURI],a=nc(e,o);sc(r,Zp,ec,a,n,o),a=nc(e,o=Xp[Gf[0]]),sc(r,Zp,Jp,a,n,o)})),color:Ju(qp),heading:Ju(Cc),hotSpot:Ju((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:Ju(Od)}),ed=rc(Uf,["color","scale"]),nd=rc(Uf,{color:Ju(qp),scale:Ju(Od)}),rd=rc(Uf,["color","width"]),id=rc(Uf,{color:Ju(qp),width:Ju(Cc)}),od={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ad=function(t,e,n){if(t)return Uu(e[e.length-1].node.namespaceURI,od[t.getType()])},sd=tc("Point"),ld=tc("LineString"),ud=tc("LinearRing"),cd=tc("Polygon"),hd=rc(Uf,{LineString:Ju(xd),Point:Ju(xd),Polygon:Ju(Md),GeometryCollection:Ju(fd)});function fd(t,e,n){var r,i={node:t},o=e.getType(),a=[];o===tr.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach((function(t){var e=t.getType();e===tr.MULTI_POINT?a=a.concat(t.getPoints()):e===tr.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===tr.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===tr.POINT||e===tr.LINE_STRING||e===tr.POLYGON?a.push(t):w(!1,39)})),r=ad):o===tr.MULTI_POINT?(a=e.getPoints(),r=sd):o===tr.MULTI_LINE_STRING?(a=e.getLineStrings(),r=ld):o===tr.MULTI_POLYGON?(a=e.getPolygons(),r=cd):w(!1,39),sc(i,hd,r,a,n)}var pd=rc(Uf,{LinearRing:Ju(xd)});function dd(t,e,n){sc({node:t},pd,ud,[e],n)}var gd=rc(Uf,{ExtendedData:Ju((function(t,e,n){for(var r={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)sc(r,Hp,Yp,[{name:i[s],value:o[s]}],n)})),MultiGeometry:Ju(fd),LineString:Ju(xd),LinearRing:Ju(xd),Point:Ju(xd),Polygon:Ju(Md),Style:Ju((function(t,e,n){var r,i={node:t},o={};if(e.pointStyles.length){var a=e.pointStyles[0].getText();a&&(o.LabelStyle=a);var s=e.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(o.IconStyle=s)}(e.lineStyles.length&&(r=e.lineStyles[0].getStroke())&&(o.LineStyle=r),e.polyStyles.length)&&((r=e.polyStyles[0].getStroke())&&!o.LineStyle&&(o.LineStyle=r),o.PolyStyle=e.polyStyles[0]);var l=n[n.length-1].node,u=Pd[l.namespaceURI],c=nc(o,u);sc(i,Cd,ec,c,n,u)})),address:Ju(Ac),description:Ju(Ac),name:Ju(Ac),open:Ju(Tc),phoneNumber:Ju(Ac),styleUrl:Ju(Ac),visibility:Ju(Tc)}),md=rc(Uf,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),vd=tc("ExtendedData");function yd(t,e,n){var r={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter((function(t){return!o[t]})),s=e.getStyleFunction();if(s){var l=s(e,0);if(l){var u=Array.isArray(l)?l:[l],c=u;if(e.getGeometry()&&(c=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===tr.GEOMETRY_COLLECTION?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===tr.POINT||e===tr.MULTI_POINT})).length:r===tr.POINT||r===tr.MULTI_POINT}}))),this.ua){var h=u,f=u;e.getGeometry()&&(h=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===tr.GEOMETRY_COLLECTION?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===tr.LINE_STRING||e===tr.MULTI_LINE_STRING})).length:r===tr.LINE_STRING||r===tr.MULTI_LINE_STRING}})),f=u.filter((function(t){var n=t.getGeometryFunction()(e);if(n){var r=n.getType();return r===tr.GEOMETRY_COLLECTION?n.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===tr.POLYGON||e===tr.MULTI_POLYGON})).length:r===tr.POLYGON||r===tr.MULTI_POLYGON}}))),i.Style={pointStyles:c,lineStyles:h,polyStyles:f}}if(c.length&&void 0===i.name){var p=c[0].getText();p&&(i.name=p.getText())}}}var d=n[n.length-1].node,g=md[d.namespaceURI],m=nc(i,g);if(sc(r,gd,ec,m,n,g),a.length>0){var v=nc(i,a);sc(r,gd,vd,[{names:a,values:v}],n)}var y=n[0],b=e.getGeometry();b&&(b=cl(b,!0,y)),sc(r,gd,ad,[b],n)}var bd=rc(Uf,["extrude","tessellate","altitudeMode","coordinates"]),wd=rc(Uf,{extrude:Ju(Tc),tessellate:Ju(Tc),altitudeMode:Ju(Ac),coordinates:Ju((function(t,e,n){var r,i=n[n.length-1],o=i.layout,a=i.stride;o==zo||o==qo?r=2:o==Vo||o==Ho?r=3:w(!1,34);var s=e.length,l="";if(s>0){l+=e[0];for(var u=1;u<r;++u)l+=","+e[u];for(var c=a;c<s;c+=a)for(l+=" "+e[c],u=1;u<r;++u)l+=","+e[c+u]}Ac(t,l)}))});function xd(t,e,n){var r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=r;var a=n[n.length-1].node,s=bd[a.namespaceURI],l=nc(o,s);sc(i,wd,ec,l,n,s)}var Sd=rc(Uf,["color","fill","outline"]),_d=rc(Uf,{outerBoundaryIs:Ju(dd),innerBoundaryIs:Ju(dd)}),kd=tc("innerBoundaryIs"),Ed=tc("outerBoundaryIs");function Md(t,e,n){var r=e.getLinearRings(),i=r.shift(),o={node:t};sc(o,_d,kd,r,n),sc(o,_d,Ed,[i],n)}var Td=rc(Uf,{color:Ju(qp),fill:Ju(Tc),outline:Ju(Tc)});function Od(t,e){Cc(t,Math.round(1e6*e)/1e6)}var Pd=rc(Uf,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Cd=rc(Uf,{IconStyle:Ju((function(t,e,n){var r={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var u=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(l.x=c[0],l.y=s[1]-(c[1]+a[1])),u&&(u[0]!==a[0]/2||u[1]!==a[1]/2)){var h={x:u[0],xunits:Xh,y:a[1]-u[1],yunits:Xh};i.hotSpot=h}}i.Icon=l;var f=e.getScaleArray()[0],p=a;null===p&&(p=Rf),2==p.length&&(f/=ep(p)),1!==f&&(i.scale=f);var d=e.getRotation();0!==d&&(i.heading=d);var g=e.getColor();g&&(i.color=g);var m=n[n.length-1].node,v=Qp[m.namespaceURI],y=nc(i,v);sc(r,td,ec,y,n,v)})),LabelStyle:Ju((function(t,e,n){var r={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=n[n.length-1].node,l=ed[s.namespaceURI],u=nc(i,l);sc(r,nd,ec,u,n,l)})),LineStyle:Ju((function(t,e,n){var r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=n[n.length-1].node,a=rd[o.namespaceURI],s=nc(i,a);sc(r,id,ec,s,n,a)})),PolyStyle:Ju((function(t,e,n){var r={node:t},i=e.getFill(),o=e.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=n[n.length-1].node,l=Sd[s.namespaceURI],u=nc(a,l);sc(r,Td,ec,u,n,l)}))}),Id=rp,Ad=n(2098),Ld=[1,0,0,1,0,0],Rd=function(){function t(t,e,n,r,i){this.Rt,this.ui=i,this.ya=t,this.ma=e,this.gi=null,this.ba=null,this.Kn=n,this.wa=r}return t.prototype.get=function(t){return this.wa[t]},t.prototype.getExtent=function(){return this.Rt||(this.Rt=this.ya===tr.POINT?Mn(this.ma):Tn(this.ma,0,this.ma.length,2)),this.Rt},t.prototype.getFlatInteriorPoint=function(){if(!this.gi){var t=Gn(this.getExtent());this.gi=Na(this.ma,0,this.Kn,2,t,0)}return this.gi},t.prototype.getFlatInteriorPoints=function(){if(!this.gi){var t=El(this.ma,0,this.Kn,2);this.gi=$a(this.ma,0,this.Kn,2,t)}return this.gi},t.prototype.getFlatMidpoint=function(){return this.ba||(this.ba=gl(this.ma,0,this.ma.length,2,.5)),this.ba},t.prototype.getFlatMidpoints=function(){if(!this.ba){this.ba=[];for(var t=this.ma,e=0,n=this.Kn,r=0,i=n.length;r<i;++r){var o=n[r],a=gl(t,e,o,2,.5);l(this.ba,a),e=o}}return this.ba},t.prototype.getId=function(){return this.ui},t.prototype.getOrientedFlatCoordinates=function(){return this.ma},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.wa},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.ya},t.prototype.transform=function(t){var e=(t=Mr(t)).getExtent(),n=t.getWorldExtent();if(e&&n){var r=zn(n)/zn(e);ci(Ld,n[0],n[3],r,-r,0,0,0),Wo(this.ma,0,this.ma.length,2,Ld,this.ma)}},t.prototype.getEnds=function(){return this.Kn},t}();Rd.prototype.getEndss=Rd.prototype.getEnds,Rd.prototype.getFlatCoordinates=Rd.prototype.getOrientedFlatCoordinates;var jd=Rd,Nd=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function $d(t,e,n){if(3===t){var r={keys:[],values:[],features:[]},i=n.readVarint()+n.pos;n.readFields(Fd,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Fd(t,e,n){if(15===t)e.version=n.readVarint();else if(1===t)e.name=n.readString();else if(5===t)e.extent=n.readVarint();else if(2===t)e.features.push(n.pos);else if(3===t)e.keys.push(n.readString());else if(4===t){for(var r=null,i=n.readVarint()+n.pos;n.pos<i;)r=1==(t=n.readVarint()>>3)?n.readString():2===t?n.readFloat():3===t?n.readDouble():4===t?n.readVarint64():5===t?n.readVarint():6===t?n.readSVarint():7===t?n.readBoolean():null;e.values.push(r)}}function Dd(t,e,n){if(1==t)e.id=n.readVarint();else if(2==t)for(var r=n.readVarint()+n.pos;n.pos<r;){var i=e.layer.keys[n.readVarint()],o=e.layer.values[n.readVarint()];e.properties[i]=o}else 3==t?e.type=n.readVarint():4==t&&(e.geometry=n.pos)}function Gd(t,e,n){t.pos=e.features[n];var r=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(Dd,i,r),i}var Ud=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=new Be({code:"",units:Ue.TILE_PIXELS}),n.ga=r.featureClass?r.featureClass:jd,n.fi=r.geometryName,n.ka=r.layerName?r.layerName:"layer",n.xa=r.layers?r.layers:null,n.Sa=r.idProperty,n.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],n}return Nd(e,t),e.prototype._a=function(t,e,n,r){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,l=0,u=0,c=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),l+=t.readSVarint(),1===o&&u>c&&(r.push(u),c=u),n.push(s,l),u+=2):7===o?u>c&&(n.push(n[c],n[c+1]),u+=2):w(!1,59)}u>c&&(r.push(u),c=u)},e.prototype.Ma=function(t,e,n){var r,i=e.type;if(0===i)return null;var o,a=e.properties;this.Sa?(o=a[this.Sa],delete a[this.Sa]):o=e.id,a[this.ka]=e.layer.name;var s=[],l=[];this._a(t,e,s,l);var u=function(t,e){var n;return 1===t?n=1===e?tr.POINT:tr.MULTI_POINT:2===t?n=1===e?tr.LINE_STRING:tr.MULTI_LINE_STRING:3===t&&(n=tr.POLYGON),n}(i,l.length);if(this.ga===jd)(r=new this.ga(u,s,l,a,o)).transform(n.dataProjection);else{var c=void 0;if(u==tr.POLYGON){for(var h=[],f=0,p=0,d=0,g=l.length;d<g;++d){var m=l[d];if(qa(s,f,m,2)){if(0===h.length)continue;h[h.length-1].push(l[p])}else h.push(l.slice(p,d+1));p=d+1,f=m}c=h.length>1?new Tl(s,zo,h):new Ja(s,zo,l)}else c=u===tr.POINT?new Ia(s,zo):u===tr.LINE_STRING?new wl(s,zo):u===tr.POLYGON?new Ja(s,zo,l):u===tr.MULTI_POINT?new kl(s,zo):u===tr.MULTI_LINE_STRING?new Sl(s,zo,l):null;r=new(0,this.ga),this.fi&&r.setGeometryName(this.fi);var v=cl(c,!1,n);r.setGeometry(v),r.setId(o),r.setProperties(a,!0)}return r},e.prototype.getType=function(){return rl},e.prototype.readFeatures=function(t,e){var n=this.xa,r=this.adaptOptions(e),i=Mr(r.dataProjection);i.setWorldExtent(r.extent),r.dataProjection=i;var o=new Ad(t),a=o.readFields($d,{}),s=[];for(var l in a)if(!n||-1!=n.indexOf(l)){var u=a[l],c=u?[0,0,u.extent,u.extent]:null;i.setExtent(c);for(var h=0,f=u.length;h<f;++h){var p=Gd(o,u,h);s.push(this.Ma(o,p,r))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.xa=t},e}(ul),Bd=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zd=[null],Vd=rc(zd,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:Kd}),qd=rc(zd,{node:function(t,e){var n=e[0],r=e[e.length-1],i=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[i]=o;var a=oc({tags:{}},Wd,t,e);if(!V(a.tags)){var s=new Ia(o);cl(s,!1,n);var l=new nl(s);l.setId(i),l.setProperties(a.tags,!0),r.features.push(l)}},way:function(t,e){var n=oc({id:t.getAttribute("id"),ndrefs:[],tags:{}},Vd,t,e);e[e.length-1].ways.push(n)}}),Hd=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=Mr("EPSG:4326"),e}return Bd(e,t),e.prototype.readFeaturesFromNode=function(t,e){var n=this.getReadOptions(t,e);if("osm"==t.localName){for(var r=oc({nodes:{},ways:[],features:[]},qd,t,[n]),i=0;i<r.ways.length;i++){for(var o=r.ways[i],a=[],s=0,u=o.ndrefs.length;s<u;s++)l(a,r.nodes[o.ndrefs[s]]);var c;cl(c=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ja(a,zo,[a.length]):new wl(a,zo),!1,n);var h=new nl(c);h.setId(o.id),h.setProperties(o.tags,!0),r.features.push(h)}if(r.features)return r.features}return[]},e}(pc),Wd=rc(zd,{tag:Kd});function Kd(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var Yd=Hd,Xd=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=Hu(t);return this.readFromDocument(e)}return Vu(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},t.prototype.readFromNode=function(t){},t}();function Zd(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var Jd=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qd=[null,"http://www.opengis.net/ows/1.1"],tg=rc(Qd,{ServiceIdentification:Zu((function(t,e){return oc({},pg,t,e)})),ServiceProvider:Zu((function(t,e){return oc({},dg,t,e)})),OperationsMetadata:Zu((function(t,e){return oc({},ug,t,e)}))}),eg=function(t){function e(){return t.call(this)||this}return Jd(e,t),e.prototype.readFromNode=function(t){return oc({},tg,t,[])||null},e}(Xd),ng=rc(Qd,{DeliveryPoint:Zu(Mc),City:Zu(Mc),AdministrativeArea:Zu(Mc),PostalCode:Zu(Mc),Country:Zu(Mc),ElectronicMailAddress:Zu(Mc)}),rg=rc(Qd,{Value:Xu((function(t,e){return Mc(t)}))}),ig=rc(Qd,{AllowedValues:Zu((function(t,e){return oc({},rg,t,e)}))}),og=rc(Qd,{Phone:Zu((function(t,e){return oc({},cg,t,e)})),Address:Zu((function(t,e){return oc({},ng,t,e)}))}),ag=rc(Qd,{HTTP:Zu((function(t,e){return oc({},sg,t,e)}))}),sg=rc(Qd,{Get:Xu((function(t,e){var n=Zd(t);if(n)return oc({href:n},hg,t,e)})),Post:void 0}),lg=rc(Qd,{DCP:Zu((function(t,e){return oc({},ag,t,e)}))}),ug=rc(Qd,{Operation:function(t,e){var n=t.getAttribute("name"),r=oc({},lg,t,e);r&&(e[e.length-1][n]=r)}}),cg=rc(Qd,{Voice:Zu(Mc),Facsimile:Zu(Mc)}),hg=rc(Qd,{Constraint:Xu((function(t,e){var n=t.getAttribute("name");if(n)return oc({name:n},ig,t,e)}))}),fg=rc(Qd,{IndividualName:Zu(Mc),PositionName:Zu(Mc),ContactInfo:Zu((function(t,e){return oc({},og,t,e)}))}),pg=rc(Qd,{Abstract:Zu(Mc),AccessConstraints:Zu(Mc),Fees:Zu(Mc),Title:Zu(Mc),ServiceTypeVersion:Zu(Mc),ServiceType:Zu(Mc)}),dg=rc(Qd,{ProviderName:Zu(Mc),ProviderSite:Zu(Zd),ServiceContact:Zu((function(t,e){return oc({},fg,t,e)}))}),gg=eg;function mg(t,e,n,r,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);for(var l=e;l<n;){var u=t[l++];a[s++]=t[l++],a[s++]=u;for(var c=2;c<r;++c)a[s++]=t[l++]}return a.length=s,a}var vg=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function yg(t,e,n){var r,i=n||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var a=0,s=t.length;a<s;)for(r=0;r<e;++r,++a){var l=t[a],u=l-o[r];o[r]=l,t[a]=u}return wg(t,i)}function bg(t,e,n){var r,i=n||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var a=xg(t,i),s=0,l=a.length;s<l;)for(r=0;r<e;++r,++s)o[r]+=a[s],a[s]=o[r];return a}function wg(t,e){for(var n=e||1e5,r=0,i=t.length;r<i;++r)t[r]=Math.round(t[r]*n);return Sg(t)}function xg(t,e){for(var n=e||1e5,r=_g(t),i=0,o=r.length;i<o;++i)r[i]/=n;return r}function Sg(t){for(var e=0,n=t.length;e<n;++e){var r=t[e];t[e]=r<0?~(r<<1):r<<1}return kg(t)}function _g(t){for(var e=Eg(t),n=0,r=e.length;n<r;++n){var i=e[n];e[n]=1&i?~(i>>1):i>>1}return e}function kg(t){for(var e="",n=0,r=t.length;n<r;++n)e+=Mg(t[n]);return e}function Eg(t){for(var e=[],n=0,r=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;n|=(31&a)<<r,a<32?(e.push(n),n=0,r=0):r+=5}return e}function Mg(t){for(var e,n="";t>=32;)e=63+(32|31&t),n+=String.fromCharCode(e),t>>=5;return e=t+63,n+String.fromCharCode(e)}var Tg=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dataProjection=Mr("EPSG:4326"),n.ja=r.factor?r.factor:1e5,n.Oa=r.geometryLayout?r.geometryLayout:zo,n}return vg(e,t),e.prototype.readFeatureFromText=function(t,e){var n=this.readGeometryFromText(t,e);return new nl(n)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var n=ea(this.Oa),r=bg(t,n,this.ja);mg(r,0,r.length,n,r);var i=Sa(r,0,r.length,n);return cl(new wl(i,this.Oa),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var n=t.getGeometry();return n?this.writeGeometryText(n,e):(w(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var n=(t=cl(t,!0,this.adaptOptions(e))).getFlatCoordinates(),r=t.getStride();return mg(n,0,n.length,r,n),yg(n,r,this.ja)},e}(Ch),Og=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pg=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.ka=r.layerName,n.xa=r.layers?r.layers:null,n.dataProjection=Mr(r.dataProjection?r.dataProjection:"EPSG:4326"),n}return Og(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var n=t,r=void 0,i=null,o=null;n.transform&&(i=(r=n.transform).scale,o=r.translate);var a=n.arcs;r&&function(t,e,n){for(var r=0,i=t.length;r<i;++r)Rg(t[r],e,n)}(a,i,o);var s=[],l=n.objects,u=this.ka,c=void 0;for(var h in l)this.xa&&-1==this.xa.indexOf(h)||("GeometryCollection"===l[h].type?(c=l[h],s.push.apply(s,Ag(c,a,i,o,u,h,e))):(c=l[h],s.push(Lg(c,a,i,o,u,h,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(dl),Cg={Point:function(t,e,n){var r=t.coordinates;return e&&n&&jg(r,e,n),new Ia(r)},LineString:function(t,e){var n=Ig(t.arcs,e);return new wl(n)},Polygon:function(t,e){for(var n=[],r=0,i=t.arcs.length;r<i;++r)n[r]=Ig(t.arcs[r],e);return new Ja(n)},MultiPoint:function(t,e,n){var r=t.coordinates;if(e&&n)for(var i=0,o=r.length;i<o;++i)jg(r[i],e,n);return new kl(r)},MultiLineString:function(t,e){for(var n=[],r=0,i=t.arcs.length;r<i;++r)n[r]=Ig(t.arcs[r],e);return new Sl(n)},MultiPolygon:function(t,e){for(var n=[],r=0,i=t.arcs.length;r<i;++r){for(var o=t.arcs[r],a=[],s=0,l=o.length;s<l;++s)a[s]=Ig(o[s],e);n[r]=a}return new Tl(n)}};function Ig(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;++o)n=t[o],o>0&&i.pop(),r=n>=0?e[n]:e[~n].slice().reverse(),i.push.apply(i,r);for(var s=0,l=i.length;s<l;++s)i[s]=i[s].slice();return i}function Ag(t,e,n,r,i,o,a){for(var s=t.geometries,l=[],u=0,c=s.length;u<c;++u)l[u]=Lg(s[u],e,n,r,i,o,a);return l}function Lg(t,e,n,r,i,o,a){var s=null,l=t.type;if(l){var u=Cg[l];s=cl(s="Point"===l||"MultiPoint"===l?u(t,n,r):u(t,e),!1,a)}var c=new nl({geometry:s});void 0!==t.id&&c.setId(t.id);var h=t.properties;return i&&(h||(h={}),h[i]=o),h&&c.setProperties(h,!0),c}function Rg(t,e,n){for(var r=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];r+=s[0],i+=s[1],s[0]=r,s[1]=i,jg(s,e,n)}}function jg(t,e,n){t[0]=t[0]*e[0]+n[0],t[1]=t[1]*e[1]+n[1]}var Ng=Pg,$g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fg={"http://www.opengis.net/gml":{boundedBy:Zu(yc.prototype.readGeometryElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Ku(yc.prototype.readFeaturesInternal)}},Dg={"http://www.opengis.net/wfs":{totalInserted:Zu(kc),totalUpdated:Zu(kc),totalDeleted:Zu(kc)},"http://www.opengis.net/wfs/2.0":{totalInserted:Zu(kc),totalUpdated:Zu(kc),totalDeleted:Zu(kc)}},Gg={"http://www.opengis.net/wfs":{TransactionSummary:Zu(Jg,"transactionSummary"),InsertResults:Zu(nm,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Zu(Jg,"transactionSummary"),InsertResults:Zu(nm,"insertIds")}},Ug={"http://www.opengis.net/wfs":{PropertyName:Ju(Ac)},"http://www.opengis.net/wfs/2.0":{PropertyName:Ju(Ac)}},Bg={"http://www.opengis.net/wfs":{Insert:Ju(rm),Update:Ju(sm),Delete:Ju(am),Property:Ju(lm),Native:Ju(um)},"http://www.opengis.net/wfs/2.0":{Insert:Ju(rm),Update:Ju(sm),Delete:Ju(am),Property:Ju(lm),Native:Ju(um)}},zg="feature",Vg="http://www.w3.org/2000/xmlns/",qg={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},Hg={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Wg={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},Kg={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},Yg={"2.0.0":qc,"1.1.0":Gc,"1.0.0":Nc},Xg=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Aa=r.version?r.version:"1.1.0",n.Ta=r.featureType,n.Ea=r.featureNS,n.Ra=r.gmlFormat?r.gmlFormat:new Yg[n.Aa],n.Ca=r.schemaLocation?r.schemaLocation:Kg[n.Aa],n}return $g(e,t),e.prototype.getFeatureType=function(){return this.Ta},e.prototype.setFeatureType=function(t){this.Ta=t},e.prototype.readFeaturesFromNode=function(t,e){var n={node:t};U(n,{featureType:this.Ta,featureNS:this.Ea}),U(n,this.getReadOptions(t,e||{}));var r=[n],i=oc([],"2.0.0"===this.Aa?Fg:this.Ra.FEATURE_COLLECTION_PARSERS,t,r,this.Ra);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Hu(t);return this.readTransactionResponseFromDocument(e)}return Vu(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Hu(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Vu(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},n=Ec(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=n,oc(e,Fg,t,[],this.Ra)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return oc({},Gg,t,[])},e.prototype.writeGetFeature=function(t){var e=this,n=Uu(Hg[this.Aa],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.Aa),t.handle&&n.setAttribute("handle",t.handle),t.outputFormat&&n.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&n.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&n.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&n.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&n.setAttribute("count",String(t.count)),void 0!==t.viewParams&&n.setAttribute("viewParams",t.viewParams),n.setAttributeNS(Gu,"xsi:schemaLocation",this.Ca);var r={node:n};if(U(r,{version:this.Aa,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.Ea,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),w(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var i=t.filter;t.bbox&&(w(t.geometryName,12),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),U(r,{geometryName:t.geometryName,filter:i}),Tm(n,t.featureTypes,[r])}else t.featureTypes.forEach((function(i){var o=e.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);U(r,{geometryName:i.geometryName,filter:o}),Tm(n,[i.name],[r])}));return n},e.prototype.combineBboxAndFilter=function(t,e,n,r){var i=Au(t,e,n);return r?Iu(r,i):i},e.prototype.writeTransaction=function(t,e,n,r){var i,o=[],a=r.version?r.version:this.Aa,s=Uu(Hg[a],"Transaction");s.setAttribute("service","WFS"),s.setAttribute("version",a),r&&(i=r.gmlOptions?r.gmlOptions:{},r.handle&&s.setAttribute("handle",r.handle)),s.setAttributeNS(Gu,"xsi:schemaLocation",Kg[a]);var l=function(t,e,n,r){var i,o=r.featurePrefix?r.featurePrefix:zg;return"1.0.0"===n?i=2:"1.1.0"===n?i=3:"2.0.0"===n&&(i=3.2),U({node:t},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:i,hasZ:r.hasZ,srsName:r.srsName},e)}(s,i,a,r);return t&&Zg("Insert",t,o,l),e&&Zg("Update",e,o,l),n&&Zg("Delete",n,o,l),r.nativeElements&&Zg("Native",r.nativeElements,o,l),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var n=[{}];return this.Ra.readGeometryElement(e,n),Mr(n.pop().srsName)}return null},e}(pc);function Zg(t,e,n,r){sc(r,Bg,tc(t),e,n)}function Jg(t,e){return oc({},Dg,t,e)}var Qg={"http://www.opengis.net/ogc":{FeatureId:Ku((function(t,e){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:Ku((function(t,e){return t.getAttribute("fid")}))}};function tm(t,e){ic(Qg,t,e)}var em={"http://www.opengis.net/wfs":{Feature:tm},"http://www.opengis.net/wfs/2.0":{Feature:tm}};function nm(t,e){return oc([],em,t,e)}function rm(t,e,n){var r=n[n.length-1],i=r.featureType,o=r.featureNS,a=r.gmlVersion,s=Uu(o,i);t.appendChild(s),2===a?Nc.prototype.writeFeatureElement(s,e,n):3===a?Gc.prototype.writeFeatureElement(s,e,n):qc.prototype.writeFeatureElement(s,e,n)}function im(t,e,n){var r=n[n.length-1].version,i=qg[r],o=Uu(i,"Filter"),a=Uu(i,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),t.appendChild(o)}function om(t,e){var n=(t=t||zg)+":";return 0===e.indexOf(n)?e:n+e}function am(t,e,n){var r=n[n.length-1];w(void 0!==e.getId(),26);var i=r.featureType,o=r.featurePrefix,a=r.featureNS,s=om(o,i);t.setAttribute("typeName",s),t.setAttributeNS(Vg,"xmlns:"+o,a);var l=e.getId();void 0!==l&&im(t,l,n)}function sm(t,e,n){var r=n[n.length-1];w(void 0!==e.getId(),27);var i=r.version,o=r.featureType,a=r.featurePrefix,s=r.featureNS,l=om(a,o),u=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(Vg,"xmlns:"+a,s);var c=e.getId();if(void 0!==c){for(var h=e.getKeys(),f=[],p=0,d=h.length;p<d;p++){var g=e.get(h[p]);if(void 0!==g){var m=h[p];g&&"function"==typeof g.getSimplifiedGeometry&&(m=u),f.push({name:m,value:g})}}sc({version:i,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},Bg,tc("Property"),f,n),im(t,c,n)}}function lm(t,e,n){var r=n[n.length-1],i=r.version,o=Hg[i],a=Uu(o,"Name"),s=r.gmlVersion;if(t.appendChild(a),Ac(a,e.name),void 0!==e.value&&null!==e.value){var l=Uu(o,"Value");t.appendChild(l),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===s?Nc.prototype.writeGeometryElement(l,e.value,n):3===s?Gc.prototype.writeGeometryElement(l,e.value,n):qc.prototype.writeGeometryElement(l,e.value,n):Ac(l,e.value)}}function um(t,e,n){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&Ac(t,e.value)}var cm={"http://www.opengis.net/wfs":{Query:Ju(hm)},"http://www.opengis.net/wfs/2.0":{Query:Ju(hm)},"http://www.opengis.net/ogc":{During:Ju(mm),And:Ju(vm),Or:Ju(vm),Not:Ju(ym),BBOX:Ju(pm),Contains:Ju(dm),Intersects:Ju(dm),Within:Ju(dm),DWithin:Ju(gm),PropertyIsEqualTo:Ju(bm),PropertyIsNotEqualTo:Ju(bm),PropertyIsLessThan:Ju(bm),PropertyIsLessThanOrEqualTo:Ju(bm),PropertyIsGreaterThan:Ju(bm),PropertyIsGreaterThanOrEqualTo:Ju(bm),PropertyIsNull:Ju(wm),PropertyIsBetween:Ju(xm),PropertyIsLike:Ju(Sm)},"http://www.opengis.net/fes/2.0":{During:Ju(mm),And:Ju(vm),Or:Ju(vm),Not:Ju(ym),BBOX:Ju(pm),Contains:Ju(dm),Disjoint:Ju(dm),Intersects:Ju(dm),ResourceId:Ju((function(t,e,n){t.setAttribute("rid",e.rid)})),Within:Ju(dm),DWithin:Ju(gm),PropertyIsEqualTo:Ju(bm),PropertyIsNotEqualTo:Ju(bm),PropertyIsLessThan:Ju(bm),PropertyIsLessThanOrEqualTo:Ju(bm),PropertyIsGreaterThan:Ju(bm),PropertyIsGreaterThanOrEqualTo:Ju(bm),PropertyIsNull:Ju(wm),PropertyIsBetween:Ju(xm),PropertyIsLike:Ju(Sm)}};function hm(t,e,n){var r,i,o=n[n.length-1],a=o.version,s=o.featurePrefix,l=o.featureNS,u=o.propertyNames,c=o.srsName;r=s?om(s,e):e,i="2.0.0"===a?"typeNames":"typeName",t.setAttribute(i,r),c&&t.setAttribute("srsName",c),l&&t.setAttributeNS(Vg,"xmlns:"+s,l);var h=U({},o);h.node=t,sc(h,Ug,tc("PropertyName"),u,n);var f=o.filter;if(f){var p=Uu(Om(a),"Filter");t.appendChild(p),fm(p,f,n)}}function fm(t,e,n){var r=n[n.length-1],i={node:t};U(i,{context:r}),sc(i,cm,tc(e.getTagName()),[e],n)}function pm(t,e,n){var r=n[n.length-1],i=r.context.version;r.srsName=e.srsName;var o=Yg[i];Em(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.extent,n)}function dm(t,e,n){var r=n[n.length-1],i=r.context.version;r.srsName=e.srsName;var o=Yg[i];Em(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.geometry,n)}function gm(t,e,n){var r=n[n.length-1].context.version;dm(t,e,n);var i=Uu(Om(r),"Distance");Ac(i,e.distance.toString()),"2.0.0"===r?i.setAttribute("uom",e.unit):i.setAttribute("units",e.unit),t.appendChild(i)}function mm(t,e,n){var r=n[n.length-1].context.version;_m(Wg[r],"ValueReference",t,e.propertyName);var i=Uu(gc,"TimePeriod");t.appendChild(i);var o=Uu(gc,"begin");i.appendChild(o),Mm(o,e.begin);var a=Uu(gc,"end");i.appendChild(a),Mm(a,e.end)}function vm(t,e,n){var r=n[n.length-1].context,i={node:t};U(i,{context:r});for(var o=e.conditions,a=0,s=o.length;a<s;++a){var l=o[a];sc(i,cm,tc(l.getTagName()),[l],n)}}function ym(t,e,n){var r=n[n.length-1].context,i={node:t};U(i,{context:r});var o=e.condition;sc(i,cm,tc(o.getTagName()),[o],n)}function bm(t,e,n){var r=n[n.length-1].context.version;void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Em(r,t,e.propertyName),km(r,t,""+e.expression)}function wm(t,e,n){Em(n[n.length-1].context.version,t,e.propertyName)}function xm(t,e,n){var r=n[n.length-1].context.version,i=Om(r);Em(r,t,e.propertyName);var o=Uu(i,"LowerBoundary");t.appendChild(o),km(r,o,""+e.lowerBoundary);var a=Uu(i,"UpperBoundary");t.appendChild(a),km(r,a,""+e.upperBoundary)}function Sm(t,e,n){var r=n[n.length-1].context.version;t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Em(r,t,e.propertyName),km(r,t,""+e.pattern)}function _m(t,e,n,r){var i=Uu(t,e);Ac(i,r),n.appendChild(i)}function km(t,e,n){_m(Om(t),"Literal",e,n)}function Em(t,e,n){"2.0.0"===t?_m(Wg[t],"ValueReference",e,n):_m(qg[t],"PropertyName",e,n)}function Mm(t,e){var n=Uu(gc,"TimeInstant");t.appendChild(n);var r=Uu(gc,"timePosition");n.appendChild(r),Ac(r,e)}function Tm(t,e,n){var r=n[n.length-1],i=U({},r);i.node=t,sc(i,cm,tc("Query"),e,n)}function Om(t){return"2.0.0"===t?Wg[t]:qg[t]}var Pm=Xg,Cm=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Im=function(){function t(t){this.hr=t,this.Ia=0,this.Pa=!1,this.Da=!1,this.Na=!1,this.La=!1,this.za=null,this.Fa=zo}return t.prototype.readUint8=function(){return this.hr.getUint8(this.Ia++)},t.prototype.readUint32=function(t){return this.hr.getUint32((this.Ia+=4)-4,void 0!==t?t:this.Da)},t.prototype.readDouble=function(t){return this.hr.getFloat64((this.Ia+=8)-8,void 0!==t?t:this.Da)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.Na&&t.push(this.readDouble()),this.La&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),e=[],n=0;n<t;n++)e.push(this.readPoint());return e},t.prototype.readPolygon=function(){for(var t=this.readUint32(),e=[],n=0;n<t;n++)e.push(this.readLineString());return e},t.prototype.readWkbHeader=function(t){var e=this.readUint8()>0,n=this.readUint32(e),r=Math.floor((268435455&n)/1e3),i=Boolean(2147483648&n)||1===r||3===r,o=Boolean(1073741824&n)||2===r||3===r,a=Boolean(536870912&n),s=(268435455&n)%1e3,l=["XY",i?"Z":"",o?"M":""].join(""),u=a?this.readUint32(e):null;if(void 0!==t&&t!==s)throw new Error("Unexpected WKB geometry type "+s);if(this.Pa){if(this.Da!==e)throw new Error("Inconsistent endian");if(this.Fa!==l)throw new Error("Inconsistent geometry layout");if(u&&this.za!==u)throw new Error("Inconsistent coordinate system (SRID)")}else this.Da=e,this.Na=i,this.La=o,this.Fa=l,this.za=u,this.Pa=!0;return s},t.prototype.readWkbPayload=function(t){switch(t){case 1:return this.readPoint();case 2:return this.readLineString();case 3:case 17:return this.readPolygon();case 4:return this.readMultiPoint();case 5:return this.readMultiLineString();case 6:case 15:case 16:return this.readMultiPolygon();case 7:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,e){for(var n=this.readUint32(),r=[],i=0;i<n;i++){var o=t.call(this,e);o&&r.push(o)}return r},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,1)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,2)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,3)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),e=this.readWkbPayload(t);switch(t){case 1:return new Ia(e,this.Fa);case 2:return new wl(e,this.Fa);case 3:case 17:return new Ja(e,this.Fa);case 4:return new kl(e,this.Fa);case 5:return new Sl(e,this.Fa);case 6:case 15:case 16:return new Tl(e,this.Fa);case 7:return new ju(e);default:return null}},t.prototype.getSrid=function(){return this.za},t}(),Am=function(){function t(t){t=t||{},this.Fa=t.layout,this.Da=!1!==t.littleEndian,this.Ua=!1!==t.ewkb,this.Ba=[],this.Ga=U({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.Ba.push([1,t])},t.prototype.writeUint32=function(t){this.Ba.push([4,t])},t.prototype.writeDouble=function(t){this.Ba.push([8,t])},t.prototype.writePoint=function(t,e){for(var n=U.apply(null,e.split("").map((function(e,n){var r;return(r={})[e]=t[n],r}))),r=0,i=this.Fa;r<i.length;r++){var o=i[r];this.writeDouble(o in n?n[o]:this.Ga[o])}},t.prototype.writeLineString=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writePoint(t[n],e)},t.prototype.writePolygon=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeLineString(t[n],e)},t.prototype.writeWkbHeader=function(t,e){t%=1e3,this.Fa.indexOf("Z")>=0&&(t+=this.Ua?2147483648:1e3),this.Fa.indexOf("M")>=0&&(t+=this.Ua?1073741824:2e3),this.Ua&&Number.isInteger(e)&&(t|=536870912),this.writeUint8(this.Da?1:0),this.writeUint32(t),this.Ua&&Number.isInteger(e)&&this.writeUint32(e)},t.prototype.writeMultiPoint=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeWkbHeader(1),this.writePoint(t[n],e)},t.prototype.writeMultiLineString=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeWkbHeader(2),this.writeLineString(t[n],e)},t.prototype.writeMultiPolygon=function(t,e){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeWkbHeader(3),this.writePolygon(t[n],e)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var e=0;e<t.length;e++)this.writeGeometry(t[e])},t.prototype.findMinimumLayout=function(t,e){var n,r;if(void 0===e&&(e=Ho),t instanceof ra)return(n=t.getLayout())===(r=e)?n:n===Ho?r:r===Ho?n:zo;if(t instanceof ju)for(var i=t.getGeometriesArray(),o=0;o<i.length&&e!==zo;o++)e=this.findMinimumLayout(i[o],e);return e},t.prototype.writeGeometry=function(t,e){var n,r,i=((n={})[tr.POINT]=1,n[tr.LINE_STRING]=2,n[tr.POLYGON]=3,n[tr.MULTI_POINT]=4,n[tr.MULTI_LINE_STRING]=5,n[tr.MULTI_POLYGON]=6,n[tr.GEOMETRY_COLLECTION]=7,n),o=t.getType(),a=i[o];if(!a)throw new Error("GeometryType "+o+" is not supported");this.Fa||(this.Fa=this.findMinimumLayout(t)),this.writeWkbHeader(a,e),t instanceof ra?((r={})[tr.POINT]=this.writePoint,r[tr.LINE_STRING]=this.writeLineString,r[tr.POLYGON]=this.writePolygon,r[tr.MULTI_POINT]=this.writeMultiPoint,r[tr.MULTI_LINE_STRING]=this.writeMultiLineString,r[tr.MULTI_POLYGON]=this.writeMultiPolygon,r)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof ju&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,e=this.Ba.reduce((function(t,e){return t+e[0]}),0),n=new ArrayBuffer(e),r=new DataView(n),i=0;return this.Ba.forEach((function(e){switch(e[0]){case 1:r.setUint8(i,e[1]);break;case 4:r.setUint32(i,e[1],t.Da);break;case 8:r.setFloat64(i,e[1],t.Da)}i+=e[0]})),n},t}();function Lm(t){return"string"==typeof t?function(t){for(var e=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)e[n]=parseInt(t.substr(2*n,2),16);return new DataView(e.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var Rm=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.splitCollection=Boolean(r.splitCollection),n.qa=null,n.Va=!1!==r.hex,n.Za=!1!==r.littleEndian,n.Wa=!1!==r.ewkb,n.Fa=r.geometryLayout,n.$a=r.nodataZ||0,n.Ha=r.nodataM||0,n.za=r.srid,n}return Cm(e,t),e.prototype.getType=function(){return this.Va?ol:rl},e.prototype.readFeature=function(t,e){return new nl({geometry:this.readGeometry(t,e)})},e.prototype.readFeatures=function(t,e){var n=this.readGeometry(t,e);return(this.splitCollection&&n instanceof ju?n.getGeometriesArray():[n]).map((function(t){return new nl({geometry:t})}))},e.prototype.readGeometry=function(t,e){var n=Lm(t);if(!n)return null;var r=new Im(n).readGeometry();this.qa=n;var i=this.getReadOptions(t,e);return this.qa=null,cl(r,!1,i)},e.prototype.readProjection=function(t){var e=this.qa||Lm(t);if(e){var n=new Im(e);return n.readWkbHeader(),n.getSrid()&&Mr("EPSG:"+n.getSrid())||void 0}},e.prototype.writeFeature=function(t,e){return this.writeGeometry(t.getGeometry(),e)},e.prototype.writeFeatures=function(t,e){return this.writeGeometry(new ju(t.map((function(t){return t.getGeometry()}))),e)},e.prototype.writeGeometry=function(t,e){var n=this.adaptOptions(e),r=new Am({layout:this.Fa,littleEndian:this.Za,ewkb:this.Wa,nodata:{Z:this.$a,M:this.Ha}}),i=Number.isInteger(this.za)?Number(this.za):null;if(!1!==this.za&&!Number.isInteger(this.za)){var o=n.dataProjection&&Mr(n.dataProjection);if(o){var a=o.getCode();0===a.indexOf("EPSG:")&&(i=Number(a.substring(5)))}}r.writeGeometry(cl(t,!0,n),i);var s=r.getBuffer();return this.Va?function(t){var e=new Uint8Array(t);return Array.from(e.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(s):s},e}(ul),jm=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nm={POINT:Ia,LINESTRING:wl,POLYGON:Ja,MULTIPOINT:kl,MULTILINESTRING:Sl,MULTIPOLYGON:Tl},$m="EMPTY",Fm={};for(var Dm in tr)Fm[Dm]=tr[Dm].toUpperCase();var Gm=function(){function t(t){this.wkt=t,this.Ka=-1}return t.prototype.Xa=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.Ya=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.Ja=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.Qa=function(){return this.wkt.charAt(++this.Ka)},t.prototype.nextToken=function(){var t,e=this.Qa(),n=this.Ka,r=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.Ya(e)||"-"==e)t=4,r=this.ts();else if(this.Xa(e))t=1,r=this.ns();else{if(this.Ja(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:n,value:r,type:t}},t.prototype.ts=function(){var t,e=this.Ka,n=!1,r=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(r=!0),t=this.Qa()}while(this.Ya(t,n)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.Ka--))},t.prototype.ns=function(){var t,e=this.Ka;do{t=this.Qa()}while(this.Xa(t));return this.wkt.substring(e,this.Ka--).toUpperCase()},t}(),Um=function(){function t(t){this.es=t,this.rs={position:0,type:0},this.Fa=zo}return t.prototype.ss=function(){this.rs=this.es.nextToken()},t.prototype.isTokenType=function(t){return this.rs.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.ss(),e},t.prototype.parse=function(){return this.ss(),this.us()},t.prototype.fs=function(){var t=zo,e=this.rs;if(this.isTokenType(1)){var n=e.value;"Z"===n?t=Vo:"M"===n?t=qo:"ZM"===n&&(t=Ho),t!==zo&&this.ss()}return t},t.prototype.cs=function(){if(this.match(2)){var t=[];do{t.push(this.us())}while(this.match(5));if(this.match(3))return t}throw new Error(this.hs())},t.prototype.ls=function(){if(this.match(2)){var t=this.vs();if(this.match(3))return t}throw new Error(this.hs())},t.prototype.ds=function(){if(this.match(2)){var t=this.ps();if(this.match(3))return t}throw new Error(this.hs())},t.prototype.ys=function(){if(this.match(2)){var t=this.bs();if(this.match(3))return t}throw new Error(this.hs())},t.prototype.ws=function(){if(this.match(2)){var t;if(t=2==this.rs.type?this.gs():this.ps(),this.match(3))return t}throw new Error(this.hs())},t.prototype.ks=function(){if(this.match(2)){var t=this.bs();if(this.match(3))return t}throw new Error(this.hs())},t.prototype.xs=function(){if(this.match(2)){var t=this.Ss();if(this.match(3))return t}throw new Error(this.hs())},t.prototype.vs=function(){for(var t=[],e=this.Fa.length,n=0;n<e;++n){var r=this.rs;if(!this.match(4))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.hs())},t.prototype.ps=function(){for(var t=[this.vs()];this.match(5);)t.push(this.vs());return t},t.prototype.gs=function(){for(var t=[this.ls()];this.match(5);)t.push(this.ls());return t},t.prototype.bs=function(){for(var t=[this.ds()];this.match(5);)t.push(this.ds());return t},t.prototype.Ss=function(){for(var t=[this.ys()];this.match(5);)t.push(this.ys());return t},t.prototype._s=function(){var t=this.isTokenType(1)&&this.rs.value==$m;return t&&this.ss(),t},t.prototype.hs=function(){return"Unexpected `"+this.rs.value+"` at position "+this.rs.position+" in `"+this.es.wkt+"`"},t.prototype.us=function(){var t=this.rs;if(this.match(1)){var e=t.value;this.Fa=this.fs();var n=this._s();if("GEOMETRYCOLLECTION"==e){if(n)return new ju([]);var r=this.cs();return new ju(r)}var i=Nm[e];if(!i)throw new Error("Invalid geometry type: "+e);var o=void 0;if(n)o="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":o=this.ls();break;case"LINESTRING":o=this.ds();break;case"POLYGON":o=this.ys();break;case"MULTIPOINT":o=this.ws();break;case"MULTILINESTRING":o=this.ks();break;case"MULTIPOLYGON":o=this.xs()}return new i(o,this.Fa)}throw new Error(this.hs())},t}(),Bm=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Ms=void 0!==r.splitCollection&&r.splitCollection,n}return jm(e,t),e.prototype.Os=function(t){var e=new Gm(t);return new Um(e).parse()},e.prototype.readFeatureFromText=function(t,e){var n=this.readGeometryFromText(t,e),r=new nl;return r.setGeometry(n),r},e.prototype.readFeaturesFromText=function(t,e){for(var n,r=this.readGeometryFromText(t,e),i=[],o=0,a=(n=this.Ms&&r.getType()==tr.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<a;++o){var s=new nl;s.setGeometry(n[o]),i.push(s)}return i},e.prototype.readGeometryFromText=function(t,e){return cl(this.Os(t),!1,e)},e.prototype.writeFeatureText=function(t,e){var n=t.getGeometry();return n?this.writeGeometryText(n,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var n=[],r=0,i=t.length;r<i;++r)n.push(t[r].getGeometry());var o=new ju(n);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return Wm(cl(t,!0,e))},e}(Ch);function zm(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function Vm(t){for(var e=t.getCoordinates(),n=[],r=0,i=e.length;r<i;++r)n.push(e[r].join(" "));return n.join(",")}function qm(t){for(var e=[],n=t.getLinearRings(),r=0,i=n.length;r<i;++r)e.push("("+Vm(n[r])+")");return e.join(",")}var Hm={Point:zm,LineString:Vm,Polygon:qm,MultiPoint:function(t){for(var e=[],n=t.getPoints(),r=0,i=n.length;r<i;++r)e.push("("+zm(n[r])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],n=t.getLineStrings(),r=0,i=n.length;r<i;++r)e.push("("+Vm(n[r])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],n=t.getPolygons(),r=0,i=n.length;r<i;++r)e.push("("+qm(n[r])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],n=t.getGeometries(),r=0,i=n.length;r<i;++r)e.push(Wm(n[r]));return e.join(",")}};function Wm(t){var e=t.getType(),n=(0,Hm[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var e=t.getLayout(),n="";return e!==Vo&&e!==Ho||(n+="Z"),e!==qo&&e!==Ho||(n+="M"),n}(t);r.length>0&&(e+=" "+r)}return 0===n.length?e+" "+$m:e+"("+n+")"}var Km=Bm,Ym=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xm=[null,"http://www.opengis.net/wms"],Zm=rc(Xm,{Service:Zu((function(t,e){return oc({},tv,t,e)})),Capability:Zu((function(t,e){return oc({},Jm,t,e)}))}),Jm=rc(Xm,{Request:Zu((function(t,e){return oc({},lv,t,e)})),Exception:Zu((function(t,e){return oc([],iv,t,e)})),Layer:Zu((function(t,e){var n=oc({},ov,t,e);return void 0===n.Layer?Object.assign(n,gv(t,e)):n}))}),Qm=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return Ym(e,t),e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),oc({version:this.version},Zm,t,[])||null},e}(Xd),tv=rc(Xm,{Name:Zu(Mc),Title:Zu(Mc),Abstract:Zu(Mc),KeywordList:Zu(bv),OnlineResource:Zu(Zd),ContactInformation:Zu((function(t,e){return oc({},ev,t,e)})),Fees:Zu(Mc),AccessConstraints:Zu(Mc),LayerLimit:Zu(kc),MaxWidth:Zu(kc),MaxHeight:Zu(kc)}),ev=rc(Xm,{ContactPersonPrimary:Zu((function(t,e){return oc({},nv,t,e)})),ContactPosition:Zu(Mc),ContactAddress:Zu((function(t,e){return oc({},rv,t,e)})),ContactVoiceTelephone:Zu(Mc),ContactFacsimileTelephone:Zu(Mc),ContactElectronicMailAddress:Zu(Mc)}),nv=rc(Xm,{ContactPerson:Zu(Mc),ContactOrganization:Zu(Mc)}),rv=rc(Xm,{AddressType:Zu(Mc),Address:Zu(Mc),City:Zu(Mc),StateOrProvince:Zu(Mc),PostCode:Zu(Mc),Country:Zu(Mc)}),iv=rc(Xm,{Format:Ku(Mc)}),ov=rc(Xm,{Name:Zu(Mc),Title:Zu(Mc),Abstract:Zu(Mc),KeywordList:Zu(bv),CRS:Xu(Mc),EX_GeographicBoundingBox:Zu((function(t,e){var n=oc({},sv,t,e);if(n){var r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,a=n.northBoundLatitude;if(void 0!==r&&void 0!==i&&void 0!==o&&void 0!==a)return[r,i,o,a]}})),BoundingBox:Xu((function(t,e){var n=[_c(t.getAttribute("minx")),_c(t.getAttribute("miny")),_c(t.getAttribute("maxx")),_c(t.getAttribute("maxy"))],r=[_c(t.getAttribute("resx")),_c(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:r}})),Dimension:Xu((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:wc(t.getAttribute("multipleValues")),nearestValue:wc(t.getAttribute("nearestValue")),current:wc(t.getAttribute("current")),values:Mc(t)}})),Attribution:Zu((function(t,e){return oc({},av,t,e)})),AuthorityURL:Xu((function(t,e){var n=mv(t,e);if(n)return n.name=t.getAttribute("name"),n})),Identifier:Xu(Mc),MetadataURL:Xu((function(t,e){var n=mv(t,e);if(n)return n.type=t.getAttribute("type"),n})),DataURL:Xu(mv),FeatureListURL:Xu(mv),Style:Xu((function(t,e){return oc({},fv,t,e)})),MinScaleDenominator:Zu(Sc),MaxScaleDenominator:Zu(Sc),Layer:Xu(gv)}),av=rc(Xm,{Title:Zu(Mc),OnlineResource:Zu(Zd),LogoURL:Zu(yv)}),sv=rc(Xm,{westBoundLongitude:Zu(Sc),eastBoundLongitude:Zu(Sc),southBoundLatitude:Zu(Sc),northBoundLatitude:Zu(Sc)}),lv=rc(Xm,{GetCapabilities:Zu(vv),GetMap:Zu(vv),GetFeatureInfo:Zu(vv)}),uv=rc(Xm,{Format:Xu(Mc),DCPType:Xu((function(t,e){return oc({},cv,t,e)}))}),cv=rc(Xm,{HTTP:Zu((function(t,e){return oc({},hv,t,e)}))}),hv=rc(Xm,{Get:Zu(mv),Post:Zu(mv)}),fv=rc(Xm,{Name:Zu(Mc),Title:Zu(Mc),Abstract:Zu(Mc),LegendURL:Xu(yv),StyleSheetURL:Zu(mv),StyleURL:Zu(mv)}),pv=rc(Xm,{Format:Zu(Mc),OnlineResource:Zu(Zd)}),dv=rc(Xm,{Keyword:Ku(Mc)});function gv(t,e){var n=e[e.length-1],r=oc({},ov,t,e);if(r){var i=wc(t.getAttribute("queryable"));void 0===i&&(i=n.queryable),r.queryable=void 0!==i&&i;var o=Ec(t.getAttribute("cascaded"));void 0===o&&(o=n.cascaded),r.cascaded=o;var a=wc(t.getAttribute("opaque"));void 0===a&&(a=n.opaque),r.opaque=void 0!==a&&a;var s=wc(t.getAttribute("noSubsets"));void 0===s&&(s=n.noSubsets),r.noSubsets=void 0!==s&&s;var l=_c(t.getAttribute("fixedWidth"));l||(l=n.fixedWidth),r.fixedWidth=l;var u=_c(t.getAttribute("fixedHeight"));return u||(u=n.fixedHeight),r.fixedHeight=u,["Style","CRS","AuthorityURL"].forEach((function(t){if(t in n){var e=r[t]||[];r[t]=e.concat(n[t])}})),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in r)){var e=n[t];r[t]=e}})),r}}function mv(t,e){return oc({},pv,t,e)}function vv(t,e){return oc({},uv,t,e)}function yv(t,e){var n=mv(t,e);if(n){var r=[Ec(t.getAttribute("width")),Ec(t.getAttribute("height"))];return n.size=r,n}}function bv(t,e){return oc([],dv,t,e)}var wv=Qm,xv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sv=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Ea="http://mapserver.gis.umn.edu/mapserver",n.Ra=new Nc,n.xa=r.layers?r.layers:null,n}return xv(e,t),e.prototype.getLayers=function(){return this.xa},e.prototype.setLayers=function(t){this.xa=t},e.prototype.As=function(t,e){t.setAttribute("namespaceURI",this.Ea);var n=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==n)for(var i=0,a=t.childNodes.length;i<a;i++){var s=t.childNodes[i];if(s.nodeType===Node.ELEMENT_NODE){var u=s,c=e[0],h=u.localName.replace("_layer","");if(!this.xa||o(this.xa,h)){var f=h+"_feature";c.featureType=f,c.featureNS=this.Ea;var p={};p[f]=Ku(this.Ra.readFeatureElement,this.Ra);var d=rc([c.featureNS,null],p);u.setAttribute("namespaceURI",this.Ea);var g=oc([],d,u,e,this.Ra);g&&l(r,g)}}}if("FeatureCollection"==n){var m=oc([],this.Ra.FEATURE_COLLECTION_PARSERS,t,[{}],this.Ra);m&&(r=m)}return r},e.prototype.readFeaturesFromNode=function(t,e){var n={};return e&&U(n,this.getReadOptions(t,e)),this.As(t,[n])},e}(pc),_v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kv=[null,"http://www.opengis.net/wmts/1.0"],Ev=[null,"http://www.opengis.net/ows/1.1"],Mv=rc(kv,{Contents:Zu((function(t,e){return oc({},Ov,t,e)}))}),Tv=function(t){function e(){var e=t.call(this)||this;return e.Ts=new gg,e}return _v(e,t),e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var n=this.Ts.readFromNode(t);return n?(n.version=e,(n=oc(n,Mv,t,[]))||null):null},e}(Xd),Ov=rc(kv,{Layer:Xu((function(t,e){return oc({},Pv,t,e)})),TileMatrixSet:Xu((function(t,e){return oc({},Nv,t,e)}))}),Pv=rc(kv,{Style:Xu((function(t,e){var n=oc({},Cv,t,e);if(n){var r="true"===t.getAttribute("isDefault");return n.isDefault=r,n}})),Format:Xu(Mc),TileMatrixSetLink:Xu((function(t,e){return oc({},Iv,t,e)})),Dimension:Xu((function(t,e){return oc({},Rv,t,e)})),ResourceURL:Xu((function(t,e){var n=t.getAttribute("format"),r=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};return n&&(o.format=n),r&&(o.template=r),i&&(o.resourceType=i),o}))},rc(Ev,{Title:Zu(Mc),Abstract:Zu(Mc),WGS84BoundingBox:Zu(Fv),Identifier:Zu(Mc)})),Cv=rc(kv,{LegendURL:Xu((function(t,e){var n={};return n.format=t.getAttribute("format"),n.href=Zd(t),n}))},rc(Ev,{Title:Zu(Mc),Identifier:Zu(Mc)})),Iv=rc(kv,{TileMatrixSet:Zu(Mc),TileMatrixSetLimits:Zu((function(t,e){return oc([],Av,t,e)}))}),Av=rc(kv,{TileMatrixLimits:Ku((function(t,e){return oc({},Lv,t,e)}))}),Lv=rc(kv,{TileMatrix:Zu(Mc),MinTileRow:Zu(kc),MaxTileRow:Zu(kc),MinTileCol:Zu(kc),MaxTileCol:Zu(kc)}),Rv=rc(kv,{Default:Zu(Mc),Value:Xu(Mc)},rc(Ev,{Identifier:Zu(Mc)})),jv=rc(Ev,{LowerCorner:Ku(Dv),UpperCorner:Ku(Dv)}),Nv=rc(kv,{WellKnownScaleSet:Zu(Mc),TileMatrix:Xu((function(t,e){return oc({},$v,t,e)}))},rc(Ev,{SupportedCRS:Zu(Mc),Identifier:Zu(Mc),BoundingBox:Zu(Fv)})),$v=rc(kv,{TopLeftCorner:Zu(Dv),ScaleDenominator:Zu(Sc),TileWidth:Zu(kc),TileHeight:Zu(kc),MatrixWidth:Zu(kc),MatrixHeight:Zu(kc)},rc(Ev,{Identifier:Zu(Mc)}));function Fv(t,e){var n=oc([],jv,t,e);if(2==n.length)return gn(n)}function Dv(t,e){var n=Mc(t).split(/\s+/);if(n&&2==n.length){var r=+n[0],i=+n[1];if(!isNaN(r)&&!isNaN(i))return[r,i]}}var Gv=Tv,Uv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bv="accuracy",zv="accuracyGeometry",Vv="altitude",qv="altitudeAccuracy",Hv="heading",Wv="position",Kv="projection",Yv="speed",Xv="tracking",Zv="trackingOptions",Jv=function(t){function e(e){var n=t.call(this,K)||this;return n.code=e.code,n.message=e.message,n}return Uv(e,t),e}(R),Qv=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=e||{};return n.Es=null,n.Vt=_r,n.Rs=void 0,n.addChangeListener(Kv,n.Ft),n.addChangeListener(Xv,n.Cs),void 0!==r.projection&&n.setProjection(r.projection),void 0!==r.trackingOptions&&n.setTrackingOptions(r.trackingOptions),n.setTracking(void 0!==r.tracking&&r.tracking),n}return Uv(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.Ft=function(){var t=this.getProjection();t&&(this.Vt=Rr(Mr("EPSG:4326"),t),this.Es&&this.set(Wv,this.Vt(this.Es)))},e.prototype.Cs=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.Rs?this.Rs=navigator.geolocation.watchPosition(this.Is.bind(this),this.Ps.bind(this),this.getTrackingOptions()):t||void 0===this.Rs||(navigator.geolocation.clearWatch(this.Rs),this.Rs=void 0)}},e.prototype.Is=function(t){var e=t.coords;this.set(Bv,e.accuracy),this.set(Vv,null===e.altitude?void 0:e.altitude),this.set(qv,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Hv,null===e.heading?void 0:O(e.heading)),this.Es?(this.Es[0]=e.longitude,this.Es[1]=e.latitude):this.Es=[e.longitude,e.latitude];var n=this.Vt(this.Es);this.set(Wv,n),this.set(Yv,null===e.speed?void 0:e.speed);var r=Qa(this.Es,e.accuracy);r.applyTransform(this.Vt),this.set(zv,r),this.changed()},e.prototype.Ps=function(t){this.dispatchEvent(new Jv(t))},e.prototype.getAccuracy=function(){return this.get(Bv)},e.prototype.getAccuracyGeometry=function(){return this.get(zv)||null},e.prototype.getAltitude=function(){return this.get(Vv)},e.prototype.getAltitudeAccuracy=function(){return this.get(qv)},e.prototype.getHeading=function(){return this.get(Hv)},e.prototype.getPosition=function(){return this.get(Wv)},e.prototype.getProjection=function(){return this.get(Kv)},e.prototype.getSpeed=function(){return this.get(Yv)},e.prototype.getTracking=function(){return this.get(Xv)},e.prototype.getTrackingOptions=function(){return this.get(Zv)},e.prototype.setProjection=function(t){this.set(Kv,Mr(t))},e.prototype.setTracking=function(t){this.set(Xv,t)},e.prototype.setTrackingOptions=function(t){this.set(Zv,t)},e}(pt),ty=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ey=function(t){function e(e,n,r){var i=t.call(this)||this;if(void 0!==r&&void 0===n)i.setFlatCoordinates(r,e);else{var o=n||0;i.setCenterAndRadius(e,o,r)}return i}return ty(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<r){if(0===s)for(var l=0;l<this.stride;++l)n[l]=i[l];else{var u=this.getRadius()/Math.sqrt(s);for(n[0]=i[0]+u*o,n[1]=i[1]+u*a,l=2;l<this.stride;++l)n[l]=i[l]}return n.length=this.stride,s}return r},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,r=t-n[0],i=e-n[1];return r*r+i*i<=this.Ds()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return kn(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.Ds())},e.prototype.Ds=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return tr.CIRCLE},e.prototype.intersectsExtent=function(t){if(Kn(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Nn(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+n;for(var i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,i=ha(r,0,t,this.stride);r[i++]=r[0]+e;for(var o=1,a=this.stride;o<a;++o)r[i++]=r[o];r.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Ko(n,0,n.length,r,t,e,n)),this.changed()},e.prototype.translate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Xo(n,0,n.length,r,t,e,n)),this.changed()},e}(ra);ey.prototype.transform;var ny=ey;function ry(t,e,n){for(var r,i,o,a,s,l,u=[],c=t(0),h=t(1),f=e(c),p=e(h),d=[h,c],g=[p,f],m=[1,0],v={},y=1e5;--y>0&&m.length>0;)o=m.pop(),c=d.pop(),f=g.pop(),(l=o.toString())in v||(u.push(f[0],f[1]),v[l]=!0),a=m.pop(),h=d.pop(),p=g.pop(),k((i=e(r=t(s=(o+a)/2)))[0],i[1],f[0],f[1],p[0],p[1])<n?(u.push(p[0],p[1]),v[l=a.toString()]=!0):(m.push(a,s,s,o),g.push(p,i,i,f),d.push(h,r,r,c));return u}function iy(t,e,n,r,i){return ry((function(r){return[t,e+(n-e)*r]}),jr(Mr("EPSG:4326"),r),i)}function oy(t,e,n,r,i){return ry((function(r){return[e+(n-e)*r,t]}),jr(Mr("EPSG:4326"),r),i)}function ay(t,e,n,r,i){var o,a,s,l,u,c,h,f,p,d=n,g=n,m=0,v=0,y=n;for(o=n;o<r;o+=i){var b=e[o],w=e[o+1];void 0!==l&&(f=b-l,p=w-u,s=Math.sqrt(f*f+p*p),void 0!==c&&(v+=a,Math.acos((c*f+h*p)/(a*s))>t&&(v>m&&(m=v,d=y,g=o),v=0,y=o-i)),a=s,c=f,h=p),l=b,u=w}return(v+=s)>m?[y,o]:[d,g]}function sy(t,e,n,r,i,o,a,s,l,u,c,h){var f=t[e],p=t[e+1],d=0,g=0,m=0,v=0;function y(){d=f,g=p,f=t[e+=r],p=t[e+1],v+=m,m=Math.sqrt((f-d)*(f-d)+(p-g)*(p-g))}do{y()}while(e<n-r&&v+m<o);for(var b=(o-v)/m,w=C(d,f,b),x=C(g,p,b),S=e-r,_=v,k=o+s*l(u,i,c);e<n-r&&v+m<k;)y();var E,M=C(d,f,b=(k-v)/m),T=C(g,p,b);if(h){var O=[w,x,M,T];Ko(O,0,4,2,h,O,O),E=O[0]>O[2]}else E=w>M;var P,I=Math.PI,A=[],L=S+r===e;if(m=0,v=_,f=t[e=S],p=t[e+1],L){y();var R=Math.atan2(p-g,f-d);E&&(R+=R>0?-I:I);var j=(M+w)/2,N=(T+x)/2;return A[0]=[j,N,(k-o)/2,R,i],A}for(var $=0,F=i.length;$<F;){y();var D=Math.atan2(p-g,f-d);if(E&&(D+=D>0?-I:I),void 0!==P){var G=D-P;if(G+=G>I?-2*I:G<-I?2*I:0,Math.abs(G)>a)return null}P=D;for(var U=$,B=0;$<F;++$){var z=s*l(u,i[E?F-$-1:$],c);if(e+r<n&&v+m<o+B+z/2)break;B+=z}if($!==U){var V=E?i.substring(F-U,F-$):i.substring(U,$);j=C(d,f,b=(o+B/2-v)/m),N=C(g,p,b),A.push([j,N,B/2,D,V]),o+=B}}return A}var ly=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uy=function(t){function e(e,n,r,i,o){var a=this,s=void 0!==o?0:2;return(a=t.call(this,e,n,r,s)||this).oi=void 0!==o?o:null,a.fo=i,a.si=null,a}return ly(e,t),e.prototype.getError=function(){return this.si},e.prototype.Ns=function(t){t?(this.si=t,this.state=3):this.state=2,this.changed()},e.prototype.load=function(){0==this.state&&(this.state=1,this.changed(),this.oi(this.Ns.bind(this)))},e.prototype.getImage=function(){return this.fo},e}(rf),cy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hy=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,a)||this;return s.xo=i,s.no=r,s.key=r,s.eo=new Image,null!==i&&(s.eo.crossOrigin=i),s.ro=null,s.Ls=o,s}return cy(e,t),e.prototype.getImage=function(){return this.eo},e.prototype.setImage=function(t){this.eo=t,this.state=2,this.ao(),this.changed()},e.prototype.oo=function(){var t;this.state=3,this.ao(),this.eo=((t=Gt(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.so=function(){var t=this.eo;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.ao(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.eo=new Image,null!==this.xo&&(this.eo.crossOrigin=this.xo)),0==this.state&&(this.state=1,this.changed(),this.Ls(this,this.no),this.ro=af(this.eo,this.so.bind(this),this.oo.bind(this)))},e.prototype.ao=function(){this.ro&&(this.ro(),this.ro=null)},e}($s),fy="active",py=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function dy(t,e,n){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:Bo,center:t.getConstrainedCenter(i)})}}function gy(t,e,n,r){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==r?r:250,easing:Go})}}var my=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.L=null,n.setActive(!0),n}return py(e,t),e.prototype.getActive=function(){return this.get(fy)},e.prototype.getMap=function(){return this.L},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(fy,t)},e.prototype.setMap=function(t){this.L=t},e}(pt),vy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yy=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.zs=r.delta?r.delta:1,n.Mr=void 0!==r.duration?r.duration:250,n}return vy(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==yo.DBLCLICK){var n=t.originalEvent,r=t.map,i=t.coordinate,o=n.shiftKey?-this.zs:this.zs;gy(r.getView(),o,i,this.Mr),n.preventDefault(),e=!0}return!e},e}(my),by=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wy=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.features=r,o.file=n,o.projection=i,o}return by(e,t),e}(R),xy=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{handleEvent:$})||this).on,n.once,n.un,n.Fs=!1,n.Us=[];for(var i=r.formatConstructors?r.formatConstructors:[],o=0,a=i.length;o<a;++o){var s=i[o];"function"==typeof s&&(s=new s),n.Us.push(s),n.Fs=n.Fs||s.getType()===rl}return n.re=r.projection?Mr(r.projection):null,n.Bs=null,n.jt=r.source||null,n.target=r.target?r.target:null,n}return by(e,t),e.prototype.Gs=function(t,e){var n,r=e.target.result,i=this.getMap(),o=this.re;o||(o=i.getView().getProjection());for(var a=this.Us,s=0,l=a.length;s<l;++s){var u=a[s],c=r;this.Fs&&u.getType()!==rl&&(void 0===n&&(n=(new TextDecoder).decode(r)),c=n);var h=this.qs(u,c,{featureProjection:o});if(h&&h.length>0){this.jt&&(this.jt.clear(),this.jt.addFeatures(h)),this.dispatchEvent(new wy("addfeatures",t,h,o));break}}},e.prototype.Vs=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.Bs=[it(e,Z,this.handleDrop,this),it(e,"dragenter",this.handleStop,this),it(e,"dragover",this.handleStop,this),it(e,Z,this.handleStop,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.Vs(),this.getActive()&&!e&&this.Zs(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.Zs(),t.prototype.setMap.call(this,e),this.getActive()&&this.Vs()},e.prototype.qs=function(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}},e.prototype.Zs=function(){this.Bs&&(this.Bs.forEach(at),this.Bs=null)},e.prototype.handleDrop=function(t){for(var e=t.dataTransfer.files,n=0,r=e.length;n<r;++n){var i=e.item(n),o=new FileReader;o.addEventListener(tt,this.Gs.bind(this,i)),this.Fs?o.readAsArrayBuffer(i):o.readAsText(i)}},e.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},e}(my),Sy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function _y(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}var ky=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.Ws={},n.targetPointers=[],n}return Sy(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.$s(t),this.handlingDownUpSequence){if(t.type==yo.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==yo.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==yo.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==yo.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.$s=function(t){if(function(t){var e=t.type;return e===yo.POINTERDOWN||e===yo.POINTERDRAG||e===yo.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==yo.POINTERUP?delete this.Ws[n]:(t.type==yo.POINTERDOWN||n in this.Ws)&&(this.Ws[n]=e),this.targetPointers=z(this.Ws)}},e}(my),Ey=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),My=function(t){function e(e){var n=t.call(this)||this;return n.Wo=null,n.Xt=document.createElement("div"),n.Xt.style.position="absolute",n.Xt.style.pointerEvents="auto",n.Xt.className="ol-box "+e,n.L=null,n.Hs=null,n.Ks=null,n}return Ey(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.Xs=function(){var t=this.Hs,e=this.Ks,n="px",r=this.Xt.style;r.left=Math.min(t[0],e[0])+n,r.top=Math.min(t[1],e[1])+n,r.width=Math.abs(e[0]-t[0])+n,r.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.L){this.L.getOverlayContainer().removeChild(this.Xt);var e=this.Xt.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.L=t,this.L&&this.L.getOverlayContainer().appendChild(this.Xt)},e.prototype.setPixels=function(t,e){this.Hs=t,this.Ks=e,this.createOrUpdateGeometry(),this.Xs()},e.prototype.createOrUpdateGeometry=function(){var t=this.Hs,e=this.Ks,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.L.getCoordinateFromPixelInternal,this.L);n[4]=n[0].slice(),this.Wo?this.Wo.setCoordinates([n]):this.Wo=new Ja([n])},e.prototype.getGeometry=function(){return this.Wo},e}(N),Ty=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oy=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=r,i}return Ty(e,t),e}(R),Py=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=e||{};return n.Ys=new My(r.className||"ol-dragbox"),n.Js=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(n.onBoxEnd=r.onBoxEnd),n.Hs=null,n.Qs=r.condition?r.condition:Hs,n.tu=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return Ty(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],i=n[1]-e[1];return r*r+i*i>=this.Js},e.prototype.getGeometry=function(){return this.Ys.getGeometry()},e.prototype.handleDragEvent=function(t){this.Ys.setPixels(this.Hs,t.pixel),this.dispatchEvent(new Oy("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.Ys.setMap(null);var e=this.tu(t,this.Hs,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Oy(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.Qs(t)&&(this.Hs=t.pixel,this.Ys.setMap(t.map),this.Ys.setPixels(this.Hs,this.Hs),this.dispatchEvent(new Oy("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(ky),Cy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Iy=function(t){function e(e){var n=t.call(this,{stopDown:F})||this,r=e||{};n.nu=r.kinetic,n.lastCentroid=null,n.eu,n.ru=!1;var i=r.condition?r.condition:Gs(Ys,Qs);return n.Qs=r.onFocusOnly?Gs(Vs,i):i,n.iu=!1,n}return Cy(e,t),e.prototype.handleDragEvent=function(t){this.ru||(this.ru=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,n=_y(e);if(e.length==this.eu){if(this.nu&&this.nu.update(n[0],n[1]),this.lastCentroid){var r=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();gr(r,i.getResolution()),dr(r,i.getRotation()),i.adjustCenterInternal(r)}}else this.nu&&this.nu.begin();this.lastCentroid=n,this.eu=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.iu&&this.nu&&this.nu.end()){var r=this.nu.getDistance(),i=this.nu.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(i),a[1]-r*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:Go})}return this.ru&&(this.ru=!1,n.endInteraction()),!1}return this.nu&&this.nu.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Qs(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.nu&&this.nu.begin(),this.iu=this.targetPointers.length>1,!0}return!1},e}(ky),Ay=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ly=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{stopDown:F})||this).Qs=r.condition?r.condition:Bs,n.ou=void 0,n.Mr=void 0!==r.duration?r.duration:250,n}return Ay(e,t),e.prototype.handleDragEvent=function(t){if(Js(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==jo){var r=e.getSize(),i=t.pixel,o=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.ou){var a=o-this.ou;n.adjustRotationInternal(-a)}this.ou=o}}},e.prototype.handleUpEvent=function(t){return!Js(t)||(t.map.getView().endInteraction(this.Mr),!1)},e.prototype.handleDownEvent=function(t){return!(!Js(t)||!Hs(t)||!this.Qs(t)||(t.map.getView().beginInteraction(),this.ou=void 0,0))},e}(ky),Ry=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jy=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).Qs=r.condition?r.condition:Xs,n.ou=void 0,n.au=void 0,n.su=0,n.Mr=void 0!==r.duration?r.duration:400,n}return Ry(e,t),e.prototype.handleDragEvent=function(t){if(Js(t)){var e=t.map,n=e.getSize(),r=t.pixel,i=r[0]-n[0]/2,o=n[1]/2-r[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),l=e.getView();if(void 0!==this.ou){var u=this.ou-a;l.adjustRotationInternal(u)}this.ou=a,void 0!==this.au&&l.adjustResolutionInternal(this.au/s),void 0!==this.au&&(this.su=this.au/s),this.au=s}},e.prototype.handleUpEvent=function(t){if(!Js(t))return!0;var e=t.map.getView(),n=this.su>1?1:-1;return e.endInteraction(this.Mr,n),this.su=0,!1},e.prototype.handleDownEvent=function(t){return!!Js(t)&&!!this.Qs(t)&&(t.map.getView().beginInteraction(),this.ou=void 0,this.au=void 0,!0)},e}(ky),Ny=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$y=function(t){function e(e){var n=this,r=e||{},i=r.condition?r.condition:Xs;return(n=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).Mr=void 0!==r.duration?r.duration:200,n.uu=void 0!==r.out&&r.out,n}return Ny(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.uu){var r=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(r),o=e.getResolution()/i;(n=n.clone()).scale(o*o)}e.fitInternal(n,{duration:this.Mr,easing:Go})},e}(Py),Fy=n(7072),Dy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gy="renderOrder",Uy=function(t){function e(e){var n=this,r=e||{},i=U({},r);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(n=t.call(this,i)||this).fu=void 0!==r.declutter&&r.declutter,n.cu=void 0!==r.renderBuffer?r.renderBuffer:100,n.ci=null,n.hi=void 0,n.setStyle(r.style),n.hu=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.lu=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return Dy(e,t),e.prototype.getDeclutter=function(){return this.fu},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.cu},e.prototype.getRenderOrder=function(){return this.get(Gy)},e.prototype.getStyle=function(){return this.ci},e.prototype.getStyleFunction=function(){return this.hi},e.prototype.getUpdateWhileAnimating=function(){return this.hu},e.prototype.getUpdateWhileInteracting=function(){return this.lu},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Fy(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(Gy,t)},e.prototype.setStyle=function(t){this.ci=void 0!==t?t:kf,this.hi=null===t?void 0:Sf(this.ci),this.changed()},e}(Ee),By={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},zy=[By.FILL],Vy=[By.STROKE],qy=[By.BEGIN_PATH],Hy=[By.CLOSE_PATH],Wy=By,Ky=function(){function t(){}return t.prototype.drawCustom=function(t,e,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),Yy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xy=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=n,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=r,o.vu=null,o.du=null,o.pu=null,o.instructions=[],o.coordinates=[],o.yu=[],o.hitDetectionInstructions=[],o.state={},o}return Yy(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var n=this.getBufferedMaxExtent(),r=this.yu,i=this.coordinates,o=i.length,a=0,s=t.length;a<s;a+=e)r[0]=t[a],r[1]=t[a+1],bn(n,r)&&(i[o++]=r[0],i[o++]=r[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,n,r,i,o){var a=this.coordinates,s=a.length,l=this.getBufferedMaxExtent();o&&(e+=r);var u,c,h,f=t[e],p=t[e+1],d=this.yu,g=!0;for(u=e+r;u<n;u+=r)d[0]=t[u],d[1]=t[u+1],(h=Sn(l,d))!==c?(g&&(a[s++]=f,a[s++]=p,g=!1),a[s++]=d[0],a[s++]=d[1]):1===h?(a[s++]=d[0],a[s++]=d[1],g=!1):g=!0,f=d[0],p=d[1],c=h;return(i&&g||u===e+r)&&(a[s++]=f,a[s++]=p),s},e.prototype.mu=function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o],l=this.appendFlatLineCoordinates(t,e,s,r,!1,!1);i.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var r,i,o,a,s,l=t.getType(),u=t.getStride(),c=this.coordinates.length;if(l==tr.MULTI_POLYGON){r=t.getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var f=0,p=h.length;f<p;++f){var d=[];s=this.mu(r,s,h[f],u,d),a.push(d)}this.instructions.push([Wy.CUSTOM,c,a,t,n,ka])}else l==tr.POLYGON||l==tr.MULTI_LINE_STRING?(o=[],r=l==tr.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.mu(r,0,t.getEnds(),u,o),this.instructions.push([Wy.CUSTOM,c,o,t,n,_a])):l==tr.LINE_STRING||l==tr.CIRCLE?(r=t.getFlatCoordinates(),i=this.appendFlatLineCoordinates(r,0,r.length,u,!1,!1),this.instructions.push([Wy.CUSTOM,c,i,t,n,Sa])):l==tr.MULTI_POINT?(r=t.getFlatCoordinates(),(i=this.appendFlatPointCoordinates(r,u))>c&&this.instructions.push([Wy.CUSTOM,c,i,t,n,Sa])):l==tr.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),i=this.coordinates.length,this.instructions.push([Wy.CUSTOM,c,i,t,n]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.vu=[Wy.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.vu),this.du=[Wy.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.du)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,r,i=e.length,o=-1;for(t=0;t<i;++t)(r=(n=e[t])[0])==Wy.END_GEOMETRY?o=t:r==Wy.BEGIN_GEOMETRY&&(n[2]=t,s(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=Pt(r||ki)}else n.fillStyle=void 0;if(e){var i=e.getColor();n.strokeStyle=Pt(i||Pi);var o=e.getLineCap();n.lineCap=void 0!==o?o:Ei;var a=e.getLineDash();n.lineDash=a?a.slice():Mi;var s=e.getLineDashOffset();n.lineDashOffset=s||0;var l=e.getLineJoin();n.lineJoin=void 0!==l?l:Ti;var u=e.getWidth();n.lineWidth=void 0!==u?u:1;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:Oi,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.pu=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,n=[Wy.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Wy.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,r=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||i!=t.currentLineDash&&!c(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.vu[2]=this.instructions.length,this.vu=null,this.du[2]=this.hitDetectionInstructions.length,this.du=null;var e=[Wy.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.pu&&(this.pu=vn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;mn(this.pu,t,this.pu)}return this.pu},e}(Ky),Zy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jy=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.uo=null,o.eo=null,o.bu=void 0,o.wu=void 0,o.gu=void 0,o.ku=void 0,o.Xi=void 0,o.xu=void 0,o.Su=void 0,o.sr=void 0,o.Ar=void 0,o.Yi=void 0,o.Co=void 0,o._u=void 0,o}return Zy(e,t),e.prototype.drawPoint=function(t,e){if(this.eo){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([Wy.DRAW_IMAGE,i,o,this.eo,this.wu*this.bu,this.gu*this.bu,Math.ceil(this.ku*this.bu),this.Xi,this.xu,this.Su,this.sr,this.Ar,[this.Yi[0]*this.pixelRatio/this.bu,this.Yi[1]*this.pixelRatio/this.bu],Math.ceil(this.Co*this.bu),this._u]),this.hitDetectionInstructions.push([Wy.DRAW_IMAGE,i,o,this.uo,this.wu,this.gu,this.ku,this.Xi,this.xu,this.Su,this.sr,this.Ar,this.Yi,this.Co,this._u]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.eo){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([Wy.DRAW_IMAGE,i,o,this.eo,this.wu*this.bu,this.gu*this.bu,Math.ceil(this.ku*this.bu),this.Xi,this.xu,this.Su,this.sr,this.Ar,[this.Yi[0]*this.pixelRatio/this.bu,this.Yi[1]*this.pixelRatio/this.bu],Math.ceil(this.Co*this.bu),this._u]),this.hitDetectionInstructions.push([Wy.DRAW_IMAGE,i,o,this.uo,this.wu,this.gu,this.ku,this.Xi,this.xu,this.Su,this.sr,this.Ar,this.Yi,this.Co,this._u]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.wu=void 0,this.gu=void 0,this.uo=null,this.eo=null,this.bu=void 0,this.ku=void 0,this.Yi=void 0,this.Xi=void 0,this.xu=void 0,this.Su=void 0,this.sr=void 0,this.Ar=void 0,this.Co=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),r=t.getSize(),i=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),a=t.getOrigin();this.bu=t.getPixelRatio(this.pixelRatio),this.wu=n[0],this.gu=n[1],this.uo=i,this.eo=o,this.ku=r[1],this.Xi=t.getOpacity(),this.xu=a[0]*this.bu,this.Su=a[1]*this.bu,this.sr=t.getRotateWithView(),this.Ar=t.getRotation(),this.Yi=t.getScaleArray(),this.Co=r[0],this._u=e},e}(Xy),Qy=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tb=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return Qy(e,t),e.prototype.Mu=function(t,e,n,r){var i=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,r,!1,!1),a=[Wy.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n},e.prototype.drawLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Wy.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Mi,0],qy);var o=t.getFlatCoordinates(),a=t.getStride();this.Mu(o,0,o.length,a),this.hitDetectionInstructions.push(Vy),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Wy.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],qy);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.Mu(a,l,o[u],s);this.hitDetectionInstructions.push(Vy),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Vy),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Vy),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(qy)},e}(Xy),eb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nb=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return eb(e,t),e.prototype.ju=function(t,e,n,r){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=n.length;this.instructions.push(qy),this.hitDetectionInstructions.push(qy);for(var l=0;l<s;++l){var u=n[l],c=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,u,r,!0,!a),f=[Wy.MOVE_TO_LINE_TO,c,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(Hy),this.hitDetectionInstructions.push(Hy)),e=u}return o&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),a&&(this.instructions.push(Vy),this.hitDetectionInstructions.push(Vy)),e},e.prototype.drawCircle=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.Ou(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Wy.SET_FILL_STYLE,ki]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Wy.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);var l=[Wy.CIRCLE,s];this.instructions.push(qy,l),this.hitDetectionInstructions.push(qy,l),void 0!==n.fillStyle&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),void 0!==n.strokeStyle&&(this.instructions.push(Vy),this.hitDetectionInstructions.push(Vy)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.Ou(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Wy.SET_FILL_STYLE,ki]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Wy.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.ju(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.Ou(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Wy.SET_FILL_STYLE,ki]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Wy.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.ju(a,l,o[u],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var n=this.coordinates,r=0,i=n.length;r<i;++r)n[r]=ya(n[r],e);return t.prototype.finish.call(this)},e.prototype.Ou=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(Xy),rb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ib={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ob=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.Au=null,o.Ho="",o.Tu=0,o.Eu=0,o.Ru=void 0,o.Cu=0,o.Iu=null,o.fillStates={},o.Pu=null,o.strokeStates={},o.Du={},o.textStates={},o.Nu="",o.Lu="",o.zu="",o._u=void 0,o}return rb(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var n=this.Iu,r=this.Pu,i=this.Du;if(""!==this.Ho&&i&&(n||r)){var o=this.coordinates,a=o.length,s=t.getType(),l=null,u=t.getStride();if("line"!==i.placement||s!=tr.LINE_STRING&&s!=tr.MULTI_LINE_STRING&&s!=tr.POLYGON&&s!=tr.MULTI_POLYGON){var c=i.overflow?null:[];switch(s){case tr.POINT:case tr.MULTI_POINT:l=t.getFlatCoordinates();break;case tr.LINE_STRING:l=t.getFlatMidpoint();break;case tr.CIRCLE:l=t.getCenter();break;case tr.MULTI_LINE_STRING:l=t.getFlatMidpoints(),u=2;break;case tr.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||c.push(l[2]/this.resolution),u=3;break;case tr.MULTI_POLYGON:var h=t.getFlatInteriorPoints();for(l=[],S=0,_=h.length;S<_;S+=3)i.overflow||c.push(h[S+2]/this.resolution),l.push(h[S],h[S+1]);if(0===l.length)return;u=2}if((C=this.appendFlatPointCoordinates(l,u))===a)return;if(c&&(C-a)/2!=l.length/u){var f=a/2;c=c.filter((function(t,e){var n=o[2*(f+e)]===l[e*u]&&o[2*(f+e)+1]===l[e*u+1];return n||--f,n}))}this.Fu(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var p=i.padding;if(p!=Ai&&(i.scale[0]<0||i.scale[1]<0)){var d=i.padding[0],g=i.padding[1],m=i.padding[2],v=i.padding[3];i.scale[0]<0&&(g=-g,v=-v),i.scale[1]<0&&(d=-d,m=-m),p=[d,g,m,v]}var y=this.pixelRatio;this.instructions.push([Wy.DRAW_IMAGE,a,C,null,NaN,NaN,NaN,1,0,0,this.Ru,this.Cu,[1,1],NaN,this._u,p==Ai?Ai:p.map((function(t){return t*y})),!!i.backgroundFill,!!i.backgroundStroke,this.Ho,this.Nu,this.zu,this.Lu,this.Tu,this.Eu,c]);var b=1/y;this.hitDetectionInstructions.push([Wy.DRAW_IMAGE,a,C,null,NaN,NaN,NaN,1,0,0,this.Ru,this.Cu,[b,b],NaN,this._u,p,!!i.backgroundFill,!!i.backgroundStroke,this.Ho,this.Nu,this.zu,this.Lu,this.Tu,this.Eu,c]),this.endGeometry(e)}else{if(!Kn(this.getBufferedMaxExtent(),t.getExtent()))return;var w=void 0;if(l=t.getFlatCoordinates(),s==tr.LINE_STRING)w=[l.length];else if(s==tr.MULTI_LINE_STRING)w=t.getEnds();else if(s==tr.POLYGON)w=t.getEnds().slice(0,1);else if(s==tr.MULTI_POLYGON){var x=t.getEndss();w=[];for(var S=0,_=x.length;S<_;++S)w.push(x[S][0])}this.beginGeometry(t,e);for(var k=i.textAlign,E=0,M=void 0,T=0,O=w.length;T<O;++T){if(null==k){var P=ay(i.maxAngle,l,E,w[T],u);E=P[0],M=P[1]}else M=w[T];for(S=E;S<M;S+=u)o.push(l[S],l[S+1]);var C=o.length;E=w[T],this.Uu(a,C),a=C}this.endGeometry(e)}}},e.prototype.Fu=function(){var t=this.Pu,e=this.Du,n=this.Iu,r=this.zu;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.Nu;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||Ci,textBaseline:e.textBaseline||Ii,scale:e.scale});var o=this.Lu;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))},e.prototype.Uu=function(t,e){var n=this.Pu,r=this.Du,i=this.zu,o=this.Nu,a=this.Lu;this.Fu();var s=this.pixelRatio,l=ib[r.textBaseline],u=this.Eu*s,c=this.Ho,h=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Wy.DRAW_CHARS,t,e,l,r.overflow,a,r.maxAngle,s,u,i,h*s,c,o,1]),this.hitDetectionInstructions.push([Wy.DRAW_CHARS,t,e,l,r.overflow,a,r.maxAngle,1,u,i,h,c,o,1/s])},e.prototype.setTextStyle=function(t,e){var n,r,i;if(t){var o=t.getFill();o?((r=this.Iu)||(r={},this.Iu=r),r.fillStyle=Pt(o.getColor()||ki)):(r=null,this.Iu=r);var a=t.getStroke();if(a){(i=this.Pu)||(i={},this.Pu=i);var s=a.getLineDash(),l=a.getLineDashOffset(),u=a.getWidth(),c=a.getMiterLimit();i.lineCap=a.getLineCap()||Ei,i.lineDash=s?s.slice():Mi,i.lineDashOffset=void 0===l?0:l,i.lineJoin=a.getLineJoin()||Ti,i.lineWidth=void 0===u?1:u,i.miterLimit=void 0===c?Oi:c,i.strokeStyle=Pt(a.getColor()||Pi)}else i=null,this.Pu=i;n=this.Du;var h=t.getFont()||_i;Di(h);var f=t.getScaleArray();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||Ii,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Ai,n.scale=void 0===f?[1,1]:f;var p=t.getOffsetX(),d=t.getOffsetY(),m=t.getRotateWithView(),v=t.getRotation();this.Ho=t.getText()||"",this.Tu=void 0===p?0:p,this.Eu=void 0===d?0:d,this.Ru=void 0!==m&&m,this.Cu=void 0===v?0:v,this.zu=i?("string"==typeof i.strokeStyle?i.strokeStyle:g(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.Nu=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.Lu=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+g(r.fillStyle):""}else this.Ho="";this._u=e},e}(Xy),ab={Circle:nb,Default:Xy,Image:Jy,LineString:tb,Polygon:nb,Text:ob},sb=function(){function t(t,e,n,r){this.Bu=t,this.Gu=e,this.Me=r,this.qu=n,this.Vu={}}return t.prototype.finish=function(){var t={};for(var e in this.Vu){t[e]=t[e]||{};var n=this.Vu[e];for(var r in n){var i=n[r].finish();t[e][r]=i}}return t},t.prototype.getBuilder=function(t,e){var n=void 0!==t?t.toString():"0",r=this.Vu[n];void 0===r&&(r={},this.Vu[n]=r);var i=r[e];return void 0===i&&(i=new(0,ab[e])(this.Bu,this.Gu,this.qu,this.Me),r[e]=i),i},t}(),lb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ub=function(t){function e(e){var n=t.call(this)||this;return n.Zu=n.Wu.bind(n),n.$u=e,n.declutterExecutorGroup=null,n}return lb(e,t),e.prototype.getFeatures=function(t){return p()},e.prototype.prepareFrame=function(t){return p()},e.prototype.renderFrame=function(t,e){return p()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(r,i){var o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){},e.prototype.getDataAtPixel=function(t,e,n){return p()},e.prototype.getLayer=function(){return this.$u},e.prototype.handleFontsChanged=function(){},e.prototype.Wu=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(W,this.Zu),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==xe&&t.changed()},e}(ct),cb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hb=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return cb(e,t),e.prototype.useContainer=function(t,e,n){var r,i,o=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===o&&(s=t.firstElementChild)instanceof HTMLCanvasElement&&(i=s.getContext("2d")),!i||0!==i.canvas.width&&i.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=i,this.containerReused=!0),!this.container){(r=document.createElement("div")).className=o;var a=r.style;a.position="absolute",a.width="100%",a.height="100%";var s=(i=Gt()).canvas;r.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=i}},e.prototype.clipUnrotated=function(t,e,n){var r=qn(n),i=Hn(n),o=Dn(n),a=Fn(n);oi(e.coordinateToPixelTransform,r),oi(e.coordinateToPixelTransform,i),oi(e.coordinateToPixelTransform,o),oi(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;oi(s,r),oi(s,i),oi(s,o),oi(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.Hu=function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){var i=new Si(t,this.inversePixelTransform,n,e);r.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.Hu(ge,t,e)},e.prototype.postRender=function(t,e){this.Hu(me,t,e)},e.prototype.getRenderTransform=function(t,e,n,r,i,o,a){var s=i/2,l=o/2,u=r/e,c=-u,h=-t[0]+a,f=-t[1];return ci(this.tempTransform,s,l,u,c,-n,h,f)},e.prototype.getDataAtPixel=function(t,e,n){var r,i=oi(this.inversePixelTransform,t.slice()),o=this.context,a=this.getLayer().getExtent();if(a&&!bn(a,oi(e.pixelToCoordinateTransform,t.slice())))return null;try{var s=Math.round(i[0]),l=Math.round(i[1]),u=document.createElement("canvas"),c=u.getContext("2d");u.width=1,u.height=1,c.clearRect(0,0,1,1),c.drawImage(o.canvas,s,l,1,1,0,0,1,1),r=c.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},e}(ub),fb="Circle",pb="Default",db="Image",gb="LineString",mb="Polygon",vb="Text",yb=[1/0,1/0,-1/0,-1/0],bb=[],wb=[],xb=[],Sb=[];function _b(t){return t[3].declutterBox}var kb=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Eb(t,e){return"start"!==e&&"end"!==e||kb.test(t)||(e="start"===e?"left":"right"),ib[e]}var Mb=function(){function t(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.Ku,this.instructions=r.instructions,this.coordinates=r.coordinates,this.Xu={},this.Yu=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.Ju=null,this.Qu=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.tf={},this.Au={}}return t.prototype.createLabel=function(t,e,n,r){var i=t+e+n+r;if(this.Au[i])return this.Au[i];var o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,s=this.textStates[e],l=this.pixelRatio,u=[s.scale[0]*l,s.scale[1]*l],c=Eb(t,s.textAlign||Ci),h=r&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],g=Vi(s.font,f,d),m=Gi(s.font),v=g+h,y=[],b=(v+2)*u[0],w=(m*p+h)*u[1],x={width:b<0?Math.floor(b):Math.ceil(b),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:y};1==u[0]&&1==u[1]||y.push("scale",u),y.push("font",s.font),r&&(y.push("strokeStyle",o.strokeStyle),y.push("lineWidth",h),y.push("lineCap",o.lineCap),y.push("lineJoin",o.lineJoin),y.push("miterLimit",o.miterLimit),($t?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(y.push("setLineDash",[o.lineDash]),y.push("lineDashOffset",o.lineDashOffset))),n&&y.push("fillStyle",a.fillStyle),y.push("textBaseline","middle"),y.push("textAlign","center");var S,_=.5-c,k=c*v+_*h;if(r)for(S=0;S<p;++S)y.push("strokeText",[f[S],k+_*d[S],.5*(h+m)+S*m]);if(n)for(S=0;S<p;++S)y.push("fillText",[f[S],k+_*d[S],.5*(h+m)+S*m]);return this.Au[i]=x,x},t.prototype.nf=function(t,e,n,r,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.Ku=o[2],this.Po(t)),a&&(this.ef(t,a),t.stroke())},t.prototype.rf=function(t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,g){var m,v=n-(a*=h[0]),y=r-(s*=h[1]),b=i+l>t?t-l:i,w=o+u>e?e-u:o,x=p[3]+b*h[0]+p[1],S=p[0]+w*h[1]+p[2],_=v-p[3],k=y-p[0];return(d||0!==c)&&(bb[0]=_,Sb[0]=_,bb[1]=k,wb[1]=k,wb[0]=_+x,xb[0]=wb[0],xb[1]=k+S,Sb[1]=xb[1]),0!==c?(oi(m=ci([1,0,0,1,0,0],n,r,1,1,c,-n,-r),bb),oi(m,wb),oi(m,xb),oi(m,Sb),kn(Math.min(bb[0],wb[0],xb[0],Sb[0]),Math.min(bb[1],wb[1],xb[1],Sb[1]),Math.max(bb[0],wb[0],xb[0],Sb[0]),Math.max(bb[1],wb[1],xb[1],Sb[1]),yb)):kn(Math.min(_,_+x),Math.min(k,k+S),Math.max(_,_+x),Math.max(k,k+S),yb),f&&(v=Math.round(v),y=Math.round(y)),{drawImageX:v,drawImageY:y,drawImageW:b,drawImageH:w,originX:l,originY:u,declutterBox:{minX:yb[0],minY:yb[1],maxX:yb[2],maxY:yb[3],value:g},canvasTransform:m,scale:h}},t.prototype.if=function(t,e,n,r,i,o,a){var s=!(!o&&!a),l=r.declutterBox,u=t.canvas,c=a?a[2]*r.scale[0]/2:0;return l.minX-c<=u.width/e&&l.maxX+c>=0&&l.minY-c<=u.height/e&&l.maxY+c>=0&&(s&&this.nf(t,bb,wb,xb,Sb,o,a),qi(t,r.canvasTransform,i,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.Po=function(t){if(this.Ku){var e=oi(this.Yu,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.Qu)}t.fill(),this.Ku&&t.restore()},t.prototype.ef=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.af=function(t,e,n,r){var i=this.textStates[e],o=this.createLabel(t,e,r,n),a=this.strokeStates[n],s=this.pixelRatio,l=Eb(t,i.textAlign||Ci),u=ib[i.textBaseline||Ii],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/s-2*i.scale[0])+2*(.5-l)*c,anchorY:u*o.height/s+2*(.5-u)*c}},t.prototype.sf=function(t,e,n,r,i,o,a,s){var l;this.Ju&&c(n,this.Yu)?l=this.Ju:(this.Ju||(this.Ju=[]),l=Wo(this.coordinates,0,this.coordinates.length,2,n,this.Ju),ii(this.Yu,n));for(var u,h,f,p,d,g,m,v,y,b,w,x,S,_,k,E,M=0,T=r.length,O=0,P=0,C=0,I=null,A=null,L=this.Xu,R=this.Qu,j=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,N={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},$=this.instructions!=r||this.overlaps?0:200;M<T;){var F=r[M];switch(F[0]){case Wy.BEGIN_GEOMETRY:S=F[1],E=F[3],S.getGeometry()?void 0===a||Kn(a,E.getExtent())?++M:M=F[2]+1:M=F[2];break;case Wy.BEGIN_PATH:P>$&&(this.Po(t),P=0),C>$&&(t.stroke(),C=0),P||C||(t.beginPath(),p=NaN,d=NaN),++M;break;case Wy.CIRCLE:var D=l[O=F[1]],G=l[O+1],U=l[O+2]-D,B=l[O+3]-G,z=Math.sqrt(U*U+B*B);t.moveTo(D+z,G),t.arc(D,G,z,0,2*Math.PI,!0),++M;break;case Wy.CLOSE_PATH:t.closePath(),++M;break;case Wy.CUSTOM:O=F[1],u=F[2];var V=F[3],q=F[4],H=6==F.length?F[5]:void 0;N.geometry=V,N.feature=S,M in L||(L[M]=[]);var W=L[M];H?H(l,O,u,2,W):(W[0]=l[O],W[1]=l[O+1],W.length=2),q(W,N),++M;break;case Wy.DRAW_IMAGE:O=F[1],u=F[2],v=F[3],h=F[4],f=F[5];var K=F[6],Y=F[7],X=F[8],Z=F[9],J=F[10],Q=F[11],tt=F[12],et=F[13],nt=F[14];if(!v&&F.length>=19){y=F[18],b=F[19],w=F[20],x=F[21];var rt=this.af(y,b,w,x);v=rt.label,F[3]=v;var it=F[22];h=(rt.anchorX-it)*this.pixelRatio,F[4]=h;var ot=F[23];f=(rt.anchorY-ot)*this.pixelRatio,F[5]=f,K=v.height,F[6]=K,et=v.width,F[13]=et}var at=void 0;F.length>24&&(at=F[24]);var st=void 0,lt=void 0,ut=void 0;F.length>16?(st=F[15],lt=F[16],ut=F[17]):(st=Ai,lt=!1,ut=!1),J&&j?Q+=R:J||j||(Q-=R);for(var ct=0;O<u;O+=2)if(!(at&&at[ct++]<et/this.pixelRatio)){var ht=[t,e,v,Ft=this.rf(v.width,v.height,l[O],l[O+1],et,K,h,f,X,Z,Q,tt,i,st,lt||ut,S),Y,lt?I:null,ut?A:null],ft=void 0,pt=void 0;if(s&&nt){var dt=u-O;if(!nt[dt]){nt[dt]=ht;continue}if(ft=nt[dt],delete nt[dt],pt=_b(ft),s.collides(pt))continue}s&&s.collides(Ft.declutterBox)||(ft&&(s&&s.insert(pt),this.if.apply(this,ft)),s&&s.insert(Ft.declutterBox),this.if.apply(this,ht))}++M;break;case Wy.DRAW_CHARS:var gt=F[1],mt=F[2],vt=F[3],yt=F[4];x=F[5];var bt=F[6],wt=F[7],xt=F[8];w=F[9];var St=F[10];y=F[11],b=F[12];var _t=[F[13],F[13]],kt=this.textStates[b],Et=kt.font,Mt=[kt.scale[0]*wt,kt.scale[1]*wt],Tt=void 0;Et in this.tf?Tt=this.tf[Et]:(Tt={},this.tf[Et]=Tt);var Ot=yl(l,gt,mt,2),Pt=Math.abs(Mt[0])*zi(Et,y,Tt);if(yt||Pt<=Ot){var Ct=this.textStates[b].textAlign,It=sy(l,gt,mt,2,y,(Ot-Pt)*ib[Ct],bt,Math.abs(Mt[0]),zi,Et,Tt,j?0:this.Qu);t:if(It){var At=[],Lt=void 0,Rt=void 0,jt=void 0,Nt=void 0,$t=void 0;if(w)for(Lt=0,Rt=It.length;Lt<Rt;++Lt){jt=($t=It[Lt])[4],Nt=this.createLabel(jt,b,"",w),h=$t[2]+(Mt[0]<0?-St:St),f=vt*Nt.height+2*(.5-vt)*St*Mt[1]/Mt[0]-xt;var Ft=this.rf(Nt.width,Nt.height,$t[0],$t[1],Nt.width,Nt.height,h,f,0,0,$t[3],_t,!1,Ai,!1,S);if(s&&s.collides(Ft.declutterBox))break t;At.push([t,e,Nt,Ft,1,null,null])}if(x)for(Lt=0,Rt=It.length;Lt<Rt;++Lt){if(jt=($t=It[Lt])[4],Nt=this.createLabel(jt,b,x,""),h=$t[2],f=vt*Nt.height-xt,Ft=this.rf(Nt.width,Nt.height,$t[0],$t[1],Nt.width,Nt.height,h,f,0,0,$t[3],_t,!1,Ai,!1,S),s&&s.collides(Ft.declutterBox))break t;At.push([t,e,Nt,Ft,1,null,null])}s&&s.load(At.map(_b));for(var Dt=0,Gt=At.length;Dt<Gt;++Dt)this.if.apply(this,At[Dt])}}++M;break;case Wy.END_GEOMETRY:if(void 0!==o){var Ut=o(S=F[1],E);if(Ut)return Ut}++M;break;case Wy.FILL:$?P++:this.Po(t),++M;break;case Wy.MOVE_TO_LINE_TO:for(O=F[1],u=F[2],_=l[O],m=(k=l[O+1])+.5|0,(g=_+.5|0)===p&&m===d||(t.moveTo(_,k),p=g,d=m),O+=2;O<u;O+=2)g=(_=l[O])+.5|0,m=(k=l[O+1])+.5|0,O!=u-2&&g===p&&m===d||(t.lineTo(_,k),p=g,d=m);++M;break;case Wy.SET_FILL_STYLE:I=F,this.Ku=F[2],P&&(this.Po(t),P=0,C&&(t.stroke(),C=0)),t.fillStyle=F[1],++M;break;case Wy.SET_STROKE_STYLE:A=F,C&&(t.stroke(),C=0),this.ef(t,F),++M;break;case Wy.STROKE:$?C++:t.stroke(),++M;break;default:++M}}P&&this.Po(t),C&&t.stroke()},t.prototype.execute=function(t,e,n,r,i,o){this.Qu=r,this.sf(t,e,n,this.instructions,i,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,n,r,i){return this.Qu=n,this.sf(t,1,e,this.hitDetectionInstructions,!0,r,i)},t}(),Tb=[mb,fb,gb,db,vb,pb],Ob=function(){function t(t,e,n,r,i,o){this.Gu=t,this.uf=r,this.Me=n,this.qu=e,this.cu=o,this.ff={},this.cf=null,this.hf=[1,0,0,1,0,0],this.lf(i)}return t.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},t.prototype.lf=function(t){for(var e in t){var n=this.ff[e];void 0===n&&(n={},this.ff[e]=n);var r=t[e];for(var i in r){var o=r[i];n[i]=new Mb(this.qu,this.Me,this.uf,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.ff)for(var n=this.ff[e],r=0,i=t.length;r<i;++r)if(t[r]in n)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,o,a){var s=2*(r=Math.round(r))+1,l=ci(this.hf,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),u=!this.cf;u&&(this.cf=Gt(s,s));var c,h=this.cf;h.canvas.width!==s||h.canvas.height!==s?(h.canvas.width=s,h.canvas.height=s):u||h.clearRect(0,0,s,s),void 0!==this.cu&&(In(c=[1/0,1/0,-1/0,-1/0],t),mn(c,e*(this.cu+r),c));var f,p=Cb(r);function d(t,e){for(var n=h.getImageData(0,0,s,s).data,i=0,l=p.length;i<l;i++)if(n[p[i]]>0){if(!a||f!==db&&f!==vb||-1!==a.indexOf(t)){var u=(p[i]-3)/4,c=r-u%s,d=r-(u/s|0),g=o(t,e,c*c+d*d);if(g)return g}h.clearRect(0,0,s,s);break}}var g,m,v,y,b,w=Object.keys(this.ff).map(Number);for(w.sort(i),g=w.length-1;g>=0;--g){var x=w[g].toString();for(v=this.ff[x],m=Tb.length-1;m>=0;--m)if(void 0!==(y=v[f=Tb[m]])&&(b=y.executeHitDetection(h,l,n,d,c)))return b}},t.prototype.getClipCoords=function(t){var e=this.Gu;if(!e)return null;var n=e[0],r=e[1],i=e[2],o=e[3],a=[n,r,n,o,i,o,i,r];return Wo(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return V(this.ff)},t.prototype.execute=function(t,e,n,r,o,a,s){var l=Object.keys(this.ff).map(Number);l.sort(i),this.Gu&&(t.save(),this.clip(t,n));var u,c,h,f,p,d,g=a||Tb;for(s&&l.reverse(),u=0,c=l.length;u<c;++u){var m=l[u].toString();for(p=this.ff[m],h=0,f=g.length;h<f;++h)void 0!==(d=p[g[h]])&&d.execute(t,e,n,r,o,s)}this.Gu&&t.restore()},t}(),Pb={};function Cb(t){if(void 0!==Pb[t])return Pb[t];for(var e=2*t+1,n=t*t,r=new Array(n+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var a=i*i+o*o;if(a>n)break;var s=r[a];s||(s=[],r[a]=s),s.push(4*((t+i)*e+(t+o))+3),i>0&&s.push(4*((t-i)*e+(t+o))+3),o>0&&(s.push(4*((t+i)*e+(t-o))+3),i>0&&s.push(4*((t-i)*e+(t-o))+3))}for(var l=[],u=(i=0,r.length);i<u;++i)r[i]&&l.push.apply(l,r[i]);return Pb[t]=l,l}var Ib=Ob,Ab=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lb=function(t){function e(e,n,r,i,o,a,s){var l=t.call(this)||this;return l.vf=e,l.Me=n,l.Rt=r,l.Vt=i,l.Qu=o,l.df=a,l.pf=s,l.yf=null,l.mf=null,l.bf=null,l.wf=null,l.gf=null,l.eo=null,l.kf=0,l.xf=0,l.Sf=0,l._f=0,l.Mf=0,l.jf=0,l.Of=!1,l.Af=0,l.Tf=[0,0],l.Ef=0,l.Ho="",l.Tu=0,l.Eu=0,l.Ru=!1,l.Cu=0,l.Rf=[0,0],l.Iu=null,l.Pu=null,l.Du=null,l.Ju=[],l.Cf=[1,0,0,1,0,0],l}return Ab(e,t),e.prototype.If=function(t,e,n,r){if(this.eo){var i=Wo(t,e,n,r,this.Vt,this.Ju),o=this.vf,a=this.Cf,s=o.globalAlpha;1!=this._f&&(o.globalAlpha=s*this._f);var l=this.Af;this.Of&&(l+=this.Qu);for(var u=0,c=i.length;u<c;u+=2){var h=i[u]-this.kf,f=i[u+1]-this.xf;if(0!==l||1!=this.Tf[0]||1!=this.Tf[1]){var p=h+this.kf,d=f+this.xf;ci(a,p,d,1,1,l,-p,-d),o.setTransform.apply(o,a),o.translate(p,d),o.scale(this.Tf[0],this.Tf[1]),o.drawImage(this.eo,this.Mf,this.jf,this.Ef,this.Sf,-this.kf,-this.xf,this.Ef,this.Sf),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.eo,this.Mf,this.jf,this.Ef,this.Sf,h,f,this.Ef,this.Sf)}1!=this._f&&(o.globalAlpha=s)}},e.prototype.Pf=function(t,e,n,r){if(this.Du&&""!==this.Ho){this.Iu&&this.Df(this.Iu),this.Pu&&this.Nf(this.Pu),this.Lf(this.Du);var i=Wo(t,e,n,r,this.Vt,this.Ju),o=this.vf,a=this.Cu;for(this.Ru&&(a+=this.Qu);e<n;e+=r){var s=i[e]+this.Tu,l=i[e+1]+this.Eu;if(0!==a||1!=this.Rf[0]||1!=this.Rf[1]){var u=ci(this.Cf,s,l,1,1,a,-s,-l);o.setTransform.apply(o,u),o.translate(s,l),o.scale(this.Rf[0],this.Rf[1]),this.Pu&&o.strokeText(this.Ho,0,0),this.Iu&&o.fillText(this.Ho,0,0),o.setTransform(1,0,0,1,0,0)}else this.Pu&&o.strokeText(this.Ho,s,l),this.Iu&&o.fillText(this.Ho,s,l)}}},e.prototype.zf=function(t,e,n,r,i){var o=this.vf,a=Wo(t,e,n,r,this.Vt,this.Ju);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return i&&o.closePath(),n},e.prototype.Ff=function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.zf(t,e,n[i],r,!0);return e},e.prototype.drawCircle=function(t){if(Kn(this.Rt,t.getExtent())){if(this.wf||this.gf){this.wf&&this.Df(this.wf),this.gf&&this.Nf(this.gf);var e=na(t,this.Vt,this.Ju),n=e[2]-e[0],r=e[3]-e[1],i=Math.sqrt(n*n+r*r),o=this.vf;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.wf&&o.fill(),this.gf&&o.stroke()}""!==this.Ho&&this.Pf(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.Vt=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case tr.POINT:this.drawPoint(t);break;case tr.LINE_STRING:this.drawLineString(t);break;case tr.POLYGON:this.drawPolygon(t);break;case tr.MULTI_POINT:this.drawMultiPoint(t);break;case tr.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case tr.MULTI_POLYGON:this.drawMultiPolygon(t);break;case tr.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case tr.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&Kn(this.Rt,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.df&&(t=t.simplifyTransformed(this.df,this.pf));var e=t.getFlatCoordinates(),n=t.getStride();this.eo&&this.If(e,0,e.length,n),""!==this.Ho&&this.Pf(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.df&&(t=t.simplifyTransformed(this.df,this.pf));var e=t.getFlatCoordinates(),n=t.getStride();this.eo&&this.If(e,0,e.length,n),""!==this.Ho&&this.Pf(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.df&&(t=t.simplifyTransformed(this.df,this.pf)),Kn(this.Rt,t.getExtent())){if(this.gf){this.Nf(this.gf);var e=this.vf,n=t.getFlatCoordinates();e.beginPath(),this.zf(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.Ho){var r=t.getFlatMidpoint();this.Pf(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.df&&(t=t.simplifyTransformed(this.df,this.pf));var e=t.getExtent();if(Kn(this.Rt,e)){if(this.gf){this.Nf(this.gf);var n=this.vf,r=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,l=o.length;s<l;++s)i=this.zf(r,i,o[s],a,!1);n.stroke()}if(""!==this.Ho){var u=t.getFlatMidpoints();this.Pf(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(this.df&&(t=t.simplifyTransformed(this.df,this.pf)),Kn(this.Rt,t.getExtent())){if(this.gf||this.wf){this.wf&&this.Df(this.wf),this.gf&&this.Nf(this.gf);var e=this.vf;e.beginPath(),this.Ff(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.wf&&e.fill(),this.gf&&e.stroke()}if(""!==this.Ho){var n=t.getFlatInteriorPoint();this.Pf(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.df&&(t=t.simplifyTransformed(this.df,this.pf)),Kn(this.Rt,t.getExtent())){if(this.gf||this.wf){this.wf&&this.Df(this.wf),this.gf&&this.Nf(this.gf);var e=this.vf,n=t.getOrientedFlatCoordinates(),r=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var l=i[a];r=this.Ff(n,r,l,o)}this.wf&&e.fill(),this.gf&&e.stroke()}if(""!==this.Ho){var u=t.getFlatInteriorPoints();this.Pf(u,0,u.length,2)}}},e.prototype.Df=function(t){var e=this.vf,n=this.yf;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.yf={fillStyle:t.fillStyle})},e.prototype.Nf=function(t){var e=this.vf,n=this.mf;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(c(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.mf={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.Lf=function(t){var e=this.vf,n=this.bf,r=t.textAlign?t.textAlign:Ci;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.bf={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var n=this;if(t){var r=t.getColor();this.wf={fillStyle:Pt(r||ki)}}else this.wf=null;if(e){var i=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),l=e.getLineJoin(),u=e.getWidth(),c=e.getMiterLimit(),h=a||Mi;this.gf={lineCap:void 0!==o?o:Ei,lineDash:1===this.Me?h:h.map((function(t){return t*n.Me})),lineDashOffset:(s||0)*this.Me,lineJoin:void 0!==l?l:Ti,lineWidth:(void 0!==u?u:1)*this.Me,miterLimit:void 0!==c?c:Oi,strokeStyle:Pt(i||Pi)}}else this.gf=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var n=t.getAnchor(),r=t.getOrigin();this.eo=t.getImage(this.Me),this.kf=n[0]*this.Me,this.xf=n[1]*this.Me,this.Sf=e[1]*this.Me,this._f=t.getOpacity(),this.Mf=r[0],this.jf=r[1],this.Of=t.getRotateWithView(),this.Af=t.getRotation(),this.Tf=t.getScaleArray(),this.Ef=e[0]*this.Me}else this.eo=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.Iu={fillStyle:Pt(n||ki)}}else this.Iu=null;var r=t.getStroke();if(r){var i=r.getColor(),o=r.getLineCap(),a=r.getLineDash(),s=r.getLineDashOffset(),l=r.getLineJoin(),u=r.getWidth(),c=r.getMiterLimit();this.Pu={lineCap:void 0!==o?o:Ei,lineDash:a||Mi,lineDashOffset:s||0,lineJoin:void 0!==l?l:Ti,lineWidth:void 0!==u?u:1,miterLimit:void 0!==c?c:Oi,strokeStyle:Pt(i||Pi)}}else this.Pu=null;var h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),m=t.getScaleArray(),v=t.getText(),y=t.getTextAlign(),b=t.getTextBaseline();this.Du={font:void 0!==h?h:_i,textAlign:void 0!==y?y:Ci,textBaseline:void 0!==b?b:Ii},this.Ho=void 0!==v?v:"",this.Tu=void 0!==f?this.Me*f:0,this.Eu=void 0!==p?this.Me*p:0,this.Ru=void 0!==d&&d,this.Cu=void 0!==g?g:0,this.Rf=[this.Me*m[0],this.Me*m[1]]}else this.Ho=""},e}(Ky),Rb=.5;function jb(t,e,n,r,o,a,s){var l=Gt(t[0]*Rb,t[1]*Rb);l.imageSmoothingEnabled=!1;for(var u=l.canvas,c=new Lb(l,Rb,o,null,s),h=n.length,f=Math.floor(16777215/h),p={},d=1;d<=h;++d){var g=n[d-1],m=g.getStyleFunction()||r;if(r){var v=m(g,a);if(v){Array.isArray(v)||(v=[v]);for(var y="#"+("000000"+(d*f).toString(16)).slice(-6),b=0,w=v.length;b<w;++b){var x=v[b],S=x.getGeometryFunction()(g);if(S&&Kn(o,S.getExtent())){var _=x.clone(),k=_.getFill();k&&k.setColor(y);var E=_.getStroke();E&&(E.setColor(y),E.setLineDash(null)),_.setText(void 0);var M=x.getImage();if(M&&0!==M.getOpacity()){var T=M.getImageSize();if(!T)continue;var O=Gt(T[0],T[1],void 0,{alpha:!1}),P=O.canvas;O.fillStyle=y,O.fillRect(0,0,P.width,P.height),_.setImage(new df({img:P,imgSize:T,anchor:M.getAnchor(),anchorXUnits:Xh,anchorYUnits:Xh,offset:M.getOrigin(),opacity:1,size:M.getSize(),scale:M.getScale(),rotation:M.getRotation(),rotateWithView:M.getRotateWithView()}))}var C=_.getZIndex()||0;(L=p[C])||(L={},p[C]=L,L[tr.POLYGON]=[],L[tr.CIRCLE]=[],L[tr.LINE_STRING]=[],L[tr.POINT]=[]),L[S.getType().replace("Multi","")].push(S,_)}}}}}for(var I=Object.keys(p).map(Number).sort(i),A=(d=0,I.length);d<A;++d){var L=p[I[d]];for(var R in L){var j=L[R];for(b=0,w=j.length;b<w;b+=2){c.setStyle(j[b+1]);for(var N=0,$=e.length;N<$;++N)c.setTransform(e[N]),c.drawGeometry(j[b])}}}return l.getImageData(0,0,u.width,u.height)}function Nb(t,e,n){var r=[];if(n){var i=Math.floor(Math.round(t[0])*Rb),o=Math.floor(Math.round(t[1])*Rb),a=4*(x(i,0,n.width-1)+x(o,0,n.height-1)*n.width),s=n.data[a],l=n.data[a+1],u=n.data[a+2]+256*(l+256*s),c=Math.floor(16777215/e.length);u&&u%c==0&&r.push(e[u/c-1])}return r}var $b={Point:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();if(i&&(t=i,o=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var l=t.getBuilder(n.getZIndex(),db);l.setImageStyle(a,o),l.drawPoint(e,r)}if(s&&s.getText()){var u=t.getBuilder(n.getZIndex(),vb);u.setTextStyle(s,o),u.drawText(e,r)}},LineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),gb);a.setFillStrokeStyle(null,o),a.drawLineString(e,r)}var s=n.getText();if(s&&s.getText()){var l=(i||t).getBuilder(n.getZIndex(),vb);l.setTextStyle(s),l.drawText(e,r)}},Polygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),mb);s.setFillStrokeStyle(o,a),s.drawPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),vb);u.setTextStyle(l),u.drawText(e,r)}},MultiPoint:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();if(i&&(t=i,o=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var l=t.getBuilder(n.getZIndex(),db);l.setImageStyle(a,o),l.drawMultiPoint(e,r)}if(s&&s.getText()){var u=(i||t).getBuilder(n.getZIndex(),vb);u.setTextStyle(s,o),u.drawText(e,r)}},MultiLineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),gb);a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,r)}var s=n.getText();if(s&&s.getText()){var l=(i||t).getBuilder(n.getZIndex(),vb);l.setTextStyle(s),l.drawText(e,r)}},MultiPolygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(a||o){var s=t.getBuilder(n.getZIndex(),mb);s.setFillStrokeStyle(o,a),s.drawMultiPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),vb);u.setTextStyle(l),u.drawText(e,r)}},GeometryCollection:function(t,e,n,r,i){var o,a,s=e.getGeometriesArray();for(o=0,a=s.length;o<a;++o)(0,$b[s[o].getType()])(t,s[o],n,r,i)},Circle:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),fb);s.setFillStrokeStyle(o,a),s.drawCircle(e,r)}var l=n.getText();if(l&&l.getText()){var u=(i||t).getBuilder(n.getZIndex(),vb);u.setTextStyle(l),u.drawText(e,r)}}};function Fb(t,e){return parseInt(g(t),10)-parseInt(g(e),10)}function Db(t,e){var n=Gb(t,e);return n*n}function Gb(t,e){return.5*t/e}function Ub(t,e,n,r,i,o,a){var s=!1,l=n.getImage();if(l){var u=l.getImageState();2==u||3==u?l.unlistenImageChange(i):(0==u&&l.load(),u=l.getImageState(),l.listenImageChange(i),s=!0)}return function(t,e,n,r,i,o){var a=n.getGeometryFunction()(e);if(a){var s=a.simplifyTransformed(r,i);n.getRenderer()?Bb(t,s,n,e):(0,$b[s.getType()])(t,s,n,e,o)}}(t,e,n,r,o,a),s}function Bb(t,e,n,r){if(e.getType()!=tr.GEOMETRY_COLLECTION)t.getBuilder(n.getZIndex(),pb).drawCustom(e,r,n.getRenderer());else for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)Bb(t,i[o],n,r)}var zb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vb=function(t){function e(e){var n=t.call(this,e)||this;return n.Uf=n.Bf.bind(n),n.Gf,n.qf=!1,n.Vf=null,n.Zf=null,n.Wf=-1,n.$f=NaN,n.Hf=[1/0,1/0,-1/0,-1/0],n.Kf=[1/0,1/0,-1/0,-1/0],n.Xf,n.Yf=null,n.Jf=null,n.Qf=null,n.tc=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return zb(e,t),e.prototype.useContainer=function(e,n,r){r<1&&(e=null),t.prototype.useContainer.call(this,e,n,r)},e.prototype.renderWorlds=function(t,e,n){var r=e.extent,i=e.viewState,o=i.center,a=i.resolution,s=i.projection,l=i.rotation,u=s.getExtent(),c=this.getLayer().getSource(),h=e.pixelRatio,f=e.viewHints,p=!(f[0]||f[1]),d=this.context,g=Math.round(e.size[0]*h),m=Math.round(e.size[1]*h),v=c.getWrapX()&&s.canWrapX(),y=v?Wn(u):null,b=v?Math.ceil((r[2]-u[2])/y)+1:1,w=v?Math.floor((r[0]-u[0])/y):0;do{var x=this.getRenderTransform(o,a,l,h,g,m,w*y);t.execute(d,1,x,l,p,void 0,n)}while(++w<b)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var n=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];li(this.pixelTransform,1/n,1/n),hi(this.inversePixelTransform,this.pixelTransform);var i=pi(this.pixelTransform);this.useContainer(e,i,r.opacity);var o=this.context,a=o.canvas,s=this.tc,l=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!l||l.isEmpty()))return!this.containerReused&&a.width>0&&(a.width=0),this.container;var u=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);a.width!=u||a.height!=c?(a.width=u,a.height=c,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,u,c),this.preRender(o,t);var h=t.viewState,f=h.projection,p=!1,d=!0;if(r.extent&&this.clipping){var g=Vr(r.extent,f);(p=(d=Kn(g,t.extent))&&!wn(g,t.extent))&&this.clipUnrotated(o,t,g)}d&&this.renderWorlds(s,t),p&&o.restore(),this.postRender(o,t);var m=r.opacity,v=this.container;return m!==parseFloat(v.style.opacity)&&(v.style.opacity=1===m?"":String(m)),this.Xf!==h.rotation&&(this.Xf=h.rotation,this.Vf=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.Vf&&!this.Gf){var n=[this.context.canvas.width,this.context.canvas.height];oi(this.pixelTransform,n);var r=this.Yf,i=this.$f,o=this.Xf,a=this.Jf,s=this.Kf,l=this.getLayer(),u=[],c=n[0]*Rb,h=n[1]*Rb;u.push(this.getRenderTransform(r,i,o,Rb,c,h,0).slice());var f=l.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!wn(p,s)){for(var d=s[0],g=Wn(p),m=0,v=void 0;d<p[0];)v=g*--m,u.push(this.getRenderTransform(r,i,o,Rb,c,h,v).slice()),d+=g;for(m=0,d=s[2];d>p[2];)v=g*++m,u.push(this.getRenderTransform(r,i,o,Rb,c,h,v).slice()),d-=g}this.Vf=jb(n,u,this.Zf,l.getStyleFunction(),s,i,o)}e(Nb(t,this.Zf,this.Vf))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=this;if(this.tc){var a,s=e.viewState.resolution,l=e.viewState.rotation,u=this.getLayer(),c={},h=function(t,e,n){var o=g(t),a=c[o];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return c[o]=!0,i.splice(i.lastIndexOf(a),1),r(t,u,e);a.geometry=e,a.distanceSq=n}}else{if(0===n)return c[o]=!0,r(t,u,e);i.push(c[o]={feature:t,layer:u,geometry:e,distanceSq:n,callback:r})}},f=[this.tc];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some((function(r){return a=r.forEachFeatureAtCoordinate(t,s,l,n,h,r===o.declutterExecutorGroup?e.declutterTree.all().map((function(t){return t.value})):null)})),a}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.tc&&t.changed()},e.prototype.Bf=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource();if(!n)return!1;var r=t.viewHints[0],i=t.viewHints[1],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.qf&&!o&&r||!a&&i)return this.Gf=!0,!0;this.Gf=!1;var s=t.extent,l=t.viewState,u=l.projection,h=l.resolution,f=t.pixelRatio,p=e.getRevision(),d=e.getRenderBuffer(),g=e.getRenderOrder();void 0===g&&(g=Fb);var m=l.center.slice(),v=mn(s,d*h),y=v.slice(),b=[v.slice()],w=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!wn(w,t.extent)){var x=Wn(w),S=Math.max(Wn(v)/2,x);v[0]=w[0]-S,v[2]=w[2]+S,wr(m,u);var _=Qn(b[0],u);_[0]<w[0]&&_[2]<w[2]?b.push([_[0]+x,_[1],_[2]+x,_[3]]):_[0]>w[0]&&_[2]>w[2]&&b.push([_[0]-x,_[1],_[2]-x,_[3]])}if(!this.qf&&this.$f==h&&this.Wf==p&&this.Qf==g&&wn(this.Kf,v))return c(this.Hf,y)||(this.Vf=null,this.Hf=y),this.Yf=m,this.replayGroupChanged=!1,!0;this.tc=null,this.qf=!1;var k,E=new sb(Gb(h,f),v,h,f);this.getLayer().getDeclutter()&&(k=new sb(Gb(h,f),v,h,f));var M,T=Gr();if(T){for(var O=0,P=b.length;O<P;++O){var C=zr(b[O],u);n.loadFeatures(C,qr(h,u),T)}M=Rr(T,u)}else for(O=0,P=b.length;O<P;++O)n.loadFeatures(b[O],h,u);var I=Db(h,f),A=function(t){var n,r=t.getStyleFunction()||e.getStyleFunction();if(r&&(n=r(t,h)),n){var i=this.renderFeature(t,I,n,E,M,k);this.qf=this.qf||i}}.bind(this),L=zr(v,u),R=n.getFeaturesInExtent(L);for(g&&R.sort(g),O=0,P=R.length;O<P;++O)A(R[O]);this.Zf=R;var j=E.finish(),N=new Ib(v,h,f,n.getOverlaps(),j,e.getRenderBuffer());return k&&(this.declutterExecutorGroup=new Ib(v,h,f,n.getOverlaps(),k.finish(),e.getRenderBuffer())),this.$f=h,this.Wf=p,this.Qf=g,this.Hf=y,this.Kf=v,this.Yf=m,this.Jf=u,this.tc=N,this.Vf=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,r,i,o){if(!n)return!1;var a=!1;if(Array.isArray(n))for(var s=0,l=n.length;s<l;++s)a=Ub(r,t,n[s],e,this.Uf,i,o)||a;else a=Ub(r,t,n,e,this.Uf,i,o);return a},e}(hb),qb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hb=function(t){function e(e){return t.call(this,e)||this}return qb(e,t),e.prototype.createRenderer=function(){return new Vb(this)},e}(Uy),Wb=function(){function t(t){this.nc=new Fy(t),this.ec={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.nc.insert(n),this.ec[g(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++){var o=t[r],a=e[r],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=s,this.ec[g(a)]=s}this.nc.load(n)},t.prototype.remove=function(t){var e=g(t),n=this.ec[e];return delete this.ec[e],null!==this.nc.remove(n)},t.prototype.update=function(t,e){var n=this.ec[g(e)];On([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.nc.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.nc.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.rc(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.rc(this.getInExtent(t),e)},t.prototype.rc=function(t,e){for(var n,r=0,i=t.length;r<i;r++)if(n=e(t[r]))return n;return n},t.prototype.isEmpty=function(){return V(this.ec)},t.prototype.clear=function(){this.nc.clear(),this.ec={}},t.prototype.getExtent=function(t){var e=this.nc.toJSON();return kn(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.nc.load(t.nc.all()),t.ec)this.ec[e]=t.ec[e]},t}(),Kb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Yb(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Xb=function(t){function e(e){var n=t.call(this)||this;return n.projection=Mr(e.projection),n.ic=Yb(e.attributions),n.oc=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.B=void 0!==e.state?e.state:xe,n.ac=void 0!==e.wrapX&&e.wrapX,n}return Kb(e,t),e.prototype.getAttributions=function(){return this.ic},e.prototype.getAttributionsCollapsible=function(){return this.oc},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return p()},e.prototype.getState=function(){return this.B},e.prototype.getWrapX=function(){return this.ac},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.ic=Yb(t),this.changed()},e.prototype.setState=function(t){this.B=t,this.changed()},e}(pt),Zb="addfeature",Jb="changefeature",Qb="clear",tw="removefeature";function ew(t,e){return[[-1/0,-1/0,1/0,1/0]]}var nw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rw=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.feature=n,i.features=r,i}return nw(e,t),e}(R),iw=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{attributions:r.attributions,projection:void 0,state:xe,wrapX:void 0===r.wrapX||r.wrapX})||this).on,n.once,n.un,n.oi=D,n.sc=r.format,n.uf=void 0===r.overlaps||r.overlaps,n.uc=r.url,void 0!==r.loader?n.oi=r.loader:void 0!==n.uc&&(w(n.sc,7),n.oi=ll(n.uc,n.sc)),n.fc=void 0!==r.strategy?r.strategy:ew;var i,o,a=void 0===r.useSpatialIndex||r.useSpatialIndex;return n.cc=a?new Wb:null,n.hc=new Wb,n.lc=0,n.vc={},n.dc={},n.yc={},n.mc={},n.bc=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(i=r.features).getArray()),a||void 0!==i||(i=new bt(o)),void 0!==o&&n.addFeaturesInternal(o),void 0!==i&&n.wc(i),n}return nw(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=g(t);if(this.gc(e,t)){this.kc(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();this.cc&&this.cc.insert(r,t)}else this.vc[e]=t;this.dispatchEvent(new rw(Zb,t))}else this.bc&&this.bc.remove(t)},e.prototype.kc=function(t,e){this.mc[t]=[it(e,W,this.xc,this),it(e,j,this.xc,this)]},e.prototype.gc=function(t,e){var n=!0,r=e.getId();return void 0!==r&&(r.toString()in this.dc?n=!1:this.dc[r.toString()]=e),n&&(w(!(t in this.yc),30),this.yc[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],r=[],i=0,o=t.length;i<o;i++){var a=g(l=t[i]);this.gc(a,l)&&n.push(l)}i=0;for(var s=n.length;i<s;i++){var l;a=g(l=n[i]),this.kc(a,l);var u=l.getGeometry();if(u){var c=u.getExtent();e.push(c),r.push(l)}else this.vc[a]=l}this.cc&&this.cc.load(e,r),i=0;for(var h=n.length;i<h;i++)this.dispatchEvent(new rw(Zb,n[i]))},e.prototype.wc=function(t){var e=!1;this.addEventListener(Zb,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(tw,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(dt,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(gt,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.bc=t},e.prototype.clear=function(t){if(t){for(var e in this.mc)this.mc[e].forEach(at);this.bc||(this.mc={},this.dc={},this.yc={})}else if(this.cc)for(var n in this.cc.forEach(this.removeFeatureInternal.bind(this)),this.vc)this.removeFeatureInternal(this.vc[n]);this.bc&&this.bc.clear(),this.cc&&this.cc.clear(),this.vc={};var r=new rw(Qb);this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.cc)return this.cc.forEach(t);this.bc&&this.bc.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.cc)return this.cc.forEachInExtent(t,e);this.bc&&this.bc.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var r=e(n);if(r)return r}}))},e.prototype.getFeaturesCollection=function(){return this.bc},e.prototype.getFeatures=function(){var t;return this.bc?t=this.bc.getArray().slice(0):this.cc&&(t=this.cc.getAll(),V(this.vc)||l(t,z(this.vc))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.cc?this.cc.getInExtent(t):this.bc?this.bc.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],r=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||$;return this.cc.forEachInExtent(s,(function(t){if(l(t)){var e=t.getGeometry(),u=a;if((a=e.closestPointXY(n,r,o,a))<u){i=t;var c=Math.sqrt(a);s[0]=n-c,s[1]=r-c,s[2]=n+c,s[3]=r+c}}})),i},e.prototype.getExtent=function(t){return this.cc.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.dc[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.yc[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.sc},e.prototype.getOverlaps=function(){return this.uf},e.prototype.getUrl=function(){return this.uc},e.prototype.xc=function(t){var e=t.target,n=g(e),r=e.getGeometry();if(r){var i=r.getExtent();n in this.vc?(delete this.vc[n],this.cc&&this.cc.insert(i,e)):this.cc&&this.cc.update(i,e)}else n in this.vc||(this.cc&&this.cc.remove(e),this.vc[n]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.dc[a]!==e&&(this.Sc(e),this.dc[a]=e)}else this.Sc(e),this.yc[n]=e;this.changed(),this.dispatchEvent(new rw(Jb,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.dc:g(t)in this.yc},e.prototype.isEmpty=function(){return this.cc.isEmpty()&&V(this.vc)},e.prototype.loadFeatures=function(t,e,n){for(var r=this.hc,i=this.fc(t,e,n),o=function(t,o){var s=i[t];r.forEachInExtent(s,(function(t){return wn(t.extent,s)}))||(++a.lc,a.dispatchEvent(new rw("featuresloadstart")),a.oi.call(a,s,e,n,function(t){--this.lc,this.dispatchEvent(new rw("featuresloadend",void 0,t))}.bind(a),function(){--this.lc,this.dispatchEvent(new rw("featuresloaderror"))}.bind(a)),r.insert(s,{extent:s.slice()}))},a=this,s=0,l=i.length;s<l;++s)o(s);this.loading=!(this.oi.length<4)&&this.lc>0},e.prototype.refresh=function(){this.clear(!0),this.hc.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.hc;n.forEachInExtent(t,(function(n){if(On(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=g(t);e in this.vc?delete this.vc[e]:this.cc&&this.cc.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=g(t);this.mc[e].forEach(at),delete this.mc[e];var n=t.getId();void 0!==n&&delete this.dc[n.toString()],delete this.yc[e],this.dispatchEvent(new rw(tw,t))},e.prototype.Sc=function(t){var e=!1;for(var n in this.dc)if(this.dc[n]===t){delete this.dc[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.oi=t},e.prototype.setUrl=function(t){w(this.sc,7),this.uc=t,this.setLoader(ll(t,this.sc))},e}(Xb),ow=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aw="Point",sw="LineString",lw="Polygon",uw="Circle",cw="drawstart",hw=function(t){function e(e,n){var r=t.call(this,e)||this;return r.feature=n,r}return ow(e,t),e}(R),fw=function(t){function e(e){var n=this,r=e;r.stopDown||(r.stopDown=F),(n=t.call(this,r)||this).on,n.once,n.un,n._c=!1,n.Mc=null,n.jc,n.Oc,n.Ac,n.Tc=!1,n.jt=e.source?e.source:null,n.Ec=e.features?e.features:null,n.Rc=e.snapTolerance?e.snapTolerance:12,n.ya=e.type,n.Cc=function(t){switch(t){case tr.POINT:case tr.MULTI_POINT:return aw;case tr.LINE_STRING:case tr.MULTI_LINE_STRING:return sw;case tr.POLYGON:case tr.MULTI_POLYGON:return lw;case tr.CIRCLE:return uw;default:throw new Error("Invalid type: "+t)}}(n.ya),n.Ic=!!e.stopClick,n.Pc=e.minPoints?e.minPoints:n.Cc===lw?3:2,n.Dc=n.Cc===uw?2:e.maxPoints?e.maxPoints:1/0,n.Nc=e.finishCondition?e.finishCondition:$;var i,o=e.geometryFunction;if(!o){var a,s=n.Cc;s===uw?o=function(t,e,n){var r=e||new ny([NaN,NaN]),i=Br(t[0],n),o=mr(i,Br(t[t.length-1],n));r.setCenterAndRadius(i,Math.sqrt(o));var a=Gr();return a&&r.transform(n,a),r}:(s===aw?a=Ia:s===sw?a=wl:s===lw&&(a=Ja),o=function(t,e,n){return e?s===lw?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])]):e.setCoordinates([]):e.setCoordinates(t):e=new a(t),e})}return n.$o=o,n.Lc=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,n.zc=null,n.Fc=null,n.Uc=null,n.Bc=null,n.Gc=null,n.qc=null,n.Vc=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,n.Zc=new Hb({source:new iw({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=Ef(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),n.fi=e.geometryName,n.Qs=e.condition?e.condition:Ys,n.Wc,e.freehand?n.Wc=qs:n.Wc=e.freehandCondition?e.freehandCondition:Xs,n.addChangeListener(fy,n.$c),n}return ow(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.$c()},e.prototype.getOverlay=function(){return this.Zc},e.prototype.handleEvent=function(e){e.originalEvent.type===Y&&e.originalEvent.preventDefault(),this.Tc=this.Cc!==aw&&this.Wc(e);var n=e.type===yo.POINTERMOVE,r=!0;return!this.Tc&&this.Oc&&e.type===yo.POINTERDRAG&&(Date.now()-this.Oc>=this.Lc?(this.Mc=e.pixel,this._c=!this.Tc,n=!0):this.Oc=void 0,this._c&&void 0!==this.jc&&(clearTimeout(this.jc),this.jc=void 0)),this.Tc&&e.type===yo.POINTERDRAG&&null!==this.Fc?(this.Hc(e.coordinate),r=!1):this.Tc&&e.type===yo.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===yo.POINTERMOVE)&&this.Tc?(this.Tn(e),this._c&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===yo.POINTERDRAG&&void 0===this.jc)&&this.Tn(e):e.type===yo.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,e)&&r},e.prototype.handleDownEvent=function(t){return this._c=!this.Tc,this.Tc?(this.Mc=t.pixel,this.zc||this.Kc(t.coordinate),!0):this.Qs(t)?(this.Oc=Date.now(),this.jc=setTimeout(function(){this.Tn(new vo(yo.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.Lc),this.Mc=t.pixel,!0):(this.Oc=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.jc&&(clearTimeout(this.jc),this.jc=void 0),this.Tn(t),this._c){var n=!this.zc;n&&this.Kc(t.coordinate),!n&&this.Tc?this.finishDrawing():this.Tc||n&&this.Cc!==aw||(this.Xc(t.pixel)?this.Nc(t)&&this.finishDrawing():this.Hc(t.coordinate)),e=!1}else this.Tc&&this.abortDrawing();return!e&&this.Ic&&t.preventDefault(),e},e.prototype.Tn=function(t){if(this.Ac=t.originalEvent.pointerType,this.Mc&&(!this.Tc&&this._c||this.Tc&&!this._c)){var e=this.Mc,n=t.pixel,r=e[0]-n[0],i=e[1]-n[1],o=r*r+i*i;if(this._c=this.Tc?o>this.Vc:o<=this.Vc,!this._c)return}this.zc?this.Yc(t.coordinate):this.Jc(t.coordinate.slice())},e.prototype.Xc=function(t){var e=!1;if(this.Fc){var n=!1,r=[this.zc],i=this.Cc;if(i===aw)e=!0;else if(i===uw)e=2===this.Bc.length;else if(i===sw)n=this.Bc.length>this.Pc;else if(i===lw){var o=this.Bc;n=o[0].length>this.Pc,r=[o[0][0],o[0][o[0].length-2]]}if(n)for(var a=this.getMap(),s=0,l=r.length;s<l;s++){var u=r[s],c=a.getPixelFromCoordinate(u),h=t[0]-c[0],f=t[1]-c[1],p=this.Tc?1:this.Rc;if(e=Math.sqrt(h*h+f*f)<=p){this.zc=u;break}}}return e},e.prototype.Jc=function(t){this.Uc?this.Uc.getGeometry().setCoordinates(t):(this.Uc=new nl(new Ia(t)),this.Qc())},e.prototype.th=function(t){this.Gc||(this.Gc=new nl);var e=t.getLinearRing(0),n=this.Gc.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new wl(e.getFlatCoordinates(),e.getLayout()),this.Gc.setGeometry(n))},e.prototype.Kc=function(t){var e=this.getMap().getView().getProjection();this.zc=t,this.Cc===aw?this.Bc=t.slice():this.Cc===lw?(this.Bc=[[t.slice(),t.slice()]],this.qc=this.Bc[0]):this.Bc=[t.slice(),t.slice()],this.qc&&(this.Gc=new nl(new wl(this.qc)));var n=this.$o(this.Bc,void 0,e);this.Fc=new nl,this.fi&&this.Fc.setGeometryName(this.fi),this.Fc.setGeometry(n),this.Qc(),this.dispatchEvent(new hw(cw,this.Fc))},e.prototype.Yc=function(t){var e,n,r=this.getMap(),i=this.Fc.getGeometry(),o=r.getView().getProjection();this.Cc===aw?n=this.Bc:this.Cc===lw?(n=(e=this.Bc[0])[e.length-1],this.Xc(r.getPixelFromCoordinate(t))&&(t=this.zc.slice())):n=(e=this.Bc)[e.length-1],n[0]=t[0],n[1]=t[1],this.$o(this.Bc,i,o),this.Uc&&this.Uc.getGeometry().setCoordinates(t),i.getType()===tr.POLYGON&&this.Cc!==lw?this.th(i):this.qc&&this.Gc.getGeometry().setCoordinates(this.qc),this.Qc()},e.prototype.Hc=function(t){var e,n,r=this.Fc.getGeometry(),i=this.getMap().getView().getProjection(),o=this.Cc;o===sw||o===uw?(this.zc=t.slice(),(n=this.Bc).length>=this.Dc&&(this.Tc?n.pop():e=!0),n.push(t.slice()),this.$o(n,r,i)):o===lw&&((n=this.Bc[0]).length>=this.Dc&&(this.Tc?n.pop():e=!0),n.push(t.slice()),e&&(this.zc=n[0]),this.$o(this.Bc,r,i)),this.Jc(t.slice()),this.Qc(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.Fc){var t,e=this.Fc.getGeometry(),n=this.getMap().getView().getProjection(),r=this.Cc;if(r===sw||r===uw){if((t=this.Bc).splice(-2,1),t.length>=2){this.zc=t[t.length-2].slice();var i=this.zc.slice();t[t.length-1]=i,this.Jc(i)}this.$o(t,e,n),e.getType()===tr.POLYGON&&this.Gc&&this.th(e)}else if(r===lw){(t=this.Bc[0]).splice(-2,1);var o=this.Gc.getGeometry();t.length>=2&&(i=t[t.length-2].slice(),t[t.length-1]=i,this.Jc(i)),o.setCoordinates(t),this.$o(this.Bc,e,n)}1===t.length&&this.abortDrawing(),this.Qc()}},e.prototype.finishDrawing=function(){var t=this.nh();if(t){var e=this.Bc,n=t.getGeometry(),r=this.getMap().getView().getProjection();this.Cc===sw?(e.pop(),this.$o(e,n,r)):this.Cc===lw&&(e[0].pop(),this.$o(e,n,r),e=n.getCoordinates()),this.ya===tr.MULTI_POINT?t.setGeometry(new kl([e])):this.ya===tr.MULTI_LINE_STRING?t.setGeometry(new Sl([e])):this.ya===tr.MULTI_POLYGON&&t.setGeometry(new Tl([e])),this.dispatchEvent(new hw("drawend",t)),this.Ec&&this.Ec.push(t),this.jt&&this.jt.addFeature(t)}},e.prototype.nh=function(){this.zc=null;var t=this.Fc;return this.Fc=null,this.Uc=null,this.Gc=null,this.Zc.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.nh();t&&this.dispatchEvent(new hw("drawabort",t))},e.prototype.appendCoordinates=function(t){var e,n=this.Cc,r=!this.Fc;if(r&&this.Kc(t[0]),n===sw||n===uw)e=this.Bc;else{if(n!==lw)return;e=this.Bc&&this.Bc.length?this.Bc[0]:[]}r&&e.shift(),e.pop();for(var i=0;i<t.length;i++)this.Hc(t[i]);var o=t[t.length-1];this.Hc(o),this.Yc(o)},e.prototype.extend=function(t){var e=t.getGeometry();this.Fc=t,this.Bc=e.getCoordinates();var n=this.Bc[this.Bc.length-1];this.zc=n.slice(),this.Bc.push(n.slice()),this.Uc=new nl(new Ia(n)),this.Qc(),this.dispatchEvent(new hw(cw,this.Fc))},e.prototype.Qc=function(){var t=[];this.Fc&&t.push(this.Fc),this.Gc&&t.push(this.Gc),this.Uc&&t.push(this.Uc);var e=this.Zc.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.$c=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.Zc.setMap(e?t:null)},e}(ky),pw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dw=function(t){function e(e){var n=t.call(this,"extentchanged")||this;return n.extent=e,n}return pw(e,t),e}(R);function gw(){var t=Ef();return function(e,n){return t[tr.POINT]}}function mw(t){return function(e){return gn([t,e])}}function vw(t,e){return t[0]==e[0]?function(n){return gn([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return gn([t,[e[0],n[1]]])}:null}var yw=function(t){function e(e){var n,r=this,i=e||{};return(r=t.call(this,i)||this).on,r.once,r.un,r.Qs=i.condition?i.condition:qs,r.Rt=null,r.eh=null,r.rh=void 0!==i.pixelTolerance?i.pixelTolerance:10,r.ih=!1,r.oh=null,r.ah=null,e||(e={}),r.sh=new Hb({source:new iw({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(n=Ef(),function(t,e){return n[tr.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.uh=new Hb({source:new iw({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:gw(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&r.setExtent(e.extent),r}return pw(e,t),e.prototype.fh=function(t,e){var n=e.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);i.sort((function(t,e){return yr(n,t)-yr(n,e)}));var o=i[0],a=cr(n,o),s=e.getPixelFromCoordinateInternal(a);if(vr(t,s)<=this.rh){var l=e.getPixelFromCoordinateInternal(o[0]),u=e.getPixelFromCoordinateInternal(o[1]),c=mr(s,l),h=mr(s,u),f=Math.sqrt(Math.min(c,h));return this.ih=f<=this.rh,this.ih&&(a=c>h?o[1]:o[0]),a}}return null},e.prototype.Tn=function(t){var e=t.pixel,n=t.map,r=this.fh(e,n);r||(r=n.getCoordinateFromPixelInternal(e)),this.hh(r)},e.prototype.lh=function(t){var e=this.oh;return e?t?e.setGeometry(ts(t)):e.setGeometry(void 0):(e=new nl(t?ts(t):{}),this.oh=e,this.sh.getSource().addFeature(e)),e},e.prototype.hh=function(t){var e=this.ah;return e?e.getGeometry().setCoordinates(t):(e=new nl(new Ia(t)),this.ah=e,this.uh.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.originalEvent||!this.Qs(e)||(e.type!=yo.POINTERMOVE||this.handlingDownUpSequence||this.Tn(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,n=t.map,r=this.getExtentInternal(),i=this.fh(e,n),o=function(t){var e=null,n=null;return t[0]==r[0]?e=r[2]:t[0]==r[2]&&(e=r[0]),t[1]==r[1]?n=r[3]:t[1]==r[3]&&(n=r[1]),null!==e&&null!==n?[e,n]:null};if(i&&r){var a=i[0]==r[0]||i[0]==r[2]?i[0]:null,s=i[1]==r[1]||i[1]==r[3]?i[1]:null;null!==a&&null!==s?this.eh=mw(o(i)):null!==a?this.eh=vw(o([a,r[1]]),o([a,r[3]])):null!==s&&(this.eh=vw(o([r[0],s]),o([r[2],s])))}else i=n.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.eh=mw(i);return!0},e.prototype.handleDragEvent=function(t){if(this.eh){var e=t.coordinate;this.setExtent(this.eh(e)),this.hh(e)}},e.prototype.handleUpEvent=function(t){this.eh=null;var e=this.getExtentInternal();return e&&0!==$n(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.sh.setMap(e),this.uh.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return zr(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.Rt},e.prototype.setExtent=function(t){this.Rt=t||null,this.lh(t),this.dispatchEvent(new dw(this.Rt))},e}(ky),bw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ww=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.dh=function(t){return Ys(t)&&Zs(t)},n.Qs=void 0!==r.condition?r.condition:n.dh,n.Mr=void 0!==r.duration?r.duration:100,n.ph=void 0!==r.pixelDelta?r.pixelDelta:128,n}return bw(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==J){var n=t.originalEvent,r=n.keyCode;if(this.Qs(t)&&(40==r||37==r||39==r||38==r)){var i=t.map.getView(),o=i.getResolution()*this.ph,a=0,s=0;40==r?s=-o:37==r?a=-o:39==r?a=o:s=o;var l=[a,s];dr(l,i.getRotation()),dy(i,l,this.Mr),n.preventDefault(),e=!0}}return!e},e}(my),xw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sw=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.Qs=r.condition?r.condition:Zs,n.zs=r.delta?r.delta:1,n.Mr=void 0!==r.duration?r.duration:100,n}return xw(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==J||t.type==Q){var n=t.originalEvent,r=n.charCode;if(this.Qs(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var i=t.map,o=r=="+".charCodeAt(0)?this.zs:-this.zs;gy(i.getView(),o,void 0,this.Mr),n.preventDefault(),e=!0}}return!e},e}(my);function _w(t){return(_w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var kw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ew=[0,0,0,0],Mw=[],Tw="modifyend",Ow=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.features=n,i.mapBrowserEvent=r,i}return kw(e,t),e}(R);function Pw(t,e){return t.index-e.index}function Cw(t,e,n){var r=e.geometry;if(r.getType()===tr.CIRCLE){var i=r;if(1===e.index){var o=Gr();o&&(i=i.clone().transform(o,n));var a=mr(i.getCenter(),Br(t,n)),s=Math.sqrt(a)-i.getRadius();return s*s}}var l=Br(t,n);return Mw[0]=Br(e.segment[0],n),Mw[1]=Br(e.segment[1],n),yr(l,Mw)}function Iw(t,e,n){var r=e.geometry;if(r.getType()===tr.CIRCLE&&1===e.index){var i=r,o=Gr();return o&&(i=i.clone().transform(o,n)),Ur(i.getClosestPoint(Br(t,n)),n)}var a=Br(t,n);return Mw[0]=Br(e.segment[0],n),Mw[1]=Br(e.segment[1],n),Ur(cr(a,Mw),n)}var Aw=function(t){function e(e){var n,r,i=t.call(this,e)||this;if(i.on,i.once,i.un,i.yh=i.xc.bind(i),i.Qs=e.condition?e.condition:Qs,i.mh=function(t){return Us(t)&&Ks(t)},i.bh=e.deleteCondition?e.deleteCondition:i.mh,i.wh=e.insertVertexCondition?e.insertVertexCondition:qs,i.ah=null,i.gh=null,i.kh=[0,0],i.xh=!1,i.Sh=null,i._h=new Wb,i.rh=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.ih=!1,i.Mh=!1,i.jh=[],i.Zc=new Hb({source:new iw({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(n=Ef(),function(t,e){return n[tr.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.Oh={Point:i.Ah.bind(i),LineString:i.Th.bind(i),LinearRing:i.Th.bind(i),Polygon:i.Eh.bind(i),MultiPoint:i.Rh.bind(i),MultiLineString:i.Ch.bind(i),MultiPolygon:i.Ih.bind(i),Circle:i.Ph.bind(i),GeometryCollection:i.Dh.bind(i)},i.jt=null,i.Nh=null,e.features?r=e.features:e.source&&(i.jt=e.source,r=new bt(i.jt.getFeatures()),i.jt.addEventListener(Zb,i.Lh.bind(i)),i.jt.addEventListener(tw,i.zh.bind(i))),!r)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(i.Nh=e.hitDetection),i.Ec=r,i.Ec.forEach(i.Fh.bind(i)),i.Ec.addEventListener(dt,i.Uh.bind(i)),i.Ec.addEventListener(gt,i.Bh.bind(i)),i.Gh=null,i.zs=[0,0],i.qh=void 0===e.snapToPointer?!i.Nh:e.snapToPointer,i}return kw(e,t),e.prototype.Fh=function(t){var e=t.getGeometry();if(e){var n=this.Oh[e.getType()];n&&n(t,e)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.Vh(this.kh,r),t.addEventListener(W,this.yh)},e.prototype.Zh=function(t,e){if(!this.Sh){this.Sh=new bt;for(var n=this.Sh.getArray(),r=0,i=e.length;r<i;++r)for(var o=e[r],a=0,s=o.length;a<s;++a){var l=o[a].feature;l&&-1===n.indexOf(l)&&this.Sh.push(l)}0===this.Sh.getLength()?this.Sh=null:this.dispatchEvent(new Ow("modifystart",this.Sh,t))}},e.prototype.Wh=function(t){this.$h(t),this.ah&&0===this.Ec.getLength()&&(this.Zc.getSource().removeFeature(this.ah),this.ah=null),t.removeEventListener(W,this.yh)},e.prototype.$h=function(t){var e=this._h,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(var r=n.length-1;r>=0;--r){for(var i=n[r],o=this.jh.length-1;o>=0;--o)this.jh[o][0]===i&&this.jh.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.ah&&!e&&(this.Zc.getSource().removeFeature(this.ah),this.ah=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.Zc.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.Zc},e.prototype.Lh=function(t){t.feature&&this.Ec.push(t.feature)},e.prototype.zh=function(t){t.feature&&this.Ec.remove(t.feature)},e.prototype.Uh=function(t){this.Fh(t.element)},e.prototype.xc=function(t){if(!this.Mh){var e=t.target;this.Wh(e),this.Fh(e)}},e.prototype.Bh=function(t){var e=t.element;this.Wh(e)},e.prototype.Ah=function(t,e){var n=e.getCoordinates(),r={feature:t,geometry:e,segment:[n,n]};this._h.insert(e.getExtent(),r)},e.prototype.Rh=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r){var o=n[r],a={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this._h.insert(e.getExtent(),a)}},e.prototype.Th=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length-1;r<i;++r){var o=n.slice(r,r+2),a={feature:t,geometry:e,index:r,segment:o};this._h.insert(gn(o),a)}},e.prototype.Ch=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[r],index:a,segment:l};this._h.insert(gn(l),u)}},e.prototype.Eh=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[r],index:a,segment:l};this._h.insert(gn(l),u)}},e.prototype.Ih=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u){var h=l.slice(u,u+2),f={feature:t,geometry:e,depth:[a,r],index:u,segment:h};this._h.insert(gn(h),f)}},e.prototype.Ph=function(t,e){var n=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[n,n]},i={feature:t,geometry:e,index:1,segment:[n,n]},o=[r,i];r.featureSegments=o,i.featureSegments=o,this._h.insert(Mn(n),r);var a=e,s=Gr();if(s&&this.getMap()){var l=this.getMap().getView().getProjection();a=es(a=a.clone().transform(s,l)).transform(l,s)}this._h.insert(a.getExtent(),i)},e.prototype.Dh=function(t,e){for(var n=e.getGeometriesArray(),r=0;r<n.length;++r){var i=n[r];(0,this.Oh[i.getType()])(t,i)}},e.prototype.Hh=function(t,e,n){var r=this.ah;return r?r.getGeometry().setCoordinates(t):(r=new nl(new Ia(t)),this.ah=r,this.Zc.getSource().addFeature(r)),r.set("features",e),r.set("geometries",n),r},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.Gh=e,e.map.getView().getInteracting()||e.type!=yo.POINTERMOVE||this.handlingDownUpSequence||this.Tn(e),this.ah&&this.bh(e)&&(n=!(e.type!=yo.SINGLECLICK||!this.xh)||this.removePoint()),e.type==yo.SINGLECLICK&&(this.xh=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.xh=!1,this.Zh(t,this.jh);for(var e=[t.coordinate[0]+this.zs[0],t.coordinate[1]+this.zs[1]],n=[],r=[],i=0,o=this.jh.length;i<o;++i){var a=this.jh[i],s=a[0],l=s.feature;-1===n.indexOf(l)&&n.push(l);var u=s.geometry;-1===r.indexOf(u)&&r.push(u);for(var c=s.depth,h=void 0,f=s.segment,p=a[1];e.length<u.getStride();)e.push(f[p][e.length]);switch(u.getType()){case tr.POINT:h=e,f[0]=e,f[1]=e;break;case tr.MULTI_POINT:(h=u.getCoordinates())[s.index]=e,f[0]=e,f[1]=e;break;case tr.LINE_STRING:(h=u.getCoordinates())[s.index+p]=e,f[p]=e;break;case tr.MULTI_LINE_STRING:case tr.POLYGON:(h=u.getCoordinates())[c[0]][s.index+p]=e,f[p]=e;break;case tr.MULTI_POLYGON:(h=u.getCoordinates())[c[1]][c[0]][s.index+p]=e,f[p]=e;break;case tr.CIRCLE:if(f[0]=e,f[1]=e,0===s.index)this.Mh=!0,u.setCenter(e),this.Mh=!1;else{this.Mh=!0;var d=t.map.getView().getProjection(),g=vr(Br(u.getCenter(),d),Br(e,d)),m=Gr();if(m){var v=u.clone().transform(m,d);v.setRadius(g),g=v.transform(d,m).getRadius()}u.setRadius(g),this.Mh=!1}}h&&this.Kh(u,h)}this.Hh(e,n,r)},e.prototype.handleDownEvent=function(t){if(!this.Qs(t))return!1;var e=t.coordinate;this.Vh(t.pixel,t.map,e),this.jh.length=0,this.Sh=null;var n=this.ah;if(n){var r=t.map.getView().getProjection(),i=[],o=n.getGeometry().getCoordinates(),a=gn([o]),s=this._h.getInExtent(a),l={};s.sort(Pw);for(var u=0,c=s.length;u<c;++u){var h=s[u],f=h.segment,p=g(h.geometry),d=h.depth;if(d&&(p+="-"+d.join("-")),l[p]||(l[p]=new Array(2)),h.geometry.getType()!==tr.CIRCLE||1!==h.index)if(!pr(f[0],o)||l[p][0])if(!pr(f[1],o)||l[p][1])g(f)in this.gh&&!l[p][0]&&!l[p][1]&&this.wh(t)&&i.push(h);else{if((h.geometry.getType()===tr.LINE_STRING||h.geometry.getType()===tr.MULTI_LINE_STRING)&&l[p][0]&&0===l[p][0].index)continue;this.jh.push([h,1]),l[p][1]=h}else this.jh.push([h,0]),l[p][0]=h;else pr(Iw(e,h,r),o)&&!l[p][0]&&(this.jh.push([h,0]),l[p][0]=h)}i.length&&this.Zh(t,[i]);for(var m=i.length-1;m>=0;--m)this.Xh(i[m],o)}return!!this.ah},e.prototype.handleUpEvent=function(t){for(var e=this.jh.length-1;e>=0;--e){var n=this.jh[e][0],r=n.geometry;if(r.getType()===tr.CIRCLE){var i=r.getCenter(),o=n.featureSegments[0],a=n.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this._h.update(Mn(i),o);var s=r,l=Gr();if(l){var u=t.map.getView().getProjection();s=es(s=s.clone().transform(l,u)).transform(u,l)}this._h.update(s.getExtent(),a)}else this._h.update(gn(n.segment),n)}return this.Sh&&(this.dispatchEvent(new Ow(Tw,this.Sh,t)),this.Sh=null),!1},e.prototype.Tn=function(t){this.kh=t.pixel,this.Vh(t.pixel,t.map,t.coordinate)},e.prototype.Vh=function(t,e,n){var r,i,a=this,s=n||e.getCoordinateFromPixel(t),l=e.getView().getProjection();if(this.Nh){var u="object"===_w(this.Nh)?function(t){return t===a.Nh}:void 0;e.forEachFeatureAtPixel(t,(function(t,e,n){if((n=n||t.getGeometry()).getType()===tr.POINT&&o(a.Ec.getArray(),t)){i=n;var s=n.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:n,segment:[s,s]}]}return!0}),{layerFilter:u})}if(!r){var c=zr(mn(Vr(Mn(s,Ew),l),e.getView().getResolution()*this.rh,Ew),l);r=this._h.getInExtent(c)}if(r&&r.length>0){var h=r.sort((function(t,e){return Cw(s,t,l)-Cw(s,e,l)}))[0],f=h.segment,p=Iw(s,h,l),d=e.getPixelFromCoordinate(p),m=vr(t,d);if(i||m<=this.rh){var v={};if(v[g(f)]=!0,this.qh||(this.zs[0]=p[0]-s[0],this.zs[1]=p[1]-s[1]),h.geometry.getType()===tr.CIRCLE&&1===h.index)this.ih=!0,this.Hh(p,[h.feature],[h.geometry]);else{var y=e.getPixelFromCoordinate(f[0]),b=e.getPixelFromCoordinate(f[1]),w=mr(d,y),x=mr(d,b);m=Math.sqrt(Math.min(w,x)),this.ih=m<=this.rh,this.ih&&(p=w>x?f[1]:f[0]),this.Hh(p,[h.feature],[h.geometry]);var S={};S[g(h.geometry)]=!0;for(var _=1,k=r.length;_<k;++_){var E=r[_].segment;if(!(pr(f[0],E[0])&&pr(f[1],E[1])||pr(f[0],E[1])&&pr(f[1],E[0])))break;var M=g(r[_].geometry);M in S||(S[M]=!0,v[g(E)]=!0)}}return void(this.gh=v)}}this.ah&&(this.Zc.getSource().removeFeature(this.ah),this.ah=null)},e.prototype.Xh=function(t,e){for(var n,r=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case tr.MULTI_LINE_STRING:case tr.POLYGON:(n=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case tr.MULTI_POLYGON:(n=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case tr.LINE_STRING:(n=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.Kh(o,n);var l=this._h;l.remove(t),this.Yh(o,s,a,1);var u={segment:[r[0],e],feature:i,geometry:o,depth:a,index:s};l.insert(gn(u.segment),u),this.jh.push([u,1]);var c={segment:[e,r[1]],feature:i,geometry:o,depth:a,index:s+1};l.insert(gn(c.segment),c),this.jh.push([c,0]),this.xh=!0},e.prototype.removePoint=function(){if(this.Gh&&this.Gh.type!=yo.POINTERDRAG){var t=this.Gh;this.Zh(t,this.jh);var e=this.Jh();return this.dispatchEvent(new Ow(Tw,this.Sh,t)),this.Sh=null,e}return!1},e.prototype.Jh=function(){var t,e,n,r,i,o,a,s,l,u,c,h=this.jh,f={},p=!1;for(i=h.length-1;i>=0;--i)c=g((u=(n=h[i])[0]).feature),u.depth&&(c+="-"+u.depth.join("-")),c in f||(f[c]={}),0===n[1]?(f[c].right=u,f[c].index=u.index):1==n[1]&&(f[c].left=u,f[c].index=u.index+1);for(c in f){switch(l=f[c].right,a=f[c].left,(s=(o=f[c].index)-1)<0&&(s=0),t=e=(r=(u=void 0!==a?a:l).geometry).getCoordinates(),p=!1,r.getType()){case tr.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(o,1),p=!0);break;case tr.LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case tr.MULTI_POLYGON:t=t[u.depth[1]];case tr.POLYGON:(t=t[u.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),s=t.length-1))}if(p){this.Kh(r,e);var d=[];if(void 0!==a&&(this._h.remove(a),d.push(a.segment[0])),void 0!==l&&(this._h.remove(l),d.push(l.segment[1])),void 0!==a&&void 0!==l){var m={depth:u.depth,feature:u.feature,geometry:u.geometry,index:s,segment:d};this._h.insert(gn(m.segment),m)}this.Yh(r,o,u.depth,-1),this.ah&&(this.Zc.getSource().removeFeature(this.ah),this.ah=null),h.length=0}}return p},e.prototype.Kh=function(t,e){this.Mh=!0,t.setCoordinates(e),this.Mh=!1},e.prototype.Yh=function(t,e,n,r){this._h.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===n||void 0===i.depth||c(i.depth,n))&&i.index>e&&(i.index+=r)}))},e}(ky),Lw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rw="trackpad",jw=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,r)||this).Qh=0,n.tl=0,n.$n=void 0!==r.maxDelta?r.maxDelta:1,n.Mr=void 0!==r.duration?r.duration:250,n.nl=void 0!==r.timeout?r.timeout:80,n.el=void 0===r.useAnchor||r.useAnchor,n.rl=void 0!==r.constrainResolution&&r.constrainResolution;var i=r.condition?r.condition:qs;return n.Qs=r.onFocusOnly?Gs(Vs,i):i,n.il=null,n.al=void 0,n.sl,n.Cc=void 0,n.ul=400,n.fl,n.cl=300,n}return Lw(e,t),e.prototype.hl=function(){this.fl=void 0,this.getMap().getView().endInteraction(void 0,this.tl?this.tl>0?1:-1:0,this.il)},e.prototype.handleEvent=function(t){if(!this.Qs(t))return!0;if(t.type!==rt)return!0;var e,n=t.map,r=t.originalEvent;if(r.preventDefault(),this.el&&(this.il=t.coordinate),t.type==rt&&(e=r.deltaY,At&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Nt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.tl=e;var i=Date.now();void 0===this.al&&(this.al=i),(!this.Cc||i-this.al>this.ul)&&(this.Cc=Math.abs(e)<4?Rw:"wheel");var o=n.getView();if(this.Cc===Rw&&!o.getConstrainResolution()&&!this.rl)return this.fl?clearTimeout(this.fl):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.fl=setTimeout(this.hl.bind(this),this.nl),o.adjustZoom(-e/this.cl,this.il),this.al=i,!1;this.Qh+=e;var a=Math.max(this.nl-(i-this.al),0);return clearTimeout(this.sl),this.sl=setTimeout(this.ll.bind(this,n),a),!1},e.prototype.ll=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-x(this.Qh,-this.$n*this.cl,this.$n*this.cl)/this.cl;(e.getConstrainResolution()||this.rl)&&(n=n?n>0?1:-1:0),gy(e,n,this.il,this.Mr),this.Cc=void 0,this.Qh=0,this.il=null,this.al=void 0,this.sl=void 0},e.prototype.setMouseAnchor=function(t){this.el=t,t||(this.il=null)},e}(my),Nw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$w=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=F),(n=t.call(this,i)||this).yo=null,n.ou=void 0,n.vl=!1,n.dl=0,n.pl=void 0!==r.threshold?r.threshold:.3,n.Mr=void 0!==r.duration?r.duration:250,n}return Nw(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.ou){var o=i-this.ou;this.dl+=o,!this.vl&&Math.abs(this.dl)>this.pl&&(this.vl=!0),e=o}this.ou=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==jo){var l=a.getViewport().getBoundingClientRect(),u=_y(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.yo=a.getCoordinateFromPixelInternal(u),this.vl&&(a.render(),s.adjustRotationInternal(e,this.yo))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.Mr),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.yo=null,this.ou=void 0,this.vl=!1,this.dl=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ky),Fw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dw=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=F),(n=t.call(this,i)||this).yo=null,n.Mr=void 0!==r.duration?r.duration:400,n.yl=void 0,n.su=1,n}return Fw(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],i=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.yl&&(e=this.yl/a),this.yl=a;var s=t.map,l=s.getView();1!=e&&(this.su=e);var u=s.getViewport().getBoundingClientRect(),c=_y(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.yo=s.getCoordinateFromPixelInternal(c),s.render(),l.adjustResolutionInternal(e,this.yo)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.su>1?1:-1;return e.endInteraction(this.Mr,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.yo=null,this.yl=void 0,this.su=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ky),Gw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uw=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.selected=n,o.deselected=r,o.mapBrowserEvent=i,o}return Gw(e,t),e}(R),Bw={},zw=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r,i,a=e||{};if(n.ml=n.Fh.bind(n),n.bl=n.Wh.bind(n),n.Qs=a.condition?a.condition:Ks,n.wl=a.addCondition?a.addCondition:Ws,n.gl=a.removeCondition?a.removeCondition:Ws,n.kl=a.toggleCondition?a.toggleCondition:Xs,n.xl=!!a.multi&&a.multi,n.Sl=a.filter?a.filter:$,n._l=a.hitTolerance?a.hitTolerance:0,n.ci=void 0!==a.style?a.style:(l((r=Ef())[tr.POLYGON],r[tr.LINE_STRING]),l(r[tr.GEOMETRY_COLLECTION],r[tr.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),n.Ec=a.features||new bt,a.layers)if("function"==typeof a.layers)i=a.layers;else{var s=a.layers;i=function(t){return o(s,t)}}else i=$;return n.Ml=i,n.jl={},n}return Gw(e,t),e.prototype.Ol=function(t,e){this.jl[g(t)]=e},e.prototype.getFeatures=function(){return this.Ec},e.prototype.getHitTolerance=function(){return this._l},e.prototype.getLayer=function(t){return this.jl[g(t)]},e.prototype.setHitTolerance=function(t){this._l=t},e.prototype.setMap=function(e){this.getMap()&&this.ci&&this.Ec.forEach(this.Al.bind(this)),t.prototype.setMap.call(this,e),e?(this.Ec.addEventListener(dt,this.ml),this.Ec.addEventListener(gt,this.bl),this.ci&&this.Ec.forEach(this.Tl.bind(this))):(this.Ec.removeEventListener(dt,this.ml),this.Ec.removeEventListener(gt,this.bl))},e.prototype.Fh=function(t){var e=t.element;this.ci&&this.Tl(e)},e.prototype.Wh=function(t){var e=t.element;this.ci&&this.Al(e)},e.prototype.getStyle=function(){return this.ci},e.prototype.Tl=function(t){var e=g(t);e in Bw||(Bw[e]=t.getStyle()),t.setStyle(this.ci)},e.prototype.Al=function(t){for(var n=this.getMap().getInteractions().getArray(),r=n.length-1;r>=0;--r){var i=n[r];if(i!==this&&i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}var o=g(t);t.setStyle(Bw[o]),delete Bw[o]},e.prototype.El=function(t){delete this.jl[g(t)]},e.prototype.handleEvent=function(t){if(!this.Qs(t))return!0;var e=this.wl(t),n=this.gl(t),r=this.kl(t),i=!e&&!n&&!r,a=t.map,s=this.getFeatures(),l=[],u=[];if(i){B(this.jl),a.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.Sl(t,e))return u.push(t),this.Ol(t,e),!this.xl}.bind(this),{layerFilter:this.Ml,hitTolerance:this._l});for(var c=s.getLength()-1;c>=0;--c){var h=s.item(c),f=u.indexOf(h);f>-1?u.splice(f,1):(s.remove(h),l.push(h))}0!==u.length&&s.extend(u)}else{a.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.Sl(t,i))return!e&&!r||o(s.getArray(),t)?(n||r)&&o(s.getArray(),t)&&(l.push(t),this.El(t)):(u.push(t),this.Ol(t,i)),!this.xl}.bind(this),{layerFilter:this.Ml,hitTolerance:this._l});for(var p=l.length-1;p>=0;--p)s.remove(l[p]);s.extend(u)}return(u.length>0||l.length>0)&&this.dispatchEvent(new Uw("select",u,l,t)),!0},e}(my),Vw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function qw(t){return t.feature?t.feature:t.element?t.element:void 0}var Hw=[],Ww=function(t){function e(e){var n=this,r=e||{},i=r;return i.handleDownEvent||(i.handleDownEvent=$),i.stopDown||(i.stopDown=F),(n=t.call(this,i)||this).jt=r.source?r.source:null,n.Rl=void 0===r.vertex||r.vertex,n.Cl=void 0===r.edge||r.edge,n.Ec=r.features?r.features:null,n.Il=[],n.Pl={},n.Dl={},n.Nl={},n.rh=void 0!==r.pixelTolerance?r.pixelTolerance:10,n._h=new Wb,n.Oh={Point:n.Ah.bind(n),LineString:n.Th.bind(n),LinearRing:n.Th.bind(n),Polygon:n.Eh.bind(n),MultiPoint:n.Rh.bind(n),MultiLineString:n.Ch.bind(n),MultiPolygon:n.Ih.bind(n),GeometryCollection:n.Dh.bind(n),Circle:n.Ph.bind(n)},n}return Vw(e,t),e.prototype.addFeature=function(t,e){var n=void 0===e||e,r=g(t),i=t.getGeometry();if(i){var o=this.Oh[i.getType()];o&&(this.Dl[r]=i.getExtent([1/0,1/0,-1/0,-1/0]),o(t,i))}n&&(this.Pl[r]=it(t,W,this.xc,this))},e.prototype.Ll=function(t){this.addFeature(t)},e.prototype.zl=function(t){this.removeFeature(t)},e.prototype.Fl=function(){var t;return this.Ec?t=this.Ec:this.jt&&(t=this.jt.getFeatures()),t},e.prototype.handleEvent=function(e){var n=this.snapTo(e.pixel,e.coordinate,e.map);return n.snapped&&(e.coordinate=n.vertex.slice(0,2),e.pixel=n.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.Uh=function(t){var e=qw(t);this.addFeature(e)},e.prototype.Bh=function(t){var e=qw(t);this.removeFeature(e)},e.prototype.xc=function(t){var e=t.target;if(this.handlingDownUpSequence){var n=g(e);n in this.Nl||(this.Nl[n]=e)}else this.Ul(e)},e.prototype.handleUpEvent=function(t){var e=z(this.Nl);return e.length&&(e.forEach(this.Ul.bind(this)),this.Nl={}),!1},e.prototype.removeFeature=function(t,e){var n=void 0===e||e,r=g(t),i=this.Dl[r];if(i){var o=this._h,a=[];o.forEachInExtent(i,(function(e){t===e.feature&&a.push(e)}));for(var s=a.length-1;s>=0;--s)o.remove(a[s])}n&&(at(this.Pl[r]),delete this.Pl[r])},e.prototype.setMap=function(e){var n=this.getMap(),r=this.Il,i=this.Fl();n&&(r.forEach(at),r.length=0,i.forEach(this.zl.bind(this))),t.prototype.setMap.call(this,e),e&&(this.Ec?r.push(it(this.Ec,dt,this.Uh,this),it(this.Ec,gt,this.Bh,this)):this.jt&&r.push(it(this.jt,Zb,this.Uh,this),it(this.jt,tw,this.Bh,this)),i.forEach(this.Ll.bind(this)))},e.prototype.snapTo=function(t,e,n){var r=gn([n.getCoordinateFromPixel([t[0]-this.rh,t[1]+this.rh]),n.getCoordinateFromPixel([t[0]+this.rh,t[1]-this.rh])]),i=this._h.getInExtent(r);this.Rl&&!this.Cl&&(i=i.filter((function(t){return t.feature.getGeometry().getType()!==tr.CIRCLE})));var o=!1,a=null,s=null;if(0===i.length)return{snapped:o,vertex:a,vertexPixel:s};for(var l,u=n.getView().getProjection(),c=Br(e,u),h=1/0,f=0;f<i.length;++f){var p=i[f];Hw[0]=Br(p.segment[0],u),Hw[1]=Br(p.segment[1],u);var d=yr(c,Hw);d<h&&(l=p,h=d)}var g=l.segment;if(this.Rl&&!this.Cl){var m=n.getPixelFromCoordinate(g[0]),v=n.getPixelFromCoordinate(g[1]),y=mr(t,m),b=mr(t,v);Math.sqrt(Math.min(y,b))<=this.rh&&(o=!0,a=y>b?g[1]:g[0],s=n.getPixelFromCoordinate(a))}else if(this.Cl){var w=l.feature.getGeometry().getType()===tr.CIRCLE;if(w){var x=l.feature.getGeometry(),S=Gr();S&&(x=x.clone().transform(S,u)),a=Ur(ur(c,x),u)}else Hw[0]=Br(g[0],u),Hw[1]=Br(g[1],u),a=Ur(cr(c,Hw),u);vr(t,s=n.getPixelFromCoordinate(a))<=this.rh&&(o=!0,this.Rl&&!w)&&(m=n.getPixelFromCoordinate(g[0]),v=n.getPixelFromCoordinate(g[1]),y=mr(s,m),b=mr(s,v),Math.sqrt(Math.min(y,b))<=this.rh&&(a=y>b?g[1]:g[0],s=n.getPixelFromCoordinate(a)))}return o&&(s=[Math.round(s[0]),Math.round(s[1])]),{snapped:o,vertex:a,vertexPixel:s}},e.prototype.Ul=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.Ph=function(t,e){var n=this.getMap().getView().getProjection(),r=e,i=Gr();i&&(r=r.clone().transform(i,n));var o=es(r);i&&o.transform(n,i);for(var a=o.getCoordinates()[0],s=0,l=a.length-1;s<l;++s){var u=a.slice(s,s+2),c={feature:t,segment:u};this._h.insert(gn(u),c)}},e.prototype.Dh=function(t,e){for(var n=e.getGeometriesArray(),r=0;r<n.length;++r){var i=this.Oh[n[r].getType()];i&&i(t,n[r])}},e.prototype.Th=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length-1;r<i;++r){var o=n.slice(r,r+2),a={feature:t,segment:o};this._h.insert(gn(o),a)}},e.prototype.Ch=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,segment:l};this._h.insert(gn(l),u)}},e.prototype.Rh=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r){var o=n[r],a={feature:t,segment:[o,o]};this._h.insert(e.getExtent(),a)}},e.prototype.Ih=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u){var h=l.slice(u,u+2),f={feature:t,segment:h};this._h.insert(gn(h),f)}},e.prototype.Ah=function(t,e){var n=e.getCoordinates(),r={feature:t,segment:[n,n]};this._h.insert(e.getExtent(),r)},e.prototype.Eh=function(t,e){for(var n=e.getCoordinates(),r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,segment:l};this._h.insert(gn(l),u)}},e}(ky),Kw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yw=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.features=n,a.coordinate=r,a.startCoordinate=i,a.mapBrowserEvent=o,a}return Kw(e,t),e}(R),Xw=function(t){function e(e){var n,r=this,i=e||{};if((r=t.call(this,i)||this).on,r.once,r.un,r.Bl=null,r.Gl=null,r.Ec=void 0!==i.features?i.features:null,i.layers&&!r.Ec)if("function"==typeof i.layers)n=i.layers;else{var a=i.layers;n=function(t){return o(a,t)}}else n=$;return r.Ml=n,r.Sl=i.filter&&!r.Ec?i.filter:$,r._l=i.hitTolerance?i.hitTolerance:0,r.Qs=i.condition?i.condition:qs,r.ql=null,r.addChangeListener(fy,r.Vl),r}return Kw(e,t),e.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Qs(t))return!1;if(this.ql=this.Zl(t.pixel,t.map),!this.Bl&&this.ql){this.Gl=t.coordinate,this.Bl=t.coordinate,this.handleMoveEvent(t);var e=this.Ec||new bt([this.ql]);return this.dispatchEvent(new Yw("translatestart",e,t.coordinate,this.Gl,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.Bl){this.Bl=null,this.handleMoveEvent(t);var e=this.Ec||new bt([this.ql]);return this.dispatchEvent(new Yw("translateend",e,t.coordinate,this.Gl,t)),this.Gl=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.Bl){var e=t.coordinate,n=e[0]-this.Bl[0],r=e[1]-this.Bl[1],i=this.Ec||new bt([this.ql]);i.forEach((function(t){var e=t.getGeometry();e.translate(n,r),t.setGeometry(e)})),this.Bl=e,this.dispatchEvent(new Yw("translating",i,e,this.Gl,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.Zl(t.pixel,t.map)?(e.classList.remove(this.Bl?"ol-grab":"ol-grabbing"),e.classList.add(this.Bl?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.Zl=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.Sl(t,e)&&(!this.Ec||o(this.Ec.getArray(),t)))return t}.bind(this),{layerFilter:this.Ml,hitTolerance:this._l})},e.prototype.getHitTolerance=function(){return this._l},e.prototype.setHitTolerance=function(t){this._l=t},e.prototype.setMap=function(e){var n=this.getMap();t.prototype.setMap.call(this,e),this.$c(n)},e.prototype.Vl=function(){this.$c(null)},e.prototype.$c=function(t){var e=this.getMap(),n=this.getActive();e&&n||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(ky),Zw=function(){function t(t,e,n){this.Wl=t,this.$l=e,this.Hl=n,this.Do=[],this.zo=0,this.Kl=0}return t.prototype.begin=function(){this.Do.length=0,this.zo=0,this.Kl=0},t.prototype.update=function(t,e){this.Do.push(t,e,Date.now())},t.prototype.end=function(){if(this.Do.length<6)return!1;var t=Date.now()-this.Hl,e=this.Do.length-3;if(this.Do[e+2]<t)return!1;for(var n=e-3;n>0&&this.Do[n+2]>t;)n-=3;var r=this.Do[e+2]-this.Do[n+2];if(r<1e3/60)return!1;var i=this.Do[e]-this.Do[n],o=this.Do[e+1]-this.Do[n+1];return this.zo=Math.atan2(o,i),this.Kl=Math.sqrt(i*i+o*o)/r,this.Kl>this.$l},t.prototype.getDistance=function(){return(this.$l-this.Kl)/this.Wl},t.prototype.getAngle=function(){return this.zo},t}();function Jw(t){var e=t||{},n=new bt,r=new Zw(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Ly),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new yy({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Iy({onFocusOnly:e.onFocusOnly,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new $w),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new Dw({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new ww),n.push(new Sw({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new jw({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new $y({duration:e.zoomDuration})),n}var Qw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tx=function(t){function e(e){var n=e||{};return t.call(this,n)||this}return Qw(e,t),e}(Ee),ex="preload",nx="useInterimTilesOnError",rx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ix=function(t){function e(e){var n=this,r=e||{},i=U({},r);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return rx(e,t),e.prototype.getPreload=function(){return this.get(ex)},e.prototype.setPreload=function(t){this.set(ex,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(nx)},e.prototype.setUseInterimTilesOnError=function(t){this.set(nx,t)},e}(Ee);function ox(t){var e,n=t.inversePixelTransform[0],r=t.frameState,i=ni(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=Db(r.viewState.resolution,n),a=Gr();return a&&(e=Rr(a,r.viewState.projection)),new Lb(t.context,n,r.extent,i,r.viewState.rotation,o,e)}var ax,sx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lx=new gf({color:"rgba(0,0,0,0.2)"}),ux=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],cx=function(t){function e(e){var n=this,r=e||{},i=U({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,(n=t.call(this,i)||this).re=null,n.Xl=1/0,n.Yl=1/0,n.Jl=-1/0,n.Ql=-1/0,n.tv=1/0,n.nv=1/0,n.ev=-1/0,n.rv=-1/0,n.iv=void 0!==r.targetSize?r.targetSize:100,n.ov=void 0!==r.maxLines?r.maxLines:100,n.av=[],n.sv=[],n.uv=void 0!==r.strokeStyle?r.strokeStyle:lx,n.fv=void 0,n.cv=void 0,n.hv=null,n.lv=null,n.vv=null,n.dv=null,n.pv=null,n.yv=null,n.mv=null,r.showLabels&&(n.bv=null==r.lonLabelFormatter?hr.bind(n,"EW"):r.lonLabelFormatter,n.wv=null==r.latLabelFormatter?hr.bind(n,"NS"):r.latLabelFormatter,n.gv=null==r.lonLabelPosition?0:r.lonLabelPosition,n.kv=null==r.latLabelPosition?1:r.latLabelPosition,n.xv=new Tf({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new Of({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Kh({color:"rgba(0,0,0,1)"}),stroke:new gf({color:"rgba(255,255,255,1)",width:3})})}),n.Sv=function(t){var e=t.get("graticule_label");return this.xv.getText().setText(e),this.xv}.bind(n),n._v=new Tf({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new Of({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Kh({color:"rgba(0,0,0,1)"}),stroke:new gf({color:"rgba(255,255,255,1)",width:3})})}),n.Mv=function(t){var e=t.get("graticule_label");return this._v.getText().setText(e),this._v}.bind(n),n.yv=[],n.mv=[],n.addEventListener(me,n.jv.bind(n))),n.Ov=void 0!==r.intervals?r.intervals:ux,n.setSource(new iw({loader:n.loaderFunction.bind(n),strategy:n.strategyFunction.bind(n),features:new bt,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),n.Av=[],n.Tv=new Tf({stroke:n.uv}),n.Ev=null,n.Hf=null,n.setRenderOrder(null),n}return sx(e,t),e.prototype.strategyFunction=function(t,e){var n=t.slice();return this.re&&this.getSource().getWrapX()&&Qn(n,this.re),this.Ev&&(Pn(this.Ev,n,e)?n=this.Ev.slice():this.getSource().removeLoadedExtent(this.Ev)),[n]},e.prototype.loaderFunction=function(t,e,n){this.Ev=t;var r=this.getSource(),i=Vn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!this.Hf||!On(this.Hf,i)){this.Hf=i;var o=Gn(i),a=e*e/4;(!this.re||!Lr(this.re,n))&&this.Rv(n),this.Cv(i,o,e,a);var s,l=this.av.length+this.sv.length;for(this.yv&&(l+=this.av.length),this.mv&&(l+=this.sv.length);l>this.Av.length;)s=new nl,this.Av.push(s);var u=r.getFeaturesCollection();u.clear();var c,h,f=0;for(c=0,h=this.av.length;c<h;++c)(s=this.Av[f++]).setGeometry(this.av[c]),s.setStyle(this.Tv),u.push(s);for(c=0,h=this.sv.length;c<h;++c)(s=this.Av[f++]).setGeometry(this.sv[c]),s.setStyle(this.Tv),u.push(s)}},e.prototype.Iv=function(t,e,n,r,i,o){var a=this.Pv(t,e,n,r,o);if(Kn(a.getExtent(),i)){if(this.yv){var s=this.bv(t);o in this.yv?this.yv[o].text=s:this.yv[o]={geom:new Ia([]),text:s}}this.av[o++]=a}return o},e.prototype.Dv=function(t,e,n,r,i,o){var a=this.Nv(t,e,n,r,o);if(Kn(a.getExtent(),i)){if(this.mv){var s=this.wv(t);o in this.mv?this.mv[o].text=s:this.mv[o]={geom:new Ia([]),text:s}}this.sv[o++]=a}return o},e.prototype.jv=function(t){var e=t.frameState.viewState.rotation,n=t.frameState.extent,r=Gn(n),i=n;if(e){var o=Wn(n),a=zn(n),s=Math.abs(Math.cos(e)),l=Math.abs(Math.sin(e)),u=(l*a-s*o)/(l*l-s*s),c=(l*o-s*a)/(l*l-s*s);i=[r[0]-u/2,r[1]-c/2,r[0]+u/2,r[1]+c/2]}var h=0,f=0,p=this.kv<.5,d=this.re.getExtent(),g=Wn(d);this.getSource().getWrapX()&&this.re.canWrapX()&&!wn(d,n)&&(h=Math.floor((n[0]-d[0])/g),f=Math.ceil((n[2]-d[2])/g),p=p!==Math.abs(e)>Math.PI/2);for(var m=ox(t),v=h;v<=f;++v){var y=this.av.length+this.sv.length,b=void 0,w=void 0,x=void 0,S=void 0;if(this.yv)for(w=0,x=this.yv.length;w<x;++w){var _=this.av[w];e||0!==v?((k=_.clone()).translate(v*g,0),k.rotate(-e,r),(S=this.Lv(k,i,w)).rotate(e,r)):S=this.Lv(_,n,w),(b=this.Av[y++]).setGeometry(S),b.set("graticule_label",this.yv[w].text),m.drawFeature(b,this.Sv(b))}if(this.mv&&(v===h&&p||v===f&&!p))for(w=0,x=this.sv.length;w<x;++w){var k;_=this.sv[w],e||0!==v?((k=_.clone()).translate(v*g,0),k.rotate(-e,r),(S=this.zv(k,i,w)).rotate(e,r)):S=this.zv(_,n,w),(b=this.Av[y++]).setGeometry(S),b.set("graticule_label",this.mv[w].text),m.drawFeature(b,this.Mv(b))}}},e.prototype.Cv=function(t,e,n,r){var i=this.Fv(n);if(-1==i)return this.av.length=0,this.sv.length=0,this.yv&&(this.yv.length=0),void(this.mv&&(this.mv.length=0));var o=!1,a=this.re.getExtent(),s=Wn(a);this.getSource().getWrapX()&&this.re.canWrapX()&&!wn(a,t)&&(Wn(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var l=[x(e[0],this.ev,this.tv),x(e[1],this.rv,this.nv)],u=this.cv(l);isNaN(u[1])&&(u[1]=Math.abs(this.Xl)>=Math.abs(this.Jl)?this.Xl:this.Jl);var c,h,f,p,d=x(u[0],this.Ql,this.Yl),g=x(u[1],this.Jl,this.Xl),m=this.ov,v=t;o||(v=[x(t[0],this.ev,this.tv),x(t[1],this.rv,this.nv),x(t[2],this.ev,this.tv),x(t[3],this.rv,this.nv)]);var y=Jn(v,this.cv,void 0,8),b=y[3],w=y[2],S=y[1],_=y[0];if(o||(bn(v,this.lv)&&(_=this.Ql,S=this.Jl),bn(v,this.vv)&&(w=this.Yl,S=this.Jl),bn(v,this.dv)&&(_=this.Ql,b=this.Xl),bn(v,this.pv)&&(w=this.Yl,b=this.Xl),b=x(b,g,this.Xl),w=x(w,d,this.Yl),S=x(S,this.Jl,g),_=x(_,this.Ql,d)),p=x(d=Math.floor(d/i)*i,this.Ql,this.Yl),h=this.Iv(p,S,b,r,t,0),c=0,o)for(;(p-=i)>=_&&c++<m;)h=this.Iv(p,S,b,r,t,h);else for(;p!=this.Ql&&c++<m;)p=Math.max(p-i,this.Ql),h=this.Iv(p,S,b,r,t,h);if(p=x(d,this.Ql,this.Yl),c=0,o)for(;(p+=i)<=w&&c++<m;)h=this.Iv(p,S,b,r,t,h);else for(;p!=this.Yl&&c++<m;)p=Math.min(p+i,this.Yl),h=this.Iv(p,S,b,r,t,h);for(this.av.length=h,this.yv&&(this.yv.length=h),f=x(g=Math.floor(g/i)*i,this.Jl,this.Xl),h=this.Dv(f,_,w,r,t,0),c=0;f!=this.Jl&&c++<m;)f=Math.max(f-i,this.Jl),h=this.Dv(f,_,w,r,t,h);for(f=x(g,this.Jl,this.Xl),c=0;f!=this.Xl&&c++<m;)f=Math.min(f+i,this.Xl),h=this.Dv(f,_,w,r,t,h);this.sv.length=h,this.mv&&(this.mv.length=h)},e.prototype.Fv=function(t){for(var e=this.hv[0],n=this.hv[1],r=-1,i=Math.pow(this.iv*t,2),o=[],a=[],s=0,l=this.Ov.length;s<l;++s){var u=x(this.Ov[s]/2,0,90),c=x(n,-90+u,90-u);if(o[0]=e-u,o[1]=c-u,a[0]=e+u,a[1]=c+u,this.fv(o,o),this.fv(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;r=this.Ov[s]}return r},e.prototype.Pv=function(t,e,n,r,i){var o=iy(t,e,n,this.re,r),a=this.av[i];return a?(a.setFlatCoordinates(zo,o),a.changed()):(a=new wl(o,zo),this.av[i]=a),a},e.prototype.Lv=function(t,e,n){var r=t.getFlatCoordinates(),i=1,o=r.length-1;r[i]>r[o]&&(i=o,o=1);var a=Math.max(e[1],r[i]),s=Math.min(e[3],r[o]),l=x(e[1]+Math.abs(e[1]-e[3])*this.gv,a,s),u=[r[i-1]+(r[o-1]-r[i-1])*(l-r[i])/(r[o]-r[i]),l],c=this.yv[n].geom;return c.setCoordinates(u),c},e.prototype.getMeridians=function(){return this.av},e.prototype.Nv=function(t,e,n,r,i){var o=oy(t,e,n,this.re,r),a=this.sv[i];return a?(a.setFlatCoordinates(zo,o),a.changed()):a=new wl(o,zo),a},e.prototype.zv=function(t,e,n){var r=t.getFlatCoordinates(),i=0,o=r.length-2;r[i]>r[o]&&(i=o,o=0);var a=Math.max(e[0],r[i]),s=Math.min(e[2],r[o]),l=x(e[0]+Math.abs(e[0]-e[2])*this.kv,a,s),u=[l,r[i+1]+(r[o+1]-r[i+1])*(l-r[i])/(r[o]-r[i])],c=this.mv[n].geom;return c.setCoordinates(u),c},e.prototype.getParallels=function(){return this.sv},e.prototype.Rv=function(t){var e=Mr("EPSG:4326"),n=t.getWorldExtent();this.Xl=n[3],this.Yl=n[2],this.Jl=n[1],this.Ql=n[0];var r=jr(t,e);if(this.Ql<this.Yl)this.cv=r;else{var i=this.Ql+this.Yl/2;this.Yl+=360,this.cv=function(t,e,n){for(var o=n||2,a=r(t,e,o),s=0,l=a.length;s<l;s+=o)a[s]<i&&(a[s]+=360);return a}}this.fv=jr(e,t);var o=Jn([this.Ql,this.Jl,this.Yl,this.Xl],this.fv,void 0,8);this.ev=o[0],this.tv=o[2],this.rv=o[1],this.nv=o[3],this.lv=this.fv([this.Ql,this.Jl]),this.vv=this.fv([this.Yl,this.Jl]),this.dv=this.fv([this.Ql,this.Xl]),this.pv=this.fv([this.Yl,this.Xl]),this.hv=this.cv(Gn(t.getExtent())),isNaN(this.hv[1])&&(this.hv[1]=Math.abs(this.Xl)>=Math.abs(this.Jl)?this.Xl:this.Jl),this.re=t},e}(Hb),hx=34962,fx=34963,px=35044,dx=35048,gx=5126,mx=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function vx(t,e){for(var n=mx.length,r=0;r<n;++r)try{var i=t.getContext(mx[r],e);if(i)return i}catch(t){}return null}function yx(){if(!ax){var t=vx(document.createElement("canvas"));t&&(ax=t.getSupportedExtensions())}return ax}function bx(t){switch(t){case hx:return Float32Array;case fx:return Uint32Array;default:return Float32Array}}var wx=function(){function t(t,e){this.array=null,this.type=t,w(t===hx||t===fx,62),this.usage=void 0!==e?e:35044}return t.prototype.ofSize=function(t){this.array=new(bx(this.type))(t)},t.prototype.fromArray=function(t){var e=bx(this.type);this.array=e.from?e.from(t):new e(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(bx(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),xx="webglcontextlost",Sx="webglcontextrestored",_x=function(){function t(t){this.Uv=t.webGlContext;var e=this.Uv;this.Bv=t.scaleRatio||1,this.Gv=e.createTexture(),this.qv=null,this.Vv=e.createFramebuffer();var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(n);var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),e.compileShader(r),this.Zv=e.createProgram(),e.attachShader(this.Zv,n),e.attachShader(this.Zv,r),e.linkProgram(this.Zv),this.Wv=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.Wv),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.$v=e.getAttribLocation(this.Zv,"a_position"),this.Hv=e.getUniformLocation(this.Zv,"u_screenSize"),this.Kv=e.getUniformLocation(this.Zv,"u_image"),this.Xv=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(n){this.Xv.push({value:t.uniforms[n],location:e.getUniformLocation(this.Zv,n)})}.bind(this))}return t.prototype.getGL=function(){return this.Uv},t.prototype.init=function(t){var e=this.getGL(),n=[e.drawingBufferWidth*this.Bv,e.drawingBufferHeight*this.Bv];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,n[0],n[1]),!this.qv||this.qv[0]!==n[0]||this.qv[1]!==n[1]){this.qv=n;var r=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.Gv),e.texImage2D(e.TEXTURE_2D,0,r,n[0],n[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.Gv,0)}},t.prototype.apply=function(t,e){var n=this.getGL(),r=t.size;n.bindFramebuffer(n.FRAMEBUFFER,e?e.getFrameBuffer():null),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.Gv),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.bindBuffer(n.ARRAY_BUFFER,this.Wv),n.useProgram(this.Zv),n.enableVertexAttribArray(this.$v),n.vertexAttribPointer(this.$v,2,n.FLOAT,!1,0,0),n.uniform2f(this.Hv,r[0],r[1]),n.uniform1i(this.Kv,0),this.applyUniforms(t),n.drawArrays(n.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.Vv},t.prototype.applyUniforms=function(t){var e,n=this.getGL(),r=1;this.Xv.forEach((function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=n.createTexture()),n.activeTexture(n["TEXTURE"+r]),n.bindTexture(n.TEXTURE_2D,i.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),e instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,e.width,e.height,0,n.UNSIGNED_BYTE,new Uint8Array(e.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.uniform1i(i.location,r++);else if(Array.isArray(e))switch(e.length){case 2:return void n.uniform2f(i.location,e[0],e[1]);case 3:return void n.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void n.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&n.uniform1f(i.location,e)}))},t}();function kx(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var Ex=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mx={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:gx};function Tx(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e+=r.size*Ox(r.type)}return e}function Ox(t){switch(t){case Mx.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Mx.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Mx.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Mx.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var Px=function(t){function e(e){var n=t.call(this)||this,r=e||{};n.Yv=n.handleWebGLContextLost.bind(n),n.Jv=n.handleWebGLContextRestored.bind(n),n.fo=document.createElement("canvas"),n.fo.style.position="absolute",n.fo.style.left="0",n.Uv=vx(n.fo);var i=n.getGL();if(n.Qv={},n.td=null,w(o(yx(),"OES_element_index_uint"),63),i.getExtension("OES_element_index_uint"),n.fo.addEventListener(xx,n.Yv),n.fo.addEventListener(Sx,n.Jv),n.ed=[1,0,0,1,0,0],n.rd=[1,0,0,1,0,0],n.od=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.ad={},n.sd={},n.Xv=[],r.uniforms)for(var a in r.uniforms)n.Xv.push({name:a,value:r.uniforms[a]});return n.ud=r.postProcesses?r.postProcesses.map((function(t){return new _x({webGlContext:i,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new _x({webGlContext:i})],n.fd=null,n.al=Date.now(),n}return Ex(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),n=g(t),r=this.Qv[n];r||(r={buffer:t,webGlBuffer:e.createBuffer()},this.Qv[n]=r),e.bindBuffer(t.getType(),r.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),n=g(t),r=this.Qv[n];r&&!e.isContextLost()&&e.deleteBuffer(r.webGlBuffer),delete this.Qv[n]},e.prototype.disposeInternal=function(){this.fo.removeEventListener(xx,this.Yv),this.fo.removeEventListener(Sx,this.Jv)},e.prototype.prepareDraw=function(t,e){var n=this.getGL(),r=this.getCanvas(),i=t.size,o=t.pixelRatio;r.width=i[0]*o,r.height=i[1]*o,r.style.width=i[0]+"px",r.style.height=i[1]+"px",n.useProgram(this.td);for(var a=this.ud.length-1;a>=0;a--)this.ud[a].init(t);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,e?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.td),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,n){var r=this.getGL(),i=e.getSize();r.bindFramebuffer(r.FRAMEBUFFER,e.getFramebuffer()),r.viewport(0,0,i[0],i[1]),r.bindTexture(r.TEXTURE_2D,e.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,n?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.td),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var n=this.getGL(),r=n.UNSIGNED_INT,i=e-t,o=4*t;n.drawElements(n.TRIANGLES,i,r,o)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.ud.length;e++)this.ud[e].apply(t,this.ud[e+1]||null)},e.prototype.getCanvas=function(){return this.fo},e.prototype.getGL=function(){return this.Uv},e.prototype.applyFrameState=function(t){var e=t.size,n=t.viewState.rotation,r=ei(this.rd);si(r,2/e[0],2/e[1]);var i=ei(this.ed);0!==n&&ai(i,-n),this.setUniformMatrixValue("u_offsetScaleMatrix",kx(this.od,r)),this.setUniformMatrixValue("u_offsetRotateMatrix",kx(this.od,i)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.al)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,n=this.getGL(),r=0;this.Xv.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=n.createTexture()),n.activeTexture(n["TEXTURE"+r]),n.bindTexture(n.TEXTURE_2D,i.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e)),n.uniform1i(this.getUniformLocation(i.name),r++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,kx(this.od,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void n.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void n.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void n.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&n.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.td&&(this.getGL().useProgram(t),this.td=t,this.ad={},this.sd={},!0)},e.prototype.compileShader=function(t,e){var n=this.getGL(),r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r},e.prototype.getProgram=function(t,e){var n=this.getGL(),r=this.compileShader(t,n.FRAGMENT_SHADER),i=this.compileShader(e,n.VERTEX_SHADER),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getShaderParameter(r,n.COMPILE_STATUS)){var a="Fragment shader compliation failed: "+n.getShaderInfoLog(r);throw new Error(a)}if(n.deleteShader(r),!n.getShaderParameter(i,n.COMPILE_STATUS))throw a="Vertex shader compilation failed: "+n.getShaderInfoLog(i),new Error(a);if(n.deleteShader(i),!n.getProgramParameter(o,n.LINK_STATUS))throw a="GL program linking failed: "+n.getShaderInfoLog(i),new Error(a);return o},e.prototype.getUniformLocation=function(t){return void 0===this.ad[t]&&(this.ad[t]=this.getGL().getUniformLocation(this.td,t)),this.ad[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.sd[t]&&(this.sd[t]=this.getGL().getAttribLocation(this.td,t)),this.sd[t]},e.prototype.makeProjectionTransform=function(t,e){var n=t.size,r=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return ei(e),ci(e,0,0,2/(i*n[0]),2/(i*n[1]),-r,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.hd=function(t,e,n,r,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,n,!1,r,i))},e.prototype.enableAttributes=function(t){for(var e=Tx(t),n=0,r=0;r<t.length;r++){var i=t[r];this.hd(i.name,i.size,i.type||gx,e,n),n+=i.size*Ox(i.type)}},e.prototype.handleWebGLContextLost=function(){B(this.Qv),this.td=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,n){var r=this.getGL(),i=n||r.createTexture(),o=r.RGBA,a=r.RGBA,s=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,i),e?r.texImage2D(r.TEXTURE_2D,0,o,a,s,e):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i},e}(N),Cx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ix="GENERATE_BUFFERS",Ax=function(t){function e(e,n){var r=t.call(this,e)||this,i=n||{};return r.helper=new Px({postProcesses:i.postProcesses,uniforms:i.uniforms}),void 0!==i.className&&(r.helper.getCanvas().className=i.className),r}return Cx(e,t),e.prototype.disposeInternal=function(){this.helper.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.Hu=function(t,e){var n=this.getLayer();if(n.hasListener(t)){var r=new Si(t,null,e,null);n.dispatchEvent(r)}},e.prototype.preRender=function(t){this.Hu(ge,t)},e.prototype.postRender=function(t){this.Hu(me,t)},e}(ub),Lx=[],Rx={vertexPosition:0,indexPosition:0};function jx(t,e,n,r,i){t[e+0]=n,t[e+1]=r,t[e+2]=i}function Nx(t,e){var n=e||[],r=256,i=255;return n[0]=Math.floor(t/r/r/r)/i,n[1]=Math.floor(t/r/r)%r/i,n[2]=Math.floor(t/r)%r/i,n[3]=t%r/i,n}function $x(t){var e=0,n=256,r=255;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),(e+=Math.round(t[2]*n*r))+Math.round(t[3]*r)}var Fx=Ax,Dx=new Uint8Array(4),Gx=function(){function t(t,e){this.ld=t;var n=t.getGL();this.vd=n.createTexture(),this.dd=n.createFramebuffer(),this.ho=e||[1,1],this.ai=new Uint8Array(0),this.pd=!0,this.yd()}return t.prototype.setSize=function(t){c(t,this.ho)||(this.ho[0]=t[0],this.ho[1]=t[1],this.yd())},t.prototype.getSize=function(){return this.ho},t.prototype.clearCachedData=function(){this.pd=!0},t.prototype.readAll=function(){if(this.pd){var t=this.ho,e=this.ld.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.dd),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.ai),this.pd=!1}return this.ai},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.ho[0]||e>=this.ho[1])return Dx[0]=0,Dx[1]=0,Dx[2]=0,Dx[3]=0,Dx;this.readAll();var n=Math.floor(t)+(this.ho[1]-Math.floor(e)-1)*this.ho[0];return Dx[0]=this.ai[4*n],Dx[1]=this.ai[4*n+1],Dx[2]=this.ai[4*n+2],Dx[3]=this.ai[4*n+3],Dx},t.prototype.getTexture=function(){return this.vd},t.prototype.getFramebuffer=function(){return this.dd},t.prototype.yd=function(){var t=this.ho,e=this.ld.getGL();this.vd=this.ld.createTexture(t,null,this.vd),e.bindFramebuffer(e.FRAMEBUFFER,this.dd),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.vd,0),this.ai=new Uint8Array(t[0]*t[1]*4)},t}(),Ux=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),Bx=URL.createObjectURL(Ux),zx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vx=function(t){function e(e,n){var r=this,i=n.uniforms||{},o=[1,0,0,1,0,0];i.u_projectionMatrix=o,(r=t.call(this,e,{className:n.className,uniforms:i,postProcesses:n.postProcesses})||this).md=-1,r.bd=new wx(hx,dx),r.wd=new wx(hx,dx),r.gd=new wx(fx,dx),r.kd=r.helper.getProgram(n.fragmentShader,n.vertexShader),r.xd=!(!n.hitFragmentShader||!n.hitVertexShader),r.Sd=r.xd&&r.helper.getProgram(n.hitFragmentShader,n.hitVertexShader);var a=n.attributes?n.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:Mx.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:Mx.FLOAT},{name:"a_index",size:1,type:Mx.FLOAT}].concat(a),r.hitDetectionAttributes=[{name:"a_position",size:2,type:Mx.FLOAT},{name:"a_index",size:1,type:Mx.FLOAT},{name:"a_hitColor",size:4,type:Mx.FLOAT},{name:"a_featureUid",size:1,type:Mx.FLOAT}].concat(a),r.customAttributes=n.attributes?n.attributes:[],r.Pe=[1/0,1/0,-1/0,-1/0],r._d=o,r.Md=[1,0,0,1,0,0],r.jd=[1,0,0,1,0,0],r.Od=new Float32Array(0),r.Ad=new Float32Array(0),r.Td=r.xd&&new Gx(r.helper),r.Ed=new Worker(Bx),r.Ed.addEventListener("message",function(t){var e=t.data;if(e.type===Ix){var n=e.projectionTransform;e.hitDetection?(this.wd.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.wd)):(this.bd.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.bd)),this.gd.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.gd),this.Md=n,hi(this.jd,this.Md),e.hitDetection?this.Ad=new Float32Array(t.data.renderInstructions):this.Od=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(r)),r.Rd={},r.Cd=0;var s=r.getLayer().getSource();return r.Id=[it(s,Zb,r.Pd,r),it(s,Jb,r.Dd,r),it(s,tw,r.Nd,r),it(s,Qb,r.Ld,r)],s.forEachFeature(function(t){this.Rd[g(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.Cd++}.bind(r)),r}return zx(e,t),e.prototype.Pd=function(t){var e=t.feature;this.Rd[g(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.Cd++},e.prototype.Dd=function(t){var e=t.feature;this.Rd[g(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.Nd=function(t){var e=t.feature;delete this.Rd[g(e)],this.Cd--},e.prototype.Ld=function(){this.Rd={},this.Cd=0},e.prototype.renderFrame=function(t){this.preRender(t);var e=this.gd.getSize();this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var n=this.helper.getCanvas(),r=t.layerStatesArray[t.layerIndex].opacity;return r!==parseFloat(n.style.opacity)&&(n.style.opacity=String(r)),this.xd&&(this.renderHitDetection(t),this.Td.clearCachedData()),this.postRender(t),n},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource(),r=t.viewState,i=!t.viewHints[0]&&!t.viewHints[1],o=!On(this.Pe,t.extent),a=this.md<n.getRevision();if(a&&(this.md=n.getRevision()),i&&(o||a)){var s=r.projection,l=r.resolution,u=e instanceof Uy?e.getRenderBuffer():0,c=mn(t.extent,u*l);n.loadFeatures(c,l,s),this.zd(t),this.Pe=t.extent.slice()}return this.helper.makeProjectionTransform(t,this._d),ni(this._d,this.jd),this.helper.useProgram(this.kd),this.helper.prepareDraw(t),this.helper.bindBuffer(this.bd),this.helper.bindBuffer(this.gd),this.helper.enableAttributes(this.attributes),!0},e.prototype.zd=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var n,r,i=(2+this.customAttributes.length)*this.Cd;if(this.Od&&this.Od.length===i||(this.Od=new Float32Array(i)),this.xd){var o=(7+this.customAttributes.length)*this.Cd;this.Ad&&this.Ad.length===o||(this.Ad=new Float32Array(o))}var a,s=[],l=[],u=0,c=0;for(var h in this.Rd)if((r=(n=this.Rd[h]).geometry)&&r.getType()===tr.POINT){s[0]=r.getFlatCoordinates()[0],s[1]=r.getFlatCoordinates()[1],oi(e,s),a=Nx(c+6,l),this.Od[u++]=s[0],this.Od[u++]=s[1],this.xd&&(this.Ad[c++]=s[0],this.Ad[c++]=s[1],this.Ad[c++]=a[0],this.Ad[c++]=a[1],this.Ad[c++]=a[2],this.Ad[c++]=a[3],this.Ad[c++]=Number(h));for(var f=void 0,p=0;p<this.customAttributes.length;p++)f=this.customAttributes[p].callback(n.feature,n.properties),this.Od[u++]=f,this.xd&&(this.Ad[c++]=f)}var d={type:Ix,renderInstructions:this.Od.buffer,customAttributesCount:this.customAttributes.length};if(d.projectionTransform=e,this.Ed.postMessage(d,[this.Od.buffer]),this.Od=null,this.xd){var g={type:Ix,renderInstructions:this.Ad.buffer,customAttributesCount:5+this.customAttributes.length};g.projectionTransform=e,g.hitDetection=!0,this.Ed.postMessage(g,[this.Ad.buffer]),this.Ad=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){if(w(this.xd,66),this.Ad){var o=oi(e.coordinateToPixelTransform,t.slice()),a=this.Td.readPixel(o[0]/2,o[1]/2),s=$x([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),l=this.Ad[s],u=Math.floor(l).toString(),c=this.getLayer().getSource().getFeatureByUid(u);return c?r(c,this.getLayer(),null):void 0}},e.prototype.renderHitDetection=function(t){if(this.wd.getSize()){this.Td.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Sd),this.helper.prepareDrawToRenderTarget(t,this.Td,!0),this.helper.bindBuffer(this.wd),this.helper.bindBuffer(this.gd),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.gd.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.Ed.terminate(),this.$u=null,this.Id.forEach((function(t){at(t)})),this.Id=null,t.prototype.disposeInternal.call(this)},e}(Fx),qx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hx="blur",Wx="gradient",Kx="radius",Yx=["#00f","#0ff","#0f0","#ff0","#f00"],Xx=function(t){function e(e){var n=this,r=e||{},i=U({},r);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(n=t.call(this,i)||this).Fd=null,n.addChangeListener(Wx,n.Ud),n.setGradient(r.gradient?r.gradient:Yx),n.setBlur(void 0!==r.blur?r.blur:15),n.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return n.Bd="string"==typeof o?function(t){return t.get(o)}:o,n.setRenderOrder(null),n}return qx(e,t),e.prototype.getBlur=function(){return this.get(Hx)},e.prototype.getGradient=function(){return this.get(Wx)},e.prototype.getRadius=function(){return this.get(Kx)},e.prototype.Ud=function(){this.Fd=function(t){for(var e=Gt(1,256),n=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),i=0,o=t.length;i<o;++i)n.addColorStop(i*r,t[i]);return e.fillStyle=n,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(Hx,t)},e.prototype.setGradient=function(t){this.set(Wx,t)},e.prototype.setRadius=function(t){this.set(Kx,t)},e.prototype.createRenderer=function(){return new Vx(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var e=this.Bd(t);return void 0!==e?x(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(Kx)+this.get(Hx))}.bind(this),u_blurSlope:function(){return this.get(Kx)/Math.max(1,this.get(Hx))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.Fd}.bind(this)}}]})},e.prototype.renderDeclutter=function(){},e}(Hb),Zx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jx=function(t){function e(e){var n=t.call(this,e)||this;return n.eo=null,n}return Zx(e,t),e.prototype.getImage=function(){return this.eo?this.eo.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,r=t.viewState,i=r.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=Vn(s,Vr(e.extent,r.projection))),!a[0]&&!a[1])if(o){var l=r.projection,u=o.getImage(s,i,n,l);u&&this.loadImage(u)&&(this.eo=u)}else this.eo=null;return!!this.eo},e.prototype.renderFrame=function(t,e){var n=this.eo,r=n.getExtent(),i=n.getResolution(),o=n.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,l=t.viewState,u=l.center,c=l.resolution,h=t.size,f=s*i/(c*o),p=Math.round(h[0]*s),d=Math.round(h[1]*s),g=l.rotation;if(g){var m=Math.round(Math.sqrt(p*p+d*d));p=m,d=m}ci(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,g,-p/2,-d/2),hi(this.inversePixelTransform,this.pixelTransform);var v=pi(this.pixelTransform);this.useContainer(e,v,a.opacity);var y=this.context,b=y.canvas;b.width!=p||b.height!=d?(b.width=p,b.height=d):this.containerReused||y.clearRect(0,0,p,d);var w=!1,x=!0;if(a.extent){var S=Vr(a.extent,l.projection);(w=(x=Kn(S,t.extent))&&!wn(S,t.extent))&&this.clipUnrotated(y,t,S)}var _=n.getImage(),k=ci(this.tempTransform,p/2,d/2,f,f,0,o*(r[0]-u[0])/i,o*(u[1]-r[3])/i);this.renderedResolution=i*s/o;var E=_.width*k[0],M=_.height*k[3];if(U(y,this.getLayer().getSource().getContextOptions()),this.preRender(y,t),x&&E>=.5&&M>=.5){var T=k[4],O=k[5],P=a.opacity,C=void 0;1!==P&&(C=y.globalAlpha,y.globalAlpha=P),y.drawImage(_,0,0,+_.width,+_.height,Math.round(T),Math.round(O),Math.round(E),Math.round(M)),1!==P&&(y.globalAlpha=C)}return this.postRender(y,t),w&&y.restore(),v!==b.style.transform&&(b.style.transform=v),this.container},e}(hb),Qx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tS=function(t){function e(e){return t.call(this,e)||this}return Qx(e,t),e.prototype.createRenderer=function(){return new Jx(this)},e}(tx),eS=function(){function t(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function nS(t,e,n,r,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new eS(t,e,n,r)}var rS=eS,iS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oS=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.Hf=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.Gd=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.qd=new rS(0,0,0,0),n}return iS(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!r},e.prototype.getTile=function(t,e,n,r){var i=r.pixelRatio,o=r.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,n,i,o);return 3==s.getState()&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.Gd=!0):s.setState(2)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,n,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,e,n,r)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],r=t.viewState,o=r.projection,a=r.resolution,s=r.center,l=r.rotation,u=t.pixelRatio,c=this.getLayer(),h=c.getSource(),f=h.getRevision(),p=h.getTileGridForProjection(o),d=p.getZForResolution(a,h.zDirection),m=p.getResolution(d),v=t.extent,y=n.extent&&Vr(n.extent,o);y&&(v=Vn(v,Vr(n.extent,o)));var b=h.getTilePixelRatio(u),w=Math.round(t.size[0]*b),x=Math.round(t.size[1]*b);if(l){var S=Math.round(Math.sqrt(w*w+x*x));w=S,x=S}var _=m*w/2/b,k=m*x/2/b,E=[s[0]-_,s[1]-k,s[0]+_,s[1]+k],M=p.getTileRangeForExtentAndZ(v,d),T={};T[d]={};var O=this.createLoadedTileFinder(h,o,T),P=this.tmpExtent,C=this.qd;this.Gd=!1;for(var I=M.minX;I<=M.maxX;++I)for(var A=M.minY;A<=M.maxY;++A){var L=this.getTile(d,I,A,t);if(this.isDrawableTile(L)){var R=g(this);if(2==L.getState()){T[d][L.tileCoord.toString()]=L;var j=L.inTransition(R);this.Gd||!j&&-1!==this.renderedTiles.indexOf(L)||(this.Gd=!0)}if(1===L.getAlpha(R,t.time))continue}var N=p.getTileCoordChildTileRange(L.tileCoord,C,P),$=!1;N&&($=O(d+1,N)),$||p.forEachTileCoordParentTileRange(L.tileCoord,O,C,P)}var F=m/a;ci(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/b,1/b,l,-w/2,-x/2);var D=pi(this.pixelTransform);this.useContainer(e,D,n.opacity);var G=this.context,B=G.canvas;hi(this.inversePixelTransform,this.pixelTransform),ci(this.tempTransform,w/2,x/2,F,F,0,-w/2,-x/2),B.width!=w||B.height!=x?(B.width=w,B.height=x):this.containerReused||G.clearRect(0,0,w,x),y&&this.clipUnrotated(G,t,y),U(G,h.getContextOptions()),this.preRender(G,t),this.renderedTiles.length=0;var z,V,q,H=Object.keys(T).map(Number);H.sort(i),1!==n.opacity||this.containerReused&&!h.getOpaque(t.viewState.projection)?(z=[],V=[]):H=H.reverse();for(var W=H.length-1;W>=0;--W){var K=H[W],Y=h.getTilePixelSize(K,u,o),X=p.getResolution(K)/m,Z=Y[0]*X*F,J=Y[1]*X*F,Q=p.getTileCoordForCoordAndZ(qn(E),K),tt=p.getTileCoordExtent(Q),et=oi(this.tempTransform,[b*(tt[0]-E[0])/m,b*(E[3]-tt[3])/m]),nt=b*h.getGutterForProjection(o),rt=T[K];for(var it in rt){var ot=(L=rt[it]).tileCoord,at=Q[1]-ot[1],st=Math.round(et[0]-(at-1)*Z),lt=Q[2]-ot[2],ut=Math.round(et[1]-(lt-1)*J),ct=st-(I=Math.round(et[0]-at*Z)),ht=ut-(A=Math.round(et[1]-lt*J)),ft=d===K;if(!(j=ft&&1!==L.getAlpha(g(this),t.time)))if(z){G.save(),q=[I,A,I+ct,A,I+ct,A+ht,I,A+ht];for(var pt=0,dt=z.length;pt<dt;++pt)if(d!==K&&K<V[pt]){var gt=z[pt];G.beginPath(),G.moveTo(q[0],q[1]),G.lineTo(q[2],q[3]),G.lineTo(q[4],q[5]),G.lineTo(q[6],q[7]),G.moveTo(gt[6],gt[7]),G.lineTo(gt[4],gt[5]),G.lineTo(gt[2],gt[3]),G.lineTo(gt[0],gt[1]),G.clip()}z.push(q),V.push(K)}else G.clearRect(I,A,ct,ht);this.drawTileImage(L,t,I,A,ct,ht,nt,ft,n.opacity),z&&!j?(G.restore(),this.renderedTiles.unshift(L)):this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,h,L)}}return this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.Hf||!On(this.Hf,E),this.Hf=E,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(t,h,p,u,o,v,d,c.getPreload()),this.scheduleExpireCache(t,h),this.postRender(G,t),n.extent&&G.restore(),D!==B.style.transform&&(B.style.transform=D),this.container},e.prototype.drawTileImage=function(t,e,n,r,i,o,a,s,l){var u=this.getTileImage(t);if(u){var c=g(this),h=s?t.getAlpha(c,e.time):1,f=l*h,p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,r,i,o),p&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=g(t);r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var r=g(e);r in t||(t[r]={}),t[r][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,r,i,o,a,s,l){var u=g(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,f,p,d,m,v=t.wantedTiles[u],y=t.tileQueue,b=0;for(m=n.getMinZoom();m<=a;++m)for(h=n.getTileRangeForExtentAndZ(o,m,h),f=n.getResolution(m),p=h.minX;p<=h.maxX;++p)for(d=h.minY;d<=h.maxY;++d)a-m<=s?(++b,0==(c=e.getTile(m,p,d,r,i)).getState()&&(v[c.getKey()]=!0,y.isKeyQueued(c.getKey())||y.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),f])),void 0!==l&&l(c)):e.useTile(m,p,d,i);e.updateCacheSize(b,i)},e}(hb);oS.prototype.getLayer;var aS=oS,sS="hybrid",lS="vector",uS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cS={image:[mb,fb,gb,db,vb],hybrid:[mb,gb],vector:[]},hS={hybrid:[db,vb,pb],vector:[mb,fb,gb,db,vb,pb]},fS=function(t){function e(e){var n=t.call(this,e)||this;return n.Uf=n.Bf.bind(n),n.qf=!1,n.Vd,n.Zd=null,n.Xf,n.Wd={},n.$d={},n.Hd=[1,0,0,1,0,0],n}return uS(e,t),e.prototype.prepareTile=function(t,e,n,r){var i,o=g(t),a=t.getState();return 2!==a&&3!==a||!(o in this.$d)||(at(this.$d[o]),delete this.$d[o]),2!==a&&3!==a||(this.Kd(t,e,n),this.Xd(t)&&(i=!0,r&&(this.Wd[o]=t))),i},e.prototype.getTile=function(e,n,r,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,l=a.projection,u=this.getLayer(),c=u.getSource().getTile(e,n,r,o,l);if(c.getState()<2){c.wantedResolution=s;var h=g(c);if(!(h in this.$d)){var f=it(c,W,this.prepareTile.bind(this,c,o,l,!0));this.$d[h]=f}}else{var p=i.viewHints;!(!p[0]&&!p[1])&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,o,l,!1)&&u.getRenderMode()!==lS&&this.Yd(c,i)}return t.prototype.getTile.call(this,e,n,r,i)},e.prototype.isDrawableTile=function(e){var n=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&(n.getRenderMode()===lS?g(n)in e.executorGroups:e.hasContext(n))},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var n=this.getLayer().getRevision();return this.Vd!=n&&(this.renderedTiles.length=0),this.Vd=n,t.prototype.prepareFrame.call(this,e)},e.prototype.Kd=function(t,e,n){var r=this.getLayer(),i=r.getRevision(),o=r.getRenderOrder()||null,a=t.wantedResolution,s=t.getReplayState(r);if(s.dirty||s.renderedResolution!==a||s.renderedRevision!=i||s.renderedRenderOrder!=o){var l=r.getSource(),u=r.getDeclutter(),c=l.getTileGrid(),h=l.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),f=l.getSourceTiles(e,n,t),p=g(r);delete t.hitDetectionImageData[p],t.executorGroups[p]=[],u&&(t.declutterExecutorGroups[p]=[]);for(var d=function(n,i){var d=f[n];if(2!=d.getState())return"continue";var g=d.tileCoord,v=c.getTileCoordExtent(g),y=Vn(h,v),b=mn(y,r.getRenderBuffer()*a,m.tmpExtent),w=On(v,y)?null:b;s.dirty=!1;var x=new sb(0,b,a,e),S=u?new sb(0,y,a,e):void 0,_=Db(a,e),k=function(t){var e,n=t.getStyleFunction()||r.getStyleFunction();if(n&&(e=n(t,a)),e){var i=this.renderFeature(t,_,e,x,S);this.qf=this.qf||i,s.dirty=s.dirty||i}},E=d.getFeatures();o&&o!==s.renderedRenderOrder&&E.sort(o);for(var M=0,T=E.length;M<T;++M){var O=E[M];w&&!Kn(w,O.getGeometry().getExtent())||k.call(m,O)}var P=x.finish(),C=r.getRenderMode()!==lS&&u&&1===f.length?null:y,I=new Ib(C,a,e,l.getOverlaps(),P,r.getRenderBuffer());if(t.executorGroups[p].push(I),S){var A=new Ib(null,a,e,l.getOverlaps(),S.finish(),r.getRenderBuffer());t.declutterExecutorGroups[p].push(A)}},m=this,v=0,y=f.length;v<y;++v)d(v);s.renderedRevision=i,s.renderedRenderOrder=o,s.renderedResolution=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=e.viewState.resolution,a=e.viewState.rotation;n=null==n?0:n;var s=this.getLayer(),l=s.getSource().getTileGridForProjection(e.viewState.projection),u=gn([t]);mn(u,o*n,u);for(var c,h={},f=function(t,e,n){var o=t.getId();void 0===o&&(o=g(t));var a=h[o];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return h[o]=!0,i.splice(i.lastIndexOf(a),1),r(t,s,e);a.geometry=e,a.distanceSq=n}}else{if(0===n)return h[o]=!0,r(t,s,e);i.push(h[o]={feature:t,layer:s,geometry:e,distanceSq:n,callback:r})}},p=this.renderedTiles,d=function(r,i){var h=p[r];if(!Kn(l.getTileCoordExtent(h.wrappedTileCoord),u))return"continue";var d=g(s),m=[h.executorGroups[d]],v=h.declutterExecutorGroups[d];v&&m.push(v),m.some((function(r){for(var i=r===v?e.declutterTree.all().map((function(t){return t.value})):null,s=0,l=r.length;s<l;++s){var u=r[s];if(c=u.forEachFeatureAtCoordinate(t,o,a,n,f,i))return!0}}))},m=0,v=p.length;!c&&m<v;++m)d(m);return c},e.prototype.getFeatures=function(t){return new Promise(function(e,n){for(var r,i=this.getLayer(),o=g(i),a=i.getSource(),s=this.renderedProjection,l=s.getExtent(),u=this.renderedResolution,c=a.getTileGridForProjection(s),h=oi(this.Zd,t.slice()),f=c.getTileCoordForCoordAndResolution(h,u),p=0,d=this.renderedTiles.length;p<d;++p)if(f.toString()===this.renderedTiles[p].tileCoord.toString()){if(2===(r=this.renderedTiles[p]).getState()){var m=c.getTileCoordExtent(r.tileCoord);a.getWrapX()&&s.canWrapX()&&!wn(l,m)&&wr(h,s);break}r=void 0}if(!r||r.loadingSourceTiles>0)e([]);else{var v=qn(c.getTileCoordExtent(r.wrappedTileCoord)),y=[(h[0]-v[0])/u,(v[1]-h[1])/u],b=r.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),w=r.hitDetectionImageData[o];if(!w&&!this.Gf){var x=ds(c.getTileSize(c.getZForResolution(u))),S=this.Xf;w=jb(x,[this.getRenderTransform(c.getTileCoordCenter(r.wrappedTileCoord),u,0,Rb,x[0]*Rb,x[1]*Rb,0)],b,i.getStyleFunction(),c.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(i).renderedResolution,S),r.hitDetectionImageData[o]=w}e(Nb(y,b,w))}}.bind(this))},e.prototype.handleFontsChanged=function(){B(this.Wd);var t=this.getLayer();t.getVisible()&&void 0!==this.Vd&&t.changed()},e.prototype.Bf=function(t){this.renderIfReadyAndVisible()},e.prototype.renderDeclutter=function(t){var e=this.context,n=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();for(var r=t.viewHints,i=!(r[0]||r[1]),o=this.renderedTiles,a=0,s=o.length;a<s;++a){var l=o[a],u=l.declutterExecutorGroups[g(this.getLayer())];if(u)for(var c=u.length-1;c>=0;--c)u[c].execute(this.context,1,this.getTileRenderTransform(l,t),t.viewState.rotation,i,void 0,t.declutterTree)}e.globalAlpha=n},e.prototype.getTileRenderTransform=function(t,e){var n=e.pixelRatio,r=e.viewState,i=r.center,o=r.resolution,a=r.rotation,s=e.size,l=Math.round(s[0]*n),u=Math.round(s[1]*n),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),h=t.tileCoord,f=c.getTileCoordExtent(t.wrappedTileCoord),p=c.getTileCoordExtent(h,this.tmpExtent)[0]-f[0];return ni(si(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(i,o,a,n,l,u,p))},e.prototype.renderFrame=function(e,n){var r=e.viewHints,i=!(r[0]||r[1]);this.Jd(i,e),t.prototype.renderFrame.call(this,e,n),this.Zd=e.pixelToCoordinateTransform.slice(),this.Xf=e.viewState.rotation;var o=this.getLayer(),a=o.getRenderMode(),s=o.getSource(),l=e.usedTiles[g(s)];for(var u in this.Wd)l&&u in l||delete this.Wd[u];var c=this.context,h=c.globalAlpha;c.globalAlpha=o.getOpacity();for(var f=hS[a],p=e.viewState.rotation,d=this.renderedTiles,m=[],v=[],y=d.length-1;y>=0;--y)for(var b=d[y],w=this.getTileRenderTransform(b,e),x=b.executorGroups[g(o)],S=!1,_=0,k=x.length;_<k;++_){var E=x[_];if(E.hasExecutors(f)){var M=b.tileCoord[0],T=void 0;if(!S&&(T=E.getClipCoords(w))){c.save();for(var O=0,P=m.length;O<P;++O){var C=m[O];M<v[O]&&(c.beginPath(),c.moveTo(T[0],T[1]),c.lineTo(T[2],T[3]),c.lineTo(T[4],T[5]),c.lineTo(T[6],T[7]),c.moveTo(C[6],C[7]),c.lineTo(C[4],C[5]),c.lineTo(C[2],C[3]),c.lineTo(C[0],C[1]),c.clip())}}E.execute(c,1,w,p,i,f),!S&&T&&(c.restore(),m.push(T),v.push(M),S=!0)}}return c.globalAlpha=h,this.container},e.prototype.Jd=function(t,e){for(var n in this.Wd){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var r=this.Wd[n];delete this.Wd[n],this.Yd(r,e)}},e.prototype.renderFeature=function(t,e,n,r,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)o=Ub(r,t,n[a],e,this.Uf,void 0,i)||o;else o=Ub(r,t,n,e,this.Uf,void 0,i);return o},e.prototype.Xd=function(t){var e=this.getLayer();if(e.getRenderMode()===lS)return!1;var n=t.getReplayState(e),r=e.getRevision(),i=t.wantedResolution;return n.renderedTileResolution!==i||n.renderedTileRevision!==r},e.prototype.Yd=function(t,e){var n=this.getLayer(),r=t.getReplayState(n),i=n.getRevision(),o=t.executorGroups[g(n)];r.renderedTileRevision=i;var a=t.wrappedTileCoord,s=a[0],l=n.getSource(),u=e.pixelRatio,c=e.viewState.projection,h=l.getTileGridForProjection(c),f=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,d=h.getResolution(s),m=t.getContext(n);u=Math.round(Math.max(u,p/u));var v=l.getTilePixelSize(s,u,c);m.canvas.width=v[0],m.canvas.height=v[1];var y=u/p;if(1!==y){var b=ei(this.Hd);si(b,y,y),m.setTransform.apply(m,b)}var w=h.getTileCoordExtent(a,this.tmpExtent),x=p/d,S=ei(this.Hd);si(S,x,-x),ui(S,-w[0],-w[3]);for(var _=0,k=o.length;_<k;++_)o[_].execute(m,y,S,0,!0,cS[n.getRenderMode()]);r.renderedTileResolution=t.wantedResolution},e}(aS),pS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dS=function(t){function e(e){var n=this,r=e||{},i=U({},r);delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,"image"===r.renderMode&&(r.renderMode=void 0);var o=r.renderMode||sS;return w(o==sS||o==lS,28),n.Qd=o,n.setPreload(r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return pS(e,t),e.prototype.createRenderer=function(){return new fS(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.Qd},e.prototype.getPreload=function(){return this.get(ex)},e.prototype.getUseInterimTilesOnError=function(){return this.get(nx)},e.prototype.setPreload=function(t){this.set(ex,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(nx,t)},e}(Uy),gS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mS=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,a)||this;return s.extent=null,s.sc=i,s.Ec=null,s.oi,s.projection=null,s.resolution,s.Ls=o,s.uc=r,s.key=r,s}return gS(e,t),e.prototype.getFormat=function(){return this.sc},e.prototype.getFeatures=function(){return this.Ec},e.prototype.load=function(){0==this.state&&(this.setState(1),this.Ls(this,this.uc),this.oi&&this.oi(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(3)},e.prototype.setFeatures=function(t){this.Ec=t,this.setState(2)},e.prototype.setLoader=function(t){this.oi=t},e}($s),vS=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.tp=0,this.np={},this.ep=null,this.rp=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.tp=0,this.np={},this.ep=null,this.rp=null},t.prototype.containsKey=function(t){return this.np.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.ep;e;)t(e.ip,e.op,this),e=e.newer},t.prototype.get=function(t,e){var n=this.np[t];return w(void 0!==n,15),n===this.rp||(n===this.ep?(this.ep=this.ep.newer,this.ep.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.rp,this.rp.newer=n,this.rp=n),n.ip},t.prototype.remove=function(t){var e=this.np[t];return w(void 0!==e,15),e===this.rp?(this.rp=e.older,this.rp&&(this.rp.newer=null)):e===this.ep?(this.ep=e.newer,this.ep&&(this.ep.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.np[t],--this.tp,e.ip},t.prototype.getCount=function(){return this.tp},t.prototype.getKeys=function(){var t,e=new Array(this.tp),n=0;for(t=this.rp;t;t=t.older)e[n++]=t.op;return e},t.prototype.getValues=function(){var t,e=new Array(this.tp),n=0;for(t=this.rp;t;t=t.older)e[n++]=t.ip;return e},t.prototype.peekLast=function(){return this.ep.ip},t.prototype.peekLastKey=function(){return this.ep.op},t.prototype.peekFirstKey=function(){return this.rp.op},t.prototype.pop=function(){var t=this.ep;return delete this.np[t.op],t.newer&&(t.newer.older=null),this.ep=t.newer,this.ep||(this.rp=null),--this.tp,t.ip},t.prototype.replace=function(t,e){this.get(t),this.np[t].ip=e},t.prototype.set=function(t,e){w(!(t in this.np),16);var n={op:t,newer:null,older:this.rp,ip:e};this.rp?this.rp.newer=n:this.ep=n,this.rp=n,this.np[t]=n,++this.tp},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function yS(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function bS(t,e,n){return t+"/"+e+"/"+n}function wS(t){return bS(t[0],t[1],t[2])}function xS(t){var e=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return bS(e[0],e[1],e[2])}function SS(t){return t.split("/").map(Number)}function _S(t){return(t[1]<<t[0])+t[2]}function kS(t,e){var n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o=e.getFullTileRange(n);return!o||o.containsXY(r,i)}var ES=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ES(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=SS(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(wS(e.tileCoord)),e.release())}.bind(this))}},e}(vS),TS="tileloadstart",OS="tileloadend",PS="tileloaderror",CS=[0,0,0],IS=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.ve=t.resolutions,w(f(this.ve,(function(t,e){return e-t}),!0),17),!t.origins)for(var n=0,r=this.ve.length-1;n<r;++n)if(e){if(this.ve[n]/this.ve[n+1]!==e){e=void 0;break}}else e=this.ve[n]/this.ve[n+1];this.le=e,this.maxZoom=this.ve.length-1,this.jo=void 0!==t.origin?t.origin:null,this.ap=null,void 0!==t.origins&&(this.ap=t.origins,w(this.ap.length==this.ve.length,20));var i=t.extent;void 0===i||this.jo||this.ap||(this.jo=qn(i)),w(!this.jo&&this.ap||this.jo&&!this.ap,18),this.sp=null,void 0!==t.tileSizes&&(this.sp=t.tileSizes,w(this.sp.length==this.ve.length,19)),this.up=void 0!==t.tileSize?t.tileSize:this.sp?null:Po,w(!this.up&&this.sp||this.up&&!this.sp,22),this.Rt=void 0!==i?i:null,this.fp=null,this.cp=[0,0],this.hp=[0,0,0,0],void 0!==t.sizes?this.fp=t.sizes.map((function(t,e){var n=new rS(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){var r=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(r.minX,n.minX),n.maxX=Math.min(r.maxX,n.maxX),n.minY=Math.max(r.minY,n.minY),n.maxY=Math.min(r.maxY,n.maxY)}return n}),this):i&&this.lp(i)}return t.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var a=r.minY,s=r.maxY;a<=s;++a)n([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,r){var i,o,a=null,s=t[0]-1;for(2===this.le?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,r);s>=this.minZoom;){if(e(s,2===this.le?nS(i=Math.floor(i/2),i,o=Math.floor(o/2),o,n):this.getTileRangeForExtentAndZ(a,s,n)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.Rt},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.jo?this.jo:this.ap[t]},t.prototype.getResolution=function(t){return this.ve[t]},t.prototype.getResolutions=function(){return this.ve},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.le){var r=2*t[1],i=2*t[2];return nS(r,r+1,i,i+1,e)}var o=this.getTileCoordExtent(t,n||this.hp);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var r=t[0],i=t[1],o=t[2];if(e===r)return nS(i,o,i,o,n);if(this.le){var a=Math.pow(this.le,e-r),s=Math.floor(i*a),l=Math.floor(o*a);return e<r?nS(s,s,l,l,n):nS(s,Math.floor(a*(i+1))-1,l,Math.floor(a*(o+1))-1,n)}var u=this.getTileCoordExtent(t,this.hp);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),i=this.getResolution(t),o=ds(this.getTileSize(t),this.cp),a=r[0]+e.minX*o[0]*i,s=r[0]+(e.maxX+1)*o[0]*i;return kn(a,r[1]+e.minY*o[1]*i,s,r[1]+(e.maxY+1)*o[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=CS;this.vp(t[0],t[3],e,!1,r);var i=r[1],o=r[2];return this.vp(t[2],t[1],e,!0,r),nS(i,r[1],o,r[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=ds(this.getTileSize(t[0]),this.cp);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=ds(this.getTileSize(t[0]),this.cp),o=n[0]+t[1]*i[0]*r,a=n[1]-(t[2]+1)*i[1]*r;return kn(o,a,o+i[0]*r,a+i[1]*r,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.dp(t[0],t[1],e,!1,n)},t.prototype.dp=function(t,e,n,r,i){var o=this.getZForResolution(n),a=n/this.getResolution(o),s=this.getOrigin(o),l=ds(this.getTileSize(o),this.cp),u=r?.5:0,c=r?.5:0,h=Math.floor((t-s[0])/n+u),f=Math.floor((s[1]-e)/n+c),p=a*h/l[0],d=a*f/l[1];return r?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),yS(o,p,d,i)},t.prototype.vp=function(t,e,n,r,i){var o=this.getOrigin(n),a=this.getResolution(n),s=ds(this.getTileSize(n),this.cp),l=r?.5:0,u=r?.5:0,c=Math.floor((t-o[0])/a+l),h=Math.floor((o[1]-e)/a+u),f=c/s[0],p=h/s[1];return r?(f=Math.ceil(f)-1,p=Math.ceil(p)-1):(f=Math.floor(f),p=Math.floor(p)),yS(n,f,p,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.vp(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.ve[t[0]]},t.prototype.getTileSize=function(t){return this.up?this.up:this.sp[t]},t.prototype.getFullTileRange=function(t){return this.fp?this.fp[t]:this.Rt?this.getTileRangeForExtentAndZ(this.Rt,t):null},t.prototype.getZForResolution=function(t,e){return x(a(this.ve,t,e||0),this.minZoom,this.maxZoom)},t.prototype.lp=function(t){for(var e=this.ve.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fp=n},t}();function AS(t){var e=t.getDefaultTileGrid();return e||(e=$S(t),t.setDefaultTileGrid(e)),e}function LS(t,e,n){var r=e[0],i=t.getTileCoordCenter(e),o=FS(n);if(bn(o,i))return e;var a=Wn(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,r)}function RS(t,e,n,r){var i=void 0!==r?r:dn,o=NS(t,e,n);return new IS({extent:t,origin:Un(t,i),resolutions:o,tileSize:n})}function jS(t){var e=t||{},n=e.extent||Mr("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:NS(n,e.maxZoom,e.tileSize,e.maxResolution)};return new IS(r)}function NS(t,e,n,r){for(var i=void 0!==e?e:42,o=zn(t),a=Wn(t),s=ds(void 0!==n?n:Po),l=r>0?r:Math.max(a/s[0],o/s[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function $S(t,e,n,r){return RS(FS(t),e,n,r)}function FS(t){var e=(t=Mr(t)).getExtent();if(!e){var n=180*Ge[Ue.DEGREES]/t.getMetersPerUnit();e=kn(-n,-n,n,n)}return e}var DS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),GS=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.on,n.once,n.un,n.pp=void 0!==e.opaque&&e.opaque,n.yp=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var r=e.tileGrid;return r&&ds(r.getTileSize(r.getMinZoom()),[256,256]),n.tileCache=new MS(e.cacheSize||0),n.tmpSize=[0,0],n.op=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return DS(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,r){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)a=bS(e,u,c),s=!1,i.containsKey(a)&&(s=2===(o=i.get(a)).getState())&&(s=!1!==r(o)),s||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.op},e.prototype.setKey=function(t){this.op!==t&&(this.op=t,this.changed())},e.prototype.getOpaque=function(t){return this.pp},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,r,i){return p()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:AS(t)},e.prototype.getTileCacheForProjection=function(t){return w(Lr(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.yp},e.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=this.getTilePixelRatio(e),o=ds(r.getTileSize(t),this.tmpSize);return 1==i?o:ps(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=LS(r,t,n)),kS(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,r){},e}(Xb),US=function(t){function e(e,n){var r=t.call(this,e)||this;return r.tile=n,r}return DS(e,t),e}(R),BS=GS;function zS(t,e){var n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){return a?t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],n=e.getFullTileRange(t);return w(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function VS(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=zS(t[i],e);return qS(r)}function qS(t){return 1===t.length?t[0]:function(e,n,r){if(e){var i=P(_S(e),t.length);return t[i](e,n,r)}}}function HS(t,e,n){}function WS(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r=n[1].charCodeAt(0),i=n[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}var KS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YS=function(t){function e(n){var r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return r.mp=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(r.tileUrlFunction=n.tileUrlFunction),r.urls=null,n.urls?r.setUrls(n.urls):n.url&&r.setUrl(n.url),r.bp={},r}return KS(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,r=g(n),i=n.getState();1==i?(this.bp[r]=!0,e=TS):r in this.bp&&(delete this.bp[r],e=3==i?PS:2==i?OS:void 0),null!=e&&this.dispatchEvent(new US(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=WS(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.mp?this.setTileUrlFunction(VS(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var r=bS(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(BS),XS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZS=[],JS=function(t){function e(e,n,r,i){var o=t.call(this,e,n,{transition:0})||this;return o.vf={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.wp={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.wrappedTileCoord=r,o}return XS(e,t),e.prototype.getContext=function(t){var e=g(t);return e in this.vf||(this.vf[e]=Gt(1,1,ZS)),this.vf[e]},e.prototype.hasContext=function(t){return g(t)in this.vf},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=g(t);return e in this.wp||(this.wp[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.wp[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.vf)ZS.push(this.vf[e].canvas),delete this.vf[e];t.prototype.release.call(this)},e}($s),QS=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t_=function(t){function e(e){var n=this,r=e.projection||"EPSG:3857",i=e.extent||FS(r),o=e.tileGrid||jS({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:r,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:e_,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).sc=e.format?e.format:null,n.sourceTileCache=new MS(n.tileCache.highWaterMark),n.uf=null==e.overlaps||e.overlaps,n.tileClass=e.tileClass?e.tileClass:mS,n.gp={},n}return QS(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],n=this.tileCache;if(0===n.getCount())return e;var r=SS(n.peekFirstKey())[0],i=this.tileGrid;return n.forEach((function(n){if(n.tileCoord[0]===r&&2===n.getState())for(var o=n.getSourceTiles(),a=0,s=o.length;a<s;++a){var l=o[a],u=l.tileCoord;if(Kn(t,i.getTileCoordExtent(u))){var c=l.getFeatures();if(c)for(var h=0,f=c.length;h<f;++h){var p=c[h],d=p.getGeometry();Kn(t,d.getExtent())&&e.push(p)}}}})),e},e.prototype.getOverlaps=function(){return this.uf},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e),i=Object.keys(n).reduce((function(t,e){var n=xS(e);if(r.containsKey(n))for(var i=r.get(n).sourceTiles,o=0,a=i.length;o<a;++o)t[i[o].getKey()]=!0;return t}),{});t.prototype.expireCache.call(this,e,n),this.sourceTileCache.expireCache(i)},e.prototype.getSourceTiles=function(t,e,n){var r=this;if(0===n.getState()){n.setState(1);var i=n.wrappedTileCoord,o=this.getTileGridForProjection(e),a=o.getTileCoordExtent(i),s=i[0],l=o.getResolution(s);mn(a,-l,a);var u=this.tileGrid,c=u.getExtent();c&&Vn(a,c,a);var h=u.getZForResolution(l,1);u.forEachTileCoord(a,h,(function(i){var o=r.tileUrlFunction(i,t,e),a=r.sourceTileCache.containsKey(o)?r.sourceTileCache.get(o):new r.tileClass(i,o?0:4,o,r.sc,r.tileLoadFunction);n.sourceTiles.push(a);var s=a.getState();s<2&&(a.addEventListener(W,(function t(e){r.handleTileChange(e);var i=a.getState();if(2===i||3===i){var o=a.getKey();o in n.errorTileKeys?2===a.getState()&&delete n.errorTileKeys[o]:n.loadingSourceTiles--,3===i?n.errorTileKeys[o]=!0:a.removeEventListener(W,t),0===n.loadingSourceTiles&&n.setState(V(n.errorTileKeys)?2:3)}})),n.loadingSourceTiles++),0===s&&(a.extent=u.getTileCoordExtent(i),a.projection=e,a.resolution=u.getResolution(i[0]),r.sourceTileCache.set(o,a),a.load())})),n.loadingSourceTiles||n.setState(n.sourceTiles.some((function(t){return 3===t.getState()}))?3:2)}return n.sourceTiles},e.prototype.getTile=function(t,e,n,r,i){var o,a=bS(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var l=[t,e,n],u=this.getTileCoordForTileUrlFunction(l,i),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(u&&c){var f=h.getTileCoordExtent(u);mn(f,-h.getResolution(t),f),Kn(c,f)||(u=null)}var p=!0;if(null!==u){var d=this.tileGrid,g=h.getResolution(t),m=d.getZForResolution(g,1),v=h.getTileCoordExtent(u);mn(v,-g,v),d.forEachTileCoord(v,m,function(t){p=p&&!this.tileUrlFunction(t,r,i)}.bind(this))}var y=new JS(l,p?4:0,u,this.getSourceTiles.bind(this,r,i));return y.key=s,o?(y.interimTile=o,y.refreshInterimChain(),this.tileCache.replace(a,y)):this.tileCache.set(a,y),y},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),n=this.gp[e];if(!n){var r=this.tileGrid;n=$S(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0),this.gp[e]=n}return n},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,n){var r=ds(this.getTileGridForProjection(n).getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]},e.prototype.updateCacheSize=function(e,n){t.prototype.updateCacheSize.call(this,2*e,n),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(n).highWaterMark},e}(YS);function e_(t,e){t.setLoader((function(n,r,i){sl(e,t.getFormat(),n,r,i,t.onLoad.bind(t),t.onError.bind(t))}))}var n_=n(1063);function r_(t){return function(t){if(Array.isArray(t))return b_(t)}(t)||i_(t)||y_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i_(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function o_(t,e){return s_(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||y_(t,e)||a_()}function a_(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s_(t){if(Array.isArray(t))return t}function l_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u_(t,e,n){return e&&l_(t.prototype,e),n&&l_(t,n),t}function c_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h_(t,e){if(e&&("object"===w_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f_(t){var e="function"==typeof Map?new Map:void 0;return(f_=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p_(t,arguments,m_(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g_(r,t)})(t)}function p_(t,e,n){return(p_=d_()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&g_(i,n.prototype),i}).apply(null,arguments)}function d_(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function g_(t,e){return(g_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m_(t){return(m_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v_(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=y_(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function y_(t,e){if(t){if("string"==typeof t)return b_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b_(t,e):void 0}}function b_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w_(t){return(w_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var x_={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90Â° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) â it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnât support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] â  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] â¥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] â¤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] â {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] â {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 â§ ... â§ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 â¨ ... â¨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `Â¬f0 â§ ... â§ Â¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0Â° (0Â° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0Â° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0Â°, directly above, to 180Â°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0Â° is directly above, at zenith, and 90Â° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0Â° is directly above, at zenith, and 90Â° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},S_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function __(t){var e={exports:{}};return t(e,e.exports),e.exports}var k_=__((function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==w_(S_)&&S_;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,l=2147483647,u=36,c=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function m(t){throw RangeError(p[t])}function v(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function y(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+v((t=t.replace(f,".")).split("."),e).join(".")}function b(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function w(t){return v(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+g(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=u)t=d(t/35);return d(r+36*t/(t+38))}function _(t){var e,n,r,i,o,a,s,c,h,f,p,g=[],v=t.length,y=0,b=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&m("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=y,a=1,s=u;i>=v&&m("invalid-input"),((c=(p=t.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:u)>=u||c>d((l-y)/a))&&m("overflow"),y+=c*a,!(c<(h=s<=x?1:s>=x+26?26:s-x));s+=u)a>d(l/(f=u-h))&&m("overflow"),a*=f;x=S(y-o,e=g.length+1,0==o),d(y/e)>l-b&&m("overflow"),b+=d(y/e),y%=e,g.splice(y++,0,b)}return w(g)}function k(t){var e,n,r,i,o,a,s,c,h,f,p,v,y,w,_,k=[];for(v=(t=b(t)).length,e=128,n=0,o=72,a=0;a<v;++a)(p=t[a])<128&&k.push(g(p));for(r=i=k.length,i&&k.push("-");r<v;){for(s=l,a=0;a<v;++a)(p=t[a])>=e&&p<s&&(s=p);for(s-e>d((l-n)/(y=r+1))&&m("overflow"),n+=(s-e)*y,e=s,a=0;a<v;++a)if((p=t[a])<e&&++n>l&&m("overflow"),p==e){for(c=n,h=u;!(c<(f=h<=o?1:h>=o+26?26:h-o));h+=u)_=c-f,w=u-f,k.push(g(x(f+_%w,0))),c=d(_/w);k.push(g(x(c,0))),o=S(n,y,r==i),n=0,++r}++n,++e}return k.join("")}if(a={version:"1.3.2",ucs2:{decode:b,encode:w},decode:_,encode:k,toASCII:function(t){return y(t,(function(t){return h.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return y(t,(function(t){return c.test(t)?_(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(S_)})),E_=function(t){return"string"==typeof t},M_=function(t){return"object"===w_(t)&&null!==t},T_=function(t){return null===t};function O_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P_=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var u,c,h,f,p=t[l].replace(o,"%20"),d=p.indexOf(n);d>=0?(u=p.substr(0,d),c=p.substr(d+1)):(u=p,c=""),h=decodeURIComponent(u),f=decodeURIComponent(c),O_(i,h)?Array.isArray(i[h])?i[h].push(f):i[h]=[i[h],f]:i[h]=f}return i},C_=function(t){switch(w_(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},I_=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===w_(t)?Object.keys(t).map((function(r){var i=encodeURIComponent(C_(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return i+encodeURIComponent(C_(t))})).join(e):i+encodeURIComponent(C_(t[r]))})).join(e):r?encodeURIComponent(C_(r))+n+encodeURIComponent(C_(t)):""},A_=__((function(t,e){e.decode=e.parse=P_,e.encode=e.stringify=I_}));function L_(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var R_=/^([a-z0-9.+-]+:)/i,j_=/:[0-9]*$/,N_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,$_=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),F_=["'"].concat($_),D_=["%","/","?",";","#"].concat(F_),G_=["/","?","#"],U_=/^[+a-z0-9A-Z_-]{0,63}$/,B_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,z_={javascript:!0,"javascript:":!0},V_={javascript:!0,"javascript:":!0},q_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function H_(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)t[s]=a[s]}return t}L_.prototype.parse=function(t,e,n){if(!E_(t))throw new TypeError("Parameter 'url' must be a string, not "+w_(t));var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!n&&1===t.split("#").length){var s=N_.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?A_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=R_.exec(a);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,a=a.substr(l.length)}if(n||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||l&&V_[l]||(a=a.substr(2),this.slashes=!0)}if(!V_[l]&&(c||l&&!q_[l])){for(var h,f,p=-1,d=0;d<G_.length;d++)-1!==(g=a.indexOf(G_[d]))&&(-1===p||g<p)&&(p=g);for(-1!==(f=-1===p?a.lastIndexOf("@"):a.lastIndexOf("@",p))&&(h=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(h)),p=-1,d=0;d<D_.length;d++){var g;-1!==(g=a.indexOf(D_[d]))&&(-1===p||g<p)&&(p=g)}-1===p&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),y=(d=0,v.length);d<y;d++){var b=v[d];if(b&&!b.match(U_)){for(var w="",x=0,S=b.length;x<S;x++)b.charCodeAt(x)>127?w+="x":w+=b[x];if(!w.match(U_)){var _=v.slice(0,d),k=v.slice(d+1),E=b.match(B_);E&&(_.push(E[1]),k.unshift(E[2])),k.length&&(a="/"+k.join(".")+a),this.hostname=_.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=k_.toASCII(this.hostname));var M=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+M,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!z_[u])for(d=0,y=F_.length;d<y;d++){var O=F_[d];if(-1!==a.indexOf(O)){var P=encodeURIComponent(O);P===O&&(P=escape(O)),a=a.split(O).join(P)}}var C=a.indexOf("#");-1!==C&&(this.hash=a.substr(C),a=a.slice(0,C));var I=a.indexOf("?");if(-1!==I?(this.search=a.substr(I),this.query=a.substr(I+1),e&&(this.query=A_.parse(this.query)),a=a.slice(0,I)):e&&(this.search="",this.query={}),a&&(this.pathname=a),q_[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var A=this.search||"";this.path=M+A}return this.href=this.format(),this},L_.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&M_(this.query)&&Object.keys(this.query).length&&(o=A_.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||q_[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},L_.prototype.resolve=function(t){return this.resolveObject(function(t,e,n){if(t&&M_(t)&&t instanceof L_)return t;var r=new L_;return r.parse(t,e,n),r}(t,!1,!0)).format()},L_.prototype.resolveObject=function(t){if(E_(t)){var e=new L_;e.parse(t,!1,!0),t=e}for(var n=new L_,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(n[l]=t[l])}return q_[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!q_[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||V_[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",d=n.search||"";n.path=p+d}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=m||g||n.host&&t.pathname,y=v,b=n.pathname&&n.pathname.split("/")||[],w=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!q_[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),v=v&&(""===f[0]||""===b[0])),m)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,b=f;else if(f.length)b||(b=[]),b.pop(),b=b.concat(f),n.search=t.search,n.query=t.query;else if(!function(t){return null==t}(t.search))return w&&(n.hostname=n.host=b.shift(),(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift())),n.search=t.search,n.query=t.query,T_(n.pathname)&&T_(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=b.slice(-1)[0],S=(n.host||t.host||b.length>1)&&("."===x||".."===x)||""===x,_=0,k=b.length;k>=0;k--)"."===(x=b[k])?b.splice(k,1):".."===x?(b.splice(k,1),_++):_&&(b.splice(k,1),_--);if(!v&&!y)for(;_--;_)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),S&&"/"!==b.join("/").substr(-1)&&b.push("");var E,M=""===b[0]||b[0]&&"/"===b[0].charAt(0);return w&&(n.hostname=n.host=M?"":b.length?b.shift():"",(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift())),(v=v||n.host&&b.length)&&!M&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),T_(n.pathname)&&T_(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},L_.prototype.parseHost=function(){var t=this.host,e=j_.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var W_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g_(t,e)}(i,t);var e,n,r=(e=i,n=d_(),function(){var t,r=m_(e);if(n){var i=m_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return h_(this,t)});function i(t,e){var n;return c_(this,i),(n=r.call(this,e)).message=e,n.key=t,n}return i}(f_(Error)),K_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c_(this,t),this.parent=e,this.bindings={};var r,i=v_(n);try{for(i.s();!(r=i.n()).done;){var o=o_(r.value,2),a=o[0],s=o[1];this.bindings[a]=s}}catch(t){i.e(t)}finally{i.f()}}return u_(t,[{key:"concat",value:function(e){return new t(this,e)}},{key:"get",value:function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}},{key:"has",value:function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}]),t}(),Y_={kind:"null"},X_={kind:"number"},Z_={kind:"string"},J_={kind:"boolean"},Q_={kind:"color"},tk={kind:"object"},ek={kind:"value"},nk={kind:"collator"},rk={kind:"formatted"},ik={kind:"resolvedImage"};function ok(t,e){return{kind:"array",itemType:t,N:e}}function ak(t){if("array"===t.kind){var e=ak(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}var sk=[Y_,X_,Z_,J_,Q_,rk,tk,ok(ek),ik];function lk(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!lk(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind){var n,r=v_(sk);try{for(r.s();!(n=r.n()).done;)if(!lk(n.value,e))return null}catch(t){r.e(t)}finally{r.f()}}}return"Expected ".concat(ak(t)," but found ").concat(ak(e)," instead.")}function uk(t,e){return e.some((function(e){return e.kind===t.kind}))}function ck(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"===w_(t):e===w_(t)}))}var hk=__((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),h=i.substr(l+1,u-(l+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),g=a(h[2]),m=g<=.5?g*(d+1):g+d-g*d,v=2*g-m;return[r(255*s(v,m,p+1/3)),r(255*s(v,m,p)),r(255*s(v,m,p-1/3)),f];default:return null}}return null}}catch(t){}})),fk=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;c_(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return u_(t,[{key:"toString",value:function(){var t=o_(this.toArray(),4),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba(".concat(Math.round(e),",").concat(Math.round(n),",").concat(Math.round(r),",").concat(i,")")}},{key:"toArray",value:function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}],[{key:"parse",value:function(e){if(e){if(e instanceof t)return e;if("string"==typeof e){var n=hk.parseCSSColor(e);if(n)return new t(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}}}}]),t}();fk.black=new fk(0,0,0,1),fk.white=new fk(1,1,1,1),fk.transparent=new fk(0,0,0,0),fk.red=new fk(1,0,0,1),fk.blue=new fk(0,0,1,1);var pk=function(){function t(e,n,r){c_(this,t),this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return u_(t,[{key:"compare",value:function(t,e){return this.collator.compare(t,e)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),t}(),dk=function t(e,n,r,i,o){c_(this,t),this.text=e,this.image=n,this.scale=r,this.fontStack=i,this.textColor=o},gk=function(){function t(e){c_(this,t),this.sections=e}return u_(t,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")}},{key:"serialize",value:function(){var t,e=["format"],n=v_(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}}}catch(t){n.e(t)}finally{n.f()}return e}}],[{key:"fromString",value:function(e){return new t([new dk(e,null,null,null,null)])}},{key:"factory",value:function(e){return e instanceof t?e:t.fromString(e)}}]),t}(),mk=function(){function t(e){c_(this,t),this.name=e.name,this.available=e.available}return u_(t,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(e){return e?new t({name:e,available:!1}):null}}]),t}();function vk(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([t,e,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function yk(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof fk)return!0;if(t instanceof pk)return!0;if(t instanceof gk)return!0;if(t instanceof mk)return!0;if(Array.isArray(t)){var e,n=v_(t);try{for(n.s();!(e=n.n()).done;)if(!yk(e.value))return!1}catch(t){n.e(t)}finally{n.f()}return!0}if("object"===w_(t)){for(var r in t)if(!yk(t[r]))return!1;return!0}return!1}function bk(t){if(null===t)return Y_;if("string"==typeof t)return Z_;if("boolean"==typeof t)return J_;if("number"==typeof t)return X_;if(t instanceof fk)return Q_;if(t instanceof pk)return nk;if(t instanceof gk)return rk;if(t instanceof mk)return ik;if(Array.isArray(t)){var e,n,r=t.length,i=v_(t);try{for(i.s();!(n=i.n()).done;){var o=bk(n.value);if(e){if(e===o)continue;e=ek;break}e=o}}catch(t){i.e(t)}finally{i.f()}return ok(e||ek,r)}return tk}function wk(t){var e=w_(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof fk||t instanceof gk||t instanceof mk?t.toString():JSON.stringify(t)}var xk=function(){function t(e,n){c_(this,t),this.type=e,this.value=n}return u_(t,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof fk?["rgba"].concat(this.value.toArray()):this.value instanceof gk?this.value.serialize():this.value}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!yk(e[1]))return n.error("invalid value");var r=e[1],i=bk(r),o=n.expectedType;return"array"!==i.kind||0!==i.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(i=o),new t(i,r)}}]),t}(),Sk=function(){function t(e){c_(this,t),this.name="ExpressionEvaluationError",this.message=e}return u_(t,[{key:"toJSON",value:function(){return this.message}}]),t}(),_k={string:Z_,number:X_,boolean:J_,object:tk},kk=function(){function t(e,n){c_(this,t),this.type=e,this.args=n}return u_(t,[{key:"evaluate",value:function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!lk(this.type,bk(n)))return n;if(e===this.args.length-1)throw new Sk("Expected value to be of type ".concat(ak(this.type),", but found ").concat(ak(bk(n))," instead."))}return null}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r,i=1,o=e[0];if("array"===o){var a,s;if(e.length>2){var l=e[1];if("string"!=typeof l||!(l in _k)||"object"===l)return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=_k[l],i++}else a=ek;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=e[2],i++}r=ok(a,s)}else r=_k[o];for(var u=[];i<e.length;i++){var c=n.parse(e[i],i,ek);if(!c)return null;u.push(c)}return new t(r,u)}}]),t}(),Ek=function(){function t(e){c_(this,t),this.type=rk,this.sections=e}return u_(t,[{key:"evaluate",value:function(t){return new gk(this.sections.map((function(e){var n=e.content.evaluate(t);return bk(n)===ik?new dk("",n,null,null,null):new dk(wk(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}},{key:"eachChild",value:function(t){var e,n=v_(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t,e=["format"],n=v_(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}}catch(t){n.e(t)}finally{n.f()}return e}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"===w_(r))return n.error("First argument must be an image or text section.");for(var i=[],o=!1,a=1;a<=e.length-1;++a){var s=e[a];if(o&&"object"===w_(s)&&!Array.isArray(s)){o=!1;var l=null;if(s["font-scale"]&&!(l=n.parse(s["font-scale"],1,X_)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,ok(Z_))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,Q_)))return null;var h=i[i.length-1];h.scale=l,h.font=u,h.textColor=c}else{var f=n.parse(e[a],1,ek);if(!f)return null;var p=f.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new t(i)}}]),t}(),Mk=function(){function t(e){c_(this,t),this.type=ik,this.input=e}return u_(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=mk.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,Z_);return r?new t(r):n.error("No image name provided.")}}]),t}(),Tk={"to-boolean":J_,"to-color":Q_,"to-number":X_,"to-string":Z_},Ok=function(){function t(e,n){c_(this,t),this.type=e,this.args=n}return u_(t,[{key:"evaluate",value:function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){var e,n,r,i=v_(this.args);try{for(i.s();!(r=i.n()).done;){if(e=r.value.evaluate(t),n=null,e instanceof fk)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):vk(e[0],e[1],e[2],e[3])))return new fk(e[0]/255,e[1]/255,e[2]/255,e[3])}}catch(t){i.e(t)}finally{i.f()}throw new Sk(n||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){var a,s=null,l=v_(this.args);try{for(l.s();!(a=l.n()).done;){if(null===(s=a.value.evaluate(t)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(t){l.e(t)}finally{l.f()}throw new Sk("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?gk.fromString(wk(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?mk.fromString(wk(this.args[0].evaluate(t))):wk(this.args[0].evaluate(t))}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new Ek([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Mk(this.args[0]).serialize();var t=["to-".concat(this.type.kind)];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return n.error("Expected one argument.");for(var i=Tk[r],o=[],a=1;a<e.length;a++){var s=n.parse(e[a],a,ek);if(!s)return null;o.push(s)}return new t(i,o)}}]),t}(),Pk=["Unknown","Point","LineString","Polygon"],Ck=function(){function t(){c_(this,t),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return u_(t,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?Pk[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=fk.parse(t)),e}}]),t}(),Ik=function(){function t(e,n,r,i){c_(this,t),this.name=e,this.type=n,this._evaluate=r,this.args=i}return u_(t,[{key:"evaluate",value:function(t){return this._evaluate(t,this.args)}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,n){var r=e[0],i=t.definitions[r];if(!i)return n.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,a=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,l=s.filter((function(t){var n=o_(t,1)[0];return!Array.isArray(n)||n.length===e.length-1})),u=null,c=v_(l);try{for(c.s();!(o=c.n()).done;){var h=o_(o.value,2),f=h[0],p=h[1];u=new eE(n.registry,n.path,null,n.scope);for(var d=[],g=!1,m=1;m<e.length;m++){var v=e[m],y=Array.isArray(f)?f[m-1]:f.type,b=u.parse(v,1+d.length,y);if(!b){g=!0;break}d.push(b)}if(!g)if(Array.isArray(f)&&f.length!==d.length)u.error("Expected ".concat(f.length," arguments, but found ").concat(d.length," instead."));else{for(var w=0;w<d.length;w++){var x=Array.isArray(f)?f[w]:f.type,S=d[w];u.concat(w+1).checkSubtype(x,S.type)}if(0===u.errors.length)return new t(r,a,p,d)}}}catch(t){c.e(t)}finally{c.f()}if(1===l.length){var _;(_=n.errors).push.apply(_,r_(u.errors))}else{for(var k=(l.length?l:s).map((function(t){var e;return e=o_(t,1)[0],Array.isArray(e)?"(".concat(e.map(ak).join(", "),")"):"(".concat(ak(e.type),"...)")})).join(" | "),E=[],M=1;M<e.length;M++){var T=n.parse(e[M],1+E.length);if(!T)return null;E.push(ak(T.type))}n.error("Expected arguments of type ".concat(k,", but found (").concat(E.join(", "),") instead."))}return null}},{key:"register",value:function(e,n){for(var r in t.definitions=n,n)e[r]=t}}]),t}(),Ak=function(){function t(e,n,r){c_(this,t),this.type=nk,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=n}return u_(t,[{key:"evaluate",value:function(t){return new pk(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}},{key:"eachChild",value:function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected one argument.");var r=e[1];if("object"!==w_(r)||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,J_);if(!i)return null;var o=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,J_);if(!o)return null;var a=null;return r.locale&&!(a=n.parse(r.locale,1,Z_))?null:new t(i,o,a)}}]),t}(),Lk=8192;function Rk(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function jk(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Nk(t,e){var n,r=(180+t[0])/360,i=(n=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360),o=Math.pow(2,e.z);return[Math.round(r*o*Lk),Math.round(i*o*Lk)]}function $k(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function Fk(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function Dk(t,e){for(var n=!1,r=0,i=e.length;r<i;r++)for(var o=e[r],a=0,s=o.length;a<s-1;a++){if($k(t,o[a],o[a+1]))return!1;Fk(t,o[a],o[a+1])&&(n=!n)}return n}function Gk(t,e){for(var n=0;n<e.length;n++)if(Dk(t,e[n]))return!0;return!1}function Uk(t,e,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=e[0]-n[0],s=e[1]-n[1],l=r[0]-n[0],u=r[1]-n[1],c=i*u-l*o,h=a*u-l*s;return c>0&&h<0||c<0&&h>0}function Bk(t,e,n){var r,i,o,a,s,l,u,c,h=v_(n);try{for(h.s();!(r=h.n()).done;)for(var f=r.value,p=0;p<f.length-1;++p)if(i=t,o=e,a=f[p],s=f[p+1],void 0,void 0,void 0,void 0,c=[o[0]-i[0],o[1]-i[1]],0!=(l=[s[0]-a[0],s[1]-a[1]])[0]*(u=c)[1]-l[1]*u[0]&&Uk(i,o,a,s)&&Uk(a,s,i,o))return!0}catch(t){h.e(t)}finally{h.f()}return!1}function zk(t,e){for(var n=0;n<t.length;++n)if(!Dk(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(Bk(t[r],t[r+1],e))return!1;return!0}function Vk(t,e){for(var n=0;n<e.length;n++)if(zk(t,e[n]))return!0;return!1}function qk(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=Nk(t[i][a],n);Rk(e,s),o.push(s)}r.push(o)}return r}function Hk(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=qk(t[i],e,n);r.push(o)}return r}function Wk(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}Rk(e,t)}function Kk(t,e,n,r){var i,o=Math.pow(2,r.z)*Lk,a=[r.x*Lk,r.y*Lk],s=[],l=v_(t);try{for(l.s();!(i=l.n()).done;){var u,c=v_(i.value);try{for(c.s();!(u=c.n()).done;){var h=u.value,f=[h.x+a[0],h.y+a[1]];Wk(f,e,n,o),s.push(f)}}catch(t){c.e(t)}finally{c.f()}}}catch(t){l.e(t)}finally{l.f()}return s}function Yk(t,e,n,r){var i,o=Math.pow(2,r.z)*Lk,a=[r.x*Lk,r.y*Lk],s=[],l=v_(t);try{for(l.s();!(i=l.n()).done;){var u,c=i.value,h=[],f=v_(c);try{for(f.s();!(u=f.n()).done;){var p=u.value,d=[p.x+a[0],p.y+a[1]];Rk(e,d),h.push(d)}}catch(t){f.e(t)}finally{f.f()}s.push(h)}}catch(t){l.e(t)}finally{l.f()}if(e[2]-e[0]<=o/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}(e);var g,m=v_(s);try{for(m.s();!(g=m.n()).done;){var v,y=v_(g.value);try{for(y.s();!(v=y.n()).done;)Wk(v.value,e,n,o)}catch(t){y.e(t)}finally{y.f()}}}catch(t){m.e(t)}finally{m.f()}}return s}var Xk=function(){function t(e,n){c_(this,t),this.type=J_,this.geojson=e,this.geometries=n}return u_(t,[{key:"evaluate",value:function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=qk(e.coordinates,r,i),a=Kk(t.geometry(),n,r,i);if(!jk(n,r))return!1;var s,l=v_(a);try{for(l.s();!(s=l.n()).done;)if(!Dk(s.value,o))return!1}catch(t){l.e(t)}finally{l.f()}}if("MultiPolygon"===e.type){var u=Hk(e.coordinates,r,i),c=Kk(t.geometry(),n,r,i);if(!jk(n,r))return!1;var h,f=v_(c);try{for(f.s();!(h=f.n()).done;)if(!Gk(h.value,u))return!1}catch(t){f.e(t)}finally{f.f()}}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=qk(e.coordinates,r,i),a=Yk(t.geometry(),n,r,i);if(!jk(n,r))return!1;var s,l=v_(a);try{for(l.s();!(s=l.n()).done;)if(!zk(s.value,o))return!1}catch(t){l.e(t)}finally{l.f()}}if("MultiPolygon"===e.type){var u=Hk(e.coordinates,r,i),c=Yk(t.geometry(),n,r,i);if(!jk(n,r))return!1;var h,f=v_(c);try{for(f.s();!(h=f.n()).done;)if(!Vk(h.value,u))return!1}catch(t){f.e(t)}finally{f.f()}}return!0}(t,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(yk(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var o=r.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new t(r,r.features[i].geometry)}else if("Feature"===r.type){var a=r.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new t(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new t(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),t}();function Zk(t){if(t instanceof Ik){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Xk)return!1;var e=!0;return t.eachChild((function(t){e&&!Zk(t)&&(e=!1)})),e}function Jk(t){if(t instanceof Ik&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Jk(t)&&(e=!1)})),e}function Qk(t,e){if(t instanceof Ik&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!Qk(t,e)&&(n=!1)})),n}var tE=function(){function t(e,n){c_(this,t),this.type=n.type,this.name=e,this.boundExpression=n}return u_(t,[{key:"evaluate",value:function(t){return this.boundExpression.evaluate(t)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");var r=e[1];return n.scope.has(r)?new t(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),t}(),eE=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new K_,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];c_(this,t),this.registry=e,this.path=n,this.key=n.map((function(t){return"[".concat(t,"]")})).join(""),this.scope=i,this.errors=o,this.expectedType=r}return u_(t,[{key:"parse",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}},{key:"_parse",value:function(t,e){function n(t,e,n){return"assert"===n?new kk(e,[t]):"coerce"===n?new Ok(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(w_(r),' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof xk)&&"resolvedImage"!==o.type.kind&&nE(o)){var l=new Ck;try{o=new xk(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"===w_(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found ".concat(w_(t)," instead."))}},{key:"concat",value:function(e,n,r){var i="number"==typeof e?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new t(this.registry,i,n||null,o,this.errors)}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(t){return"[".concat(t,"]")})).join(""));this.errors.push(new W_(i,t))}},{key:"checkSubtype",value:function(t,e){var n=lk(t,e);return n&&this.error(n),n}}]),t}();function nE(t){if(t instanceof tE)return nE(t.boundExpression);if(t instanceof Ik&&"error"===t.name)return!1;if(t instanceof Ak)return!1;if(t instanceof Xk)return!1;var e=t instanceof Ok||t instanceof kk,n=!0;return t.eachChild((function(t){n=e?n&&nE(t):n&&t instanceof xk})),!!n&&Zk(t)&&Qk(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function rE(t,e){for(var n,r,i=t.length-1,o=0,a=i,s=0;o<=a;)if(n=t[s=Math.floor((o+a)/2)],r=t[s+1],n<=e){if(s===i||e<r)return s;o=s+1}else{if(!(n>e))throw new Sk("Input is not a number.");a=s-1}return 0}var iE=function(){function t(e,n,r){c_(this,t),this.type=e,this.input=n,this.labels=[],this.outputs=[];var i,o=v_(r);try{for(o.s();!(i=o.n()).done;){var a=o_(i.value,2),s=a[0],l=a[1];this.labels.push(s),this.outputs.push(l)}}catch(t){o.e(t)}finally{o.f()}}return u_(t,[{key:"evaluate",value:function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[rE(e,r)].evaluate(t)}},{key:"eachChild",value:function(t){t(this.input);var e,n=v_(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}],[{key:"parse",value:function(e,n){if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(e[1],1,X_);if(!r)return null;var i=[],o=null;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);for(var a=1;a<e.length;a+=2){var s=1===a?-1/0:e[a],l=e[a+1],u=a,c=a+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(l,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new t(o,r,i)}}]),t}(),oE=aE;function aE(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function sE(t,e,n){return t*(1-n)+e*n}aE.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},aE.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},aE.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},aE.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},aE.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var lE=Object.freeze({__proto__:null,number:sE,color:function(t,e,n){return new fk(sE(t.r,e.r,n),sE(t.g,e.g,n),sE(t.b,e.b,n),sE(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,r){return sE(t,e[r],n)}))}}),uE=.95047,cE=1.08883,hE=4/29,fE=6/29,pE=3*fE*fE,dE=Math.PI/180,gE=180/Math.PI;function mE(t){return t>.008856451679035631?Math.pow(t,1/3):t/pE+hE}function vE(t){return t>fE?t*t*t:pE*(t-hE)}function yE(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function bE(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wE(t){var e=bE(t.r),n=bE(t.g),r=bE(t.b),i=mE((.4124564*e+.3575761*n+.1804375*r)/uE),o=mE((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-mE((.0193339*e+.119192*n+.9503041*r)/cE)),alpha:t.a}}function xE(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*vE(e),n=uE*vE(n),r=cE*vE(r),new fk(yE(3.2404542*n-1.5371385*e-.4985314*r),yE(-.969266*n+1.8760108*e+.041556*r),yE(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function SE(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var _E={forward:wE,reverse:xE,interpolate:function(t,e,n){return{l:sE(t.l,e.l,n),a:sE(t.a,e.a,n),b:sE(t.b,e.b,n),alpha:sE(t.alpha,e.alpha,n)}}},kE=function(t){var e=wE(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*gE;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},EE=function(t){var e=t.h*dE,n=t.c;return xE({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},ME=function(t,e,n){return{h:SE(t.h,e.h,n),c:sE(t.c,e.c,n),l:sE(t.l,e.l,n),alpha:sE(t.alpha,e.alpha,n)}},TE=function(){function t(e,n,r,i,o){c_(this,t),this.type=e,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var a,s=v_(o);try{for(s.s();!(a=s.n()).done;){var l=o_(a.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(t){s.e(t)}finally{s.f()}}return u_(t,[{key:"evaluate",value:function(e){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(e);var i=this.input.evaluate(e);if(i<=n[0])return r[0].evaluate(e);var o=n.length;if(i>=n[o-1])return r[o-1].evaluate(e);var a=rE(n,i),s=n[a],l=n[a+1],u=t.interpolationFactor(this.interpolation,i,s,l),c=r[a].evaluate(e),h=r[a+1].evaluate(e);return"interpolate"===this.operator?lE[this.type.kind.toLowerCase()](c,h,u):"interpolate-hcl"===this.operator?EE(ME(kE(c),kE(h),u)):_E.reverse(_E.interpolate(_E.forward(c),_E.forward(h),u))}},{key:"eachChild",value:function(t){t(this.input);var e,n=v_(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}],[{key:"interpolationFactor",value:function(t,e,n,r){var i=0;if("exponential"===t.name)i=OE(e,t.base,n,r);else if("linear"===t.name)i=OE(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new oE(o[0],o[1],o[2],o[3]).solve(OE(e,1,n,r))}return i}},{key:"parse",value:function(e,n){var r,i=s_(r=e)||i_(r)||y_(r)||a_(),o=i[0],a=i[1],s=i[2],l=i.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var u=a[1];if("number"!=typeof u)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:u}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(s=n.parse(s,2,X_)))return null;var h=[],f=null;"interpolate-hcl"===o||"interpolate-lab"===o?f=Q_:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var p=0;p<l.length;p+=2){var d=l[p],g=l[p+1],m=p+3,v=p+4;if("number"!=typeof d)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(h.length&&h[h.length-1][0]>=d)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var y=n.parse(g,v,f);if(!y)return null;f=f||y.type,h.push([d,y])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new t(f,o,a,s,h):n.error("Type ".concat(ak(f)," is not interpolatable."))}}]),t}();function OE(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var PE=function(){function t(e,n){c_(this,t),this.type=e,this.args=n}return u_(t,[{key:"evaluate",value:function(t){var e,n,r=null,i=0,o=v_(this.args);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(i++,(r=a.evaluate(t))&&r instanceof mk&&!r.available&&(e||(e=r.name),r=null,i===this.args.length&&(r=e)),null!==r)break}}catch(t){o.e(t)}finally{o.f()}return r}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var o,a=[],s=v_(e.slice(1));try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n.parse(l,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,a.push(u)}}catch(t){s.e(t)}finally{s.f()}return new t(i&&a.some((function(t){return lk(i,t.type)}))?ek:r,a)}}]),t}(),CE=function(){function t(e,n){c_(this,t),this.type=n.type,this.bindings=[].concat(e),this.result=n}return u_(t,[{key:"evaluate",value:function(t){return this.result.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=v_(this.bindings);try{for(n.s();!(e=n.n()).done;)t(e.value[1])}catch(t){n.e(t)}finally{n.f()}t(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var t,e=["let"],n=v_(this.bindings);try{for(n.s();!(t=n.n()).done;){var r=o_(t.value,2),i=r[0],o=r[1];e.push(i,o.serialize())}}catch(t){n.e(t)}finally{n.f()}return e.push(this.result.serialize()),e}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));for(var r=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return n.error("Expected string, but found ".concat(w_(o)," instead."),i);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=n.parse(e[i+1],i+1);if(!a)return null;r.push([o,a])}var s=n.parse(e[e.length-1],e.length-1,n.expectedType,r);return s?new t(r,s):null}}]),t}(),IE=function(){function t(e,n,r){c_(this,t),this.type=e,this.index=n,this.input=r}return u_(t,[{key:"evaluate",value:function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Sk("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new Sk("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new Sk("Array index must be an integer, but found ".concat(e," instead."));return n[e]}},{key:"eachChild",value:function(t){t(this.index),t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,X_),i=n.parse(e[2],2,ok(n.expectedType||ek));return r&&i?new t(i.type.itemType,r,i):null}}]),t}(),AE=function(){function t(e,n){c_(this,t),this.type=J_,this.needle=e,this.haystack=n}return u_(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!ck(e,["boolean","string","number","null"]))throw new Sk("Expected first argument to be of type boolean, string, number or null, but found ".concat(ak(bk(e))," instead."));if(!ck(n,["string","array"]))throw new Sk("Expected second argument to be of type array or string, but found ".concat(ak(bk(n))," instead."));return n.indexOf(e)>=0}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,ek),i=n.parse(e[2],2,ek);return r&&i?uk(r.type,[J_,Z_,X_,Y_,ek])?new t(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(ak(r.type)," instead")):null}}]),t}(),LE=function(){function t(e,n,r){c_(this,t),this.type=X_,this.needle=e,this.haystack=n,this.fromIndex=r}return u_(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!ck(e,["boolean","string","number","null"]))throw new Sk("Expected first argument to be of type boolean, string, number or null, but found ".concat(ak(bk(e))," instead."));if(!ck(n,["string","array"]))throw new Sk("Expected second argument to be of type array or string, but found ".concat(ak(bk(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,ek),i=n.parse(e[2],2,ek);if(!r||!i)return null;if(!uk(r.type,[J_,Z_,X_,Y_,ek]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(ak(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,X_);return o?new t(r,i,o):null}return new t(r,i)}}]),t}(),RE=function(){function t(e,n,r,i,o,a){c_(this,t),this.inputType=e,this.type=n,this.input=r,this.cases=i,this.outputs=o,this.otherwise=a}return u_(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);return(bk(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}},{key:"eachChild",value:function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t,e=this,n=["match",this.input.serialize()],r=[],i={},o=v_(Object.keys(this.cases).sort());try{for(o.s();!(t=o.n()).done;){var a=t.value,s=i[this.cases[a]];void 0===s?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[s][1].push(a)}}catch(t){o.e(t)}finally{o.f()}for(var l=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,c=r;u<c.length;u++){var h=o_(c[u],2),f=h[0],p=h[1];1===p.length?n.push(l(p[0])):n.push(p.map(l)),n.push(this.outputs[f].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(e,n){if(e.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var o={},a=[],s=2;s<e.length-1;s+=2){var l=e[s],u=e[s+1];Array.isArray(l)||(l=[l]);var c=n.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,f=v_(l);try{for(f.s();!(h=f.n()).done;){var p=h.value;if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,bk(p)))return null}else r=bk(p);if(void 0!==o[String(p)])return c.error("Branch labels must be unique.");o[String(p)]=a.length}}catch(t){f.e(t)}finally{f.f()}var d=n.parse(u,s,i);if(!d)return null;i=i||d.type,a.push(d)}var g=n.parse(e[1],1,ek);if(!g)return null;var m=n.parse(e[e.length-1],e.length-1,i);return m?"value"!==g.type.kind&&n.concat(1).checkSubtype(r,g.type)?null:new t(r,i,g,o,a,m):null}}]),t}(),jE=function(){function t(e,n,r){c_(this,t),this.type=e,this.branches=n,this.otherwise=r}return u_(t,[{key:"evaluate",value:function(t){var e,n=v_(this.branches);try{for(n.s();!(e=n.n()).done;){var r=o_(e.value,2),i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}}catch(t){n.e(t)}finally{n.f()}return this.otherwise.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=v_(this.branches);try{for(n.s();!(e=n.n()).done;){var r=o_(e.value,2),i=r[0],o=r[1];t(i),t(o)}}catch(t){n.e(t)}finally{n.f()}t(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(t){var e=o_(t,2);return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],o=1;o<e.length-1;o+=2){var a=n.parse(e[o],o,J_);if(!a)return null;var s=n.parse(e[o+1],o+1,r);if(!s)return null;i.push([a,s]),r=r||s.type}var l=n.parse(e[e.length-1],e.length-1,r);return l?new t(r,i,l):null}}]),t}(),NE=function(){function t(e,n,r,i){c_(this,t),this.type=e,this.input=n,this.beginIndex=r,this.endIndex=i}return u_(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!ck(e,["string","array"]))throw new Sk("Expected first argument to be of type array or string, but found ".concat(ak(bk(e))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}},{key:"eachChild",value:function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,ek),i=n.parse(e[2],2,X_);if(!r||!i)return null;if(!uk(r.type,[ok(ek),Z_,ek]))return n.error("Expected first argument to be of type array or string, but found ".concat(ak(r.type)," instead"));if(4===e.length){var o=n.parse(e[3],3,X_);return o?new t(r.type,r,i,o):null}return new t(r.type,r,i)}}]),t}();function $E(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function FE(t,e,n,r){return 0===r.compare(e,n)}function DE(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){c_(this,i),this.type=J_,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return u_(i,[{key:"evaluate",value:function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=bk(o),l=bk(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new Sk('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var u=bk(o),c=bk(a);if("string"!==u.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}},{key:"eachChild",value:function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,ek);if(!o)return null;if(!$E(n,o.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(ak(o.type),"'."));var a=e.parse(t[2],2,ek);if(!a)return null;if(!$E(n,a.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(ak(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(ak(o.type),"' and '").concat(ak(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new kk(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new kk(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,nk)))return null}return new i(o,a,s)}}]),i}()}var GE=DE("==",(function(t,e,n){return e===n}),FE),UE=DE("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!FE(0,e,n,r)})),BE=DE("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),zE=DE(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),VE=DE("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),qE=DE(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),HE=function(){function t(e,n,r,i,o){c_(this,t),this.type=Z_,this.number=e,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=o}return u_(t,[{key:"evaluate",value:function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}},{key:"eachChild",value:function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,X_);if(!r)return null;var i=e[2];if("object"!==w_(i)||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=n.parse(i.locale,1,Z_)))return null;var a=null;if(i.currency&&!(a=n.parse(i.currency,1,Z_)))return null;var s=null;if(i["min-fraction-digits"]&&!(s=n.parse(i["min-fraction-digits"],1,X_)))return null;var l=null;return i["max-fraction-digits"]&&!(l=n.parse(i["max-fraction-digits"],1,X_))?null:new t(r,o,a,s,l)}}]),t}(),WE={"==":GE,"!=":UE,">":zE,"<":BE,">=":qE,"<=":VE,array:kk,at:IE,boolean:kk,case:jE,coalesce:PE,collator:Ak,format:Ek,image:Mk,in:AE,"index-of":LE,interpolate:TE,"interpolate-hcl":TE,"interpolate-lab":TE,length:function(){function t(e){c_(this,t),this.type=X_,this.input=e}return u_(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Sk("Expected value to be of type string or array, but found ".concat(ak(bk(e))," instead."))}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected 1 argument, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(ak(r.type)," instead.")):new t(r):null}}]),t}(),let:CE,literal:xk,match:RE,number:kk,"number-format":HE,object:kk,slice:NE,step:iE,string:kk,"to-boolean":Ok,"to-color":Ok,"to-number":Ok,"to-string":Ok,var:tE,within:Xk};function KE(t,e){var n=o_(e,4),r=n[0],i=n[1],o=n[2],a=n[3];r=r.evaluate(t),i=i.evaluate(t),o=o.evaluate(t);var s=a?a.evaluate(t):1,l=vk(r,i,o,s);if(l)throw new Sk(l);return new fk(r/255*s,i/255*s,o/255*s,s)}function YE(t,e){return t in e}function XE(t,e){var n=e[t];return void 0===n?null:n}function ZE(t){return{type:t}}function JE(t){return{result:"success",value:t}}function QE(t){return{result:"error",value:t}}function tM(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function eM(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function nM(t){return!!t.expression&&t.expression.interpolated}function rM(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":w_(t)}function iM(t){return"object"===w_(t)&&null!==t&&!Array.isArray(t)}Ik.register(WE,{error:[{kind:"error"},[Z_],function(t,e){var n=o_(e,1)[0];throw new Sk(n.evaluate(t))}],typeof:[Z_,[ek],function(t,e){return ak(bk(o_(e,1)[0].evaluate(t)))}],"to-rgba":[ok(X_,4),[Q_],function(t,e){return o_(e,1)[0].evaluate(t).toArray()}],rgb:[Q_,[X_,X_,X_],KE],rgba:[Q_,[X_,X_,X_,X_],KE],has:{type:J_,overloads:[[[Z_],function(t,e){return YE(o_(e,1)[0].evaluate(t),t.properties())}],[[Z_,tk],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return YE(r.evaluate(t),i.evaluate(t))}]]},get:{type:ek,overloads:[[[Z_],function(t,e){return XE(o_(e,1)[0].evaluate(t),t.properties())}],[[Z_,tk],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return XE(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[ek,[Z_],function(t,e){return XE(o_(e,1)[0].evaluate(t),t.featureState||{})}],properties:[tk,[],function(t){return t.properties()}],"geometry-type":[Z_,[],function(t){return t.geometryType()}],id:[ek,[],function(t){return t.id()}],zoom:[X_,[],function(t){return t.globals.zoom}],"heatmap-density":[X_,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[X_,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[X_,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[ek,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[X_,ZE(X_),function(t,e){var n,r=0,i=v_(e);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return r}],"*":[X_,ZE(X_),function(t,e){var n,r=1,i=v_(e);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return r}],"-":{type:X_,overloads:[[[X_,X_],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return r.evaluate(t)-i.evaluate(t)}],[[X_],function(t,e){return-o_(e,1)[0].evaluate(t)}]]},"/":[X_,[X_,X_],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return r.evaluate(t)/i.evaluate(t)}],"%":[X_,[X_,X_],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[X_,[],function(){return Math.LN2}],pi:[X_,[],function(){return Math.PI}],e:[X_,[],function(){return Math.E}],"^":[X_,[X_,X_],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.sqrt(n.evaluate(t))}],log10:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.log(n.evaluate(t))}],log2:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.sin(n.evaluate(t))}],cos:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.cos(n.evaluate(t))}],tan:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.tan(n.evaluate(t))}],asin:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.asin(n.evaluate(t))}],acos:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.acos(n.evaluate(t))}],atan:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.atan(n.evaluate(t))}],min:[X_,ZE(X_),function(t,e){return Math.min.apply(Math,r_(e.map((function(e){return e.evaluate(t)}))))}],max:[X_,ZE(X_),function(t,e){return Math.max.apply(Math,r_(e.map((function(e){return e.evaluate(t)}))))}],abs:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.abs(n.evaluate(t))}],round:[X_,[X_],function(t,e){var n=o_(e,1)[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.floor(n.evaluate(t))}],ceil:[X_,[X_],function(t,e){var n=o_(e,1)[0];return Math.ceil(n.evaluate(t))}],"filter-==":[J_,[Z_,ek],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return t.properties()[r.value]===i.value}],"filter-id-==":[J_,[ek],function(t,e){var n=o_(e,1)[0];return t.id()===n.value}],"filter-type-==":[J_,[Z_],function(t,e){var n=o_(e,1)[0];return t.geometryType()===n.value}],"filter-<":[J_,[Z_,ek],function(t,e){var n=o_(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return w_(o)===w_(a)&&o<a}],"filter-id-<":[J_,[ek],function(t,e){var n=o_(e,1)[0],r=t.id(),i=n.value;return w_(r)===w_(i)&&r<i}],"filter->":[J_,[Z_,ek],function(t,e){var n=o_(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return w_(o)===w_(a)&&o>a}],"filter-id->":[J_,[ek],function(t,e){var n=o_(e,1)[0],r=t.id(),i=n.value;return w_(r)===w_(i)&&r>i}],"filter-<=":[J_,[Z_,ek],function(t,e){var n=o_(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return w_(o)===w_(a)&&o<=a}],"filter-id-<=":[J_,[ek],function(t,e){var n=o_(e,1)[0],r=t.id(),i=n.value;return w_(r)===w_(i)&&r<=i}],"filter->=":[J_,[Z_,ek],function(t,e){var n=o_(e,2),r=n[0],i=n[1],o=t.properties()[r.value],a=i.value;return w_(o)===w_(a)&&o>=a}],"filter-id->=":[J_,[ek],function(t,e){var n=o_(e,1)[0],r=t.id(),i=n.value;return w_(r)===w_(i)&&r>=i}],"filter-has":[J_,[ek],function(t,e){return o_(e,1)[0].value in t.properties()}],"filter-has-id":[J_,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[J_,[ok(Z_)],function(t,e){return o_(e,1)[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[J_,[ok(ek)],function(t,e){return o_(e,1)[0].value.indexOf(t.id())>=0}],"filter-in-small":[J_,[Z_,ok(ek)],function(t,e){var n=o_(e,2),r=n[0];return n[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[J_,[Z_,ok(ek)],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:J_,overloads:[[[J_,J_],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return r.evaluate(t)&&i.evaluate(t)}],[ZE(J_),function(t,e){var n,r=v_(e);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(t))return!1}catch(t){r.e(t)}finally{r.f()}return!0}]]},any:{type:J_,overloads:[[[J_,J_],function(t,e){var n=o_(e,2),r=n[0],i=n[1];return r.evaluate(t)||i.evaluate(t)}],[ZE(J_),function(t,e){var n,r=v_(e);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(t))return!0}catch(t){r.e(t)}finally{r.f()}return!1}]]},"!":[J_,[J_],function(t,e){return!o_(e,1)[0].evaluate(t)}],"is-supported-script":[J_,[Z_],function(t,e){var n=o_(e,1)[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[Z_,[Z_],function(t,e){return o_(e,1)[0].evaluate(t).toUpperCase()}],downcase:[Z_,[Z_],function(t,e){return o_(e,1)[0].evaluate(t).toLowerCase()}],concat:[Z_,ZE(ek),function(t,e){return e.map((function(e){return wk(e.evaluate(t))})).join("")}],"resolved-locale":[Z_,[nk],function(t,e){return o_(e,1)[0].evaluate(t).resolvedLocale()}]});var oM=function(){function t(e,n){var r;c_(this,t),this.expression=e,this._warningHistory={},this._evaluator=new Ck,this._defaultValue=n?"color"===(r=n).type&&iM(r.default)?new fk(0,0,0,0):"color"===r.type?fk.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=n&&"enum"===n.type?n.values:null}return u_(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Sk("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", "),", but found ").concat(JSON.stringify(a)," instead."));return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0),this._defaultValue}}}]),t}();function aM(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in WE}function sM(t,e){var n=new eE(WE,[],e?function(t){var e={color:Q_,string:Z_,number:X_,enum:Z_,boolean:J_,formatted:rk,resolvedImage:ik};return"array"===t.type?ok(e[t.value]||ek,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?JE(new oM(r,e)):QE(n.errors)}var lM=function(){function t(e,n){c_(this,t),this.kind=e,this._styleExpression=n,this.isStateDependent="constant"!==e&&!Jk(n.expression)}return u_(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}]),t}(),uM=function(){function t(e,n,r,i){c_(this,t),this.kind=e,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==e&&!Jk(n.expression),this.interpolationType=i}return u_(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}},{key:"evaluate",value:function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}},{key:"interpolationFactor",value:function(t,e,n){return this.interpolationType?TE.interpolationFactor(this.interpolationType,t,e,n):0}}]),t}();function cM(t,e){if("error"===(t=sM(t,e)).result)return t;var n=t.value.expression,r=Zk(n);if(!r&&!tM(e))return QE([new W_("","data expressions not supported")]);var i=Qk(n,["zoom"]);if(!i&&!eM(e))return QE([new W_("","zoom expressions not supported")]);var o=hM(n);if(!o&&!i)return QE([new W_("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof W_)return QE([o]);if(o instanceof TE&&!nM(e))return QE([new W_("",'"interpolate" expressions cannot be used with this property')]);if(!o)return JE(new lM(r?"constant":"source",t.value));var a=o instanceof TE?o.interpolation:void 0;return JE(new uM(r?"camera":"composite",t.value,o.labels,a))}function hM(t){var e=null;if(t instanceof CE)e=hM(t.result);else if(t instanceof PE){var n,r=v_(t.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e=hM(i))break}}catch(t){r.e(t)}finally{r.f()}}else(t instanceof iE||t instanceof TE)&&t.input instanceof Ik&&"zoom"===t.input.name&&(e=t);return e instanceof W_||t.eachChild((function(t){var n=hM(t);n instanceof W_?e=n:!e&&n?e=new W_("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new W_("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function fM(t){return"object"===w_(t)?["literal",t]:t}function pM(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function dM(t,e){var n,r,i=fM((n=t.default,r=e.default,void 0!==n?n:void 0!==r?r:void 0));return void 0===i&&"resolvedImage"===e.type?"":i}function gM(t,e,n){var r=yM(t,e),i=["get",t.property];if("categorical"===r&&"boolean"==typeof n[0][0]){var o,a=["case"],s=v_(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;a.push(["==",i,l[0]],l[1])}}catch(t){s.e(t)}finally{s.f()}return a.push(dM(t,e)),a}if("categorical"===r){var u,c=["match",i],h=v_(n);try{for(h.s();!(u=h.n()).done;){var f=u.value;vM(c,f[0],f[1],!1)}}catch(t){h.e(t)}finally{h.f()}return c.push(dM(t,e)),c}if("interval"===r){var p,d=["step",["number",i]],g=v_(n);try{for(g.s();!(p=g.n()).done;){var m=p.value;vM(d,m[0],m[1],!0)}}catch(t){g.e(t)}finally{g.f()}return mM(d),void 0===t.default?d:["case",["==",["typeof",i],"number"],d,fM(t.default)]}if("exponential"===r){var v,y=void 0!==t.base?t.base:1,b=[pM(t),1===y?["linear"]:["exponential",y],["number",i]],w=v_(n);try{for(w.s();!(v=w.n()).done;){var x=v.value;vM(b,x[0],x[1],!1)}}catch(t){w.e(t)}finally{w.f()}return void 0===t.default?b:["case",["==",["typeof",i],"number"],b,fM(t.default)]}throw new Error("Unknown property function type ".concat(r))}function mM(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function vM(t,e,n,r){t.length>3&&e===t[t.length-2]||(r&&2===t.length||t.push(e),t.push(n))}function yM(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function bM(t){for(var e=["concat"],n=/{([^{}]+)}/g,r=0,i=n.exec(t);null!==i;i=n.exec(t)){var o=t.slice(r,n.lastIndex-i[0].length);r=n.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(r<t.length)e.push(t.slice(r));else if(2===e.length)return["to-string",e[1]];return e}function wM(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":var e,n=v_(t.slice(1));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!wM(r)&&"boolean"!=typeof r)return!1}}catch(t){n.e(t)}finally{n.f()}return!0;default:return!0}}var xM={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function SM(t,e){return t<e?-1:t>e?1:0}function _M(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if(_M(t[e]))return!0;return!1}function kM(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?EM(t[1],t[2],"=="):"!="===n?OM(EM(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?EM(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(kM))):"all"===n?["all"].concat(t.slice(1).map(kM)):"none"===n?["all"].concat(t.slice(1).map(kM).map(OM)):"in"===n?MM(t[1],t.slice(2)):"!in"===n?OM(MM(t[1],t.slice(2))):"has"===n?TM(t[1]):"!has"===n?OM(TM(t[1])):"within"!==n||t}function EM(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function MM(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return w_(t)!==w_(e[0])}))?["filter-in-large",t,["literal",e.sort(SM)]]:["filter-in-small",t,["literal",e]]}}function TM(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function OM(t){return["!",t]}var PM=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function CM(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return PM.forEach((function(t){t in e&&(n[t]=e[t])})),n}var IM=function t(e,n,r,i){c_(this,t),this.message=(e?"".concat(e,": "):"")+r,i&&(this.identifier=i),null!=n&&n.kp&&(this.line=n.kp)},AM=function t(e){c_(this,t),this.error=e,this.message=e.message;var n=e.message.match(/line (\d+)/);this.line=n?parseInt(n[1],10):0};function LM(t){var e=t.key,n=t.value;return n?[new IM(e,n,"constants have been deprecated as of v8")]:[]}function RM(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function jM(t){if(Array.isArray(t))return t.map(jM);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=jM(t[n]);return e}return RM(t)}function NM(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=rM(n);if("object"!==l)return[new IM(e,n,"object expected, ".concat(l," found"))];for(var u in n){var c=u.split(".")[0],h=r[c]||r["*"],f=void 0;if(i[c])f=i[c];else if(r[c])f=eT;else if(i["*"])f=i["*"];else{if(!r["*"]){s.push(new IM(e,n[u],'unknown property "'.concat(u,'"')));continue}f=eT}s=s.concat(f({key:(e?"".concat(e,"."):e)+u,value:n[u],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:u},n))}for(var p in r)i[p]||r[p].required&&void 0===r[p].default&&void 0===n[p]&&s.push(new IM(e,n,'missing required property "'.concat(p,'"')));return s}function $M(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||eT;if("array"!==rM(e))return[new IM(o,e,"array expected, ".concat(rM(e)," found"))];if(n.length&&e.length!==n.length)return[new IM(o,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new IM(o,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};i.$version<7&&(s.function=n.function),"object"===rM(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:"".concat(o,"[").concat(u,"]")}));return l}function FM(t){var e=t.key,n=t.value,r=t.valueSpec,i=rM(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new IM(e,n,"number expected, ".concat(i," found"))];if("minimum"in r){var o=r.minimum;if("array"===rM(r.minimum)){var a=t.arrayIndex;o=r.minimum[a]}if(n<o)return[new IM(e,n,"".concat(n," is less than the minimum value ").concat(o))]}if("maximum"in r){var s=r.maximum;if("array"===rM(r.maximum)){var l=t.arrayIndex;s=r.maximum[l]}if(n>s)return[new IM(e,n,"".concat(n," is greater than the maximum value ").concat(s))]}return[]}function DM(t){var e,n,r,i=t.valueSpec,o=RM(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,u="array"===rM(t.value.stops)&&"array"===rM(t.value.stops[0])&&"object"===rM(t.value.stops[0][0]),c=NM({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new IM(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat($M({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===rM(n)&&0===n.length&&e.push(new IM(t.key,n,"array must have at least one stop")),e},default:function(t){return eT({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new IM(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new IM(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!nM(t.valueSpec)&&c.push(new IM(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!tM(t.valueSpec)?c.push(new IM(t.key,t.value,"property functions not supported")):s&&!eM(t.valueSpec)&&c.push(new IM(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new IM(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,s=t.key;if("array"!==rM(o))return[new IM(s,o,"array expected, ".concat(rM(o)," found"))];if(2!==o.length)return[new IM(s,o,"array length 2 expected, length ".concat(o.length," found"))];if(u){if("object"!==rM(o[0]))return[new IM(s,o,"object expected, ".concat(rM(o[0])," found"))];if(void 0===o[0].zoom)return[new IM(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new IM(s,o,"object stop key must have value")];if(r&&r>RM(o[0].zoom))return[new IM(s,o[0].zoom,"stop zoom values must appear in ascending order")];RM(o[0].zoom)!==r&&(r=RM(o[0].zoom),n=void 0,a={}),e=e.concat(NM({key:"".concat(s,"[0]"),value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:FM,value:f}}))}else e=e.concat(f({key:"".concat(s,"[0]"),value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return aM(jM(o[1]))?e.concat([new IM("".concat(s,"[1]"),o[1],"expressions are not allowed in function stops.")]):e.concat(eT({key:"".concat(s,"[1]"),value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function f(t,r){var s=rM(t.value),l=RM(t.value),u=null!==t.value?t.value:r;if(e){if(s!==e)return[new IM(t.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(e))]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new IM(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, ".concat(s," found");return tM(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new IM(t.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==n&&l<n?[new IM(t.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new IM(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new IM(t.key,u,"integer expected, found ".concat(l))]}}function GM(t){var e=("property"===t.expressionContext?cM:sM)(jM(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new IM("".concat(t.key).concat(e.key),t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new IM(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Jk(n))return[new IM(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Jk(n))return[new IM(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Qk(n,["zoom","feature-state"]))return[new IM(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Zk(n))return[new IM(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function UM(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(RM(n))&&i.push(new IM(e,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(RM(n))&&i.push(new IM(e,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function BM(t){return wM(jM(t.value))?GM(H_({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zM(t)}function zM(t){var e=t.value,n=t.key;if("array"!==rM(e))return[new IM(n,e,"array expected, ".concat(rM(e)," found"))];var r,i=t.styleSpec,o=[];if(e.length<1)return[new IM(n,e,"filter array must have at least 1 element")];switch(o=o.concat(UM({key:"".concat(n,"[0]"),value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),RM(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===RM(e[1])&&o.push(new IM(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&o.push(new IM(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&"string"!==(r=rM(e[1]))&&o.push(new IM("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));for(var a=2;a<e.length;a++)r=rM(e[a]),"$type"===RM(e[1])?o=o.concat(UM({key:"".concat(n,"[").concat(a,"]"),value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new IM("".concat(n,"[").concat(a,"]"),e[a],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<e.length;s++)o=o.concat(zM({key:"".concat(n,"[").concat(s,"]"),value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=rM(e[1]),2!==e.length?o.push(new IM(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new IM("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=rM(e[1]),2!==e.length?o.push(new IM(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&o.push(new IM("".concat(n,"[1]"),e[1],"object expected, ".concat(r," found")))}return o}function VM(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i["".concat(e,"_").concat(t.layerType)];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return eT({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new IM(n,o,'unknown property "'.concat(a,'"'))];if("string"===rM(o)&&tM(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new IM(n,o,'"'.concat(a,'" does not support interpolation syntax\n')+'Use an identity property function instead: `{ "type": "identity", "property": '.concat(JSON.stringify(u[1])," }`."))];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new IM(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&iM(jM(o))&&"identity"===RM(o.type)&&h.push(new IM(n,o,'"text-font" does not support identity functions'))),h.concat(eT({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function qM(t){return VM(t,"paint")}function HM(t){return VM(t,"layout")}function WM(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new IM(r,n,'either "type" or "ref" is required'));var a,s=RM(n.type),l=RM(n.ref);if(n.id)for(var u=RM(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];RM(h.id)===u&&e.push(new IM(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.kp)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new IM(r,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),i.layers.forEach((function(t){RM(t.id)===l&&(a=t)})),a?a.ref?e.push(new IM(r,n.ref,"ref cannot reference another ref layer")):s=RM(a.type):e.push(new IM(r,n.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var f=i.sources&&i.sources[n.source],p=f&&RM(f.type);f?"vector"===p&&"raster"===s?e.push(new IM(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===p&&"raster"!==s?e.push(new IM(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new IM(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&f.lineMetrics||e.push(new IM(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new IM(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new IM(r,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new IM(r,n,'missing required property "source"'));return e=e.concat(NM({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return eT({key:"".concat(r,".type"),value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:BM,layout:function(t){return NM({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return HM(H_({layerType:s},t))}}})},paint:function(t){return NM({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return qM(H_({layerType:s},t))}}})}}}))}function KM(t){var e=t.value,n=t.key,r=rM(e);return"string"!==r?[new IM(n,e,"string expected, ".concat(r," found"))]:[]}var YM={promoteId:function(t){var e=t.key,n=t.value;if("string"===rM(n))return KM({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,r_(KM({key:"".concat(e,".").concat(i),value:n[i]})));return r}};function XM(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new IM(n,e,'"type" is required')];var o,a=RM(e.type);switch(a){case"vector":case"raster":case"raster-dem":return NM({key:n,value:e,valueSpec:r["source_".concat(a.replace("-","_"))],style:t.style,styleSpec:r,objectElementValidators:YM});case"geojson":if(o=NM({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:YM}),e.cluster)for(var s in e.clusterProperties){var l,u,c=o_(e.clusterProperties[s],2),h=c[0],f=c[1],p="string"==typeof h?[h,["accumulated"],["get",s]]:h;(l=o).push.apply(l,r_(GM({key:"".concat(n,".").concat(s,".map"),value:f,expressionContext:"cluster-map"}))),(u=o).push.apply(u,r_(GM({key:"".concat(n,".").concat(s,".reduce"),value:p,expressionContext:"cluster-reduce"})))}return o;case"video":return NM({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return NM({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new IM(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return UM({key:"".concat(n,".type"),value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function ZM(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=rM(e);if(void 0===e)return o;if("object"!==a)return o.concat([new IM("light",e,"object expected, ".concat(a," found"))]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&r[l[1]]&&r[l[1]].transition?o.concat(eT({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(eT({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new IM(s,e[s],'unknown property "'.concat(s,'"'))])}return o}function JM(t){var e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain,a=[],s=rM(e);if(void 0===e)return a;if("object"!==s)return a.concat([new IM("terrain",e,"object expected, ".concat(s," found"))]);for(var l in e){var u=l.match(/^(.*)-transition$/);a=u&&o[u[1]]&&o[u[1]].transition?a.concat(eT({key:l,value:e[l],valueSpec:i.transition,style:r,styleSpec:i})):o[l]?a.concat(eT({key:l,value:e[l],valueSpec:o[l],style:r,styleSpec:i})):a.concat([new IM(l,e[l],'unknown property "'.concat(l,'"'))])}if(e.source){var c=r.sources&&r.sources[e.source],h=c&&RM(c.type);c?"raster-dem"!==h&&a.push(new IM(n,e.source,"terrain cannot be used with a source of type ".concat(h,', it only be used with a "raster-dem" source type'))):a.push(new IM(n,e.source,'source "'.concat(e.source,'" not found')))}else a.push(new IM(n,e,'terrain is missing required property "source"'));return a}function QM(t){var e=t.value,n=t.style,r=t.styleSpec,i=r.fog,o=[],a=rM(e);if(void 0===e)return o;if("object"!==a)return o.concat([new IM("fog",e,"object expected, ".concat(a," found"))]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&i[l[1]]&&i[l[1]].transition?o.concat(eT({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r})):i[s]?o.concat(eT({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r})):o.concat([new IM(s,e[s],'unknown property "'.concat(s,'"'))])}return o}var tT={"*":function(){return[]},array:$M,boolean:function(t){var e=t.value,n=t.key,r=rM(e);return"boolean"!==r?[new IM(n,e,"boolean expected, ".concat(r," found"))]:[]},number:FM,color:function(t){var e=t.key,n=t.value,r=rM(n);return"string"!==r?[new IM(e,n,"color expected, ".concat(r," found"))]:null===hk.parseCSSColor(n)?[new IM(e,n,'color expected, "'.concat(n,'" found'))]:[]},constants:LM,enum:UM,filter:BM,function:DM,layer:WM,object:NM,source:XM,light:ZM,terrain:JM,fog:QM,string:KM,formatted:function(t){return 0===KM(t).length?[]:GM(t)},resolvedImage:function(t){return 0===KM(t).length?[]:GM(t)}};function eT(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&iM(RM(e))?DM(t):n.expression&&aM(jM(e))?GM(t):n.type&&tT[n.type]?tT[n.type](t):NM(H_({},t,{valueSpec:n.type?r[n.type]:n}))}function nT(t){var e=t.value,n=t.key,r=KM(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new IM(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new IM(n,e,'"glyphs" url must include a "{range}" token'))),r}function rT(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x_,n=[];return n=n.concat(eT({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:nT,"*":function(){return[]}}})),t.constants&&(n=n.concat(LM({key:"constants",value:t.constants,style:t,styleSpec:e}))),iT(n)}function iT(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function oT(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return iT(t.apply(this,n))}}rT.source=oT(XM),rT.light=oT(ZM),rT.terrain=oT(JM),rT.fog=oT(QM),rT.layer=oT(WM),rT.filter=oT(BM),rT.paintProperty=oT(qM),rT.layoutProperty=oT(HM);var aT=__((function(t,e){var n=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,12],n=[1,13],r=[1,9],i=[1,10],o=[1,11],a=[1,14],s=[1,15],l=[14,18,22,24],u=[18,22],c=[22,24],h={trace:function(){},yy:{},xp:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},Sp:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},_p:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,r,i,o,a){var s=o.length-1;switch(i){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.kp=this._$.first_line;break;case 2:this.$=new Number(t),this.$.kp=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.kp=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.kp=this._$.first_line;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"kp",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"kp",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"kp",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:30,15:7,16:8,17:a,23:s},t(l,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:r,9:4,10:i,11:o,13:31,15:7,16:8,17:a,23:s},t(u,[2,17]),t(u,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,l=0,u=2,c=1,h=i.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(p.yy[d]=this.yy[d]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var g=f.yylloc;i.push(g);var m=f.options&&f.options.ranges;function v(){var t;return"number"!=typeof(t=f.lex()||c)&&(t=e.xp[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,b,w,x,S,_,k,E,M={};;){if(b=n[n.length-1],this.defaultActions[b]?w=this.defaultActions[b]:(null==y&&(y=v()),w=o[b]&&o[b][y]),void 0===w||!w.length||!w[0]){var T="";for(S in E=[],o[b])this.Sp[S]&&S>u&&E.push("'"+this.Sp[S]+"'");T=f.showPosition?"Parse error on line "+(s+1)+":\n"+f.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.Sp[y]||y)+"'":"Parse error on line "+(s+1)+": Unexpected "+(y==c?"end of input":"'"+(this.Sp[y]||y)+"'"),this.parseError(T,{text:f.match,token:this.Sp[y]||y,line:f.yylineno,loc:g,expected:E})}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+y);switch(w[0]){case 1:n.push(y),r.push(f.yytext),i.push(f.yylloc),n.push(w[1]),y=null,l=f.yyleng,a=f.yytext,s=f.yylineno,g=f.yylloc;break;case 2:if(_=this._p[w[1]][1],M.$=r[r.length-_],M._$={first_line:i[i.length-(_||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(_||1)].first_column,last_column:i[i.length-1].last_column},m&&(M._$.range=[i[i.length-(_||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(M,[a,l,s,p.yy,w[1],r,i].concat(h))))return x;_&&(n=n.slice(0,-1*_*2),r=r.slice(0,-1*_),i=i.slice(0,-1*_)),n.push(this._p[w[1]][0]),r.push(M.$),i.push(M._$),k=o[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return h.lexer=f,p.prototype=h,h.Parser=p,new p}();e.parser=n,e.Parser=n.Parser,e.parse=function(){return n.parse.apply(n,arguments)}}));function sT(t){if(t instanceof String||"string"==typeof t||t instanceof Buffer)try{return aT.parse(t.toString())}catch(t){throw new AM(t)}return t}function lT(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x_,n=t;try{n=sT(n)}catch(t){return[t]}return rT(n,e)}new Set(["vector","raster","raster-dem"]);var uT=aM,cT=cM,hT=function(t,e){var n=t.stops;if(!n)return function(t,e){var n=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",n]:n;if("enum"===e.type)return["match",n,Object.keys(e.values),n,t.default];var r=["color"===e.type?"to-color":e.type,n,fM(t.default)];return"array"===e.type&&r.splice(1,0,e.value,e.length||null),r}(t,e);var r=n&&"object"===w_(n[0][0]),i=r||void 0!==t.property,o=r||!i;return n=n.map((function(t){return!i&&e.tokens&&"string"==typeof t[1]?[t[0],bM(t[1])]:[t[0],fM(t[1])]})),r?function(t,e,n){for(var r={},i={},o=[],a=0;a<n.length;a++){var s=n[a],l=s[0].zoom;void 0===r[l]&&(r[l]={zoom:l,type:t.type,property:t.property,default:t.default},i[l]=[],o.push(l)),i[l].push([s[0].value,s[1]])}if("exponential"===yM({},e)){var u,c=[pM(t),["linear"],["zoom"]],h=v_(o);try{for(h.s();!(u=h.n()).done;){var f=u.value;vM(c,f,gM(r[f],e,i[f]),!1)}}catch(t){h.e(t)}finally{h.f()}return c}var p,d=["step",["zoom"]],g=v_(o);try{for(g.s();!(p=g.n()).done;){var m=p.value;vM(d,m,gM(r[m],e,i[m]),!0)}}catch(t){g.e(t)}finally{g.f()}return mM(d),d}(t,e,n):o?function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["zoom"],o=yM(t,e),a=!1;if("interval"===o)r=["step",i],a=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'.concat(o,'"'));var s=void 0!==t.base?t.base:1;r=[pM(t),1===s?["linear"]:["exponential",s],i]}var l,u=v_(n);try{for(u.s();!(l=u.n()).done;){var c=l.value;vM(r,c[0],c[1],a)}}catch(t){u.e(t)}finally{u.f()}return mM(r),r}(t,e,n):gM(t,e,n)},fT=iM;function pT(t){return t*Math.PI/180}lT.parsed=lT,lT.latest=lT,"function"==typeof Object.assign&&Object.assign;var dT=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function gT(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var n=document.createElement("canvas");return n.width=t,n.height=e,n}var mT,vT=Array(256).join("â");function yT(t,e){if(e>=.05){for(var n="",r=t.split("\n"),i=vT.slice(0,Math.round(e/.1)),o=0,a=r.length;o<a;++o)o>0&&(n+="\n"),n+=r[o].split("").join(i);return n}return t}function bT(){return mT||(mT=gT(1,1).getContext("2d")),mT}function wT(t,e){return bT().measureText(t).width+(t.length-1)*e}var xT={};function ST(t,e,n,r){if(-1!==t.indexOf("\n")){for(var i=t.split("\n"),o=[],a=0,s=i.length;a<s;++a)o.push(ST(i[a],e,n,r));return o.join("\n")}var l=n+","+e+","+t+","+r,u=xT[l];if(!u){var c=t.split(" ");if(c.length>1){var h=bT();h.font=e;var f=h.measureText("M").width*n,p="";for(o=[],a=0,s=c.length;a<s;++a){var d=c[a],g=p+(p?" ":"")+d;wT(g,r)<=f?p=g:(p&&o.push(p),p=d)}for(p&&o.push(p),a=0,s=o.length;a<s&&s>1;++a){var m=o[a];if(wT(m,r)<.35*f){var v=a>0?wT(o[a-1],r):1/0,y=a<s-1?wT(o[a+1],r):1/0;o.splice(a,1),s-=1,v<y?(o[a-1]+=" "+m,a-=1):o[a]=m+" "+o[a]}}for(a=0,s=o.length-1;a<s;++a){var b=o[a],w=o[a+1];if(wT(b,r)>.7*f&&wT(w,r)<.6*f){var x=b.split(" "),S=x.pop();wT(S,r)<.2*f&&(o[a]=x.join(" "),o[a+1]=S+" "+w),s-=1}}u=o.join("\n")}else u=t;u=yT(u,r),xT[l]=u}return u}Ri&&it(Ri,"clear",(function(){xT={}}));var _T,kT,ET=fT,MT=hT,TT=uT,OT=cT,PT={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},CT={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},IT={},AT={zoom:0},LT={};function RT(t,e,n,r,i){var o=t.id;LT[o]||(LT[o]={});var a=LT[o];if(!a[n]){var s=(t[e]||IT)[n],l=x_[e+"_"+t.type][n];void 0===s&&(s=l.default);var u=TT(s);if(!u&&ET(s)&&(s=MT(s,l),u=!0),u){var c=function(t,e){var n=OT(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}(s,l);a[n]=c.evaluate.bind(c)}else"color"==l.type&&(s=fk.parse(s)),a[n]=function(){return s}}return AT.zoom=r,a[n](AT,i)}var jT={};function NT(t,e){if(t){if(0===t.a||0===e)return;var n=t.a;return e=void 0===e?1:e,"rgba("+Math.round(255*t.r/n)+","+Math.round(255*t.g/n)+","+Math.round(255*t.b/n)+","+n*e+")"}return t}var $T=/^([^]*)\{(.*)\}([^]*)$/;function FT(t,e){var n;do{if(n=t.match($T)){var r=e[n[2]]||"";t=n[1]+r+n[3]}}while(n);return t}function DT(t,e,n,r,i,o,a){if(void 0===r&&(r=dT),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");var s,l;if(o)if("undefined"!=typeof Image){var u=new Image;u.crossOrigin="anonymous",u.onload=function(){s=u,l=[u.width,u.height],t.changed(),u.onload=null},u.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var c=self;c.postMessage({action:"loadImage",src:o}),c.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(s=t.data.image,l=[s.width,s.height])}))}for(var h,f=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=CM(t[r],e[t[r].ref]));return t}(e.layers),p={},d=[],g=0,m=f.length;g<m;++g){var v=f[g],y=v.id;if("string"==typeof n&&v.source==n||-1!==n.indexOf(y)){var b=v["source-layer"];if(!h){h=v.source;var w=e.sources[h];if(!w)throw new Error('Source "'+h+'" is not defined');var x=w.type;if("vector"!==x&&"geojson"!==x)throw new Error('Source "'+h+'" is not of type "vector" or "geojson", but "'+x+'"')}var S=p[b];S||(S=[],p[b]=S),S.push({layer:v,index:g}),d.push(y)}delete LT[y],delete jT[y]}var _=new gf,k=new Kh,E={},M={},T=[],O=function(t,e){var n=t.getProperties(),o=p[n.layer];if(o){var u=r.indexOf(e);-1==u&&(u=function(t,e){for(var n=0,r=e.length;n<r;++n)if(e[n]<t&&n+1<r){var i=e[n]/e[n+1];return n+Math.log(e[n]/t)/Math.log(i)}return r-1}(e,r));for(var c=PT[t.getGeometry().getType()],h={properties:n,type:c},f=-1,d=function(r,p){var d=o[r],g=d.layer,m=g.id,v=g.layout||IT,y=g.paint||IT;if("none"===v.visibility||"minzoom"in g&&u<g.minzoom||"maxzoom"in g&&u>=g.maxzoom)return"continue";var b=g.filter;if(!b||function(t,e,n,r){return t in jT||(jT[t]=function(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};wM(t)||(t=kM(t));var e=sM(t,xM);if("error"===e.result)throw new Error(e.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:_M(t)}}(e).filter),AT.zoom=r,jT[t](AT,n)}(m,b,h,u)){g;var w=void 0,x=void 0,S=void 0,O=void 0,P=void 0,C=void 0,I=d.index;if(3==c&&("fill"==g.type||"fill-extrusion"==g.type))if(x=RT(g,"paint",g.type+"-opacity",u,h),g.type+"-pattern"in y){var A=RT(g,"paint",g.type+"-pattern",u,h);if(A){var L="string"==typeof A?FT(A,n):A.toString();if(s&&i&&i[L]){++f,(C=T[f])&&C.getFill()&&!C.getStroke()&&!C.getText()||(C=new Tf({fill:new Kh}),T[f]=C),S=C.getFill(),C.setZIndex(I);var R=M[lt=L+"."+x];R||((ht=(ct=gT((ut=i[L]).width,ut.height)).getContext("2d")).globalAlpha=x,ht.drawImage(s,ut.x,ut.y,ut.width,ut.height,0,0,ut.width,ut.height),R=ht.createPattern(ct,"repeat"),M[lt]=R),S.setColor(R)}}}else(w=NT(RT(g,"paint",g.type+"-color",u,h),x))&&(g.type+"-outline-color"in y&&(P=NT(RT(g,"paint",g.type+"-outline-color",u,h),x)),P||(P=w),++f,(C=T[f])&&C.getFill()&&C.getStroke()&&!C.getText()||(C=new Tf({fill:new Kh,stroke:new gf}),T[f]=C),(S=C.getFill()).setColor(w),(O=C.getStroke()).setColor(P),O.setWidth(1),C.setZIndex(I));if(1!=c&&"line"==g.type){w=!("line-pattern"in y)&&"line-color"in y?NT(RT(g,"paint","line-color",u,h),RT(g,"paint","line-opacity",u,h)):void 0;var j=RT(g,"paint","line-width",u,h);w&&j>0&&(++f,(C=T[f])&&C.getStroke()&&!C.getFill()&&!C.getText()||(C=new Tf({stroke:new gf}),T[f]=C),(O=C.getStroke()).setLineCap(RT(g,"layout","line-cap",u,h)),O.setLineJoin(RT(g,"layout","line-join",u,h)),O.setMiterLimit(RT(g,"layout","line-miter-limit",u,h)),O.setColor(w),O.setWidth(j),O.setLineDash(y["line-dasharray"]?RT(g,"paint","line-dasharray",u,h).map((function(t){return t*j})):null),C.setZIndex(I))}var N=!1,$=null,F=0,D=void 0,G=void 0,U=void 0;if((1==c||2==c)&&"icon-image"in v){var B=RT(g,"layout","icon-image",u,h);if(B){D="string"==typeof B?FT(B,n):B.toString();var z=void 0;if(s&&i&&i[D]){var V=RT(g,"layout","icon-rotation-alignment",u,h);if(2==c){var q=t.getGeometry();if(q.getFlatMidpoint||q.getFlatMidpoints){var H=q.getExtent();if(Math.sqrt(Math.max(Math.pow((H[2]-H[0])/e,2),Math.pow((H[3]-H[1])/e,2)))>150){var W="MultiLineString"===q.getType()?q.getFlatMidpoints():q.getFlatMidpoint();if(kT||(kT=new jd("Point",_T=[NaN,NaN],[],{},null)),z=kT,_T[0]=W[0],_T[1]=W[1],"line"===(It=RT(g,"layout","symbol-placement",u,h))&&"map"===V)for(var K=q.getStride(),Y=q.getFlatCoordinates(),X=0,Z=Y.length-K;X<Z;X+=K){var J=Y[X],Q=Y[X+1],tt=Y[X+K],et=Y[X+K+1],nt=Math.min(J,tt),rt=Math.min(Q,et),it=Math.max(J,tt),ot=Math.max(Q,et);if(W[0]>=nt&&W[0]<=it&&W[1]>=rt&&W[1]<=ot){F=Math.atan2(Q-et,tt-J);break}}}}}if(2!==c||z){var at=RT(g,"layout","icon-size",u,h),st=void 0!==y["icon-color"]?RT(g,"paint","icon-color",u,h):null;if(!st||0!==st.a){var lt=D+"."+at;if(null!==st&&(lt+="."+st),!(G=E[lt])){var ut=i[D];if(null!==st){var ct,ht;(ht=(ct=gT(ut.width,ut.height)).getContext("2d")).drawImage(s,ut.x,ut.y,ut.width,ut.height,0,0,ut.width,ut.height);for(var ft=ht.getImageData(0,0,ct.width,ct.height),pt=0,dt=ft.data.length;pt<dt;pt+=4){var gt=st.a;0!==gt&&(ft.data[pt]=255*st.r/gt,ft.data[pt+1]=255*st.g/gt,ft.data[pt+2]=255*st.b/gt),ft.data[pt+3]=gt}ht.putImageData(ft,0,0),G=new df({img:ct,imgSize:[ct.width,ct.height],scale:at/ut.pixelRatio}),E[lt]=G}else G=new df({img:s,imgSize:l,size:[ut.width,ut.height],offset:[ut.x,ut.y],rotateWithView:"map"===V,scale:at/ut.pixelRatio}),E[lt]=G}}G&&(++f,(C=T[f])&&C.getImage()&&!C.getFill()&&!C.getStroke()||(C=new Tf,T[f]=C),C.setGeometry(z),G.setRotation(F+pT(RT(g,"layout","icon-rotate",u,h))),G.setOpacity(RT(g,"paint","icon-opacity",u,h)),G.setAnchor(CT[RT(g,"layout","icon-anchor",u,h)]),C.setImage(G),$=C.getText(),C.setText(void 0),C.setZIndex(I),N=!0,U=!1)}else U=!0}}}if(1==c&&"circle-radius"in y){++f,(C=T[f])&&C.getImage()&&!C.getFill()&&!C.getStroke()||(C=new Tf,T[f]=C);var mt=RT(g,"paint","circle-radius",u,h),vt=NT(RT(g,"paint","circle-stroke-color",u,h),RT(g,"paint","circle-stroke-opacity",u,h)),yt=NT(RT(g,"paint","circle-color",u,h),RT(g,"paint","circle-opacity",u,h)),bt=RT(g,"paint","circle-stroke-width",u,h),wt=mt+"."+vt+"."+yt+"."+bt;(G=E[wt])||(G=new bf({radius:mt,stroke:vt&&bt>0?new gf({width:bt,color:vt}):void 0,fill:yt?new Kh({color:yt}):void 0}),E[wt]=G),C.setImage(G),$=C.getText(),C.setText(void 0),C.setGeometry(void 0),C.setZIndex(I),N=!0}var xt=void 0;if("text-field"in v&&(xt=FT(RT(g,"layout","text-field",u,h).toString(),n).trim(),x=RT(g,"paint","text-opacity",u,h)),xt&&x&&!U){N||(++f,(C=T[f])&&C.getText()&&!C.getFill()&&!C.getStroke()||(C=new Tf,T[f]=C),C.setImage(void 0),C.setGeometry(void 0)),C.getText()||C.setText($||new Of({padding:[2,2,2,2]})),$=C.getText();var St=Math.round(RT(g,"layout","text-size",u,h)),_t=RT(g,"layout","text-font",u,h),kt=RT(g,"layout","text-line-height",u,h),Et=n_(a?a(_t):_t,St,kt),Mt=v["text-transform"];"uppercase"==Mt?xt=xt.toUpperCase():"lowercase"==Mt&&(xt=xt.toLowerCase());var Tt=RT(g,"layout","text-max-width",u,h),Ot=RT(g,"layout","text-letter-spacing",u,h),Pt=2==c?yT(xt,Ot):ST(xt,Et,Tt,Ot);$.setText(Pt),$.setFont(Et),$.setRotation(pT(RT(g,"layout","text-rotate",u,h)));var Ct=RT(g,"layout","text-anchor",u,h),It=N||1==c?"point":RT(g,"layout","symbol-placement",u,h);$.setPlacement(It);var At=RT(g,"paint","text-halo-width",u,h),Lt=RT(g,"layout","text-offset",u,h),Rt=RT(g,"paint","text-translate",u,h),jt=0,Nt=0;if("point"==It){var $t="center";-1!==Ct.indexOf("left")?($t="left",Nt=At):-1!==Ct.indexOf("right")&&($t="right",Nt=-At),$.setTextAlign($t);var Ft=RT(g,"layout","text-rotation-alignment",u,h);$.setRotateWithView("map"==Ft)}else $.setMaxAngle(pT(RT(g,"layout","text-max-angle",u,h))*xt.length/Pt.length),$.setTextAlign(),$.setRotateWithView(!1);var Dt="middle";0==Ct.indexOf("bottom")?(Dt="bottom",jt=-At-.5*(kt-1)*St):0==Ct.indexOf("top")&&(Dt="top",jt=At+.5*(kt-1)*St),$.setTextBaseline(Dt),$.setOffsetX(Lt[0]*St+Nt+Rt[0]),$.setOffsetY(Lt[1]*St+jt+Rt[1]),k.setColor(NT(RT(g,"paint","text-color",u,h),x)),$.setFill(k);var Gt=NT(RT(g,"paint","text-halo-color",u,h),x);if(Gt){_.setColor(Gt),At*=2;var Ut=.5*St;_.setWidth(At<=Ut?At:Ut),$.setStroke(_)}else $.setStroke(void 0);var Bt=RT(g,"layout","text-padding",u,h),zt=$.getPadding();Bt!==zt[0]&&(zt[0]=Bt,zt[1]=Bt,zt[2]=Bt,zt[3]=Bt),C.setZIndex(I)}}},g=0,m=o.length;g<m;++g)d(g);return f>-1?(T.length=f+1,T):void 0}};return t.setStyle(O),t.set("mapbox-source",h),t.set("mapbox-layers",d),O}var GT=n(8338);function UT(t){return(UT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var BT,zT=/font-family: ?([^;]*);/,VT=/("|')/g;function qT(t){if(!BT){BT={};for(var e=document.styleSheets,n=0,r=e.length;n<r;++n){var i=e[n];try{var o=i.rules||i.cssRules;if(o)for(var a=0,s=o.length;a<s;++a){var l=o[a];if(5==l.type){var u=l.cssText.match(zT);BT[u[1].replace(VT,"")]=!0}}}catch(t){}}}return t in BT}var HT={},WT=GT.getNames();function KT(t){var e=t.toString();if(e in HT)return t;for(var n=t.map((function(t){var e=n_(t,1).split(" ");return[e.slice(3).join(" ").replace(/"/g,""),e[1]+e[0]]})),r=0,i=n.length;r<i;++r){var o=n[r],a=o[0];if(!qT(a)&&-1!==WT.indexOf(a)){var s="https://fonts.googleapis.com/css?family="+a.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+s+'"]')){var l=document.createElement("link");l.href=s,l.rel="stylesheet",document.head.appendChild(l)}}}return HT[e]=!0,t}var YT=/^(.*)(\?.*)$/;function XT(t,e,n){var r=(t=function(t,e){return e&&0===t.indexOf(".")&&(t=e+t),t}(t,e)).match(YT);return r?r[1]+n+(r.length>2?r[2]:""):t+n}new Du;var ZT=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JT="https://api.mapbox.com";function QT(t){var e="mapbox://";return 0!==t.indexOf(e)?"":t.slice(e.length)}function tO(t,e){var n=QT(t);if(!n)return t;var r="sprites/";if(0!==n.indexOf(r))throw new Error("unexpected sprites url: "+t);var i=n.slice(r.length);return JT+"/styles/v1/"+i+"/sprite?access_token="+e}function eO(t,e){var n=QT(t);if(!n)return t;var r="fonts/";if(0!==n.indexOf(r))throw new Error("unexpected fonts url: "+t);var i=n.slice(r.length);return JT+"/fonts/v1/"+i+"/0-255.pbf?access_token="+e}function nO(t,e){var n=QT(t);if(!n)return t;var r="styles/";if(0!==n.indexOf(r))throw new Error("unexpected style url: "+t);var i=n.slice(r.length);return JT+"/styles/v1/"+i+"?&access_token="+e}function rO(t,e){var n=QT(t);return n?"https://{a-d}.tiles.mapbox.com/v4/"+n+"/{z}/{x}/{y}.vector.pbf?access_token="+e:t}var iO=function(t){function e(e){var n=t.call(this,K)||this;return n.error=e,n}return ZT(e,t),e}(R),oO=function(t){function e(e){var n=this,r=!("declutter"in e)||e.declutter,i=new t_({state:we,format:new Ud});return(n=t.call(this,{source:i,declutter:r,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties})||this).sourceId=e.source,n.layers=e.layers,n.accessToken=e.accessToken,n.fetchStyle(e.styleUrl),n}return ZT(e,t),e.prototype.fetchStyle=function(t){var e=this,n=nO(t,this.accessToken);fetch(n).then((function(t){if(!t.ok)throw new Error("unexpected response when fetching style: "+t.status);return t.json()})).then((function(t){e.onStyleLoad(t)})).catch((function(t){e.handleError(t)}))},e.prototype.onStyleLoad=function(t){var e,n,r=this;if(this.layers){for(var i={},o=0;o<t.layers.length;++o){var a=t.layers[o];a.source&&(i[a.id]=a.source)}var s=void 0;for(o=0;o<this.layers.length;++o){var l=i[this.layers[o]];if(!l)return void this.handleError(new Error("could not find source for "+this.layers[o]));if(s){if(s!==l)return void this.handleError(new Error("layers can only use a single source, found "+s+" and "+l))}else s=l}e=s,n=this.layers}else n=e=this.sourceId;n||(n=e=Object.keys(t.sources)[0]),t.sprite&&(t.sprite=tO(t.sprite,this.accessToken)),t.glyphs&&(t.glyphs=eO(t.glyphs,this.accessToken));var u=t.sources[e];if("vector"===u.type){var c=this.getSource();c.setUrl(rO(u.url,this.accessToken)),function(t,e,n,r,i){return new Promise((function(o,a){if("object"!=UT(e)&&(e=JSON.parse(e)),8!=e.version)return a(new Error("glStyle version 8 required."));if(!(t instanceof Hb||t instanceof dS))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var s,l,u;function c(){u||e.sprite&&!s?u?(t.setStyle(u),o()):a(new Error("Something went wrong trying to apply style.")):(u=DT(t,e,n,i,s,l,KT),t.getStyle()?o():a(new Error("Nothing to show for source ["+n+"]")))}if(e.sprite){var h=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",f=XT(e.sprite,r,h+".json");fetch(f,{credentials:"same-origin"}).then((function(t){return t.ok||""===h?t:(f=XT(e.sprite,r,".json"),fetch(f,{credentials:"same-origin"}))})).then((function(t){if(t.ok)return t.json();a(new Error("Problem fetching sprite from "+f+": "+t.statusText))})).then((function(t){if(void 0===t)return a(new Error("No sprites found."));s=t,l=XT(e.sprite,r,h+".png"),c()})).catch((function(t){a(new Error("Sprites cannot be loaded: "+f+": "+t.message))}))}else c()}))}(this,t,n).then((function(){c.setState(xe)})).catch((function(t){r.handleError(t)}))}else this.handleError(new Error("only works for vector sources, found "+u.type))},e.prototype.handleError=function(t){this.dispatchEvent(new iO(t)),this.getSource().setState(Se)},e}(dS),aO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sO=function(t){function e(e){return t.call(this,e)||this}return aO(e,t),e.prototype.createRenderer=function(){return new aS(this)},e}(ix),lO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uO=function(t){function e(e){var n=t.call(this,e)||this;return n.Mp=new Vb(e),n.jp=e.getImageRatio(),n.Op=[1,0,0,1,0,0],n.Zd=null,n}return lO(e,t),e.prototype.disposeInternal=function(){this.Mp.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(!this.Mp)return new Promise((function(t){return t([])}));var e=oi(this.Op,oi(this.Zd,t.slice()));return this.Mp.getFeatures(e)},e.prototype.handleFontsChanged=function(){this.Mp.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,n=t.viewState,r=n.resolution,i=t.viewHints,o=this.Mp,a=t.extent;1!==this.jp&&Xn(a=a.slice(0),this.jp);var s=Wn(a)/r,l=zn(a)/r;if(!i[0]&&!i[1]){o.useContainer(null,null,1);var u=o.context,c=U({},t,{declutterTree:new Fy(9),extent:a,size:[s,l],viewState:U({},t.viewState,{rotation:0})}),h=new uy(a,r,e,u.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(c,null),o.renderDeclutter(c),t())}));h.addEventListener(W,function(){if(2===h.getState()){this.eo=h;var t=h.getResolution(),r=h.getPixelRatio(),i=t*e/r;this.renderedResolution=i,this.Op=ci(this.Op,s/2,l/2,1/i,-1/i,0,-n.center[0],-n.center[1])}}.bind(this)),h.load()}return this.eo&&(this.Zd=t.pixelToCoordinateTransform.slice()),!!this.eo},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.renderDeclutter=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,n,r,i,o){return this.Mp?this.Mp.forEachFeatureAtCoordinate(e,n,r,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,n,r,i,o)},e}(Jx),cO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hO=function(t){function e(e){var n=this,r=e||{},i=U({},r);return delete i.imageRatio,(n=t.call(this,i)||this).Ap=void 0!==r.imageRatio?r.imageRatio:1,n}return cO(e,t),e.prototype.getImageRatio=function(){return this.Ap},e.prototype.createRenderer=function(){return new uO(this)},e}(Uy),fO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function pO(t,e){t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)}function dO(t,e,n,r,i){var o;switch(pO(t,e),i){case 1:o=t.LUMINANCE;break;case 2:o=t.LUMINANCE_ALPHA;break;case 3:o=t.RGB;break;case 4:o=t.RGBA;break;default:throw new Error("Unsupported number of bands: "+i)}t.texImage2D(t.TEXTURE_2D,0,o,r[0],r[1],0,o,t.UNSIGNED_BYTE,n)}var gO=function(t){function e(e,n,r){var i=t.call(this)||this;i.tile,i.textures=[],i.Ke=i.Ke.bind(i),i.size=ds(n.getTileSize(e.tileCoord[0])),i.bandCount=NaN,i.ld=r;var o=new wx(hx,px);return o.fromArray([0,1,1,1,1,0,0,0]),r.flushBufferData(o),i.coords=o,i.setTile(e),i}return fO(e,t),e.prototype.setTile=function(t){t!==this.tile&&(this.tile&&this.tile.removeEventListener(W,this.Ke),this.tile=t,this.textures.length=0,this.loaded=2===t.getState(),this.loaded?this.Tp():t.addEventListener(W,this.Ke))},e.prototype.Tp=function(){var t=this.ld.getGL(),e=this.tile;if(e instanceof hy){var n=t.createTexture();return this.textures.push(n),this.bandCount=4,void function(t,e,n){pO(t,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}(t,n,e.getImage())}var r=e.getData(),i=this.size[0]*this.size[1];this.bandCount=r.byteLength/i;var o=Math.ceil(this.bandCount/4);if(1===o)return n=t.createTexture(),this.textures.push(n),void dO(t,n,r,this.size,this.bandCount);for(var a=new Array(o),s=0;s<o;++s){n=t.createTexture(),this.textures.push(n);var l=s<o-1?4:this.bandCount%4;a[s]=new Uint8Array(i*l)}for(var u=i*this.bandCount,c=0;c<u;++c){var h=c%this.bandCount,f=h%4,p=(l=(s=Math.floor(h/4))<o-1?4:this.bandCount%4,Math.floor(c/this.bandCount));a[s][p*l+f]=r[c]}for(s=0;s<o;++s)l=s<o-1?4:this.bandCount%4,dO(t,n=this.textures[s],a[s],this.size,l)},e.prototype.Ke=function(){2===this.tile.getState()&&(this.loaded=!0,this.Tp(),this.dispatchEvent(W))},e.prototype.disposeInternal=function(){var t=this.ld.getGL();this.ld.deleteBuffer(this.coords);for(var e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(W,this.Ke)},e}(H),mO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vO={TILE_TEXTURE_PREFIX:"u_tileTexture",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},yO={TEXTURE_COORD:"a_textureCoord"},bO=[{name:yO.TEXTURE_COORD,size:2,type:Mx.FLOAT}],wO={};function xO(t){return 2*(1-1/(t+1))-1}function SO(t,e,n){n in t||(t[n]=[]),t[n].push(e)}function _O(t){var e=t.layerStatesArray[t.layerIndex],n=t.extent;return e.extent&&(n=Vn(n,Vr(e.extent,t.viewState.projection))),n}var kO=function(t){function e(e,n){var r=t.call(this,e,{uniforms:n.uniforms,className:n.className})||this;r.Ep=[1,0,0,1,0,0],r.Rp=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Cp=new rS(0,0,0,0),r.Ip=yS(0,0,0),r.Pp=[0,0],r.kd=r.helper.getProgram(n.fragmentShader,n.vertexShader);var i=new wx(fx,px);i.fromArray([0,1,3,1,2,3]),r.helper.flushBufferData(i),r.Dp=i;var o=void 0!==n.cacheSize?n.cacheSize:512;return r.Np=new vS(o),r.Lp=NaN,r}return mO(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!r},e.prototype.prepareFrame=function(t){_O(t);var e=this.getLayer().getSource();return!!e&&e.getState()===xe},e.prototype.renderFrame=function(t){this.preRender(t);var e=t.viewState,n=t.layerStatesArray[t.layerIndex],r=_O(t),o=this.getLayer().getSource(),a=o.getTileGridForProjection(e.projection),s=a.getZForResolution(e.resolution,o.zDirection),l={},u=this.Np,c=a.getTileRangeForExtentAndZ(r,s),h=g(o);h in t.wantedTiles||(t.wantedTiles[h]={});for(var f=t.wantedTiles[h],p=a.getResolution(s),d=c.minX;d<=c.maxX;++d)for(var m=c.minY;m<=c.maxY;++m){var v=wS(O=yS(s,d,m,this.Ip)),y=void 0,b=void 0;u.containsKey(v)&&(b=(y=u.get(v)).tile),y&&y.tile.key===o.getKey()||(b=o.getTile(s,d,m,t.pixelRatio,e.projection),y?y.setTile(this.isDrawableTile(b)?b:b.getInterimTile()):(y=new gO(b,a,this.helper),u.set(v,y))),SO(l,y,s);var w=b.getKey();f[w]=!0,0===b.getState()&&(t.tileQueue.isKeyQueued(w)||t.tileQueue.enqueue([b,h,a.getTileCoordCenter(O),p]))}for(var x={},S=g(this),_=t.time,k=!1,E=l[s],M=0,T=E.length;M<T;++M){var O=(b=(y=E[M]).tile).tileCoord;if(y.loaded){if(1===(q=b.getAlpha(S,_))){b.endTransition(S);continue}k=!0,x[v=wS(O)]=q}if(!this.zp(a,O,s+1,l))for(var P=s-1;P>=a.minZoom&&!this.zp(a,O,P,l);--P);}this.helper.useProgram(this.kd),this.helper.prepareDraw(t,!k);for(var C=Object.keys(l).map(Number).sort(i),I=this.helper.getGL(),A=e.center[0],L=e.center[1],R=0,j=C.length;R<j;++R){var N=C[R],$=a.getResolution(N),F=ds(a.getTileSize(N),this.Pp),D=a.getOrigin(N),G=(A-D[0])/(F[0]*$),U=(D[1]-L)/(F[1]*$),B=e.resolution/$,z=xO(N),V=l[N];for(M=0,T=V.length;M<T;++M)if((y=V[M]).loaded){v=wS(O=(b=y.tile).tileCoord);var q,H=O[1],W=O[2];ci(this.Ep,0,0,2/(t.size[0]*B/F[0]),-2/(t.size[1]*B/F[1]),e.rotation,-(G-H),-(U-W)),this.helper.setUniformMatrixValue(vO.TILE_TRANSFORM,kx(this.Rp,this.Ep)),this.helper.bindBuffer(y.coords),this.helper.bindBuffer(this.Dp),this.helper.enableAttributes(bO);for(var K=0;K<y.textures.length;++K){var Y="TEXTURE"+K,X=vO.TILE_TEXTURE_PREFIX+K;I.activeTexture(I[Y]),I.bindTexture(I.TEXTURE_2D,y.textures[K]),I.uniform1i(this.helper.getUniformLocation(X),0)}(q=v in x?x[v]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(vO.TRANSITION_ALPHA,q),this.helper.setUniformFloatValue(vO.DEPTH,z),this.helper.setUniformFloatValue(vO.TEXTURE_PIXEL_WIDTH,F[0]),this.helper.setUniformFloatValue(vO.TEXTURE_PIXEL_HEIGHT,F[1]),this.helper.setUniformFloatValue(vO.RESOLUTION,e.resolution),this.helper.setUniformFloatValue(vO.ZOOM,e.zoom),this.helper.drawElements(0,this.Dp.getSize())}}this.helper.finalizeDraw(t);var Z=this.helper.getCanvas(),J=n.opacity;for(this.Lp!==J&&(Z.style.opacity=String(J),this.Lp=J);u.canExpireCache();)(y=u.pop()).dispose();return t.postRenderFunctions.push((function(t,e){o.expireCache(o.getProjection(),wO)})),this.postRender(t),Z},e.prototype.zp=function(t,e,n,r){var i=t.getTileRangeForTileCoordAndZ(e,n,this.Cp);if(!i)return!1;for(var o=!0,a=this.Np,s=i.minX;s<=i.maxX;++s)for(var l=i.minY;l<=i.maxY;++l){var u=bS(n,s,l),c=!1;if(a.containsKey(u)){var h=a.get(u);h.loaded&&(SO(r,h,n),c=!0)}c||(o=!1)}return o},e}(Fx);kO.prototype.getLayer;var EO=kO,MO=16,TO=31,OO={};function PO(t){if("number"==typeof t)return 1;if("boolean"==typeof t)return 8;if("string"==typeof t)return Ot(t)?6:2;if(!Array.isArray(t))throw new Error("Unhandled value type: "+JSON.stringify(t));var e=t;if(e.every((function(t){return"number"==typeof t})))return 3===e.length||4===e.length?20:MO;if("string"!=typeof e[0])throw new Error("Expected an expression operator but received: "+JSON.stringify(e));var n=OO[e[0]];if(void 0===n)throw new Error("Unrecognized expression operator: "+JSON.stringify(e));return n.getReturnType(e.slice(1))}function CO(t){return _(t)%1==0}function IO(t){var e=t.toString();return-1===e.indexOf(".")?e+".0":e}function AO(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec"+t.length+"("+t.map(IO).join(", ")+")"}function LO(t){var e=Et(t).slice();return e.length<4&&e.push(1),AO(e.map((function(t,e){return e<3?t/255:t})))}function RO(t,e){return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function jO(t,e){return IO(RO(t,e))}function NO(t,e,n){if(Array.isArray(e)&&"string"==typeof e[0]){var r=OO[e[0]];if(void 0===r)throw new Error("Unrecognized expression operator: "+JSON.stringify(e));return r.toGlsl(t,e.slice(1),n)}var i=PO(e);if((1&i)>0)return IO(e);if((8&i)>0)return e.toString();if((2&i)>0&&(void 0===n||2==n))return jO(t,e.toString());if((4&i)>0&&(void 0===n||4==n))return LO(e);if((i&MO)>0)return AO(e);throw new Error("Unexpected expression "+e+" (expected type "+n+")")}function $O(t){if(!(1&PO(t)))throw new Error("A numeric value was expected, got "+JSON.stringify(t)+" instead")}function FO(t){for(var e=0;e<t.length;e++)$O(t[e])}function DO(t){if(!(2&PO(t)))throw new Error("A string value was expected, got "+JSON.stringify(t)+" instead")}function GO(t){if(!(8&PO(t)))throw new Error("A boolean value was expected, got "+JSON.stringify(t)+" instead")}function UO(t,e){if(t.length!==e)throw new Error("Exactly "+e+" arguments were expected, got "+t.length+" instead")}function BO(t,e){if(t.length<e)throw new Error("At least "+e+" arguments were expected, got "+t.length+" instead")}function zO(t,e){if(t.length>e)throw new Error("At most "+e+" arguments were expected, got "+t.length+" instead")}function VO(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got "+t+" instead")}function qO(t,e){if(!CO(e))throw new Error("Could not infer only one type from the following expression: "+JSON.stringify(t))}function HO(t){return"u_var_"+t}function WO(t){return{getReturnType:function(t){return 8},toGlsl:function(e,n){UO(n,2);for(var r=TO,i=0;i<n.length;i++)r&=PO(n[i]);if(0===r)throw new Error("All arguments should be of compatible type, got "+JSON.stringify(n)+" instead");return r&=-5,"("+NO(e,n[0],r)+" "+t+" "+NO(e,n[1],r)+")"}}}function KO(t){return{getReturnType:function(t){return 8},toGlsl:function(e,n){BO(n,2);for(var r=0;r<n.length;r++)GO(n[r]);return"("+n.map((function(t){return NO(e,t)})).join(" "+t+" ")+")"}}}OO.get={getReturnType:function(t){return TO},toGlsl:function(t,e){UO(e,1),DO(e[0]);var n=e[0].toString();return-1===t.attributes.indexOf(n)&&t.attributes.push(n),(t.inFragmentShader?"v_":"a_")+n}},OO.var={getReturnType:function(t){return TO},toGlsl:function(t,e){UO(e,1),DO(e[0]);var n=e[0].toString();return-1===t.variables.indexOf(n)&&t.variables.push(n),HO(n)}},OO.band={getReturnType:function(t){return 1},toGlsl:function(t,e){BO(e,1),zO(e,3);var n=e[0];if("number"!=typeof n)throw new Error("Band index must be a number");var r=n-1,i=Math.floor(r/4),o=r%4;if(n===t.bandCount&&1===o&&(o=3),1===e.length)return"color"+i+"["+o+"]";var a=e[1],s=e[2]||0;return $O(a),$O(s),"texture2D("+(vO.TILE_TEXTURE_PREFIX+i)+", v_textureCoord + vec2("+NO(t,a)+" / "+vO.TEXTURE_PIXEL_WIDTH+", "+NO(t,s)+" / "+vO.TEXTURE_PIXEL_HEIGHT+"))["+o+"]"}},OO.time={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,0),"u_time"}},OO.zoom={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,0),"u_zoom"}},OO.resolution={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,0),"u_resolution"}},OO["*"]={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" * "+NO(t,e[1])+")"}},OO["/"]={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" / "+NO(t,e[1])+")"}},OO["+"]={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" + "+NO(t,e[1])+")"}},OO["-"]={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" - "+NO(t,e[1])+")"}},OO.clamp={getReturnType:function(t){return 1},toGlsl:function(t,e){UO(e,3),FO(e);var n=NO(t,e[1]),r=NO(t,e[2]);return"clamp("+NO(t,e[0])+", "+n+", "+r+")"}},OO["%"]={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,2),FO(e),"mod("+NO(t,e[0])+", "+NO(t,e[1])+")"}},OO["^"]={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,2),FO(e),"pow("+NO(t,e[0])+", "+NO(t,e[1])+")"}},OO.abs={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,1),FO(e),"abs("+NO(t,e[0])+")"}},OO.sin={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,1),FO(e),"sin("+NO(t,e[0])+")"}},OO.cos={getReturnType:function(t){return 1},toGlsl:function(t,e){return UO(e,1),FO(e),"cos("+NO(t,e[0])+")"}},OO.atan={getReturnType:function(t){return 1},toGlsl:function(t,e){return BO(e,1),zO(e,2),FO(e),2===e.length?"atan("+NO(t,e[0])+", "+NO(t,e[1])+")":"atan("+NO(t,e[0])+")"}},OO[">"]={getReturnType:function(t){return 8},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" > "+NO(t,e[1])+")"}},OO[">="]={getReturnType:function(t){return 8},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" >= "+NO(t,e[1])+")"}},OO["<"]={getReturnType:function(t){return 8},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" < "+NO(t,e[1])+")"}},OO["<="]={getReturnType:function(t){return 8},toGlsl:function(t,e){return UO(e,2),FO(e),"("+NO(t,e[0])+" <= "+NO(t,e[1])+")"}},OO["=="]=WO("=="),OO["!="]=WO("!="),OO["!"]={getReturnType:function(t){return 8},toGlsl:function(t,e){return UO(e,1),GO(e[0]),"(!"+NO(t,e[0])+")"}},OO.all=KO("&&"),OO.any=KO("||"),OO.between={getReturnType:function(t){return 8},toGlsl:function(t,e){UO(e,3),FO(e);var n=NO(t,e[1]),r=NO(t,e[2]),i=NO(t,e[0]);return"("+i+" >= "+n+" && "+i+" <= "+r+")"}},OO.array={getReturnType:function(t){return MO},toGlsl:function(t,e){BO(e,2),zO(e,4),FO(e);var n=e.map((function(e){return NO(t,e,1)}));return"vec"+e.length+"("+n.join(", ")+")"}},OO.color={getReturnType:function(t){return 4},toGlsl:function(t,e){BO(e,3),zO(e,4),FO(e);var n=e;3===e.length&&n.push(1);var r=e.map((function(e,n){return NO(t,e,1)+(n<3?" / 255.0":"")}));return"vec"+e.length+"("+r.join(", ")+")"}},OO.interpolate={getReturnType:function(t){for(var e=5,n=3;n<t.length;n+=2)e&=PO(t[n]);return e},toGlsl:function(t,e,n){VO(e),BO(e,6);var r,i=e[0];switch(i[0]){case"linear":r=1;break;case"exponential":r=i[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '+JSON.stringify(i));var o=void 0!==n?n:TO,a=OO.interpolate.getReturnType(e)&o;qO(e,a);for(var s=NO(t,e[1]),l=IO(r),u="",c=2;c<e.length-2;c+=2){var h=NO(t,e[c]),f=u||NO(t,e[c+1],a),p=NO(t,e[c+2]);u="mix("+f+", "+NO(t,e[c+3],a)+", pow(clamp(("+s+" - "+h+") / ("+p+" - "+h+"), 0.0, 1.0), "+l+"))"}return u}},OO.match={getReturnType:function(t){for(var e=TO,n=2;n<t.length;n+=2)e&=PO(t[n]);return e&PO(t[t.length-1])},toGlsl:function(t,e,n){VO(e),BO(e,4);var r=void 0!==n?n:TO,i=OO.match.getReturnType(e)&r;qO(e,i);for(var o=NO(t,e[0]),a=NO(t,e[e.length-1],i),s=null,l=e.length-3;l>=1;l-=2)s="("+o+" == "+NO(t,e[l])+" ? "+NO(t,e[l+1],i)+" : "+(s||a)+")";return s}},OO.case={getReturnType:function(t){for(var e=TO,n=1;n<t.length;n+=2)e&=PO(t[n]);return e&PO(t[t.length-1])},toGlsl:function(t,e,n){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got "+t+" instead")}(e),BO(e,3);var r=void 0!==n?n:TO,i=OO.case.getReturnType(e)&r;qO(e,i);for(var o=0;o<e.length-1;o+=2)GO(e[o]);var a=NO(t,e[e.length-1],i),s=null;for(o=e.length-3;o>=0;o-=2)s="("+NO(t,e[o])+" ? "+NO(t,e[o+1],i)+" : "+(s||a)+")";return s}};var YO=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return t.prototype.addUniform=function(t){return this.uniforms.push(t),this},t.prototype.addAttribute=function(t){return this.attributes.push(t),this},t.prototype.addVarying=function(t,e,n){return this.varyings.push({name:t,type:e,expression:n}),this},t.prototype.setSizeExpression=function(t){return this.sizeExpression=t,this},t.prototype.setRotationExpression=function(t){return this.rotationExpression=t,this},t.prototype.setSymbolOffsetExpression=function(t){return this.offsetExpression=t,this},t.prototype.setColorExpression=function(t){return this.colorExpression=t,this},t.prototype.setTextureCoordinateExpression=function(t){return this.texCoordExpression=t,this},t.prototype.setFragmentDiscardExpression=function(t){return this.discardExpression=t,this},t.prototype.setSymbolRotateWithView=function(t){return this.rotateWithView=t,this},t.prototype.getSizeExpression=function(){return this.sizeExpression},t.prototype.getOffsetExpression=function(){return this.offsetExpression},t.prototype.getColorExpression=function(){return this.colorExpression},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},t.prototype.getSymbolVertexShader=function(t){var e=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",n=this.attributes,r=this.varyings;return t&&(n=n.concat("vec4 a_hitColor"),r=r.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n"+this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n")+"\nattribute vec2 a_position;\nattribute float a_index;\n"+n.map((function(t){return"attribute "+t+";"})).join("\n")+"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n"+r.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")+"\nvoid main(void) {\n  mat4 offsetMatrix = "+e+";\n  vec2 halfSize = "+this.sizeExpression+" * 0.5;\n  vec2 offset = "+this.offsetExpression+";\n  float angle = "+this.rotationExpression+";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = "+this.texCoordExpression+";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n"+r.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")+"\n}"},t.prototype.getSymbolFragmentShader=function(t){var e=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",n=this.varyings;return t&&(n=n.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n"+this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n")+"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n"+n.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")+"\nvoid main(void) {\n  if ("+this.discardExpression+") { discard; }\n  gl_FragColor = "+this.colorExpression+";\n  gl_FragColor.rgb *= gl_FragColor.a;\n"+e+"\n}"},t}();function XO(t){var e=t.symbol,n=void 0!==e.size?e.size:1,r=e.color||"white",i=e.textureCoord||[0,0,1,1],o=e.offset||[0,0],a=void 0!==e.opacity?e.opacity:1,s=void 0!==e.rotation?e.rotation:0,l={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{}},u=NO(l,n,17),c=NO(l,o,MO),h=NO(l,i,MO),f=NO(l,s,1),p={inFragmentShader:!0,variables:l.variables,attributes:[],stringLiteralsMap:l.stringLiteralsMap},d=NO(p,r,4),g=NO(p,a,1),m="1.0",v="vec2("+NO(p,n,17)+").x";switch(e.symbolType){case"square":case"image":break;case"circle":m="(1.0-smoothstep(1.-4./"+v+",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))";break;case"triangle":var y="(v_quadCoord*2.-1.)",b="(atan("+y+".x,"+y+".y))";m="(1.0-smoothstep(.5-3./"+v+",.5,cos(floor(.5+"+b+"/2.094395102)*2.094395102-"+b+")*length("+y+")))";break;default:throw new Error("Unexpected symbol type: "+e.symbolType)}var w=(new YO).setSizeExpression("vec2("+u+")").setRotationExpression(f).setSymbolOffsetExpression(c).setTextureCoordinateExpression(h).setSymbolRotateWithView(!!e.rotateWithView).setColorExpression("vec4("+d+".rgb, "+d+".a * "+g+" * "+m+")");if(t.filter){var x=NO(p,t.filter,8);w.setFragmentDiscardExpression("!"+x)}var S={};if(p.variables.forEach((function(e){var n=HO(e);w.addUniform("float "+n),S[n]=function(){if(!t.variables||void 0===t.variables[e])throw new Error("The following variable is missing from the style: "+e);var n=t.variables[e];return"string"==typeof n&&(n=RO(l,n)),void 0!==n?n:-9999999}})),"image"===e.symbolType&&e.src){var _=new Image;_.src=e.src,w.addUniform("sampler2D u_texture").setColorExpression(w.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),S.u_texture=_}return p.attributes.forEach((function(t){-1===l.attributes.indexOf(t)&&l.attributes.push(t),w.addVarying("v_"+t,"float","a_"+t)})),l.attributes.forEach((function(t){w.addAttribute("float a_"+t)})),{builder:w,attributes:l.attributes.map((function(t){return{name:t,callback:function(e,n){var r=n[t];return"string"==typeof r&&(r=RO(l,r)),void 0!==r?r:-9999999}}})),uniforms:S}}var ZO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JO=function(t){function e(e){var n=this,r=U({},e);return(n=t.call(this,r)||this).Fp=XO(e.style),n.Up=!!e.disableHitDetection,n}return ZO(e,t),e.prototype.createRenderer=function(){return new Vx(this,{className:this.getClassName(),vertexShader:this.Fp.builder.getSymbolVertexShader(),fragmentShader:this.Fp.builder.getSymbolFragmentShader(),hitVertexShader:!this.Up&&this.Fp.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.Up&&this.Fp.builder.getSymbolFragmentShader(!0),uniforms:this.Fp.uniforms,attributes:this.Fp.attributes})},e.prototype.disposeInternal=function(){this.getRenderer().disposeInternal(),t.prototype.disposeInternal.call(this)},e}(Ee),QO=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tP=function(t){function e(e){var n=this,r=e?U({},e):{},i=r.style||{};delete r.style;var o=r.cacheSize;return delete r.cacheSize,(n=t.call(this,r)||this).ci=i,n.$t=o,n}return QO(e,t),e.prototype.createRenderer=function(){var t=this.getSource(),e=function(t,e){var n="\n    attribute vec2 "+yO.TEXTURE_COORD+";\n    uniform mat4 "+vO.TILE_TRANSFORM+";\n    uniform float "+vO.DEPTH+";\n\n    varying vec2 v_textureCoord;\n\n    void main() {\n      v_textureCoord = "+yO.TEXTURE_COORD+";\n      gl_Position = "+vO.TILE_TRANSFORM+" * vec4("+yO.TEXTURE_COORD+", "+vO.DEPTH+", 1.0);\n    }\n  ",r={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},bandCount:e},i=[];if(void 0!==t.color){var o=NO(r,t.color,4);i.push("color = "+o+";")}if(void 0!==t.contrast){var a=NO(r,t.contrast,1);i.push("color.rgb = clamp(("+a+" + 1.0) * color.rgb - ("+a+" / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}if(void 0!==t.exposure){var s=NO(r,t.exposure,1);i.push("color.rgb = clamp(("+s+" + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}if(void 0!==t.saturation){var l=NO(r,t.saturation,1);i.push("\n      float saturation = "+l+" + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    ")}if(void 0!==t.gamma){var u=NO(r,t.gamma,1);i.push("color.rgb = pow(color.rgb, vec3(1.0 / "+u+"));")}if(void 0!==t.brightness){var c=NO(r,t.brightness,1);i.push("color.rgb = clamp(color.rgb + "+c+", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}var h={},f=r.variables.length;if(f>1&&!t.variables)throw new Error("Missing variables in style (expected "+r.variables+")");for(var p=function(e){var n=r.variables[e];if(!(n in t.variables))throw new Error("Missing '"+n+"' in style variables");var i=HO(n);h[i]=function(){var e=t.variables[n];return"string"==typeof e&&(e=RO(r,e)),void 0!==e?e:-9999999}},d=0;d<f;++d)p(d);for(var g=Object.keys(h).map((function(t){return"uniform float "+t+";"})),m=Math.ceil(e/4),v=new Array(m),y=0;y<m;++y){var b=vO.TILE_TEXTURE_PREFIX+y;g.push("uniform sampler2D "+b+";"),v[y]="vec4 color"+y+" = texture2D("+b+", v_textureCoord);"}return{vertexShader:n,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    uniform float "+vO.TRANSITION_ALPHA+";\n    uniform float "+vO.TEXTURE_PIXEL_WIDTH+";\n    uniform float "+vO.TEXTURE_PIXEL_HEIGHT+";\n    uniform float "+vO.RESOLUTION+";\n    uniform float "+vO.ZOOM+";\n\n    "+g.join("\n")+"\n\n    void main() {\n      "+v.join("\n")+"\n\n      vec4 color = color0;\n\n      "+i.join("\n")+"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= "+vO.TRANSITION_ALPHA+";\n    }",uniforms:h}}(this.ci,"bandCount"in t?t.bandCount:4);return this.Bp=this.ci.variables||{},new EO(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,className:this.getClassName(),cacheSize:this.$t})},e.prototype.updateStyleVariables=function(t){U(this.Bp,t),this.changed()},e}(ix),eP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nP=function(t){function e(e){return(e=U({},e)).controls||(e.controls=js()),e.interactions||(e.interactions=Jw({onFocusOnly:!0})),t.call(this,e)||this}return eP(e,t),e.prototype.createRenderer=function(){return new Wi(this)},e}(ms),rP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function iP(t,e,n,r){var i=document.createElement("script"),o="olc_"+g(e);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+o;var s=setTimeout((function(){a(),n&&n()}),1e4);window[o]=function(t){clearTimeout(s),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}var oP,aP=function(t){function e(e){var n=this,r="Unexpected response status: "+e.status;return(n=t.call(this,r)||this).name="ResponseError",n.response=e,n}return rP(e,t),e}(Error),sP=function(t){function e(e){var n=t.call(this,"Failed to issue request")||this;return n.name="ClientError",n.client=e,n}return rP(e,t),e}(Error);function lP(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var i=void 0;try{i=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void n(new Error(o))}e(i)}else n(new aP(r))})),r.addEventListener("error",(function(t){n(new sP(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))}function uP(t,e){return e.indexOf("://")>=0?e:new URL(e,t).href}var cP,hP=function(){function t(t,e,n,r,i,o){this.Gp=t,this.qp=e;var a={},s=jr(this.qp,this.Gp);this.Vp=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.Zp=r,this.Wp=i*i,this.$p=[],this.Hp=!1,this.Kp=this.Gp.canWrapX()&&!!r&&!!this.Gp.getExtent()&&Wn(r)==Wn(this.Gp.getExtent()),this.Xp=this.Gp.getExtent()?Wn(this.Gp.getExtent()):null,this.Yp=this.qp.getExtent()?Wn(this.qp.getExtent()):null;var l=qn(n),u=Hn(n),c=Dn(n),h=Fn(n),f=this.Vp(l),p=this.Vp(u),d=this.Vp(c),g=this.Vp(h),m=10+(o?Math.max(0,Math.ceil(_($n(n)/(o*o*256*256)))):0);if(this.Jp(l,u,c,h,f,p,d,g,m),this.Hp){var v=1/0;this.$p.forEach((function(t,e,n){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])})),this.$p.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.Xp/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.Xp/2&&(e[0][0]-=this.Xp),e[1][0]-v>this.Xp/2&&(e[1][0]-=this.Xp),e[2][0]-v>this.Xp/2&&(e[2][0]-=this.Xp);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.Xp/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.Qp=function(t,e,n,r,i,o){this.$p.push({source:[r,i,o],target:[t,e,n]})},t.prototype.Jp=function(t,e,n,r,i,o,a,s,l){var u=gn([i,o,a,s]),c=this.Xp?Wn(u)/this.Xp:null,h=this.Xp,f=this.Gp.canWrapX()&&c>.5&&c<1,p=!1;if(l>0&&(this.qp.isGlobal()&&this.Yp&&(p=Wn(gn([t,e,n,r]))/this.Yp>.25||p),!f&&this.Gp.isGlobal()&&c&&(p=c>.25||p)),!(!p&&this.Zp&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||Kn(u,this.Zp)){var d=0;if(!(p||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(l>0)p=!0;else if(1!=(d=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(l>0){if(!p){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],m=this.Vp(g),v=void 0;v=f?(P(i[0],h)+P(a[0],h))/2-P(m[0],h):(i[0]+a[0])/2-m[0];var y=(i[1]+a[1])/2-m[1];p=v*v+y*y>this.Wp}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var b=[(e[0]+n[0])/2,(e[1]+n[1])/2],w=this.Vp(b),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],S=this.Vp(x);this.Jp(t,e,b,x,i,o,w,S,l-1),this.Jp(x,b,n,r,S,w,a,s,l-1)}else{var _=[(t[0]+e[0])/2,(t[1]+e[1])/2],k=this.Vp(_),E=[(n[0]+r[0])/2,(n[1]+r[1])/2],M=this.Vp(E);this.Jp(t,_,E,r,i,k,M,s,l-1),this.Jp(_,e,n,E,k,o,a,M,l-1)}return}}if(f){if(!this.Kp)return;this.Hp=!0}0==(11&d)&&this.Qp(t,n,r,i,a,s),0==(14&d)&&this.Qp(t,n,e,i,a,o),d&&(0==(13&d)&&this.Qp(e,r,t,o,s,i),0==(7&d)&&this.Qp(e,r,n,o,s,a))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.$p.forEach((function(e,n,r){var i=e.source;In(t,i[0]),In(t,i[1]),In(t,i[2])})),t},t.prototype.getTriangles=function(){return this.$p},t}(),fP="1.3.0",pP={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function dP(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function gP(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function mP(t,e,n,r){var i=Nr(n,e,t),o=Tr(e,r,n),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var l=t.getExtent();if(!l||bn(l,i)){var u=Tr(t,o,i)/o;isFinite(u)&&u>0&&(o/=u)}return o}function vP(t,e,n,r){var i=Gn(n),o=mP(t,e,i,r);return(!isFinite(o)||o<=0)&&Nn(n,(function(n){return o=mP(t,e,n,r),isFinite(o)&&o>0})),o}function yP(t,e,n,r,i,o,a,s,l,u,c,h){var f=Gt(Math.round(n*t),Math.round(n*e));if(U(f,h),0===l.length)return f.canvas;function p(t){return Math.round(t*n)/n}f.scale(n,n),f.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){Cn(d,t.extent)}));var g=Wn(d),m=zn(d),v=Gt(Math.round(n*g/r),Math.round(n*m/r));U(v,h);var y=n/r;l.forEach((function(t,e,n){var r=t.extent[0]-d[0],i=-(t.extent[3]-d[3]),o=Wn(t.extent),a=zn(t.extent);t.image.width>0&&t.image.height>0&&v.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,r*y,i*y,o*y,a*y)}));var b=qn(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,l=a[0][0],u=a[0][1],c=a[1][0],g=a[1][1],m=a[2][0],y=a[2][1],w=p((s[0][0]-b[0])/o),x=p(-(s[0][1]-b[1])/o),S=p((s[1][0]-b[0])/o),_=p(-(s[1][1]-b[1])/o),k=p((s[2][0]-b[0])/o),E=p(-(s[2][1]-b[1])/o),T=l,O=u;l=0,u=0;var P=M([[c-=T,g-=O,0,0,S-w],[m-=T,y-=O,0,0,k-w],[0,0,c,g,_-x],[0,0,m,y,E-x]]);if(P){if(f.save(),f.beginPath(),function(){if(void 0===cP){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",dP(t,4,5,4,0),dP(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;cP=gP(e,0)||gP(e,4)||gP(e,8)}return cP}()||h===pP){f.moveTo(S,_);for(var C=w-S,I=x-_,A=0;A<4;A++)f.lineTo(S+p((A+1)*C/4),_+p(A*I/3)),3!=A&&f.lineTo(S+p((A+1)*C/4),_+p((A+1)*I/3));f.lineTo(k,E)}else f.moveTo(S,_),f.lineTo(w,x),f.lineTo(k,E);f.clip(),f.transform(P[0],P[2],P[1],P[3],w,x),f.translate(d[0]-T,d[3]-O),f.scale(r/n,-r/n),f.drawImage(v.canvas,0,0),f.restore()}})),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,s.getTriangles().forEach((function(t,e,n){var r=t.target,i=(r[0][0]-b[0])/o,a=-(r[0][1]-b[1])/o,s=(r[1][0]-b[0])/o,l=-(r[1][1]-b[1])/o,u=(r[2][0]-b[0])/o,c=-(r[2][1]-b[1])/o;f.beginPath(),f.moveTo(s,l),f.lineTo(i,a),f.lineTo(u,c),f.closePath(),f.stroke()})),f.restore()),f.canvas}var bP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wP=function(t){function e(e,n,r,i,o,a,s){var l=this,u=e.getExtent(),c=n.getExtent(),h=c?Vn(r,c):r,f=mP(e,n,Gn(h),i),p=new hP(e,n,h,u,.5*f,i),d=a(p.calculateSourceExtent(),f,o),g=d?0:4,m=d?d.getPixelRatio():1;return(l=t.call(this,r,i,m,g)||this).qp=n,l.Zp=u,l.ty=p,l.ae=i,l.ny=r,l.ey=d,l.iy=m,l.oy=s,l.fo=null,l.sy=null,l}return bP(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.uy(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.fo},e.prototype.getProjection=function(){return this.qp},e.prototype.hy=function(){var t=this.ey.getState();if(2==t){var e=Wn(this.ny)/this.ae,n=zn(this.ny)/this.ae;this.fo=yP(e,n,this.iy,this.ey.getResolution(),this.Zp,this.ae,this.ny,this.ty,[{extent:this.ey.getExtent(),image:this.ey.getImage()}],0,void 0,this.oy)}this.state=t,this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.ey.getState();2==t||3==t?this.hy():(this.sy=it(this.ey,W,(function(t){var e=this.ey.getState();2!=e&&3!=e||(this.uy(),this.hy())}),this),this.ey.load())}},e.prototype.uy=function(){at(this.sy),this.sy=null},e}(rf),xP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SP=function(t){function e(e,n,r,i,o,a,s,l,u,c,h,f){var p=t.call(this,o,0)||this;p.ly=void 0!==h&&h,p.oy=f,p.Me=s,p.vy=l,p.fo=null,p.py=n,p.my=i,p.wy=a||o,p.gy=[],p.ky=null,p.xy=0;var d=i.getTileCoordExtent(p.wy),g=p.my.getExtent(),m=p.py.getExtent(),v=g?Vn(d,g):d;if(0===$n(v))return p.state=4,p;var y=e.getExtent();y&&(m=m?Vn(m,y):y);var b=i.getResolution(p.wy[0]),w=vP(e,r,v,b);if(!isFinite(w)||w<=0)return p.state=4,p;var S=void 0!==c?c:.5;if(p.ty=new hP(e,r,v,m,w*S,b),0===p.ty.getTriangles().length)return p.state=4,p;p.xy=n.getZForResolution(w);var _=p.ty.calculateSourceExtent();if(m&&(e.canWrapX()?(_[1]=x(_[1],m[1],m[3]),_[3]=x(_[3],m[1],m[3])):_=Vn(_,m)),$n(_)){for(var k=n.getTileRangeForExtentAndZ(_,p.xy),E=k.minX;E<=k.maxX;E++)for(var M=k.minY;M<=k.maxY;M++){var T=u(p.xy,E,M,s);T&&p.gy.push(T)}0===p.gy.length&&(p.state=4)}else p.state=4;return p}return xP(e,t),e.prototype.getImage=function(){return this.fo},e.prototype.hy=function(){var t=[];if(this.gy.forEach(function(e,n,r){e&&2==e.getState()&&t.push({extent:this.py.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.gy.length=0,0===t.length)this.state=3;else{var e=this.wy[0],n=this.my.getTileSize(e),r="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],o=this.my.getResolution(e),a=this.py.getResolution(this.xy),s=this.my.getTileCoordExtent(this.wy);this.fo=yP(r,i,this.Me,a,this.py.getExtent(),o,s,this.ty,t,this.vy,this.ly,this.oy),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.ky=[],this.gy.forEach(function(e,n,r){var i=e.getState();if(0==i||1==i){t++;var o=it(e,W,(function(n){var r=e.getState();2!=r&&3!=r&&4!=r||(at(o),0==--t&&(this.Sy(),this.hy()))}),this);this.ky.push(o)}}.bind(this)),0===t?setTimeout(this.hy.bind(this),0):this.gy.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.Sy=function(){this.ky.forEach(at),this.ky=null},e}($s),_P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function kP(t,e){t.getImage().src=e}var EP=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:kP,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:hy,n.tileCacheForProjection={},n.tileGridForProjection={},n._y=e.reprojectionErrorThreshold,n.oy=!1===e.imageSmoothing?pP:void 0,n.My=!1,n}return _P(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?e:{})}},e.prototype.getContextOptions=function(){return this.oy},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Lr(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.oy?"\n"+JSON.stringify(this.oy):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Lr(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Lr(e,t)){var n=g(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=AS(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Lr(e,t))return this.tileCache;var n=g(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new MS(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.jy=function(t,e,n,r,i,o){var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,i),l=s?this.tileUrlFunction(s,r,i):void 0,u=new this.tileClass(a,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(W,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,r,i){var o=this.getProjection();if(o&&i&&!Lr(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,n],l=void 0,u=wS(s);a.containsKey(u)&&(l=a.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(i),p=this.getTileCoordForTileUrlFunction(s,i),d=new SP(o,h,i,f,s,p,this.getTilePixelRatio(r),this.getGutter(),function(t,e,n,r){return this.getTileInternal(t,e,n,r,o)}.bind(this),this._y,this.My,this.oy);return d.key=c,l?(d.interimTile=l,d.refreshInterimChain(),a.replace(u,d)):a.set(u,d),d}return this.getTileInternal(t,e,n,r,o||i)},e.prototype.getTileInternal=function(t,e,n,r,i){var o=null,a=bS(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var l=o;o=this.jy(t,e,n,r,i,s),0==l.getState()?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.jy(t,e,n,r,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.My!=t){for(var e in this.My=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Mr(t);if(n){var r=g(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}},e}(YS),MP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function TP(t){var e,n,r=t[0],i=new Array(r),o=1<<r-1;for(e=0;e<r;++e)n=48,t[1]&o&&(n+=1),t[2]&o&&(n+=2),i[e]=String.fromCharCode(n),o>>=1;return i.join("")}var OP=function(t){function e(e){var n=this,r=void 0!==e.hidpi&&e.hidpi;return(n=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",imageSmoothing:e.imageSmoothing,opaque:!0,projection:Mr("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:we,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).Oy=r,n.Ay=void 0!==e.culture?e.culture:"en-us",n.Ty=void 0!==e.maxZoom?e.maxZoom:-1,n.Ey=e.key,n.Ry=e.imagerySet,iP("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+n.Ry+"?uriScheme=https&include=ImageryProviders&key="+n.Ey+"&c="+n.Ay,n.handleImageryMetadataResponse.bind(n),void 0,"jsonp"),n}return MP(e,t),e.prototype.getApiKey=function(){return this.Ey},e.prototype.getImagerySet=function(){return this.Ry},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],n=-1==this.Ty?e.zoomMax:this.Ty,r=FS(this.getProjection()),i=this.Oy?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/i:[e.imageWidth/i,e.imageHeight/i],a=jS({extent:r,minZoom:e.zoomMin,maxZoom:n,tileSize:o});this.tileGrid=a;var s=this.Ay,l=this.Oy;if(this.tileUrlFunction=qS(e.imageUrlSubdomains.map((function(t){var n=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,e,i){if(t){yS(t[0],t[1],t[2],n);var o=r;return l&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",TP(n))}}}))),e.imageryProviders){var u=Rr(Mr("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var n=[],r=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(r.resolution,this.zDirection),a=i.getTileCoordForCoordAndZ(r.center,o)[0];return e.imageryProviders.map((function(e){for(var r=!1,i=e.coverageAreas,o=0,s=i.length;o<s;++o){var l=i[o];if(a>=l.zoomMin&&a<=l.zoomMax){var c=l.bbox;if(Kn(Jn([c[1],c[0],c[3],c[2]],u),t.extent)){r=!0;break}}}r&&n.push(e.attribution)})),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),n}.bind(this))}this.setState(xe)}else this.setState(Se)},e}(EP),PP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CP=function(t){function e(e){var n=e||{},r=void 0!==n.projection?n.projection:"EPSG:3857",i=void 0!==n.tileGrid?n.tileGrid:jS({extent:FS(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:r,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return PP(e,t),e}(EP),IP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AP=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection})||this;return n.Cy=e.account,n.Iy=e.map||"",n.Py=e.config||{},n.Dy={},n.Ny(),n}return IP(e,t),e.prototype.getConfig=function(){return this.Py},e.prototype.updateConfig=function(t){U(this.Py,t),this.Ny()},e.prototype.setConfig=function(t){this.Py=t||{},this.Ny()},e.prototype.Ny=function(){var t=JSON.stringify(this.Py);if(this.Dy[t])this.Ly(this.Dy[t]);else{var e="https://"+this.Cy+".carto.com/api/v1/map";this.Iy&&(e+="/named/"+this.Iy);var n=new XMLHttpRequest;n.addEventListener("load",this.zy.bind(this,t)),n.addEventListener("error",this.Fy.bind(this)),n.open("POST",e),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.Py))}},e.prototype.zy=function(t,e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var r=void 0;try{r=JSON.parse(n.responseText)}catch(t){return void this.setState(Se)}this.Ly(r),this.Dy[t]=r,this.setState(xe)}else this.setState(Se)},e.prototype.Fy=function(t){this.setState(Se)},e.prototype.Ly=function(t){var e="https://"+t.cdn_url.https+"/"+this.Cy+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(CP),LP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RP=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return n.resolution=void 0,n.distance=void 0!==e.distance?e.distance:20,n.minDistance=e.minDistance||0,n.interpolationRatio=0,n.features=[],n.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return w(e.getType()==tr.POINT,10),e},n.Uy=e.createCluster,n.source=null,n.By=n.refresh.bind(n),n.updateDistance(n.distance,n.minDistance),n.setSource(e.source||null),n}return LP(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,n){this.source.loadFeatures(t,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())},e.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},e.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},e.prototype.getMinDistance=function(){return this.minDistance},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(W,this.By),this.source=t,t&&t.addEventListener(W,this.By),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.updateDistance=function(t,e){var n=0===t?0:Math.min(e,t)/t,r=t!==this.distance||this.interpolationRatio!==n;this.distance=t,this.minDistance=e,this.interpolationRatio=n,r&&this.refresh()},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,n=this.source.getFeatures(),r={},i=0,o=n.length;i<o;i++){var a=n[i];if(!(g(a)in r)){var s=this.geometryFunction(a);if(s){Mn(s.getCoordinates(),t),mn(t,e,t);var l=this.source.getFeaturesInExtent(t).filter((function(t){var e=g(t);return!(e in r)&&(r[e]=!0,!0)}));this.features.push(this.createCluster(l,t))}}}},e.prototype.createCluster=function(t,e){for(var n=[0,0],r=t.length-1;r>=0;--r){var i=this.geometryFunction(t[r]);i?lr(n,i.getCoordinates()):t.splice(r,1)}gr(n,1/t.length);var o=Gn(e),a=this.interpolationRatio,s=new Ia([n[0]*(1-a)+o[0]*a,n[1]*(1-a)+o[1]*a]);return this.Uy?this.Uy(s,t):new nl({geometry:s,features:t})},e}(iw),jP=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NP=function(t){function e(e){var n=this,r=void 0===e.projection?"EPSG:3857":e.projection,i=e.tileGrid;return void 0===i&&r&&(i=jS({extent:FS(r),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),(n=t.call(this,{cacheSize:.1,projection:r,tileGrid:i,opaque:e.opaque,state:e.state,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition})||this).bp={},n.oi=e.loader,n.Ke=n.Ke.bind(n),n.bandCount=4,n}return jP(e,t),e.prototype.setLoader=function(t){this.oi=t},e.prototype.getTile=function(t,e,n,r,i){var o=bS(t,e,n);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=this.oi,s=new Ds(U({tileCoord:[t,e,n],loader:function(){return a(t,e,n)}},this.tileOptions));return s.key=this.getKey(),s.addEventListener(W,this.Ke),this.tileCache.set(o,s),s},e.prototype.Ke=function(t){var e,n=t.target,r=g(n),i=n.getState();1==i?(this.bp[r]=!0,e=TS):r in this.bp&&(delete this.bp[r],e=3==i?PS:2==i?OS:void 0),e&&this.dispatchEvent(new US(e,n))},e}(BS);function $P(t){return t instanceof DataView}for(var FP=new ArrayBuffer(4),DP=new Float32Array(FP),GP=new Uint32Array(FP),UP=new Uint32Array(512),BP=new Uint32Array(512),zP=0;zP<256;++zP){var VP=zP-127;VP<-27?(UP[0|zP]=0,UP[256|zP]=32768,BP[0|zP]=24,BP[256|zP]=24):VP<-14?(UP[0|zP]=1024>>-VP-14,UP[256|zP]=1024>>-VP-14|32768,BP[0|zP]=-VP-1,BP[256|zP]=-VP-1):VP<=15?(UP[0|zP]=VP+15<<10,UP[256|zP]=VP+15<<10|32768,BP[0|zP]=13,BP[256|zP]=13):VP<128?(UP[0|zP]=31744,UP[256|zP]=64512,BP[0|zP]=24,BP[256|zP]=24):(UP[0|zP]=31744,UP[256|zP]=64512,BP[0|zP]=13,BP[256|zP]=13)}var qP=new Uint32Array(2048),HP=new Uint32Array(64),WP=new Uint32Array(64);qP[0]=0;for(var KP=1;KP<1024;++KP){for(var YP=KP<<13,XP=0;0==(8388608&YP);)XP-=8388608,YP<<=1;YP&=-8388609,XP+=947912704,qP[KP]=YP|XP}for(var ZP=1024;ZP<2048;++ZP)qP[ZP]=939524096+(ZP-1024<<13);HP[0]=0;for(var JP=1;JP<31;++JP)HP[JP]=JP<<23;HP[31]=1199570944,HP[32]=2147483648;for(var QP=33;QP<63;++QP)HP[QP]=2147483648+(QP-32<<23);HP[63]=3347054592,WP[0]=0;for(var tC=1;tC<64;++tC)WP[tC]=32===tC?0:1024;function eC(t){var e=t>>10;return GP[0]=qP[WP[e]+(1023&t)]+HP[e],DP[0]}function nC(t,e){if(!$P(t))throw new TypeError("First argument to getFloat16 function must be a DataView");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return eC(t.getUint16.apply(t,[e].concat(r)))}var rC=n(5222),iC=n.n(rC),oC={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},aC={};for(var sC in oC)oC.hasOwnProperty(sC)&&(aC[oC[sC]]=parseInt(sC,10));var lC=[aC.BitsPerSample,aC.ExtraSamples,aC.SampleFormat,aC.StripByteCounts,aC.StripOffsets,aC.StripRowCounts,aC.TileByteCounts,aC.TileOffsets,aC.SubIFDs],uC={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},cC={};for(var hC in uC)uC.hasOwnProperty(hC)&&(cC[uC[hC]]=parseInt(hC,10));var fC={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},pC={};for(var dC in fC)fC.hasOwnProperty(dC)&&(pC[fC[dC]]=parseInt(dC,10));function gC(t,e){for(var n,r=t.width,i=t.height,o=new Uint8Array(r*i*3),a=0,s=0;a<t.length;++a,s+=3)n=256-t[a]/e*256,o[s]=n,o[s+1]=n,o[s+2]=n;return o}function mC(t,e){for(var n,r=t.width,i=t.height,o=new Uint8Array(r*i*3),a=0,s=0;a<t.length;++a,s+=3)n=t[a]/e*256,o[s]=n,o[s+1]=n,o[s+2]=n;return o}function vC(t,e){for(var n=t.width,r=t.height,i=new Uint8Array(n*r*3),o=e.length/3,a=e.length/3*2,s=0,l=0;s<t.length;++s,l+=3){var u=t[s];i[l]=e[u]/65536*256,i[l+1]=e[u+o]/65536*256,i[l+2]=e[u+a]/65536*256}return i}function yC(t){for(var e=t.width,n=t.height,r=new Uint8Array(e*n*3),i=0,o=0;i<t.length;i+=4,o+=3){var a=t[i],s=t[i+1],l=t[i+2],u=t[i+3];r[o]=(255-a)/256*255*((255-u)/256),r[o+1]=(255-s)/256*255*((255-u)/256),r[o+2]=(255-l)/256*255*((255-u)/256)}return r}function bC(t){for(var e=t.width,n=t.height,r=new Uint8ClampedArray(e*n*3),i=0,o=0;i<t.length;i+=3,o+=3){var a=t[i],s=t[i+1],l=t[i+2];r[o]=a+1.402*(l-128),r[o+1]=a-.34414*(s-128)-.71414*(l-128),r[o+2]=a+1.772*(s-128)}return r}function wC(t){for(var e=t.width,n=t.height,r=new Uint8Array(e*n*3),i=0,o=0;i<t.length;i+=3,o+=3){var a=(t[i+0]+16)/116,s=(t[i+1]<<24>>24)/500+a,l=a-(t[i+2]<<24>>24)/200,u=void 0,c=void 0,h=void 0;c=-.9689*(s=.95047*(s*s*s>.008856?s*s*s:(s-16/116)/7.787))+1.8758*(a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787))+.0415*(l=1.08883*(l*l*l>.008856?l*l*l:(l-16/116)/7.787)),h=.0557*s+-.204*a+1.057*l,u=(u=3.2406*s+-1.5372*a+-.4986*l)>.0031308?1.055*Math.pow(u,1/2.4)-.055:12.92*u,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:12.92*c,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,r[o]=255*Math.max(0,Math.min(1,u)),r[o+1]=255*Math.max(0,Math.min(1,c)),r[o+2]=255*Math.max(0,Math.min(1,h))}return r}function xC(t,e){var n=t.length-e,r=0;do{for(var i=e;i>0;i--)t[r+e]+=t[r],r++;n-=e}while(n>0)}function SC(t,e,n){for(var r=0,i=t.length,o=i/n;i>e;){for(var a=e;a>0;--a)t[r+e]+=t[r],++r;i-=e}for(var s=t.slice(),l=0;l<o;++l)for(var u=0;u<n;++u)t[n*l+u]=s[(n-u-1)*o+l]}function _C(t,e,n,r,i,o){if(!e||1===e)return t;for(var a=0;a<i.length;++a){if(i[a]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[a]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var s=i[0]/8,l=2===o?1:i.length,u=0;u<r&&!(u*l*n*s>=t.byteLength);++u){var c=void 0;if(2===e){switch(i[0]){case 8:c=new Uint8Array(t,u*l*n*s,l*n*s);break;case 16:c=new Uint16Array(t,u*l*n*s,l*n*s/2);break;case 32:c=new Uint32Array(t,u*l*n*s,l*n*s/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(i[0]," bits per sample."))}xC(c,l)}else 3===e&&SC(c=new Uint8Array(t,u*l*n*s,l*n*s),l,s)}return t}function kC(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function EC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var MC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,i;return e=t,(n=[{key:"decode",value:(r=regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.decodeBlock(n);case 2:if(r=t.sent,1===(i=e.Predictor||1)){t.next=9;break}return o=!e.StripOffsets,a=o?e.TileWidth:e.ImageWidth,s=o?e.TileLength:e.RowsPerStrip||e.ImageLength,t.abrupt("return",_C(r,i,a,s,e.BitsPerSample,e.PlanarConfiguration));case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=r.apply(t,e);function a(t){kC(o,n,i,a,s,"next",t)}function s(t){kC(o,n,i,a,s,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})}])&&EC(e.prototype,n),t}();function TC(t){return(TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function CC(t,e){return(CC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function IC(t,e){if(e&&("object"===TC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function AC(t){return(AC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CC(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=AC(t);if(e){var i=AC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return IC(this,n)}}(i);function i(){return OC(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"decodeBlock",value:function(t){return t}}])&&PC(e.prototype,n),i}(MC);function RC(t){return(RC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $C(t,e){return($C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function FC(t,e){if(e&&("object"===RC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function DC(t){return(DC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GC(t,e){for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t}var UC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$C(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=DC(t);if(e){var i=DC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return FC(this,n)}}(i);function i(){return jC(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"decodeBlock",value:function(t){return function(t){for(var e=new Uint16Array(4093),n=new Uint8Array(4093),r=0;r<=257;r++)e[r]=4096,n[r]=r;var i=258,o=9,a=0;function s(){i=258,o=9}function l(t){var e=function(t,e,n){var r=e%8,i=Math.floor(e/8),o=8-r,a=e+n-8*(i+1),s=8*(i+2)-(e+n),l=8*(i+2)-e;if(s=Math.max(0,s),i>=t.length)return 257;var u=t[i]&Math.pow(2,8-r)-1,c=u<<=n-o;if(i+1<t.length){var h=t[i+1]>>>s;c+=h<<=Math.max(0,n-l)}if(a>8&&i+2<t.length){var f=8*(i+3)-(e+n);c+=t[i+2]>>>f}return c}(t,a,o);return a+=o,e}function u(t,r){return n[i]=r,e[i]=t,++i-1}function c(t){for(var r=[],i=t;4096!==i;i=e[i])r.push(n[i]);return r}var h=[];s();for(var f,p=new Uint8Array(t),d=l(p);257!==d;){if(256===d){for(s(),d=l(p);256===d;)d=l(p);if(257===d)break;if(d>256)throw new Error("corrupted code at scanline ".concat(d));GC(h,c(d)),f=d}else if(d<i){var g=c(d);GC(h,g),u(f,g[g.length-1]),f=d}else{var m=c(f);if(!m)throw new Error("Bogus entry. Not in dictionary, ".concat(f," / ").concat(i,", position: ").concat(a));GC(h,m),h.push(m[m.length-1]),u(f,m[m.length-1]),f=d}i+1>=Math.pow(2,o)&&(12===o?f=void 0:o++),d=l(p)}return new Uint8Array(h)}(t).buffer}}])&&NC(e.prototype,n),i}(MC);function BC(t,e){return(BC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zC(t,e){if(e&&("object"===KC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function VC(t){return(VC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function WC(t,e,n){return e&&HC(t.prototype,e),n&&HC(t,n),t}function KC(t){return(KC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var YC=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),XC=4017,ZC=799,JC=3406,QC=2276,tI=1567,eI=3784,nI=5793,rI=2896;function iI(t,e){for(var n=0,r=[],i=16;i>0&&!t[i-1];)--i;r.push({children:[],index:0});for(var o,a=r[0],s=0;s<i;s++){for(var l=0;l<t[s];l++){for((a=r.pop()).children[a.index]=e[n];a.index>0;)a=r.pop();for(a.index++,r.push(a);r.length<=s;)r.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o;n++}s+1<i&&(r.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o)}return r[0].children}function oI(t,e,n,r,i,o,a,s,l){var u=n.mcusPerLine,c=n.progressive,h=e,f=e,p=0,d=0;function g(){if(d>0)return d--,p>>d&1;if(255===(p=t[f++])){var e=t[f++];if(e)throw new Error("unexpected marker: ".concat((p<<8|e).toString(16)))}return d=7,p>>>7}function m(t){for(var e,n=t;null!==(e=g());){if("number"==typeof(n=n[e]))return n;if("object"!==KC(n))throw new Error("invalid huffman sequence")}return null}function v(t){for(var e=t,n=0;e>0;){var r=g();if(null===r)return;n=n<<1|r,--e}return n}function y(t){var e=v(t);return e>=1<<t-1?e:e+(-1<<t)+1}var b,w=0,x=0;function S(t,e,n,r,i){var o=n%u,a=(n/u|0)*t.v+r,s=o*t.h+i;e(t,t.blocks[a][s])}function _(t,e,n){var r=n/t.blocksPerLine|0,i=n%t.blocksPerLine;e(t,t.blocks[r][i])}var k,E,M,T,O,P,C=r.length;P=c?0===o?0===s?function(t,e){var n=m(t.huffmanTableDC),r=0===n?0:y(n)<<l;t.pred+=r,e[0]=t.pred}:function(t,e){e[0]|=g()<<l}:0===s?function(t,e){if(w>0)w--;else for(var n=o,r=a;n<=r;){var i=m(t.huffmanTableAC),s=15&i,u=i>>4;if(0===s){if(u<15){w=v(u)+(1<<u)-1;break}n+=16}else e[YC[n+=u]]=y(s)*(1<<l),n++}}:function(t,e){for(var n=o,r=a,i=0;n<=r;){var s=YC[n],u=e[s]<0?-1:1;switch(x){case 0:var c=m(t.huffmanTableAC),h=15&c;if(i=c>>4,0===h)i<15?(w=v(i)+(1<<i),x=4):(i=16,x=1);else{if(1!==h)throw new Error("invalid ACn encoding");b=y(h),x=i?2:3}continue;case 1:case 2:e[s]?e[s]+=(g()<<l)*u:0==--i&&(x=2===x?3:0);break;case 3:e[s]?e[s]+=(g()<<l)*u:(e[s]=b<<l,x=0);break;case 4:e[s]&&(e[s]+=(g()<<l)*u)}n++}4===x&&0==--w&&(x=0)}:function(t,e){var n=m(t.huffmanTableDC),r=0===n?0:y(n);t.pred+=r,e[0]=t.pred;for(var i=1;i<64;){var o=m(t.huffmanTableAC),a=15&o,s=o>>4;if(0===a){if(s<15)break;i+=16}else e[YC[i+=s]]=y(a),i++}};var I,A,L=0;A=1===C?r[0].blocksPerLine*r[0].blocksPerColumn:u*n.mcusPerColumn;for(var R=i||A;L<A;){for(E=0;E<C;E++)r[E].pred=0;if(w=0,1===C)for(k=r[0],O=0;O<R;O++)_(k,P,L),L++;else for(O=0;O<R;O++){for(E=0;E<C;E++){var j=k=r[E],N=j.h,$=j.v;for(M=0;M<$;M++)for(T=0;T<N;T++)S(k,P,L,M,T)}if(++L===A)break}if(d=0,(I=t[f]<<8|t[f+1])<65280)throw new Error("marker was not found");if(!(I>=65488&&I<=65495))break;f+=2}return f-h}function aI(t,e){var n=[],r=e.blocksPerLine,i=e.blocksPerColumn,o=r<<3,a=new Int32Array(64),s=new Uint8Array(64);function l(t,n,r){var i,o,a,s,l,u,c,h,f,p,d=e.quantizationTable,g=r;for(p=0;p<64;p++)g[p]=t[p]*d[p];for(p=0;p<8;++p){var m=8*p;0!==g[1+m]||0!==g[2+m]||0!==g[3+m]||0!==g[4+m]||0!==g[5+m]||0!==g[6+m]||0!==g[7+m]?(i=nI*g[0+m]+128>>8,o=nI*g[4+m]+128>>8,a=g[2+m],s=g[6+m],l=rI*(g[1+m]-g[7+m])+128>>8,h=rI*(g[1+m]+g[7+m])+128>>8,u=g[3+m]<<4,c=g[5+m]<<4,f=i-o+1>>1,i=i+o+1>>1,o=f,f=a*eI+s*tI+128>>8,a=a*tI-s*eI+128>>8,s=f,f=l-c+1>>1,l=l+c+1>>1,c=f,f=h+u+1>>1,u=h-u+1>>1,h=f,f=i-s+1>>1,i=i+s+1>>1,s=f,f=o-a+1>>1,o=o+a+1>>1,a=f,f=l*QC+h*JC+2048>>12,l=l*JC-h*QC+2048>>12,h=f,f=u*ZC+c*XC+2048>>12,u=u*XC-c*ZC+2048>>12,c=f,g[0+m]=i+h,g[7+m]=i-h,g[1+m]=o+c,g[6+m]=o-c,g[2+m]=a+u,g[5+m]=a-u,g[3+m]=s+l,g[4+m]=s-l):(f=nI*g[0+m]+512>>10,g[0+m]=f,g[1+m]=f,g[2+m]=f,g[3+m]=f,g[4+m]=f,g[5+m]=f,g[6+m]=f,g[7+m]=f)}for(p=0;p<8;++p){var v=p;0!==g[8+v]||0!==g[16+v]||0!==g[24+v]||0!==g[32+v]||0!==g[40+v]||0!==g[48+v]||0!==g[56+v]?(i=nI*g[0+v]+2048>>12,o=nI*g[32+v]+2048>>12,a=g[16+v],s=g[48+v],l=rI*(g[8+v]-g[56+v])+2048>>12,h=rI*(g[8+v]+g[56+v])+2048>>12,u=g[24+v],c=g[40+v],f=i-o+1>>1,i=i+o+1>>1,o=f,f=a*eI+s*tI+2048>>12,a=a*tI-s*eI+2048>>12,s=f,f=l-c+1>>1,l=l+c+1>>1,c=f,f=h+u+1>>1,u=h-u+1>>1,h=f,f=i-s+1>>1,i=i+s+1>>1,s=f,f=o-a+1>>1,o=o+a+1>>1,a=f,f=l*QC+h*JC+2048>>12,l=l*JC-h*QC+2048>>12,h=f,f=u*ZC+c*XC+2048>>12,u=u*XC-c*ZC+2048>>12,c=f,g[0+v]=i+h,g[56+v]=i-h,g[8+v]=o+c,g[48+v]=o-c,g[16+v]=a+u,g[40+v]=a-u,g[24+v]=s+l,g[32+v]=s-l):(f=nI*r[p+0]+8192>>14,g[0+v]=f,g[8+v]=f,g[16+v]=f,g[24+v]=f,g[32+v]=f,g[40+v]=f,g[48+v]=f,g[56+v]=f)}for(p=0;p<64;++p){var y=128+(g[p]+8>>4);n[p]=y<0?0:y>255?255:y}}for(var u=0;u<i;u++){for(var c=u<<3,h=0;h<8;h++)n.push(new Uint8Array(o));for(var f=0;f<r;f++){l(e.blocks[u][f],s,a);for(var p=0,d=f<<3,g=0;g<8;g++)for(var m=n[c+g],v=0;v<8;v++)m[d+v]=s[p++]}}return n}var sI=function(){function t(){qC(this,t),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return WC(t,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(t){var e=0;function n(){var n=t[e]<<8|t[e+1];return e+=2,n}function r(){var r=n(),i=t.subarray(e,e+r-2);return e+=i.length,i}function i(t){var e,n,r=0,i=0;for(n in t.components)t.components.hasOwnProperty(n)&&(r<(e=t.components[n]).h&&(r=e.h),i<e.v&&(i=e.v));var o=Math.ceil(t.samplesPerLine/8/r),a=Math.ceil(t.scanLines/8/i);for(n in t.components)if(t.components.hasOwnProperty(n)){e=t.components[n];for(var s=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/r),l=Math.ceil(Math.ceil(t.scanLines/8)*e.v/i),u=o*e.h,c=a*e.v,h=[],f=0;f<c;f++){for(var p=[],d=0;d<u;d++)p.push(new Int32Array(64));h.push(p)}e.blocksPerLine=s,e.blocksPerColumn=l,e.blocks=h}t.maxH=r,t.maxV=i,t.mcusPerLine=o,t.mcusPerColumn=a}var o=n();if(65496!==o)throw new Error("SOI not found");for(o=n();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var a=r();65504===o&&74===a[0]&&70===a[1]&&73===a[2]&&70===a[3]&&0===a[4]&&(this.jfif={version:{major:a[5],minor:a[6]},densityUnits:a[7],xDensity:a[8]<<8|a[9],yDensity:a[10]<<8|a[11],thumbWidth:a[12],thumbHeight:a[13],thumbData:a.subarray(14,14+3*a[12]*a[13])}),65518===o&&65===a[0]&&100===a[1]&&111===a[2]&&98===a[3]&&101===a[4]&&0===a[5]&&(this.adobe={version:a[6],flags0:a[7]<<8|a[8],flags1:a[9]<<8|a[10],transformCode:a[11]});break;case 65499:for(var s=n()+e-2;e<s;){var l=t[e++],u=new Int32Array(64);if(l>>4==0)for(var c=0;c<64;c++)u[YC[c]]=t[e++];else{if(l>>4!=1)throw new Error("DQT: invalid table spec");for(var h=0;h<64;h++)u[YC[h]]=n()}this.quantizationTables[15&l]=u}break;case 65472:case 65473:case 65474:n();for(var f={extended:65473===o,progressive:65474===o,precision:t[e++],scanLines:n(),samplesPerLine:n(),components:{},componentsOrder:[]},p=t[e++],d=void 0,g=0;g<p;g++){d=t[e];var m=t[e+1]>>4,v=15&t[e+1],y=t[e+2];f.componentsOrder.push(d),f.components[d]={h:m,v:v,quantizationIdx:y},e+=3}i(f),this.frames.push(f);break;case 65476:for(var b=n(),w=2;w<b;){for(var x=t[e++],S=new Uint8Array(16),_=0,k=0;k<16;k++,e++)S[k]=t[e],_+=S[k];for(var E=new Uint8Array(_),M=0;M<_;M++,e++)E[M]=t[e];w+=17+_,x>>4==0?this.huffmanTablesDC[15&x]=iI(S,E):this.huffmanTablesAC[15&x]=iI(S,E)}break;case 65501:n(),this.resetInterval=n();break;case 65498:n();for(var T=t[e++],O=[],P=this.frames[0],C=0;C<T;C++){var I=P.components[t[e++]],A=t[e++];I.huffmanTableDC=this.huffmanTablesDC[A>>4],I.huffmanTableAC=this.huffmanTablesAC[15&A],O.push(I)}var L=t[e++],R=t[e++],j=t[e++],N=oI(t,e,P,O,this.resetInterval,L,R,j>>4,15&j);e+=N;break;case 65535:255!==t[e]&&e--;break;default:if(255===t[e-3]&&t[e-2]>=192&&t[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=n()}}},{key:"getResult",value:function(){var t=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length;for(var e=0;e<this.frames.length;e++)for(var n=this.frames[e].components,r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];n[o].quantizationTable=this.quantizationTables[n[o].quantizationIdx],delete n[o].quantizationIdx}for(var a=t[0],s=a.components,l=a.componentsOrder,u=[],c=a.samplesPerLine,h=a.scanLines,f=0;f<l.length;f++){var p=s[l[f]];u.push({lines:aI(0,p),scaleX:p.h/a.maxH,scaleY:p.v/a.maxV})}for(var d=new Uint8Array(c*h*u.length),g=0,m=0;m<h;++m)for(var v=0;v<c;++v)for(var y=0;y<u.length;++y){var b=u[y];d[g]=b.lines[0|m*b.scaleY][0|v*b.scaleX],++g}return d}}]),t}(),lI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BC(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=VC(t);if(e){var i=VC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zC(this,n)}}(n);function n(t){var r;return qC(this,n),(r=e.call(this)).reader=new sI,t.JPEGTables&&r.reader.parse(t.JPEGTables),r}return WC(n,[{key:"decodeBlock",value:function(t){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(t)),this.reader.getResult().buffer}}]),n}(MC),uI=n(9853);function cI(t){return(cI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pI(t,e){return(pI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dI(t,e){if(e&&("object"===cI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function gI(t){return(gI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pI(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gI(t);if(e){var i=gI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dI(this,n)}}(i);function i(){return hI(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"decodeBlock",value:function(t){return(0,uI.rr)(new Uint8Array(t)).buffer}}])&&fI(e.prototype,n),i}(MC);function vI(t){return(vI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wI(t,e){return(wI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xI(t,e){if(e&&("object"===vI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function SI(t){return(SI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wI(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=SI(t);if(e){var i=SI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xI(this,n)}}(i);function i(){return yI(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"decodeBlock",value:function(t){for(var e=new DataView(t),n=[],r=0;r<t.byteLength;++r){var i=e.getInt8(r);if(i<0){var o=e.getUint8(r+1);i=-i;for(var a=0;a<=i;++a)n.push(o);r+=1}else{for(var s=0;s<=i;++s)n.push(e.getUint8(r+s+1));r+=i+1}}return new Uint8Array(n).buffer}}])&&bI(e.prototype,n),i}(MC),kI=n(6943),EI=n.n(kI);function MI(t){return(MI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function OI(t,e){return(OI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function PI(t,e){if(e&&("object"===MI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function CI(t){return(CI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var II=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OI(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=CI(t);if(e){var i=CI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return PI(this,n)}}(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).planarConfiguration=void 0!==t.PlanarConfiguration?t.PlanarConfiguration:1,e.samplesPerPixel=void 0!==t.SamplesPerPixel?t.SamplesPerPixel:1,e.addCompression=t.LercParameters[1],e}return e=i,(n=[{key:"decodeBlock",value:function(t){switch(this.addCompression){case 0:break;case 1:t=(0,uI.rr)(new Uint8Array(t)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return EI().decode(t,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}])&&TI(e.prototype,n),i}(MC);function AI(t){switch(t.Compression){case void 0:case 1:return new LC;case 5:return new UC;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new lI(t);case 8:case 32946:return new mI;case 32773:return new _I;case 34887:return new II(t);default:throw new Error("Unknown compression method identifier: ".concat(t.Compression))}}function LI(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(t).constructor)(e*n*r)}function RI(t,e,n,r,i){var o=e/r,a=n/i;return t.map((function(t){for(var s=LI(t,r,i),l=0;l<i;++l)for(var u=Math.min(Math.round(a*l),n-1),c=0;c<r;++c){var h=Math.min(Math.round(o*c),e-1),f=t[u*e+h];s[l*r+c]=f}return s}))}function jI(t,e,n){return(1-n)*t+n*e}function NI(t,e,n,r,i){var o=e/r,a=n/i;return t.map((function(t){for(var s=LI(t,r,i),l=0;l<i;++l)for(var u=a*l,c=Math.floor(u),h=Math.min(Math.ceil(u),n-1),f=0;f<r;++f){var p=o*f,d=p%1,g=Math.floor(p),m=Math.min(Math.ceil(p),e-1),v=t[c*e+g],y=t[c*e+m],b=t[h*e+g],w=t[h*e+m],x=jI(jI(v,y,d),jI(b,w,d),u%1);s[l*r+f]=x}return s}))}function $I(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(o.toLowerCase()){case"nearest":return RI(t,e,n,r,i);case"bilinear":case"linear":return NI(t,e,n,r,i);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}}function FI(t,e,n,r,i,o){for(var a=e/r,s=n/i,l=LI(t,r,i,o),u=0;u<i;++u)for(var c=Math.min(Math.round(s*u),n-1),h=0;h<r;++h)for(var f=Math.min(Math.round(a*h),e-1),p=0;p<o;++p){var d=t[c*e*o+f*o+p];l[u*r*o+h*o+p]=d}return l}function DI(t,e,n,r,i,o){for(var a=e/r,s=n/i,l=LI(t,r,i,o),u=0;u<i;++u)for(var c=s*u,h=Math.floor(c),f=Math.min(Math.ceil(c),n-1),p=0;p<r;++p)for(var d=a*p,g=d%1,m=Math.floor(d),v=Math.min(Math.ceil(d),e-1),y=0;y<o;++y){var b=t[h*e*o+m*o+y],w=t[h*e*o+v*o+y],x=t[f*e*o+m*o+y],S=t[f*e*o+v*o+y],_=jI(jI(b,w,g),jI(x,S,g),c%1);l[u*r*o+p*o+y]=_}return l}function GI(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(a.toLowerCase()){case"nearest":return FI(t,e,n,r,i,o);case"bilinear":case"linear":return DI(t,e,n,r,i,o);default:throw new Error("Unsupported resampling method: '".concat(a,"'"))}}function UI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return BI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BI(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zI(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function VI(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){zI(o,r,i,a,s,"next",t)}function s(t){zI(o,r,i,a,s,"throw",t)}a(void 0)}))}}function qI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function HI(t,e,n){for(var r=0,i=e;i<n;++i)r+=t[i];return r}function WI(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n);if(e<=16)return new Uint16Array(n);if(e<=32)return new Uint32Array(n);break;case 2:if(8===e)return new Int8Array(n);if(16===e)return new Int16Array(n);if(32===e)return new Int32Array(n);break;case 3:switch(e){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}}throw Error("Unsupported data format/bitsPerSample")}function KI(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}function YI(t,e,n,r,i,o,a){var s=new DataView(t),l=2===n?1:r,u=WI(e,i,2===n?a*o:a*o*r),c=parseInt("1".repeat(i),2);if(1===e){var h=o*(1===n?r*i:i);0!=(7&h)&&(h=h+7&-8);for(var f=0;f<a;++f)for(var p=f*h,d=0;d<o;++d)for(var g=p+d*l*i,m=0;m<l;++m){var v=g+m*i,y=(f*o+d)*l+m,b=Math.floor(v/8),w=v%8;if(w+i<=8)u[y]=s.getUint8(b)>>8-i-w&c;else if(w+i<=16)u[y]=s.getUint16(b)>>16-i-w&c;else if(w+i<=24){var x=s.getUint16(b)<<8|s.getUint8(b+2);u[y]=x>>24-i-w&c}else u[y]=s.getUint32(b)>>32-i-w&c}}return u.buffer}var XI=function(){function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileDirectory=e,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!e.StripOffsets;var s=e.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=a}var e,n,r,i,o,a;return e=t,(n=[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var t=0,e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}},{key:"getSampleByteSize",value:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(t," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}},{key:"getReaderForSample",value:function(t){var e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,n=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(t,e){return nC(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}},{key:"getBitsPerSample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[t]}},{key:"getArrayForSample",value:function(t,e){return WI(this.getSampleFormat(t),this.getBitsPerSample(t),e)}},{key:"getTileOrStrip",value:(a=VI(regeneratorRuntime.mark((function t(e,n,r,i,o){var a,s,l,u,c,h,f,p,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),u=this.tiles,1===this.planarConfiguration?l=n*a+e:2===this.planarConfiguration&&(l=r*a*s+n*a+e),this.isTiled?(c=this.fileDirectory.TileOffsets[l],h=this.fileDirectory.TileByteCounts[l]):(c=this.fileDirectory.StripOffsets[l],h=this.fileDirectory.StripByteCounts[l]),t.next=7,this.source.fetch([{offset:c,length:h}],o);case 7:return f=t.sent[0],null!==u&&u[l]?p=u[l]:(p=VI(regeneratorRuntime.mark((function t(){var e,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.decode(d.fileDirectory,f);case 2:return e=t.sent,r=d.getSampleFormat(),o=d.getBitsPerSample(),KI(r,o)&&(e=YI(e,r,d.planarConfiguration,d.getSamplesPerPixel(),o,d.getTileWidth(),d.getBlockHeight(n))),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))(),null!==u&&(u[l]=p)),t.t0=e,t.t1=n,t.t2=r,t.next=14,p;case 14:return t.t3=t.sent,t.abrupt("return",{x:t.t0,y:t.t1,sample:t.t2,data:t.t3});case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,i){return a.apply(this,arguments)})},{key:"_readRaster",value:(o=VI(regeneratorRuntime.mark((function t(e,n,r,i,o,a,s,l,u){var c,h,f,p,d,g,m,v,y,b,w,x,S,_,k,E,M,T,O=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c=this.getTileWidth(),h=this.getTileHeight(),f=Math.max(Math.floor(e[0]/c),0),p=Math.min(Math.ceil(e[2]/c),Math.ceil(this.getWidth()/this.getTileWidth())),d=Math.max(Math.floor(e[1]/h),0),g=Math.min(Math.ceil(e[3]/h),Math.ceil(this.getHeight()/this.getTileHeight())),m=e[2]-e[0],v=this.getBytesPerPixel(),y=[],b=[],w=0;w<n.length;++w)1===this.planarConfiguration?y.push(HI(this.fileDirectory.BitsPerSample,0,n[w])/8):y.push(0),b.push(this.getReaderForSample(n[w]));for(x=[],S=this.littleEndian,_=d;_<g;++_)for(k=f;k<p;++k)for(E=function(t){var a=t,s=n[t];2===O.planarConfiguration&&(v=O.getSampleByteSize(t));var l=O.getTileOrStrip(k,_,s,o,u);x.push(l),l.then((function(t){for(var o=t.data,s=new DataView(o),l=O.getBlockHeight(t.y),u=t.y*h,f=t.x*c,p=u+l,d=(t.x+1)*c,g=b[a],w=Math.min(l,l-(p-e[3])),x=Math.min(c,c-(d-e[2])),_=Math.max(0,e[1]-u);_<w;++_)for(var k=Math.max(0,e[0]-f);k<x;++k){var E=(_*c+k)*v,M=g.call(s,E+y[a],S),T=void 0;i?(T=(_+u-e[1])*m*n.length+(k+f-e[0])*n.length+a,r[T]=M):(T=(_+u-e[1])*m+k+f-e[0],r[a][T]=M)}}))},M=0;M<n.length;++M)E(M);return t.next=16,Promise.all(x);case 16:if(!(a&&e[2]-e[0]!==a||s&&e[3]-e[1]!==s)){t.next=21;break}return(T=i?GI(r,e[2]-e[0],e[3]-e[1],a,s,n.length,l):$I(r,e[2]-e[0],e[3]-e[1],a,s,l)).width=a,T.height=s,t.abrupt("return",T);case 21:return r.width=a||e[2]-e[0],r.height=s||e[3]-e[1],t.abrupt("return",r);case 24:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,i,a,s,l,u){return o.apply(this,arguments)})},{key:"readRasters",value:(i=VI(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x,S,_,k,E,M,T=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=T.length>0&&void 0!==T[0]?T[0]:{},n=e.window,r=e.samples,i=void 0===r?[]:r,o=e.interleave,a=e.pool,s=void 0===a?null:a,l=e.width,u=e.height,c=e.resampleMethod,h=e.fillValue,f=e.signal,!((p=n||[0,0,this.getWidth(),this.getHeight()])[0]>p[2]||p[1]>p[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if(d=p[2]-p[0],g=p[3]-p[1],m=d*g,v=this.getSamplesPerPixel(),i&&i.length){t.next=12;break}for(y=0;y<v;++y)i.push(y);t.next=19;break;case 12:b=0;case 13:if(!(b<i.length)){t.next=19;break}if(!(i[b]>=v)){t.next=16;break}return t.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(i[b],"'."))));case 16:++b,t.next=13;break;case 19:if(o)x=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,S=Math.max.apply(null,this.fileDirectory.BitsPerSample),w=WI(x,S,m*i.length),h&&w.fill(h);else for(w=[],_=0;_<i.length;++_)k=this.getArrayForSample(i[_],m),Array.isArray(h)&&_<h.length?k.fill(h[_]):h&&!Array.isArray(h)&&k.fill(h),w.push(k);return E=s||AI(this.fileDirectory),t.next=23,this._readRaster(p,i,w,o,E,l,u,c,f);case 23:return M=t.sent,t.abrupt("return",M);case 25:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"readRGB",value:(r=VI(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x,S,_,k,E,M,T,O=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=O.length>0&&void 0!==O[0]?O[0]:{},n=e.window,r=e.interleave,i=void 0===r||r,o=e.pool,a=void 0===o?null:o,s=e.width,l=e.height,u=e.resampleMethod,c=e.enableAlpha,h=void 0!==c&&c,f=e.signal,!((p=n||[0,0,this.getWidth(),this.getHeight()])[0]>p[2]||p[1]>p[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if(2!==(d=this.fileDirectory.PhotometricInterpretation)){t.next=9;break}if(g=[0,1,2],0!==this.fileDirectory.ExtraSamples&&h)for(g=[],m=0;m<this.fileDirectory.BitsPerSample.length;m+=1)g.push(m);return t.abrupt("return",this.readRasters({window:n,interleave:i,samples:g,pool:a,width:s,height:l,resampleMethod:u,signal:f}));case 9:t.t0=d,t.next=0===t.t0||1===t.t0||3===t.t0?12:5===t.t0?14:6===t.t0||8===t.t0?16:18;break;case 12:return v=[0],t.abrupt("break",19);case 14:return v=[0,1,2,3],t.abrupt("break",19);case 16:return v=[0,1,2],t.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return y={window:p,interleave:!0,samples:v,pool:a,width:s,height:l,resampleMethod:u,signal:f},b=this.fileDirectory,t.next=23,this.readRasters(y);case 23:w=t.sent,x=Math.pow(2,this.fileDirectory.BitsPerSample[0]),t.t1=d,t.next=0===t.t1?28:1===t.t1?30:3===t.t1?32:5===t.t1?34:6===t.t1?36:8===t.t1?38:40;break;case 28:return S=gC(w,x),t.abrupt("break",41);case 30:return S=mC(w,x),t.abrupt("break",41);case 32:return S=vC(w,b.ColorMap),t.abrupt("break",41);case 34:return S=yC(w),t.abrupt("break",41);case 36:return S=bC(w),t.abrupt("break",41);case 38:return S=wC(w),t.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!i){for(_=new Uint8Array(S.length/3),k=new Uint8Array(S.length/3),E=new Uint8Array(S.length/3),M=0,T=0;M<S.length;M+=3,++T)_[T]=S[M],k[T]=S[M+1],E[T]=S[M+2];S=[_,k,E]}return S.width=w.width,S.height=w.height,t.abrupt("return",S);case 45:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}},{key:"getGDALMetadata",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={};if(!this.fileDirectory.GDAL_METADATA)return null;var n=this.fileDirectory.GDAL_METADATA,r=iC()(n.substring(0,n.length-1));if(!r[0].tagName)throw new Error("Failed to parse GDAL metadata XML.");var i=r[0];if("GDALMetadata"!==i.tagName)throw new Error("Unexpected GDAL metadata XML tag.");var o=i.children.filter((function(t){return"Item"===t.tagName}));null!==t&&(o=o.filter((function(e){return Number(e.attributes.sample)===t})));for(var a=0;a<o.length;++a){var s=o[a];e[s.attributes.name]=s.children[0]}return e}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}},{key:"getOrigin",value:function(){var t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(n)return[n[0],n[5],n[10]];if(t){var r=t.getResolution(),i=UI(r,3),o=i[0],a=i[1],s=i[2];return[o*t.getWidth()/this.getWidth(),a*t.getHeight()/this.getHeight(),s*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var t=this.getOrigin(),e=this.getResolution(),n=t[0],r=t[1],i=n+e[0]*this.getWidth(),o=r+e[1]*this.getHeight();return[Math.min(n,i),Math.min(r,o),Math.max(n,i),Math.max(r,o)]}}])&&qI(e.prototype,n),t}();function ZI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var JI=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(e)}var e,n;return e=t,(n=[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(t,e){var n,r=this.getUint32(t,e),i=this.getUint32(t+4,e);if(e){if(n=r+Math.pow(2,32)*i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return n}if(n=Math.pow(2,32)*r+i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return n}},{key:"getInt64",value:function(t,e){for(var n=0,r=(128&this._dataView.getUint8(t+(e?7:0)))>0,i=!0,o=0;o<8;o++){var a=this._dataView.getUint8(t+(e?o:7-o));r&&(i?0!==a&&(a=255&~(a-1),i=!1):a=255&~a),n+=a*Math.pow(256,o)}return r&&(n=-n),n}},{key:"getUint8",value:function(t,e){return this._dataView.getUint8(t,e)}},{key:"getInt8",value:function(t,e){return this._dataView.getInt8(t,e)}},{key:"getUint16",value:function(t,e){return this._dataView.getUint16(t,e)}},{key:"getInt16",value:function(t,e){return this._dataView.getInt16(t,e)}},{key:"getUint32",value:function(t,e){return this._dataView.getUint32(t,e)}},{key:"getInt32",value:function(t,e){return this._dataView.getInt32(t,e)}},{key:"getFloat16",value:function(t,e){return nC(this._dataView,t,e)}},{key:"getFloat32",value:function(t,e){return this._dataView.getFloat32(t,e)}},{key:"getFloat64",value:function(t,e){return this._dataView.getFloat64(t,e)}}])&&ZI(e.prototype,n),t}();function QI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tA=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(e),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}var e,n;return e=t,(n=[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}},{key:"readUint8",value:function(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(t){var e,n=this.readUint32(t),r=this.readUint32(t+4);if(this._littleEndian){if(e=n+Math.pow(2,32)*r,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e}if(e=Math.pow(2,32)*n+r,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e}},{key:"readInt64",value:function(t){for(var e=0,n=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0,r=!0,i=0;i<8;i++){var o=this._dataView.getUint8(t+(this._littleEndian?i:7-i));n&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),e+=o*Math.pow(256,i)}return n&&(e=-e),e}},{key:"readOffset",value:function(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}])&&QI(e.prototype,n),t}(),eA=n(769),nA=(eA.registerSerializer,eA.spawn),rA=(eA.DefaultSerializer,eA.Pool),iA=(eA.Thread,eA.Transfer),oA=eA.Worker;function aA(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function sA(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){aA(o,r,i,a,s,"next",t)}function s(t){aA(o,r,i,a,s,"throw",t)}a(void 0)}))}}function lA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var cA="undefined"!=typeof navigator?navigator.hardwareConcurrency:null,hA=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cA,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new oA("./decoder.worker.js");lA(this,t),this.pool=rA((function(){return nA(n)}),e)}var e,n,r;return e=t,(n=[{key:"decode",value:(r=sA(regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){r.pool.queue(function(){var r=sA(regeneratorRuntime.mark((function r(o){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o(e,iA(n));case 3:a=r.sent,t(a),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),i(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(t){return r.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return r.apply(this,arguments)})},{key:"destroy",value:function(){this.pool.terminate(!0)}}])&&uA(e.prototype,n),t}();function fA(t){return gA(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mA(t)||dA()}function pA(t,e){return gA(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||mA(t,e)||dA()}function dA(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gA(t){if(Array.isArray(t))return t}function mA(t,e){if(t){if("string"==typeof t)return vA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vA(t,e):void 0}}function vA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var yA="\r\n\r\n";function bA(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);var e,n={},r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=mA(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(e=r.n()).done;){var i=pA(e.value,2),o=i[0],a=i[1];n[o.toLowerCase()]=a}}catch(t){r.e(t)}finally{r.f()}return n}function wA(t){return bA(t.split("\r\n").map((function(t){var e=t.split(":").map((function(t){return t.trim()}));return e[0]=e[0].toLowerCase(),e})))}function xA(t){var e,n,r;if(t){var i=pA(t.match(/bytes (\d+)-(\d+)\/(\d+)/),4);e=i[1],n=i[2],r=i[3],e=parseInt(e,10),n=parseInt(n,10),r=parseInt(r,10)}return{start:e,end:n,total:r}}function SA(t,e){for(var n=null,r=new TextDecoder("ascii"),i=[],o="--".concat(e),a="".concat(o,"--"),s=0;s<10;++s)r.decode(new Uint8Array(t,s,o.length))===o&&(n=s);if(null===n)throw new Error("Could not find initial boundary");for(;n<t.byteLength;){var l=r.decode(new Uint8Array(t,n,Math.min(o.length+1024,t.byteLength-n)));if(0===l.length||l.startsWith(a))break;if(!l.startsWith(o))throw new Error("Part does not start with boundary");var u=l.substr(o.length+2);if(0===u.length)break;var c=u.indexOf(yA),h=wA(u.substr(0,c)),f=xA(h["content-range"]),p=f.start,d=f.end,g=f.total,m=n+o.length+c+yA.length,v=parseInt(d,10)+1-parseInt(p,10);i.push({headers:h,data:t.slice(m,m+v),offset:p,length:v,fileSize:g}),n=m+v+4}return i}function _A(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function kA(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_A(o,r,i,a,s,"next",t)}function s(t){_A(o,r,i,a,s,"throw",t)}a(void 0)}))}}function EA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var MA=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,i,o;return e=t,(n=[{key:"fetch",value:(o=kA(regeneratorRuntime.mark((function t(e){var n,r=this,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:void 0,t.next=3,Promise.all(e.map((function(t){return r.fetchSlice(t,n)})));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"fetchSlice",value:(i=kA(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("fetching of slice ".concat(e," not possible, not implemented"));case 1:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(r=kA(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}])&&EA(e.prototype,n),t}(),TA=n(6875),OA=n.n(TA);function PA(t){return(PA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IA(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FA(t,e)}function AA(t){var e=$A();return function(){var n,r=DA(t);if(e){var i=DA(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return LA(this,n)}}function LA(t,e){if(e&&("object"===PA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return RA(t)}function RA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jA(t){var e="function"==typeof Map?new Map:void 0;return(jA=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return NA(t,arguments,DA(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),FA(r,t)})(t)}function NA(t,e,n){return(NA=$A()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&FA(i,n.prototype),i}).apply(null,arguments)}function $A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function FA(t,e){return(FA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function DA(t){return(DA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GA(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function UA(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){GA(o,r,i,a,s,"next",t)}function s(t){GA(o,r,i,a,s,"throw",t)}a(void 0)}))}}function BA(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function zA(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function VA(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n}function qA(t){return HA.apply(this,arguments)}function HA(){return(HA=UA(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function WA(t,e){var n=Array.isArray(t)?t:Array.from(t),r=Array.isArray(e)?e:Array.from(e);return n.map((function(t,e){return[t,r[e]]}))}var KA=function(t){IA(n,t);var e=AA(n);function n(t){var r;return CA(this,n),r=e.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(RA(r),n),r.name="AbortError",r}return n}(jA(Error)),YA=function(t){IA(n,t);var e=AA(n);function n(t,r){var i;return CA(this,n),(i=e.call(this,r)).errors=t,i.message=r,i.name="AggregateError",i}return n}(jA(Error));function XA(t){return(XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||QA(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JA(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=QA(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function QA(t,e){if(t){if("string"==typeof t)return tL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tL(t,e):void 0}}function tL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eL(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function nL(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){eL(o,r,i,a,s,"next",t)}function s(t){eL(o,r,i,a,s,"throw",t)}a(void 0)}))}}function rL(t,e){return(rL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function iL(t,e){if(e&&("object"===XA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oL(t){return(oL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lL(t,e,n){return e&&sL(t.prototype,e),n&&sL(t,n),t}var uL=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;aL(this,t),this.offset=e,this.length=n,this.data=r}return lL(t,[{key:"top",get:function(){return this.offset+this.length}}]),t}(),cL=function t(e,n,r){aL(this,t),this.offset=e,this.length=n,this.blockIds=r},hL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rL(t,e)}(r,t);var e,n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oL(t);if(e){var i=oL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return iL(this,n)}}(r);function r(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.blockSize,a=void 0===o?65536:o,s=i.cacheSize,l=void 0===s?100:s;return aL(this,r),(e=n.call(this)).source=t,e.blockSize=a,e.blockCache=new(OA())({max:l}),e.blockRequests=new Map,e.blockIdsToFetch=new Set,e}return lL(r,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:(e=nL(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x,S,_,k,E,M,T,O,P,C,I,A,L,R,j,N,$,F,D,G;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new Map,i=new Map,o=new Set,a=JA(e);try{for(a.s();!(s=a.n()).done;)for(l=s.value,u=l.offset,c=l.length,h=u+c,null!==(f=this.fileSize)&&(h=Math.min(h,f)),p=Math.floor(u/this.blockSize)*this.blockSize,d=p;d<h;d+=this.blockSize)g=Math.floor(d/this.blockSize),this.blockCache.has(g)?r.set(g,this.blockCache.get(g)):this.blockRequests.has(g)?i.set(g,this.blockRequests.get(g)):(this.blockIdsToFetch.has(g)||this.blockIdsToFetch.add(g),o.add(g))}catch(t){a.e(t)}finally{a.f()}return t.next=7,qA();case 7:this.fetchBlocks(n),m=JA(o),t.prev=9,m.s();case 11:if((v=m.n()).done){t.next=26;break}if(y=v.value,b=this.blockRequests.get(y),w=this.blockCache.get(y),!b){t.next=19;break}i.set(y,b),t.next=24;break;case 19:if(!w){t.next=23;break}r.set(y,w),t.next=24;break;case 23:throw new Error("Block ".concat(y," is not in the block requests"));case 24:t.next=11;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(9),m.e(t.t0);case 31:return t.prev=31,m.f(),t.finish(31);case 34:return t.next=36,Promise.allSettled(i.values());case 36:if(!(x=t.sent).some((function(t){return"rejected"===t.status}))){t.next=65;break}S=new Set,_=JA(WA(i.keys(),x));try{for(_.s();!(k=_.n()).done;)E=ZA(k.value,2),M=E[0],T=E[1],O=T.rejected,P=T.reason,O&&"AbortError"===P.name&&P.signal!==n&&(this.blockIdsToFetch.add(M),S.add(M))}catch(t){_.e(t)}finally{_.f()}if(!(this.blockIdsToFetch.length>0)){t.next=65;break}this.fetchBlocks(n),C=JA(S),t.prev=44,C.s();case 46:if((I=C.n()).done){t.next=54;break}if(A=I.value,L=this.blockRequests.get(A)){t.next=51;break}throw new Error("Block ".concat(A," is not in the block requests"));case 51:i.set(A,L);case 52:t.next=46;break;case 54:t.next=59;break;case 56:t.prev=56,t.t1=t.catch(44),C.e(t.t1);case 59:return t.prev=59,C.f(),t.finish(59);case 62:return t.next=64,Promise.allSettled(Array.from(i.values()));case 64:x=t.sent;case 65:if(!x.some((function(t){return"rejected"===t.status}))){t.next=69;break}if(!n||!n.aborted){t.next=68;break}throw new KA("Request was aborted");case 68:throw new YA(x.filter((function(t){return"rejected"===t.status})).map((function(t){return t.reason})),"Request failed");case 69:R=x.map((function(t){return t.value})),j=new Map(WA(Array.from(i.keys()),R)),N=JA(r);try{for(N.s();!($=N.n()).done;)F=ZA($.value,2),D=F[0],G=F[1],j.set(D,G)}catch(t){N.e(t)}finally{N.f()}return t.abrupt("return",this.readSliceData(e,j));case 74:case"end":return t.stop()}}),t,this,[[9,28,31,34],[44,56,59,62]])}))),function(t,n){return e.apply(this,arguments)})},{key:"fetchBlocks",value:function(t){var e=this;this.blockIdsToFetch.size>0&&function(){for(var n=e.groupBlocks(e.blockIdsToFetch),r=e.source.fetch(n,t),i=function(i){var o,a=JA(n[i].blockIds);try{var s=function(){var n=o.value,a=nL(regeneratorRuntime.mark((function o(){var a,s,l,u,c,h;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r;case 3:return o.t0=i,a=o.sent[o.t0],s=n*e.blockSize,l=s-a.offset,u=Math.min(l+e.blockSize,a.data.byteLength),c=a.data.slice(l,u),h=new uL(s,c.byteLength,c),e.blockCache.set(n,h),o.abrupt("return",h);case 14:throw o.prev=14,o.t1=o.catch(0),"AbortError"===o.t1.name&&(o.t1.signal=t),o.t1;case 18:return o.prev=18,e.blockRequests.delete(n),o.finish(18);case 21:case"end":return o.stop()}}),o,null,[[0,14,18,21]])})))();e.blockRequests.set(n,a)};for(a.s();!(o=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}},o=0;o<n.length;++o)i(o);e.blockIdsToFetch.clear()}()}},{key:"groupBlocks",value:function(t){var e=Array.from(t).sort((function(t,e){return t-e}));if(0===e.length)return[];var n,r=[],i=null,o=[],a=JA(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;null===i||i+1===s?(r.push(s),i=s):(o.push(new cL(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],i=s)}}catch(t){a.e(t)}finally{a.f()}return o.push(new cL(r[0]*this.blockSize,r.length*this.blockSize,r)),o}},{key:"readSliceData",value:function(t,e){var n=this;return t.map((function(t){for(var r=t.offset+t.length,i=Math.floor(t.offset/n.blockSize),o=Math.floor((t.offset+t.length)/n.blockSize),a=new ArrayBuffer(t.length),s=new Uint8Array(a),l=i;l<=o;++l){var u,c=e.get(l),h=c.offset-t.offset,f=0,p=0;h<0?f=-h:h>0&&(p=h),u=c.top-r<0?c.length-f:r-c.offset-f;var d=new Uint8Array(c.data,f,u);s.set(d,p)}return a}))}}]),r}(MA);function fL(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function pL(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){fL(o,r,i,a,s,"next",t)}function s(t){fL(o,r,i,a,s,"throw",t)}a(void 0)}))}}function dL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mL(t,e,n){return e&&gL(t.prototype,e),n&&gL(t,n),t}var vL=function(){function t(){dL(this,t)}var e;return mL(t,[{key:"ok",get:function(){return this.status>=200&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(t){throw new Error("not implemented")}},{key:"getData",value:(e=pL(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("not implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),t}(),yL=function(){function t(e){dL(this,t),this.url=e}var e;return mL(t,[{key:"request",value:(e=pL(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw(e=n.length>0&&void 0!==n[0]?n[0]:{}).headers,e.credentials,e.signal,new Error("request is not implemented");case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),t}();function bL(t){return(bL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wL(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function xL(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){wL(o,r,i,a,s,"next",t)}function s(t){wL(o,r,i,a,s,"throw",t)}a(void 0)}))}}function SL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kL(t,e,n){return e&&_L(t.prototype,e),n&&_L(t,n),t}function EL(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ML(t,e)}function ML(t,e){return(ML=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function TL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=PL(t);if(e){var i=PL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return OL(this,n)}}function OL(t,e){if(e&&("object"===bL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function PL(t){return(PL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CL=function(t){EL(r,t);var e,n=TL(r);function r(t){var e;return SL(this,r),(e=n.call(this)).response=t,e}return kL(r,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(t){return this.response.headers.get(t)}},{key:"getData",value:(e=xL(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.response.arrayBuffer){t.next=6;break}return t.next=3,this.response.arrayBuffer();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.response.buffer();case 8:t.t0=t.sent.buffer;case 9:return e=t.t0,t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(vL),IL=function(t){EL(r,t);var e,n=TL(r);function r(t,e){var i;return SL(this,r),(i=n.call(this,t)).credentials=e,i}return kL(r,[{key:"request",value:(e=xL(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},n=e.headers,r=e.credentials,i=e.signal,t.next=3,fetch(this.url,{headers:n,credentials:r,signal:i});case 3:return o=t.sent,t.abrupt("return",new CL(o));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(yL);function AL(t){return(AL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return RL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RL(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jL(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function NL(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){jL(o,r,i,a,s,"next",t)}function s(t){jL(o,r,i,a,s,"throw",t)}a(void 0)}))}}function $L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function DL(t,e,n){return e&&FL(t.prototype,e),n&&FL(t,n),t}function GL(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&UL(t,e)}function UL(t,e){return(UL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function BL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=VL(t);if(e){var i=VL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zL(this,n)}}function zL(t,e){if(e&&("object"===AL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function VL(t){return(VL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qL=function(t){GL(r,t);var e,n=BL(r);function r(t,e){var i;return $L(this,r),(i=n.call(this)).xhr=t,i.data=e,i}return DL(r,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(t){return this.xhr.getResponseHeader(t)}},{key:"getData",value:(e=NL(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.data);case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(vL),HL=function(t){GL(r,t);var e,n=BL(r);function r(){return $L(this,r),n.apply(this,arguments)}return DL(r,[{key:"constructRequest",value:function(t,e){var n=this;return new Promise((function(r,i){var o=new XMLHttpRequest;o.open("GET",n.url),o.responseType="arraybuffer";for(var a=0,s=Object.entries(t);a<s.length;a++){var l=LL(s[a],2),u=l[0],c=l[1];o.setRequestHeader(u,c)}o.onload=function(){var t=o.response;r(new qL(o,t))},o.onerror=i,o.onabort=function(){return i(new KA("Request aborted"))},o.send(),e&&(e.aborted&&o.abort(),e.addEventListener("abort",(function(){return o.abort()})))}))}},{key:"request",value:(e=NL(regeneratorRuntime.mark((function t(){var e,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},n=e.headers,r=e.signal,t.next=3,this.constructRequest(n,r);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(yL),WL=n(1555),KL=n.n(WL),YL=n(2913),XL=n.n(YL),ZL=n(1143);function JL(t){return(JL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?QL(Object(n),!0).forEach((function(e){eR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function eR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nR(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function rR(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){nR(o,r,i,a,s,"next",t)}function s(t){nR(o,r,i,a,s,"throw",t)}a(void 0)}))}}function iR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aR(t,e,n){return e&&oR(t.prototype,e),n&&oR(t,n),t}function sR(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lR(t,e)}function lR(t,e){return(lR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hR(t);if(e){var i=hR(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cR(this,n)}}function cR(t,e){if(e&&("object"===JL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hR(t){return(hR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fR=function(t){sR(r,t);var e,n=uR(r);function r(t,e){var i;return iR(this,r),(i=n.call(this)).response=t,i.dataPromise=e,i}return aR(r,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(t){return this.response.headers[t]}},{key:"getData",value:(e=rR(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dataPromise;case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(vL),pR=function(t){sR(r,t);var e,n=uR(r);function r(t){var e;return iR(this,r),(e=n.call(this,t)).parsedUrl=ZL.parse(e.url),e.httpApi="http:"===e.parsedUrl.protocol?KL():XL(),e}return aR(r,[{key:"constructRequest",value:function(t,e){var n=this;return new Promise((function(r,i){var o=n.httpApi.get(tR(tR({},n.parsedUrl),{},{headers:t}),(function(t){var e=new Promise((function(e){var n=[];t.on("data",(function(t){n.push(t)})),t.on("end",(function(){var t=Buffer.concat(n).buffer;e(t)})),t.on("error",i)}));r(new fR(t,e))}));o.on("error",i),e&&(e.aborted&&o.destroy(new KA("Request aborted")),e.addEventListener("abort",(function(){return o.destroy(new KA("Request aborted"))})))}))}},{key:"request",value:(e=rR(regeneratorRuntime.mark((function t(){var e,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},n=e.headers,r=e.signal,t.next=3,this.constructRequest(n,r);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(yL);function dR(t){return(dR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var gR=["headers","credentials","maxRanges","allowFullFile"],mR=["headers","maxRanges","allowFullFile"],vR=["headers","maxRanges","allowFullFile"],yR=["forceXHR"];function bR(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wR(Object(n),!0).forEach((function(e){SR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function SR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _R(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function kR(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_R(o,r,i,a,s,"next",t)}function s(t){_R(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ER(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function MR(t,e){return(MR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function TR(t,e){if(e&&("object"===dR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function OR(t){return(OR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var PR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&MR(t,e)}(s,t);var e,n,r,i,o,a=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=OR(t);if(e){var i=OR(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return TR(this,n)}}(s);function s(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(i=a.call(this)).client=t,i.headers=e,i.maxRanges=n,i.allowFullFile=r,i._fileSize=null,i}return e=s,(n=[{key:"fetch",value:(o=kR(regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.maxRanges>=e.length)){t.next=4;break}return t.abrupt("return",this.fetchSlices(e,n));case 4:this.maxRanges>0&&e.length;case 5:return t.next=7,Promise.all(e.map((function(t){return r.fetchSlice(t,n)})));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"fetchSlices",value:(i=kR(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,l,u,c,h,f,p,d,g=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.request({headers:xR(xR({},this.headers),{},{Range:"bytes=".concat(e.map((function(t){var e=t.offset,n=t.length;return"".concat(e,"-").concat(e+n)})).join(","))}),signal:n});case 2:if((r=t.sent).ok){t.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==r.status){t.next=32;break}if(m=void 0,m=fA(r.getHeader("content-type").split(";").map((function(t){return t.trim()}))),i={type:m[0],params:bA(m.slice(1).map((function(t){return t.split("=")})))},o=i.params,"multipart/byteranges"!==i.type){t.next=18;break}return t.t0=SA,t.next=13,r.getData();case 13:return t.t1=t.sent,t.t2=o.boundary,a=(0,t.t0)(t.t1,t.t2),this._fileSize=a[0].fileSize||null,t.abrupt("return",a);case 18:return t.next=20,r.getData();case 20:if(s=t.sent,l=xA(r.getHeader("content-range")),u=l.start,c=l.end,h=l.total,this._fileSize=h||null,f=[{data:s,offset:u,length:c-u}],!(e.length>1)){t.next=29;break}return t.next=27,Promise.all(e.slice(1).map((function(t){return g.fetchSlice(t,n)})));case 27:return p=t.sent,t.abrupt("return",f.concat(p));case 29:return t.abrupt("return",f);case 32:if(this.allowFullFile){t.next=34;break}throw new Error("Server responded with full file");case 34:return t.next=36,r.getData();case 36:return d=t.sent,this._fileSize=d.byteLength,t.abrupt("return",[{data:d,offset:0,length:d.byteLength}]);case 39:case"end":return t.stop()}var m}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"fetchSlice",value:(r=kR(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.offset,i=e.length,t.next=3,this.client.request({headers:xR(xR({},this.headers),{},{Range:"bytes=".concat(r,"-").concat(r+i)}),signal:n});case 3:if((o=t.sent).ok){t.next=8;break}throw new Error("Error fetching data.");case 8:if(206!==o.status){t.next=17;break}return t.next=11,o.getData();case 11:return a=t.sent,s=xA(o.getHeader("content-range")),l=s.total,this._fileSize=l||null,t.abrupt("return",{data:a,offset:r,length:i});case 17:if(this.allowFullFile){t.next=19;break}throw new Error("Server responded with full file");case 19:return t.next=21,o.getData();case 21:return u=t.sent,this._fileSize=u.byteLength,t.abrupt("return",{data:u,offset:0,length:u.byteLength});case 24:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"fileSize",get:function(){return this._fileSize}}])&&ER(e.prototype,n),s}(MA);function CR(t,e){var n=e.blockSize,r=e.cacheSize;return null===n?t:new hL(t,n,r)}function IR(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=void 0===n?{}:n,i=e.credentials,o=e.maxRanges,a=void 0===o?0:o,s=e.allowFullFile,l=void 0!==s&&s,u=bR(e,gR),c=new IL(t,i),h=new PR(c,r,a,l);return CR(h,u)}function AR(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=void 0===n?{}:n,i=e.maxRanges,o=void 0===i?0:i,a=e.allowFullFile,s=void 0!==a&&a,l=bR(e,mR),u=new HL(t),c=new PR(u,r,o,s);return CR(c,l)}function LR(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=void 0===n?{}:n,i=e.maxRanges,o=void 0===i?0:i,a=e.allowFullFile,s=void 0!==a&&a,l=bR(e,vR),u=new pR(t),c=new PR(u,r,o,s);return CR(c,l)}function RR(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.forceXHR,r=void 0!==n&&n,i=bR(e,yR);return"function"!=typeof fetch||r?"undefined"!=typeof XMLHttpRequest?AR(t,i):LR(t,i):IR(t,i)}n(713);var jR=zA(oC),NR=zA(fC),$R={};BA($R,jR),BA($R,NR),zA(uC);var FR={nextZero:function(t,e){for(var n=e;0!==t[n];)n++;return n},readUshort:function(t,e){return t[e]<<8|t[e+1]},readShort:function(t,e){var n=FR.ui8;return n[0]=t[e+1],n[1]=t[e+0],FR.i16[0]},readInt:function(t,e){var n=FR.ui8;return n[0]=t[e+3],n[1]=t[e+2],n[2]=t[e+1],n[3]=t[e+0],FR.i32[0]},readUint:function(t,e){var n=FR.ui8;return n[0]=t[e+3],n[1]=t[e+2],n[2]=t[e+1],n[3]=t[e+0],FR.ui32[0]},readASCII:function(t,e,n){return n.map((function(n){return String.fromCharCode(t[e+n])})).join("")},readFloat:function(t,e){var n=FR.ui8;return VA(4,(function(r){n[r]=t[e+3-r]})),FR.fl32[0]},readDouble:function(t,e){var n=FR.ui8;return VA(8,(function(r){n[r]=t[e+7-r]})),FR.fl64[0]},writeUshort:function(t,e,n){t[e]=n>>8&255,t[e+1]=255&n},writeUint:function(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255},writeASCII:function(t,e,n){VA(n.length,(function(r){t[e+r]=n.charCodeAt(r)}))},ui8:new Uint8Array(8)};function DR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}FR.fl64=new Float64Array(FR.ui8.buffer),FR.writeDouble=function(t,e,n){FR.fl64[0]=n,VA(8,(function(n){t[e+n]=FR.ui8[7-n]}))};var GR=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"log",value:function(){}},{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}},{key:"time",value:function(){}},{key:"timeEnd",value:function(){}}])&&DR(e.prototype,n),t}();function UR(t){return(UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?BR(Object(n),!0).forEach((function(e){VR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function VR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return HR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HR(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WR(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function KR(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){WR(o,r,i,a,s,"next",t)}function s(t){WR(o,r,i,a,s,"throw",t)}a(void 0)}))}}function YR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function XR(t,e,n){return e&&YR(t.prototype,e),n&&YR(t,n),t}function ZR(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rj(t,e)}function JR(t){var e=nj();return function(){var n,r=ij(t);if(e){var i=ij(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return QR(this,n)}}function QR(t,e){if(e&&("object"===UR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tj(t){var e="function"==typeof Map?new Map:void 0;return(tj=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ej(t,arguments,ij(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),rj(r,t)})(t)}function ej(t,e,n){return(ej=nj()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&rj(i,n.prototype),i}).apply(null,arguments)}function nj(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function rj(t,e){return(rj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ij(t){return(ij=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aj(t){switch(t){case cC.BYTE:case cC.ASCII:case cC.SBYTE:case cC.UNDEFINED:return 1;case cC.SHORT:case cC.SSHORT:return 2;case cC.LONG:case cC.SLONG:case cC.FLOAT:case cC.IFD:return 4;case cC.RATIONAL:case cC.SRATIONAL:case cC.DOUBLE:case cC.LONG8:case cC.SLONG8:case cC.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(t))}}function sj(t){var e=t.GeoKeyDirectory;if(!e)return null;for(var n={},r=4;r<=4*e[3];r+=4){var i=fC[e[r]],o=e[r+1]?oC[e[r+1]]:null,a=e[r+2],s=e[r+3],l=null;if(o){if(null==(l=t[o]))throw new Error("Could not get value of geoKey '".concat(i,"'."));"string"==typeof l?l=l.substring(s,s+a-1):l.subarray&&(l=l.subarray(s,s+a),1===a&&(l=l[0]))}else l=s;n[i]=l}return n}function lj(t,e,n,r){var i=null,o=null,a=aj(e);switch(e){case cC.BYTE:case cC.ASCII:case cC.UNDEFINED:i=new Uint8Array(n),o=t.readUint8;break;case cC.SBYTE:i=new Int8Array(n),o=t.readInt8;break;case cC.SHORT:i=new Uint16Array(n),o=t.readUint16;break;case cC.SSHORT:i=new Int16Array(n),o=t.readInt16;break;case cC.LONG:case cC.IFD:i=new Uint32Array(n),o=t.readUint32;break;case cC.SLONG:i=new Int32Array(n),o=t.readInt32;break;case cC.LONG8:case cC.IFD8:i=new Array(n),o=t.readUint64;break;case cC.SLONG8:i=new Array(n),o=t.readInt64;break;case cC.RATIONAL:i=new Uint32Array(2*n),o=t.readUint32;break;case cC.SRATIONAL:i=new Int32Array(2*n),o=t.readInt32;break;case cC.FLOAT:i=new Float32Array(n),o=t.readFloat32;break;case cC.DOUBLE:i=new Float64Array(n),o=t.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(e))}if(e!==cC.RATIONAL&&e!==cC.SRATIONAL)for(var s=0;s<n;++s)i[s]=o.call(t,r+s*a);else for(var l=0;l<n;l+=2)i[l]=o.call(t,r+l*a),i[l+1]=o.call(t,r+(l*a+4));return e===cC.ASCII?new TextDecoder("utf-8").decode(i):i}new GR;var uj=function t(e,n,r){oj(this,t),this.fileDirectory=e,this.geoKeyDirectory=n,this.nextIFDByteOffset=r},cj=function(t){ZR(n,t);var e=JR(n);function n(t){var r;return oj(this,n),(r=e.call(this,"No image at index ".concat(t))).index=t,r}return n}(tj(Error)),hj=function(){function t(){oj(this,t)}var e;return XR(t,[{key:"readRasters",value:(e=KR(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x,S,_,k,E,M,T,O,P,C,I,A,L,R,j,N,$,F,D,G=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=G.length>0&&void 0!==G[0]?G[0]:{},n=e.window,r=e.width,i=e.height,o=e.resX,a=e.resY,s=e.bbox,t.next=5,this.getImage();case 5:return l=t.sent,u=l,t.next=9,this.getImageCount();case 9:if(c=t.sent,h=l.getBoundingBox(),!n||!s){t.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!r&&!i){t.next=24;break}if(n&&(f=l.getOrigin(),p=qR(f,2),d=p[0],g=p[1],m=l.getResolution(),v=qR(m,2),y=v[0],b=v[1],s=[d+n[0]*y,g+n[1]*b,d+n[2]*y,g+n[3]*b]),w=s||h,!r){t.next=20;break}if(!o){t.next=19;break}throw new Error("Both width and resX passed");case 19:o=(w[2]-w[0])/r;case 20:if(!i){t.next=24;break}if(!a){t.next=23;break}throw new Error("Both width and resY passed");case 23:a=(w[3]-w[1])/i;case 24:if(!o&&!a){t.next=48;break}x=[],S=0;case 27:if(!(S<c)){t.next=36;break}return t.next=30,this.getImage(S);case 30:_=t.sent,k=_.fileDirectory,E=k.SubfileType,M=k.NewSubfileType,(0===S||2===E||1&M)&&x.push(_);case 33:++S,t.next=27;break;case 36:x.sort((function(t,e){return t.getWidth()-e.getWidth()})),T=0;case 38:if(!(T<x.length)){t.next=48;break}if(O=x[T],P=(h[2]-h[0])/O.getWidth(),C=(h[3]-h[1])/O.getHeight(),u=O,!(o&&o>P||a&&a>C)){t.next=45;break}return t.abrupt("break",48);case 45:++T,t.next=38;break;case 48:return I=n,s&&(A=l.getOrigin(),L=qR(A,2),R=L[0],j=L[1],N=u.getResolution(l),$=qR(N,2),F=$[0],D=$[1],I=[Math.round((s[0]-R)/F),Math.round((s[1]-j)/D),Math.round((s[2]-R)/F),Math.round((s[3]-j)/D)],I=[Math.min(I[0],I[2]),Math.min(I[1],I[3]),Math.max(I[0],I[2]),Math.max(I[1],I[3])]),t.abrupt("return",u.readRasters(zR(zR({},e),{},{window:I})));case 51:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),fj=function(t){ZR(u,t);var e,n,r,i,o,a,s,l=JR(u);function u(t,e,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return oj(this,u),(i=l.call(this)).source=t,i.littleEndian=e,i.bigTiff=n,i.firstIFDOffset=r,i.cache=o.cache||!1,i.ifdRequests=[],i.ghostValues=null,i}return XR(u,[{key:"getSlice",value:(s=KR(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.bigTiff?4048:1024,t.t0=tA,t.next=4,this.source.fetch([{offset:e,length:void 0!==n?n:r}]);case 4:return t.t1=t.sent[0],t.t2=e,t.t3=this.littleEndian,t.t4=this.bigTiff,t.abrupt("return",new t.t0(t.t1,t.t2,t.t3,t.t4));case 9:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(a=KR(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,v,y,b,w,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.bigTiff?20:12,r=this.bigTiff?8:2,t.next=4,this.getSlice(e);case 4:if(i=t.sent,o=this.bigTiff?i.readUint64(e):i.readUint16(e),a=o*n+(this.bigTiff?16:6),i.covers(e,a)){t.next=11;break}return t.next=10,this.getSlice(e,a);case 10:i=t.sent;case 11:s={},l=e+(this.bigTiff?8:2),u=0;case 14:if(!(u<o)){t.next=41;break}if(c=i.readUint16(l),h=i.readUint16(l+2),f=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4),p=void 0,d=void 0,g=aj(h),m=l+(this.bigTiff?12:8),!(g*f<=(this.bigTiff?8:4))){t.next=26;break}p=lj(i,h,f,m),t.next=36;break;case 26:if(v=i.readOffset(m),y=aj(h)*f,!i.covers(v,y)){t.next=32;break}p=lj(i,h,f,v),t.next=36;break;case 32:return t.next=34,this.getSlice(v,y);case 34:b=t.sent,p=lj(b,h,f,v);case 36:d=1===f&&-1===lC.indexOf(c)&&h!==cC.RATIONAL&&h!==cC.SRATIONAL?p[0]:p,s[oC[c]]=d;case 38:l+=n,++u,t.next=14;break;case 41:return w=sj(s),x=i.readOffset(e+r+n*o),t.abrupt("return",new uj(s,w,x));case 44:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"requestIFD",value:(o=KR(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ifdRequests[e]){t.next=4;break}return t.abrupt("return",this.ifdRequests[e]);case 4:if(0!==e){t.next=9;break}return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),t.abrupt("return",this.ifdRequests[e]);case 9:if(this.ifdRequests[e-1]){t.next=19;break}t.prev=10,this.ifdRequests[e-1]=this.requestIFD(e-1),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(10),!(t.t0 instanceof cj)){t.next=18;break}throw new cj(e);case 18:throw t.t0;case 19:return this.ifdRequests[e]=KR(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.ifdRequests[e-1];case 2:if(0!==(r=t.sent).nextIFDByteOffset){t.next=5;break}throw new cj(e);case 5:return t.abrupt("return",n.parseFileDirectoryAt(r.nextIFDByteOffset));case 6:case"end":return t.stop()}}),t)})))(),t.abrupt("return",this.ifdRequests[e]);case 21:case"end":return t.stop()}}),t,this,[[10,14]])}))),function(t){return o.apply(this,arguments)})},{key:"getImage",value:(i=KR(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,t.next=3,this.requestIFD(e);case 3:return n=t.sent,t.abrupt("return",new XI(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getImageCount",value:(r=KR(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0,n=!0;case 2:if(!n){t.next=18;break}return t.prev=3,t.next=6,this.requestIFD(e);case 6:++e,t.next=16;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(t.t0 instanceof cj)){t.next=15;break}n=!1,t.next=16;break;case 15:throw t.t0;case 16:t.next=2;break;case 18:return t.abrupt("return",e);case 19:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(){return r.apply(this,arguments)})},{key:"getGhostValues",value:(n=KR(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.bigTiff?16:8,!this.ghostValues){t.next=3;break}return t.abrupt("return",this.ghostValues);case 3:return r=(n="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,t.next=7,this.getSlice(e,r);case 7:if(i=t.sent,n!==lj(i,cC.ASCII,n.length,e)){t.next=19;break}if(o=lj(i,cC.ASCII,r,e),a=o.split("\n")[0],!((s=Number(a.split("=")[1].split(" ")[0])+a.length)>r)){t.next=16;break}return t.next=15,this.getSlice(e,s);case 15:i=t.sent;case 16:l=lj(i,cC.ASCII,s,e),this.ghostValues={},l.split("\n").filter((function(t){return t.length>0})).map((function(t){return t.split("=")})).forEach((function(t){var e=qR(t,2),n=e[0],r=e[1];u.ghostValues[n]=r}));case 19:return t.abrupt("return",this.ghostValues);case 20:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(e=KR(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,l,c,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetch([{offset:0,length:1024}],r);case 2:if(i=t.sent[0],o=new JI(i),18761!==(a=o.getUint16(0,0))){t.next=9;break}s=!0,t.next=14;break;case 9:if(19789!==a){t.next=13;break}s=!1,t.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(l=o.getUint16(2,s))){t.next=19;break}c=!1,t.next=27;break;case 19:if(43!==l){t.next=26;break}if(c=!0,8===o.getUint16(4,s)){t.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:t.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return h=c?o.getUint64(8,s):o.getUint32(4,s),t.abrupt("return",new u(e,s,c,h,n));case 29:case"end":return t.stop()}}),t)}))),function(t,n,r){return e.apply(this,arguments)})}]),u}(hj),pj=function(t){ZR(o,t);var e,n,r,i=JR(o);function o(t,e){var n;return oj(this,o),(n=i.call(this)).mainFile=t,n.overviewFiles=e,n.imageFiles=[t].concat(e),n.fileDirectoriesPerFile=null,n.fileDirectoriesPerFileParsing=null,n.imageCount=null,n}return XR(o,[{key:"parseFileDirectoriesPerFile",value:(r=KR(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((function(t){return t.parseFileDirectoryAt(t.firstIFDOffset)}))),t.next=3,Promise.all(e);case 3:return this.fileDirectoriesPerFile=t.sent,t.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getImage",value:(n=KR(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:0,t.next=3,this.getImageCount();case 3:return t.next=5,this.parseFileDirectoriesPerFile();case 5:n=0,r=0,i=0;case 8:if(!(i<this.imageFiles.length)){t.next=26;break}o=this.imageFiles[i],a=0;case 11:if(!(a<this.imageCounts[i])){t.next=22;break}if(e!==n){t.next=17;break}return t.next=15,o.requestIFD(r);case 15:return s=t.sent,t.abrupt("return",new XI(s.fileDirectory,s.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source));case 17:n++,r++;case 19:a++,t.next=11;break;case 22:r=0;case 23:i++,t.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getImageCount",value:(e=KR(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this.imageCount){t.next=2;break}return t.abrupt("return",this.imageCount);case 2:return e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((function(t){return t.getImageCount()}))),t.next=5,Promise.all(e);case 5:return this.imageCounts=t.sent,this.imageCount=this.imageCounts.reduce((function(t,e){return t+e}),0),t.abrupt("return",this.imageCount);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),o}(hj);function dj(){return(dj=KR(regeneratorRuntime.mark((function t(e){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2?i[2]:void 0,t.abrupt("return",fj.fromSource(RR(e,n),r));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gj(){return(gj=KR(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:[],r=s.length>2&&void 0!==s[2]?s[2]:{},i=s.length>3?s[3]:void 0,t.next=5,fj.fromSource(RR(e,r),i);case 5:return o=t.sent,t.next=8,Promise.all(n.map((function(t){return fj.fromSource(RR(t,r))})));case 8:return a=t.sent,t.abrupt("return",new pj(o,a));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var mj,vj=new Blob(['function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){asyncGeneratorStep(i,n,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,a,o,s,"throw",e)}o(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var runtime={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new M(n||[]);return i._invoke=function(e,t,r){var n=c;return function(a,i){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=S(o,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===c)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=u(e,t,r);if("normal"===l.type){if(n=r.done?m:d,l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=m,r.method="throw",r.arg=l.arg)}}}(e,r,o),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var c="suspendedStart",d="suspendedYield",h="executing",m="completed",p={};function g(){}function y(){}function b(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(A([])));_&&_!==r&&n.call(_,i)&&(v=_);var k=b.prototype=g.prototype=Object.create(v);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,o,s){var l=u(e[a],e,i);if("throw"!==l.type){var f=l.arg,c=f.value;return c&&"object"===_typeof(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(c).then((function(e){f.value=e,o(f)}),(function(e){return r("throw",e,o,s)}))}s(l.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function S(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return p}var a=u(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=b,l(k,"constructor",b),l(b,"constructor",y),y.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},T(x.prototype),l(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new x(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(k),l(k,s,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),f=n.call(o,"finallyLoc");if(l&&f){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(runtime);var worker={},isObservable=function(e){return!!e&&("symbol"===_typeof(Symbol.observable)&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},common$1={},serializers={};function extendSerializer(e,t){var r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:function(e){return t.deserialize(e,r)},serialize:function(e){return t.serialize(e,n)}}}Object.defineProperty(serializers,"__esModule",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0,serializers.extendSerializer=extendSerializer;var DefaultErrorSerializer={deserialize:function(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize:function(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},isSerializedError=function(e){return e&&"object"===_typeof(e)&&"__error_marker"in e&&"$$error"===e.__error_marker};serializers.DefaultSerializer={deserialize:function(e){return isSerializedError(e)?DefaultErrorSerializer.deserialize(e):e},serialize:function(e){return e instanceof Error?DefaultErrorSerializer.serialize(e):e}},Object.defineProperty(common$1,"__esModule",{value:!0}),common$1.serialize=common$1.deserialize=common$1.registerSerializer=void 0;var serializers_1=serializers,registeredSerializer=serializers_1.DefaultSerializer;function registerSerializer(e){registeredSerializer=serializers_1.extendSerializer(registeredSerializer,e)}function deserialize(e){return registeredSerializer.deserialize(e)}function serialize(e){return registeredSerializer.serialize(e)}common$1.registerSerializer=registerSerializer,common$1.deserialize=deserialize,common$1.serialize=serialize;var transferable={},symbols={};Object.defineProperty(symbols,"__esModule",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol("thread.errors"),symbols.$events=Symbol("thread.events"),symbols.$terminate=Symbol("thread.terminate"),symbols.$transferable=Symbol("thread.transferable"),symbols.$worker=Symbol("thread.worker"),Object.defineProperty(transferable,"__esModule",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;var symbols_1=symbols;function isTransferable(e){return!(!e||"object"!==_typeof(e))}function isTransferDescriptor(e){return e&&"object"===_typeof(e)&&e[symbols_1.$transferable]}function Transfer$1(e,t){var r;if(!t){if(!isTransferable(e))throw Error();t=[e]}return _defineProperty(r={},symbols_1.$transferable,!0),_defineProperty(r,"send",e),_defineProperty(r,"transferables",t),r}transferable.isTransferDescriptor=isTransferDescriptor,transferable.Transfer=Transfer$1;var messages$1={},exports,MasterMessageType,WorkerMessageType;exports=messages$1,Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerMessageType=exports.MasterMessageType=void 0,(MasterMessageType=exports.MasterMessageType||(exports.MasterMessageType={})).cancel="cancel",MasterMessageType.run="run",(WorkerMessageType=exports.WorkerMessageType||(exports.WorkerMessageType={})).error="error",WorkerMessageType.init="init",WorkerMessageType.result="result",WorkerMessageType.running="running",WorkerMessageType.uncaughtError="uncaughtError";var implementation$1={},implementation_browser={};Object.defineProperty(implementation_browser,"__esModule",{value:!0});var isWorkerRuntime$2=function(){var e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||e)},postMessageToMaster$2=function(e,t){self.postMessage(e,t)},subscribeToMasterMessages$2=function(e){var t=function(t){e(t.data)};return self.addEventListener("message",t),function(){self.removeEventListener("message",t)}};implementation_browser.default={isWorkerRuntime:isWorkerRuntime$2,postMessageToMaster:postMessageToMaster$2,subscribeToMasterMessages:subscribeToMasterMessages$2};var implementation_tinyWorker={};Object.defineProperty(implementation_tinyWorker,"__esModule",{value:!0}),"undefined"==typeof self&&(commonjsGlobal.self=commonjsGlobal);var isWorkerRuntime$1=function(){return!("undefined"==typeof self||!self.postMessage)},postMessageToMaster$1=function(e){self.postMessage(e)},muxingHandlerSetUp=!1,messageHandlers=new Set,subscribeToMasterMessages$1=function(e){muxingHandlerSetUp||(self.addEventListener("message",(function(e){messageHandlers.forEach((function(t){return t(e.data)}))})),muxingHandlerSetUp=!0),messageHandlers.add(e);return function(){return messageHandlers.delete(e)}};implementation_tinyWorker.default={isWorkerRuntime:isWorkerRuntime$1,postMessageToMaster:postMessageToMaster$1,subscribeToMasterMessages:subscribeToMasterMessages$1};var implementation_worker_threads={},worker_threads={},implementation;function selectImplementation(){return"function"==typeof __non_webpack_require__?__non_webpack_require__("worker_threads"):eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}Object.defineProperty(worker_threads,"__esModule",{value:!0}),worker_threads.default=getImplementation;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation_worker_threads,"__esModule",{value:!0});var worker_threads_1=__importDefault$1(worker_threads);function assertMessagePort(e){if(!e)throw Error("Invariant violation: MessagePort to parent is not available.");return e}var isWorkerRuntime=function(){return!worker_threads_1.default().isMainThread},postMessageToMaster=function(e,t){assertMessagePort(worker_threads_1.default().parentPort).postMessage(e,t)},subscribeToMasterMessages=function(e){var t=worker_threads_1.default().parentPort;if(!t)throw Error("Invariant violation: MessagePort to parent is not available.");var r=function(t){e(t)};return assertMessagePort(t).on("message",r),function(){assertMessagePort(t).off("message",r)}};function testImplementation(){worker_threads_1.default()}implementation_worker_threads.default={isWorkerRuntime:isWorkerRuntime,postMessageToMaster:postMessageToMaster,subscribeToMasterMessages:subscribeToMasterMessages,testImplementation:testImplementation};var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation$1,"__esModule",{value:!0});var implementation_browser_1=__importDefault(implementation_browser),implementation_tiny_worker_1=__importDefault(implementation_tinyWorker),implementation_worker_threads_1=__importDefault(implementation_worker_threads),runningInNode="undefined"!=typeof process&&"browser"!==process.arch&&"pid"in process;function selectNodeImplementation(){try{return implementation_worker_threads_1.default.testImplementation(),implementation_worker_threads_1.default}catch(e){return implementation_tiny_worker_1.default}}implementation$1.default=runningInNode?selectNodeImplementation():implementation_browser_1.default,function(e){var t=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;var n=r(isObservable),a=common$1,i=transferable,o=messages$1,s=r(implementation$1),l=common$1;Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}});var f=transferable;Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return f.Transfer}}),e.isWorkerRuntime=s.default.isWorkerRuntime;var u=!1,c=new Map,d=function(e){return e&&e.type===o.MasterMessageType.run},h=function(e){return n.default(e)||function(e){return e&&"object"===_typeof(e)&&"function"==typeof e.subscribe}(e)};function m(e){return i.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function p(e,t){var r=m(t),n=r.payload,i=r.transferables,l={type:o.WorkerMessageType.error,uid:e,error:a.serialize(n)};s.default.postMessageToMaster(l,i)}function g(e,t,r){var n=m(r),a=n.payload,i=n.transferables,l={type:o.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:a};s.default.postMessageToMaster(l,i)}function y(e,t){var r={type:o.WorkerMessageType.running,uid:e,resultType:t};s.default.postMessageToMaster(r)}function b(e){try{var t={type:o.WorkerMessageType.uncaughtError,error:a.serialize(e)};s.default.postMessageToMaster(t)}catch(t){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\\nLatest error:",t,"\\nOriginal error:",e)}}function v(e,r,n){return t(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,i=r.apply(void 0,_toConsumableArray(n)),t.next=7;break;case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",p(e,t.t0));case 7:if(o=h(i)?"observable":"promise",y(e,o),!h(i)){t.next=14;break}s=i.subscribe((function(t){return g(e,!1,a.serialize(t))}),(function(t){p(e,a.serialize(t)),c.delete(e)}),(function(){g(e,!0),c.delete(e)})),c.set(e,s),t.next=24;break;case 14:return t.prev=14,t.next=17,i;case 17:l=t.sent,g(e,!0,a.serialize(l)),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(14),p(e,a.serialize(t.t1));case 24:case"end":return t.stop()}}),t,null,[[0,4],[14,21]])})))}e.expose=function(e){if(!s.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(u)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(u=!0,"function"==typeof e)s.default.subscribeToMasterMessages((function(t){d(t)&&!t.method&&v(t.uid,e,t.args.map(a.deserialize))})),t={type:o.WorkerMessageType.init,exposed:{type:"function"}},s.default.postMessageToMaster(t);else{if("object"!==_typeof(e)||!e)throw Error("Invalid argument passed to expose(). Expected a function or an object, got: ".concat(e));s.default.subscribeToMasterMessages((function(t){d(t)&&t.method&&v(t.uid,e[t.method],t.args.map(a.deserialize))})),function(e){var t={type:o.WorkerMessageType.init,exposed:{type:"module",methods:e}};s.default.postMessageToMaster(t)}(Object.keys(e).filter((function(t){return"function"==typeof e[t]})))}var t;s.default.subscribeToMasterMessages((function(e){if((n=e)&&n.type===o.MasterMessageType.cancel){var t=e.uid,r=c.get(t);r&&(r.unsubscribe(),c.delete(t))}var n}))},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&s.default.isWorkerRuntime()&&(self.addEventListener("error",(function(e){setTimeout((function(){return b(e.error||e)}),250)})),self.addEventListener("unhandledrejection",(function(e){var t=e.reason;t&&"string"==typeof t.message&&setTimeout((function(){return b(t)}),250)}))),"undefined"!=typeof process&&"function"==typeof process.on&&s.default.isWorkerRuntime()&&(process.on("uncaughtException",(function(e){setTimeout((function(){return b(e)}),250)})),process.on("unhandledRejection",(function(e){e&&"string"==typeof e.message&&setTimeout((function(){return b(e)}),250)})))}(worker);var WorkerContext=getDefaultExportFromCjs(worker),expose=WorkerContext.expose;WorkerContext.registerSerializer;var Transfer=WorkerContext.Transfer;function decodeRowAcc(e,t){var r=e.length-t,n=0;do{for(var a=t;a>0;a--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function decodeRowFloatingPoint(e,t,r){for(var n=0,a=e.length,i=a/r;a>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;a-=t}for(var s=e.slice(),l=0;l<i;++l)for(var f=0;f<r;++f)e[r*l+f]=s[(r-f-1)*i+l]}function applyPredictor(e,t,r,n,a,i){if(!t||1===t)return e;for(var o=0;o<a.length;++o){if(a[o]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(a[o]!==a[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var s=a[0]/8,l=2===i?1:a.length,f=0;f<n&&!(f*l*r*s>=e.byteLength);++f){var u=void 0;if(2===t){switch(a[0]){case 8:u=new Uint8Array(e,f*l*r*s,l*r*s);break;case 16:u=new Uint16Array(e,f*l*r*s,l*r*s/2);break;case 32:u=new Uint32Array(e,f*l*r*s,l*r*s/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(a[0]," bits per sample."))}decodeRowAcc(u,l)}else 3===t&&decodeRowFloatingPoint(u=new Uint8Array(e,f*l*r*s,l*r*s),l,s)}return e}var BaseDecoder=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"decode",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1===(a=t.Predictor||1)){e.next=9;break}return i=!t.StripOffsets,o=i?t.TileWidth:t.ImageWidth,s=i?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt("return",applyPredictor(n,a,o,s,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),RawDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){return e}}]),r}(),MIN_BITS=9,CLEAR_CODE=256,EOI_CODE=257,MAX_BYTELENGTH=12;function getByte(e,t,r){var n=t%8,a=Math.floor(t/8),i=8-n,o=t+r-8*(a+1),s=8*(a+2)-(t+r),l=8*(a+2)-t;if(s=Math.max(0,s),a>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),EOI_CODE;var f=e[a]&Math.pow(2,8-n)-1,u=f<<=r-i;if(a+1<e.length){var c=e[a+1]>>>s;u+=c<<=Math.max(0,r-l)}if(o>8&&a+2<e.length){var d=8*(a+3)-(t+r);u+=e[a+2]>>>d}return u}function appendReversed(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function decompress(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var a=258,i=MIN_BITS,o=0;function s(){a=258,i=MIN_BITS}function l(e){var t=getByte(e,o,i);return o+=i,t}function f(e,n){return r[a]=n,t[a]=e,++a-1}function u(e){for(var n=[],a=e;4096!==a;a=t[a])n.push(r[a]);return n}var c=[];s();for(var d,h=new Uint8Array(e),m=l(h);m!==EOI_CODE;){if(m===CLEAR_CODE){for(s(),m=l(h);m===CLEAR_CODE;)m=l(h);if(m===EOI_CODE)break;if(m>CLEAR_CODE)throw new Error("corrupted code at scanline ".concat(m));appendReversed(c,u(m)),d=m}else if(m<a){var p=u(m);appendReversed(c,p),f(d,p[p.length-1]),d=m}else{var g=u(d);if(!g)throw new Error("Bogus entry. Not in dictionary, ".concat(d," / ").concat(a,", position: ").concat(o));appendReversed(c,g),c.push(g[g.length-1]),f(d,g[g.length-1]),d=m}a+1>=Math.pow(2,i)&&(i===MAX_BYTELENGTH?d=void 0:i++),m=l(h)}return new Uint8Array(c)}var LZWDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){return decompress(e).buffer}}]),r}(),dctZigZag=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dctCos1=4017,dctSin1=799,dctCos3=3406,dctSin3=2276,dctCos6=1567,dctSin6=3784,dctSqrt2=5793,dctSqrt1d2=2896;function buildHuffmanTable(e,t){for(var r=0,n=[],a=16;a>0&&!e[a-1];)--a;n.push({children:[],index:0});for(var i,o=n[0],s=0;s<a;s++){for(var l=0;l<e[s];l++){for((o=n.pop()).children[o.index]=t[r];o.index>0;)o=n.pop();for(o.index++,n.push(o);n.length<=s;)n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i;r++}s+1<a&&(n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i)}return n[0].children}function decodeScan(e,t,r,n,a,i,o,s,l){var f=r.mcusPerLine,u=r.progressive,c=t,d=t,h=0,m=0;function p(){if(m>0)return m--,h>>m&1;if(255===(h=e[d++])){var t=e[d++];if(t)throw new Error("unexpected marker: ".concat((h<<8|t).toString(16)))}return m=7,h>>>7}function g(e){for(var t,r=e;null!==(t=p());){if("number"==typeof(r=r[t]))return r;if("object"!==_typeof(r))throw new Error("invalid huffman sequence")}return null}function y(e){for(var t=e,r=0;t>0;){var n=p();if(null===n)return;r=r<<1|n,--t}return r}function b(e){var t=y(e);return t>=1<<e-1?t:t+(-1<<e)+1}var v=0;var w,_=0;function k(e,t,r,n,a){var i=r%f,o=(r/f|0)*e.v+n,s=i*e.h+a;t(e,e.blocks[o][s])}function T(e,t,r){var n=r/e.blocksPerLine|0,a=r%e.blocksPerLine;t(e,e.blocks[n][a])}var x,S,E,D,M,A,I=n.length;A=u?0===i?0===s?function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:b(r)<<l;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=p()<<l}:0===s?function(e,t){if(v>0)v--;else for(var r=i,n=o;r<=n;){var a=g(e.huffmanTableAC),s=15&a,f=a>>4;if(0===s){if(f<15){v=y(f)+(1<<f)-1;break}r+=16}else t[dctZigZag[r+=f]]=b(s)*(1<<l),r++}}:function(e,t){for(var r=i,n=o,a=0;r<=n;){var s=dctZigZag[r],f=t[s]<0?-1:1;switch(_){case 0:var u=g(e.huffmanTableAC),c=15&u;if(a=u>>4,0===c)a<15?(v=y(a)+(1<<a),_=4):(a=16,_=1);else{if(1!==c)throw new Error("invalid ACn encoding");w=b(c),_=a?2:3}continue;case 1:case 2:t[s]?t[s]+=(p()<<l)*f:0==--a&&(_=2===_?3:0);break;case 3:t[s]?t[s]+=(p()<<l)*f:(t[s]=w<<l,_=0);break;case 4:t[s]&&(t[s]+=(p()<<l)*f)}r++}4===_&&0==--v&&(_=0)}:function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:b(r);e.pred+=n,t[0]=e.pred;for(var a=1;a<64;){var i=g(e.huffmanTableAC),o=15&i,s=i>>4;if(0===o){if(s<15)break;a+=16}else t[dctZigZag[a+=s]]=b(o),a++}};var P,C,O=0;C=1===I?n[0].blocksPerLine*n[0].blocksPerColumn:f*r.mcusPerColumn;for(var R=a||C;O<C;){for(S=0;S<I;S++)n[S].pred=0;if(v=0,1===I)for(x=n[0],M=0;M<R;M++)T(x,A,O),O++;else for(M=0;M<R;M++){for(S=0;S<I;S++){var L=x=n[S],B=L.h,U=L.v;for(E=0;E<U;E++)for(D=0;D<B;D++)k(x,A,O,E,D)}if(++O===C)break}if(m=0,(P=e[d]<<8|e[d+1])<65280)throw new Error("marker was not found");if(!(P>=65488&&P<=65495))break;d+=2}return d-c}function buildComponentData(e,t){var r=[],n=t.blocksPerLine,a=t.blocksPerColumn,i=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function l(e,r,n){var a,i,o,s,l,f,u,c,d,h,m=t.quantizationTable,p=n;for(h=0;h<64;h++)p[h]=e[h]*m[h];for(h=0;h<8;++h){var g=8*h;0!==p[1+g]||0!==p[2+g]||0!==p[3+g]||0!==p[4+g]||0!==p[5+g]||0!==p[6+g]||0!==p[7+g]?(a=dctSqrt2*p[0+g]+128>>8,i=dctSqrt2*p[4+g]+128>>8,o=p[2+g],s=p[6+g],l=dctSqrt1d2*(p[1+g]-p[7+g])+128>>8,c=dctSqrt1d2*(p[1+g]+p[7+g])+128>>8,f=p[3+g]<<4,u=p[5+g]<<4,d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+128>>8,o=o*dctCos6-s*dctSin6+128>>8,s=d,d=l-u+1>>1,l=l+u+1>>1,u=d,d=c+f+1>>1,f=c-f+1>>1,c=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+c*dctCos3+2048>>12,l=l*dctCos3-c*dctSin3+2048>>12,c=d,d=f*dctSin1+u*dctCos1+2048>>12,f=f*dctCos1-u*dctSin1+2048>>12,u=d,p[0+g]=a+c,p[7+g]=a-c,p[1+g]=i+u,p[6+g]=i-u,p[2+g]=o+f,p[5+g]=o-f,p[3+g]=s+l,p[4+g]=s-l):(d=dctSqrt2*p[0+g]+512>>10,p[0+g]=d,p[1+g]=d,p[2+g]=d,p[3+g]=d,p[4+g]=d,p[5+g]=d,p[6+g]=d,p[7+g]=d)}for(h=0;h<8;++h){var y=h;0!==p[8+y]||0!==p[16+y]||0!==p[24+y]||0!==p[32+y]||0!==p[40+y]||0!==p[48+y]||0!==p[56+y]?(a=dctSqrt2*p[0+y]+2048>>12,i=dctSqrt2*p[32+y]+2048>>12,o=p[16+y],s=p[48+y],l=dctSqrt1d2*(p[8+y]-p[56+y])+2048>>12,c=dctSqrt1d2*(p[8+y]+p[56+y])+2048>>12,f=p[24+y],u=p[40+y],d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+2048>>12,o=o*dctCos6-s*dctSin6+2048>>12,s=d,d=l-u+1>>1,l=l+u+1>>1,u=d,d=c+f+1>>1,f=c-f+1>>1,c=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+c*dctCos3+2048>>12,l=l*dctCos3-c*dctSin3+2048>>12,c=d,d=f*dctSin1+u*dctCos1+2048>>12,f=f*dctCos1-u*dctSin1+2048>>12,u=d,p[0+y]=a+c,p[56+y]=a-c,p[8+y]=i+u,p[48+y]=i-u,p[16+y]=o+f,p[40+y]=o-f,p[24+y]=s+l,p[32+y]=s-l):(d=dctSqrt2*n[h+0]+8192>>14,p[0+y]=d,p[8+y]=d,p[16+y]=d,p[24+y]=d,p[32+y]=d,p[40+y]=d,p[48+y]=d,p[56+y]=d)}for(h=0;h<64;++h){var b=128+(p[h]+8>>4);r[h]=b<0?0:b>255?255:b}}for(var f=0;f<a;f++){for(var u=f<<3,c=0;c<8;c++)r.push(new Uint8Array(i));for(var d=0;d<n;d++){l(t.blocks[f][d],s,o);for(var h=0,m=d<<3,p=0;p<8;p++)for(var g=r[u+p],y=0;y<8;y++)g[m+y]=s[h++]}}return r}var JpegStreamReader=function(){function e(){_classCallCheck(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return _createClass(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(e){var t,r,n=0,a=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),a<t.v&&(a=t.v));var i=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/a);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),l=Math.ceil(Math.ceil(e.scanLines/8)*t.v/a),f=i*t.h,u=o*t.v,c=[],d=0;d<u;d++){for(var h=[],m=0;m<f;m++)h.push(new Int32Array(64));c.push(h)}t.blocksPerLine=s,t.blocksPerColumn=l,t.blocks=c}e.maxH=n,e.maxV=a,e.mcusPerLine=i,e.mcusPerColumn=o}var a,i,o=r();if(65496!==o)throw new Error("SOI not found");for(o=r();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(a=void 0,i=void 0,a=r(),i=e.subarray(t,t+a-2),t+=i.length,i);65504===o&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===o&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var l=r()+t-2;t<l;){var f=e[t++],u=new Int32Array(64);if(f>>4==0)for(var c=0;c<64;c++){u[dctZigZag[c]]=e[t++]}else{if(f>>4!=1)throw new Error("DQT: invalid table spec");for(var d=0;d<64;d++){u[dctZigZag[d]]=r()}}this.quantizationTables[15&f]=u}break;case 65472:case 65473:case 65474:r();for(var h={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},m=e[t++],p=void 0,g=0;g<m;g++){p=e[t];var y=e[t+1]>>4,b=15&e[t+1],v=e[t+2];h.componentsOrder.push(p),h.components[p]={h:y,v:b,quantizationIdx:v},t+=3}n(h),this.frames.push(h);break;case 65476:for(var w=r(),_=2;_<w;){for(var k=e[t++],T=new Uint8Array(16),x=0,S=0;S<16;S++,t++)T[S]=e[t],x+=T[S];for(var E=new Uint8Array(x),D=0;D<x;D++,t++)E[D]=e[t];_+=17+x,k>>4==0?this.huffmanTablesDC[15&k]=buildHuffmanTable(T,E):this.huffmanTablesAC[15&k]=buildHuffmanTable(T,E)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var M=e[t++],A=[],I=this.frames[0],P=0;P<M;P++){var C=I.components[e[t++]],O=e[t++];C.huffmanTableDC=this.huffmanTablesDC[O>>4],C.huffmanTableAC=this.huffmanTablesAC[15&O],A.push(C)}var R=e[t++],L=e[t++],B=e[t++],U=decodeScan(e,t,I,A,this.resetInterval,R,L,B>>4,15&B);t+=U;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=r()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,a=Object.keys(r);n<a.length;n++){var i=a[n];r[i].quantizationTable=this.quantizationTables[r[i].quantizationIdx],delete r[i].quantizationIdx}for(var o=e[0],s=o.components,l=o.componentsOrder,f=[],u=o.samplesPerLine,c=o.scanLines,d=0;d<l.length;d++){var h=s[l[d]];f.push({lines:buildComponentData(o,h),scaleX:h.h/o.maxH,scaleY:h.v/o.maxV})}for(var m=new Uint8Array(u*c*f.length),p=0,g=0;g<c;++g)for(var y=0;y<u;++y)for(var b=0;b<f.length;++b){var v=f[b];m[p]=v.lines[0|g*v.scaleY][0|y*v.scaleX],++p}return m}}]),e}(),JpegDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).reader=new JpegStreamReader,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return _createClass(r,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),r}(),inflate$2={},common={};function adler32$1(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}!function(e){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==_typeof(n))throw new TypeError(n+"must be non-object");for(var a in n)r(n,a)&&(e[a]=n[a])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),a);else for(var i=0;i<n;i++)e[a+i]=t[r+i]},flattenChunks:function(e){var t,r,n,a,i,o;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),a=0,t=0,r=e.length;t<r;t++)i=e[t],o.set(i,a),a+=i.length;return o}},a={arraySet:function(e,t,r,n,a){for(var i=0;i<n;i++)e[a+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(common);var adler32_1=adler32$1;function makeTable(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}var crcTable=makeTable();function crc32$1(e,t,r,n){var a=crcTable,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}var crc32_1=crc32$1,BAD$1=30,TYPE$1=12,inffast=function(e,t){var r,n,a,i,o,s,l,f,u,c,d,h,m,p,g,y,b,v,w,_,k,T,x,S,E;r=e.state,n=e.next_in,S=e.input,a=n+(e.avail_in-5),i=e.next_out,E=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),l=r.dmax,f=r.wsize,u=r.whave,c=r.wnext,d=r.window,h=r.hold,m=r.bits,p=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{m<15&&(h+=S[n++]<<m,m+=8,h+=S[n++]<<m,m+=8),v=p[h&y];t:for(;;){if(h>>>=w=v>>>24,m-=w,0===(w=v>>>16&255))E[i++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=p[(65535&v)+(h&(1<<w)-1)];continue t}if(32&w){r.mode=TYPE$1;break e}e.msg="invalid literal/length code",r.mode=BAD$1;break e}_=65535&v,(w&=15)&&(m<w&&(h+=S[n++]<<m,m+=8),_+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=S[n++]<<m,m+=8,h+=S[n++]<<m,m+=8),v=g[h&b];r:for(;;){if(h>>>=w=v>>>24,m-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=g[(65535&v)+(h&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=BAD$1;break e}if(k=65535&v,m<(w&=15)&&(h+=S[n++]<<m,(m+=8)<w&&(h+=S[n++]<<m,m+=8)),(k+=h&(1<<w)-1)>l){e.msg="invalid distance too far back",r.mode=BAD$1;break e}if(h>>>=w,m-=w,k>(w=i-o)){if((w=k-w)>u&&r.sane){e.msg="invalid distance too far back",r.mode=BAD$1;break e}if(T=0,x=d,0===c){if(T+=f-w,w<_){_-=w;do{E[i++]=d[T++]}while(--w);T=i-k,x=E}}else if(c<w){if(T+=f+c-w,(w-=c)<_){_-=w;do{E[i++]=d[T++]}while(--w);if(T=0,c<_){_-=w=c;do{E[i++]=d[T++]}while(--w);T=i-k,x=E}}}else if(T+=c-w,w<_){_-=w;do{E[i++]=d[T++]}while(--w);T=i-k,x=E}for(;_>2;)E[i++]=x[T++],E[i++]=x[T++],E[i++]=x[T++],_-=3;_&&(E[i++]=x[T++],_>1&&(E[i++]=x[T++]))}else{T=i-k;do{E[i++]=E[T++],E[i++]=E[T++],E[i++]=E[T++],_-=3}while(_>2);_&&(E[i++]=E[T++],_>1&&(E[i++]=E[T++]))}break}}break}}while(n<a&&i<s);n-=_=m>>3,h&=(1<<(m-=_<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=i<s?s-i+257:257-(i-s),r.hold=h,r.bits=m},utils$3=common,MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],inftrees=function(e,t,r,n,a,i,o,s){var l,f,u,c,d,h,m,p,g,y=s.bits,b=0,v=0,w=0,_=0,k=0,T=0,x=0,S=0,E=0,D=0,M=null,A=0,I=new utils$3.Buf16(MAXBITS+1),P=new utils$3.Buf16(MAXBITS+1),C=null,O=0;for(b=0;b<=MAXBITS;b++)I[b]=0;for(v=0;v<n;v++)I[t[r+v]]++;for(k=y,_=MAXBITS;_>=1&&0===I[_];_--);if(k>_&&(k=_),0===_)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(w=1;w<_&&0===I[w];w++);for(k<w&&(k=w),S=1,b=1;b<=MAXBITS;b++)if(S<<=1,(S-=I[b])<0)return-1;if(S>0&&(e===CODES$1||1!==_))return-1;for(P[1]=0,b=1;b<MAXBITS;b++)P[b+1]=P[b]+I[b];for(v=0;v<n;v++)0!==t[r+v]&&(o[P[t[r+v]]++]=v);if(e===CODES$1?(M=C=o,h=19):e===LENS$1?(M=lbase,A-=257,C=lext,O-=257,h=256):(M=dbase,C=dext,h=-1),D=0,v=0,b=w,d=i,T=k,x=0,u=-1,c=(E=1<<k)-1,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;for(;;){m=b-x,o[v]<h?(p=0,g=o[v]):o[v]>h?(p=C[O+o[v]],g=M[A+o[v]]):(p=96,g=0),l=1<<b-x,w=f=1<<T;do{a[d+(D>>x)+(f-=l)]=m<<24|p<<16|g|0}while(0!==f);for(l=1<<b-1;D&l;)l>>=1;if(0!==l?(D&=l-1,D+=l):D=0,v++,0==--I[b]){if(b===_)break;b=t[r+o[v]]}if(b>k&&(D&c)!==u){for(0===x&&(x=k),d+=w,S=1<<(T=b-x);T+x<_&&!((S-=I[T+x])<=0);)T++,S<<=1;if(E+=1<<T,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;a[u=D&c]=k<<24|T<<16|d-i|0}}return 0!==D&&(a[d+D]=b-x<<24|64<<16|0),s.bits=k,0},utils$2=common,adler32=adler32_1,crc32=crc32_1,inflate_fast=inffast,inflate_table=inftrees,CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils$2.Buf16(320),this.work=new utils$2.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils$2.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils$2.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var r,n;return e?(n=new InflateState,e.state=n,n.window=null,(r=inflateReset2(e,t))!==Z_OK&&(e.state=null),r):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new utils$2.Buf32(512),distfix=new utils$2.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new utils$2.Buf8(i.wsize)),n>=i.wsize?(utils$2.arraySet(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),utils$2.arraySet(i.window,t,r-n,a,i.wnext),(n-=a)?(utils$2.arraySet(i.window,t,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}function inflate$1(e,t){var r,n,a,i,o,s,l,f,u,c,d,h,m,p,g,y,b,v,w,_,k,T,x,S,E=0,D=new utils$2.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;(r=e.state).mode===TYPE&&(r.mode=TYPEDO),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,u=r.bits,c=s,d=l,T=Z_OK;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;u<16;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(2&r.wrap&&35615===f){r.check=0,D[0]=255&f,D[1]=f>>>8&255,r.check=crc32(r.check,D,2,0),f=0,u=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=BAD;break}if((15&f)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(u-=4,k=8+(15&(f>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=BAD;break}r.dmax=1<<k,e.adler=r.check=1,r.mode=512&f?DICTID:TYPE,f=0,u=0;break;case FLAGS:for(;u<16;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(r.flags=f,(255&r.flags)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=BAD;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32(r.check,D,2,0)),f=0,u=0,r.mode=TIME;case TIME:for(;u<32;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}r.head&&(r.head.time=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,D[2]=f>>>16&255,D[3]=f>>>24&255,r.check=crc32(r.check,D,4,0)),f=0,u=0,r.mode=OS;case OS:for(;u<16;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32(r.check,D,2,0)),f=0,u=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;u<16;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32(r.check,D,2,0)),f=0,u=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&((h=r.length)>s&&(h=s),h&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),utils$2.arraySet(r.head.extra,n,i,h,k)),512&r.flags&&(r.check=crc32(r.check,n,h,i)),s-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(2048&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;u<16;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(f!==(65535&r.check)){e.msg="header crc mismatch",r.mode=BAD;break}f=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE;break;case DICTID:for(;u<32;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}e.adler=r.check=zswap32(f),f=0,u=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=u,Z_NEED_DICT;e.adler=r.check=1,r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(r.last){f>>>=7&u,u-=7&u,r.mode=CHECK;break}for(;u<3;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}switch(r.last=1&f,u-=1,3&(f>>>=1)){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){f>>>=2,u-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD}f>>>=2,u-=2;break;case STORED:for(f>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD;break}if(r.length=65535&f,f=0,u=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(h=r.length){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;utils$2.arraySet(a,n,i,h,o),s-=h,i+=h,l-=h,o+=h,r.length-=h;break}r.mode=TYPE;break;case TABLE:for(;u<14;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(r.nlen=257+(31&f),f>>>=5,u-=5,r.ndist=1+(31&f),f>>>=5,u-=5,r.ncode=4+(15&f),f>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;u<3;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}r.lens[M[r.have++]]=7&f,f>>>=3,u-=3}for(;r.have<19;)r.lens[M[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},T=inflate_table(CODES,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,T){e.msg="invalid code lengths set",r.mode=BAD;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;y=(E=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,b=65535&E,!((g=E>>>24)<=u);){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(b<16)f>>>=g,u-=g,r.lens[r.have++]=b;else{if(16===b){for(S=g+2;u<S;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(f>>>=g,u-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=BAD;break}k=r.lens[r.have-1],h=3+(3&f),f>>>=2,u-=2}else if(17===b){for(S=g+3;u<S;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}u-=g,k=0,h=3+(7&(f>>>=g)),f>>>=3,u-=3}else{for(S=g+7;u<S;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}u-=g,k=0,h=11+(127&(f>>>=g)),f>>>=7,u-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD;break}for(;h--;)r.lens[r.have++]=k}}if(r.mode===BAD)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=BAD;break}if(r.lenbits=9,x={bits:r.lenbits},T=inflate_table(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,T){e.msg="invalid literal/lengths set",r.mode=BAD;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},T=inflate_table(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,T){e.msg="invalid distances set",r.mode=BAD;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=u,inflate_fast(e,d),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,u=r.bits,r.mode===TYPE&&(r.back=-1);break}for(r.back=0;y=(E=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,b=65535&E,!((g=E>>>24)<=u);){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(y&&0==(240&y)){for(v=g,w=y,_=b;y=(E=r.lencode[_+((f&(1<<v+w)-1)>>v)])>>>16&255,b=65535&E,!(v+(g=E>>>24)<=u);){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}f>>>=v,u-=v,r.back+=v}if(f>>>=g,u-=g,r.back+=g,r.length=b,0===y){r.mode=LIT;break}if(32&y){r.back=-1,r.mode=TYPE;break}if(64&y){e.msg="invalid literal/length code",r.mode=BAD;break}r.extra=15&y,r.mode=LENEXT;case LENEXT:if(r.extra){for(S=r.extra;u<S;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;y=(E=r.distcode[f&(1<<r.distbits)-1])>>>16&255,b=65535&E,!((g=E>>>24)<=u);){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(0==(240&y)){for(v=g,w=y,_=b;y=(E=r.distcode[_+((f&(1<<v+w)-1)>>v)])>>>16&255,b=65535&E,!(v+(g=E>>>24)<=u);){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}f>>>=v,u-=v,r.back+=v}if(f>>>=g,u-=g,r.back+=g,64&y){e.msg="invalid distance code",r.mode=BAD;break}r.offset=b,r.extra=15&y,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(S=r.extra;u<S;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD;break}r.mode=MATCH;case MATCH:if(0===l)break e;if(h=d-l,r.offset>h){if((h=r.offset-h)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=a,m=o-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do{a[o++]=p[m++]}while(--h);0===r.length&&(r.mode=LEN);break;case LIT:if(0===l)break e;a[o++]=r.length,l--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;u<32;){if(0===s)break e;s--,f|=n[i++]<<u,u+=8}if(d-=l,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?crc32(r.check,a,d,o-d):adler32(r.check,a,d,o-d)),d=l,(r.flags?f:zswap32(f))!==r.check){e.msg="incorrect data check",r.mode=BAD;break}f=0,u=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;u<32;){if(0===s)break e;s--,f+=n[i++]<<u,u+=8}if(f!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=BAD;break}f=0,u=0}r.mode=DONE;case DONE:T=Z_STREAM_END;break e;case BAD:T=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,d-e.avail_out),c-=e.avail_in,d-=e.avail_out,e.total_in+=c,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?crc32(r.check,a,d,e.next_out-d):adler32(r.check,a,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===c&&0===d||t===Z_FINISH)&&T===Z_OK&&(T=Z_BUF_ERROR),T}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?Z_STREAM_ERROR:(r.head=t,t.done=!1,Z_OK):Z_STREAM_ERROR}function inflateSetDictionary(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==DICT?Z_STREAM_ERROR:r.mode===DICT&&adler32(1,t,n,0)!==r.check?Z_DATA_ERROR:updatewindow(e,t,n,n)?(r.mode=MEM,Z_MEM_ERROR):(r.havedict=1,Z_OK):Z_STREAM_ERROR}inflate$2.inflateReset=inflateReset,inflate$2.inflateReset2=inflateReset2,inflate$2.inflateResetKeep=inflateResetKeep,inflate$2.inflateInit=inflateInit,inflate$2.inflateInit2=inflateInit2,inflate$2.inflate=inflate$1,inflate$2.inflateEnd=inflateEnd,inflate$2.inflateGetHeader=inflateGetHeader,inflate$2.inflateSetDictionary=inflateSetDictionary,inflate$2.inflateInfo="pako inflate (from Nodeca project)";var strings$1={},utils$1=common,STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(e){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils$1.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;function buf2binstring(e,t){if(t<65534&&(e.subarray&&STR_APPLY_UIA_OK||!e.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils$1.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}_utf8len[254]=_utf8len[254]=1,strings$1.string2buf=function(e){var t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new utils$1.Buf8(s),i=0,a=0;i<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},strings$1.buf2binstring=function(e){return buf2binstring(e,e.length)},strings$1.binstring2buf=function(e){for(var t=new utils$1.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},strings$1.buf2string=function(e,t){var r,n,a,i,o=t||e.length,s=new Array(2*o);for(n=0,r=0;r<o;)if((a=e[r++])<128)s[n++]=a;else if((i=_utf8len[a])>4)s[n++]=65533,r+=i-1;else{for(a&=2===i?31:3===i?15:7;i>1&&r<o;)a=a<<6|63&e[r++],i--;i>1?s[n++]=65533:a<65536?s[n++]=a:(a-=65536,s[n++]=55296|a>>10&1023,s[n++]=56320|1023&a)}return buf2binstring(s,n)},strings$1.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+_utf8len[e[r]]>t?r:t};var constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream$1(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream$1;function GZheader$1(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader$1,zlib_inflate=inflate$2,utils=common,strings=strings$1,c=constants,msg=messages,ZStream=zstream,GZheader=gzheader,toString=Object.prototype.toString;function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var r=zlib_inflate.inflateInit2(this.strm,t.windowBits);if(r!==c.Z_OK)throw new Error(msg[r]);if(this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=zlib_inflate.inflateSetDictionary(this.strm,t.dictionary))!==c.Z_OK))throw new Error(msg[r])}function inflate(e,t){var r=new Inflate(t);if(r.push(e,!0),r.err)throw r.msg||msg[r.err];return r.result}Inflate.prototype.push=function(e,t){var r,n,a,i,o,s=this.strm,l=this.options.chunkSize,f=this.options.dictionary,u=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof e?s.input=strings.binstring2buf(e):"[object ArrayBuffer]"===toString.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new utils.Buf8(l),s.next_out=0,s.avail_out=l),(r=zlib_inflate.inflate(s,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&f&&(r=zlib_inflate.inflateSetDictionary(this.strm,f)),r===c.Z_BUF_ERROR&&!0===u&&(r=c.Z_OK,u=!1),r!==c.Z_STREAM_END&&r!==c.Z_OK)return this.onEnd(r),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&r!==c.Z_STREAM_END&&(0!==s.avail_in||n!==c.Z_FINISH&&n!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(a=strings.utf8border(s.output,s.next_out),i=s.next_out-a,o=strings.buf2string(s.output,a),s.next_out=i,s.avail_out=l-i,i&&utils.arraySet(s.output,s.output,a,i,0),this.onData(o)):this.onData(utils.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(u=!0)}while((s.avail_in>0||0===s.avail_out)&&r!==c.Z_STREAM_END);return r===c.Z_STREAM_END&&(n=c.Z_FINISH),n===c.Z_FINISH?(r=zlib_inflate.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c.Z_OK):n!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),s.avail_out=0,!0)},Inflate.prototype.onData=function(e){this.chunks.push(e)},Inflate.prototype.onEnd=function(e){e===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var inflate_2=inflate,DeflateDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){return inflate_2(new Uint8Array(e)).buffer}}]),r}(),PackbitsDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var a=t.getInt8(n);if(a<0){var i=t.getUint8(n+1);a=-a;for(var o=0;o<=a;++o)r.push(i);n+=1}else{for(var s=0;s<=a;++s)r.push(t.getUint8(n+s+1));n+=a+1}}return new Uint8Array(r).buffer}}]),r}(),LercDecode={exports:{}},module;module=LercDecode,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var e,t,r,n,a,i,o,s,l,f,u,c,d,h,m,p,g=(e={defaultNoDataValue:-34027999387901484e22,decode:function(i,o){var s=(o=o||{}).encodedMaskData||null===o.encodedMaskData,l=a(i,o.inputOffset||0,s),f=null!==o.noDataValue?o.noDataValue:e.defaultNoDataValue,u=t(l,o.pixelType||Float32Array,o.encodedMaskData,f,o.returnMask),c={width:l.width,height:l.height,pixelData:u.resultPixels,minValue:u.minValue,maxValue:l.pixels.maxValue,noDataValue:f};return u.resultMask&&(c.maskData=u.resultMask),o.returnEncodedMask&&l.mask&&(c.encodedMaskData=l.mask.bitset?l.mask.bitset:null),o.returnFileInfo&&(c.fileInfo=r(l),o.computeUsedBitDepths&&(c.fileInfo.bitDepths=n(l))),c}},t=function(e,t,r,n,a){var o,s,l,f=0,u=e.pixels.numBlocksX,c=e.pixels.numBlocksY,d=Math.floor(e.width/u),h=Math.floor(e.height/c),m=2*e.maxZError,p=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),a&&r&&(l=new Uint8Array(e.width*e.height));for(var g,y,b=new Float32Array(d*h),v=0;v<=c;v++){var w=v!==c?h:e.height%c;if(0!==w)for(var _=0;_<=u;_++){var k=_!==u?d:e.width%u;if(0!==k){var T,x,S,E,D=v*e.width*h+_*d,M=e.width-k,A=e.pixels.blocks[f];if(A.encoding<2?(0===A.encoding?T=A.rawData:(i(A.stuffedData,A.bitsPerPixel,A.numValidPixels,A.offset,m,b,e.pixels.maxValue),T=b),x=0):S=2===A.encoding?0:A.offset,r)for(y=0;y<w;y++){for(7&D&&(E=r[D>>3],E<<=7&D),g=0;g<k;g++)7&D||(E=r[D>>3]),128&E?(l&&(l[D]=1),p=p>(o=A.encoding<2?T[x++]:S)?o:p,s[D++]=o):(l&&(l[D]=0),s[D++]=n),E<<=1;D+=M}else if(A.encoding<2)for(y=0;y<w;y++){for(g=0;g<k;g++)p=p>(o=T[x++])?o:p,s[D++]=o;D+=M}else for(p=p>S?S:p,y=0;y<w;y++){for(g=0;g<k;g++)s[D++]=S;D+=M}if(1===A.encoding&&x!==A.numValidPixels)throw"Block and Mask do not match";f++}}}return{resultPixels:s,resultMask:l,minValue:p}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},n=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var a=e.pixels.blocks[n];0===a.encoding?r.float32=!0:1===a.encoding?r[a.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},a=function(e,t,r){var n={},a=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,a),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var i=new DataView(e,t,24);if(n.fileVersion=i.getInt32(0,!0),n.imageType=i.getInt32(4,!0),n.height=i.getUint32(8,!0),n.width=i.getUint32(12,!0),n.maxZError=i.getFloat64(16,!0),t+=24,!r)if(i=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=i.getUint32(0,!0),n.mask.numBlocksX=i.getUint32(4,!0),n.mask.numBytes=i.getUint32(8,!0),n.mask.maxValue=i.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(i=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),l=2,f=0;do{if(s>0)for(;s--;)o[f++]=i.getUint8(l++);else{var u=i.getUint8(l++);for(s=-s;s--;)o[f++]=u}s=i.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==s||f<o.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));i=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=i.getUint32(0,!0),n.pixels.numBlocksX=i.getUint32(4,!0),n.pixels.numBytes=i.getUint32(8,!0),n.pixels.maxValue=i.getFloat32(12,!0),t+=16;var c=n.pixels.numBlocksX,d=n.pixels.numBlocksY,h=c+(n.width%c>0?1:0),m=d+(n.height%d>0?1:0);n.pixels.blocks=new Array(h*m);for(var p=0,g=0;g<m;g++)for(var y=0;y<h;y++){var b=0,v=e.byteLength-t;i=new DataView(e,t,Math.min(10,v));var w={};n.pixels.blocks[p++]=w;var _=i.getUint8(0);if(b++,w.encoding=63&_,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==_&&2!==_){if(_>>=6,w.offsetType=_,2===_)w.offset=i.getInt8(1),b++;else if(1===_)w.offset=i.getInt16(1,!0),b+=2;else{if(0!==_)throw"Invalid block offset type";w.offset=i.getFloat32(1,!0),b+=4}if(1===w.encoding)if(_=i.getUint8(b),b++,w.bitsPerPixel=63&_,_>>=6,w.numValidPixelsType=_,2===_)w.numValidPixels=i.getUint8(b),b++;else if(1===_)w.numValidPixels=i.getUint16(b,!0),b+=2;else{if(0!==_)throw"Invalid valid pixel count type";w.numValidPixels=i.getUint32(b,!0),b+=4}}var k;if(t+=b,3!==w.encoding)if(0===w.encoding){var T=(n.pixels.numBytes-1)/4;if(T!==Math.floor(T))throw"uncompressed block has invalid length";k=new ArrayBuffer(4*T),new Uint8Array(k).set(new Uint8Array(e,t,4*T));var x=new Float32Array(k);w.rawData=x,t+=4*T}else if(1===w.encoding){var S=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),E=Math.ceil(S/4);k=new ArrayBuffer(4*E),new Uint8Array(k).set(new Uint8Array(e,t,S)),w.stuffedData=new Uint32Array(k),t+=S}}else t++}return n.eofOffset=t,n},i=function(e,t,r,n,a,i,o){var s,l,f,u=(1<<t)-1,c=0,d=0,h=Math.ceil((o-n)/a),m=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*m,s=0;s<r;s++){if(0===d&&(f=e[c++],d=32),d>=t)l=f>>>d-t&u,d-=t;else{var p=t-d;l=(f&u)<<p&u,l+=(f=e[c++])>>>(d=32-p)}i[s]=l<h?n+l*a:o}return i},e),y=(o=function(e,t,r,n,a,i,o,s){var l,f,u,c,d,h=(1<<r)-1,m=0,p=0,g=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*g,a)for(l=0;l<n;l++)0===p&&(u=e[m++],p=32),p>=r?(f=u>>>p-r&h,p-=r):(f=(u&h)<<(c=r-p)&h,f+=(u=e[m++])>>>(p=32-c)),t[l]=a[f];else for(d=Math.ceil((s-i)/o),l=0;l<n;l++)0===p&&(u=e[m++],p=32),p>=r?(f=u>>>p-r&h,p-=r):(f=(u&h)<<(c=r-p)&h,f+=(u=e[m++])>>>(p=32-c)),t[l]=f<d?i+f*o:s},s=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,u=0,c=0,d=0,h=[],m=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*m;var p=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===c&&(o=e[l++],c=32),c>=t?(d=o>>>c-t&s,c-=t):(d=(o&s)<<(u=t-c)&s,d+=(o=e[l++])>>>(c=32-u)),h[f]=d<p?n+d*a:i;return h.unshift(n),h},l=function(e,t,r,n,a,i,o,s){var l,f,u,c,d=(1<<r)-1,h=0,m=0,p=0;if(a)for(l=0;l<n;l++)0===m&&(u=e[h++],m=32,p=0),m>=r?(f=u>>>p&d,m-=r,p+=r):(f=u>>>p&d,m=32-(c=r-m),f|=((u=e[h++])&(1<<c)-1)<<r-c,p=c),t[l]=a[f];else{var g=Math.ceil((s-i)/o);for(l=0;l<n;l++)0===m&&(u=e[h++],m=32,p=0),m>=r?(f=u>>>p&d,m-=r,p+=r):(f=u>>>p&d,m=32-(c=r-m),f|=((u=e[h++])&(1<<c)-1)<<r-c,p=c),t[l]=f<g?i+f*o:s}return t},f=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,u=0,c=0,d=0,h=0,m=[],p=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===c&&(o=e[l++],c=32,h=0),c>=t?(d=o>>>h&s,c-=t,h+=t):(d=o>>>h&s,c=32-(u=t-c),d|=((o=e[l++])&(1<<u)-1)<<t-u,h=u),m[f]=d<p?n+d*a:i;return m.unshift(n),m},u=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,u=0,c=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*c,a=0;a<n;a++)0===u&&(o=e[f++],u=32),u>=r?(i=o>>>u-r&l,u-=r):(i=(o&l)<<(s=r-u)&l,i+=(o=e[f++])>>>(u=32-s)),t[a]=i;return t},c=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,u=0,c=0;for(a=0;a<n;a++)0===u&&(o=e[f++],u=32,c=0),u>=r?(i=o>>>c&l,u-=r,c+=r):(i=o>>>c&l,u=32-(s=r-u),i|=((o=e[f++])&(1<<s)-1)<<r-s,c=s),t[a]=i;return t},d={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,a=Math.floor(n/2),i=0;a;){var o=a>=359?359:a;a-=o;do{t+=e[i++]<<8,r+=t+=e[i++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[i]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),a={};if(a.fileIdentifierString=String.fromCharCode.apply(null,n),0!==a.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+a.fileIdentifierString;r+=6;var i,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(a.fileVersion=s,r+=4,s>=3&&(a.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),a.height=o.getUint32(0,!0),a.width=o.getUint32(4,!0),r+=8,s>=4?(a.numDims=o.getUint32(8,!0),r+=4):a.numDims=1,o=new DataView(e,r,40),a.numValidPixel=o.getUint32(0,!0),a.microBlockSize=o.getInt32(4,!0),a.blobSize=o.getInt32(8,!0),a.imageType=o.getInt32(12,!0),a.maxZError=o.getFloat64(16,!0),a.zMin=o.getFloat64(24,!0),a.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=a,t.ptr=r,s>=3&&(i=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-i,a.blobSize-14))!==a.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),a=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(e,t.ptr,n,a),o=this.readSubArray(e,t.ptr+a,n,a);t.ptr+=2*a;var s,l=!0;for(s=0;s<r.numDims;s++)if(i[s]!==o[s]){l=!1;break}return r.minValues=i,r.maxValues=o,l},readSubArray:function(e,t,r,n){var a;if(r===Uint8Array)a=new Uint8Array(e,t,n);else{var i=new ArrayBuffer(n);new Uint8Array(i).set(new Uint8Array(e,t,n)),a=new r(i)}return a},readMask:function(e,t){var r,n,a=t.ptr,i=t.headerInfo,o=i.width*i.height,s=i.numValidPixel,l=new DataView(e,a,4),f={};if(f.numBytes=l.getUint32(0,!0),a+=4,(0===s||o===s)&&0!==f.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(o/8)),f.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,a+=f.numBytes;else if(f.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var u=(l=new DataView(e,a,f.numBytes)).getInt16(0,!0),c=2,d=0,h=0;do{if(u>0)for(;u--;)r[d++]=l.getUint8(c++);else for(h=l.getUint8(c++),u=-u;u--;)r[d++]=h;u=l.getInt16(c,!0),c+=2}while(c<f.numBytes);if(-32768!==u||d<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(o);var m=0,p=0;for(p=0;p<o;p++)7&p?(m=r[p>>3],m<<=7&p):m=r[p>>3],128&m&&(n[p]=1);t.pixels.resultMask=n,f.bitset=r,a+=f.numBytes}return t.ptr=a,t.mask=f,!0},readDataOneSweep:function(e,t,r,n){var a,i=t.ptr,o=t.headerInfo,s=o.numDims,l=o.width*o.height,f=o.imageType,u=o.numValidPixel*d.getDataTypeSize(f)*s,c=t.pixels.resultMask;if(r===Uint8Array)a=new Uint8Array(e,i,u);else{var h=new ArrayBuffer(u);new Uint8Array(h).set(new Uint8Array(e,i,u)),a=new r(h)}if(a.length===l*s)t.pixels.resultPixels=n?d.swapDimensionOrder(a,l,s,r,!0):a;else{t.pixels.resultPixels=new r(l*s);var m=0,p=0,g=0,y=0;if(s>1){if(n){for(p=0;p<l;p++)if(c[p])for(y=p,g=0;g<s;g++,y+=l)t.pixels.resultPixels[y]=a[m++]}else for(p=0;p<l;p++)if(c[p])for(y=p*s,g=0;g<s;g++)t.pixels.resultPixels[y+g]=a[m++]}else for(p=0;p<l;p++)c[p]&&(t.pixels.resultPixels[p]=a[m++])}return i+=u,t.ptr=i,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var a=n.getInt32(4,!0),i=n.getInt32(8,!0),o=n.getInt32(12,!0);if(i>=o)return!1;var s=new Uint32Array(o-i);d.decodeBits(e,t,s);var l,f,u,c,m=[];for(l=i;l<o;l++)m[f=l-(l<a?0:a)]={first:s[l-i],second:null};var p=e.byteLength-t.ptr,g=Math.ceil(p/4),y=new ArrayBuffer(4*g);new Uint8Array(y).set(new Uint8Array(e,t.ptr,p));var b,v=new Uint32Array(y),w=0,_=0;for(b=v[0],l=i;l<o;l++)(c=m[f=l-(l<a?0:a)].first)>0&&(m[f].second=b<<w>>>32-c,32-w>=c?32===(w+=c)&&(w=0,b=v[++_]):(w+=c-32,b=v[++_],m[f].second|=b>>>32-w));var k=0,T=0,x=new h;for(l=0;l<m.length;l++)void 0!==m[l]&&(k=Math.max(k,m[l].first));T=k>=r?r:k;var S,E,D,M,A,I=[];for(l=i;l<o;l++)if((c=m[f=l-(l<a?0:a)].first)>0)if(S=[c,f],c<=T)for(E=m[f].second<<T-c,D=1<<T-c,u=0;u<D;u++)I[E|u]=S;else for(E=m[f].second,A=x,M=c-1;M>=0;M--)E>>>M&1?(A.right||(A.right=new h),A=A.right):(A.left||(A.left=new h),A=A.left),0!==M||A.val||(A.val=S[1]);return{decodeLut:I,numBitsLUTQick:T,numBitsLUT:k,tree:x,stuffedData:v,srcPtr:_,bitPos:w}},readHuffman:function(e,t,r,n){var a,i,o,s,l,f,u,c,h,m=t.headerInfo.numDims,p=t.headerInfo.height,g=t.headerInfo.width,y=g*p,b=this.readHuffmanTree(e,t),v=b.decodeLut,w=b.tree,_=b.stuffedData,k=b.srcPtr,T=b.bitPos,x=b.numBitsLUTQick,S=b.numBitsLUT,E=0===t.headerInfo.imageType?128:0,D=t.pixels.resultMask,M=0;T>0&&(k++,T=0);var A,I=_[k],P=1===t.encodeMode,C=new r(y*m),O=C;if(m<2||P){for(A=0;A<m;A++)if(m>1&&(O=new r(C.buffer,y*A,y),M=0),t.headerInfo.numValidPixel===g*p)for(c=0,f=0;f<p;f++)for(u=0;u<g;u++,c++){if(i=0,l=s=I<<T>>>32-x,32-T<x&&(l=s|=_[k+1]>>>64-T-x),v[l])i=v[l][1],T+=v[l][0];else for(l=s=I<<T>>>32-S,32-T<S&&(l=s|=_[k+1]>>>64-T-S),a=w,h=0;h<S;h++)if(!(a=s>>>S-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=_[++k]),o=i-E,P?(o+=u>0?M:f>0?O[c-g]:M,o&=255,O[c]=o,M=o):O[c]=o}else for(c=0,f=0;f<p;f++)for(u=0;u<g;u++,c++)if(D[c]){if(i=0,l=s=I<<T>>>32-x,32-T<x&&(l=s|=_[k+1]>>>64-T-x),v[l])i=v[l][1],T+=v[l][0];else for(l=s=I<<T>>>32-S,32-T<S&&(l=s|=_[k+1]>>>64-T-S),a=w,h=0;h<S;h++)if(!(a=s>>>S-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=_[++k]),o=i-E,P?(u>0&&D[c-1]?o+=M:f>0&&D[c-g]?o+=O[c-g]:o+=M,o&=255,O[c]=o,M=o):O[c]=o}}else for(c=0,f=0;f<p;f++)for(u=0;u<g;u++)if(c=f*g+u,!D||D[c])for(A=0;A<m;A++,c+=y){if(i=0,l=s=I<<T>>>32-x,32-T<x&&(l=s|=_[k+1]>>>64-T-x),v[l])i=v[l][1],T+=v[l][0];else for(l=s=I<<T>>>32-S,32-T<S&&(l=s|=_[k+1]>>>64-T-S),a=w,h=0;h<S;h++)if(!(a=s>>>S-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=_[++k]),o=i-E,O[c]=o}t.ptr=t.ptr+4*(k+1)+(T>0?4:0),t.pixels.resultPixels=C,m>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(C,y,m,r))},decodeBits:function(e,t,r,n,a){var i=t.headerInfo,d=i.fileVersion,h=0,m=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,p=new DataView(e,t.ptr,m),g=p.getUint8(0);h++;var y=g>>6,b=0===y?4:3-y,v=(32&g)>0,w=31&g,_=0;if(1===b)_=p.getUint8(h),h++;else if(2===b)_=p.getUint16(h,!0),h+=2;else{if(4!==b)throw"Invalid valid pixel count type";_=p.getUint32(h,!0),h+=4}var k,T,x,S,E,D,M,A,I,P=2*i.maxZError,C=i.numDims>1?i.maxValues[a]:i.zMax;if(v){for(t.counter.lut++,A=p.getUint8(h),h++,S=Math.ceil((A-1)*w/8),E=Math.ceil(S/4),T=new ArrayBuffer(4*E),x=new Uint8Array(T),t.ptr+=h,x.set(new Uint8Array(e,t.ptr,S)),M=new Uint32Array(T),t.ptr+=S,I=0;A-1>>>I;)I++;S=Math.ceil(_*I/8),E=Math.ceil(S/4),T=new ArrayBuffer(4*E),(x=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,S)),k=new Uint32Array(T),t.ptr+=S,D=d>=3?f(M,w,A-1,n,P,C):s(M,w,A-1,n,P,C),d>=3?l(k,r,I,_,D):o(k,r,I,_,D)}else t.counter.bitstuffer++,I=w,t.ptr+=h,I>0&&(S=Math.ceil(_*I/8),E=Math.ceil(S/4),T=new ArrayBuffer(4*E),(x=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,S)),k=new Uint32Array(T),t.ptr+=S,d>=3?null==n?c(k,r,I,_):l(k,r,I,_,!1,n,P,C):null==n?u(k,r,I,_):o(k,r,I,_,!1,n,P,C))},readTiles:function(e,t,r,n){var a=t.headerInfo,i=a.width,o=a.height,s=i*o,l=a.microBlockSize,f=a.imageType,u=d.getDataTypeSize(f),c=Math.ceil(i/l),h=Math.ceil(o/l);t.pixels.numBlocksY=h,t.pixels.numBlocksX=c,t.pixels.ptr=0;var m,p,g,y,b,v,w,_,k,T,x=0,S=0,E=0,D=0,M=0,A=0,I=0,P=0,C=0,O=0,R=0,L=0,B=0,U=0,N=0,z=new r(l*l),G=o%l||l,Z=i%l||l,$=a.numDims,V=t.pixels.resultMask,F=t.pixels.resultPixels,j=a.fileVersion>=5?14:15,K=a.zMax;for(E=0;E<h;E++)for(M=E!==h-1?l:G,D=0;D<c;D++)for(O=E*i*l+D*l,R=i-(A=D!==c-1?l:Z),_=0;_<$;_++){if($>1?(T=F,O=E*i*l+D*l,F=new r(t.pixels.resultPixels.buffer,s*_*u,s),K=a.maxValues[_]):T=null,I=e.byteLength-t.ptr,p={},N=0,P=(m=new DataView(e,t.ptr,Math.min(10,I))).getUint8(0),N++,k=a.fileVersion>=5?4&P:0,C=P>>6&255,(P>>2&j)!=(D*l>>3&j))throw"integrity issue";if(k&&0===_)throw"integrity issue";if((b=3&P)>3)throw t.ptr+=N,"Invalid block encoding ("+b+")";if(2!==b)if(0===b){if(k)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=N,L=(L=M*A*u)<(B=e.byteLength-t.ptr)?L:B,g=new ArrayBuffer(L%u==0?L:L+u-L%u),new Uint8Array(g).set(new Uint8Array(e,t.ptr,L)),y=new r(g),U=0,V)for(x=0;x<M;x++){for(S=0;S<A;S++)V[O]&&(F[O]=y[U++]),O++;O+=R}else for(x=0;x<M;x++){for(S=0;S<A;S++)F[O++]=y[U++];O+=R}t.ptr+=U*u}else if(v=d.getDataTypeUsed(k&&f<6?4:f,C),w=d.getOnePixel(p,N,v,m),N+=d.getDataTypeSize(v),3===b)if(t.ptr+=N,t.counter.constantoffset++,V)for(x=0;x<M;x++){for(S=0;S<A;S++)V[O]&&(F[O]=k?Math.min(K,T[O]+w):w),O++;O+=R}else for(x=0;x<M;x++){for(S=0;S<A;S++)F[O]=k?Math.min(K,T[O]+w):w,O++;O+=R}else if(t.ptr+=N,d.decodeBits(e,t,z,w,_),N=0,k)if(V)for(x=0;x<M;x++){for(S=0;S<A;S++)V[O]&&(F[O]=z[N++]+T[O]),O++;O+=R}else for(x=0;x<M;x++){for(S=0;S<A;S++)F[O]=z[N++]+T[O],O++;O+=R}else if(V)for(x=0;x<M;x++){for(S=0;S<A;S++)V[O]&&(F[O]=z[N++]),O++;O+=R}else for(x=0;x<M;x++){for(S=0;S<A;S++)F[O++]=z[N++];O+=R}else{if(k)if(V)for(x=0;x<M;x++)for(S=0;S<A;S++)V[O]&&(F[O]=T[O]),O++;else for(x=0;x<M;x++)for(S=0;S<A;S++)F[O]=T[O],O++;t.counter.constant++,t.ptr+=N}}$>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(t.pixels.resultPixels,s,$,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:d.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,a=e.headerInfo.maxValues,i=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,s=0,l=0,f=0,u=e.pixels.resultMask,c=e.pixels.resultPixels;if(u)if(i>1){if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)u[l]&&(c[f+l]=r);else for(l=0;l<o;l++)if(u[l])for(f=l*i,s=0;s<i;s++)c[f+i]=a[s]}else for(l=0;l<o;l++)u[l]&&(c[l]=r);else if(i>1&&n!==r)if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)c[f+l]=r;else for(l=0;l<o;l++)for(f=l*i,s=0;s<i;s++)c[f+s]=a[s];else for(l=0;l<o*i;l++)c[l]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var a=0;switch(r){case 0:a=n.getInt8(t);break;case 1:a=n.getUint8(t);break;case 2:a=n.getInt16(t,!0);break;case 3:a=n.getUint16(t,!0);break;case 4:a=n.getInt32(t,!0);break;case 5:a=n.getUInt32(t,!0);break;case 6:a=n.getFloat32(t,!0);break;case 7:a=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return a},swapDimensionOrder:function(e,t,r,n,a){var i=0,o=0,s=0,l=0,f=e;if(r>1)if(f=new n(t*r),a)for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[l]=e[o++];else for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[o++]=e[l];return f}},h=function(e,t,r){this.val=e,this.left=t,this.right=r},{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,a={};a.ptr=t.inputOffset||0,a.pixels={},d.readHeaderInfo(e,a);var i=a.headerInfo,o=i.fileVersion,s=d.getDataTypeArray(i.imageType);if(o>5)throw"unsupported lerc version 2."+o;d.readMask(e,a),i.numValidPixel===i.width*i.height||a.pixels.resultMask||(a.pixels.resultMask=t.maskData);var l=i.width*i.height;a.pixels.resultPixels=new s(l*i.numDims),a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var f,u=!t.returnPixelInterleavedDims;if(0!==i.numValidPixel)if(i.zMax===i.zMin)d.constructConstantSurface(a,u);else if(o>=4&&d.checkMinMaxRanges(e,a))d.constructConstantSurface(a,u);else{var c=new DataView(e,a.ptr,2),h=c.getUint8(0);if(a.ptr++,h)d.readDataOneSweep(e,a,s,u);else if(o>1&&i.imageType<=1&&Math.abs(i.maxZError-.5)<1e-5){var m=c.getUint8(1);if(a.ptr++,a.encodeMode=m,m>2||o<4&&m>1)throw"Invalid Huffman flag "+m;m?d.readHuffman(e,a,s,u):d.readTiles(e,a,s,u)}else d.readTiles(e,a,s,u)}a.eofOffset=a.ptr,t.inputOffset?(f=a.headerInfo.blobSize+t.inputOffset-a.ptr,Math.abs(f)>=1&&(a.eofOffset=t.inputOffset+a.headerInfo.blobSize)):(f=a.headerInfo.blobSize-a.ptr,Math.abs(f)>=1&&(a.eofOffset=a.headerInfo.blobSize));var p={width:i.width,height:i.height,pixelData:a.pixels.resultPixels,minValue:i.zMin,maxValue:i.zMax,validPixelCount:i.numValidPixel,dimCount:i.numDims,dimStats:{minValues:i.minValues,maxValues:i.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&d.isValidPixelValue(i.imageType,r)){var g=a.pixels.resultMask;for(n=0;n<l;n++)g[n]||(p.pixelData[n]=r);p.noDataValue=r}return a.noDataValue=r,t.returnFileInfo&&(p.fileInfo=d.formatFileInfo(a)),p},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)d.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}),b=(m=new ArrayBuffer(4),p=new Uint8Array(m),new Uint32Array(m)[0]=1,1===p[0]),v={decode:function(e,t){if(!b)throw"Big endian system is not supported.";var r,n,a=(t=t||{}).inputOffset||0,i=new Uint8Array(e,a,10),o=String.fromCharCode.apply(null,i);if("CntZImage"===o.trim())r=g,n=1;else{if("Lerc2"!==o.substring(0,5))throw"Unexpected file identifier string: "+o;r=y,n=2}for(var s,l,f,u,c,d,h=0,m=e.byteLength-10,p=[],v={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},w=0;a<m;){var _=r.decode(e,{inputOffset:a,encodedMaskData:s,maskData:f,returnMask:0===h,returnEncodedMask:0===h,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});a=_.fileInfo.eofOffset,f=_.maskData,0===h&&(s=_.encodedMaskData,v.width=_.width,v.height=_.height,v.dimCount=_.dimCount||1,v.pixelType=_.pixelType||_.fileInfo.pixelType,v.mask=f),n>1&&(f&&p.push(f),_.fileInfo.mask&&_.fileInfo.mask.numBytes>0&&w++),h++,v.pixels.push(_.pixelData),v.statistics.push({minValue:_.minValue,maxValue:_.maxValue,noDataValue:_.noDataValue,dimStats:_.dimStats})}if(n>1&&w>1){for(d=v.width*v.height,v.bandMasks=p,(f=new Uint8Array(d)).set(p[0]),u=1;u<p.length;u++)for(l=p[u],c=0;c<d;c++)f[c]=f[c]&l[c];v.maskData=f}return v}};module.exports?module.exports=v:this.Lerc=v}();var Lerc=LercDecode.exports,fieldTagNames={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},fieldTags={};for(var key in fieldTagNames)fieldTagNames.hasOwnProperty(key)&&(fieldTags[fieldTagNames[key]]=parseInt(key,10));fieldTags.BitsPerSample,fieldTags.ExtraSamples,fieldTags.SampleFormat,fieldTags.StripByteCounts,fieldTags.StripOffsets,fieldTags.StripRowCounts,fieldTags.TileByteCounts,fieldTags.TileOffsets,fieldTags.SubIFDs;var fieldTypeNames={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fieldTypes={};for(var _key in fieldTypeNames)fieldTypeNames.hasOwnProperty(_key)&&(fieldTypes[fieldTypeNames[_key]]=parseInt(_key,10));var LercParameters={Version:0,AddCompression:1},LercAddCompression={None:0,Deflate:1},geoKeyNames={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},geoKeys={};for(var _key2 in geoKeyNames)geoKeyNames.hasOwnProperty(_key2)&&(geoKeys[geoKeyNames[_key2]]=parseInt(_key2,10));var LercDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,n.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,n.addCompression=e.LercParameters[LercParameters.AddCompression],n}return _createClass(r,[{key:"decodeBlock",value:function(e){switch(this.addCompression){case LercAddCompression.None:break;case LercAddCompression.Deflate:e=inflate_2(new Uint8Array(e)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return Lerc.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),r}();function getDecoder(e){switch(e.Compression){case void 0:case 1:return new RawDecoder;case 5:return new LZWDecoder;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new JpegDecoder(e);case 8:case 32946:return new DeflateDecoder;case 32773:return new PackbitsDecoder;case 34887:return new LercDecoder(e);default:throw new Error("Unknown compression method identifier: ".concat(e.Compression))}}function decode(e,t){return _decode.apply(this,arguments)}function _decode(){return(_decode=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=getDecoder(t),e.next=3,n.decode(t,r);case 3:return a=e.sent,e.abrupt("return",Transfer(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}expose(decode);'],{type:"application/javascript"}),yj=URL.createObjectURL(vj),bj=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function wj(t){try{return t.getBoundingBox()}catch(n){var e=t.fileDirectory;return[0,0,e.ImageWidth,e.ImageLength]}}function xj(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.fileDirectory.ImageLength]}}function Sj(t,e){try{return t.getResolution(e)[0]}catch(n){return e.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth}}function _j(t){var e,n,r,i=t.geoKeys;return i?i.ProjectedCSTypeGeoKey?((n=Mr(e="EPSG:"+i.ProjectedCSTypeGeoKey))||(r=De(i.ProjLinearUnitsGeoKey))&&(n=new Be({code:e,units:r})),n):i.GeographicTypeGeoKey?((n=Mr(e="EPSG:"+i.GeographicTypeGeoKey))||(r=De(i.GeogAngularUnitsGeoKey))&&(n=new Be({code:e,units:r})),n):null:null}function kj(t){return t.getImageCount().then((function(e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t.getImage(r);return Promise.all(n)}))}function Ej(t){return(t.overviews?function(t){return gj.apply(this,arguments)}(t.url,t.overviews):function(t){return dj.apply(this,arguments)}(t.url)).then(kj)}function Mj(t,e,n,r){if(Array.isArray(t)){var i=t.length;if(!Array.isArray(e)||i!=e.length)throw new Error(r);for(var o=0;o<i;++o)Mj(t[o],e[o],n,r)}else if(Math.abs(t-e)>n*t)throw new Error(r)}function Tj(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function Oj(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}var Pj=function(t){function e(e){var n=t.call(this,{state:we,tileGrid:null,projection:null,opaque:e.opaque,transition:e.transition})||this;n.Gy=e.sources;var r=n.Gy.length;n.qy=new Array(r),n.Vy=new Array(r),n.Zy,n.Wy,n.$y=!1,n.si=null,n.Hy=e.convertToRGB?"readRGB":"readRasters",n.setKey(n.Gy.map((function(t){return t.url})).join(","));for(var i=n,o=new Array(r),a=0;a<r;++a)o[a]=Ej(n.Gy[a]);return Promise.all(o).then((function(t){i.Ky(t)})).catch((function(t){i.si=t,i.setState(Se)})),n}return bj(e,t),e.prototype.getError=function(){return this.si},e.prototype.Ky=function(t){for(var e,n,r,i,o=new Array(t.length),a=new Array(t.length),s=0,l=t.length,u=function(l){var u=t[l],h=u.length,f=void 0,p=void 0,d=new Array(h),g=new Array(h);a[l]=new Array(h);for(var m=0;m<h;++m){var v=u[m],y=v.getGDALNoData();a[l][m]=null===y?NaN:y;var b=c.Gy[l].bands;o[l]=b?b.length:v.getSamplesPerPixel();var w=h-(m+1);f||(f=wj(v)),p||(p=xj(v)),g[w]=Sj(v,u[0]),d[w]=[v.getTileWidth(),v.getTileHeight()]}if(e?Vn(e,f,e):e=f,n?Mj(n,p,0,_="Origin mismatch for source "+l+", got ["+p+"] but expected ["+n+"]"):n=p,i){i.length-s>g.length&&(s=i.length-g.length);var x=i[i.length-1]/g[g.length-1];c.Vy[l]=x;var S=g.map((function(t){return t*x})),_="Resolution mismatch for source "+l+", got ["+S+"] but expected ["+i+"]";Mj(i.slice(s,i.length),S,.005,_)}else i=g,c.Vy[l]=1;r?Mj(r.slice(s,r.length),d,0,"Tile size mismatch for source "+l):r=d,c.qy[l]=u.reverse()},c=this,h=0;h<l;++h)u(h);for(var f=0,p=this.qy.length;f<p;++f)for(var d=this.qy[f];d.length<i.length;)d.unshift(void 0);if(!this.getProjection()){var g=t[0];for(f=g.length-1;f>=0;--f){var m=_j(g[f]);if(m){this.projection=m;break}}}this.Zy=o,this.Wy=a;t:for(h=0;h<l;++h){if(void 0!==this.Gy[h].nodata){this.$y=!0;break}var v=a[h],y=this.Gy[h].bands;if(y){for(f=0;f<y.length;++f)if(!isNaN(v[y[f]-1])){this.$y=!0;break t}}else for(var b=0;b<v.length;++b)if(!isNaN(v[b])){this.$y=!0;break t}}var w=this.$y?1:0;this.bandCount=o.reduce((function(t,e){return t+e}),0)+w;var x=new IS({extent:e,minZoom:s,origin:n,resolutions:i,tileSizes:r});this.tileGrid=x,this.setLoader(this.Xy.bind(this)),this.setState(xe)},e.prototype.Xy=function(t,e,n){for(var r=ds(this.tileGrid.getTileSize(t)),i=this.qy.length,o=new Array(i),a=this.$y,s=this.bandCount,l=this.Zy,u=this.Gy,c=0;c<i;++c){var h=u[c],f=this.Vy[c],p=[Math.round(e*(r[0]*f)),Math.round(n*(r[1]*f)),Math.round((e+1)*(r[0]*f)),Math.round((n+1)*(r[1]*f))],d=this.qy[c][t],g=void 0;h.bands&&(g=h.bands.map((function(t){return t-1}))),o[c]=d[this.Hy]({window:p,width:r[0],height:r[1],samples:g,fillValue:h.nodata,pool:(mj||(mj=new hA(void 0,new Worker(yj))),mj),interleave:!1})}var m=r[0]*r[1],v=m*s,y=this.Wy;return Promise.all(o).then((function(t){for(var e=new Uint8ClampedArray(v),n=0,r=0;r<m;++r){for(var o=a,s=0;s<i;++s){var c=u[s],h=c.min;void 0===h&&(h=Tj(t[s][0]));var f=c.max;void 0===f&&(f=Oj(t[s][0]));for(var p=255/(f-h),d=-h*p,g=0;g<l[s];++g){var b=t[s][g][r],w=p*b+d;if(a){var x=c.nodata;if(void 0===x){var S;S=c.bands?c.bands[g]-1:g,x=y[s][S]}b!==x&&(o=!1,e[n]=w)}else e[n]=w;n++}}a&&(o||(e[n]=255),n++)}return e}))},e}(NP),Cj=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ij="default",Aj=function(t){function e(e,n,r,i,o,a,s){var l=t.call(this,n,r,i,o,a,s)||this;return l.Yy=null,l.up=e,l}return Cj(e,t),e.prototype.getImage=function(){if(this.Yy)return this.Yy;var e=t.prototype.getImage.call(this);if(2==this.state){var n=this.up;if(e.width==n[0]&&e.height==n[1])return this.Yy=e,e;var r=Gt(n[0],n[1]);return r.drawImage(e,0,0),this.Yy=r.canvas,r.canvas}return e},e}(hy),Lj=function(t){function e(e){var n=this,r=e,i=r.size,o=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:Ij,a=r.tilePixelRatio||1,s=i[0],l=i[1],u=[],c=r.tileSize||Po,h=c*a;switch(o){case Ij:for(;s>h||l>h;)u.push([Math.ceil(s/h),Math.ceil(l/h)]),h+=h;break;case"truncated":for(var f=s,p=l;f>h||p>h;)u.push([Math.ceil(f/h),Math.ceil(p/h)]),f>>=1,p>>=1;break;default:w(!1,53)}u.push([1,1]),u.reverse();for(var d=[a],g=[0],m=1,v=u.length;m<v;m++)d.push(a<<m),g.push(u[m-1][0]*u[m-1][1]+g[m-1]);d.reverse();var y=new IS({tileSize:c,extent:r.extent||[0,-l,s,0],resolutions:d}),b=r.url;b&&-1==b.indexOf("{TileGroup}")&&-1==b.indexOf("{tileIndex}")&&(b+="{TileGroup}/{z}-{x}-{y}.jpg");var x=WS(b),S=c*a,_=qS(x.map((function(t){return function(e,n,r){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*u[i][0],l={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+g[i])/S|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return l[e]}))}}}))),k=Aj.bind(null,ds(c*a));(n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,projection:r.projection,tilePixelRatio:a,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:k,tileGrid:y,tileUrlFunction:_,transition:r.transition})||this).zDirection=r.zDirection;var E=_(y.getTileCoordForCoordAndResolution(Gn(y.getExtent()),d[d.length-1]),1,null),M=new Image;return M.addEventListener("error",function(){S=c,this.changed()}.bind(n)),M.src=E,n}return Cj(e,t),e}(EP),Rj=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function jj(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var Nj=function(t){function e(e){var n=this,r=e||{},i=r.url||"";i+=i.lastIndexOf("/")===i.length-1||""===i?"":"/";var a=r.version||Gh,s=r.sizes||[],l=r.size;w(null!=l&&Array.isArray(l)&&2==l.length&&!isNaN(l[0])&&l[0]>0&&!isNaN(l[1])&&l[1]>0,60);var u,c,h,f=l[0],p=l[1],d=r.tileSize,g=r.tilePixelRatio||1,m=r.format||"jpg",v=r.quality||(r.version==Dh?"native":"default"),y=r.resolutions||[],b=r.supports||[],x=r.extent||[0,-p,f,0],S=null!=s&&Array.isArray(s)&&s.length>0,_=void 0!==d&&("number"==typeof d&&Number.isInteger(d)&&d>0||Array.isArray(d)&&d.length>0),k=null!=b&&Array.isArray(b)&&(o(b,"regionByPx")||o(b,"regionByPct"))&&(o(b,"sizeByWh")||o(b,"sizeByH")||o(b,"sizeByW")||o(b,"sizeByPct"));if(y.sort((function(t,e){return e-t})),_||k)if(null!=d&&("number"==typeof d&&Number.isInteger(d)&&d>0?(u=d,c=d):Array.isArray(d)&&d.length>0&&((1==d.length||null==d[1]&&Number.isInteger(d[0]))&&(u=d[0],c=d[0]),2==d.length&&(Number.isInteger(d[0])&&Number.isInteger(d[1])?(u=d[0],c=d[1]):null==d[0]&&Number.isInteger(d[1])&&(u=d[1],c=d[1])))),void 0!==u&&void 0!==c||(u=Po,c=Po),0==y.length)for(var E=h=Math.max(Math.ceil(Math.log(f/u)/Math.LN2),Math.ceil(Math.log(p/c)/Math.LN2));E>=0;E--)y.push(Math.pow(2,E));else{var M=Math.max.apply(Math,y);h=Math.round(Math.log(M)/Math.LN2)}else if(u=f,c=p,y=[],S){s.sort((function(t,e){return t[0]-e[0]})),h=-1;var T=[];for(E=0;E<s.length;E++){var O=f/s[E][0];y.length>0&&y[y.length-1]==O?T.push(E):(y.push(O),h++)}if(T.length>0)for(E=0;E<T.length;E++)s.splice(T[E]-E,1)}else y.push(1),s.push([f,p]),h=0;var P=new IS({tileSize:[u,c],extent:x,origin:qn(x),resolutions:y}),C=Aj.bind(null,ds(d||256).map((function(t){return t*g})));return(n=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:r.state,tileClass:C,tileGrid:P,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:function(t,e,n){var r,l,d=t[0];if(!(d>h)){var g=t[1],w=t[2],x=y[d];if(!(void 0===g||void 0===w||void 0===x||g<0||Math.ceil(f/x/u)<=g||w<0||Math.ceil(p/x/c)<=w)){if(k||_){var E=g*u*x,M=w*c*x,T=u*x,O=c*x,P=u,C=c;E+T>f&&(T=f-E),M+O>p&&(O=p-M),E+u*x>f&&(P=Math.floor((f-E+x-1)/x)),M+c*x>p&&(C=Math.floor((p-M+x-1)/x)),0==E&&T==f&&0==M&&O==p?r="full":!k||o(b,"regionByPx")?r=E+","+M+","+T+","+O:o(b,"regionByPct")&&(r="pct:"+jj(E/f*100)+","+jj(M/p*100)+","+jj(T/f*100)+","+jj(O/p*100)),a!=Uh||k&&!o(b,"sizeByWh")?!k||o(b,"sizeByW")?l=P+",":o(b,"sizeByH")?l=","+C:o(b,"sizeByWh")?l=P+","+C:o(b,"sizeByPct")&&(l="pct:"+jj(100/x)):l=P+","+C}else if(r="full",S){var I=s[d][0],A=s[d][1];l=a==Uh?I==f&&A==p?"max":I+","+A:I==f?"full":I+","}else l=a==Uh?"max":"full";return i+r+"/"+l+"/0/"+v+"."+m}}},transition:r.transition})||this).zDirection=r.zDirection,n}return Rj(e,t),e}(EP),$j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fj=function(t){function e(e,n){var r=t.call(this,e)||this;return r.image=n,r}return $j(e,t),e}(R);function Dj(t,e){t.getImage().src=e}var Gj=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return n.on,n.once,n.un,n.ve=void 0!==e.resolutions?e.resolutions:null,n.Jy=null,n.Qy=0,n.oy=!1===e.imageSmoothing?pP:void 0,n}return $j(e,t),e.prototype.getResolutions=function(){return this.ve},e.prototype.getContextOptions=function(){return this.oy},e.prototype.findNearestResolution=function(t){if(this.ve){var e=a(this.ve,t,0);t=this.ve[e]}return t},e.prototype.getImage=function(t,e,n,r){var i=this.getProjection();if(i&&r&&!Lr(i,r)){if(this.Jy){if(this.Qy==this.getRevision()&&Lr(this.Jy.getProjection(),r)&&this.Jy.getResolution()==e&&On(this.Jy.getExtent(),t))return this.Jy;this.Jy.dispose(),this.Jy=null}return this.Jy=new wP(i,r,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,i)}.bind(this),this.oy),this.Qy=this.getRevision(),this.Jy}return i&&(r=i),this.getImageInternal(t,e,n,r)},e.prototype.getImageInternal=function(t,e,n,r){return p()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new Fj("imageloadstart",e));break;case 2:this.loading=!1,this.dispatchEvent(new Fj("imageloadend",e));break;case 3:this.loading=!1,this.dispatchEvent(new Fj("imageloaderror",e))}},e}(Xb);function Uj(t,e){var n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));var r=n.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var Bj=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zj=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions})||this).xo=void 0!==r.crossOrigin?r.crossOrigin:null,n.Oy=void 0===r.hidpi||r.hidpi,n.uc=r.url,n.io=void 0!==r.imageLoadFunction?r.imageLoadFunction:Dj,n.tm=r.params||{},n.eo=null,n.nm=[0,0],n.Wf=0,n.rm=void 0!==r.ratio?r.ratio:1.5,n}return Bj(e,t),e.prototype.getParams=function(){return this.tm},e.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.uc)return null;e=this.findNearestResolution(e),n=this.Oy?n:1;var i=this.eo;if(i&&this.Wf==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&wn(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};U(o,this.tm);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.rm){var l=this.rm*Wn(t)/2,u=this.rm*zn(t)/2;t[0]=a-l,t[1]=s-u,t[2]=a+l,t[3]=s+u}var c=e/n,h=Math.ceil(Wn(t)/c),f=Math.ceil(zn(t)/c);t[0]=a-c*h/2,t[2]=a+c*h/2,t[1]=s-c*f/2,t[3]=s+c*f/2,this.nm[0]=h,this.nm[1]=f;var p=this.im(t,this.nm,n,r,o);return this.eo=new sf(t,e,n,p,this.xo,this.io),this.Wf=this.getRevision(),this.eo.addEventListener(W,this.handleImageChange.bind(this)),this.eo},e.prototype.getImageLoadFunction=function(){return this.io},e.prototype.im=function(t,e,n,r,i){var o=r.getCode().split(/:(?=\d+$)/).pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*n);var a=this.uc,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&w(!1,50),Uj(s,i)},e.prototype.getUrl=function(){return this.uc},e.prototype.setImageLoadFunction=function(t){this.eo=null,this.io=t,this.changed()},e.prototype.setUrl=function(t){t!=this.uc&&(this.uc=t,this.eo=null,this.changed())},e.prototype.updateParams=function(t){U(this.tm,t),this.eo=null,this.changed()},e}(Gj),Vj=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qj=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).om=r.canvasFunction,n.fo=null,n.Wf=0,n.rm=void 0!==r.ratio?r.ratio:1.5,n}return Vj(e,t),e.prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e);var i=this.fo;if(i&&this.Wf==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&wn(i.getExtent(),t))return i;Xn(t=t.slice(),this.rm);var o=[Wn(t)/e*n,zn(t)/e*n],a=this.om.call(this,t,e,n,o,r);return a&&(i=new uy(t,e,n,a)),this.fo=i,this.Wf=this.getRevision(),i},e}(Gj),Hj=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wj=function(t){function e(e){var n=t.call(this,{imageSmoothing:e.imageSmoothing,projection:e.projection,resolutions:e.resolutions})||this;return n.xo=void 0!==e.crossOrigin?e.crossOrigin:null,n.am=void 0!==e.displayDpi?e.displayDpi:96,n.tm=e.params||{},n.uc=e.url,n.io=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dj,n.Oy=void 0===e.hidpi||e.hidpi,n.zt=void 0!==e.metersPerUnit?e.metersPerUnit:1,n.rm=void 0!==e.ratio?e.ratio:1,n.sm=void 0!==e.useOverlay&&e.useOverlay,n.eo=null,n.Wf=0,n}return Hj(e,t),e.prototype.getParams=function(){return this.tm},e.prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e),n=this.Oy?n:1;var i=this.eo;if(i&&this.Wf==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==n&&wn(i.getExtent(),t))return i;1!=this.rm&&Xn(t=t.slice(),this.rm);var o=[Wn(t)/e*n,zn(t)/e*n];if(void 0!==this.uc){var a=this.getUrl(this.uc,this.tm,t,o,r);(i=new sf(t,e,n,a,this.xo,this.io)).addEventListener(W,this.handleImageChange.bind(this))}else i=null;return this.eo=i,this.Wf=this.getRevision(),i},e.prototype.getImageLoadFunction=function(){return this.io},e.prototype.updateParams=function(t){U(this.tm,t),this.changed()},e.prototype.getUrl=function(t,e,n,r,i){var o=function(t,e,n,r){var i=Wn(t),o=zn(t),a=e[0],s=e[1],l=.0254/r;return s*i>a*o?i*n/(a*l):o*n/(s*l)}(n,r,this.zt,this.am),a=Gn(n),s={OPERATION:this.sm?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.am,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return U(s,e),Uj(t,s)},e.prototype.setImageLoadFunction=function(t){this.eo=null,this.io=t,this.changed()},e}(Gj),Kj=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yj=function(t){function e(e){var n=this,r=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dj;return(n=t.call(this,{attributions:e.attributions,imageSmoothing:e.imageSmoothing,projection:Mr(e.projection)})||this).uc=e.url,n.um=e.imageExtent,n.eo=new sf(n.um,void 0,1,n.uc,r,i),n.nm=e.imageSize?e.imageSize:null,n.eo.addEventListener(W,n.handleImageChange.bind(n)),n}return Kj(e,t),e.prototype.getImageExtent=function(){return this.um},e.prototype.getImageInternal=function(t,e,n,r){return Kn(t,this.eo.getExtent())?this.eo:null},e.prototype.getUrl=function(){return this.uc},e.prototype.handleImageChange=function(e){if(2==this.eo.getState()){var n=this.eo.getExtent(),r=this.eo.getImage(),i=void 0,o=void 0;this.nm?(i=this.nm[0],o=this.nm[1]):(i=r.width,o=r.height);var a=Wn(n),s=zn(n),l=a/i,u=s/o,c=i,h=o;if(l>u?c=Math.round(a/u):h=Math.round(s/l),c!==i||h!==o){var f=Gt(c,h);U(f,this.getContextOptions());var p=f.canvas;f.drawImage(r,0,0,i,o,0,0,p.width,p.height),this.eo.setImage(p)}}t.prototype.handleImageChange.call(this,e)},e}(Gj),Xj="carmentaserver",Zj="geoserver",Jj="mapserver",Qj="qgis",tN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eN=[101,101],nN=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions})||this).xo=void 0!==r.crossOrigin?r.crossOrigin:null,n.uc=r.url,n.io=void 0!==r.imageLoadFunction?r.imageLoadFunction:Dj,n.tm=r.params||{},n.fm=!0,n.hm(),n.lm=r.serverType,n.Oy=void 0===r.hidpi||r.hidpi,n.eo=null,n.nm=[0,0],n.Wf=0,n.rm=void 0!==r.ratio?r.ratio:1.5,n}return tN(e,t),e.prototype.getFeatureInfoUrl=function(t,e,n,r){if(void 0!==this.uc){var i=Mr(n),o=this.getProjection();o&&o!==i&&(e=mP(o,i,t,e),t=Nr(t,i,o));var a=Bn(t,e,0,eN),s={SERVICE:"WMS",VERSION:fP,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.tm.LAYERS};U(s,this.tm,r);var l=Math.floor((t[0]-a[0])/e),u=Math.floor((a[3]-t[1])/e);return s[this.fm?"I":"X"]=l,s[this.fm?"J":"Y"]=u,this.im(a,eN,1,o||i,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.uc){var n={SERVICE:"WMS",VERSION:fP,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var r=this.tm.LAYERS;if(Array.isArray(r)&&1!==r.length)return;n.LAYER=r}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*i/28e-5}return U(n,e),Uj(this.uc,n)}},e.prototype.getParams=function(){return this.tm},e.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.uc)return null;e=this.findNearestResolution(e),1==n||this.Oy&&void 0!==this.lm||(n=1);var i=e/n,o=Gn(t),a=Bn(o,i,0,[Math.ceil(Wn(t)/i),Math.ceil(zn(t)/i)]),s=Bn(o,i,0,[Math.ceil(this.rm*Wn(t)/i),Math.ceil(this.rm*zn(t)/i)]),l=this.eo;if(l&&this.Wf==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==n&&wn(l.getExtent(),a))return l;var u={SERVICE:"WMS",VERSION:fP,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};U(u,this.tm),this.nm[0]=Math.round(Wn(s)/i),this.nm[1]=Math.round(zn(s)/i);var c=this.im(s,this.nm,n,r,u);return this.eo=new sf(s,e,n,c,this.xo,this.io),this.Wf=this.getRevision(),this.eo.addEventListener(W,this.handleImageChange.bind(this)),this.eo},e.prototype.getImageLoadFunction=function(){return this.io},e.prototype.im=function(t,e,n,r,i){if(w(void 0!==this.uc,9),i[this.fm?"CRS":"SRS"]=r.getCode(),"STYLES"in this.tm||(i.STYLES=""),1!=n)switch(this.lm){case Zj:var o=90*n+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case Jj:i.MAP_RESOLUTION=90*n;break;case Xj:case Qj:i.DPI=90*n;break;default:w(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=r.getAxisOrientation();return a=this.fm&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),Uj(this.uc,i)},e.prototype.getUrl=function(){return this.uc},e.prototype.setImageLoadFunction=function(t){this.eo=null,this.io=t,this.changed()},e.prototype.setUrl=function(t){t!=this.uc&&(this.uc=t,this.eo=null,this.changed())},e.prototype.updateParams=function(t){U(this.tm,t),this.hm(),this.eo=null,this.changed()},e.prototype.hm=function(){var t=this.tm.VERSION||fP;this.fm=sr(t,"1.3")>=0},e}(Gj),rN={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},iN={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function oN(t,e){for(var n,r,i=0;i<t.length;++i){var o=t[i];if("item"===o.rel){if(o.type===e){n=o.href;break}rN[o.type]?r=o.href:r||0!==o.type.indexOf("image/")||(r=o.href)}}if(!n){if(!r)throw new Error('Could not find "item" link');n=r}return n}function aN(t,e,n){for(var r,i,o={},a=0;a<t.length;++a){var s=t[a];if(o[s.type]=s.href,"item"===s.rel){if(s.type===e){r=s.href;break}iN[s.type]&&(i=s.href)}}if(!r&&n)for(a=0;a<n.length;++a){var l=n[a];if(o[l]){r=o[l];break}}if(!r){if(!i)throw new Error('Could not find "item" link');r=i}return r}function sN(t,e,n,r){var i=t.projection;if(!i&&!(i=Mr(e.crs)))throw new Error("Unsupported CRS: "+e.crs);for(var o="en"!==i.getAxisOrientation().substr(0,2),a=e.tileMatrices,s={},l=0;l<a.length;++l){var u=a[l];s[u.id]=u}var c={},h=[];if(r)for(l=0;l<r.length;++l){var f=(b=r[l]).tileMatrix;h.push(f),c[f]=b}else for(l=0;l<a.length;++l)f=a[l].id,h.push(f);var p=h.length,d=new Array(p),g=new Array(p),m=new Array(p),v=new Array(p),y=[-1/0,-1/0,1/0,1/0];for(l=0;l<p;++l){f=h[l];var b,w=(u=s[f]).pointOfOrigin;if(d[l]=o?[w[1],w[0]]:w,g[l]=u.cellSize,m[l]=[u.matrixWidth,u.matrixHeight],v[l]=[u.tileWidth,u.tileHeight],b=c[f]){var x=u.cellSize*u.tileWidth,S=d[l][0]+b.minTileCol*x,_=d[l][0]+(b.maxTileCol+1)*x,k=u.cellSize*u.tileHeight,E=void 0,M=void 0;"bottomLeft"===u.cornerOfOrigin?(E=d[l][1]+b.minTileRow*k,M=d[l][1]+(b.maxTileRow+1)*k):(E=d[l][1]-(b.maxTileRow+1)*k,M=d[l][1]-b.minTileRow*k),Vn(y,[S,E,_,M],y)}}var T=new IS({origins:d,resolutions:g,sizes:m,tileSizes:v,extent:r?y:void 0}),O=t.context,P=t.url;return{grid:T,urlTemplate:n,urlFunction:function(t,e,i){if(t){var o=h[t[0]],a=s[o],l="bottomLeft"===a.cornerOfOrigin,u={tileMatrix:o,tileCol:t[1],tileRow:l?-t[2]-1:t[2]};if(r){var f=c[a.id];if(u.tileCol<f.minTileCol||u.tileCol>f.maxTileCol||u.tileRow<f.minTileRow||u.tileRow>f.maxTileRow)return}U(u,O);var p=n.replace(/\{(\w+?)\}/g,(function(t,e){return u[e]}));return uP(P,p)}}}}function lN(t){return lP(t.url).then((function(e){return function(t,e){var n,r=e.tileMatrixSetLimits;if("map"===e.dataType)n=oN(e.links,t.mediaType);else{if("vector"!==e.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');n=aN(e.links,t.mediaType,t.supportedMediaTypes)}if(e.tileMatrixSet)return sN(t,e.tileMatrixSet,n,r);if(!e.tileMatrixSetDefinition)throw new Error("Expected tileMatrixSetDefinition or tileMatrixSet");return lP(uP(t.url,e.tileMatrixSetDefinition)).then((function(e){return sN(t,e,n,r)}))}(t,e)}))}var uN,cN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hN=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:we,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;return lN({url:e.url,projection:n.getProjection(),mediaType:e.mediaType,context:e.context||null}).then(n.vm.bind(n)).catch(n.dm.bind(n)),n}return cN(e,t),e.prototype.vm=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(xe)},e.prototype.dm=function(t){this.setState(Se)},e}(EP),fN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pN=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:we})||this;return lN({url:e.url,projection:n.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null}).then(n.vm.bind(n)).catch(n.dm.bind(n)),n}return fN(e,t),e.prototype.vm=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(xe)},e.prototype.dm=function(t){this.setState(Se)},e}(t_),dN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gN='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',mN=function(t){function e(e){var n,r=e||{};n=void 0!==r.attributions?r.attributions:[gN];var i=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:n,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:i,imageSmoothing:r.imageSmoothing,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:o,wrapX:r.wrapX,zDirection:r.zDirection})||this}return dN(e,t),e}(CP),vN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yN=!0;try{new ImageData(10,10)}catch(t){yN=!1}function bN(t,e,n){if(yN)return new ImageData(t,e,n);uN||(uN=document.createElement("canvas").getContext("2d"));var r=uN.createImageData(e,n);return r.data.set(t),r}function wN(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function n(t,n,r){return e?new ImageData(t,n,r):{data:t,width:n,height:r}}return function(e){var r=e.buffers,i=e.meta,o=e.imageOps,a=e.width,s=e.height,l=r.length,u=r[0].byteLength;if(o){for(var c=new Array(l),h=0;h<l;++h)c[h]=n(new Uint8ClampedArray(r[h]),a,s);return t(c,i).data.buffer}var f=new Uint8ClampedArray(u),p=new Array(l),d=new Array(l);for(h=0;h<l;++h)p[h]=new Uint8ClampedArray(r[h]),d[h]=[0,0,0,0];for(var g=0;g<u;g+=4){for(var m=0;m<l;++m){var v=p[m];d[m][0]=v[g],d[m][1]=v[g+1],d[m][2]=v[g+2],d[m][3]=v[g+3]}var y=t(d,i);f[g]=y[0],f[g+1]=y[1],f[g+2]=y[2],f[g+3]=y[3]}return f.buffer}}function xN(t,e){var n=Object.keys(t.lib||{}).map((function(e){return"var "+e+" = "+t.lib[e].toString()+";"})).concat(["var __minion__ = ("+wN.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(n,{type:"text/javascript"}),i=URL.createObjectURL(r),o=new Worker(i);return o.addEventListener("message",e),o}var SN=function(t){function e(e){var n,r=t.call(this)||this;r._imageOps=!!e.imageOps,n=0===e.threads?0:r._imageOps?1:e.threads||1;var i=new Array(n);if(n)for(var o=0;o<n;++o)i[o]=xN(e,r._onWorkerMessage.bind(r,o));else i[0]=function(t,e){var n=wN(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||e({data:{buffer:n(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(e,r._onWorkerMessage.bind(r,0));return r._workers=i,r._queue=[],r._maxQueueLength=e.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return vN(e,t),e.prototype.process=function(t,e,n){this._enqueue({inputs:t,meta:e,callback:n}),this._dispatch()},e.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},e.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var e=t.inputs[0].width,n=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),i=this._workers.length;if(this._running=i,1!==i)for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var l=s*a,u=[],c=0,h=r.length;c<h;++c)u.push(r[c].slice(l,l+a));this._workers[s].postMessage({buffers:u,meta:t.meta,imageOps:this._imageOps,width:e,height:n},u)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:e,height:n},r)}},e.prototype._onWorkerMessage=function(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},e.prototype._resolveJob=function(){var t,e,n=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var i=n.inputs[0].data.length;t=new Uint8ClampedArray(i),e=new Array(r);for(var o=4*Math.ceil(i/4/r),a=0;a<r;++a){var s=this._dataLookup[a].buffer,l=a*o;t.set(new Uint8ClampedArray(s),l),e[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},n.callback(null,bN(t,n.inputs[0].width,n.inputs[0].height),e),this._dispatch()},e.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},e}(N),_N=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.extent=n.extent,i.resolution=n.viewState.resolution/n.pixelRatio,i.data=r,i}return vN(e,t),e}(R),kN=function(t){function e(e){var n=t.call(this,{projection:null})||this;n.on,n.once,n.un,n.pm=null,n.ym=void 0!==e.operationType?e.operationType:"pixel",n.bm=void 0!==e.threads?e.threads:1,n.xa=function(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=TN(t[r]);return n}(e.sources);for(var r,i=n.changed.bind(n),o=0,a=n.xa.length;o<a;++o)n.xa[o].addEventListener(W,i);return n.He=new ko((function(){return 1}),n.changed.bind(n)),n.wm,n.gm=null,n.Wf,n.Ie={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=n.xa,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:n.He,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},n.setAttributions((function(t){for(var n=[],r=0,i=e.sources.length;r<i;++r){var o=e.sources[r],a=(o instanceof Xb?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);n.push.apply(n,s)}}return 0!==n.length?n:null})),void 0!==e.operation&&n.setOperation(e.operation,e.lib),n}return vN(e,t),e.prototype.setOperation=function(t,e){this.pm&&this.pm.dispose(),this.pm=new SN({operation:t,imageOps:"image"===this.ym,queue:1,lib:e,threads:this.bm}),this.changed()},e.prototype.km=function(t,e,n){var r=U({},this.Ie);r.viewState=U({},r.viewState);var i=Gn(t);r.extent=t.slice(),r.size[0]=Math.round(Wn(t)/e),r.size[1]=Math.round(zn(t)/e),r.time=Date.now();var o=r.viewState;return o.center=i,o.projection=n,o.resolution=e,r},e.prototype.xm=function(){for(var t=!0,e=0,n=this.xa.length;e<n;++e)if(this.xa[e].getSource().getState()!==xe){t=!1;break}return t},e.prototype.getImage=function(t,e,n,r){if(!this.xm())return null;var i=this.km(t,e,r);if(this.wm=i,this.gm){var o=this.gm.getResolution(),a=this.gm.getExtent();e===o&&On(t,a)||(this.gm=null)}return this.gm&&this.getRevision()===this.Wf||this.Sm(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.gm},e.prototype.Sm=function(){for(var t=this.wm,e=this.xa.length,n=new Array(e),r=0;r<e;++r){t.layerIndex=r;var i=MN(this.xa[r],t);if(!i)return;n[r]=i}var o={};this.dispatchEvent(new _N("beforeoperations",t,o)),this.pm.process(n,o,this._m.bind(this,t))},e.prototype._m=function(t,e,n,r){if(!e&&n){var i,o=t.extent,a=t.viewState.resolution;if(a===this.wm.viewState.resolution&&On(o,this.wm.extent))this.gm?i=this.gm.getImage().getContext("2d"):(i=Gt(Math.round(Wn(o)/a),Math.round(zn(o)/a)),this.gm=new uy(o,a,1,i.canvas)),i.putImageData(n,0,0),this.changed(),this.Wf=this.getRevision(),this.dispatchEvent(new _N("afteroperations",t,r)),requestAnimationFrame(this.changed.bind(this))}},e.prototype.disposeInternal=function(){this.pm&&this.pm.dispose(),t.prototype.disposeInternal.call(this)},e}(Gj);kN.prototype.dispose;var EN=null;function MN(t,e){var n=t.getRenderer();if(!n)throw new Error("Unsupported layer type: "+t);if(!n.prepareFrame(e))return null;var r=e.size[0],i=e.size[1];if(0===r||0===i)return null;var o,a=n.renderFrame(e,null);if(a&&(o=a.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===i)return o.getContext("2d").getImageData(0,0,r,i);if(EN){var s=EN.canvas;s.width!==r||s.height!==i?EN=Gt(r,i):EN.clearRect(0,0,r,i)}else EN=Gt(r,i);return EN.drawImage(o,0,0,r,i),EN.getImageData(0,0,r,i)}function TN(t){var e;return t instanceof Xb?t instanceof BS?e=new sO({source:t}):t instanceof Gj&&(e=new tS({source:t})):e=t,e}var ON=kN,PN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CN=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',gN],IN={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},AN={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},LN=function(t){function e(e){var n=e.layer.indexOf("-"),r=-1==n?e.layer:e.layer.slice(0,n),i=AN[r],o=IN[e.layer],a=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;return t.call(this,{attributions:CN,cacheSize:e.cacheSize,crossOrigin:"anonymous",imageSmoothing:e.imageSmoothing,maxZoom:null!=e.maxZoom?e.maxZoom:i.maxZoom,minZoom:null!=e.minZoom?e.minZoom:i.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,wrapX:e.wrapX,zDirection:e.zDirection})||this}return PN(e,t),e}(CP),RN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jN=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).tm=r.params||{},n.Oy=void 0===r.hidpi||r.hidpi,n.hp=[1/0,1/0,-1/0,-1/0],n.setKey(n.Mm()),n}return RN(e,t),e.prototype.Mm=function(){var t=0,e=[];for(var n in this.tm)e[t++]=n+"-"+this.tm[n];return e.join("/")},e.prototype.getParams=function(){return this.tm},e.prototype.im=function(t,e,n,r,i,o){var a=this.urls;if(a){var s=i.getCode().split(/:(?=\d+$)/).pop();return o.SIZE=e[0]+","+e[1],o.BBOX=n.join(","),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),Uj((1==a.length?a[0]:a[P(_S(t),a.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.Oy?t:1},e.prototype.updateParams=function(t){U(this.tm,t),this.setKey(this.Mm())},e.prototype.tileUrlFunction=function(t,e,n){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),!(r.getResolutions().length<=t[0])){1==e||this.Oy||(e=1);var i=r.getTileCoordExtent(t,this.hp),o=ds(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=ps(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return U(a,this.tm),this.im(t,o,i,e,n,a)}},e}(EP),NN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$N=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,e){var r=t.getTileCoord()[0],i=ds(n.tileGrid.getTileSize(r)),o=Gt(i[0],i[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,i[0]+.5,i[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(e,i[0]/2,i[1]/2,i[0]),o.fillText(e,i[0]/2,i[1]/2,i[0]),t.setImage(o.canvas)}})||this}return NN(e,t),e}(CP),FN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DN=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:Mr("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:we,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})||this;if(n.jm=null,n.up=e.tileSize,e.url)if(e.jsonp)iP(e.url,n.handleTileJSONResponse.bind(n),n.handleTileJSONError.bind(n));else{var r=new XMLHttpRequest;r.addEventListener("load",n.Om.bind(n)),r.addEventListener("error",n.Am.bind(n)),r.open("GET",e.url),r.send()}else e.tileJSON?n.handleTileJSONResponse(e.tileJSON):w(!1,51);return n}return FN(e,t),e.prototype.Om=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n=void 0;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},e.prototype.Am=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.jm},e.prototype.handleTileJSONResponse=function(t){var e,n=Mr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var i=Rr(n,r);e=Jn(t.bounds,i)}var o=FS(r),a=t.minzoom||0,s=jS({extent:o,maxZoom:t.maxzoom||22,minZoom:a,tileSize:this.up});if(this.tileGrid=s,this.tileUrlFunction=VS(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var l=void 0!==e?e:o;this.setAttributions((function(e){return Kn(l,e.extent)?[t.attribution]:null}))}this.jm=t,this.setState(xe)},e.prototype.handleTileJSONError=function(){this.setState(Se)},e}(EP),GN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UN=function(t){function e(e){var n=this,r=e||{},i=r.params||{},o=!("TRANSPARENT"in i)||i.TRANSPARENT;return(n=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:!o,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).vy=void 0!==r.gutter?r.gutter:0,n.tm=i,n.fm=!0,n.lm=r.serverType,n.Oy=void 0===r.hidpi||r.hidpi,n.hp=[1/0,1/0,-1/0,-1/0],n.hm(),n.setKey(n.Mm()),n}return GN(e,t),e.prototype.getFeatureInfoUrl=function(t,e,n,r){var i=Mr(n),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),l=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=l[0])){var u=a.getResolution(l[0]),c=a.getTileCoordExtent(l,this.hp),h=ds(a.getTileSize(l[0]),this.tmpSize),f=this.vy;0!==f&&(h=hs(h,f,this.tmpSize),c=mn(c,u*f,c)),o&&o!==i&&(u=mP(o,i,t,u),c=$r(c,i,o),t=Nr(t,i,o));var p={SERVICE:"WMS",VERSION:fP,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.tm.LAYERS};U(p,this.tm,r);var d=Math.floor((t[0]-c[0])/u),g=Math.floor((c[3]-t[1])/u);return p[this.fm?"I":"X"]=d,p[this.fm?"J":"Y"]=g,this.im(l,h,c,1,o||i,p)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var n={SERVICE:"WMS",VERSION:fP,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var r=this.tm.LAYERS;if(Array.isArray(r)&&1!==r.length)return;n.LAYER=r}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*i/28e-5}return U(n,e),Uj(this.urls[0],n)}},e.prototype.getGutter=function(){return this.vy},e.prototype.getParams=function(){return this.tm},e.prototype.im=function(t,e,n,r,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.fm?"CRS":"SRS"]=i.getCode(),"STYLES"in this.tm||(o.STYLES=""),1!=r)switch(this.lm){case Zj:var s=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case Jj:o.MAP_RESOLUTION=90*r;break;case Xj:case Qj:o.DPI=90*r;break;default:w(!1,52)}var l=i.getAxisOrientation(),u=n;if(this.fm&&"ne"==l.substr(0,2)){var c=void 0;c=n[0],u[0]=n[1],u[1]=c,c=n[2],u[2]=n[3],u[3]=c}return o.BBOX=u.join(","),Uj(1==a.length?a[0]:a[P(_S(t),a.length)],o)}},e.prototype.getTilePixelRatio=function(t){return this.Oy&&void 0!==this.lm?t:1},e.prototype.Mm=function(){var t=0,e=[];for(var n in this.tm)e[t++]=n+"-"+this.tm[n];return e.join("/")},e.prototype.updateParams=function(t){U(this.tm,t),this.hm(),this.setKey(this.Mm())},e.prototype.hm=function(){var t=this.tm.VERSION||fP;this.fm=sr(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,e,n){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),!(r.getResolutions().length<=t[0])){1==e||this.Oy&&void 0!==this.lm||(e=1);var i=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.hp),a=ds(r.getTileSize(t[0]),this.tmpSize),s=this.vy;0!==s&&(a=hs(a,s,this.tmpSize),o=mn(o,i*s,o)),1!=e&&(a=ps(a,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:fP,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return U(l,this.tm),this.im(t,a,o,e,n,l)}},e}(EP),BN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zN=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n)||this;return s.no=r,s.Rt=i,s.Tm=o,s.Em=null,s.Mt=null,s.ai=null,s.Rm=a,s}return BN(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.Em||!this.Mt)return null;var e=(t[0]-this.Rt[0])/(this.Rt[2]-this.Rt[0]),n=(t[1]-this.Rt[1])/(this.Rt[3]-this.Rt[1]),r=this.Em[Math.floor((1-n)*this.Em.length)];if("string"!=typeof r)return null;var i=r.charCodeAt(Math.floor(e*r.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.Mt){var a=this.Mt[i];o=this.ai&&a in this.ai?this.ai[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,n){4==this.state&&!0===n?(this.state=0,ot(this,W,(function(n){e(this.getData(t))}),this),this.Cm()):!0===n?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.no},e.prototype.dm=function(){this.state=3,this.changed()},e.prototype.Ns=function(t){this.Em=t.grid,this.Mt=t.keys,this.ai=t.data,this.state=2,this.changed()},e.prototype.Cm=function(){if(0==this.state)if(this.state=1,this.Rm)iP(this.no,this.Ns.bind(this),this.dm.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.Om.bind(this)),t.addEventListener("error",this.Am.bind(this)),t.open("GET",this.no),t.send()}},e.prototype.Om=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n=void 0;try{n=JSON.parse(e.responseText)}catch(t){return void this.dm()}this.Ns(n)}else this.dm()},e.prototype.Am=function(t){this.dm()},e.prototype.load=function(){this.Tm?this.Cm():this.setState(4)},e}($s),VN=function(t){function e(e){var n=t.call(this,{projection:Mr("EPSG:3857"),state:we,zDirection:e.zDirection})||this;if(n.Tm=void 0===e.preemptive||e.preemptive,n.Im=HS,n.Pm=void 0,n.Rm=e.jsonp||!1,e.url)if(n.Rm)iP(e.url,n.handleTileJSONResponse.bind(n),n.handleTileJSONError.bind(n));else{var r=new XMLHttpRequest;r.addEventListener("load",n.Om.bind(n)),r.addEventListener("error",n.Am.bind(n)),r.open("GET",e.url),r.send()}else e.tileJSON?n.handleTileJSONResponse(e.tileJSON):w(!1,51);return n}return BN(e,t),e.prototype.Om=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n=void 0;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},e.prototype.Am=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.Pm},e.prototype.forDataAtCoordinateAndResolution=function(t,e,n,r){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,n,r)}else!0===r?setTimeout((function(){n(null)}),0):n(null)},e.prototype.handleTileJSONError=function(){this.setState(Se)},e.prototype.handleTileJSONResponse=function(t){var e,n=Mr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var i=Rr(n,r);e=Jn(t.bounds,i)}var o=FS(r),a=t.minzoom||0,s=jS({extent:o,maxZoom:t.maxzoom||22,minZoom:a});this.tileGrid=s,this.Pm=t.template;var l=t.grids;if(l){if(this.Im=VS(l,s),void 0!==t.attribution){var u=void 0!==e?e:o;this.setAttributions((function(e){return Kn(u,e.extent)?[t.attribution]:null}))}this.setState(xe)}else this.setState(Se)},e.prototype.getTile=function(t,e,n,r,i){var o=bS(t,e,n);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,i),l=this.Im(s,r,i),u=new zN(a,void 0!==l?0:4,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(a),this.Tm,this.Rm);return this.tileCache.set(o,u),u},e.prototype.useTile=function(t,e,n){var r=bS(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(BS),qN="KVP",HN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),WN=function(t){function e(e){var n=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return n.Dm=e.matrixIds,n}return HN(e,t),e.prototype.getMatrixId=function(t){return this.Dm[t]},e.prototype.getMatrixIds=function(){return this.Dm},e}(IS),KN=WN;function YN(t,e,n){var r=[],i=[],o=[],a=[],s=[],l=void 0!==n?n:[],c=Mr(t.SupportedCRS),h=c.getMetersPerUnit(),f="ne"==c.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(l.length>0)||u(l,(function(n){return e.Identifier==n.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===n.TileMatrix}))){i.push(e.Identifier);var n=28e-5*e.ScaleDenominator/h,c=e.TileWidth,p=e.TileHeight;f?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),r.push(n),a.push(c==p?c:[c,p]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new WN({extent:e,origins:o,resolutions:r,matrixIds:i,tileSizes:a,sizes:s})}var XN=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZN=function(t){function e(e){var n=this,r=void 0!==e.requestEncoding?e.requestEncoding:qN,i=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=WS(e.url)),(n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).Aa=void 0!==e.version?e.version:"1.0.0",n.sc=void 0!==e.format?e.format:"image/jpeg",n.Nm=void 0!==e.dimensions?e.dimensions:{},n.$u=e.layer,n.Lm=e.matrixSet,n.ci=e.style,n.zm=r,n.setKey(n.Fm()),o&&o.length>0&&(n.tileUrlFunction=qS(o.map(n.createFromWMTSTemplate.bind(n)))),n}return XN(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(qS(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.Nm},e.prototype.getFormat=function(){return this.sc},e.prototype.getLayer=function(){return this.$u},e.prototype.getMatrixSet=function(){return this.Lm},e.prototype.getRequestEncoding=function(){return this.zm},e.prototype.getStyle=function(){return this.ci},e.prototype.getVersion=function(){return this.Aa},e.prototype.Fm=function(){var t=0,e=[];for(var n in this.Nm)e[t++]=n+"-"+this.Nm[n];return e.join("/")},e.prototype.updateDimensions=function(t){U(this.Nm,t),this.setKey(this.Fm())},e.prototype.createFromWMTSTemplate=function(t){var e=this.zm,n={layer:this.$u,style:this.ci,tilematrixset:this.Lm};e==qN&&U(n,{Service:"WMTS",Request:"GetTile",Version:this.Aa,Format:this.sc}),t=e==qN?Uj(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}));var r=this.tileGrid,i=this.Nm;return function(n,o,a){if(n){var s={TileMatrix:r.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};U(s,i);var l=t;return e==qN?Uj(l,s):l.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}},e}(EP),JN=function(){function t(t){this.Um,this.Bm,this.Gm,this.qm=void 0===t||t,this.Vm=0}return t.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},n=this.Gm;if(n){var r=n.next;e.prev=n,e.next=r,n.next=e,r&&(r.prev=e),n===this.Bm&&(this.Bm=e)}else this.Um=e,this.Bm=e,this.qm&&(e.next=e,e.prev=e);this.Gm=e,this.Vm++},t.prototype.removeItem=function(){var t=this.Gm;if(t){var e=t.next,n=t.prev;e&&(e.prev=n),n&&(n.next=e),this.Gm=e||n,this.Um===this.Bm?(this.Gm=void 0,this.Um=void 0,this.Bm=void 0):this.Um===t?this.Um=this.Gm:this.Bm===t&&(this.Bm=n?this.Gm.prev:this.Gm),this.Vm--}},t.prototype.firstItem=function(){if(this.Gm=this.Um,this.Gm)return this.Gm.data},t.prototype.lastItem=function(){if(this.Gm=this.Bm,this.Gm)return this.Gm.data},t.prototype.nextItem=function(){if(this.Gm&&this.Gm.next)return this.Gm=this.Gm.next,this.Gm.data},t.prototype.getNextItem=function(){if(this.Gm&&this.Gm.next)return this.Gm.next.data},t.prototype.prevItem=function(){if(this.Gm&&this.Gm.prev)return this.Gm=this.Gm.prev,this.Gm.data},t.prototype.getPrevItem=function(){if(this.Gm&&this.Gm.prev)return this.Gm.prev.data},t.prototype.getCurrItem=function(){if(this.Gm)return this.Gm.data},t.prototype.setFirstItem=function(){this.qm&&this.Gm&&(this.Um=this.Gm,this.Bm=this.Gm.prev)},t.prototype.concat=function(t){if(t.Gm){if(this.Gm){var e=this.Gm.next;this.Gm.next=t.Um,t.Um.prev=this.Gm,e.prev=t.Bm,t.Bm.next=e,this.Vm+=t.Vm}else this.Gm=t.Gm,this.Um=t.Um,this.Bm=t.Bm,this.Vm=t.Vm;t.Gm=void 0,t.Um=void 0,t.Bm=void 0,t.Vm=0}},t.prototype.getLength=function(){return this.Vm},t}(),QN={};QN.AssertionError=b,QN.Collection=bt,QN.Collection.CollectionEvent=yt,QN.DataTile=Ds,QN.Disposable=N,QN.Feature=nl,QN.Feature.createStyleFunction=el,QN.Geolocation=Qv,QN.Image=sf,QN.Image.listenImage=af,QN.ImageBase=rf,QN.ImageCanvas=uy,QN.ImageTile=hy,QN.Kinetic=Zw,QN.Map=nP,QN.MapBrowserEvent=vo,QN.MapBrowserEventHandler=wo,QN.MapEvent=go,QN.Object=pt,QN.Object.ObjectEvent=ft,QN.Observable=ct,QN.Observable.unByKey=ut,QN.Overlay=uo,QN.PluggableMap=ms,QN.Tile=$s,QN.TileCache=MS,QN.TileQueue=ko,QN.TileQueue.getTilePriority=Eo,QN.TileRange=rS,QN.TileRange.createOrUpdate=nS,QN.VectorRenderTile=JS,QN.VectorTile=mS,QN.View=cs,QN.View.createCenterConstraint=os,QN.View.createResolutionConstraint=as,QN.View.createRotationConstraint=ss,QN.View.isNoopAnimation=ls,QN.array={},QN.array.binarySearch=r,QN.array.equals=c,QN.array.extend=l,QN.array.find=u,QN.array.findIndex=h,QN.array.includes=o,QN.array.isSorted=f,QN.array.linearFindNearest=a,QN.array.numberSafeCompareFunction=i,QN.array.remove=function(t,e){var n=t.indexOf(e),r=n>-1;return r&&t.splice(n,1),r},QN.array.reverseSubArray=s,QN.array.stableSort=function(t,e){var n,r=t.length,i=Array(t.length);for(n=0;n<r;n++)i[n]={index:n,value:t[n]};for(i.sort((function(t,n){return e(t.value,n.value)||t.index-n.index})),n=0;n<t.length;n++)t[n]=i[n].value},QN.asserts={},QN.asserts.assert=w,QN.centerconstraint={},QN.centerconstraint.createExtent=I,QN.centerconstraint.none=A,QN.color={},QN.color.asArray=Et,QN.color.asString=St,QN.color.fromString=kt,QN.color.isStringColor=Ot,QN.color.normalize=Mt,QN.color.toString=Tt,QN.colorlike={},QN.colorlike.asColorLike=Pt,QN.control={},QN.control.Attribution=Te,QN.control.Control=Kt,QN.control.FullScreen=Le,QN.control.MousePosition=Qr,QN.control.OverviewMap=bs,QN.control.Rotate=xs,QN.control.ScaleLine=Os,QN.control.Zoom=Cs,QN.control.ZoomSlider=As,QN.control.ZoomToExtent=Rs,QN.control.defaults=js,QN.coordinate={},QN.coordinate.add=lr,QN.coordinate.closestOnCircle=ur,QN.coordinate.closestOnSegment=cr,QN.coordinate.createStringXY=function(t){return function(e){return br(e,t)}},QN.coordinate.degreesToStringHDMS=hr,QN.coordinate.distance=vr,QN.coordinate.equals=pr,QN.coordinate.format=fr,QN.coordinate.getWorldsAway=xr,QN.coordinate.rotate=dr,QN.coordinate.scale=gr,QN.coordinate.squaredDistance=mr,QN.coordinate.squaredDistanceToSegment=yr,QN.coordinate.toStringHDMS=function(t,e){return t?hr("NS",t[1],e)+" "+hr("EW",t[0],e):""},QN.coordinate.toStringXY=br,QN.coordinate.wrapX=wr,QN.css={},QN.css.CLASS_COLLAPSED=Qt,QN.css.CLASS_CONTROL=Jt,QN.css.CLASS_HIDDEN=Yt,QN.css.CLASS_SELECTABLE="ol-selectable",QN.css.CLASS_UNSELECTABLE=Xt,QN.css.CLASS_UNSUPPORTED=Zt,QN.css.getFontParameters=ne,QN.dom={},QN.dom.createCanvasContext2D=Gt,QN.dom.outerHeight=Bt,QN.dom.outerWidth=Ut,QN.dom.removeChildren=qt,QN.dom.removeNode=Vt,QN.dom.replaceChildren=Ht,QN.dom.replaceNode=zt,QN.easing={},QN.easing.easeIn=Do,QN.easing.easeOut=Go,QN.easing.inAndOut=Uo,QN.easing.linear=Bo,QN.easing.upAndDown=function(t){return t<.5?Uo(2*t):1-Uo(2*(t-.5))},QN.events={},QN.events.Event=R,QN.events.Event.preventDefault=function(t){t.preventDefault()},QN.events.Event.stopPropagation=L,QN.events.Target=H,QN.events.condition={},QN.events.condition.all=Gs,QN.events.condition.altKeyOnly=Us,QN.events.condition.altShiftKeysOnly=Bs,QN.events.condition.always=qs,QN.events.condition.click=function(t){return t.type==yo.CLICK},QN.events.condition.doubleClick=function(t){return t.type==yo.DBLCLICK},QN.events.condition.focus=zs,QN.events.condition.focusWithTabindex=Vs,QN.events.condition.mouseActionButton=Hs,QN.events.condition.mouseOnly=Js,QN.events.condition.never=Ws,QN.events.condition.noModifierKeys=Ys,QN.events.condition.penOnly=function(t){var e=t.originalEvent;return w(void 0!==e,56),"pen"===e.pointerType},QN.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(jt?e.metaKey:e.ctrlKey)&&!e.shiftKey},QN.events.condition.pointerMove=function(t){return"pointermove"==t.type},QN.events.condition.primaryAction=Qs,QN.events.condition.shiftKeyOnly=Xs,QN.events.condition.singleClick=Ks,QN.events.condition.targetNotEditable=Zs,QN.events.condition.touchOnly=function(t){var e=t.originalEvent;return w(void 0!==e,56),"touch"===e.pointerType},QN.events.listen=it,QN.events.listenOnce=ot,QN.events.unlistenByKey=at,QN.extent={},QN.extent.applyTransform=Jn,QN.extent.approximatelyEquals=Pn,QN.extent.boundingExtent=gn,QN.extent.buffer=mn,QN.extent.clone=vn,QN.extent.closestSquaredDistanceXY=yn,QN.extent.containsCoordinate=bn,QN.extent.containsExtent=wn,QN.extent.containsXY=xn,QN.extent.coordinateRelationship=Sn,QN.extent.createEmpty=_n,QN.extent.createOrUpdate=kn,QN.extent.createOrUpdateEmpty=En,QN.extent.createOrUpdateFromCoordinate=Mn,QN.extent.createOrUpdateFromCoordinates=function(t,e){return An(En(e),t)},QN.extent.createOrUpdateFromFlatCoordinates=Tn,QN.extent.createOrUpdateFromRings=function(t,e){return Rn(En(e),t)},QN.extent.equals=On,QN.extent.extend=Cn,QN.extent.extendCoordinate=In,QN.extent.extendCoordinates=An,QN.extent.extendFlatCoordinates=Ln,QN.extent.extendRings=Rn,QN.extent.extendXY=jn,QN.extent.forEachCorner=Nn,QN.extent.getArea=$n,QN.extent.getBottomLeft=Fn,QN.extent.getBottomRight=Dn,QN.extent.getCenter=Gn,QN.extent.getCorner=Un,QN.extent.getEnlargedArea=function(t,e){var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-r)},QN.extent.getForViewAndSize=Bn,QN.extent.getHeight=zn,QN.extent.getIntersection=Vn,QN.extent.getIntersectionArea=function(t,e){return $n(Vn(t,e))},QN.extent.getMargin=function(t){return Wn(t)+zn(t)},QN.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},QN.extent.getTopLeft=qn,QN.extent.getTopRight=Hn,QN.extent.getWidth=Wn,QN.extent.intersects=Kn,QN.extent.intersectsSegment=Zn,QN.extent.isEmpty=function(t){return!1},QN.extent.returnOrUpdate=Yn,QN.extent.scaleFromCenter=Xn,QN.extent.wrapX=Qn,QN.featureloader={},QN.featureloader.loadFeaturesXhr=sl,QN.featureloader.setWithCredentials=function(t){al=t},QN.featureloader.xhr=ll,QN.format={},QN.format.EsriJSON=jl,QN.format.Feature=ul,QN.format.Feature.transformExtentWithOptions=hl,QN.format.Feature.transformGeometryWithOptions=cl,QN.format.GML=Bc,QN.format.GML2=Nc,QN.format.GML3=Gc,QN.format.GML32=qc,QN.format.GMLBase=yc,QN.format.GMLBase.GMLNS=gc,QN.format.GPX=Th,QN.format.GeoJSON=Du,QN.format.IGC=$h,QN.format.IIIFInfo=Wh,QN.format.JSONFeature=dl,QN.format.KML=Id,QN.format.KML.getDefaultFillStyle=function(){return Yf},QN.format.KML.getDefaultImageStyle=function(){return Xf},QN.format.KML.getDefaultStrokeStyle=function(){return Zf},QN.format.KML.getDefaultStyle=function(){return Qf},QN.format.KML.getDefaultStyleArray=function(){return tp},QN.format.KML.getDefaultTextStyle=function(){return Jf},QN.format.KML.readFlatCoordinates=ap,QN.format.MVT=Ud,QN.format.OSMXML=Yd,QN.format.OWS=gg,QN.format.Polyline=Tg,QN.format.Polyline.decodeDeltas=bg,QN.format.Polyline.decodeFloats=xg,QN.format.Polyline.decodeSignedIntegers=_g,QN.format.Polyline.decodeUnsignedIntegers=Eg,QN.format.Polyline.encodeDeltas=yg,QN.format.Polyline.encodeFloats=wg,QN.format.Polyline.encodeSignedIntegers=Sg,QN.format.Polyline.encodeUnsignedInteger=Mg,QN.format.Polyline.encodeUnsignedIntegers=kg,QN.format.TextFeature=Ch,QN.format.TopoJSON=Ng,QN.format.WFS=Pm,QN.format.WFS.writeFilter=function(t,e){var n=e||"1.1.0",r=Uu(Om(n),"Filter"),i={node:r};return U(i,{version:n,filter:t}),fm(r,t,[i]),r},QN.format.WKB=Rm,QN.format.WKT=Km,QN.format.WMSCapabilities=wv,QN.format.WMSGetFeatureInfo=Sv,QN.format.WMTSCapabilities=Gv,QN.format.XML=Xd,QN.format.XMLFeature=pc,QN.format.filter={},QN.format.filter.And=Gl,QN.format.filter.Bbox=Bl,QN.format.filter.Comparison=Vl,QN.format.filter.ComparisonBinary=Hl,QN.format.filter.Contains=Xl,QN.format.filter.DWithin=nu,QN.format.filter.Disjoint=Jl,QN.format.filter.During=tu,QN.format.filter.EqualTo=iu,QN.format.filter.Filter=Nl,QN.format.filter.GreaterThan=au,QN.format.filter.GreaterThanOrEqualTo=lu,QN.format.filter.Intersects=cu,QN.format.filter.IsBetween=fu,QN.format.filter.IsLike=du,QN.format.filter.IsNull=mu,QN.format.filter.LessThan=yu,QN.format.filter.LessThanOrEqualTo=wu,QN.format.filter.LogicalNary=Fl,QN.format.filter.Not=Su,QN.format.filter.NotEqualTo=ku,QN.format.filter.Or=Mu,QN.format.filter.ResourceId=Ou,QN.format.filter.Spatial=Kl,QN.format.filter.Within=Cu,QN.format.filter.and=Iu,QN.format.filter.bbox=Au,QN.format.filter.between=function(t,e,n){return new fu(t,e,n)},QN.format.filter.contains=function(t,e,n){return new Xl(t,e,n)},QN.format.filter.disjoint=function(t,e,n){return new Jl(t,e,n)},QN.format.filter.during=function(t,e,n){return new tu(t,e,n)},QN.format.filter.dwithin=function(t,e,n,r,i){return new nu(t,e,n,r,i)},QN.format.filter.equalTo=function(t,e,n){return new iu(t,e,n)},QN.format.filter.greaterThan=function(t,e){return new au(t,e)},QN.format.filter.greaterThanOrEqualTo=function(t,e){return new lu(t,e)},QN.format.filter.intersects=function(t,e,n){return new cu(t,e,n)},QN.format.filter.isNull=function(t){return new mu(t)},QN.format.filter.lessThan=function(t,e){return new yu(t,e)},QN.format.filter.lessThanOrEqualTo=function(t,e){return new wu(t,e)},QN.format.filter.like=function(t,e,n,r,i,o){return new du(t,e,n,r,i,o)},QN.format.filter.not=function(t){return new Su(t)},QN.format.filter.notEqualTo=function(t,e,n){return new ku(t,e,n)},QN.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Mu,e))},QN.format.filter.resourceId=function(t){return new Ou(t)},QN.format.filter.within=function(t,e,n){return new Cu(t,e,n)},QN.format.xlink={},QN.format.xlink.readHref=Zd,QN.format.xsd={},QN.format.xsd.readBoolean=bc,QN.format.xsd.readBooleanString=wc,QN.format.xsd.readDateTime=xc,QN.format.xsd.readDecimal=Sc,QN.format.xsd.readDecimalString=_c,QN.format.xsd.readNonNegativeIntegerString=Ec,QN.format.xsd.readPositiveInteger=kc,QN.format.xsd.readString=Mc,QN.format.xsd.writeBooleanTextNode=Tc,QN.format.xsd.writeCDATASection=Oc,QN.format.xsd.writeDateTimeTextNode=Pc,QN.format.xsd.writeDecimalTextNode=Cc,QN.format.xsd.writeNonNegativeIntegerTextNode=Ic,QN.format.xsd.writeStringTextNode=Ac,QN.functions={},QN.functions.FALSE=F,QN.functions.TRUE=$,QN.functions.VOID=D,QN.functions.memoizeOne=G,QN.geom={},QN.geom.Circle=ny,QN.geom.Geometry=Qo,QN.geom.GeometryCollection=ju,QN.geom.LineString=wl,QN.geom.LinearRing=Pa,QN.geom.MultiLineString=Sl,QN.geom.MultiPoint=kl,QN.geom.MultiPolygon=Tl,QN.geom.Point=Ia,QN.geom.Polygon=Ja,QN.geom.Polygon.circular=Qa,QN.geom.Polygon.fromCircle=es,QN.geom.Polygon.fromExtent=ts,QN.geom.Polygon.makeRegular=ns,QN.geom.SimpleGeometry=ra,QN.geom.SimpleGeometry.getStrideForLayout=ea,QN.geom.SimpleGeometry.transformGeom2D=na,QN.geom.flat={},QN.geom.flat.area={},QN.geom.flat.area.linearRing=Ea,QN.geom.flat.area.linearRings=Ma,QN.geom.flat.area.linearRingss=Ta,QN.geom.flat.center={},QN.geom.flat.center.linearRingss=El,QN.geom.flat.closest={},QN.geom.flat.closest.arrayMaxSquaredDelta=aa,QN.geom.flat.closest.assignClosestArrayPoint=ua,QN.geom.flat.closest.assignClosestMultiArrayPoint=ca,QN.geom.flat.closest.assignClosestPoint=la,QN.geom.flat.closest.maxSquaredDelta=oa,QN.geom.flat.closest.multiArrayMaxSquaredDelta=sa,QN.geom.flat.contains={},QN.geom.flat.contains.linearRingContainsExtent=Aa,QN.geom.flat.contains.linearRingContainsXY=La,QN.geom.flat.contains.linearRingsContainsXY=Ra,QN.geom.flat.contains.linearRingssContainsXY=ja,QN.geom.flat.deflate={},QN.geom.flat.deflate.deflateCoordinate=ha,QN.geom.flat.deflate.deflateCoordinates=fa,QN.geom.flat.deflate.deflateCoordinatesArray=pa,QN.geom.flat.deflate.deflateMultiCoordinatesArray=da,QN.geom.flat.flip={},QN.geom.flat.flip.flipXY=mg,QN.geom.flat.geodesic={},QN.geom.flat.geodesic.greatCircleArc=function(t,e,n,r,i,o){var a=Mr("EPSG:4326"),s=Math.cos(O(e)),l=Math.sin(O(e)),u=Math.cos(O(r)),c=Math.sin(O(r)),h=Math.cos(O(n-t)),f=Math.sin(O(n-t)),p=l*c+s*u*h;return ry((function(e){if(1<=p)return[n,r];var i=e*Math.acos(p),o=Math.cos(i),a=Math.sin(i),d=f*u,g=s*c-l*u*h,m=Math.atan2(d,g),v=Math.asin(l*o+s*a*Math.cos(m));return[T(O(t)+Math.atan2(Math.sin(m)*a*s,o-l*Math.sin(v))),T(v)]}),jr(a,i),o)},QN.geom.flat.geodesic.meridian=iy,QN.geom.flat.geodesic.parallel=oy,QN.geom.flat.inflate={},QN.geom.flat.inflate.inflateCoordinates=Sa,QN.geom.flat.inflate.inflateCoordinatesArray=_a,QN.geom.flat.inflate.inflateMultiCoordinatesArray=ka,QN.geom.flat.interiorpoint={},QN.geom.flat.interiorpoint.getInteriorPointOfArray=Na,QN.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=$a,QN.geom.flat.interpolate={},QN.geom.flat.interpolate.interpolatePoint=gl,QN.geom.flat.interpolate.lineStringCoordinateAtM=ml,QN.geom.flat.interpolate.lineStringsCoordinateAtM=vl,QN.geom.flat.intersectsextent={},QN.geom.flat.intersectsextent.intersectsLineString=Da,QN.geom.flat.intersectsextent.intersectsLineStringArray=Ga,QN.geom.flat.intersectsextent.intersectsLinearRing=Ua,QN.geom.flat.intersectsextent.intersectsLinearRingArray=Ba,QN.geom.flat.intersectsextent.intersectsLinearRingMultiArray=za,QN.geom.flat.length={},QN.geom.flat.length.lineStringLength=yl,QN.geom.flat.length.linearRingLength=function(t,e,n,r){var i=yl(t,e,n,r),o=t[n-r]-t[e],a=t[n-r+1]-t[e+1];return i+Math.sqrt(o*o+a*a)},QN.geom.flat.orient={},QN.geom.flat.orient.linearRingIsClockwise=qa,QN.geom.flat.orient.linearRingsAreOriented=Ha,QN.geom.flat.orient.linearRingssAreOriented=Wa,QN.geom.flat.orient.orientLinearRings=Ka,QN.geom.flat.orient.orientLinearRingsArray=Ya,QN.geom.flat.reverse={},QN.geom.flat.reverse.coordinates=Va,QN.geom.flat.segments={},QN.geom.flat.segments.forEach=Fa,QN.geom.flat.simplify={},QN.geom.flat.simplify.douglasPeucker=ga,QN.geom.flat.simplify.douglasPeuckerArray=ma,QN.geom.flat.simplify.douglasPeuckerMultiArray=function(t,e,n,r,i,o,a,s){for(var l=0,u=n.length;l<u;++l){var c=n[l],h=[];a=ma(t,e,c,r,i,o,a,h),s.push(h),e=c[c.length-1]}return a},QN.geom.flat.simplify.quantize=ba,QN.geom.flat.simplify.quantizeArray=wa,QN.geom.flat.simplify.quantizeMultiArray=xa,QN.geom.flat.simplify.radialDistance=va,QN.geom.flat.simplify.simplifyLineString=function(t,e,n,r,i,o,a){var s=void 0!==a?a:[];return o||(n=va(t,e,n,r,i,s,0),t=s,e=0,r=2),s.length=ga(t,e,n,r,i,s,0),s},QN.geom.flat.simplify.snap=ya,QN.geom.flat.straightchunk={},QN.geom.flat.straightchunk.matchingChunk=ay,QN.geom.flat.textpath={},QN.geom.flat.textpath.drawTextOnPath=sy,QN.geom.flat.topology={},QN.geom.flat.topology.lineStringIsClosed=function(t,e,n,r){var i=n-r;return t[e]===t[i]&&t[e+1]===t[i+1]&&(n-e)/r>3&&!!Ea(t,e,n,r)},QN.geom.flat.transform={},QN.geom.flat.transform.rotate=Ko,QN.geom.flat.transform.scale=Yo,QN.geom.flat.transform.transform2D=Wo,QN.geom.flat.transform.translate=Xo,QN.has={},QN.has.DEVICE_PIXEL_RATIO=Nt,QN.has.FIREFOX=At,QN.has.IMAGE_DECODE=Ft,QN.has.MAC=jt,QN.has.PASSIVE_EVENT_LISTENERS=Dt,QN.has.SAFARI=Lt,QN.has.WEBKIT=Rt,QN.has.WORKER_OFFSCREEN_CANVAS=$t,QN.interaction={},QN.interaction.DoubleClickZoom=yy,QN.interaction.DragAndDrop=xy,QN.interaction.DragAndDrop.DragAndDropEvent=wy,QN.interaction.DragBox=Py,QN.interaction.DragBox.DragBoxEvent=Oy,QN.interaction.DragPan=Iy,QN.interaction.DragRotate=Ly,QN.interaction.DragRotateAndZoom=jy,QN.interaction.DragZoom=$y,QN.interaction.Draw=fw,QN.interaction.Draw.DrawEvent=hw,QN.interaction.Draw.createBox=function(){return function(t,e,n){var r=gn([t[0],t[t.length-1]].map((function(t){return Br(t,n)}))),i=[[Fn(r),Dn(r),Hn(r),qn(r),Fn(r)]],o=e;o?o.setCoordinates(i):o=new Ja(i);var a=Gr();return a&&o.transform(n,a),o}},QN.interaction.Draw.createRegularPolygon=function(t,e){return function(n,r,i){var o=Br(n[0],i),a=Br(n[n.length-1],i),s=Math.sqrt(mr(o,a)),l=r||es(new ny(o),t),u=e;if(!e&&0!==e){var c=a[0]-o[0],h=a[1]-o[1];u=Math.atan2(h,c)}ns(l,o,s,u);var f=Gr();return f&&l.transform(i,f),l}},QN.interaction.Extent=yw,QN.interaction.Extent.ExtentEvent=dw,QN.interaction.Interaction=my,QN.interaction.Interaction.pan=dy,QN.interaction.Interaction.zoomByDelta=gy,QN.interaction.KeyboardPan=ww,QN.interaction.KeyboardZoom=Sw,QN.interaction.Modify=Aw,QN.interaction.Modify.ModifyEvent=Ow,QN.interaction.MouseWheelZoom=jw,QN.interaction.PinchRotate=$w,QN.interaction.PinchZoom=Dw,QN.interaction.Pointer=ky,QN.interaction.Pointer.centroid=_y,QN.interaction.Select=zw,QN.interaction.Select.SelectEvent=Uw,QN.interaction.Snap=Ww,QN.interaction.Translate=Xw,QN.interaction.Translate.TranslateEvent=Yw,QN.interaction.defaults=Jw,QN.layer={},QN.layer.Base=de,QN.layer.BaseImage=tx,QN.layer.BaseTile=ix,QN.layer.BaseVector=Uy,QN.layer.Graticule=cx,QN.layer.Group=fo,QN.layer.Heatmap=Xx,QN.layer.Image=tS,QN.layer.Layer=Ee,QN.layer.Layer.inView=ke,QN.layer.MapboxVector=oO,QN.layer.MapboxVector.getMapboxPath=QT,QN.layer.MapboxVector.normalizeGlyphsUrl=eO,QN.layer.MapboxVector.normalizeSourceUrl=rO,QN.layer.MapboxVector.normalizeSpriteUrl=tO,QN.layer.MapboxVector.normalizeStyleUrl=nO,QN.layer.Tile=sO,QN.layer.Vector=Hb,QN.layer.VectorImage=hO,QN.layer.VectorTile=dS,QN.layer.WebGLPoints=JO,QN.layer.WebGLTile=tP,QN.loadingstrategy={},QN.loadingstrategy.all=ew,QN.loadingstrategy.bbox=function(t,e){return[t]},QN.loadingstrategy.tile=function(t){return function(e,n,r){var i=t.getZForResolution(Hr(n,r)),o=t.getTileRangeForExtentAndZ(Vr(e,r),i),a=[],s=[i,0,0];for(s[1]=o.minX;s[1]<=o.maxX;++s[1])for(s[2]=o.minY;s[2]<=o.maxY;++s[2])a.push(zr(t.getTileCoordExtent(s),r));return a}},QN.math={},QN.math.clamp=x,QN.math.cosh=S,QN.math.lerp=C,QN.math.log2=_,QN.math.modulo=P,QN.math.solveLinearSystem=M,QN.math.squaredDistance=E,QN.math.squaredSegmentDistance=k,QN.math.toDegrees=T,QN.math.toRadians=O,QN.net={},QN.net.ClientError=sP,QN.net.ResponseError=aP,QN.net.getJSON=lP,QN.net.jsonp=iP,QN.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(oP=XMLHttpRequest),global.XMLHttpRequest=t},QN.net.resolveUrl=uP,QN.net.restoreXHR=function(){global.XMLHttpRequest=oP},QN.obj={},QN.obj.assign=U,QN.obj.clear=B,QN.obj.getValues=z,QN.obj.isEmpty=V,QN.proj={},QN.proj.Projection=Be,QN.proj.Units={},QN.proj.Units.METERS_PER_UNIT=Ge,QN.proj.Units.fromCode=De,QN.proj.addCommon=Kr,QN.proj.addCoordinateTransforms=Ar,QN.proj.addEquivalentProjections=Or,QN.proj.addEquivalentTransforms=Pr,QN.proj.addProjection=kr,QN.proj.addProjections=Er,QN.proj.clearAllProjections=function(){sn(),hn()},QN.proj.clearUserProjection=function(){Fr=null},QN.proj.cloneTransform=Sr,QN.proj.createProjection=Cr,QN.proj.createSafeCoordinateTransform=Wr,QN.proj.createTransformFromCoordinateTransform=Ir,QN.proj.epsg3857={},QN.proj.epsg3857.EXTENT=He,QN.proj.epsg3857.HALF_SIZE=qe,QN.proj.epsg3857.MAX_SAFE_Y=Ke,QN.proj.epsg3857.PROJECTIONS=Xe,QN.proj.epsg3857.RADIUS=Ve,QN.proj.epsg3857.WORLD_EXTENT=We,QN.proj.epsg3857.fromEPSG4326=Ze,QN.proj.epsg3857.toEPSG4326=Je,QN.proj.epsg4326={},QN.proj.epsg4326.EXTENT=en,QN.proj.epsg4326.METERS_PER_UNIT=nn,QN.proj.epsg4326.PROJECTIONS=on,QN.proj.epsg4326.RADIUS=tn,QN.proj.equivalent=Lr,QN.proj.fromLonLat=function(t,e){return Nr(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},QN.proj.fromUserCoordinate=Br,QN.proj.fromUserExtent=Vr,QN.proj.fromUserResolution=Hr,QN.proj.get=Mr,QN.proj.getPointResolution=Tr,QN.proj.getTransform=jr,QN.proj.getTransformFromProjections=Rr,QN.proj.getUserProjection=Gr,QN.proj.identityTransform=_r,QN.proj.proj4={},QN.proj.proj4.register=function(t){var e,n,r=Object.keys(t.defs),i=r.length;for(e=0;e<i;++e){var o=r[e];if(!Mr(o)){var a=t.defs(o),s=a.units;s||"longlat"!==a.projName||(s=Ue.DEGREES),kr(new Be({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:s}))}}for(e=0;e<i;++e){var l=r[e],u=Mr(l);for(n=0;n<i;++n){var c=r[n],h=Mr(c);if(!pn(l,c))if(t.defs[l]===t.defs[c])Or([u,h]);else{var f=t(l,c);Ar(u,h,Wr(u,h,f.forward),Wr(h,u,f.inverse))}}}},QN.proj.projections={},QN.proj.projections.add=un,QN.proj.projections.clear=sn,QN.proj.projections.get=ln,QN.proj.setUserProjection=Dr,QN.proj.toLonLat=function(t,e){var n=Nr(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=P(r+180,360)-180),n},QN.proj.toUserCoordinate=Ur,QN.proj.toUserExtent=zr,QN.proj.toUserResolution=qr,QN.proj.transform=Nr,QN.proj.transformExtent=$r,QN.proj.transformWithProjections=function(t,e,n){return Rr(e,n)(t)},QN.proj.transforms={},QN.proj.transforms.add=fn,QN.proj.transforms.clear=hn,QN.proj.transforms.get=pn,QN.proj.transforms.remove=function(t,e){var n=t.getCode(),r=e.getCode(),i=cn[n][r];return delete cn[n][r],V(cn[n])&&delete cn[n],i},QN.proj.useGeographic=function(){Dr("EPSG:4326")},QN.render={},QN.render.Box=My,QN.render.Event=Si,QN.render.Feature=jd,QN.render.VectorContext=Ky,QN.render.canvas={},QN.render.canvas.Builder=Xy,QN.render.canvas.BuilderGroup=sb,QN.render.canvas.Executor=Mb,QN.render.canvas.ExecutorGroup=Ib,QN.render.canvas.ExecutorGroup.getPixelIndexArray=Cb,QN.render.canvas.ImageBuilder=Jy,QN.render.canvas.Immediate=Lb,QN.render.canvas.Instruction={},QN.render.canvas.Instruction.beginPathInstruction=qy,QN.render.canvas.Instruction.closePathInstruction=Hy,QN.render.canvas.Instruction.fillInstruction=zy,QN.render.canvas.Instruction.strokeInstruction=Vy,QN.render.canvas.LineStringBuilder=tb,QN.render.canvas.PolygonBuilder=nb,QN.render.canvas.TextBuilder=ob,QN.render.canvas.checkedFonts=Li,QN.render.canvas.defaultFillStyle=ki,QN.render.canvas.defaultFont=_i,QN.render.canvas.defaultLineCap=Ei,QN.render.canvas.defaultLineDash=Mi,QN.render.canvas.defaultLineDashOffset=0,QN.render.canvas.defaultLineJoin=Ti,QN.render.canvas.defaultLineWidth=1,QN.render.canvas.defaultMiterLimit=Oi,QN.render.canvas.defaultPadding=Ai,QN.render.canvas.defaultStrokeStyle=Pi,QN.render.canvas.defaultTextAlign=Ci,QN.render.canvas.defaultTextBaseline=Ii,QN.render.canvas.drawImageOrLabel=qi,QN.render.canvas.hitdetect={},QN.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=Rb,QN.render.canvas.hitdetect.createHitDetectionImageData=jb,QN.render.canvas.hitdetect.hitDetect=Nb,QN.render.canvas.labelCache=Ri,QN.render.canvas.measureAndCacheTextWidth=zi,QN.render.canvas.measureTextHeight=Gi,QN.render.canvas.measureTextWidth=Bi,QN.render.canvas.measureTextWidths=Vi,QN.render.canvas.registerFont=Di,QN.render.canvas.rotateAtOffset=function(t,e,n,r){0!==e&&(t.translate(n,r),t.rotate(e),t.translate(-n,-r))},QN.render.canvas.textHeights=Fi,QN.render.getRenderPixel=function(t,e){var n=e.slice(0);return oi(t.inversePixelTransform.slice(),n),n},QN.render.getVectorContext=ox,QN.render.toContext=function(t,e){var n=t.canvas,r=e||{},i=r.pixelRatio||Nt,o=r.size;o&&(n.width=o[0]*i,n.height=o[1]*i,n.style.width=o[0]+"px",n.style.height=o[1]+"px");var a=[0,0,n.width,n.height],s=si([1,0,0,1,0,0],i,i);return new Lb(t,i,a,s,0)},QN.renderer={},QN.renderer.Composite=Wi,QN.renderer.Layer=ub,QN.renderer.Map=wi,QN.renderer.canvas={},QN.renderer.canvas.ImageLayer=Jx,QN.renderer.canvas.Layer=hb,QN.renderer.canvas.TileLayer=aS,QN.renderer.canvas.VectorImageLayer=uO,QN.renderer.canvas.VectorLayer=Vb,QN.renderer.canvas.VectorTileLayer=fS,QN.renderer.vector={},QN.renderer.vector.defaultOrder=Fb,QN.renderer.vector.getSquaredTolerance=Db,QN.renderer.vector.getTolerance=Gb,QN.renderer.vector.renderFeature=Ub,QN.renderer.webgl={},QN.renderer.webgl.Layer=Fx,QN.renderer.webgl.Layer.colorDecodeId=$x,QN.renderer.webgl.Layer.colorEncodeId=Nx,QN.renderer.webgl.Layer.getBlankImageData=function(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t},QN.renderer.webgl.Layer.writePointFeatureToBuffers=function(t,e,n,r,i,o){var a=3+i,s=t[e+0],l=t[e+1],u=Lx;u.length=i;for(var c=0;c<u.length;c++)u[c]=t[e+2+c];var h=o?o.vertexPosition:0,f=o?o.indexPosition:0,p=h/a;return jx(n,h,s,l,0),u.length&&n.set(u,h+3),jx(n,h+=a,s,l,1),u.length&&n.set(u,h+3),jx(n,h+=a,s,l,2),u.length&&n.set(u,h+3),jx(n,h+=a,s,l,3),u.length&&n.set(u,h+3),h+=a,r[f++]=p,r[f++]=p+1,r[f++]=p+3,r[f++]=p+1,r[f++]=p+2,r[f++]=p+3,Rx.vertexPosition=h,Rx.indexPosition=f,Rx},QN.renderer.webgl.PointsLayer=Vx,QN.renderer.webgl.TileLayer=EO,QN.renderer.webgl.TileLayer.Attributes=yO,QN.renderer.webgl.TileLayer.Uniforms=vO,QN.reproj={},QN.reproj.Image=wP,QN.reproj.Tile=SP,QN.reproj.Triangulation=hP,QN.reproj.calculateSourceExtentResolution=vP,QN.reproj.calculateSourceResolution=mP,QN.reproj.common={},QN.reproj.common.ENABLE_RASTER_REPROJECTION=!0,QN.reproj.common.ERROR_THRESHOLD=.5,QN.reproj.render=yP,QN.resolutionconstraint={},QN.resolutionconstraint.createMinMaxResolution=Ro,QN.resolutionconstraint.createSnapToPower=Lo,QN.resolutionconstraint.createSnapToResolutions=Ao,QN.rotationconstraint={},QN.rotationconstraint.createSnapToN=$o,QN.rotationconstraint.createSnapToZero=Fo,QN.rotationconstraint.disable=jo,QN.rotationconstraint.none=No,QN.size={},QN.size.buffer=hs,QN.size.hasArea=fs,QN.size.scale=ps,QN.size.toSize=ds,QN.source={},QN.source.BingMaps=OP,QN.source.BingMaps.quadKey=TP,QN.source.CartoDB=AP,QN.source.Cluster=RP,QN.source.DataTile=NP,QN.source.GeoTIFF=Pj,QN.source.IIIF=Nj,QN.source.Image=Gj,QN.source.Image.ImageSourceEvent=Fj,QN.source.Image.defaultImageLoadFunction=Dj,QN.source.ImageArcGISRest=zj,QN.source.ImageCanvas=qj,QN.source.ImageMapGuide=Wj,QN.source.ImageStatic=Yj,QN.source.ImageWMS=nN,QN.source.OGCMapTile=hN,QN.source.OGCVectorTile=pN,QN.source.OSM=mN,QN.source.OSM.ATTRIBUTION=gN,QN.source.Raster=ON,QN.source.Raster.Processor=SN,QN.source.Raster.RasterSourceEvent=_N,QN.source.Raster.newImageData=bN,QN.source.Source=Xb,QN.source.Stamen=LN,QN.source.Tile=BS,QN.source.Tile.TileSourceEvent=US,QN.source.TileArcGISRest=jN,QN.source.TileDebug=$N,QN.source.TileImage=EP,QN.source.TileJSON=DN,QN.source.TileWMS=UN,QN.source.UTFGrid=VN,QN.source.UTFGrid.CustomTile=zN,QN.source.UrlTile=YS,QN.source.Vector=iw,QN.source.Vector.VectorSourceEvent=rw,QN.source.VectorTile=t_,QN.source.VectorTile.defaultLoadFunction=e_,QN.source.WMTS=ZN,QN.source.WMTS.optionsFromCapabilities=function(t,e){var n=u(t.Contents.Layer,(function(t,n,r){return t.Identifier==e.layer}));if(null===n)return null;var r,i=t.Contents.TileMatrixSet;(r=n.TileMatrixSetLink.length>1?h(n.TileMatrixSetLink,"projection"in e?function(t,n,r){var o=u(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=Mr(o),s=Mr(e.projection);return a&&s?Lr(a,s):o==e.projection}:function(t,n,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(r=0);var a=n.TileMatrixSetLink[r].TileMatrixSet,s=n.TileMatrixSetLink[r].TileMatrixSetLimits,l=n.Format[0];"format"in e&&(l=e.format),(r=h(n.Style,(function(t,n,r){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(r=0);var c=n.Style[r].Identifier,f={};"Dimension"in n&&n.Dimension.forEach((function(t,e,n){var r=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),f[r]=i}));var p,d=u(t.Contents.TileMatrixSet,(function(t,e,n){return t.Identifier==a})),g=d.SupportedCRS;if(g&&(p=Mr(g)),"projection"in e){var m=Mr(e.projection);m&&(p&&!Lr(m,p)||(p=m))}var v=!1,y="ne"==p.getAxisOrientation().substr(0,2),b=d.TileMatrix[0],w={MinTileCol:0,MinTileRow:0,MaxTileCol:b.MatrixWidth-1,MaxTileRow:b.MatrixHeight-1};if(s){w=s[s.length-1];var x=u(d.TileMatrix,(function(t){return t.Identifier===w.TileMatrix||d.Identifier+":"+t.Identifier===w.TileMatrix}));x&&(b=x)}var S=28e-5*b.ScaleDenominator/p.getMetersPerUnit(),_=y?[b.TopLeftCorner[1],b.TopLeftCorner[0]]:b.TopLeftCorner,k=b.TileWidth*S,E=b.TileHeight*S,M=d.BoundingBox,T=[_[0]+k*w.MinTileCol,_[1]-E*(1+w.MaxTileRow),_[0]+k*(1+w.MaxTileCol),_[1]-E*w.MinTileRow];if(void 0!==M&&!wn(M,T)){var O=n.WGS84BoundingBox,P=Mr("EPSG:4326").getExtent();if(T=M,O)v=O[0]===P[0]&&O[2]===P[2];else{var C=$r(M,d.SupportedCRS,"EPSG:4326");v=C[0]-1e-10<=P[0]&&C[2]+1e-10>=P[2]}}var I=YN(d,T,s),A=[],L=e.requestEncoding;if(L=void 0!==L?L:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var R=t.OperationsMetadata.GetTile.DCP.HTTP.Get,j=0,N=R.length;j<N;++j)if(R[j].Constraint){var $=u(R[j].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===L&&(L=$[0]),L!==qN)break;o($,qN)&&A.push(R[j].href)}else R[j].href&&(L=qN,A.push(R[j].href));return 0===A.length&&(L="REST",n.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(l=t.format,A.push(t.template))}))),{urls:A,layer:e.layer,matrixSet:a,format:l,projection:p,requestEncoding:L,tileGrid:I,style:c,dimensions:f,wrapX:v,crossOrigin:e.crossOrigin}},QN.source.XYZ=CP,QN.source.Zoomify=Lj,QN.source.Zoomify.CustomTile=Aj,QN.source.common={},QN.source.common.DEFAULT_WMS_VERSION=fP,QN.source.common.IMAGE_SMOOTHING_DISABLED=pP,QN.source.ogcTileUtil={},QN.source.ogcTileUtil.getMapTileUrlTemplate=oN,QN.source.ogcTileUtil.getTileSetInfo=lN,QN.source.ogcTileUtil.getVectorTileUrlTemplate=aN,QN.sphere={},QN.sphere.DEFAULT_RADIUS=er,QN.sphere.getArea=function t(e,n){var r=n||{},i=r.radius||er,o=r.projection||"EPSG:3857",a=e.getType();a!==tr.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,u,c,h,f,p=0;switch(a){case tr.POINT:case tr.MULTI_POINT:case tr.LINE_STRING:case tr.MULTI_LINE_STRING:case tr.LINEAR_RING:break;case tr.POLYGON:for(s=e.getCoordinates(),p=Math.abs(ir(s[0],i)),u=1,c=s.length;u<c;++u)p-=Math.abs(ir(s[u],i));break;case tr.MULTI_POLYGON:for(u=0,c=(s=e.getCoordinates()).length;u<c;++u)for(l=s[u],p+=Math.abs(ir(l[0],i)),h=1,f=l.length;h<f;++h)p-=Math.abs(ir(l[h],i));break;case tr.GEOMETRY_COLLECTION:var d=e.getGeometries();for(u=0,c=d.length;u<c;++u)p+=t(d[u],n);break;default:throw new Error("Unsupported geometry type: "+a)}return p},QN.sphere.getDistance=nr,QN.sphere.getLength=function t(e,n){var r=n||{},i=r.radius||er,o=r.projection||"EPSG:3857",a=e.getType();a!==tr.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,u,c,h,f,p=0;switch(a){case tr.POINT:case tr.MULTI_POINT:break;case tr.LINE_STRING:case tr.LINEAR_RING:p=rr(s=e.getCoordinates(),i);break;case tr.MULTI_LINE_STRING:case tr.POLYGON:for(u=0,c=(s=e.getCoordinates()).length;u<c;++u)p+=rr(s[u],i);break;case tr.MULTI_POLYGON:for(u=0,c=(s=e.getCoordinates()).length;u<c;++u)for(h=0,f=(l=s[u]).length;h<f;++h)p+=rr(l[h],i);break;case tr.GEOMETRY_COLLECTION:var d=e.getGeometries();for(u=0,c=d.length;u<c;++u)p+=t(d[u],n);break;default:throw new Error("Unsupported geometry type: "+a)}return p},QN.sphere.offset=or,QN.string={},QN.string.compareVersions=sr,QN.string.padNumber=ar,QN.structs={},QN.structs.LRUCache=vS,QN.structs.LinkedList=JN,QN.structs.PriorityQueue=So,QN.structs.PriorityQueue.DROP=xo,QN.structs.RBush=Wb,QN.style={},QN.style.Circle=bf,QN.style.Fill=Kh,QN.style.Icon=df,QN.style.IconImage=ff,QN.style.IconImage.get=hf,QN.style.IconImageCache=mi,QN.style.IconImageCache.shared=vi,QN.style.Image=ef,QN.style.RegularShape=vf,QN.style.Stroke=gf,QN.style.Style=Tf,QN.style.Style.createDefaultStyle=kf,QN.style.Style.createEditingStyle=Ef,QN.style.Style.toFunction=Sf,QN.style.Text=Of,QN.style.expressions={},QN.style.expressions.Operators=OO,QN.style.expressions.arrayToGlsl=AO,QN.style.expressions.colorToGlsl=LO,QN.style.expressions.expressionToGlsl=NO,QN.style.expressions.getStringNumberEquivalent=RO,QN.style.expressions.getValueType=PO,QN.style.expressions.isTypeUnique=CO,QN.style.expressions.numberToGlsl=IO,QN.style.expressions.stringToGlsl=jO,QN.style.expressions.uniformNameForVariable=HO,QN.tilecoord={},QN.tilecoord.createOrUpdate=yS,QN.tilecoord.fromKey=SS,QN.tilecoord.getCacheKeyForTileKey=xS,QN.tilecoord.getKey=wS,QN.tilecoord.getKeyZXY=bS,QN.tilecoord.hash=_S,QN.tilecoord.withinExtentAndZ=kS,QN.tilegrid={},QN.tilegrid.TileGrid=IS,QN.tilegrid.WMTS=KN,QN.tilegrid.WMTS.createFromCapabilitiesMatrixSet=YN,QN.tilegrid.common={},QN.tilegrid.common.DEFAULT_MAX_ZOOM=42,QN.tilegrid.common.DEFAULT_TILE_SIZE=Po,QN.tilegrid.createForExtent=RS,QN.tilegrid.createForProjection=$S,QN.tilegrid.createXYZ=jS,QN.tilegrid.extentFromProjection=FS,QN.tilegrid.getForProjection=AS,QN.tilegrid.wrapX=LS,QN.tileurlfunction={},QN.tileurlfunction.createFromTemplate=zS,QN.tileurlfunction.createFromTemplates=VS,QN.tileurlfunction.createFromTileUrlFunctions=qS,QN.tileurlfunction.expandUrl=WS,QN.tileurlfunction.nullTileUrlFunction=HS,QN.transform={},QN.transform.apply=oi,QN.transform.compose=ci,QN.transform.composeCssTransform=function(t,e,n,r,i,o,a){return pi(ci([1,0,0,1,0,0],t,e,n,r,i,o,a))},QN.transform.create=function(){return[1,0,0,1,0,0]},QN.transform.determinant=fi,QN.transform.invert=function(t){return hi(t,t)},QN.transform.makeInverse=hi,QN.transform.makeScale=li,QN.transform.multiply=ni,QN.transform.reset=ei,QN.transform.rotate=ai,QN.transform.scale=si;QN.transform.set=ri,QN.transform.setFromArray=ii,QN.transform.toString=pi,QN.transform.translate=ui,QN.uri={},QN.uri.appendParams=Uj,QN.util={},QN.util.VERSION=v,QN.util.abstract=p,QN.util.getUid=g,QN.vec={},QN.vec.mat4={},QN.vec.mat4.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},QN.vec.mat4.fromTransform=kx,QN.webgl={},QN.webgl.ARRAY_BUFFER=hx,QN.webgl.Buffer=wx,QN.webgl.Buffer.getArrayClassForType=bx,QN.webgl.DYNAMIC_DRAW=dx,QN.webgl.ELEMENT_ARRAY_BUFFER=fx,QN.webgl.FLOAT=gx,QN.webgl.Helper=Px,QN.webgl.Helper.computeAttributesStride=Tx,QN.webgl.PostProcessingPass=_x,QN.webgl.RenderTarget=Gx,QN.webgl.STATIC_DRAW=px,QN.webgl.STREAM_DRAW=35040,QN.webgl.ShaderBuilder={},QN.webgl.ShaderBuilder.ShaderBuilder=YO,QN.webgl.ShaderBuilder.parseLiteralStyle=XO,QN.webgl.TileTexture=gO,QN.webgl.UNSIGNED_BYTE=5121,QN.webgl.UNSIGNED_INT=5125,QN.webgl.UNSIGNED_SHORT=5123,QN.webgl.getContext=vx,QN.webgl.getSupportedExtensions=yx,QN.xml={},QN.xml.OBJECT_PROPERTY_NODE_FACTORY=ec,QN.xml.XML_SCHEMA_INSTANCE_URI=Gu,QN.xml.createElementNS=Uu,QN.xml.getAllTextContent=Bu,QN.xml.Zm=zu,QN.xml.getAttributeNS=qu,QN.xml.getDocument=hc,QN.xml.getXMLSerializer=uc,QN.xml.isDocument=Vu,QN.xml.makeArrayExtender=Wu,QN.xml.makeArrayPusher=Ku,QN.xml.makeArraySerializer=Qu,QN.xml.makeChildAppender=Ju,QN.xml.makeObjectPropertyPusher=Xu,QN.xml.makeObjectPropertySetter=Zu,QN.xml.makeReplacer=Yu,QN.xml.makeSequence=nc,QN.xml.makeSimpleNodeFactory=tc,QN.xml.makeStructureNS=rc,QN.xml.parse=Hu,QN.xml.parseNode=ic,QN.xml.pushParseAndPop=oc,QN.xml.pushSerializeAndPop=sc,QN.xml.registerDocument=function(t){cc=t},QN.xml.registerXMLSerializer=function(t){lc=t},QN.xml.serialize=ac;var t$=QN}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},n(6760);var r=n(7312);return r.default}()})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.blobUtil={})}(this,(function(t){"use strict";function e(t,e){return new Promise((function(n,r){var i=new Image;e&&(i.crossOrigin=e),i.onload=function(){n(i)},i.onerror=r,i.src=t}))}function n(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height),e}function r(t,e){t=t||[],"string"==typeof(e=e||{})&&(e={type:e});try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}function i(t){return new Promise((function(e,n){var r=new FileReader,i="function"==typeof r.readAsBinaryString;r.onloadend=function(){var t=r.result||"";if(i)return e(t);e(u(t))},r.onerror=n,i?r.readAsBinaryString(t):r.readAsArrayBuffer(t)}))}function o(t,e){var n=[c(atob(t))];return e?r(n,{type:e}):r(n)}function a(t){return i(t).then(btoa)}function s(t){var e=t.match(/data:([^;]+)/)[1],n=t.replace(/^[^,]+,/,"");return r([c(atob(n))],{type:e})}function l(t,e,n){return"function"==typeof t.toBlob?new Promise((function(r){t.toBlob(r,e,n)})):Promise.resolve(s(t.toDataURL(e,n)))}function u(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=-1;++i<r;)e+=String.fromCharCode(n[i]);return e}function c(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=-1;++i<e;)r[i]=t.charCodeAt(i);return n}t.createBlob=r,t.createObjectURL=function(t){return("undefined"!=typeof URL?URL:webkitURL).createObjectURL(t)},t.revokeObjectURL=function(t){return("undefined"!=typeof URL?URL:webkitURL).revokeObjectURL(t)},t.blobToBinaryString=i,t.base64StringToBlob=o,t.binaryStringToBlob=function(t,e){return o(btoa(t),e)},t.blobToBase64String=a,t.dataURLToBlob=s,t.blobToDataURL=function(t){return a(t).then((function(e){return"data:"+t.type+";base64,"+e}))},t.imgSrcToDataURL=function(t,r,i,o){return r=r||"image/png",e(t,i).then(n).then((function(t){return t.toDataURL(r,o)}))},t.canvasToBlob=l,t.imgSrcToBlob=function(t,r,i,o){return r=r||"image/png",e(t,i).then(n).then((function(t){return l(t,r,o)}))},t.arrayBufferToBlob=function(t,e){return r([t],e)},t.blobToArrayBuffer=function(t){return new Promise((function(e,n){var r=new FileReader;r.onloadend=function(){var t=r.result||new ArrayBuffer(0);e(t)},r.onerror=n,r.readAsArrayBuffer(t)}))},t.arrayBufferToBinaryString=u,t.binaryStringToArrayBuffer=c,Object.defineProperty(t,"__esModule",{value:!0})})),(o=o||{}).Domain=o.Domain||{},o.Domain.Category=function(t){for(var e=$.extend({},{catId:-1,name:"",isOpen:!1,parentId:-1,subCategories:[],isyLayers:[],isAllLayersSelected:!1},t),n=[],r=0;r<t.subCategories.length;r++)n.push(new o.Domain.Category(t.subCategories[r]));return e.subCategories=n,e},(o=o||{}).Domain=o.Domain||{},o.Domain.FeatureInfo=function(t){return $.extend({},{supportsGetFeatureInfo:!0,getFeatureInfoFormat:"application/json",getFeatureInfoCrs:"",supportsGetFeature:!0,getFeatureBaseUrl:"",getFeatureFormat:"application/json",getFeatureCrs:"EPSG:4326"},t)},(o=o||{}).Domain=o.Domain||{},o.Domain.FeatureResponse=function(){return{geometryObject:"",crs:"",attributes:[]}},(o=o||{}).Domain=o.Domain||{},o.Domain.Layer=function(t){for(var e={guid:"",subLayers:[],name:"",categoryId:0,visibleOnLoad:!0,isVisible:!1,id:(new o.Utils.Guid).NewGuid(),isBaseLayer:!1,previewActive:!1,opacity:1,mapLayerIndex:-1,minResolution:0,maxResolution:1/0,legendGraphicUrls:[],selectedLayerOpen:!1},n=$.extend({},e,t),r=[],i=0;i<t.subLayers.length;i++)r.push(new o.Domain.SubLayer(t.subLayers[i]));return n.subLayers=r,n},(o=o||{}).Domain=o.Domain||{},o.Domain.LayerResponse=function(){return{id:-1,isLoading:!1,exception:"",features:[]}},(o=o||{}).Domain=o.Domain||{},o.Domain.LegendGraphic=function(t){var e=$.extend({},{width:"20",height:"20",format:"image/png",request:"GetLegendGraphic",version:"1.0.0",service:"wms",layer:"",url:""},t);return{GetLegendGraphicUrl:function(){return"?"!==e.url?e.url+"Service="+e.service+"&Request="+e.request+"&Version="+e.version+"&Format="+e.format+"&Width="+e.width+"&Height="+e.height+"&Layer="+e.layer:""}}},(o=o||{}).Domain=o.Domain||{},o.Domain.MeasureResult=function(t,e,n){var r=t,i=e,o=n;function a(){return r}function s(){return i}function l(){return o}return{PolygonArea:a,EdgeLength:s,CircleArea:l,GetParsedResult:function(){return"Polygon area: "+a()+" Length: "+s()+" Circle area: "+l()}}},(o=o||{}).Domain=o.Domain||{},o.Domain.SubLayer=function(t){var e=(new o.Utils.Guid).NewGuid(),n={name:"",providerName:"",source:o.Domain.SubLayer.SOURCES.wmts,url:"",format:o.Domain.SubLayer.FORMATS.imagepng,coordinate_system:"",srs_dimension:"",matrixSet:"",extent:[-1,1,-1,1],extentUnits:"m",id:e,transparent:!0,layerIndex:-1,legendGraphicUrl:"",crossOrigin:"anonymous",featureInfoTitle:"",tooltipTemplate:"",showDialog:!0,openNewWindow:!1,openParentWindow:!1,windowWidth:500,featureInfoElement:[],editable:!1,featureInfo:new o.Domain.FeatureInfo,featureNS:"",geometryName:"geometry"},r=$.extend({},n,t);if(-1===r.legendGraphicUrl.indexOf("?")&&(r.legendGraphicUrl+="?"),""!==r.legendGraphicUrl){var i=new o.Domain.LegendGraphic({url:r.legendGraphicUrl,layer:r.name});r.legendGraphicUrl=i.GetLegendGraphicUrl()}return r},o.Domain.SubLayer.SOURCES={wmts:"WMTS",wms:"WMS",vector:"VECTOR",proxyWmts:"proxyWmts",proxyWms:"proxyWms",tms:"TMS",wfs:"WFS"},o.Domain.SubLayer.FORMATS={imagepng:"image/png",imagejpeg:"image/jpeg",geoJson:"application/json"},(o=o||{}).Events=o.Events||{},o.Events.EventHandler=function(){var t=[];return{RegisterEvent:function(e,n){t.push({eventType:e,callBack:n})},UnRegisterEvent:function(e,n){for(var r=t.length-1;0<=r;r--)if(t[r].eventType==e&&(t[r].callBack==n||!1===n)){t.splice(r,1);break}},UnRegisterAllEvents:function(){t=[]},TriggerEvent:function(e,n){for(var r=0;r<t.length;r++){var i=t[r];i.eventType===e&&i.callBack(n)}}}},o.Events.EventTypes={ChangeCenter:"ChangeCenter",ChangeResolution:"ChangeResolution",ChangeLayers:"ChangeLayers",FeatureInfoStart:"FeatureInfoStart",FeatureInfoEnd:"FeatureInfoEnd",MapConfigLoaded:"MapConfigLoaded",MapLoaded:"MapLoaded",MapMoveend:"MapMoveend",ShowExportPanel:"ShowExportPanel",MeasureMouseMove:"MeasureMouseMove",LoadingLayerEnd:"LoadingLayerEnd",LayerCreated:"LayerCreated",CachingStart:"CachingStart",CachingEnd:"CachingEnd",CachingProgress:"CachingProgress",StatusPouchDbChanged:"StatusPouchDbChanged",MeasureEnd:"MeasureEnd",DrawFeatureMouseMove:"DrawFeatureMouseMove",DrawFeatureEnd:"DrawFeatureEnd",DrawFeatureSelect:"DrawFeatureSelect",AddLayerFeatureEnd:"AddLayerFeatureEnd",ModifyFeatureEnd:"ModifyFeatureEnd",RefreshSourceDone:"RefreshSourceDone",ZoomIn:"ZoomIn",ZoomOut:"ZoomOut",TransactionSuccessful:"TransactionSuccessful",TransactionFailed:"TransactionFailed",TransactionInsertEnd:"TransactionInsertEnd",TransactionUpdateEnd:"TransactionUpdateEnd",TransactionRemoveEnd:"TransactionRemoveEnd",FeatureHasBeenDescribed:"FeatureHasBeenDescribed",GeolocationUpdated:"GeolocationUpdated",PrintBoxSelectReturnValue:"PrintBoxSelectReturnValue",MapClickCoordinate:"MapClickCoordinate",AddLayerUrlEnd:"AddLayerUrlEnd"},(o=o||{}).Facade=o.Facade||{},o.Facade.ServerConfigFacade=function(){return{GetMapConfig:function(t,e){$.getJSON(t,(function(t){e(t)}))}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Categories=function(){var t=[];function e(e){t=e.categories}return{Init:e,ReInit:function(n){t=[],e(n)},GetCategoryById:function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.catId.toString()===e.toString())return r;for(var i=0;i<t[n].subCategories.length;i++){var o=t[n].subCategories[i];if(o.catId.toString()===e.toString())return o}}},GetCategories:function(){return t}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.CustomCrsLoader=function(){return{LoadCustomCrs:function(){proj4.defs("EPSG:25831","+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),proj4.defs("EPSG:25832","+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),proj4.defs("EPSG:25833","+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),proj4.defs("EPSG:25834","+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),proj4.defs("EPSG:25835","+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),proj4.defs("EPSG:25836","+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),proj4.defs("EPSG:32631","+proj=utm +zone=31 +datum=WGS84 +units=m +no_defs"),proj4.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs"),proj4.defs("EPSG:32633","+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs"),proj4.defs("EPSG:32634","+proj=utm +zone=34 +datum=WGS84 +units=m +no_defs"),proj4.defs("EPSG:32635","+proj=utm +zone=35 +datum=WGS84 +units=m +no_defs"),proj4.defs("EPSG:32636","+proj=utm +zone=36 +datum=WGS84 +units=m +no_defs"),proj4.defs("EPSG:3575","+proj=laea +lat_0=90 +lon_0=10 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"),proj4.defs("EPSG:4258","+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs"),ol.proj.proj4.register(proj4)}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Map=o.MapAPI.Map||{},o.MapAPI.FeatureInfo=function(t,e,n,r){var i,a="assets/img/pin-md-orange.png",s=!1;function l(t){var e=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=new o.Domain.LayerResponse;i.id=r.id,i.name=r.providerName,i.isLoading=!0,e.push(i)}return e}(t);n.TriggerEvent(o.Events.EventTypes.FeatureInfoStart,e)}function u(t,n){e.get(t).then((function(t){c(n,t)}))}function c(t,e){var i,a,s;if(t.featureInfo.supportsGetFeatureInfo&&"WMS"===t.source){var l=jQuery.parseXML(e.data),u=xml.xmlToJSON(l);if(u.hasOwnProperty("msGMLOutput"))if(u.msGMLOutput.hasOwnProperty(t.providerName+"_layer")){i=[],(s=u.msGMLOutput[t.providerName+"_layer"][t.providerName+"_feature"]).constructor!==Array&&(s=[s]);for(var c=0;c<s.length;c++)i.push(s[c])}else for(var h in u.msGMLOutput)if(h.endsWith("layer")){var f=h.substr(0,h.indexOf("layer"));i=[],(s=u.msGMLOutput[h][f+"feature"]).constructor!==Array&&(s=[s]);for(var p=0;p<s.length;p++)i.push(s[p])}}else try{if(t.featureInfo.includedFields){i=[];for(var d=e.features,g=0;g<d.length;g++){var m=d[g].properties;d[g].id&&(m.id=d[g].id),i.push(m)}}else i=r.Parse(e)}catch(t){a=t}if(i){i=function(t,e){if(!e.featureInfo||!e.featureInfo.includedFields)return t;var n=function(t){var e={};return t.field&&(t.field.constructor!==Array&&(t.field=[t.field]),t.field.forEach((function(t){"picture"===t.type||"link"===t.type||"symbol"===t.type||"boolean"===t.type?(e[t.name]={name:t.alias?t.alias:t.name,type:t.type},t.baseurl&&(e[t.name].baseurl=t.baseurl,e[t.name].filetype=t.filetype?"."+t.filetype:"")):e[t.name]={name:t.alias?t.alias:t.name,unit:t.unit?t.unit:""}}))),"true"===t.capitalize&&(e._capitalize=!0),e}(e.featureInfo.includedFields),r=[];return t.forEach((function(t){r.push(function(t,e,n){var r={attributes:[]};if(1<Object.keys(t).length){for(var i in t)if("object"==typeof t[i]){var o,a=e[i];if(-1<Object.keys(e).indexOf(i)?(o=t._capitalize?t[i].name.toLowerCase().capitalizeFirstLetter():t[i].name,"symbol"===t[i].type&&t[i].baseurl||"picture"===t[i].type&&t[i].baseurl||"link"===t[i].type&&t[i].baseurl?a={url:t[i].baseurl+e[i]+t[i].filetype,type:t[i].type,name:e[i]}:t[i].unit?a+=t[i].unit:"boolean"===t[i].type&&(a="t"===a?"Ja":"Nei")):o=1===Object.keys(e).length?e._capitalize?i.toLowerCase().capitalizeFirstLetter():i:t._capitalize?t[i].name.toLowerCase().capitalizeFirstLetter():t[i].name,void 0!==n)for(var s in n)o===s&&(a=n[s][a]);r.attributes.push([o,a])}}else for(var l in e){var u=e._capitalize?l.toLowerCase().capitalizeFirstLetter():l;r.attributes.push([u,e[l]])}return r}(n,t,e.featureInfo.featureDict))})),r}(i,t);var v=new o.Domain.LayerResponse;v.id=t.id,v.name=t.providerName,v.isLoading=!1,v.features=i,v.exception=a,v.featureInfoTitle=t.featureInfoTitle,t.source!==o.Domain.SubLayer.SOURCES.proxyWms&&t.source!==o.Domain.SubLayer.SOURCES.proxyWmts&&t.source!==o.Domain.SubLayer.SOURCES.wms&&t.source!==o.Domain.SubLayer.SOURCES.wmts||(v.wms=!0),v.featureInfoElement=t.featureInfoElement,v.showDialog=t.showDialog,v.openNewWindow=t.openNewWindow,v.openParentWindow=t.openParentWindow,v.windowWidth=t.windowWidth,v.editable=t.editable,n.TriggerEvent(o.Events.EventTypes.FeatureInfoEnd,v)}}function h(t,n,r){var i,a=t.url.replace("proxy/wms","proxy/");-1<a.indexOf("?")||(a+=encodeURIComponent("?"));var s="SERVICE="+n+"&REQUEST=GETCAPABILITIES";t.source!==o.Domain.SubLayer.SOURCES.proxyWms&&t.source!==o.Domain.SubLayer.SOURCES.proxyWmts||(s=encodeURIComponent(s)),i=a+s,e.get(i).success((function(t){var e=function(t){return(new ol.format.WMSCapabilities).read(t)}(t);r(e)}))}function f(e,n){var r=t.GetInfoUrl(e,n);u(r=decodeURIComponent(r),e)}function p(){(i=document.createElement("img")).src=a,m(),document.body.appendChild(i)}function d(e){void 0===i&&p(),g(i,!0),i.style.visibility="visible",i.style.position="absolute",i.style.zIndex="11",t.ShowInfoMarker(e,i)}function g(e,n){!0===s&&(!0===n&&(void 0===i&&p(),t.RemoveInfoMarker(i),m(),s=!1),i=e)}function m(){i.style.visibility="hidden"}return String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},{HandlePointSelect:function(e,r){!0===s&&d(e),n.TriggerEvent(o.Events.EventTypes.MapClickCoordinate,e),l(r);for(var i=0;i<r.length;i++){var a=r[i];switch(a.source){case o.Domain.SubLayer.SOURCES.wmts:case o.Domain.SubLayer.SOURCES.wms:case o.Domain.SubLayer.SOURCES.proxyWms:case o.Domain.SubLayer.SOURCES.proxyWmts:f(a,e);break;case o.Domain.SubLayer.SOURCES.wfs:case o.Domain.SubLayer.SOURCES.vector:c(a,t.GetFeaturesInExtent(a,t.GetExtentForCoordinate(e,10)))}}},HandleBoxSelect:function(e,n){l(n);for(var r=0;r<n.length;r++){var i=n[r];switch(i.source){case o.Domain.SubLayer.SOURCES.wmts:case o.Domain.SubLayer.SOURCES.wms:case o.Domain.SubLayer.SOURCES.proxyWms:case o.Domain.SubLayer.SOURCES.proxyWmts:a=i,s=e,u(t.GetProxyHost()+function(t,e){var n=t.featureInfo.getFeatureCrs,r="service=WMS&version=1.3.0&request=GetFeatureInfo&TRANSPARENT="+t.transparent+"&QUERY_LAYERS="+t.name+"&INFO_FORMAT="+t.featureInfo.getFeatureInfoFormat+"&SRS="+n+"&bbox="+e+"&width=400&height=400&x=150&y=150";return r=(r=(r=decodeURIComponent(r)).substring(r.lastIndexOf("?"),r.length)).replace("?",""),r=encodeURIComponent(r),t.url[0].replace("proxy/wms","proxy/")+r}(a,s),a);break;case o.Domain.SubLayer.SOURCES.wfs:case o.Domain.SubLayer.SOURCES.vector:c(i,t.GetFeaturesInExtent(i,e))}}var a,s},CreateDefaultInfoMarker:p,SetInfoMarker:g,RemoveInfoMarker:function(){g(i,s=!0)},RemoveInfoMarkers:function(){t.RemoveInfoMarkers(void 0)},GetSupportedGetFeatureInfoFormats:function(t,e){h(t,"WMS",(function(t){var n=t.Capability.Request.GetFeatureInfo.Format;e(n)}))},GetSupportedGetFeatureFormats:function(t,e){h(t,"WFS",(function(t){var n=t.Capability.Request.GetFeature.Format;e(n)}))},SetInfoMarkerPath:function(t){a=t},ShowInfoMarker:function(t){d(t)},ShowInfoMarkers:function(e){!function(e){t.ShowInfoMarkers(e,i)}(e)}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Groups=function(){var t=[];function e(e){t=e.groups}return{Init:e,ReInit:function(n){t=[],e(n)},GetGroupById:function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.groupId.toString()===e.toString())return r;for(var i=0;i<t[n].subCategories.length;i++){var o=t[n].subCategories[i];if(o.groupId.toString()===e.toString())return o}}},GetGroups:function(){return t}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Layers=function(t){var e,n,r;function i(t){n=(e=t).layers,function(){for(var t=0,e=s(),n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.subLayers.length;i++)r.subLayers[i].layerIndex=t,t++;for(var o=l(),a=0;a<o.length;a++)for(var u=o[a],c=0;c<u.subLayers.length;c++)u.subLayers[c].layerIndex=t,t++}();for(var r=s(),i=!1,o=0;o<r.length;o++){var a=r[o];a.visibleOnLoad?(u(a),i=!0):!1===i&&(a.visibleOnLoad=!0,u(a),i=!0)}for(var f=l(),p=0;p<f.length;p++){var d=f[p];d.visibleOnLoad?c(d):h(d)}}function o(){return void 0!==e?e.layers:[]}function a(t,e){return t.id<e.id?-1:t.id>e.id?1:0}function s(){return o().filter((function(t){return!0===t.isBaseLayer}))}function l(){return o().filter((function(t){return!1===t.isBaseLayer}))}function u(e){for(var n=f(),r=0;r<n.length;r++)h(n[r]);!function(e){for(var n=e.subLayers,r=0;r<n.length;r++){var i=n[r];t.ShowBaseLayer(i)}e.isVisible=!0,function(){for(var t=p(),e=0;e<t.length;e++){var n=t[e];n.mapLayerIndex=d(n)}}()}(e)}function c(e){for(var n=e.subLayers,r=0;r<n.length;r++){var i=n[r];t.ShowLayer(i)}e.isVisible=!0}function h(e){var n=e.subLayers;e.isVisible=!1;for(var r=0;r<n.length;r++){var i=n[r];t.HideLayer(i)}e.mapLayerIndex=-1}function f(){return s().filter((function(t){return!0===t.isVisible}))}function p(){return l().filter((function(t){return!0===t.isVisible}))}function d(e){for(var n=e.subLayers,r=[],i=0;i<n.length;i++){var o=n[i],a=t.GetLayerIndex(o);null!==a&&r.push(a)}return Math.max(r)}return{Init:i,ReInit:function(t){r=n=e=void 0,i(t)},ArrangeLayers:function(){if(!r){r=!0;for(var t=l(),e=[],n=0;n<t.length;n++){var i=t[n];i.isVisible&&e.push(i)}e.sort(a),e.forEach((function(t){c(t)}))}},GetBaseLayers:s,GetOverlayLayers:l,SetBaseLayer:u,AddLayer:function(t){c(t),n.push(t)},HideLayer:h,ShowLayer:c,GetVisibleSubLayers:function(){for(var t=[],e=p(),n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.subLayers.length;i++){var o=r.subLayers[i];t.push(o)}return t},GetVisibleBaseLayers:f,GetLayerById:function(t){if(void 0!==n)for(var e=0;e<n.length;e++){var r=n[e];if(r.id.toString()===t.toString())return r}},MoveLayerToIndex:function(e,n){for(var r=e.subLayers,i=0;i<r.length;i++){var o=r[i];t.MoveLayerToIndex(o,n)}t.RedrawMap()},MoveLayerToIndexInGroup:function(){!function(){for(var t=1,n=0;n<e.groups.length&&void 0!==e.groups[n].isyLayers;n++)for(var r=0;r<e.groups[n].isyLayers.length;r++)for(var i=0;i<e.groups[n].isyLayers[r].subLayers.length;i++)e.groups[n].isyLayers[r].subLayers[i].sortingIndex=t,t+=1}(),t.UpdateLayerSortIndex(e.groups),t.SortLayerBySortIndex(),t.RedrawMap()},MoveLayerAbove:function(e,n){for(var r=d(n),i=e.subLayers,o=0;o<i.length;o++){var a=i[o];t.MoveLayerToIndex(a,r)}},ShouldBeVisible:function(){return!0}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Map=function(t,e,n,r,i,a){var s;function l(t){if("undefined"!=typeof ol){var e=new ol.proj.Projection({code:t,units:"m"});ol.proj.addProjection(e)}}function u(t){r.ShowLayer(t)}function c(t){r.SetBaseLayer(t)}function h(){return r.GetVisibleSubLayers()}function f(t){return r.GetLayerById(t)}function p(t){n.HandlePointSelect(t,h().filter((function(t){return!!t.featureInfo&&!0===t.featureInfo.supportsGetFeatureInfo})))}function d(t){n.HandleBoxSelect(t,h().filter((function(t){return!0===t.featureInfo.supportsGetFeature})))}function g(e){t.HandlePointSelect(e)}return{Init:function(n,u){(new o.MapAPI.CustomCrsLoader).LoadCustomCrs(),l("EPSG:25832"),l("EPSG:25833"),l("EPSG:25834"),l("EPSG:25835"),l("EPSG:25836"),l("EPSG:32632"),l("EPSG:32633"),l("EPSG:32634"),l("EPSG:32635"),l("EPSG:32636"),l("EPSG:4258"),s=u,t.InitMap(n,u),r.Init(u),i.Init(u),a.Init(u),e.TriggerEvent(o.Events.EventTypes.MapLoaded)},ReInit:function(e){t.ReInitMap(e),r.ReInit(e),i.ReInit(e),a.ReInit(e)},AddLayer:function(t){r.AddLayer(t)},AddDataToLayer:function(e,n){t.AddDataToLayer(e.subLayers[0],n)},RemoveDataFromLayer:function(e,n){t.RemoveDataFromLayer(e.subLayers[0],n)},ClearLayer:function(e){t.ClearLayer(e.subLayers[0])},ShowLayer:u,HideLayer:function(t){r.HideLayer(t)},GetOverlayLayers:function(){return r.GetOverlayLayers()},GetBaseLayers:function(){return r.GetBaseLayers()},GetLayerById:f,GetFirstVisibleBaseLayer:function(){return r.GetVisibleBaseLayers()[0]},SetBaseLayer:c,SetStateFromUrlParams:function(e){t.ChangeView(e),e.layers&&e.layers.split(",").forEach((function(t){var e=f(t);e&&(!0===e.isBaseLayer?c(e):u(e))}))},SetLayerOpacity:function(e,n){for(var r=e.subLayers,i=0;i<r.length;i++){var o=r[i];t.SetLayerOpacity(o,n)}t.RedrawMap()},MoveLayerToIndex:function(t,e){r.MoveLayerToIndex(t,e)},MoveLayerAbove:function(t,e){r.MoveLayerAbove(t,e)},MoveLayerToIndexInGroup:function(){r.MoveLayerToIndexInGroup()},GetCategoryById:function(t){return a.GetCategoryById(t)},GetCategories:function(){return a.GetCategories()},GetGroupById:function(t){return i.GetGroupById(t)},GetGroups:function(){return i.GetGroups()},RenderSync:function(){return t.RenderSync()},ExportMap:function(e){t.ExportMap(e)},ActivateExport:function(e){t.ActivateExport(e)},DeactivateExport:function(){t.DeactivateExport()},ActivateInfoClick:function(){t.ActivateInfoClick(p)},DeactivateInfoClick:function(){t.DeactivateInfoClick()},ShowHighlightedFeatures:function(e,n){t.ShowHighlightedFeatures(e,n)},ClearHighlightedFeatures:function(){t.ClearHighlightedFeatures()},SetHighlightStyle:function(e){t.SetHighlightStyle(e)},SetInfoMarker:function(t,e){n.SetInfoMarker(t,e)},SetImageInfoMarker:function(t){n.SetInfoMarkerPath(t),n.CreateDefaultInfoMarker()},GetSupportedGetFeatureInfoFormats:function(t,e){n.GetSupportedGetFeatureInfoFormats(t,e)},GetSupportedGetFeatureFormats:function(t,e){n.GetSupportedGetFeatureFormats(t,e)},RemoveInfoMarker:function(){n.RemoveInfoMarker()},RemoveInfoMarkers:function(){n.RemoveInfoMarkers()},ActivateBoxSelect:function(){t.ActivateBoxSelect(d)},DeactivateBoxSelect:function(){t.DeactivateBoxSelect()},GetFeatureCollection:function(e){return t.GetFeatureCollection(e)},GetFeaturesInMap:function(e){return t.GetFeaturesInMap(e)},GetFeatureExtent:function(e){return t.GetFeatureExtent(e)},InitEdit:function(e){return t.InitEdit(e)},ActivateEditClick:function(){t.ActivateEditSelect(g)},DeactivateEditClick:function(){t.DeactivateEditSelect()},UpdateFeature:function(e){t.UpdateFeature(e)},InsertFeature:function(e,n){return t.InsertFeature(e,n)},DeleteFeature:function(e){return t.DeleteFeature(e)},ActivateHoverInfo:function(){t.ActivateHoverInfo()},DeactivateHoverInfo:function(){t.DeactivateHoverInfo()},ActivateMeasure:function(e){t.ActivateMeasure(e)},DeactivateMeasure:function(){t.DeactivateMeasure()},InitOffline:function(){t.InitOffline()},ActivateOffline:function(){t.ActivateOffline()},StartCaching:function(e,n,r){t.StartCaching(e,n,r)},StopCaching:function(){t.StopCaching()},DeleteDatabase:function(e,n,r){t.DeleteDatabase(e,n,r)},CacheDatabaseExist:function(){return t.CacheDatabaseExist()},CalculateTileCount:function(e,n,r){return t.CalculateTileCount(e,n,r)},GetResource:function(e,n,r){t.GetResource(e,n,r)},GetConfigResource:function(e,n,r){t.GetConfigResource(e,n,r)},GetLayerResource:function(e,n,r){t.GetLayerResource(e,n,r)},DeactivateOffline:function(){t.DeactivateOffline()},GetResourceFromJson:function(e,n,r){t.GetResourceFromJson(e,n,r)},ActivateMeasureLine:function(e){t.ActivateMeasureLine(e)},DeactivateMeasureLine:function(){t.DeactivateMeasureLine()},ActivateAddLayerFeature:function(e){t.ActivateAddLayerFeature(e)},DeactivateAddLayerFeature:function(){t.DeactivateAddLayerFeature()},ActivateAddFeatureGps:function(e){t.ActivateAddFeatureGps(e)},AddCoordinatesGps:function(e){t.AddCoordinatesGps(e)},DeactivateAddFeatureGps:function(){t.DeactivateAddFeatureGps()},ActivateModifyFeature:function(e){t.ActivateModifyFeature(e)},DeactivateModifyFeature:function(){t.DeactivateModifyFeature()},ActivateDrawFeature:function(e){t.ActivateDrawFeature(e)},DeactivateDrawFeature:function(e){t.DeactivateDrawFeature(e)},ActivatePrintBox:function(e){t.ActivatePrintBox(e)},DeactivatePrintBox:function(){t.DeactivatePrintBox()},ActivatePrintBoxSelect:function(e){t.ActivatePrintBoxSelect(e)},DeactivatePrintBoxSelect:function(){t.DeactivatePrintBoxSelect()},ActivateAddLayerUrl:function(e){t.ActivateAddLayerUrl(e)},DeactivateAddLayerUrl:function(){t.DeactivateAddLayerUrl()},ArrangeLayers:function(){(function(){if(s){var t=0;return s.layers.forEach((function(e){e.isVisible&&e.subLayers.forEach((function(){t++}))})),t}})()===t.GetLayerCount()&&r.ArrangeLayers()},ConvertGmlToGeoJson:function(e){return t.ConvertGmlToGeoJson(e)},SetLegendGraphics:function(t){t.legendGraphicUrls=[];for(var e=0;e<t.subLayers.length;e++){var n=t.subLayers[e];t.isVisible&&(i=n,r.ShouldBeVisible(i))&&t.legendGraphicUrls.push(n.legendGraphicUrl)}var i},ExtentToGeoJson:function(e,n){t.ExtentToGeoJson(e,n)},AddZoom:function(){t.AddZoom()},AddZoomSlider:function(){t.AddZoomSlider()},AddZoomToExtent:function(e){t.AddZoomToExtent(e)},AddScaleLine:function(){t.AddScaleLine()},ZoomToLayer:function(e){t.ZoomToLayer(e)},ZoomToLayers:function(e){t.ZoomToLayers(e)},FitExtent:function(e){t.FitExtent(e)},GetCenter:function(){return t.GetCenter()},SetCenter:function(e){return t.SetCenter(e)},GetZoom:function(){return t.GetZoom()},SetZoom:function(e){t.SetZoom(e)},GetRotation:function(){return t.GetRotation()},SetRotation:function(e,n){t.SetRotation(e,n)},GetEpsgCode:function(){return t.GetEpsgCode()},GetVectorLayers:function(e,n){return t.GetVectorLayers(e,n)},GetCenterFromExtent:function(e){return t.GetCenterFromExtent(e)},GetScale:function(){return t.GetScale()},ChangeView:function(e){t.ChangeView(e)},GetLegendStyles:function(e){return t.GetLegendStyles(e)},RedrawMap:function(){t.RedrawMap()},RefreshMap:function(){t.RefreshMap()},RefreshLayerByGuid:function(e,n){t.RefreshLayerByGuid(e,n)},ShowInfoMarker:function(t){n.ShowInfoMarker(t)},ShowInfoMarkers:function(t){n.ShowInfoMarkers(t)},GetExtent:function(){return t.GetExtent()},GetVisibleSubLayers:h,GetUrlObject:function(){return t.GetUrlObject()},GetGeolocation:function(){return t.GetGeolocation()},RemoveGeolocation:function(){return t.RemoveGeolocation()},InfoClickSimulation:function(t){p(t)},SetTranslateOptions:function(e){t.SetTranslateOptions(e)},TransformCoordinates:function(e,n,r){return t.TransformCoordinates(e,n,r)},TransformFromGeographic:function(e){return t.TransformFromGeographic(e)},TransformToGeographic:function(e){return t.TransformToGeographic(e)},DescribeFeature:function(e,n){t.DescribeFeature(e,n)},RemoveIsyToken:function(){t.RemoveIsyToken()},SetIsyToken:function(e){t.SetIsyToken(e)},ShowCustomMessage:function(e){t.ShowCustomMessage(e)}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Parsers=o.MapAPI.Parsers||{},o.MapAPI.Parsers.Base=function(t){return{Parse:function(e){var n;if(void 0===e)return null;if(e.type)"FeatureCollection"===e.type&&(n="geoJson");else if(void 0!==e.length)1<=e.length&&(n="geoJson");else{if(-1<e.toLowerCase().indexOf("exception"))return function(t){(new o.MapAPI.Parsers.Exception).Parse(t)}(e);if(-1<e.toLowerCase().indexOf("<?xml"))n="kartKlifNo";else{if(-1<e.toLowerCase().indexOf("<html"))return function(t){var e=t.indexOf("<table");if(-1<e){var n=t.substring(e,t.length),r=n.indexOf("</body>");return n=n.substring(0,r),xml.xmlToJSON(n)}return[]}(e);if(!(-1<e.toLowerCase().indexOf("msgmloutput")))return null;n="fisheryDirectory"}}return t.CreateParser(n).Parse(e)}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Parsers=o.MapAPI.Parsers||{},o.MapAPI.Parsers.Exception=function(){return{Parse:function(t){throw t.replace(/(<([^>]+)>)/gi,"")}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Parsers=o.MapAPI.Parsers||{},o.MapAPI.Parsers.Factory=function(t,e,n,r){return{CreateParser:function(i){var o;switch(i){case"geoJson":o=t;break;case"gml":o=e;break;case"kartKlifNo":o=n;break;case"fisheryDirectory":o=r}return o}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Parsers=o.MapAPI.Parsers||{},o.MapAPI.Parsers.FiskeriDir=function(t){var e,n,r,i="insteadofgml";function a(a){for(var l=[],u=0;u<a.length;u++){var c=a[u],h=new o.Domain.FeatureResponse;h.attributes=s(c);var f=r[Object.keys(r)[0]].srsname,p=r[Object.keys(r)[0]][i+"coordinates"];p=p.replace(/ /g,","),h.crs=f,h.geometryObject=t.ExtentToGeoJson(e,n),l.push(h)}return l}function s(t){var o=[];for(var a in t)-1===a.toLocaleLowerCase().indexOf(i)?(o.push([a,t[a]]),"x"===a&&(e=t[a]),"y"===a&&(n=t[a])):r=t[a];return o}return{Parse:function(t){var e=[];t=(t=(t=t.replace(/:gml/g,"")).replace(/gml:/g,i)).replace(/s:x/g,"sx");var n=xml.xmlToJSON(t),r=n[Object.keys(n)[0]];for(var o in r){var s=r[o];if(s instanceof Object)for(var l in s){var u=s[l];u instanceof Array&&(e=a(u))}}return e}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Parsers=o.MapAPI.Parsers||{},o.MapAPI.Parsers.GeoJSON=function(){function t(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}return{Parse:function(e){var n,r=[];if(e.crs){var i=e.crs;i.properties.code?n=i.type+":"+i.properties.code:i.properties.name&&(n=i.properties.name.substring(i.properties.name.indexOf("EPSG"),i.properties.name.length))}if(void 0!==e.features)for(var a=e.features,s=0;s<a.length;s++){var l=a[s],u=new o.Domain.FeatureResponse;u.crs=n,u.geometryObject=l,u.attributes=t(l.properties),u.olFeature=l.olFeature,r.push(u)}else if(void 0!==e.length)for(var c=0;c<e.length;c++)if(void 0!==e[c].rows.length){var h=new o.Domain.FeatureResponse;h.crs="",h.geometryObject="",h.attributes=t(e[c].rows[0]),r.push(h)}return r}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Parsers=o.MapAPI.Parsers||{},o.MapAPI.Parsers.GML=function(){return{Parse:function(t){}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Parsers=o.MapAPI.Parsers||{},o.MapAPI.Parsers.KartKlifNo=function(){function t(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}return{Parse:function(e){var n=[];e=e.replace(/:/g,"");var r=xml.xmlToJSON(e);if(r.featureinforesponse){var i=r.featureinforesponse;if(i.fields){var a=i.fields;if(a instanceof Array)for(var s=0;s<a.length;s++)n.push(a[s]);else n.push(a)}}return function(e){for(var n=[],r=0;r<e.length;r++){var i=new o.Domain.FeatureResponse;i.attributes=t(e[r]),n.push(i)}return n}(n)}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Tools=o.MapAPI.Tools||{},o.MapAPI.Tools.Tool=function(t){var e=$.extend({},{id:"",activate:function(){},deactivate:function(){},messageObject:[],description:"",isCommand:!1},t);return e.Extend=function(t){return e=$.extend(e,t)},e},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Tools=o.MapAPI.Tools||{},o.MapAPI.Tools.ToolFactory=function(t,e){var n=[],r=[],i=t,o={};function a(t){for(var e=0;e<n.length;e++){var r=n[e];if(r.id===t)return r}return!1}return n=e.GetTools(),{AddTool:function(t){r.push(t)},GetAvailableTools:function(){for(var t=[],e=0;e<r.length;e++)t.push(r[e].id);return t},ActivateTool:function(t){for(var e=!1,n=0;n<r.length;n++){var i=r[n];i.deactivate(),i.id===t&&($.isEmptyObject(o)?i.activate():i.activate(o),e=i.isCommand)}return e},SetupTools:function(t){for(var e=0;e<t.length;e++){var n=a(t[e].id);n&&r.push(n)}},DeactivateTool:function(t){var e=a(t);e&&(o={},e.deactivate(i))},AdditionalToolOptions:function(t){o=t}}},(o=o||{}).MapAPI=o.MapAPI||{},o.MapAPI.Tools=o.MapAPI.Tools||{},o.MapAPI.Tools.Tools=function(t){var e=[],n={id:"PointSelect",description:"This tool activates a get feature info click on the map",activate:function(){t.ActivateInfoClick()},deactivate:function(){t.DeactivateInfoClick()},messageObject:[]},r=new o.MapAPI.Tools.Tool(n);e.push(r);var i=new o.MapAPI.Tools.Tool({id:"DefaultZoom",description:"This is the default tool",activate:function(){},deactivate:function(){},messageObject:[]});e.push(i);var a={id:"BoxSelect",description:"This tool activates box select functionality to the map",activate:function(){t.ActivateBoxSelect()},deactivate:function(){t.DeactivateBoxSelect()},messageObject:[]},s=new o.MapAPI.Tools.Tool(a);e.push(s);var l={id:"DrawFeature",description:"This tool lets the user draw a feature in the map",activate:function(e){t.ActivateDrawFeature(e)},deactivate:function(){t.DeactivateDrawFeature()},messageObject:[]},u=new o.MapAPI.Tools.Tool(l);e.push(u);var c={id:"ModifyFeature",description:"This tool lets the user modify feature in the map.",activate:function(e){t.ActivateModifyFeature(e)},deactivate:function(){t.DeactivateModifyFeature()},messageObject:[]},h=new o.MapAPI.Tools.Tool(c);e.push(h);var f={id:"AddLayerFeature",description:"This tool lets the user add feature to the map",activate:function(e){t.ActivateAddLayerFeature(e)},deactivate:function(){t.DeactivateAddLayerFeature()},messageObject:[]},p=new o.MapAPI.Tools.Tool(f);e.push(p);var d={id:"AddFeatureGps",description:"This tool lets the user add feature to the map with geolocation",activate:function(e){t.ActivateAddFeatureGps(e)},deactivate:function(){t.DeactivateAddFeatureGps()},messageObject:[]},g=new o.MapAPI.Tools.Tool(d);e.push(g);var m={id:"Measure",description:"This tool lets the user measure in the map",activate:function(e){t.ActivateMeasure(e)},deactivate:function(){t.DeactivateMeasure()},messageObject:[]},v=new o.MapAPI.Tools.Tool(m);e.push(v);var y={id:"MeasureLine",description:"This tool lets the user measure line in the map",activate:function(e){t.ActivateMeasureLine(e)},deactivate:function(){t.DeactivateMeasureLine()},messageObject:[]},b=new o.MapAPI.Tools.Tool(y);e.push(b);var w={id:"FeatureHoverInfo",description:"This tool allow user get info via mouse hover",activate:function(){t.ActivateHoverInfo()},deactivate:function(){t.DeactivateHoverInfo()},messageObject:[]},x=new o.MapAPI.Tools.Tool(w);e.push(x);var S={id:"FeatureEditor",description:"This tool allow user to edit features",activate:function(){t.ActivateEditClick()},deactivate:function(){t.DeactivateEditClick()},messageObject:[]},_=new o.MapAPI.Tools.Tool(S);e.push(_);var k={id:"PrintBox",description:"This tool activates box select functionality for printing",activate:function(e){t.ActivatePrintBox(e)},deactivate:function(){t.DeactivatePrintBox()},messageObject:[]},E=new o.MapAPI.Tools.Tool(k);e.push(E);var M={id:"PrintBoxSelect",description:"This tool activates box select functionality for printing",activate:function(e){t.ActivatePrintBoxSelect(e)},deactivate:function(){t.DeactivatePrintBoxSelect()},messageObject:[]},T=new o.MapAPI.Tools.Tool(M);e.push(T);var O={id:"AddLayerUrl",description:"This tool lets the user add features from url to the map",activate:function(e){t.ActivateAddLayerUrl(e)},deactivate:function(){t.DeactivateAddLayerUrl()},messageObject:[]},P=new o.MapAPI.Tools.Tool(O);return e.push(P),{GetTools:function(){return e}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.AddFeatureGps=function(t){function e(t){if(d){var e=n.add_layer_start_drawing;a&&!g&&(e=n.add_layer_continue_drawing),g&&(e=n.add_layer_modify_object),s.innerHTML=e,l.setPosition(t.coordinate),$(s).removeClass("hidden")}}var n,r,i,a,s,l,u,c,h,f,p,d=!1,g=!1;function m(t){var e=new ol.Collection(i);f=new ol.interaction.Snap({features:e}),t.addInteraction(f)}return{Activate:function(v,y){d=!0,n=y.translate,r=y.toolType,i=y.snappingFeatures,v.on("pointermove",e),$(v.getViewport()).on("mouseout",(function(){$(s).addClass("hidden")})),function(e){var n=new ol.source.Vector,i=new o.MapImplementation.OL3.Styles.Measure;"Line"===r&&(r="LineString"),u=new ol.interaction.Draw({source:n,style:i.Styles(),type:r}),c=new ol.layer.Vector({source:n,style:i.DrawStyles()}),e.addInteraction(u),e.addLayer(c),m(e),function(t){s&&null!==s.parentNode&&s.parentNode.removeChild(s),(s=document.createElement("div")).className="tooltip hidden",l=new ol.Overlay({element:s,offset:[15,0],positioning:"center-left"}),t.addOverlay(l)}(e),u.on("drawstart",(function(e){a=e.feature,p=a.getGeometry().on("change",(function(e){var n,r=e.target;r instanceof ol.geom.Polygon?(n="",e.coordinate=r.getInteriorPoint().getCoordinates()):r instanceof ol.geom.LineString&&(n="",e.coordinate=r.getLastCoordinate()),t.TriggerEvent(o.Events.EventTypes.MeasureMouseMove,n)}))}),this),u.on("drawend",(function(n){e.removeInteraction(f),a=null,ol.Observable.unByKey(p),a=n.feature;var r=new ol.Collection([a]);h=new ol.interaction.Modify({features:r,deleteCondition:function(t){return ol.events.condition.shiftKeyOnly(t)&&ol.events.condition.singleClick(t)}}),e.addInteraction(h),m(e),t.TriggerEvent(o.Events.EventTypes.AddLayerFeatureEnd,a),g=!0,h.on("modifyend",(function(e){ol.Observable.unByKey(p),a=e.features.getArray()[0],t.TriggerEvent(o.Events.EventTypes.AddLayerFeatureEnd,a)}),this),e.removeInteraction(u)}),this)}(v)},AddCoordinates:function(t){return t},Deactivate:function(t){d&&(g=d=!1,a=null,void 0!==t&&(t.removeLayer(c),t.removeInteraction(h),t.removeInteraction(f),function(t){t.removeInteraction(u),t.removeOverlay(l),null!==s&&null!==s.parentNode&&s.parentNode.removeChild(s);for(var e=document.getElementsByClassName("tooltip tooltip-static");0<e.length;){var n=e[0];n.parentNode.removeChild(n)}}(t)))}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.AddLayerFeature=function(t){var e,n,r,i,a,s,l,u,c=!1,h=new ol.source.Vector,f="rgba(0,0,0,255)",p="rgba(255,255,0,255)",d=[new ol.style.Style({stroke:new ol.style.Stroke({color:f,width:3}),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:f}),stroke:new ol.style.Stroke({color:p,width:2})})}),new ol.style.Style({stroke:new ol.style.Stroke({color:p,width:3,lineDash:[15,30]})})];function g(t){var e=new ol.Collection(n);l=new ol.interaction.Snap({features:e}),t.addInteraction(l)}function m(t){t.getInteractions().forEach((function(e){e instanceof ol.interaction.DoubleClickZoom&&t.removeInteraction(e)}))}return{Activate:function(f,p){if(c=!0,translate=p.translate,e=p.toolType,n=p.snappingFeatures,u=function(t,e){if(e){var n=new ol.format.GPX({dataProjection:"EPSG:4326",featureProjection:t.getView().getProjection()}).readFeatures(e);n.forEach((function(e){e.getGeometry().transform("EPSG:4326",t.getView().getProjection())}));var r=new ol.Collection(n);return h=new ol.source.Vector({features:r}),n}}(f,p.features),function(t){a=new ol.layer.Vector({source:h,style:d}),t.addLayer(a)}(f),u){f.removeInteraction(i);var v=u[0].getGeometry().getExtent();f.getView().fit(v,f.getSize())}else!function(n){"Line"===e&&(e="LineString"),i=new ol.interaction.Draw({source:h,style:d,type:e}),n.addInteraction(i),g(n),i.on("drawend",(function(e){n.removeInteraction(l),r=e.feature;var a=new ol.Collection([r]);s=new ol.interaction.Modify({features:a}),n.addInteraction(s),g(n),t.TriggerEvent(o.Events.EventTypes.AddLayerFeatureEnd,r),startModify=!0,s.on("modifyend",(function(e){r=e.features.getArray()[0],t.TriggerEvent(o.Events.EventTypes.AddLayerFeatureEnd,r)}),this),n.removeInteraction(i)}),this)}(f);m(f)},Deactivate:function(t){!function(t){m(t),t.addInteraction(new ol.interaction.DoubleClickZoom)}(t),c&&(startModify=c=!1,r=null,void 0!==t&&(t.removeLayer(a),t.removeInteraction(s),t.removeInteraction(l),t.removeInteraction(i),h=new ol.source.Vector))}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.AddLayerUrl=function(t){var e,n,r,i=!1,a=new ol.source.Vector,s="propertyMarking";function l(){i&&(i=!1)}return{Activate:function(u,c){if(!c.show)return u.removeLayer(n),void l();i=!0,e=u.getView().getProjection(),r=c.style?c.style:defaultStyle,a=function(n,r){return n.url&&(a=new ol.source.Vector({format:new ol.format.GML,url:n.url})).on("addfeature",(function(i){n.geometryName&&i.feature.setGeometryName(n.geometryName),i.feature.getGeometry().transform("EPSG:4326",e);var s=a.getExtent();r.getView().fit(s,r.getSize()),t.TriggerEvent(o.Events.EventTypes.AddLayerUrlEnd,!0)}),this),a}(c,u),function(t){t.getLayers().forEach((function(e){void 0!==e&&e.get("id")===s&&t.removeLayer(e)}))}(u),function(t){(n=new ol.layer.Vector({source:a,style:r})).set("id",s),t.addLayer(n)}(u)},Deactivate:l}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.DrawFeature=function(t){var e,n,r,i,a,s,l,u,c,h,f,p,d,g={modify:[],source:[],select:[],draw:[]},m=!1,v=!1,y=!1,b=new ol.format.GeoJSON({defaultDataProjection:"EPSG:25833",projection:"EPSG:25833"}),w=new ol.Collection,x=new ol.source.Vector({features:w}),S=new o.MapImplementation.OL3.Styles.Measure,_=new o.MapImplementation.OL3.Styles.Json,k=new o.Utils.Guid;function E(t,e){!function(t){$(t),(l=document.createElement("div")).className="tooltip tooltip-measure",u=new ol.Overlay({element:l,offset:[0,-15],positioning:"bottom-center"}),t.addOverlay(u)}(e);var n=t.feature||t.features.getArray()[0];n.getGeometry().on("change",(function(t){var r=O(t.target,e);if(n.setProperties({measurement:r}),d){var i=function(t,e){return e instanceof ol.geom.Polygon?M(t):e instanceof ol.geom.LineString?T(t):void 0}(r,t.target);l.innerHTML=i}else l.innerHTML=r;u.setPosition(function(t){return t instanceof ol.geom.Polygon?t.getInteriorPoint().getCoordinates():t instanceof ol.geom.LineString?t.getLastCoordinate():void 0}(t.target))}))}function M(t){var e=t.split(" ");return("m&sup2;"===e[1]?e[0]/343e4:e[0]/3.43).toFixed(4)+" nmi&sup2;"}function T(t){var e=t.split(" ");return("m"===e[1]?e[0]/1e3/1.852:e[0]/1.852).toFixed(3)+" nmi"}function O(t,e){return t instanceof ol.geom.Polygon?N(e,t):t instanceof ol.geom.LineString?j(e,t):void 0}function P(t,e){for(var n=0;n<g[e].length;n++)ol.Observable.unByKey(g[e][n])}function C(){if(function(t){for(var e=0;e<t.length;e++){var n=t[e];n.getId()||n.setId(k.NewGuid()),n.getProperties().style||L(n)}}(w.getArray()),!y){var e=JSON.parse(b.writeFeatures(x.getFeatures()));reusltJson=G("EPSG:4326",e),reusltJson=JSON.stringify(e),t.TriggerEvent(o.Events.EventTypes.DrawFeatureEnd,reusltJson)}}function I(t){return"pointerdown"===t.type&&ol.events.condition.noModifierKeys(t)}function A(t,e){w=new ol.Collection(t),x=new ol.source.Vector({features:w}),(c=new ol.layer.Vector({source:x,style:R,options:e})).set("id","drawing")}function L(t){switch(t.getGeometry().getType()){case"Point":!function(t){var n;n=""!==e.getText().getText()?{style:{text:function(){var t={font:e.getText().getFont(),text:e.getText().getText(),fill:{color:e.getText().getFill().getColor()}};return e.getText().getStroke()&&(t.stroke={color:e.getText().getStroke().getColor(),width:e.getText().getStroke().getWidth()}),t}()}}:{style:{regularshape:{fill:{color:e.getImage().getFill().getColor()},points:e.getImage().getPoints(),radius:e.getImage().getRadius()}}},t.setProperties(n)}(t);break;case"LineString":!function(t){t.setProperties({style:{stroke:{color:e.getStroke().getColor(),lineDash:e.getStroke().getLineDash(),width:e.getStroke().getWidth()}}})}(t);break;case"Polygon":!function(t){t.setProperties({style:{fill:{color:e.getFill().getColor()},stroke:{color:function(t){return t.replace(","+t.split(",")[3],")").replace("rgba","rgb")}(e.getFill().getColor()),width:2}}})}(t)}}function R(t){if(_.GetStyle(t),p){var n=t.getProperties().measurement;switch(t.getGeometry().getType()){case"Point":return;case"LineString":return function(t,n){var r=t.getStyle()[0];d&&(n=T(n));var i=new ol.style.Style({stroke:r.getStroke(),text:new ol.style.Text({font:e.getText().font,text:n,fill:new ol.style.Fill({color:"#000000"}),stroke:new ol.style.Stroke({color:"rgba(255,255,255,1)",width:10})})});return t.setStyle(i),i}(t,n);case"Polygon":return function(t,n){var r=t.getStyle()[0];d&&(n=M(n));var i=new ol.style.Style({fill:r.getFill(),stroke:r.getStroke(),text:new ol.style.Text({font:e.getText().font,text:function(t){var e=document.createElement("span");e.innerHTML=t;for(var n=0;n<e.children.length;n++){var r=e.children[n];"SUP"===r.tagName&&(r.textContent<=3&&1<r.textContent?r.textContent=String.fromCharCode(r.textContent.charCodeAt(0)+128):3<r.textContent&&r.textContent<=9&&(r.textContent=String.fromCharCode(r.textContent.charCodeAt(0)+8256)))}return e.textContent}(n),fill:new ol.style.Fill({color:"#000000"}),stroke:new ol.style.Stroke({color:"rgba(255,255,255,1)",width:10})})});return t.setStyle(i),i}(t,n)}}}var j=function(t,e){var n,r=e.getCoordinates();n=0;for(var i=t.getView().getProjection(),o=0,a=r.length-1;o<a;++o){var s=ol.proj.transform(r[o],i,"EPSG:4326"),l=ol.proj.transform(r[o+1],i,"EPSG:4326");n+=ol.sphere.getDistance(s,l)}return n<1e3?n.toFixed(2)+" m":(n/1e3).toFixed(3)+" km"},N=function(t,e){var n,r=t.getView().getProjection();return(n=Math.abs(ol.sphere.getArea(e,{projection:r})))<1e4?Math.round(n)+" m&sup2;":(n/1e6).toFixed(4)+" km&sup2;"};function $(t){l&&l.parentNode&&l.parentNode.removeChild(l),t.removeOverlay(u)}var F=function(t){t.getInteractions().forEach((function(e){e instanceof ol.interaction.DoubleClickZoom&&t.removeInteraction(e)}))};function D(t,e){switch(t){case"EPSG:4326":90<e[1]&&(e=proj4("EPSG:32633","EPSG:4326",e));break;case"EPSG:32633":e[1]<90&&(e=proj4("EPSG:4326","EPSG:32633",e))}return e}function G(t,e){for(var n=0;n<e.features.length;n++){var r=e.features[n].geometry.coordinates;switch(e.features[n].geometry.type.toLowerCase()){case"point":e.features[n].geometry.coordinates=D(t,r);break;case"linestring":for(var i=0;i<r.length;i++)e.features[n].geometry.coordinates[i]=D(t,r[i]);break;case"polygon":for(var o=0;o<r.length;o++)for(var a=0;a<r[o].length;a++)e.features[n].geometry.coordinates[o][a]=D(t,r[o][a])}}return e}return{Activate:function(l,u){switch(m=!(v=!0),p=u.showMeasurements,d=u.showNauticalMiles,e=u.style||e?u.style:S.Styles(),u.GeoJSON?"remove"===u.GeoJSON?A():u.deleteFeature&&u.selectedFeatureId?(x.removeFeature(x.getFeatureById(u.selectedFeatureId)),f=h=void 0,A(w.getArray()),t.TriggerEvent(o.Events.EventTypes.DrawFeatureEnd,b.writeFeatures(x.getFeatures()))):(u.GeoJSON="object"==typeof u.GeoJSON?u.GeoJSON:JSON.parse(u.GeoJSON),u.GeoJSON=G("EPSG:32633",u.GeoJSON),A(b.readFeatures(u.GeoJSON),u)):A(),!u.deleteFeature&&u.selectedFeatureId?u.selectionActive&&(h=u.selectedFeatureId,L(f=x.getFeatureById(h)),function(t){var n,r="rgb(128, 128, 255)";_.GetStyle(t);var i=t.getStyle();switch(i||(i=e),i.length&&(i=i[0]),t.getGeometry().getType()){case"Point":n=function(t,e){return t.getText()?[function(t,e){return new ol.style.Style({text:new ol.style.Text({font:t.getText().getFont(),text:t.getText().getText(),stroke:new ol.style.Stroke({color:"rgb(128, 128, 255)",width:t.getText().getStroke().getWidth()+5}),fill:t.getText().getFill()})})}(t),t]:[new ol.style.Style({image:new ol.style.RegularShape({fill:new ol.style.Fill({color:e}),radius:t.getImage().getRadius()+3,points:t.getImage().getPoints()})}),t]}(i,r);break;case"LineString":n=function(t,e){return[new ol.style.Style({stroke:new ol.style.Stroke({color:"rgb(128, 128, 255)",lineDash:t.getStroke().getLineDash(),width:t.getStroke().getWidth()+5})}),t]}(i);break;case"Polygon":n=function(t,e){return[new ol.style.Style({fill:t.getFill(),stroke:new ol.style.Stroke({color:"rgb(128, 128, 255)",width:7})})]}(i)}t.setStyle(n)}(f)):f=h=void 0,l.getLayers().forEach((function(t){void 0!==t&&"drawing"===t.get("id")&&l.removeLayer(t)})),l.addLayer(c),u.mode){case"modify":!function(t){var e={condition:ol.events.condition.click,layers:[c]};f&&(e.features=new ol.Collection([f])),s=new ol.interaction.Select(e),t.addInteraction(s)}(l),function(t){i=new ol.interaction.Modify({features:s.getFeatures(),condition:function(t){return I(t)},deleteCondition:function(t){return function(t){return ol.events.condition.shiftKeyOnly(t)&&"pointerdown"===t.type}(t)}}),t.addInteraction(i)}(l);break;case"draw":"Active"!==u.type&&(n=u.type),"Text"===u.type&&(n="Point",m=!0),function(t,n){r&&r.type===n||(r=new ol.interaction.Draw({source:x,type:n,condition:function(t){return I(t)&&!y&&!(m&&""===e.getText().getText())}}),t.addInteraction(r))}(l,n)}u.snap&&function(t){a=new ol.interaction.Snap({source:x}),t.addInteraction(a)}(l),function(e,n){void 0!==r&&(x&&(g.source.push(x.on("addfeature",(function(){C()}),this)),g.source.push(x.on("removefeature",(function(){C()}),this))),i&&(g.modify.push(i.on("modifystart",(function(){y=!0}),this)),g.modify.push(i.on("modifyend",(function(t){var n=t.features.getArray()[0];n.setProperties({measurement:O(n.getGeometry(),e)}),y=!1,C()}),this))),s&&g.select.push(s.on("select",(function(e){var n=e.selected;1===n.length&&t.TriggerEvent(o.Events.EventTypes.DrawFeatureSelect,n[0].getId())}),this)),n&&(g.draw.push(r.on("drawstart",(function(t){E(t,e)}),this)),g.draw.push(r.on("drawend",(function(){$(e)}),this)),i&&(g.modify.push(i.on("modifystart",(function(t){E(t,e)}),this)),g.modify.push(i.on("modifyend",(function(){$(e)}),this)))),g.draw.push(r.on("drawstart",(function(){F(e)}))),g.draw.push(r.on("drawend",(function(t){t.feature.setProperties({measurement:O(t.feature.getGeometry(),e)})}))))}(l,u.showMeasurements),C()},Deactivate:function(t){v&&(v=!1,void 0!==t&&(t.removeInteraction(r),t.removeInteraction(i),t.removeInteraction(a),t.removeInteraction(s),P(0,"modify"),P(0,"source"),P(0,"select"),P(0,"draw"),function(t){F(t),t.addInteraction(new ol.interaction.DoubleClickZoom)}(t)))}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Export=function(){var t,e,n="",r=!1;function i(t){var e,r,i=210/297,o=t.getSize();"a4portrait"===n.value?e=(r=o[1]*i)>o[0]?(r=o[0],o[0]/i):o[1]:r=(e=o[0]*i)>o[1]?(e=o[1],o[1]/i):o[0];var a=[o[0]*ol.has.DEVICE_PIXEL_RATIO/2,o[1]*ol.has.DEVICE_PIXEL_RATIO/2];return{minx:a[0]-r/2,miny:a[1]-e/2,maxx:a[0]+r/2,maxy:a[1]+e/2}}function o(t){t.context.save()}function a(t){var n=t.context,r=function(t){var e=t.getSize();return{height:e[1]*ol.has.DEVICE_PIXEL_RATIO,width:e[0]*ol.has.DEVICE_PIXEL_RATIO}}(t.target);n.beginPath(),n.moveTo(0,0),n.lineTo(r.width,0),n.lineTo(r.width,r.height),n.lineTo(0,r.height),n.lineTo(0,0),n.closePath(),n.moveTo(e.minx,e.miny),n.lineTo(e.minx,e.maxy),n.lineTo(e.maxx,e.maxy),n.lineTo(e.maxx,e.miny),n.lineTo(e.minx,e.miny),n.closePath(),n.fillStyle="rgba(25, 25, 25, 0.75)",n.fill(),n.restore()}return{Activate:function(s,l,u){n=s.layout,r=!0,e=i(l),t=[l.on("precompose",o),l.on("postcompose",a)],u()},Deactivate:function(e){if(r=!1,t){for(var n=0;n<t.length;n++)ol.Observable.unByKey(t[n]);e()}},ExportMap:function(t,n){n.once("postcompose",(function(n){var r=n.context.canvas;t(r,e)}))},WindowResized:function(t){r&&(e=i(t),t.render())}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Sources=o.MapImplementation.OL3.Sources||{},o.MapImplementation.OL3.FeatureEditor=function(t){var e="",n=[],r="",i=null;return{Init:function(e,n,a,s,l,u){void 0===a&&(a="http://kart4.nois.no/skjema/va"),i=new o.MapImplementation.OL3.Sources.WfsT(e,n,a,s,l,t),r=u},ActivateEditSelect:function(t,n){void 0!==n&&(e=n.on("singleclick",(function(e){t(e.coordinate)})))},DeactivateEditSelect:function(){ol.Observable.unByKey(e),e=""},HandlePointSelect:function(t){var e=new ol.geom.Point(t);n.push(e);var o=new ol.Feature({navn:"ISY.MapLib-"+i.GetFeatureType()+"-Insert"});o.setGeometryName(r),o.setGeometry(e),i.InsertFeature(o)},UpdateFeature:function(t){i.UpdateFeature(t)},InsertFeature:function(t,e){return i.InsertFeature(t,e)},DeleteFeature:function(t){return i.DeleteFeature(t)}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.FeatureInfo=function(){var t,e,n=null,r=null,i="",a=[];function s(){null!==n&&n.getSource().clear()}function l(t){return new u(t.split(":"))}function u(t){this.type=t[0],this.properties=new c(t[1])}function c(t){this.code=t}return{ShowHighlightedFeatures:function(t,e){!function(t){if(null===n){null===r&&function(){var t=new o.MapImplementation.OL3.Styles.Default;r=t.Styles}();var e=new ol.source.Vector({projection:"EPSG:4326",object:{type:"FeatureCollection",totalFeatures:1,features:[{type:"Feature",id:"thc.1",geometry:{type:"Point",coordinates:[21.7495,71.721]},geometry_name:"the_geom",properties:{Year:2003}}],crs:{type:"EPSG",properties:{code:"4326"}}}});n=new ol.layer.Vector({source:e,style:r}),t.addLayer(n)}else t.removeLayer(n),t.addLayer(n)}(e),s();for(var i=new ol.format.GeoJSON,a=0;a<t.length;a++){var l=t[a];if(void 0!==l.geometryObject){var u=i.readFeature(l.geometryObject);l.crs&&u.getGeometry().transform(ol.proj.get(l.crs),ol.proj.get(e.getView().getProjection().getCode())),l.hoverstyle&&u.setStyle(l.hoverstyle),n.getSource().addFeature(u)}else n.getSource().addFeature(l)}},ClearHighlightedFeatures:s,SetHighlightStyle:function(t){r=t,n.setStyle(r)},ShowInfoMarker:function(t,n,r){var i=$(n),o=i[0].height,a=i[0].width;(e=new ol.Overlay({insertFirst:!1,element:n,stopEvent:!1,offset:[-a/2,-o]})).setPosition(t),r.addOverlay(e)},ShowInfoMarkers:function(t,e,n){for(var r=0;r<t.length;r++){var i=document.createElement("img");i.src="assets/img/pin-md-blueish.png",i.style.visibility="visible";var o=0,s=0,l=$(e);0!==l[0].height&&0!==l[0].width&&(o=l[0].width,s=l[0].height);var u=new ol.Overlay({element:i,stopEvent:!1,offset:[-o/2,-s]});u.setPosition(t[r]),n.addOverlay(u),a.push(u)}},RemoveInfoMarker:function(t,n){void 0!==e&&n.removeOverlay(e)},RemoveInfoMarkers:function(t,e){if(void 0!==a)for(var n=0;n<a.length;n++)e.removeOverlay(a[n])},GetFeatureInfoUrl:function(t,e,n,r){var i=r.getResolution(),o=e.getSource(),a=r.getProjection(),s=o.getFeatureInfoUrl(n,i,a,{INFO_FORMAT:t.featureInfo.getFeatureInfoFormat,feature_count:10}),l=decodeURIComponent(s),u=l.substring(l.lastIndexOf("?"),l.length).replace("?",""),c=encodeURIComponent(u);return t.url[0]+"?"+c},ActivateInfoClick:function(t,e){void 0!==e&&(i=e.on("singleclick",(function(e){t(e.coordinate)})))},DeactivateInfoClick:function(){ol.Observable.unByKey(i),i=""},ActivateBoxSelect:function(e,n){t=new ol.interaction.DragBox({condition:ol.events.condition.always}),n.addInteraction(t),t.on("boxend",(function(){e(t.getGeometry().getExtent())}))},DeactivateBoxSelect:function(e){void 0!==e&&e.removeInteraction(t)},GetFeaturesInExtent:function(t,e,n){if(void 0!==e&&void 0!==t&&function(t,e){var n=t.getMinResolution();if(0<n&&e<n)return!1;var r=t.getMaxResolution();return!(r!==1/0&&r<e)}(e,n)){var r=e.getSource(),i=[];r.forEachFeatureInExtent(t,(function(e){var n=e.getGeometry(),r=e.get("isHidden");(r=void 0!==r&&r)||void 0!==n&&n.intersectsExtent(t)&&i.push(e)}));var o=(new ol.format.GeoJSON).writeFeaturesObject(i);if(Array.isArray(o.features))for(var a=0;a<o.features.length;a++)o.features[a].olFeature=i[a];else o.features.olFeature=Array.isArray(i)?i[0]:i;var s=r.getProjection();return s&&(o.crs=l(s.getCode())),o}},GetExtentForCoordinate:function(t,e,n){var r=e*n,i=t[0],o=t[1];return[i-r,o-r,i+r,o+r]},GetFeatureCollection:function(t){if(null!==t){var e=t.getSource(),n=e.getFeatures(),r=(new ol.format.GeoJSON).writeFeaturesObject(n);return e.getProjection()&&(r.crs=l(e.getProjection().getCode())),r}},GetFeatureExtent:function(t){return(new ol.format.GeoJSON).readFeature(t.geometryObject).getGeometry().getExtent()},GetFeaturesInMap:function(t){if(null!==t)return t.getSource().getFeatures()}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.HoverInfo=function(){var t,e,n,r,i,o,a=!1,s=!1,l=!1,u=!1;function c(t,e){return t.zindex<e.zindex?1:t.zindex>e.zindex?-1:0}function h(t){if(0!==t.length)return t.sort(c),t}function f(t,a){var s;s=function(t){var n=[];if(t.forEach((function(t){var r=e.GetLayerByFeature(t);if(r){var i=parseInt(r.guid,10);n.push({feature:t,zindex:i})}})),void 0!==(n=h(n)))return n[0].feature}(a.target.getFeatures().getArray()),void 0===i&&(i=new ol.Overlay({element:document.getElementById("popup")}),t.addOverlay(i));var l=i.getElement();if(s){if(void 0!==s.getProperties()){var u;u=o,$(l).popover("destroy"),i.setPosition(u);var c="",f=e.GetLayerByFeature(s).tooltipTemplate;if(f){for(var p,d,g,m="",v=f.indexOf("{");0<=v;)0<v&&(m+=f.substr(0,v),v=(f=f.slice(v)).indexOf("{")),g=f.indexOf("}"),p=f.substr(v+1,g-v-1),(d=s.get(p))&&(m+=d),v=(f=f.slice(g+1)).indexOf("{");c=m+f}0<c.length?($(l).popover({placement:"top",animation:!1,html:!0,content:'<div class="hover-info">'+c+"</div>"}),$(l).popover("show")):$(l).popover("destroy")}}else $(l).popover("destroy");s!==r&&(r&&n.getSource().removeFeature(r),s&&n.getSource().addFeature(s),r=s)}function p(t,n){return e.GetHoverStyle(t,n)}return{ActivateHoverInfo:function(r,c,h,d){e=h,function(t){t&&t.multiSelect&&(a=t.multiSelect)}(d),function(r){if(!s)s=!0,l?(r.addInteraction(t),t.setActive(!0)):(l=!0,n=new ol.layer.Vector({map:r,source:new ol.source.Vector({useSpatialIndex:!1}),style:p,updateWhileAnimating:!0,updateWhileInteracting:!0}),t=new ol.interaction.Select({condition:ol.events.condition.pointerMove,multi:a,style:function(t,n){return e.GetHoverStyle(t,n)}}),r.addInteraction(t),t.on("select",(function(t){s&&(t.dragging||f(r,t))})),u||(u=!0,r.on("pointermove",(function(t){!function(t,e){s&&(mousePixel=t.getEventPixel(e.originalEvent),o=e.coordinate,i&&i.setPosition(o))}(r,t)}))))}(r)},DeactivateHoverInfo:function(e){void 0!==e&&(s=!1,function(){if(void 0!==i){var t=i.getElement();$(t).popover("destroy"),r&&n&&(n.getSource().removeFeature(r),r=void 0)}}(),t&&(t.setActive(!1),e.removeInteraction(t),t=void 0,l=!1))}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Map=function(t,e,n,r,i,a,s,l,u,c,h,f,p,d,g,m){var v,y,b,w,x,S,_,k,E,M,T,O,P,C=[],I=[],A=[],L=new o.MapImplementation.OL3.FeatureEditor(e),R=!1,N="",F="",D="",G=0,U=0,B=0,z=0;function V(t){t.updateParams({GKT:K()}),t.set("timestamp",(new Date).getTime())}function q(t){t.updateParams({ticket:D?(S&&!function(){var t=(new Date).getTime();return!(t<z+3e6&&(z=t,1))}()||(S=$.ajax({type:"GET",url:D,async:!1}).responseText.trim().replace(/"/g,""),z=(new Date).getTime()),S):null}),t.set("timestamp",(new Date).getTime())}function H(t){var e=!1;return v.getLayers().forEach((function(n){e||n.guid!==t.id||(e=!0)})),e}function W(t,e){if(Array.isArray(t)&&(t=t[0]),e)return Array.isArray(N)?N[0]+t:N+t;if(!Array.isArray(N))return N+t;for(var n=[],r=0;r<N.length;r++)n.push(N[r]+t);return n}function K(){return F?(x&&!function(){var t=(new Date).getTime();return!(t<B+3e6)||(B=t,!1)}()||(x=$.ajax({type:"GET",url:F,async:!1}).responseText.trim().replace(/"/g,""),B=(new Date).getTime()),x):null}function Y(t,n){t.set("config",n),t.on("change",(function(){t.set("loading",!0)}),t),t.on("render",(function(){t.get("loading")&&(t.set("loading",void 0),e.TriggerEvent(o.Events.EventTypes.LoadingLayerEnd,t))}),t)}function X(t){var n,r,i,a=tt(t),s=!0;function l(r){n.set("config",t);var i=A[t.id].ParseSld(r,parseInt(t.id,10));i.maxScaleDenominator&&J(n,it(i.maxScaleDenominator)),i.minScaleDenominator&&Z(n,it(i.minScaleDenominator)),et(t),C.push(n),n.sortingIndex=t.sortingIndex,v.addLayer(n),e.TriggerEvent(o.Events.EventTypes.LayerCreated,C),lt(),ct()}if(E&&0<E.length&&(i={isyToken:E}),null!==a)(n=a).set("config",t);else{switch(t.source){case o.Domain.SubLayer.SOURCES.wmts:!t.gatekeeper||!t.tiled||void 0!==c&&c.IsActive()||(i?i.gkt=K():i={gkt:K()}),r=new o.MapImplementation.OL3.Sources.Wmts(t,i);break;case o.Domain.SubLayer.SOURCES.proxyWmts:t.url=W(t.url),r=new o.MapImplementation.OL3.Sources.Wmts(t,i);break;case o.Domain.SubLayer.SOURCES.wms:r=new o.MapImplementation.OL3.Sources.Wms(t,i),!t.gatekeeper||!t.tiled||void 0!==c&&c.IsActive()||V(r),!t.ticket||void 0!==c&&c.IsActive()||q(r);break;case o.Domain.SubLayer.SOURCES.proxyWms:t.url=W(t.url),r=new o.MapImplementation.OL3.Sources.Wms(t,i);break;case o.Domain.SubLayer.SOURCES.vector:r=new o.MapImplementation.OL3.Sources.Vector(t),""!==t.url&&(t.noProxy||(t.url=W(t.url)));break;case o.Domain.SubLayer.SOURCES.wfs:t.noProxy||(t.url=W(t.url,!0)),r=new o.MapImplementation.OL3.Sources.Wfs(t,c,i);break;default:throw"Unsupported source: ISY.Domain.SubLayer.SOURCES.'"+t.source+"'. For SubLayer with url "+t.url+" and name "+t.name+"."}t.source===o.Domain.SubLayer.SOURCES.vector?t.style?"object"==typeof t.style||t.style.indexOf("http")<0?(A[t.id]=new o.MapImplementation.OL3.Styles.Json(t.style),n=new ol.layer.Vector({source:r,style:function(e,n){return A[t.id].GetStyle(e,rt(n))}})):(A[t.id]=new o.MapImplementation.OL3.Styles.Sld,n=new ol.layer.Vector({source:r,style:function(e,n){return A[t.id].GetStyle(e,rt(n))}}),t.style&&(s=!1,mt(t.style,"application/xml",l)),Y(n,t)):n=new ol.layer.Vector({source:new ol.source.Vector({format:new ol.format.GeoJSON({defaultDataProjection:t.coordinate_system}),url:t.url})}):t.source===o.Domain.SubLayer.SOURCES.wfs?(A[t.id]=new o.MapImplementation.OL3.Styles.Sld,n=new ol.layer.Vector({source:r,style:function(e,n){return A[t.id].GetStyle(e,rt(n))}}),t.style&&(s=!1,mt(t.style,"application/xml",l)),Y(n,t)):n=t.tiled?new ol.layer.Tile({extent:t.extent,opacity:t.opacity,source:r}):new ol.layer.Image({extent:t.extent,opacity:t.opacity,source:r}),n.set("config",t),n.layerIndex=t.layerIndex,n.guid=t.id,n.typename=t.name,n.tooltipTemplate=t.tooltipTemplate,void 0!==t.minResolution&&n.setMinResolution(t.minResolution),void 0!==t.maxResolution&&n.setMaxResolution(t.maxResolution),t.maxScale&&Z(n,it(t.maxScale)),t.minScale&&J(n,it(t.minScale)),s&&(et(t),C.push(n))}if(s)return n}function Z(t,e){if(t&&e){var n=t.getMinResolution();if(n&&e<=n)return;t.setMinResolution(e)}}function J(t,e){if(t&&e){var n=t.getMaxResolution();if(n&&n<=e)return;t.setMaxResolution(e)}}function Q(t,e){$.ajax({url:t.url,async:!1}).done((function(t){!function(t){t="object"==typeof t?t:JSON.parse(t);for(var n=new ol.format.GeoJSON,r=0;r<t.features.length;r++){var i=t.features[r];i.type&&e.addFeature(n.readFeature(i))}}(t)}))}function tt(t){for(var e=0;e<C.length;e++){var n=C[e];if(n.guid===t.id)return n}return null}function et(t){for(var e=!1,n=0;n<I.length;n++)if(t.id===I[n].id){e=!0;break}e||I.push(t)}function nt(t){for(var e,n=0;n<I.length;n++)if(I[n].id===t.guid){e=I[n];break}return e}var rt=function(t){if(void 0!==t){for(var e,n=0;n<y.length;n++)if(y[n]===t){e=b[n];break}return e}},it=function(t){if(void 0===t&&(t=wt()),1===t)return y[y.length-1];if(t!==1/0){for(var e=-1,n=0;n<b.length;n++)if(b[n]<t){e=n-1;break}return e<0?y[y.length-1]:y[e]}};function ot(){return v.getLayers().getArray().filter((function(t){return void 0!==t.guid}))}function at(t){for(var e=ot(),n=0;n<e.length;n++){var r=e[n];if(r.guid===t)return r}return null}function st(t){for(var e=ot(),n=0;n<e.length;n++)if(e[n].guid===t.id)return n;return null}function lt(){!function(t,e){t.sort((function(t,n){var r=t[e],i=n[e];return i<r?-1:r<i?1:0}))}(v.getLayers().getArray(),"sortingIndex"),ct()}function ut(t){for(var e=v.getLayers().getArray(),n=0;n<e.length;n++)if(e[n].guid===t)return e[n]}function ct(){var t=vt();e.TriggerEvent(o.Events.EventTypes.ChangeLayers,t)}function ht(t,e){return t.mapLayerIndex<e.mapLayerIndex?-1:t.mapLayerIndex>e.mapLayerIndex?1:0}function ft(){a.WindowResized(v)}function pt(){v&&v.updateSize()}function dt(t,n,r){if(void 0!==t&&(void 0===n&&(n=nt(t)),void 0!==n)){var i,a;switch(E&&0<E.length&&(i={isyToken:E}),n.source){case o.Domain.SubLayer.SOURCES.wmts:a=new o.MapImplementation.OL3.Sources.Wmts(n,i),!n.gatekeeper||void 0!==c&&c.IsActive()||V(a);break;case o.Domain.SubLayer.SOURCES.proxyWmts:a=new o.MapImplementation.OL3.Sources.Wmts(n,i);break;case o.Domain.SubLayer.SOURCES.wms:a=new o.MapImplementation.OL3.Sources.Wms(n,i),!n.gatekeeper||!n.tiled||void 0!==c&&c.IsActive()||V(a);break;case o.Domain.SubLayer.SOURCES.proxyWms:a=new o.MapImplementation.OL3.Sources.Wms(n,i);break;case o.Domain.SubLayer.SOURCES.vector:a=new o.MapImplementation.OL3.Sources.Vector(n),""!==n.url&&Q(n,a);break;case o.Domain.SubLayer.SOURCES.wfs:i._olSalt=Math.random(),a=new o.MapImplementation.OL3.Sources.Wfs(n,c,i,r,e)}a&&t.setSource(a)}}function gt(t,e,n,r,i){return Array.prototype.slice.call(r.getElementsByTagName(t),0).where((function(t){return i?t.getAttribute(e).toLowerCase()===n.toLowerCase():-1<t.getAttribute(e).indexOf(n)||-1<n.indexOf(t.getAttribute(e))}))}function mt(t,e,n){c&&c.GetConfigResource(t,e,n)}Array.prototype.where=function(t){for(var e=[],n=0;n<this.length;n++)t(this[n])&&e.push(this[n]);return e};var vt=function(){if(void 0!==v){var t={layers:function(){for(var t=[],e=ot(),n=0;n<e.length;n++)!0===e[n].getVisible()&&t.push(e[n]);t.sort(ht);for(var r=[],i=0;i<t.length;i++)r.push(t[i].guid);return r.join(",")}()},e=v.getView(),n=e.getCenter(),r=e.getZoom();return r&&(t.zoom=r.toString()),n&&(t.lat=n[1].toFixed(2),t.lon=n[0].toFixed(2)),t}},yt=function(){return v.getView().getProjection().getCode()};function bt(t){return void 0!==A[t.guid]?A[t.guid].GetStyleForLegend():void 0}var wt=function(){return b[v.getView().getZoom()]};function xt(){var t=v.getView(),n=_.getPosition();if(void 0!==n){t.setCenter(n),function(t,e){var n=at(99999);if(null!==n){var r=n.getSource();r.clear();var i=new ol.style.Style({image:new ol.style.Circle({radius:6,stroke:new ol.style.Stroke({color:"rgba(255,255,255,0.8)",width:2}),fill:new ol.style.Fill({color:"rgba(32,170,172,0.8)"})}),fill:new ol.style.Fill({color:"rgba(0,102,204,0.15)"}),zIndex:1/0}),o=new ol.Feature({geometry:new ol.geom.GeometryCollection([new ol.geom.Point(t),new ol.geom.Circle(t,parseInt(e,10))]),name:"geolocation_center"});if(o.setStyle(i),r.addFeature(o),R){R=!1;var a=o.getGeometry().getExtent();a[0]-=5*e,a[1]-=5*e,a[2]+=5*e,a[3]+=5*e,v.getView().fit(a,v.getSize())}}}(n,_.getAccuracy());var r={center:n,accuracy:Math.round(10*_.getAccuracy())/10,altitude:_.getAltitude(),altitudeAccuracy:_.getAltitudeAccuracy(),heading:_.getHeading(),speed:_.getSpeed()};e.TriggerEvent(o.Events.EventTypes.GeolocationUpdated,r)}}return{InitMap:function(t,n){N=n.proxyHost,F=n.tokenHost,D=n.ticketHost,w=n.hoverOptions;var r=n.numZoomLevels,i=[];i[0]=n.newMaxRes,(b=[])[0]=n.newMaxScale;for(var a=1;a<r;a++)i[a]=i[a-1]/2,b[a]=b[a-1]/2;y=i;var s=new ol.proj.Projection({code:n.coordinate_system,extent:n.extent,units:n.extentUnits}),l=ol.interaction.defaults({altShiftDragRotate:!1,pinchRotate:!1}),u=[];if(n.basemap){null!==n.basemap.matrixSet&&""!==n.basemap.matrixSet&&void 0!==n.basemap.matrixSet||(n.basemap.matrixSet=n.basemap.matrixPrefix?n.coordinate_system:parseInt(n.coordinate_system.substr(n.coordinate_system.indexOf(":")+1),10));var c={gkt:K()};n.basemap.coordinate_system=n.coordinate_system,n.basemap.extent=n.extent,n.basemap.extentUnits=n.extentUnits,n.basemap.numZoomLevels=n.numZoomLevels,u=[new ol.layer.Tile({source:new o.MapImplementation.OL3.Sources.Wmts(n.basemap,c),zIndex:-1})]}v=new ol.Map({target:t,renderer:n.renderer,layers:u,loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,view:new ol.View({projection:s,constrainResolution:!0,enableRotation:!1,center:n.center,zoom:n.zoom,resolutions:i,maxResolution:n.newMaxRes,numZoomLevels:r}),controls:[],overlays:[],interactions:l}),function(){var t=v.getView();t.on("change:center",(function(){var t=vt();e.TriggerEvent(o.Events.EventTypes.ChangeCenter,t)})),t.on("change:resolution",(function(){var t=vt();e.TriggerEvent(o.Events.EventTypes.ChangeResolution,t)})),v.on("moveend",(function(){!function(){var t=(new Date).getTime();t<G+6e4||(G=t,v.getLayers()&&v.getLayers().forEach((function(e){var n=e.getSource();if(n&&n.getParams){var r=n.getParams();if(r&&r.GKT){var i=n.get("timestamp");if(i)3e3<Math.round((t-i)/1e3)&&V(n)}}})))}(),function(){var t=(new Date).getTime();t<U+6e4||(U=t,v.getLayers()&&v.getLayers().forEach((function(e){var n=e.getSource();if(n&&n.getParams){var r=n.getParams();if(r&&r.ticket){var i=n.get("timestamp");if(i)3e3<Math.round((t-i)/1e3)&&q(n)}}})))}();var t=vt();e.TriggerEvent(o.Events.EventTypes.MapMoveend,t)}))}(),n.showProgressBar&&new o.MapImplementation.OL3.ProgressBar(e).Init(v),n.showMousePosition&&function(t){var e=document.getElementById("mouseposition");if(e){var n=v.getView().getProjection().getUnits(),r=yt();void 0===t&&(t="");var i=new ol.control.MousePosition({coordinateFormat:function(e){var i=""+t,o=!1;if(0<i.length)switch(n){case"degrees":o=!(i="");break;case"m":switch(r){case"EPSG:25831":case"EPSG:32631":i+="31 ";break;case"EPSG:25832":case"EPSG:32632":i+="32 ";break;case"EPSG:25833":case"EPSG:32633":i+="33 ";break;case"EPSG:25834":case"EPSG:32634":i+="34 ";break;case"EPSG:25835":case"EPSG:32635":i+="35 ";break;case"EPSG:25836":case"EPSG:32636":i+="36 ";break;case"EPSG:25837":case"EPSG:32637":i+="37 ";break;case"EPSG:25838":case"EPSG:32638":i+="38 "}}return i+(o?Math.round(1e4*e[1])/1e4+k.north+Math.round(1e4*e[0])/1e4+k.east:parseInt(e[1],10)+k.north+parseInt(e[0],10)+k.east)},projection:r,className:"mousePosition",target:e});v.addControl(i)}}(n.mouseProjectionPrefix),new o.MapImplementation.OL3.Sources.CustomMessageHandler(e,nt).Init(v),(P=new o.MapImplementation.OL3.Sources.CustomMessageHandler).InitMessage(""),o.MapImplementation.OL3.olMap=v},ChangeView:function(t){if(void 0!==v){var e,n,r,i=v.getView();if(t.lon&&(e=t.lon),t.lat&&(n=t.lat),t.zoom&&(r=t.zoom),void 0!==e&&void 0!==n){var o="number"==typeof n?n:parseFloat(n.replace(/,/g,".")),a="number"==typeof e?e:parseFloat(e.replace(/,/g,"."));isFinite(o)&&isFinite(a)&&i.setCenter([a,o])}void 0!==r&&i.setZoom(r)}},ReInitMap:function(t){var e=v.getLayers().getArray();for(i=0;i<e.length;i++)v.removeLayer(e[i]);var n=v.getOverlays();for(j=0;j<n.length;j++)v.removeOverlay(n[j]);for(var r=ot(),i=0;i<r.length;i++)!0===r[i].getVisible()&&v.removeLayer(r[i]);C=[],I=[];var a=t.numZoomLevels,s=[];s[0]=t.newMaxRes,(b=[])[0]=t.newMaxScale;for(var l=1;l<a;l++)s[l]=s[l-1]/2,b[l]=b[l-1]/2;y=s;var u=new ol.proj.Projection({code:t.coordinate_system,extent:t.extent,units:t.extentUnits}),c=new ol.View({projection:u,constrainResolution:!0,enableRotation:!1,center:t.center,zoom:t.zoom,resolutions:s,maxResolution:t.newMaxRes,numZoomLevels:a});v.setView(c),o.MapImplementation.OL3.olMap=v},AddDataToLayer:function(t,e){var n=tt(t);if(t.format===o.Domain.SubLayer.FORMATS.geoJson){var r=JSON.parse(e),i=(new ol.format.GeoJSON).readFeatures(r);if(t.id&&t.name)for(var a=0;a<i.length;++a)void 0===i[a].getProperties().Guid&&i[a].setProperties({Guid:(new o.Utils.Guid).NewGuid()}),i[a].setId(t.name+"."+i[a].getProperties().Guid);n.getSource().addFeatures(i)}},RemoveDataFromLayer:function(t,e){var n=tt(t);if(t.format===o.Domain.SubLayer.FORMATS.geoJson)for(var r=JSON.parse(e),i=(new ol.format.GeoJSON).readFeatures(r),a=0;a<i.length;++a)if(i[a].getProperties().Guid){var s=n.getSource().getFeatureById(t.name+"."+i[a].getProperties().Guid);s&&n.getSource().removeFeature(s)}},ClearLayer:function(t){var e=tt(t);void 0!==e&&e.getSource().clear()},ShowLayer:function(t){if(!H(t)){var e=X(t);e&&(e.sortingIndex=t.sortingIndex,v.addLayer(e),ct())}},ShowBaseLayer:function(t){if(!H(t)){var e=X(t);e&&(v.getLayers().insertAt(0,e),ct())}},HideLayer:function(t){if(H(t)){var e=at(t.id);e&&(v.removeLayer(e),ct())}},GetLayerByName:function(t){for(var e=ot(),n=0;n<e.length;n++)if(e[n].get("title")===t)return e[n];return null},SetLayerOpacity:function(t,e){var n=at(t.id);n&&!isNaN(e)&&n.setOpacity(Math.min(e,1))},SetLayerSaturation:function(t,e){var n=at(t.id);n&&!isNaN(e)&&n.setSaturation(Math.min(e,1))},SetLayerHue:function(t,e){var n=at(t.id);n&&!isNaN(e)&&n.setHue(Math.min(e,1))},SetLayerBrightness:function(t,e){var n=at(t.id);n&&!isNaN(e)&&n.setBrightness(Math.min(e,1))},SetLayerContrast:function(t,e){var n=at(t.id);n&&!isNaN(e)&&n.setContrast(Math.min(e,1))},MoveLayerToIndex:function(t,e){for(var n=st(t),r=v.getLayers().getArray(),i=0;i<r.length;i++)if(void 0===r[i].guid){r.splice(i,1);break}r.splice(e,0,r.splice(n,1)[0]),ct()},GetLayerIndex:st,GetLegendStyles:function(t){var e=tt(t);if(null!==e)return bt(e)},RefreshLayer:dt,RefreshIsyLayer:function(t,e){dt(tt(t),t,e)},RedrawMap:pt,RefreshMap:function(){v.getLayers().forEach((function(t){dt(t)}))},RefreshLayerByGuid:function(t,e){t&&dt(function(t){for(var e=0;e<C.length;e++){var n=C[e];if(n.guid===t)return n}return null}(t),void 0,e)},RenderSync:function(){v.renderSync()},ExportMap:function(t){a.ExportMap(t,v)},ActivateExport:function(t){a.Activate(t,v,pt),window.addEventListener("resize",ft,!1)},DeactivateExport:function(){window.removeEventListener("resize",ft,!1),a.Deactivate(pt)},ActivateInfoClick:function(t){i.ActivateInfoClick(t,v)},DeactivateInfoClick:function(){i.DeactivateInfoClick(v)},GetInfoUrl:function(t,e){return N+i.GetFeatureInfoUrl(t,tt(t),e,v.getView())},ShowHighlightedFeatures:function(t,e){i.ShowHighlightedFeatures(function(t,e){if(void 0===t)return e;function n(t){for(var e=0;e<r.attributes.length;e++)if(t===r.attributes[e][0])return r.attributes[e][1]}for(var r,i=rt(v.getView().getResolution()),o=0;o<e.length;o++){r=e[o],void 0===e[o].get&&(e[o].get=n);var a=A[t].GetHoverStyle(e[o],i);a&&(e[o].hoverstyle=a)}return e}(t,e),v)},ClearHighlightedFeatures:function(){i.ClearHighlightedFeatures()},ShowInfoMarker:function(t,e){i.ShowInfoMarker(t,e,v)},ShowInfoMarkers:function(t,e){i.ShowInfoMarkers(t,e,v)},SetHighlightStyle:function(t){i.SetHighlightStyle(t)},RemoveInfoMarker:function(t){i.RemoveInfoMarker(t,v)},RemoveInfoMarkers:function(t){i.RemoveInfoMarkers(t,v)},ActivateBoxSelect:function(t){i.ActivateBoxSelect(t,v)},DeactivateBoxSelect:function(){i.DeactivateBoxSelect(v)},GetFeaturesInExtent:function(t,e){return i.GetFeaturesInExtent(e,tt(t),v.getView().getResolution())},GetExtentForCoordinate:function(t,e){return i.GetExtentForCoordinate(t,e,v.getView().getResolution())},GetFeatureCollection:function(t){return i.GetFeatureCollection(tt(t))},GetFeatureExtent:function(t){return i.GetFeatureExtent(t)},GetFeaturesInMap:function(t){return i.GetFeaturesInMap(tt(t))},GetLayerByFeature:function(t){return function(t){var e=t.get("layerguid");if(void 0===e){if(void 0===(e=t.getId()))return null;if(0<e.indexOf("."))e=e.slice(0,e.indexOf("."));else{var n=e.substr(0,e.indexOf("_"))+":"+e.substr(e.indexOf("_")+1);e=n.slice(0,n.indexOf("_"))}for(var r=0;r<C.length;r++){var i=C[r],o=i.typename;if(0<o.indexOf(":")&&(o=o.slice(o.indexOf(":")+1)),o===e)return i}}else for(var a=0;a<C.length;a++)if(e===C[a].guid)return C[a];return null}(t)},GetHoverStyle:function(t,e){var n=this.GetLayerByFeature(t);if(n)return A[n.guid]?A[n.guid].GetHoverStyle(t,rt(e)):n.getStyle?n.getStyle():void 0},GetLegendStyleFromLayer:bt,InitEdit:function t(e){if(""===e.featureNS||void 0===e.featureNS)return!1;var n=tt(e);if(null!==n)return L.Init(e.url,e.name,e.featureNS,e.coordinate_system,n.getSource(),e.geometryName),!0;X(e),t(e)},ActivateEditSelect:function(t){L.ActivateEditSelect(t,v)},DeactivateEditSelect:function(){L.DeactivateEditSelect(v)},HandlePointSelect:function(t){L.HandlePointSelect(t)},UpdateFeature:function(t){L.UpdateFeature(t)},InsertFeature:function(t,e){return L.InsertFeature(t,e)},DeleteFeature:function(t){return L.DeleteFeature(t)},ActivateHoverInfo:function(t){s.ActivateHoverInfo(v,t,this,w)},DeactivateHoverInfo:function(){s.DeactivateHoverInfo(v)},ActivateMeasure:function(t,e){r.Activate(v,t,e)},DeactivateMeasure:function(){r.Deactivate(v)},ActivateMeasureLine:function(t,e){l.Activate(v,t,e)},DeactivateMeasureLine:function(){l.Deactivate(v)},ActivateAddLayerFeature:function(t){h.Activate(v,t)},DeactivateAddLayerFeature:function(){h.Deactivate(v)},ActivateAddFeatureGps:function(t){p.Activate(v,t)},AddCoordinatesGps:function(t){p.AddCoordinates(t)},DeactivateAddFeatureGps:function(){p.Deactivate(v)},ActivateModifyFeature:function(t){f.Activate(v,t)},DeactivateModifyFeature:function(){f.Deactivate(v)},ActivateDrawFeature:function(t,e){u.Activate(v,t,e)},DeactivateDrawFeature:function(){u.Deactivate(v)},ActivateOffline:function(){c&&c.Activate()},StartCaching:function(t,n,r){c&&c.StartCaching(t,n,r,e)},StopCaching:function(){c.StopCaching()},DeleteDatabase:function(t,e,n){c.DeleteDatabase(t,e,n)},CacheDatabaseExist:function(){return c.CacheDatabaseExist()},CalculateTileCount:function(t,e,n){if(c)return c.CalculateTileCount(t,e,n)},GetResource:function(t,e,n){c&&c.GetResource(t,e,n)},GetConfigResource:mt,GetLayerResource:function(t,e,n){c&&c.GetLayerResource(t,e,n)},DeactivateOffline:function(){c&&c.Deactivate()},GetResourceFromJson:function(t,e,n){c&&c.GetResourceFromJson(t,e,n)},ActivatePrintBox:function(t){d.Activate(v,t)},DeactivatePrintBox:function(){d.Deactivate(v)},ActivatePrintBoxSelect:function(t){g.Activate(v,t)},DeactivatePrintBoxSelect:function(){g.Deactivate(v)},ActivateAddLayerUrl:function(t){m.Activate(v,t)},DeactivateAddLayerUrl:function(){m.Deactivate(v)},TransformBox:function(t,e,n){var r=n;if(""!==t&&""!==e&&t!==e){var i=ol.proj.transformExtent(n,t,e);r=i,"EPSG:4326"===e&&(r=i[1]+","+i[0]+","+i[3]+","+i[2])}return r},ConvertGmlToGeoJson:function(t){var e=(new ol.format.WMSCapabilities).read(t),n=(new ol.format.GML).readFeatures(e);return(new ol.format.GeoJSON).writeFeatures(n)},ExtentToGeoJson:function(t,e){var n=new ol.geom.Point([t,e]),r=new ol.Feature;return r.setGeometry(n),(new ol.format.GeoJSON).writeFeature(r)},AddZoom:function(){var t=new ol.control.Zoom;v.addControl(t)},AddZoomSlider:function(){var t=new ol.control.ZoomSlider;v.addControl(t)},AddZoomToExtent:function(t){var e=new ol.control.ZoomToExtent({extent:t});v.addControl(e)},AddScaleLine:function(){var t=new ol.control.ScaleLine;v.addControl(t)},ZoomToLayer:function(t){var e,n=tt(t);n&&(e=void 0!==n.getSource().getExtent?n.getSource().getExtent():void 0!==n.getSource().getTileGrid?n.getSource().getTileGrid().getExtent():n.getExtent(),Array.isArray(e)&&e[0]!==1/0&&(ol.extent.containsCoordinate(e,v.getView().getCenter())||v.getView().fit(e,v.getSize())))},ZoomToLayers:function(t){var e=[1/0,1/0,-1/0,-1/0];t.forEach((function(t){var n=tt(t);if(n){var r=n.getSource().getExtent();Array.isArray(r)&&r[0]!==1/0&&function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[2]&&(e[2]=t[2]),e[3]<t[3]&&(e[3]=t[3])}(r)}})),Array.isArray(e)&&e[0]!==1/0&&v.getView().fit(e,v.getSize())},FitExtent:function(t){v.getView().fit(t,v.getSize())},GetCenter:function(){var t=v.getView(),e=t.getCenter(),n=t.getZoom();return{lon:e[0],lat:e[1],zoom:n}},SetCenter:function(t){var e=v.getView();t.epsg&&(t=function(t,e){if(""!==t.epsg&&""!==e&&t.epsg!==e){var n=ol.proj.transform([t.lon,t.lat],t.epsg,e);"EPSG:4326"===e&&(n=[n[1],n[0]]),t.lon=n[0],t.lat=n[1],t.epsg=e}return t}(t,yt())),e.setCenter([t.lon,t.lat]),t.zoom&&e.setZoom(t.zoom)},GetZoom:function(){return v.getView().getZoom()},SetZoom:function(t){return v.getView().setZoom(t)},GetRotation:function(){return v.getView().getRotation()},SetRotation:function(t,e){var n=v.getView();e?n.rotate(t,e):n.setRotation(t)},GetEpsgCode:yt,GetVectorLayers:function(t,e){for(var n=[],r=o.MapImplementation.OL3.Sources.Vector(t.subLayers[0],v.getView().getProjection()),i=ol.proj.get(t.subLayers[0].coordinate_system),a=ol.proj.get(r.getProjection().getCode()),s=r.parser.readFeatures(e),l=0;l<s.length;l++){var u=s[l];u.getGeometry().transform(i,a),n.push(u)}return n},GetLayerCount:function(){return v?v.getLayers().getArray().length:0},GetCenterFromExtent:function(t){return ol.extent.getCenter(t)},GetScale:wt,SortLayerBySortIndex:lt,UpdateLayerSortIndex:function(t){for(var e=0;e<t.length&&void 0!==t[e].isyLayers;e++)for(var n=0;n<t[e].isyLayers.length;n++)for(var r=0;r<t[e].isyLayers[n].subLayers.length;r++){var i=ut(t[e].isyLayers[n].subLayers[r].id);void 0!==i&&(i.sortingIndex=t[e].isyLayers[n].subLayers[r].sortingIndex)}},GetExtent:function(){return v.getView().calculateExtent(v.getSize())},GetUrlObject:function(){return vt()},GetGeolocation:function(){var t=v.getView().getProjection();_=new ol.Geolocation({projection:t,tracking:!0,trackingOptions:{maximumAge:0}}),function(t){var e=new ol.layer.Vector({source:new ol.source.Vector,projection:v.getView().getProjection()});e.guid=99999,v.addLayer(e),ct()}(),R=!0,_.on("change:position",xt),_.on("change:accuracy",xt)},RemoveGeolocation:function(){var t=at(99999);null!==t&&(v.removeLayer(t),ct()),void 0!==_&&(_.un("change:position",xt),_.un("change:accuracy",xt),_=void 0)},GetProxyHost:function(){return N},SetTranslateOptions:function(t){k=t},TransformCoordinates:function(t,e,n){if(proj4.defs(t)&&proj4.defs(e))return proj4(t,e).forward(n)},TransformFromGeographic:function(t){var e=yt();if(proj4.defs(e))return proj4(e).forward(t)},TransformToGeographic:function(t){var e=yt();if(proj4.defs(e))return proj4(e).inverse(t)},DescribeFeature:function(t,n){M=t,O=n;var r=ol.proj.get(t.coordinate_system);(T=new ol.source.Vector({projection:r})).set("type","ol.source.Vector");var i=t.url;Array.isArray(t.url)&&(i=t.url[0]),i.toLowerCase().indexOf("service=wfs")<0&&(i+="service=WFS&"),i+="request=DescribeFeatureType&version="+t.version+"&typename="+t.name,$.ajax({url:i}).done((function(t){!function(t){var n=M.name.split(":");if(0<n.length){var r=gt("element","name",n=n[n.length-1],t,!0)[0],i=gt("element","type",O,r,!1)[0];if(void 0!==i){i=i.getAttribute("name");var a=t.firstChild.getAttribute("targetNamespace");if(void 0===T.format){var s;switch(M.version){case"1.0.0":s=new ol.format.GML2;break;case"1.1.0":case"2.0.0":s=new ol.format.GML3;break;default:s=new ol.format.GML}T.format=new ol.format.WFS({featureType:M.providerName,featureNS:a,gmlFormat:s})}M.featureNS=a,M.geometryName=i,e.TriggerEvent(o.Events.EventTypes.FeatureHasBeenDescribed,[M,T])}}}(t)}))},RemoveIsyToken:function(){E=void 0;for(var t={isyToken:""},e=0;e<I.length;e++){I[e].isyToken=E;var n,r=I[e],i=tt(r),a=!1;switch(r.source){case o.Domain.SubLayer.SOURCES.wms:case o.Domain.SubLayer.SOURCES.wmts:case o.Domain.SubLayer.SOURCES.proxyWms:case o.Domain.SubLayer.SOURCES.proxyWmts:n=i.getSource();break;case o.Domain.SubLayer.SOURCES.vector:a=!0,n=new o.MapImplementation.OL3.Sources.Vector(r),""!==r.url&&Q(r,n);break;case o.Domain.SubLayer.SOURCES.wfs:a=!0,n=new o.MapImplementation.OL3.Sources.Wfs(r,c)}n&&(a?i.setSource(n):n.updateParams(t))}},SetIsyToken:function(t){if(0!==t.length&&(!E||E!==t))for(var e={isyToken:E=t},n=0;n<I.length;n++){I[n].isyToken=E;var r,i=I[n],a=tt(i),s=!1;switch(i.source){case o.Domain.SubLayer.SOURCES.wms:case o.Domain.SubLayer.SOURCES.wmts:case o.Domain.SubLayer.SOURCES.proxyWms:case o.Domain.SubLayer.SOURCES.proxyWmts:r=a.getSource();break;case o.Domain.SubLayer.SOURCES.vector:s=!0,r=new o.MapImplementation.OL3.Sources.Vector(i),""!==i.url&&Q(i,r);break;case o.Domain.SubLayer.SOURCES.wfs:s=!0,r=new o.MapImplementation.OL3.Sources.Wfs(i,c,e)}r&&(s?a.setSource(r):r.updateParams(e))}},ShowCustomMessage:function(t){P.ShowCustomMessage(t)}}},o.MapImplementation.OL3.Map.RENDERERS={canvas:"canvas",webgl:"webgl"},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Measure=function(t){function e(t){if(!t.dragging&&d){var e=a.start_measure;if(s){var n=s.getGeometry();n instanceof ol.geom.Polygon?e=a.continue_measure:n instanceof ol.geom.LineString&&(e="Click to continue drawing the line")}l.innerHTML=e,u.setPosition(t.coordinate),$(l).removeClass("hidden")}}var n,r,i,a,s,l,u,c,h,f,p,d=!1;function g(t){c&&null!==c.parentNode&&c.parentNode.removeChild(c),(c=document.createElement("div")).className="tooltip tooltip-measure",h=new ol.Overlay({element:c,offset:[0,-15],positioning:"bottom-center"}),t.addOverlay(h)}var m=function(t){var e=Math.round(100*t.getLength())/100;return 100<e?Math.round(e/1e3*100)/100+" km":Math.round(100*e)/100+" m"},v=function(t){var e,n,r;return{string:1e5<(r=void 0===t.getArea?t:t.getArea())?(e="km<sup>2</sup>",(n=Math.round(r/1e6*100)/100)+" "+e):r<1e5&&1e3<r?(e="da",(n=Math.round(r/1e3*100)/100)+" "+e):(e="m<sup>2</sup>",(n=Math.round(100*r)/100)+" "+e),unit:e,value:n,order:2}};return{Activate:function(y,b){d=!0,a=b.translate,y.on("pointermove",e),$(y.getViewport()).on("mouseout",(function(){$(l).addClass("hidden")})),function(e){i=new ol.layer.Vector({map:e,source:new ol.source.Vector({useSpatialIndex:!1}),updateWhileAnimating:!0,updateWhileInteracting:!0});var a=new ol.source.Vector;f=new ol.interaction.Draw({source:a,type:"Polygon"});var d,y=new o.MapImplementation.OL3.Styles.Measure;p=new ol.layer.Vector({source:a,style:y.Styles()}),e.addInteraction(f),e.addLayer(p),g(e),function(t){l&&null!==l.parentNode&&l.parentNode.removeChild(l),(l=document.createElement("div")).className="tooltip hidden",u=new ol.Overlay({element:l,offset:[15,0],positioning:"center-left"}),t.addOverlay(u)}(e),f.on("drawstart",(function(e){var a=(s=e.feature).getGeometry().getCoordinates()[0][0];n=new ol.Feature(new ol.geom.Circle(a,0)),i.getSource().addFeature(n);var l=e.coordinate;d=s.getGeometry().on("change",(function(e){var i,a,s=e.target;if(s instanceof ol.geom.Polygon){i=v(s),l=s.getInteriorPoint().getCoordinates(),function(t){!function(t){var e=function(t){var e;if(0<t.length){var n=t[0].length,r=function(t){for(var e=[],n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)e.push(r[i]);return e}(t);e=function(t,e,n,r){var i,o=t[0],a=t[1],s=0;for(i=0+r;i<n;i+=r){var l=t[i],u=t[i+1];s+=Math.sqrt((l-o)*(l-o)+(u-a)*(u-a)),o=l,a=u}return s}(r,0,r.length,n)}return e}(t);r=e,100<(e=Math.round(100*e)/100)?("km",Math.round(e/1e3*100)):("m",Math.round(100*e))}(t.getCoordinates()[0])}(s);var u=function(t){return 2===t.getCoordinates()[0].length?(n.getGeometry().setRadius(r),Math.PI*Math.pow(r,2)):(n.getGeometry().setRadius(0),null)}(s);null!==u&&(a=v(u))}else s instanceof ol.geom.LineString&&(i=m(s),l=s.getLastCoordinate());2===s.getCoordinates()[0].length?c.innerHTML=a.string:c.innerHTML=i.string,t.TriggerEvent(o.Events.EventTypes.MeasureMouseMove,i),h.setPosition(l)}))}),this),f.on("drawend",(function(){c.className="tooltip tooltip-static",h.setOffset([0,-7]),c=s=null,g(e),ol.Observable.unByKey(d)}),this)}(y)},Deactivate:function(e){if(d){if(d=!1,void 0!==e){e.removeLayer(p),c.className="tooltip tooltip-static",h.setOffset([0,-7]),n.getGeometry().setRadius(0),c=null,e.removeInteraction(f),e.removeOverlay(i),e.removeOverlay(h),e.removeOverlay(u),l&&l.parentNode.removeChild(l),c&&c.parentNode.removeChild(c);for(var r=document.getElementsByClassName("tooltip tooltip-static");0<r.length;){var a=r[0];a.parentNode.removeChild(a)}}t.TriggerEvent(o.Events.EventTypes.MeasureEnd)}}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.MeasureLine=function(t){function e(t){if(!t.dragging&&h){var e=n.start_measure_line;if(r){var o=r.getGeometry();o instanceof ol.geom.Polygon?e="Click to continue drawing the polygon":o instanceof ol.geom.LineString&&(e=n.continue_measure_line)}i.innerHTML=e,a.setPosition(t.coordinate),$(i).removeClass("hidden")}}var n,r,i,a,s,l,u,c,h=!1;function f(t){s&&null!==s.parentNode&&s.parentNode.removeChild(s),(s=document.createElement("div")).className="tooltip tooltip-measure",l=new ol.Overlay({element:s,offset:[0,-15],positioning:"bottom-center"}),t.addOverlay(l)}var p=function(t){var e,n,r=Math.round(100*t.getLength())/100;return{string:1e3<r?(e="km",(n=Math.round(r/1e3*100)/100)+" "+e):(e="m",(n=Math.round(100*r)/100)+" "+e),unit:e,value:n,order:1}},d=function(t){var e=t.getArea();return 1e4<e?Math.round(e/1e6*100)/100+" km<sup>2</sup>":Math.round(100*e)/100+" m<sup>2</sup>"};return{Activate:function(g,m){h=!0,n=m.translate,g.on("pointermove",e),$(g.getViewport()).on("mouseout",(function(){$(i).addClass("hidden")})),function(e){var n=new ol.source.Vector;u=new ol.interaction.Draw({source:n,type:"LineString"});var h,g=new o.MapImplementation.OL3.Styles.Measure;c=new ol.layer.Vector({source:n,style:g.Styles()}),e.addInteraction(u),e.addLayer(c),f(e),function(t){i&&null!==i.parentNode&&i.parentNode.removeChild(i),(i=document.createElement("div")).className="tooltip hidden",a=new ol.Overlay({element:i,offset:[15,0],positioning:"center-left"}),t.addOverlay(a)}(e),u.on("drawstart",(function(e){r=e.feature;var n=e.coordinate;h=r.getGeometry().on("change",(function(e){var r,i=e.target;i instanceof ol.geom.Polygon?(r=d(i),n=i.getInteriorPoint().getCoordinates()):i instanceof ol.geom.LineString&&(r=p(i),n=i.getLastCoordinate()),s.innerHTML=r.string,t.TriggerEvent(o.Events.EventTypes.MeasureMouseMove,r),l.setPosition(n)}))}),this),u.on("drawend",(function(){s.className="tooltip tooltip-static",l.setOffset([0,-7]),s=r=null,f(e),ol.Observable.unByKey(h)}),this)}(g)},Deactivate:function(e){if(h){if(h=!1,void 0!==e){e.removeLayer(c),s.className="tooltip tooltip-static",l.setOffset([0,-7]),s=null,e.removeInteraction(u),e.removeOverlay(l),e.removeOverlay(a),i&&i.parentNode.removeChild(i),s&&s.parentNode.removeChild(s);for(var n=document.getElementsByClassName("tooltip tooltip-static");0<n.length;){var r=n[0];r.parentNode.removeChild(r)}}t.TriggerEvent(o.Events.EventTypes.MeasureEnd)}}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.ModifyFeature=function(t){function e(t){if(f){var e=n.start_modify;void 0!==l&&(l.innerHTML=e,u.setPosition(t.coordinate),$(l).removeClass("hidden"))}}var n,r,i,a,s,l,u,c,h,f=!1;function p(e){"Line"===r&&(r="LineString");var n=new ol.Collection(i);c=new ol.interaction.Modify({features:n,deleteCondition:function(t){return ol.events.condition.shiftKeyOnly(t)&&ol.events.condition.singleClick(t)}}),e.addInteraction(c),function(t){var e=new ol.Collection(a);h=new ol.interaction.Snap({features:e}),t.addInteraction(h)}(e),function(t){l&&null!==l.parentNode&&l.parentNode.removeChild(l),(l=document.createElement("div")).className="tooltip hidden",u=new ol.Overlay({element:l,offset:[15,0],positioning:"center-left"}),t.addOverlay(u)}(e),c.on("modifyend",(function(e){ol.Observable.unByKey(void 0),s=e.features.getArray()[0],t.TriggerEvent(o.Events.EventTypes.ModifyFeatureEnd,s)}),this)}return{Activate:function(t,r){if(f=!0,n=r.translate,i=[],Array.isArray(r.features))for(var o=0;o<r.features.length;o++)i.push(r.features[o]);else i.push(r.features);a=r.snappingFeatures,t.on("pointermove",e),$(t.getViewport()).on("mouseout",(function(){$(l).addClass("hidden")})),p(t)},Deactivate:function(t){f&&(f=!1,s=null,void 0!==t&&(t.removeInteraction(c),t.removeInteraction(h),function(t){t.removeOverlay(u),null!==l&&null!==l.parentNode&&l.parentNode.removeChild(l);for(var e=document.getElementsByClassName("tooltip tooltip-static");0<e.length;){var n=e[0];n.parentNode.removeChild(n)}}(t)))}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Offline=function(){function t(){return y}function e(){y||(y=!0,c=g.getCenter(),I.length=0,p=new ol.layer.Vector({source:new ol.source.Vector({features:I})}),d.addLayer(p),R(w),A())}function n(){void 0!==d&&void 0!==p&&(I.length=0,p.getSource().clear(),d.removeLayer(p)),y&&(y=!1,L())}function r(t){x[b]&&x[b].get("settings").then((function(e){return v=t,m.TriggerEvent(o.Events.EventTypes.StatusPouchDbChanged,v),x[b].put({_id:"settings",_rev:e._rev,title:"cacheCreated",isCacheCreated:t})})).then((function(t){X(t)})).catch((function(e){e&&"not_found"===e.name?(v=t,m.TriggerEvent(o.Events.EventTypes.StatusPouchDbChanged,v),x[b].put({_id:"settings",title:"cacheCreated",isCacheCreated:t}).then((function(t){})).catch((function(t){}))):X(e)}))}function i(t,e,n){var r=e?b:w;R(r),x[r].getAttachment(t,"resource").then((function(t){blobUtil.blobToBinaryString(t).then((function(t){resource=JSON.parse(t),n(resource,!0)})).catch((function(t){n(void 0,!1)}))})).catch((function(t){n(void 0,!1)}))}function a(t,e,n,r){R(w),x.map.get(t).then((function(i){x.map.getAttachment(t,e).then((function(o){o?(r.getImage().src=window.URL.createObjectURL(o),X(t+" wms "+e+" retrieved from cache!")):(V(t,e,n,i._rev),r.getImage().src=n)})).catch((function(t){}))})).catch((function(i){404===i.status&&(z(t,e,n,r),r.getImage().src=n)}))}var s,l,u,c,h,f,p,d,g,m,v,y=!1,b="config",w="map",x={},S="pouchtiles:",_=0,k=!0,E=!0,M=[],T=[],O=0,P=[],C=0,I=[],A=function(){_=0;for(var t=d.getLayers().getArray(),e=0;e<t.length;e++){var n=t[e].get("config");if(n)if("wms"===n.source.toLowerCase()||"proxywms"===n.source.toLowerCase())j(t[e]);else if("wfs"===n.source.toLowerCase()){var r=t[e].getSource();r&&(r.clear(),r.set("caching",!0))}}},L=function(){for(var t=d.getLayers().getArray(),e=0;e<t.length;e++){var n=t[e].get("config");if(n)if("wms"===n.source.toLowerCase()||"proxywms"===n.source.toLowerCase())N(t[e]);else if("wfs"===n.source.toLowerCase()){var r=t[e].getSource();r&&r.set("caching",!1)}}},R=function(t){return x[t]||(x[t]=new PouchDB(S+t)),x[t]},j=function(t){var e=t.getSource();B(e,q),e.on("tileloadstart",(function(){++_,k=!1})),e.on("tileloadend",(function(){G()})),e.on("tileloaderror",(function(){G()}))},N=function(t){var e=t.getSource();B(e,void 0),e.un("tileloadstart",(function(){})),e.un("tileloadend",(function(){})),e.un("tileloaderror",(function(){}))},F=function(e,n,r,i){var o=w;R(o),x.map.get(e).then((function(t){x.map.getAttachment(e,n,(function(a,s){a&&"not_found"===a.error||!s?function(t,e,n,r,i,o){navigator.onLine&&$.ajax({url:n}).done((function(n){if("object"==typeof n&&0!==n.firstChild.childElementCount){o&&o(n);var a=new XMLSerializer;R(r),x[r].putAttachment(t,e,i,btoa(a.serializeToString(n)),"text/plain").then((function(){})).catch((function(t){}))}}))}(e,n,r,o,t._rev,i):blobUtil.blobToBase64String(s).then((function(t){i&&i($.parseXML(atob(t)))})).catch((function(t){}))}))})).catch((function(i){404===i.status&&function(e,n,r,i,o){navigator.onLine&&t()&&$.ajax({url:r}).done((function(t){if("object"==typeof t&&0!==t.firstChild.childElementCount){var o=new XMLSerializer;R(i),x[i].putAttachment(e,n,btoa(o.serializeToString(t)),"text/plain").then((function(){})).catch((function(t){409===t.status&&function(t,e,n,r){F(t,e,n,r)}(e,n,r,i)}))}}))}(e,n,r,o)}))},D=function(t,e,n,r){var o,a,s,l=r?b:w;if(R(l),y)i(t,r,n);else{try{$.ajax({type:"GET",url:t,async:!1}).done((function(t){s=!0,o=t,a=btoa(unescape(encodeURIComponent(JSON.stringify(t))))})).fail((function(){s=!1,i(t,r,n)}))}catch(e){return s=!1,void i(t,r,n)}s&&(x[l].get(t).then((function(e){x[l].put({_id:t,_rev:e._rev,_attachments:{resource:{content_type:"text/plain",data:a}}}).catch((function(t){}))})).then((function(){})).catch((function(e){e&&"not_found"===e.name?x[l].put({_id:t,_attachments:{resource:{content_type:"text/plain",data:a}}}).catch((function(t){})):X(e)})),n(o,!1))}},G=function(){--_<=0&&(k=!0,E||U())},U=function(){var t=C;if(P[t]>=M[t]*T[t]){if(t>=P.length-1)return E=!0,n(),g.setZoom(u),g.setCenter(c),d.removeLayer(p),void m.TriggerEvent(o.Events.EventTypes.CachingEnd,H());t=++C}if(m){var e,r;if(m.TriggerEvent(o.Events.EventTypes.CachingProgress,H()),g.getZoom()!==u+t&&g.setZoom(u+t),1===T[t])e=h[0]+(f[0]-h[0])/2,r=f[1]+(h[1]-f[1])/2,g.setCenter([e,r]),P[t]=1/0;else{var i=Math.floor(P[t]/T[t])%(T[t]-(T[t]-M[t])),a=P[t]%T[t];e=h[0]+i*(f[0]-h[0])/(M[t]-1),r=h[1]+a*(f[1]-h[1])/(T[t]-1),g.setCenter([e,r]),K([e,r]),P[t]++}setTimeout((function(){k&&!E&&U()}),100)}},B=function(t,e){if(t)if(e){var n=t.getTileLoadFunction();t.setTileLoadFunction(e),t.set("onlineTLF",n)}else{var r=t.get("onlineTLF");"function"==typeof r&&t.setTileLoadFunction(r)}},z=function(t,e,n,r){R(w),blobUtil.imgSrcToBlob(n,"image/jpeg","Anonymous").then((function(i){x.map.putAttachment(t,e,i,"image/png").then((function(){X(t+" wms added to cache!")})).catch((function(i){409===i.status&&a(t,e,n,r)}))})).catch((function(t){}))},V=function(t,e,n,r){R(w),blobUtil.imgSrcToBlob(n,"image/jpeg","Anonymous").then((function(n){x.map.putAttachment(t,e,r,n,"image/png").then((function(){X(t+" wms added to cache!")})).catch((function(e){X(t+" add wms failed! "+e)}))})).catch((function(i){409===i.status&&V(t,e,n,r)}))},q=function(t,e){var n="LAYERS=",r=e.substr(e.search(n,"i")),i=r.substr(n.length,r.indexOf("&")-n.length);i||(i="layer"),a(this.getTileCoord().join("-"),i+".png",e,t)},H=function(){var t=0;if(0<P.length&&0<P.length)for(var e=0;e<O;e++)P[e]===1/0?t++:t+=P[e];return t},W=function(){var t=0;if(0<M.length&&0<T.length)for(var e=0;e<O;e++)t+=M[e]*T[e];return t},K=function(t){var e=p.getSource(),n=new ol.Feature({geometry:new ol.geom.Circle(t,5*g.getResolution())});return n.setStyle(new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.3)",width:1}),fill:new ol.style.Fill({color:"rgba(160,0,0,0.9)"})})),I[I.length]=n,I[I.length-1][0]="circle",e.addFeature(n),n},Y=function(t,e){var n=p.getSource();p1=t,p2=[t[0],e[1]],p3=e,p4=[e[0],t[1]];var r=[p1,p2,p3,p4,p1],i=new ol.Feature({geometry:new ol.geom.LineString(r)});return i.setStyle(new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(160,0,0,0.7)",width:2})})),I[I.length]=i,I[I.length-1][0]="square",n.addFeature(i),i},X=function(t){t&&console};return{Init:function(t,e){g=(d=t).getView(),m||(m=e),R(b),function(t){v=!1,x[b]&&x[b].get(t).then((function(t){t.hasOwnProperty("title")&&"cacheCreated"===t.title&&(v=t.isCacheCreated,m.TriggerEvent(o.Events.EventTypes.StatusPouchDbChanged,v))}))}("settings")},IsActive:t,CacheDatabaseExist:function(){return v},Activate:e,Deactivate:n,StartCaching:function(t,n,i,a){!function(t,n,i,a){e(),m=a;var c=g.getZoom(),p=g.getResolution(),d=c-t;0<d&&(p*=Math.pow(2,d)),O=n-t,g.setZoom(t);var v=i;h=[v[0],v[3]],f=[v[2],v[1]],Y(h,f),u=g.getZoom(),r(!(E=!1));var y=(v[2]-v[0])/g.getResolution(),b=(v[3]-v[1])/g.getResolution();s=Math.abs(Math.ceil((f[0]-h[0])/p*Math.pow(2,O)/y)),l=Math.abs(Math.ceil((h[1]-f[1])/p*Math.pow(2,O)/b)),M.length=0,T.length=0;for(var w=P.length=0,x=0;x<O;x++)(P[x]=0)<d?(M[x]=1,T[x]=1,d--):(M[x]=Math.abs(Math.ceil((f[0]-h[0])/p*Math.pow(2,w+1)/y)),T[x]=Math.abs(Math.ceil((h[1]-f[1])/p*Math.pow(2,w+1)/b)),w++);1<s&&1<l?(m.TriggerEvent(o.Events.EventTypes.CachingStart,W()),U()):X("Area too small! Increase area or number of zoom levels!")}(t,n,i,a)},StopCaching:function(){E=!0,m.TriggerEvent(o.Events.EventTypes.CachingEnd,H()),n(),g.setZoom(u),g.setCenter(c),d.removeLayer(p)},CalculateTileCount:function(t,e,n){var r=0;if(void 0!==d){var i=n,o=g.getResolution();h=[i[0],i[3]],f=[i[2],i[1]];var a=e-t,s=g.getZoom();t<s&&(o*=Math.pow(2,s-t));for(var l=0;l<a;l++)r+=Math.abs(Math.ceil((f[0]-h[0])/o*Math.pow(2,l+1)/256/2))*Math.abs(Math.ceil((h[1]-f[1])/o*Math.pow(2,l+1)/256/2))}return r},GetResource:function(t,e,n){!function(t,e,n,r){var o,a,s;R(r?b:w);var l=r?b:w;if(y)i(t,r,n);else{try{if(!(o=$.ajax({type:"GET",url:t,async:!1}).responseText))return void i(t,r,n);a="application/json"===e.toLowerCase()?xml.xmlToJSON(o):o,s=btoa(JSON.stringify(a))}catch(e){return i(t,r,n),void n(a,!1)}R(l),x[l].get(t).then((function(e){x[l].put({_id:t,_rev:e._rev,_attachments:{resource:{content_type:"text/plain",data:s}}}).catch((function(t){}))})).then((function(){})).catch((function(e){e&&"not_found"===e.name?x[l].put({_id:t,_attachments:{resource:{content_type:"text/plain",data:s}}}).catch((function(t){n(a,!1)})):X(e)})),n(a,!1)}}(t,e,n,!1)},GetConfigResource:function(t,e,n){D(t,0,n,!0)},GetLayerResource:F,DeleteDatabase:function(t,e,n){r(!1),R(w),x.map&&x.map.destroy(S+w,(function(r,i){r?X("Database destroy error: "+r+" "+i):(X("Deleted "+S+w+" database."),x.map=void 0,t&&t(e,n))}))},GetDatabase:R,GetResourceFromJson:function(t,e,n){D(t,0,n,!1)}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.PrintBox=function(){var t,e=!1,n={},r=25e3,i={},o=17.6,a=26.3,s={},l="portrait";function u(t){return t.getView().getCenter()}function c(t,e){t.getInteractions().forEach((function(n){n instanceof ol.interaction.DragPan&&(t.removeInteraction(n),e&&(i=n))}))}var h=function(t){var e=new ol.geom.Point([t[0],t[1]]),n=new ol.geom.Point([t[0],t[3]]),r=new ol.geom.Point([t[2],t[3]]),i=new ol.geom.Point([t[2],t[1]]),o=new ol.geom.Polygon([[e.getCoordinates(),n.getCoordinates(),r.getCoordinates(),i.getCoordinates(),e.getCoordinates()]]);return new ol.geom.MultiPolygon([o.getCoordinates()])},f=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"#ee9900",width:1,opacity:1}),fill:new ol.style.Fill({color:"rgba(238,153,0,0.4)",opacity:.4})})};return{Activate:function(i,p){e=!0,void 0!==i&&(r=p.scale,void 0!==p.pageWidth&&(o=p.pageWidth),void 0!==p.pageHeight&&(a=p.pageHeight),void 0!==p.orientation&&l!==p.orientation&&function(){var t=o;o=a,a=t}(),l=p.orientation,function(t){c(t,!0),t.addInteraction(new ol.interaction.DragPan({kinetic:!1}))}(i),function(e){s.change_center=e.getView().on("change:center",(function(){var r=function(t){var e=u(t),r=[e[0]-n[0],e[1]-n[1]];return n=e,r}(e);!function(e,n){t.getSource().getFeatures()[0].getGeometry().translate(n[0],n[1])}(0,r)}))}(i),function(e){var i=function(t,e){var n=t.map((function(t){return t/ol.has.DEVICE_PIXEL_RATIO})),r=e.getCoordinateFromPixel([n[0],n[3]]),i=e.getCoordinateFromPixel([n[2],n[1]]),o=e.getCoordinateFromPixel([n[0],n[1]]),a=e.getCoordinateFromPixel([n[2],n[3]]);return new ol.geom.Polygon([[r,o,i,a,r]]).getExtent()}(function(t){var e=t.getView().getResolution(),n=o/72*25.4/1e3*r/e*ol.has.DEVICE_PIXEL_RATIO,i=a/72*25.4/1e3*r/e*ol.has.DEVICE_PIXEL_RATIO,s=t.getSize(),l=[s[0]*ol.has.DEVICE_PIXEL_RATIO/2,s[1]*ol.has.DEVICE_PIXEL_RATIO/2];return[l[0]-n/2,l[1]-i/2,l[0]+n/2,l[1]+i/2]}(e),e);t&&e.removeLayer(t),n=u(e);var s=h(i),l=new ol.Feature(s);l.setStyle(f());var c=new ol.source.Vector;c.addFeature(l),t=new ol.layer.Vector({name:"PrintBox",source:c,updateWhileAnimating:!0,updateWhileInteracting:!0}),e.addLayer(t),t.setZIndex(2e3)}(i))},Deactivate:function(n){e&&(e=!1,void 0!==n&&(n.removeLayer(t),function(){for(var t in s)ol.Observable.unByKey(s[t]),s[t]=!1}(),function(t){c(t,!1),t.addInteraction(i)}(n)))}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.PrintBoxSelect=function(t){var e,n=!1,r={},i="",a=25e3,s={},l=4,u=3,c=17.6,h=26.3,f={},p="portrait",d=!0;function g(t){var e=b(t),n=S(e.getCoordinates()[0],e.getCoordinates()[1]);return i=n}function m(t,e){t.getInteractions().forEach((function(n){n instanceof ol.interaction.DragPan&&(t.removeInteraction(n),e&&(s=n))}))}var v=function(e){var n=y(e),r=M(n),s=T(r),l=_(s,i),u={bbox:[s.left,s.bottom,s.right,s.top],center:r.getCoordinates(),projection:i.localProj,sone:i.sone,biSone:l,scale:a};t.TriggerEvent(o.Events.EventTypes.PrintBoxSelectReturnValue,u)},y=function(t){return t.getView().getCenter()},b=function(t){var e=new ol.geom.Point(t);return d&&e.applyTransform(ol.proj.getTransform("EPSG:32633","EPSG:4326")),e},w=function(t){var e=t.getView().getCenter(),n=[e[0]-r[0],e[1]-r[1]];return r=e,n},x=function(t,n){e.getSource().getFeatures()[0].getGeometry().translate(n[0],n[1])},S=function(t,e){var n="32V",r="EPSG:32632";return 72<e?r=t<21?(n="33X","EPSG:32633"):(n="35X","EPSG:32635"):64<e?r=t<6?(n="31W","EPSG:32631"):t<12?(n="32W","EPSG:32632"):t<18?(n="33W","EPSG:32633"):t<24?(n="34W","EPSG:32634"):t<30?(n="35W","EPSG:32635"):(n="36W","EPSG:32636"):t<3?(n="31V",r="EPSG:32631"):12<=t&&(n="33V",r="EPSG:32633"),{sone:n,localProj:r}},_=function(t,e){var n=new ol.geom.Point([t.left,t.bottom]);n.applyTransform(ol.proj.getTransform(e.localProj,"EPSG:4326"));var r=S(n.getCoordinates()[0],n.getCoordinates()[1]).sone;if(r!==e.sone)return r;var i=new ol.geom.Point([t.right,t.top]);i.applyTransform(ol.proj.getTransform(e.localProj,"EPSG:4326"));var o=S(i.getCoordinates()[0],i.getCoordinates()[1]).sone;if(o!==e.sone)return o;var a=new ol.geom.Point([t.right,t.bottom]);a.applyTransform(ol.proj.getTransform(e.localProj,"EPSG:4326"));var s=S(a.getCoordinates()[0],a.getCoordinates()[1]).sone;if(s!==e.sone)return s;var l=new ol.geom.Point([t.right,t.top]);l.applyTransform(ol.proj.getTransform(e.localProj,"EPSG:4326"));var u=S(l.getCoordinates()[0],l.getCoordinates()[1]).sone;return u!==e.sone?u:""},k=function(t){v(t),e&&t.removeLayer(e);var n=y(t),i=T(M(r=n)),o=E(O(i),n),a=new ol.Feature(o);a.setStyle(P());var s=new ol.source.Vector;s.addFeature(a),e=new ol.layer.Vector({name:"PrintBoxSelect",source:s,updateWhileAnimating:!0,updateWhileInteracting:!0}),t.addLayer(e),e.setZIndex(2e3)},E=function(t,e){var n=new ol.geom.MultiPolygon(t);return d&&n.applyTransform(ol.proj.getTransform(g(e).localProj,"EPSG:32633")),n},M=function(t){var e=new ol.geom.Point(t);return d?e.applyTransform(ol.proj.getTransform("EPSG:32633",g(t).localProj)):g(t),e},T=function(t){var e={};return e.width=a*c*l/100,e.height=a*h*u/100,e.left=t.getCoordinates()[0]-e.width/2,e.right=e.left+e.width,e.bottom=t.getCoordinates()[1]-e.height/2,e.top=e.bottom+e.height,e},O=function(t){for(var e=[],n=t.left,r=1;r<=l;r++){for(var i=n+(t.right-t.left)/l,o=t.bottom,a=1;a<=u;a++){var s=o+(t.top-t.bottom)/u,c=new ol.geom.Point([n,o]),h=new ol.geom.Point([n,s]),f=new ol.geom.Point([i,s]),p=new ol.geom.Point([i,o]),d=new ol.geom.Polygon([[c.getCoordinates(),h.getCoordinates(),f.getCoordinates(),p.getCoordinates(),c.getCoordinates()]]);e.push(d.getCoordinates()),o=s}n=i}return e},P=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"#ee9900",width:1,opacity:1}),fill:new ol.style.Fill({color:"rgba(238,153,0,0.4)",opacity:.4})})};return{Activate:function(t,e){n=!0,void 0!==t&&(a=e.scale,void 0!==e.pageWidth&&(c=e.pageWidth),void 0!==e.pageHeight&&(h=e.pageHeight),l=e.cols,u=e.rows,void 0!==e.orientation&&p!==e.orientation&&function(){var t=c;c=h,h=t}(),p=e.orientation,d=e.rotation||!0,function(t){m(t,!0),t.addInteraction(new ol.interaction.DragPan({kinetic:!1}))}(t),function(t){f.change_center=t.getView().on("change:center",(function(){if(function(t){if(n){var e=b(y(t));return S(e.getCoordinates()[0],e.getCoordinates()[1])===i||(k(t),!1)}}(t)){var e=w(t);x(t,e)}})),f.moveend=t.on("moveend",(function(){v(t)}))}(t),k(t))},Deactivate:function(t){n&&(n=!1,void 0!==t&&(t.removeLayer(e),function(){for(var t in f)ol.Observable.unByKey(f[t]),f[t]=!1}(),function(t){m(t,!1),t.addInteraction(s)}(t)))}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.ProgressBar=function(t){var e,n;function r(){var t=document.getElementById("progressbar");null!=t&&(n=new i(t),e.getLayers().forEach((function(t){var e=t.getSource();if(e)switch(e.get("type")){case"ol.source.Vector":e.on("vectorloadstart",(function(){n.addLoading()})),e.on("vectorloadend",(function(){n.addLoaded()}));break;case"ol.source.ImageWMS":e.on("imageloadstart",(function(){n.addLoading()})),e.on("imageloadend",(function(){n.addLoaded()})),e.on("imageloaderror",(function(){n.addLoaded()}));break;case"ol.source.TileWMS":e.on("tileloadstart",(function(){n.addLoading()})),e.on("tileloadend",(function(){n.addLoaded()})),e.on("tileloaderror",(function(){n.addLoaded()}))}})))}function i(t){this.el=t,this.loading=0,this.loaded=0}return i.prototype.addLoading=function(){0===this.loading&&this.show(),++this.loading,this.update()},i.prototype.addLoaded=function(){var t=this;++t.loaded,t.loaded>t.loading&&(t.loaded=t.loading),t.update()},i.prototype.update=function(){if(this.el.style.width=(this.loaded/this.loading*100).toFixed(1)+"%",this.loading===this.loaded){this.loading=0,this.loaded=0;var t=this;setTimeout((function(){t.hide()}),500)}},i.prototype.show=function(){this.el.style.visibility="visible"},i.prototype.hide=function(){this.loading===this.loaded&&(this.el.style.visibility="hidden",this.el.style.width=0)},{Init:function(n){e=n,t.RegisterEvent(o.Events.EventTypes.ChangeLayers,r)}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Utilities=function(){return{ConvertGmlToGeoJson:function(t){var e=(new ol.format.WMSCapabilities).read(t),n=(new ol.format.GML).readFeatures(e);return(new ol.format.GeoJSON).writeFeatures(n)},ExtentToGeoJson:function(t,e){var n=new ol.geom.Point([t,e]),r=new ol.Feature;return r.setGeometry(n),(new ol.format.GeoJSON).writeFeature(r)}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Sources=o.MapImplementation.OL3.Sources||{},o.MapImplementation.OL3.Sources.CustomMessageHandler=function(t,e){var n,r,i,a="Service down: ";function s(){var t=document.getElementById("messagecontainer");null!=t&&(r=new l(t),n&&n.getLayers().forEach((function(t){var e=i(t),n=t.getSource();if(n)switch(n.get("type")){case"ol.source.ImageWMS":n.on("imageloaderror",(function(t){r.showMessage(e.title,t)}));break;case"ol.source.TileWMS":n.on("tileloaderror",(function(t){r.showMessage(e.title,t)}))}})))}function l(t){this.el=t,this.messages=[],this.looping=!1,this.visible=!1}return l.prototype.showMessage=function(t,e){var n=this;if(t=n.getResponse(t,e),0===n.messages.length)n.messages.push(t);else{var r=!0;n.messages.forEach((function(e){r&&e===t&&(r=!1)})),r&&n.messages.push(t)}n.show()},l.prototype.getResponse=function(t,e){try{var n=e.tile.getImage();if(n&&n.src&&(n.src.toLowerCase().indexOf("&gkt=")<0||n.src.toLowerCase().indexOf("?gkt=")<0)){var r=$.ajax({type:"GET",url:n.src,async:!1}).responseText,i=xml.xmlToJSON(r);if(i&&i.serviceexceptionreport&&i.serviceexceptionreport.serviceexception){var o=i.serviceexceptionreport.serviceexception.split("\n");return t+"<br>"+o[2]+" "+o[3].substr(0,o[3].indexOf(" Token:"))}}}catch(t){return t}return t},l.prototype.show=function(){var t=this;t.visible||(t.visible=!0,t.el.innerHTML="",t.el.style.opacity=1,t.el.style.visibility="visible",t.looping||(t.looping=!0,t.loopMessages()))},l.prototype.hide=function(){var t=this;t.visible&&(t.looping=!1,t.visible=!1,t.el.style.opacity=0,setTimeout((function(){t.el.style.visibility="hidden"}),2e3))},l.prototype.loopMessages=function(t){void 0===t&&(t=this),0<t.messages.length?(t.el.innerHTML=a+t.messages.pop(),setTimeout((function(){t.loopMessages(t)}),1e3)):t.hide()},{Init:function(r,l){n=r,l&&0<l.length&&(a=l),i=e,t.RegisterEvent(o.Events.EventTypes.ChangeLayers,s)},InitMessage:function(t){void 0!==t&&(a=t),s()},ShowCustomMessage:function(t){r&&r.showMessage(t)}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Sources=o.MapImplementation.OL3.Sources||{},o.MapImplementation.OL3.Sources.Vector=function(t){var e;if(t.format===o.Domain.SubLayer.FORMATS.geoJson)(e=new ol.source.Vector({format:new ol.format.GeoJSON({defaultDataProjection:t.coordinate_system}),url:t.url})).set("type","ol.source.Vector");return e},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Sources=o.MapImplementation.OL3.Sources||{},o.MapImplementation.OL3.Sources.Wfs=function(t,e,n,r,i){var a;if(t.tiled){var s=[];s[0]=21664;for(var l=1;l<18;l++)s[l]=s[l-1]/2;a=ol.loadingstrategy.tile(new ol.tilegrid.TileGrid({origin:[0,0,0],resolutions:s}))}else a=ol.loadingstrategy.bbox;function u(e){var n;if(h.dispatchEvent("vectorloadend"),void 0===h.format){var a;switch(t.version){case"1.0.0":a=new ol.format.GML2;break;case"1.1.0":case"2.0.0":a=new ol.format.GML3;break;default:a=new ol.format.GML}t.srs_dimension&&0<t.srs_dimension.length?(n=e.firstChild.firstElementChild.firstElementChild.namespaceURI,h.format=new ol.format.WFS({featureType:e.firstChild.firstElementChild.firstElementChild.localName,featureNS:n,gmlFormat:a})):(n=e.firstChild.namespaceURI,h.format=new ol.format.WFS({featureType:t.name,featureNS:n,gmlFormat:a}))}if("3"===t.srs_dimension&&(n=e.firstChild.firstElementChild.firstElementChild.namespaceURI,"gml:featurecollection"===e.firstChild.nodeName.toLowerCase()))for(var s=0;s<e.firstChild.childNodes.length;s++){var l=e.firstChild.childNodes.item(s);if("gml:featuremember"===l.nodeName.toLowerCase())for(var u=0;u<l.childNodes.length;u++){var c=l.childNodes.item(u);if(c.nodeName.toLowerCase()===t.name.toLowerCase())for(var f=0;f<c.childNodes.length;f++)for(var p=c.childNodes.item(f),d=0;d<p.childNodes.length;d++){var g=p.childNodes.item(d).nodeName;if("gml:linestring"===g.toLowerCase()||"gml:point"===g.toLowerCase()){var m=document.createAttribute("srsDimension");m.value=t.srs_dimension,p.firstElementChild.attributes.setNamedItem(m)}}}}var v=h.format.readFeatures(e);v&&0<v.length&&(v.forEach((function(e){e.set("layerguid",t.id)})),h.addFeatures(v)),0<v.length&&(t.geometryName=v[0].getGeometryName()),t.featureNS=n,r&&i&&i.TriggerEvent(o.Events.EventTypes.RefreshSourceDone,r)}var c=ol.proj.get(t.coordinate_system),h=new ol.source.Vector({loader:function(r){h.dispatchEvent("vectorloadstart");var i=t.url;if(Array.isArray(t.url)&&(i=t.url[0]),i.toLowerCase().indexOf("service=wfs")<0&&(i+="service=WFS&"),i+="request=GetFeature&version="+t.version+"&typename="+t.name+"&srsname="+t.coordinate_system+"&bbox="+r.join(","),n)for(var o in n)i+="&"+o+"="+n[o];if(h.get("caching")||e.IsActive()){var a=r[0]+"-"+r[1];e.GetLayerResource(a,t.name,i,u)}else $.ajax({url:i}).done((function(t){"object"==typeof t&&0!==t.firstChild.childElementCount&&u(t)}))},strategy:a,projection:c});return h.set("type","ol.source.Vector"),h},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Sources=o.MapImplementation.OL3.Sources||{},o.MapImplementation.OL3.Sources.WfsT=function(t,e,n,r,i,a){var s=t,l=e,u=n,c=r,h=i,f=new XMLSerializer,p="";function d(t){if(0<t.childElementCount)for(var e=0;e<t.childNodes.length;e++){if(p+="<"+t.childNodes[e].nodeName,0<t.childNodes[e].attributes.length)for(var n=0;n<t.childNodes[e].attributes.length;n++){var r=t.childNodes[e].attributes[n];p+=" "+r.name+'="'+r.value+'"'}0<t.childNodes[e].childNodes.length&&(p+=">"),0<t.childNodes[e].childElementCount?d(t.childNodes[e]):0<t.childNodes[e].childNodes.length?(p+=t.childNodes[e].childNodes[0].nodeValue,p+="</"+t.childNodes[e].nodeName+">"):p+="/>"}else{if(p+="<"+t.nodeName,0<t.attributes.length)for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];p+=" "+o.name+'="'+o.value+'"'}0<t.childNodes[0].childNodes.length?(p+=">",p+=t.childNodes[0].nodeValue,p+="</"+t.nodeName+">"):p+="/>"}p+="</"+t.nodeName+">"}function g(t){var e=t.getElementsByTagName("*"),n="",r=[],i=e[0].parentNode;n+="<"+i.nodeName,r.push(i.nodeName);for(var o=0;o<i.attributes.length;o++){var a=i.attributes[o];n+=" "+a.name+'="'+a.value+'"'}n+=">",n+="<"+e[0].nodeName,r.push(e[0].nodeName);for(var s=0;s<e[0].attributes.length;s++){var l=e[0].attributes[s];n+=" "+l.name+'="'+l.value+'"'}n+=">";for(var u=e[0],c=0;c<u.childElementCount;c++){if(n+="<"+u.childNodes[c].nodeName,0<u.childNodes[c].attributes.length)for(var h=0;h<u.childNodes[c].attributes.length;h++){var f=u.childNodes[c].attributes[h];n+=" "+f.name+'="'+f.value+'"'}n+=">",d(u.childNodes[c]),n+=p,p=""}for(var g=r.length-1;0<=g;g--)n+="</"+r[g]+">";return n}function m(t){return window.Document&&t instanceof Document&&t.documentElement&&"ExceptionReport"===t.documentElement.localName?t.getElementsByTagNameNS("http://www.opengis.net/ows","ExceptionText").item(0).textContent:h.format.readTransactionResponse(t)}function v(t){var e=t.indexOf(":");return-1!==e?(e++,t.substr(e)):t}return{InsertFeature:function(t,e){if(void 0===h.format&&void 0===e)return a.TriggerEvent(o.Events.EventTypes.TransactionInsertEnd,!1),!1;void 0!==e&&(h=e);var n=h.format.writeTransaction([t],null,null,{gmlOptions:{srsName:c},featureNS:u,featureType:l}),r=f.serializeToString(n);r=(r=r.replace(/geometry/g,t.getGeometryName())).replace(/&/g,"&amp;");var i="Error inserting feature: ",p=!0;if($.ajax({type:"POST",url:s,data:r,async:!1,success:function(e){var n=m(e);if(void 0===n)p=!1,i+="Response parse error.";else if("string"==typeof n)p=!1,i+=n;else if(void 0===n.transactionSummary)p=!1;else if(n&&1===n.transactionSummary.totalInserted){var r=n.insertIds[0];t.setId(r);var s=function(t){var e=t.indexOf("{");return-1!==e?t.substr(e):""}(r);t.set("lokalId",s),h.addFeature(t)}else p=!1,i+="Feature not inserted.";a.TriggerEvent(o.Events.EventTypes.TransactionInsertEnd,p)},error:function(t){var e=t?t.status+" "+t.statusText:"";"200 parsererror"===e&&(e="Response parse error."),p=!1,i+=e,a.TriggerEvent(o.Events.EventTypes.TransactionInsertEnd,p)}}),!p)throw new Error(i)},UpdateFeature:function(t){if(void 0===h.format)return a.TriggerEvent(o.Events.EventTypes.TransactionUpdateEnd,!1),!1;var e=t.getId(),n=t.getProperties();delete n.bbox;var r=new ol.Feature(n);r.setId(e);var i,f=function(t){var e=t.indexOf(":");return-1!==e?t.substr(0,e):""}(l);i=(i=(i=(i=(i=(i=(i=""!==f?(i=g(h.format.writeTransaction(null,[r],null,{gmlOptions:{srsName:c},featureNS:u,featureType:v(l),featurePrefix:f}))).replace(/<Name>/g,"<Name>"+f+":"):g(h.format.writeTransaction(null,[r],null,{gmlOptions:{srsName:c},featureNS:u,featureType:v(l)}))).replace('xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"','xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd" xmlns="http://www.opengis.net/wfs"')).replace("Filter",'Filter xmlns="http://www.opengis.net/ogc"')).replace("Point",'Point xmlns="http://www.opengis.net/gml"')).replace("Polygon",'Polygon xmlns="http://www.opengis.net/gml"')).replace("LineString",'LineString xmlns="http://www.opengis.net/gml"')).replace(/&/g,"&amp;");var p="Error updating feature: ",d=!0;if($.ajax({type:"POST",url:s,data:i,success:function(t){var r=m(t);if(void 0===r)d=!1,p+="Response parse error.";else if("string"==typeof r)d=!1,p+=r;else if(void 0===r.transactionSummary)d=!1;else if(r&&void 0===r.transactionSummary.totalUpdated)d=!1,p+="Response parse error.";else if(r&&1!==r.transactionSummary.totalUpdated)d=!1,p+="Feature not updated.";else{var i=h.getFeatureById(e);void 0!==i&&i.setProperties(n)}a.TriggerEvent(o.Events.EventTypes.TransactionUpdateEnd,d)},error:function(t){var e=t?t.status+" "+t.statusText:"";"200 parsererror"===e&&(e="Response parse error."),d=!1,p+=e,a.TriggerEvent(o.Events.EventTypes.TransactionUpdateEnd,d)}}),!d)throw new Error(p)},DeleteFeature:function(t){if(void 0===h.format)return a.TriggerEvent(o.Events.EventTypes.TransactionRemoveEnd,!1),!1;var e=g(h.format.writeTransaction(null,null,[t],{featureNS:u,featureType:v(l)}));e=(e=e.replace('xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"','xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd" xmlns="http://www.opengis.net/wfs"')).replace("Filter",'Filter xmlns="http://www.opengis.net/ogc"');var n="Error deleting feature: ",r=!0;if($.ajax({type:"POST",url:s,data:e,success:function(t){var e=m(t);void 0===e?(r=!1,n+="Response parse error."):"string"==typeof e?(r=!1,n+=e):void 0===e.transactionSummary?r=!1:e&&1!==e.transactionSummary.totalDeleted&&(r=!1,n+="Feature not deleted."),a.TriggerEvent(o.Events.EventTypes.TransactionRemoveEnd,r)},error:function(t){var e=t?t.status+" "+t.statusText:"";"200 parsererror"===e&&(e="Response parse error."),r=!1,n+=e,a.TriggerEvent(o.Events.EventTypes.TransactionRemoveEnd,r)}}),!r)throw new Error(n)},GetFeatureType:function(){return l}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Sources=o.MapImplementation.OL3.Sources||{},o.MapImplementation.OL3.Sources.Wms=function(t,e){function n(t){var n="";if(e){for(var r in e)0<n.length&&(n+="&"),n+=r+"="+e[r];0<t.indexOf("?")?t+="&":t+="?",t+=n}return t}var r,i,o;if(Array.isArray(t.url)){i=t.url;for(var a=0;a<i.length;a++)i[a]=n(i[a])}else r=n(r=t.url);return t.tiled?(o=new ol.source.TileWMS({params:{LAYERS:t.name,VERSION:"1.1.1",FORMAT:t.format,STYLES:t.styles||""},url:r,urls:i,crossOrigin:t.crossOrigin,transparent:t.transparent,minResolution:t.minResolution,maxResolution:t.maxResolution})).set("type","ol.source.TileWMS"):(void 0===r&&(r=i[i.length-1]),(o=new ol.source.ImageWMS({params:{LAYERS:t.name,VERSION:"1.1.1",FORMAT:t.format,STYLES:t.styles||""},ratio:1,url:r,crossOrigin:t.crossOrigin,transparent:t.transparent,minResolution:t.minResolution,maxResolution:t.maxResolution})).set("type","ol.source.ImageWMS")),o},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Sources=o.MapImplementation.OL3.Sources||{},o.MapImplementation.OL3.Sources.Wmts=function(t,e){function n(){var t="";if(e)for(var n in e)t+="&"+n+"="+e[n];return t}var r=new ol.proj.Projection({code:t.coordinate_system,extent:t.extent,units:t.extentUnits}),i=t.matrixSet;null!==i&&""!==i&&void 0!==i||(i=t.matrixPrefix?t.coordinate_system:parseInt(t.coordinate_system.substr(t.coordinate_system.indexOf(":")+1),10));for(var o,a,s=t.url,l=0;l<s.length;l++)s[l]+=n();var u=r.getExtent(),c=t.wmtsExtent?t.wmtsExtent.split(","):u;if(t.getCapabilities){var h=s[0]+"&Request=GetCapabilities&Service=WMTS&Version=1.0.0",f=$.ajax({type:"GET",url:h,async:!1}).responseText;(f=(new ol.format.WMTSCapabilities).read(f)).Contents.Layer.forEach((function(e){e.Identifier===t.name&&(e.WGS84BoundingBox=void 0)})),(a=ol.source.WMTS.optionsFromCapabilities(f,{layer:t.name,matrixSet:i,requestEncoding:"KVP"})).tileGrid=new ol.tilegrid.WMTS({extent:c,origin:a.tileGrid.getOrigin(0),resolutions:a.tileGrid.getResolutions(),matrixIds:a.tileGrid.getMatrixIds(),tileSize:a.tileGrid.getTileSize(0)})}else{for(var p=ol.extent.getWidth(u)/256,d=new Array(t.numZoomLevels),g=new Array(t.numZoomLevels),m=0;m<t.numZoomLevels;++m)d[m]=p/Math.pow(2,m),g[m]=t.matrixPrefix?i+":"+m:g[m]=m;a={layer:t.name,format:t.format,matrixSet:i,crossOrigin:t.crossOrigin,tileGrid:new ol.tilegrid.WMTS({extent:c,origin:ol.extent.getTopLeft(u),resolutions:d,matrixIds:g}),style:"default",wrapX:!0}}return a.projection=r,a.urls=s,(o=new ol.source.WMTS(a)).set("type","ol.source.WMTS"),o},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Styles=o.MapImplementation.OL3.Styles||{},o.MapImplementation.OL3.Styles.Default=function(){return{Styles:function(){var t=new ol.style.Fill({color:"rgba(255,0,0,0.8)"}),e=new ol.style.Stroke({color:"#3399CC",width:2.25});return[new ol.style.Style({image:new ol.style.Circle({fill:t,stroke:e,radius:8}),fill:t,stroke:e})]}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Styles=o.MapImplementation.OL3.Styles||{},o.MapImplementation.OL3.Styles.Json=function(t){var e=0;function n(t,n,o){var a="object"==typeof n?n:JSON.parse(n),s=[];return e++,s.push(new ol.style.Style({fill:r(a),icon:function(t){if(t.icon)return new ol.style.Icon(t.icon)}(a),image:function(t,e){if(t.image)return new ol.style.Circle({radius:e?1.2*t.image.radius:t.image.radius,fill:r(t.image),stroke:i(t.image)});if(t.regularshape){var n=parseInt(t.regularshape.angle,10),o=parseInt(t.regularshape.rotation,10);return new ol.style.RegularShape({fill:r(t.regularshape),stroke:i(t.regularshape),radius:e?1.2*t.regularshape.radius:t.regularshape.radius,radius2:e?1.2*t.regularshape.radius2:t.regularshape.radius2,points:t.regularshape.points,rotation:0<o?Math.PI/o:0,angle:0<n?Math.PI/n:0})}}(a,o),stroke:i(a,o),text:function(t,e,n){if(e.text)return n&&(e.text.scale&&(e.text.scale*=1.2),e.text.rotation&&(e.text.rotation*=-1)),new ol.style.Text({font:e.text.font,offsetX:e.text.offsetX,offsetY:e.text.offsetY,scale:e.text.scale,rotation:e.text.rotation,text:function(t,e){if(e){var n=e.indexOf("{");if(n<0)return e;if("{_id}"==e)return t.getId();for(var r="";0<=n;){0<n&&(r+=e.substr(0,n),n=(e=e.slice(n)).indexOf("{"));var i=e.indexOf("}"),o=e.substr(n+1,i-n-1),a=t.get(o);a&&(r+=a),n=(e=e.slice(i+1)).indexOf("{")}return r+e}}(t,e.text.text),textAlign:e.text.textAlign,textBaseline:e.text.textBaseline,fill:r(e.text),stroke:i(e.text)})}(t,a,o),zIndex:e})),s}function r(t){if(t.fill)return new ol.style.Fill(t.fill)}function i(t,e){if(t.stroke)return e&&(t.stroke.width*=2),new ol.style.Stroke(t.stroke)}return{GetStyle:function(e){if(e){var r=e.getProperties();return r.style?void e.setStyle(n(e,r.style)):n(e,t)}},GetHoverStyle:function(e){if(e)return n(e,t,!0)}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Styles=o.MapImplementation.OL3.Styles||{},o.MapImplementation.OL3.Styles.Measure=function(){return{DrawStyles:function(){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.5)"}),stroke:new ol.style.Stroke({color:"rgba(160, 0, 0, 0.5)",width:2}),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(160, 0, 0, 0.8)"}),stroke:new ol.style.Stroke({color:"rgba(255, 255, 255, 0.8)",width:2})})})},Styles:function(){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.8)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})}}},(o=o||{}).MapImplementation=o.MapImplementation||{},o.MapImplementation.OL3=o.MapImplementation.OL3||{},o.MapImplementation.OL3.Styles=o.MapImplementation.OL3.Styles||{},o.MapImplementation.OL3.Styles.Sld=function(){var t,e=[new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"#319FD3",width:2}),image:new ol.style.Circle({radius:3,fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"#319FD3",width:2})}),text:new ol.style.Text({font:"12px Calibri,sans-serif",fill:new ol.style.Fill({color:"#000"}),stroke:new ol.style.Stroke({color:"#fff",width:3})})})],n=function(t,e){if(void 0===e)return!1;if(void 0===t)return!0;if(void 0===t.filters)return function(t,e){if(void 0===e)return!1;if(void 0===t)return!1;var n,r,i=!1;if(n=e.get(t.property))switch(t.operator){case"==":switch(typeof n){case"string":i=n===(r=t.value);break;case"number":r=parseInt(t.value,10),i=parseInt(n,10)===r}break;case">":r=parseInt(t.value,10),i=parseInt(n,10)>r;break;case"<":r=parseInt(t.value,10),i=parseInt(n,10)<r;break;case">=":r=parseInt(t.value,10),i=parseInt(n,10)>=r;break;case"<=":r=parseInt(t.value,10),i=parseInt(n,10)<=r;break;case"!=":switch(typeof n){case"string":i=n!==(r=t.value);break;case"number":r=parseInt(t.value,10),i=parseInt(n,10)!==r}break;case"NULL":switch(typeof n){case"string":i=0===n.length;break;case"number":r=parseInt(t.value,10),i=parseInt(n,10)!==r}break;case"..":i=(n=parseInt(n,10))>=parseInt(t.lowerBoundary,10)&&n<=parseInt(t.upperBoundary,10)}else if("NULL"===t.operator)i=!0;return i}(t,e);if(t.filters.length<=1)return!0;var r,i=!1;switch(t.filters[0]){case"&&":for(r=1;r<t.filters.length&&(i=n(t.filters[r],e));r++);break;case"||":for(r=1;r<t.filters.length&&!(i=n(t.filters[r],e));r++);}return i},r=function(r,a,s){void 0===s&&(s=!1);var l,u,c,h=[];return t?($(t.namedLayers[0].userStyles).each((function(t,e){s&&!e.isDefault?n(e.rule.filter,r)&&o(e.rule,a)&&((l=e.style.getText())?(u=l.getText(),l=angular.copy(e.style),c=i(u,r),l.getText().setText(c)):h.push(e.style)):!s&&e.isDefault&&n(e.rule.filter,r)&&o(e.rule,a)&&((l=e.style.getText())?(u=l.getText(),l=angular.copy(e.style),c=i(u,r),l.getText().setText(c)):h.push(e.style))})),l&&h.push(l),0<h.length?h:void(s||function(t,e){void 0===t.get("isHidden")&&t.set("isHidden",!0)}(r))):e},i=function(t,e){return 0<=t.indexOf("${")&&0<=(t=t.slice(t.indexOf("${")+2)).indexOf("}")&&(t=t.slice(0,t.indexOf("}"))),e.get(t)},o=function(t,e){if(void 0===t)return!0;var n=t.maxScaleDenominator?t.maxScaleDenominator:1/0,r=t.minScaleDenominator?t.minScaleDenominator:1;return e<=n&&r<=e};return{Sld:t,Styles:e,ParseSld:function(n,r){if(void 0===n)return e;"string"==typeof n&&(n=ol.xml.parse(n)),t={namedLayers:[]},this.readChildNodes(n,t),e=[];var i={maxScaleDenominator:1,minScaleDenominator:1/0};return $(t.namedLayers[0].userStyles).each((function(t,n){var o=n.style;r&&o.setZIndex(r),e.push(o),n.rule&&(n.rule.maxScaleDenominator&&i.maxScaleDenominator<n.rule.maxScaleDenominator&&(i.maxScaleDenominator=n.rule.maxScaleDenominator),n.rule.minScaleDenominator&&i.minScaleDenominator>n.rule.minScaleDenominator&&(i.minScaleDenominator=n.rule.minScaleDenominator))})),1===i.maxScaleDenominator&&(i.maxScaleDenominator=void 0),i.minScaleDenominator===1/0&&(i.minScaleDenominator=void 0),i},GetStyle:function(t,e){return r(t,e)},GetStyleForLegend:function(){if(t)return $(t.namedLayers[0].userStyles)},GetHoverStyle:function(t,e){var n=r(t,e,!0);return void 0===n&&(n=r(t,e)),n},defaultPrefix:"sld",namespaces:{sld:"http://www.opengis.net/sld",ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},namespaceAlias:{"http://www.opengis.net/sld":"sld","http://www.opengis.net/ogc":"ogc","http://www.opengis.net/gml":"gml","http://www.w3.org/1999/xlink":"xlink","http://www.w3.org/2001/XMLSchema-instance":"xsi"},getChildValue:function(t,e){var n=e||"";if(t)for(var r=t.firstChild;r;r=r.nextSibling)switch(r.nodeType){case 3:case 4:n+=r.nodeValue}return n},readChildNodes:function(t,e){e||(e={});for(var n,r=t.childNodes,i=0,o=r.length;i<o;++i)1===(n=r[i]).nodeType&&this.readNode(n,e);return e},readNode:function(t,e){e||(e={});var n=this.readers[t.namespaceURI?this.namespaceAlias[t.namespaceURI]:this.defaultPrefix];if(n){var r=n[t.localName||t.nodeName.split(":").pop()]||n["*"];r&&r.apply(this,[t,e])}return e},readers:{sld:{StyledLayerDescriptor:function(t,e){e.version=t.getAttribute("version"),this.readChildNodes(t,e)},Name:function(t,e){e.name=this.getChildValue(t)},Title:function(t,e){e.title=this.getChildValue(t)},Abstract:function(t,e){e.description=this.getChildValue(t)},NamedLayer:function(t,e){var n={userStyles:[],namedStyles:[]};this.readChildNodes(t,n);for(var r=0,i=n.userStyles.length;r<i;++r)n.userStyles[r].layerName=n.name;Array.isArray(e.namedLayers)?e.namedLayers.push(n):e.namedLayers[n.name]=n},NamedStyle:function(t,e){e.namedStyles.push(this.getChildName(t.firstChild))},UserStyle:function(t,e){var n,r=this,i={defaultsPerSymbolizer:!0,rules:[]};this.featureTypeCounter=-1,this.readChildNodes(t,i);var o=!!i.isDefault&&i.isDefault;this.multipleSymbolizers?(delete i.defaultsPerSymbolizer,n=new ol.style.Style(i)):$(i.rules).each((function(t,i){var a,s,l,u=i.symbolizer.Polygon,c=i.symbolizer.Point,h=i.symbolizer.Line,f=i.symbolizer.Text;if(u)u.fill&&(a=new ol.style.Fill({color:r.getColorValue(u.fillColor,u.fillOpacity)})),u.stroke&&void 0!==u.strokeColor&&void 0!==u.strokeWidth&&(s=new ol.style.Stroke({color:r.getColorValue(u.strokeColor,u.strokeOpacity),width:parseInt(u.strokeWidth.trim(),10),lineDash:u.strokeDashstyle?u.strokeDashstyle.split(" "):void 0}));else if(c){if(c.fill&&(a=new ol.style.Fill({color:r.getColorValue(c.fillColor,c.fillOpacity)})),c.stroke&&(void 0===c.strokeColor&&void 0===c.strokeWidth||(s=new ol.style.Stroke({color:r.getColorValue(c.strokeColor,c.strokeOpacity),width:c.strokeWidth?parseInt(c.strokeWidth.trim(),10):void 0,lineDash:c.strokeDashstyle?c.strokeDashstyle.split(" "):void 0}))),c.label&&(void 0===c.outlineColor&&(c.outlineColor="#ffffff"),void 0===c.outlineWidth&&(c.outlineWidth="3"),f=new ol.style.Text({textAlign:r.getAlignValue(c.labelAnchorPointX),textBaseline:r.getBaselineValue(c.labelAnchorPointY),font:r.getFontValue(c),text:c.label,fill:new ol.style.Fill({color:r.getColorValue(c.fontColor,c.fontOpacity)}),stroke:new ol.style.Stroke({color:c.outlineColor?r.getColorValue(c.outlineColor):r.getColorValue(c.fontColor,c.fontOpacity),width:c.outlineWidth?parseInt(c.outlineWidth,10):void 0}),offsetX:c.labelXOffset?parseInt(c.labelXOffset,10):void 0,offsetY:c.labelYOffset?parseInt(c.labelYOffset,10):void 0,rotation:c.rotation?parseFloat(c.rotation):void 0})),c.graphic)if(c.externalGraphic){var p=c.fillOpacity?parseFloat(c.fillOpacity):void 0;l=new ol.style.Icon({opacity:p,src:c.externalGraphic}),s=a=void 0}else switch(c.graphicName){case"circle":l=new ol.style.Circle({radius:parseInt(c.pointRadius,10),stroke:s,fill:a});break;case"cross":l=new ol.style.RegularShape({radius:parseInt(c.pointRadius,10),radius2:0,points:4,stroke:s,fill:a});break;case"star":l=new ol.style.RegularShape({radius:parseInt(c.pointRadius,10),radius2:parseInt(c.pointRadius,10)/3,points:5,stroke:s,fill:a});break;case"square":l=new ol.style.RegularShape({radius:parseInt(c.pointRadius,10),points:4,angle:Math.PI/4,stroke:s,fill:a});break;case"triangle":l=new ol.style.RegularShape({radius:parseInt(c.pointRadius,10),points:3,stroke:s,fill:a});break;case"x":l=new ol.style.RegularShape({radius:parseInt(c.pointRadius,10),radius2:0,points:4,angle:Math.PI/4,stroke:s,fill:a})}}else h&&(h.fill&&(a=new ol.style.Fill({color:r.getColorValue(h.fillColor,h.fillOpacity)})),h.stroke&&(s=new ol.style.Stroke({color:r.getColorValue(h.strokeColor,h.strokeOpacity),width:r.getStrokeWidth(h.strokeWidth),lineDash:r.getStrokeDashstyle(h.strokeDashstyle)})),h.graphic&&"circle"===h.graphicName&&(l=new ol.style.Circle({radius:parseInt(h.pointRadius,10),fill:a}),a=void 0));n=new ol.style.Style({fill:a,image:l,stroke:s}),e.userStyles.push({isDefault:o,style:n,rule:i}),f&&(n=new ol.style.Style({text:f}),e.userStyles.push({isDefault:o,style:n,rule:i}))}))},IsDefault:function(t,e){"1"===this.getChildValue(t)&&(e.isDefault=!0)},FeatureTypeStyle:function(t,e){++this.featureTypeCounter;var n={rules:this.multipleSymbolizers?e.rules:[]};this.readChildNodes(t,n),this.multipleSymbolizers||(e.rules=n.rules)},Rule:function(t,e){var n={symbolizer:[],symbolizer:{fill:!1,stroke:!1,graphic:!1}};this.readChildNodes(t,n),e.rules.push(n)},ElseFilter:function(t,e){e.elseFilter=!0},MinScaleDenominator:function(t,e){e.minScaleDenominator=parseFloat(this.getChildValue(t))},MaxScaleDenominator:function(t,e){e.maxScaleDenominator=parseFloat(this.getChildValue(t))},LabelPlacement:function(t,e){this.readChildNodes(t,e)},PointPlacement:function(t,e){var n={};this.readChildNodes(t,n),n.labelRotation=n.rotation,delete n.rotation;var r,i=e.labelAnchorPointX,o=e.labelAnchorPointY;i<=1/3?r="l":1/3<i&&i<2/3?r="c":2/3<=i&&(r="r"),o<=1/3?r+="b":1/3<o&&o<2/3?r+="m":2/3<=o&&(r+="t"),n.labelAlign=r},AnchorPoint:function(t,e){this.readChildNodes(t,e)},AnchorPointX:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.labelAnchorPointX=n)},AnchorPointY:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.labelAnchorPointY=n)},Displacement:function(t,e){this.readChildNodes(t,e)},DisplacementX:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.labelXOffset=n)},DisplacementY:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.labelYOffset=n)},LinePlacement:function(t,e){this.readChildNodes(t,e)},PerpendicularOffset:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.labelPerpendicularOffset=n)},Label:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.label=n)},Font:function(t,e){this.readChildNodes(t,e)},Halo:function(t,e){var n={};this.readChildNodes(t,n),e.haloRadius=n.haloRadius,e.haloColor=n.fillColor,e.haloOpacity=n.fillOpacity},Radius:function(t,e){var n=this.readers.ogc._expression.call(this,t);null!==n&&(e.haloRadius=n)},RasterSymbolizer:function(t,e){var n={};this.readChildNodes(t,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,e.symbolizers.push(new OpenLayers.Symbolizer.Raster(n))):e.symbolizer.Raster=OpenLayers.Util.applyDefaults(n,e.symbolizer.Raster)},Geometry:function(t,e){e.geometry={},this.readChildNodes(t,e.geometry)},ColorMap:function(t,e){e.colorMap=[],this.readChildNodes(t,e.colorMap)},ColorMapEntry:function(t,e){var n=t.getAttribute("quantity"),r=t.getAttribute("opacity");e.push({color:t.getAttribute("color"),quantity:null!==n?parseFloat(n):void 0,label:t.getAttribute("label")||void 0,opacity:null!==r?parseFloat(r):void 0})},LineSymbolizer:function(t,e){var n={};this.readChildNodes(t,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,e.symbolizers.push(new OpenLayers.Symbolizer.Line(n))):e.symbolizer.Line=n},PolygonSymbolizer:function(t,e){var n={fill:!1,stroke:!1};this.multipleSymbolizers||(n=e.symbolizer.Polygon||n),this.readChildNodes(t,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,e.symbolizers.push(new OpenLayers.Symbolizer.Polygon(n))):e.symbolizer.Polygon=n},PointSymbolizer:function(t,e){var n={fill:!1,stroke:!1,graphic:!1};this.multipleSymbolizers||(n=e.symbolizer.Point||n),this.readChildNodes(t,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,e.symbolizers.push(new OpenLayers.Symbolizer.Point(n))):e.symbolizer.Point=n},TextSymbolizer:function(t,e){var n={};this.readChildNodes(t,n),this.multipleSymbolizers?(n.zIndex=this.featureTypeCounter,e.symbolizers.push(new OpenLayers.Symbolizer.Text(n))):e.symbolizer.Text=n},Stroke:function(t,e){e.stroke=!0,this.readChildNodes(t,e)},Fill:function(t,e){e.fill=!0,this.readChildNodes(t,e)},CssParameter:function(t,e){var n=t.getAttribute("name"),r=this.cssMap[n];if(e.label&&("fill"===n?r="fontColor":"fill-opacity"===n&&(r="fontOpacity")),r){var i=this.readers.ogc._expression.call(this,t);i&&(e[r]=i)}},Graphic:function(t,e){e.graphic=!0;var n={};this.readChildNodes(t,n);for(var r,i,o=["stroke","strokeColor","strokeWidth","strokeOpacity","strokeLinecap","fill","fillColor","fillOpacity","graphicName","rotation","graphicFormat"],a=0,s=o.length;a<s;++a)void 0!==(i=n[r=o[a]])&&(e[r]=i);void 0!==n.opacity&&(e.graphicOpacity=n.opacity),void 0!==n.size&&(isNaN(n.size/2)?e.graphicWidth=n.size:e.pointRadius=n.size/2),void 0!==n.href&&(e.externalGraphic=n.href),void 0!==n.rotation&&(e.rotation=n.rotation)},ExternalGraphic:function(t,e){this.readChildNodes(t,e)},Mark:function(t,e){this.readChildNodes(t,e)},WellKnownName:function(t,e){e.graphicName=this.getChildValue(t)},Opacity:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.opacity=n)},Size:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.size=n)},Rotation:function(t,e){var n=this.readers.ogc._expression.call(this,t);n&&(e.rotation=n)},OnlineResource:function(t,e){e.href=this.getAttributeNS(t,this.namespaces.xlink,"href")},Format:function(t,e){e.graphicFormat=this.getChildValue(t)}},ogc:{_expression:function(t){for(var e,n="",r=t.firstChild;r;r=r.nextSibling)switch(r.nodeType){case 1:(e=this.readNode(r)).property?n+="${"+e.property+"}":void 0!==e.value&&(n+=e.value);break;case 3:case 4:n+=r.nodeValue}return n},Filter:function(t,e){var n={fids:[],filters:[]};this.readChildNodes(t,n),0<n.fids.length?e.filter={fids:n.fids}:0<n.filters.length&&(e.filter=n.filters[0])},FeatureId:function(t,e){var n=t.getAttribute("fid");n&&e.fids.push(n)},And:function(t,e){var n={filters:["&&"]};this.readChildNodes(t,n),e.filters.push(n)},Or:function(t,e){var n={filters:["||"]};this.readChildNodes(t,n),e.filters.push(n)},Not:function(t,e){var n={filters:["!"]};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsLike:function(t,e){var n={operator:"=="};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsEqualTo:function(t,e){var n={operator:"=="};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsNotEqualTo:function(t,e){var n={operator:"!="};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsLessThan:function(t,e){var n={operator:"<"};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsGreaterThan:function(t,e){var n={operator:">"};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsLessThanOrEqualTo:function(t,e){var n={operator:"<="};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsGreaterThanOrEqualTo:function(t,e){var n={operator:">="};this.readChildNodes(t,n),e.filters.push(n)},PropertyIsBetween:function(t,e){var n={operator:".."};this.readChildNodes(t,n),e.filters.push(n)},Literal:function(t,e){e.value=this.getChildValue(t)},PropertyName:function(t,e){e.property=this.getChildValue(t)},LowerBoundary:function(t,e){e.lowerBoundary=this.readers.ogc._expression.call(this,t)},UpperBoundary:function(t,e){e.upperBoundary=this.readers.ogc._expression.call(this,t)},PropertyIsNull:function(t,e){var n={operator:"NULL"};this.readChildNodes(t,n),e.filters.push(n)}}},cssMap:{stroke:"strokeColor","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","stroke-linecap":"strokeLinecap","stroke-dasharray":"strokeDashstyle",fill:"fillColor","fill-opacity":"fillOpacity","font-family":"fontFamily","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle"},getCssProperty:function(t){var e=null;for(var n in this.cssMap)if(this.cssMap[n]===t){e=n;break}return e},getAttributeNodeNS:function(t,e,n){var r=null;if(t.getAttributeNodeNS)r=t.getAttributeNodeNS(e,n);else for(var i,o=t.attributes,a=0,s=o.length;a<s;++a)if((i=o[a]).namespaceURI===e&&(i.prefix?i.prefix+":"+n:n)===i.nodeName){r=i;break}return r},getAttributeNS:function(t,e,n){var r="";if(t.getAttributeNS)r=t.getAttributeNS(e,n)||"";else{var i=this.getAttributeNodeNS(t,e,n);i&&(r=i.nodeValue)}return r},pixelRatio:1,getStrokeDashstyle:function(t){if(t){t=t.split(" ");for(var e=0;e<t.length;e++)t[e]=parseInt(t[e],10)*this.pixelRatio;return t}},getStrokeWidth:function(t){return parseInt(t.trim(),10)*this.pixelRatio},getFontValue:function(t){var e=this,n="";return n=e.addFontValue(n,t.fontStyle),n=e.addFontValue(n,t.fontWeight),t.fontSize&&(t.fontSize.indexOf("px")<0?(n=e.addFontValue(n,t.fontSize),n+="px"):n=e.addFontValue(n,t.fontSize)),(n=e.addFontValue(n,t.fontFamily)).trim()},addFontValue:function(t,e){return void 0===e?t:(0<t.length&&(t+=" "),t+e)},getAlignValue:function(t){if(void 0===t)return"center";var e=parseFloat(t);return 0===e?"left":0<e&&e<1?"center":"right"},getBaselineValue:function(t){if(void 0===t)return"middle";var e=parseFloat(t);return 0===e?"bottom":0<e&&e<1?"middle":"top"},getColorValue:function(t,e){void 0===t&&(t="#000000");var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.trim());if(!(n.length<4))return{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),a:e?parseFloat(e.trim()):1,getValue:function(){return[this.r,this.g,this.b,this.a]}}.getValue()},getGraphicFormat:function(t){var e;for(var n in this.graphicFormats)if(this.graphicFormats[n].test(t)){e=n;break}return e||this.defaultGraphicFormat},defaultGraphicFormat:"image/png",graphicFormats:{"image/jpeg":/\.jpe?g$/i,"image/gif":/\.gif$/i,"image/png":/\.png$/i},multipleSymbolizers:!1,featureTypeCounter:null,defaultSymbolizer:{fillColor:"#808080",fillOpacity:1,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,pointRadius:3,graphicName:"square"}}},(o=o||{}).Repository=o.Repository||{},o.Repository.Category=function(t){return $.extend({},{catId:"",name:"",parentId:"",subCategories:[],isOpen:!1},t)},(o=o||{}).Repository=o.Repository||{},o.Repository.ConfigRepository=function(t,e){return{GetMapConfig:function(n){t.GetMapConfig(n,(function(t){var n=function(t){var e={numZoomLevels:18,newMaxRes:21664,center:[570130,7032300],zoom:4,extent:[-2e6,35e5,3545984,9045984],layers:[],proxyHost:"http://geoinnsyn.norconsultad.com/services/isy.gis.isyproxy/?",tools:[]};$.extend(e,t);for(var n=[],r=0;r<t.layers.length;r++)n.push(new o.Domain.Layer(t.layers[r]));return e.layers=n,new o.Repository.MapConfig(e)}(t);e.TriggerEvent(o.Events.EventTypes.MapConfigLoaded,n)}))},GetMapConfigFromJson:function(t){e.TriggerEvent(o.Events.EventTypes.MapConfigLoaded,t)}}},(o=o||{}).Repository=o.Repository||{},o.Repository.MapConfig=function(t){return $.extend({},{name:"",comment:"",useCategories:!0,categories:[],numZoomLevels:10,newMaxRes:21664,newMaxScale:8192e4,renderer:"canvas",center:[-1,1],zoom:5,layers:[],coordinate_system:"EPSG:25833",matrixSet:"EPSG:25833",extent:[-1,-1,-1,-1],extentUnits:"m",proxyHost:"",groups:[]},t)},(o=o||{}).Repository=o.Repository||{},o.Repository.StaticRepository=function(){var t=new o.Repository.MapConfig({numZoomLevels:18,newMaxRes:21664,renderer:o.MapImplementation.OL3.Map.RENDERERS.canvas,center:[570130,7032300],zoom:4,coordinate_system:"EPSG:32633",extent:[-2e6,35e5,3545984,9045984],extentunits:"m",proxyHost:"",layers:[{id:"1992",isBaseLayer:!0,subLayers:[{source:"WMS",url:["http://opencache.statkart.no/gatekeeper/gk/gk.open?LAYERS=norges_grunnkart"],gatekeeper:!0,name:"norges_grunnkart",format:"image/png",coordinate_system:"EPSG:32632",id:"1992",tiled:!0}],visibleOnLoad:!0},{id:"8001",isBaseLayer:!1,subLayers:[{source:"WFS",url:["https://kart5.nois.no/trondheim_neste/wfs/default.asp?conname=Regplan&"],name:"RpOmrÃ¥de",version:"1.0.0",coordinate_system:"EPSG:32632",id:"8001",tiled:!1,style:"http://geoinnsyn.norconsultad.com/Services/ISY.GIS.IsyGeoinnsynConfig/api/v1/style?application=GeoInnsyn&name=RegplanVedtatt"}],visibleOnLoad:!0},{id:"8002",isBaseLayer:!1,subLayers:[{source:"WFS",url:["https://kart5.nois.no/trondheim_neste/wfs/default.asp?conname=Tiltak&"],name:"PblTiltak",version:"1.0.0",coordinate_system:"EPSG:32632",id:"8002",tiled:!1,style:"http://geoinnsyn.norconsultad.com/Services/ISY.GIS.IsyGeoinnsynConfig/api/v1/style?application=GeoInnsyn&name=pblTiltak_type"}],visibleOnLoad:!0}]});return{GetMapConfig:function(){return t}}},(o=o||{}).Utils=o.Utils||{},o.Utils.Guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return{NewGuid:function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}},function(e,n){function r(t){var e=t?t.length:0;return"number"==typeof e?e:function(t){var e,n=0;if(t)for(e in t)n++;return n}(t)}"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});var i,o,a=null,s=!1,l=!0,u=1,c=3,h=4,f=9,p=11;i={isUnsafe:s,isXML:function(t){return"object"==typeof t&&t.nodeType!==n},getRoot:function(t){return t.nodeType===f?t.documentElement:t.nodeType===p?t.firstChild:t},convert:function(r){var i,o={},u="string"==typeof r?function(n){var r=a,i=a,o=l;try{(r="DOMParser"in e?new DOMParser:new ActiveXObject("MSXML2.DOMDocument")).async=s}catch(t){throw new Error("XML Parser could not be instantiated")}if("parseFromString"in r?o="parsererror"!==(i=r.parseFromString(n,"text/xml")).documentElement.tagName:i=(o=r.loadXML(n))?r:s,!o)throw new Error("Error parsing XML string");return i}(r):this.isXML(r)?r:n;if(!u)throw new Error("Unable to parse XML");if(u.nodeType===c||u.nodeType===h)return u.nodeValue;i=this.getRoot(u);var f=this.getNodeName(i);return o[f]={},this.process(i,o[f]),o},getNodeName:function(t){return t.prefix?t.nodeName.replace(t.prefix+":",""):t.nodeName},process:function(t,e){var n,i,o,a,s,l,f,p,d,g,m;if(t.hasChildNodes())for(d=t.childNodes.length,l=0;d>l;l++)switch(n=t.childNodes[l],n.nodeType){case c:e.Text=e.Text?e.Text+n.nodeValue.trim():n.nodeValue.trim();break;case h:s=n[n.text?"text":"nodeValue"],e.Text=e.Text?e.Text+s:s;break;case u:o=this.getNodeName(n),p={},this.process(n,p),p&&r(p)>0&&(g=p,(m=p)&&m.Text&&1==r(m)?g=p.Text:p.Text&&p.Text.length,o in e?e[o].length&&e[o].push?e[o].push(g):e[o]=[e[o],g]:e[o]=g)}if(t.attributes.length)for(f=t.attributes.length-1;f>=0;f--)a=(i=t.attributes[f]).name.trim(),s=i.value,e[(this.isUnsafe?"":"@")+a]=s}},o={xmlToJSON:function(t,e){return i.isUnsafe=e!==n?e:s,i.convert(t)}},e.xml=e.xml||o}(window),function(t){function e(t){return t.replace(/\r\n/g,"\n")}function n(t){return e(t=t.replace(/</g,"&lt;").replace(/&/g,"&amp;"))}t.json2xml=function(t){var r=function(t,i,o){var a="";if(t instanceof Array)for(var s=0,l=t.length;l>s;s++)a+=r(t[s],i,o+"");else if("object"==typeof t){var u=!1;for(var c in a+=o+"<"+i,t)"@"==c.charAt(0)?a+=" "+c.substr(1)+'="'+t[c].toString()+'"':u=!0;if(a+=u?">\n":"/>",u){for(var c in t)"#text"==c?a+=n(t[c]):"#cdata"==c?a+="<![CDATA["+e(t[c])+"]]>":"@"!=c.charAt(0)&&(a+=r(t[c],c,o+"\t"));a+=("\n"==a.charAt(a.length-1)?o:"")+"</"+i+">\n"}}else a+=o+"<"+i+">"+n(t&&t.toString&&t.toString()||"")+"</"+i+">\n";return a},i="";for(var o in t)i+=r(t[o],o,"");return i}}(window),r="__default",angular.module("angularUtils.directives.dirPagination",[]).directive("dirPaginate",["$compile","$parse","paginationService",function(t,e,n){return{terminal:!0,multiElement:!0,priority:100,compile:function(i,o){var a=o.dirPaginate,s=a.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),l=/\|\s*itemsPerPage\s*:\s*(.*\(\s*\w*\)|([^\)]*?(?=\s+as\s+))|[^\)]*)/;if(null===s[2].match(l))throw"pagination directive: the 'itemsPerPage' filter must be set.";var u=s[2].replace(l,""),c=e(u);!function(t){angular.forEach(t,(function(t){1===t.nodeType&&angular.element(t).attr("dir-paginate-no-compile",!0)}))}(i);var h=o.paginationId||r;return n.registerInstance(h),function(i,o,s){var l=e(s.paginationId)(i)||s.paginationId||r;n.registerInstance(l);var u=function(t,e){var n=!!t.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return e===r||n?t:t.replace(/(\|\s*itemsPerPage\s*:\s*[^|\s]*)/,"$1 : '"+e+"'")}(a,l);!function(t,e,n){t[0].hasAttribute("dir-paginate-start")||t[0].hasAttribute("data-dir-paginate-start")?(e.$set("ngRepeatStart",n),t.eq(t.length-1).attr("ng-repeat-end",!0)):e.$set("ngRepeat",n)}(o,s,u),function(t){angular.forEach(t,(function(t){1===t.nodeType&&angular.element(t).removeAttr("dir-paginate-no-compile")})),t.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),t.eq(t.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}(o);var h=t(o),f=function(t,n,r){var i;if(n.currentPage)i=e(n.currentPage);else{var o=(r+"__currentPage").replace(/\W/g,"_");t[o]=1,i=e(o)}return i}(i,s,l);n.setCurrentPageParser(l,f,i),void 0!==s.totalItems?(n.setAsyncModeTrue(l),i.$watch((function(){return e(s.totalItems)(i)}),(function(t){0<=t&&n.setCollectionLength(l,t)}))):(n.setAsyncModeFalse(l),i.$watchCollection((function(){return c(i)}),(function(t){if(t){var e=t instanceof Array?t.length:Object.keys(t).length;n.setCollectionLength(l,e)}}))),h(i)}}}}]).directive("dirPaginateNoCompile",(function(){return{priority:5e3,terminal:!0}})).directive("dirPaginationControls",["paginationService","paginationTemplate",function(t,e){var n=/^\d+$/,i={restrict:"AE",scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?",autoHide:"=?"},link:function(e,i,o){var s=o.paginationId||r,l=e.paginationId||o.paginationId||r;t.isRegistered(l)||t.isRegistered(s)||window.console,e.maxSize||(e.maxSize=9),e.autoHide=void 0===e.autoHide||e.autoHide,e.directionLinks=!angular.isDefined(o.directionLinks)||e.$parent.$eval(o.directionLinks),e.boundaryLinks=!!angular.isDefined(o.boundaryLinks)&&e.$parent.$eval(o.boundaryLinks);var u=Math.max(e.maxSize,5);function c(n){if(t.isRegistered(l)&&p(n)){var r=e.pagination.current;e.pages=a(n,t.getCollectionLength(l),t.getItemsPerPage(l),u),e.pagination.current=n,f(),e.onPageChange&&e.onPageChange({newPageNumber:n,oldPageNumber:r})}}function h(){if(t.isRegistered(l)){var n=parseInt(t.getCurrentPage(l))||1;e.pages=a(n,t.getCollectionLength(l),t.getItemsPerPage(l),u),e.pagination.current=n,e.pagination.last=e.pages[e.pages.length-1],e.pagination.last<e.pagination.current?e.setCurrent(e.pagination.last):f()}}function f(){if(t.isRegistered(l)){var n=t.getCurrentPage(l),r=t.getItemsPerPage(l),i=t.getCollectionLength(l);e.range.lower=(n-1)*r+1,e.range.upper=Math.min(n*r,i),e.range.total=i}}function p(t){return n.test(t)&&0<t&&t<=e.pagination.last}e.pages=[],e.pagination={last:1,current:1},e.range={lower:1,upper:1,total:1},e.$watch("maxSize",(function(t){t&&(u=Math.max(e.maxSize,5),h())})),e.$watch((function(){if(t.isRegistered(l))return(t.getCollectionLength(l)+1)*t.getItemsPerPage(l)}),(function(t){0<t&&h()})),e.$watch((function(){if(t.isRegistered(l))return t.getItemsPerPage(l)}),(function(t,n){t!=n&&void 0!==n&&c(e.pagination.current)})),e.$watch((function(){if(t.isRegistered(l))return t.getCurrentPage(l)}),(function(t,e){t!=e&&c(t)})),e.setCurrent=function(e){t.isRegistered(l)&&p(e)&&(e=parseInt(e,10),t.setCurrentPage(l,e))},e.tracker=function(t,e){return t+"_"+e}}},o=e.getString();return void 0!==o?i.template=o:i.templateUrl=function(t,n){return n.templateUrl||e.getPath()},i;function a(t,e,n,r){var i,o=[],a=Math.ceil(e/n),l=Math.ceil(r/2);i=t<=l?"start":a-l<t?"end":"middle";for(var u=r<a,c=1;c<=a&&c<=r;){var h=s(c,t,r,a);!u||(2!==c||"middle"!==i&&"end"!==i)&&(c!==r-1||"middle"!==i&&"start"!==i)?o.push(h):o.push("..."),c++}return o}function s(t,e,n,r){var i=Math.ceil(n/2);return t===n?r:1===t?t:n<r?r-i<e?r-n+t:i<e?e-i+t:t:t}}]).filter("itemsPerPage",["paginationService",function(t){return function(e,n,i){if(void 0===i&&(i=r),!t.isRegistered(i))throw"pagination directive: the itemsPerPage id argument (id: "+i+") does not match a registered pagination-id.";var o,a;if(angular.isObject(e)){if(n=parseInt(n)||9999999999,o=(a=t.isAsyncMode(i)?0:(t.getCurrentPage(i)-1)*n)+n,t.setItemsPerPage(i,n),e instanceof Array)return e.slice(a,o);var s={};return angular.forEach(function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}(e).slice(a,o),(function(t){s[t]=e[t]})),s}return e}}]).service("paginationService",(function(){var t,e={};this.registerInstance=function(n){void 0===e[n]&&(e[n]={asyncMode:!1},t=n)},this.deregisterInstance=function(t){delete e[t]},this.isRegistered=function(t){return void 0!==e[t]},this.getLastInstanceId=function(){return t},this.setCurrentPageParser=function(t,n,r){e[t].currentPageParser=n,e[t].context=r},this.setCurrentPage=function(t,n){e[t].currentPageParser.assign(e[t].context,n)},this.getCurrentPage=function(t){var n=e[t].currentPageParser;return n?n(e[t].context):1},this.setItemsPerPage=function(t,n){e[t].itemsPerPage=n},this.getItemsPerPage=function(t){return e[t].itemsPerPage},this.setCollectionLength=function(t,n){e[t].collectionLength=n},this.getCollectionLength=function(t){return e[t].collectionLength},this.setAsyncModeTrue=function(t){e[t].asyncMode=!0},this.setAsyncModeFalse=function(t){e[t].asyncMode=!1},this.isAsyncMode=function(t){return e[t].asyncMode}})).provider("paginationTemplate",(function(){var t,e="angularUtils.directives.dirPagination.template";this.setPath=function(t){e=t},this.setString=function(e){t=e},this.$get=function(){return{getPath:function(){return e},getString:function(){return t}}}})).run(["$templateCache",function(t){t.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' || ( ! autoHide && pages.length === 1 ) }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}]),i=function(t){"use strict";function e(t,n){if(!(this instanceof e)){var r=new e(t,n);return r.open(),r}this.id=e.id++,this.setup(t,n),this.chainCallbacks(e._callbackChain)}if(void 0!==t)if(t.fn.jquery.match(/-ajax/))"console"in window&&window.console.info("Featherlight needs regular jQuery, not the slim version.");else{var n=[],r=function(e){return n=t.grep(n,(function(t){return t!==e&&t.$instance.closest("body").length>0}))},i={allow:1,allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,mozallowfullscreen:1,name:1,referrerpolicy:1,sandbox:1,scrolling:1,src:1,srcdoc:1,style:1,webkitallowfullscreen:1,width:1},o={keyup:"onKeyUp",resize:"onResize"},a=function(n){t.each(e.opened().reverse(),(function(){return n.isDefaultPrevented()||!1!==this[o[n.type]](n)?void 0:(n.preventDefault(),n.stopPropagation(),!1)}))},s=function(n){if(n!==e._globalHandlerInstalled){e._globalHandlerInstalled=n;var r=t.map(o,(function(t,n){return n+"."+e.prototype.namespace})).join(" ");t(window)[n?"on":"off"](r,a)}};e.prototype={constructor:e,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:t.noop,beforeContent:t.noop,beforeClose:t.noop,afterOpen:t.noop,afterContent:t.noop,afterClose:t.noop,onKeyUp:t.noop,onResize:t.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(e,n){"object"!=typeof e||e instanceof t!=0||n||(n=e,e=void 0);var r=t.extend(this,n,{target:e}),i=r.resetCss?r.namespace+"-reset":r.namespace,o=t(r.background||['<div class="'+i+"-loading "+i+'">','<div class="'+i+'-content">','<button class="'+i+"-close-icon "+r.namespace+'-close" aria-label="Close">',r.closeIcon,"</button>",'<div class="'+r.namespace+'-inner">'+r.loading+"</div>","</div>","</div>"].join("")),a="."+r.namespace+"-close"+(r.otherClose?","+r.otherClose:"");return r.$instance=o.clone().addClass(r.variant),r.$instance.on(r.closeTrigger+"."+r.namespace,(function(e){if(!e.isDefaultPrevented()){var n=t(e.target);("background"===r.closeOnClick&&n.is("."+r.namespace)||"anywhere"===r.closeOnClick||n.closest(a).length)&&(r.close(e),e.preventDefault())}})),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var e=this,n=this.constructor.contentFilters,r=function(t){return e.$currentTarget&&e.$currentTarget.attr(t)},i=r(e.targetAttr),o=e.target||i||"",a=n[e.type];if(!a&&o in n&&(a=n[o],o=e.target&&i),o=o||r("href")||"",!a)for(var s in n)e[s]&&(a=n[s],o=e[s]);if(!a){var l=o;if(o=null,t.each(e.contentFilters,(function(){return(a=n[this]).test&&(o=a.test(l)),!o&&a.regex&&l.match&&l.match(a.regex)&&(o=l),!o})),!o)return"console"in window&&window.console.error("Featherlight: no content filter found "+(l?' for "'+l+'"':" (no target specified)")),!1}return a.process.call(e,o)},setContent:function(e){return this.$instance.removeClass(this.namespace+"-loading"),this.$instance.toggleClass(this.namespace+"-iframe",e.is("iframe")),this.$instance.find("."+this.namespace+"-inner").not(e).slice(1).remove().end().replaceWith(t.contains(this.$instance[0],e[0])?"":e),this.$content=e.addClass(this.namespace+"-inner"),this},open:function(e){var r=this;if(r.$instance.hide().appendTo(r.root),!(e&&e.isDefaultPrevented()||!1===r.beforeOpen(e))){e&&e.preventDefault();var i=r.getContent();if(i)return n.push(r),s(!0),r.$instance.fadeIn(r.openSpeed),r.beforeContent(e),t.when(i).always((function(t){t&&(r.setContent(t),r.afterContent(e))})).then(r.$instance.promise()).done((function(){r.afterOpen(e)}))}return r.$instance.detach(),t.Deferred().reject().promise()},close:function(e){var n=this,i=t.Deferred();return!1===n.beforeClose(e)?i.reject():(0===r(n).length&&s(!1),n.$instance.fadeOut(n.closeSpeed,(function(){n.$instance.detach(),n.afterClose(e),i.resolve()}))),i.promise()},resize:function(t,e){if(t&&e){this.$content.css("width","").css("height","");var n=Math.max(t/(this.$content.parent().width()-1),e/(this.$content.parent().height()-1));n>1&&(n=e/Math.floor(e/n),this.$content.css("width",t/n+"px").css("height",e/n+"px"))}},chainCallbacks:function(e){for(var n in e)this[n]=t.proxy(e[n],this,t.proxy(this[n],this))}},t.extend(e,{id:0,autoBind:"[data-featherlight]",defaults:e.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof t&&e},process:function(e){return!1!==this.persist?t(e):t(e).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff?|bmp|svg)(\?\S*)?$/i,process:function(e){var n=t.Deferred(),r=new Image,i=t('<img src="'+e+'" alt="" class="'+this.namespace+'-image" />');return r.onload=function(){i.naturalWidth=r.width,i.naturalHeight=r.height,n.resolve(i)},r.onerror=function(){n.reject(i)},r.src=e,n.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return t(e)}},ajax:{regex:/./,process:function(e){var n=t.Deferred(),r=t("<div></div>").load(e,(function(t,e){"error"!==e&&n.resolve(r.contents()),n.reject()}));return n.promise()}},iframe:{process:function(e){var n=new t.Deferred,r=t("<iframe/>"),o=function(t,e){var n={},r=new RegExp("^"+e+"([A-Z])(.*)");for(var i in t){var o=i.match(r);o&&(n[(o[1]+o[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=t[i])}return n}(this,"iframe"),a=function(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r],delete t[r]);return n}(o,i);return r.hide().attr("src",e).attr(a).css(o).on("load",(function(){n.resolve(r.show())})).appendTo(this.$instance.find("."+this.namespace+"-content")),n.promise()}},text:{process:function(e){return t("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e,n){var r=this,i=new RegExp("^data-"+n+"-(.*)"),a={};return e&&e.attributes&&t.each(e.attributes,(function(){var e=this.name.match(i);if(e){var n=this.value,s=t.camelCase(e[1]);if(t.inArray(s,r.functionAttributes)>=0)n=new Function(n);else try{n=JSON.parse(n)}catch(o){}a[s]=n}})),a},extend:function(e,n){var r=function(){this.constructor=e};return r.prototype=this.prototype,e.prototype=new r,e.__super__=this.prototype,t.extend(e,this,n),e.defaults=e.prototype,e},attach:function(e,n,r){var i=this;"object"!=typeof n||n instanceof t!=0||r||(r=n,n=void 0);var o,a=(r=t.extend({},r)).namespace||i.defaults.namespace,s=t.extend({},i.defaults,i.readElementConfig(e[0],a),r),l=function(a){var l=t(a.currentTarget),u=t.extend({$source:e,$currentTarget:l},i.readElementConfig(e[0],s.namespace),i.readElementConfig(a.currentTarget,s.namespace),r),c=o||l.data("featherlight-persisted")||new i(n,u);"shared"===c.persist?o=c:!1!==c.persist&&l.data("featherlight-persisted",c),u.$currentTarget.blur&&u.$currentTarget.blur(),c.open(a)};return e.on(s.openTrigger+"."+s.namespace,s.filter,l),{filter:s.filter,handler:l}},current:function(){var t=this.opened();return t[t.length-1]||null},opened:function(){var e=this;return r(),t.grep(n,(function(t){return t instanceof e}))},close:function(t){var e=this.current();return e?e.close(t):void 0},_onReady:function(){var e=this;if(e.autoBind){var n=t(e.autoBind);n.each((function(){e.attach(t(this))})),t(document).on("click",e.autoBind,(function(r){if(!r.isDefaultPrevented()){var i=t(r.currentTarget);if(n.length!==(n=n.add(i)).length){var o=e.attach(i);(!o.filter||t(r.target).parentsUntil(i,o.filter).length>0)&&o.handler(r)}}}))}},_callbackChain:{onKeyUp:function(e,n){return 27===n.keyCode?(this.closeOnEsc&&t.featherlight.close(n),!1):e(n)},beforeOpen:function(e,n){return t(document.documentElement).addClass("with-featherlight"),this._previouslyActive=document.activeElement,this._$previouslyTabbable=t("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=t("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map((function(e,n){return t(n).attr("tabindex")})),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),e(n)},afterClose:function(n,r){var i=n(r),o=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each((function(e,n){t(n).attr("tabindex",o._previousWithTabIndices[e])})),this._previouslyActive.focus(),0===e.opened().length&&t(document.documentElement).removeClass("with-featherlight"),i},onResize:function(t,e){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),t(e)},afterContent:function(t,e){var n=t(e);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(e),n}}}),t.featherlight=e,t.fn.featherlight=function(t,n){return e.attach(this,t,n),this},t(document).ready((function(){e._onReady()}))}else"console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery.")},"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),i(e),e}:i(jQuery),function(t,e){"use strict";var n,r,i,o,a,s,l,u,c,h,f=e.$$minErr("$sanitize");e.module("ngSanitize",[]).provider("$sanitize",(function(){function p(t,e){return d(t.split(","),e)}function d(t,e){var n,r={};for(n=0;n<t.length;n++)r[e?s(t[n]):t[n]]=!0;return r}function g(t,e){e&&e.length&&r(t,d(e))}function m(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];e[i.name]=i.value}return e}function v(t){return t.replace(/&/g,"&amp;").replace(S,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+((t=t.charCodeAt(1))-56320)+65536)+";"})).replace(_,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function y(e){for(;e;){if(e.nodeType===t.Node.ELEMENT_NODE)for(var n=e.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(e.removeAttributeNode(o),r--,i--)}(n=e.firstChild)&&y(n),e=b("nextSibling",e)}}function b(t,e){var n=e[t];if(n&&u.call(e,n))throw f("elclob",e.outerHTML||e.outerText);return n}var w=!1,x=!1;this.$get=["$$sanitizeUri",function(t){return w=!0,x&&r(C,O),function(e){var n=[];return c(e,h(n,(function(e,n){return!/^unsafe:/.test(t(e,n))}))),n.join("")}}],this.enableSvg=function(t){return a(t)?(x=t,this):x},this.addValidElements=function(t){return w||(o(t)&&(t={htmlElements:t}),g(O,t.svgElements),g(k,t.htmlVoidElements),g(C,t.htmlVoidElements),g(C,t.htmlElements)),this},this.addValidAttrs=function(t){return w||r(A,d(t,!0)),this},n=e.bind,r=e.extend,i=e.forEach,o=e.isArray,a=e.isDefined,s=e.$$lowercase,l=e.noop,c=function(t,e){null==t?t="":"string"!=typeof t&&(t=""+t);var n=L(t);if(!n)return"";var r=5;do{if(0===r)throw f("uinput");r--,t=n.innerHTML,n=L(t)}while(t!==n.innerHTML);for(r=n.firstChild;r;){switch(r.nodeType){case 1:e.start(r.nodeName.toLowerCase(),m(r.attributes));break;case 3:e.chars(r.textContent)}var i;if(!(i=r.firstChild)&&(1===r.nodeType&&e.end(r.nodeName.toLowerCase()),!(i=b("nextSibling",r))))for(;null==i&&(r=b("parentNode",r))!==n;)i=b("nextSibling",r),1===r.nodeType&&e.end(r.nodeName.toLowerCase());r=i}for(;r=n.firstChild;)n.removeChild(r)},h=function(t,e){var r=!1,o=n(t,t.push);return{start:function(t,n){t=s(t),!r&&P[t]&&(r=t),r||!0!==C[t]||(o("<"),o(t),i(n,(function(n,r){var i=s(r),a="img"===t&&"src"===i||"background"===i;!0!==A[i]||!0===I[i]&&!e(n,a)||(o(" "),o(r),o('="'),o(v(n)),o('"'))})),o(">"))},end:function(t){t=s(t),r||!0!==C[t]||!0===k[t]||(o("</"),o(t),o(">")),t==r&&(r=!1)},chars:function(t){r||o(v(t))}}},u=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};var S=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=/([^#-~ |!])/g,k=p("area,br,col,hr,img,wbr"),E=p("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),M=p("rp,rt"),T=r({},M,E),O=(E=r({},E,p("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),M=r({},M,p("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),p("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan")),P=p("script,style"),C=r({},k,E,M,T),I=p("background,cite,href,longdesc,src,xlink:href,xml:base"),A=(T=p("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),M=p("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),r({},I,M,T)),L=function(t,e){function n(n){n="<remove></remove>"+n;try{var r=(new t.DOMParser).parseFromString(n,"text/html").body;return r.firstChild.remove(),r}catch(e){}}var r;try{r=!!n("")}catch(x){r=!1}if(r)return n;if(!e||!e.implementation)throw f("noinert");var i=((r=e.implementation.createHTMLDocument("inert")).documentElement||r.getDocumentElement()).querySelector("body");return function(t){return i.innerHTML=t,e.documentMode&&y(i),i}}(t,t.document)})).info({angularVersion:"1.8.3"}),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,i=e.$$minErr("linky"),o=e.isDefined,a=e.isFunction,s=e.isObject,u=e.isString;return function(e,c,f){function p(t){t&&b.push(function(t){var e=[];return h(e,l).chars(t),e.join("")}(t))}function d(t,e){var n,r=v(t);for(n in b.push("<a "),r)b.push(n+'="'+r[n]+'" ');!o(c)||"target"in r||b.push('target="',c,'" '),b.push('href="',t.replace(/"/g,"&quot;"),'">'),p(e),b.push("</a>")}if(null==e||""===e)return e;if(!u(e))throw i("notstring",e);for(var g,m,v=a(f)?f:s(f)?function(){return f}:function(){return{}},y=e,b=[];e=y.match(n);)g=e[0],e[2]||e[4]||(g=(e[3]?"http://":"mailto:")+g),m=e.index,p(y.substr(0,m)),d(g,e[0].replace(r,"")),y=y.substring(m+e[0].length);return p(y),t(b.join(""))}}])}(window,window.angular),(o=o||{}).ApiController=o.ApiController||{},o.ApiController.BuildVersion=function(t){var e=t.GetConfigName();function n(){return"assets/mapConfig/"}return{GetGeoInnsynConfig:function(){return n()+e+".xml"},GetLayerStatus:function(){return n()+"LayerStatus.json"},GetDefaultMarkerPath:function(){return"assets/img/pin-md-red.png"},GetDefaultWinMapIco:function(){return"assets/img/WinMap_64.png"},GetConfigPath:n}},o.ApiController.DistVersion=function(t){var e="http://geoinnsyn.nois.no/",n=void 0===t.GetConfigName()?"demo":t.GetConfigName();function r(){return e+"api/v1/mapConfig/"}return{GetGeoInnsynConfig:function(){return r()+n},GetLayerStatus:function(){return r()+n+"/status"},GetDefaultMarkerPath:function(){return e+"assets/img/pin-md-red.png"},GetConfigList:function(){return r()+"list"},GetConfigPath:r}},o.CustomMapConfig=function(t,e){function n(t){var e={},n=(t=String(t).replace(/&amp;/g,"&")).split("&");for(var r in n){var i=n[r].split("=");e[i[0]]=i[1]}return e}function r(){var r;return e.ISY.viewPropertyObject&&(r=n(e.ISY.viewPropertyObject.url)),r=$.extend({},r,angular.copy(t.search()))}return{GetConfigName:function(){return r().config},GetConfigParameters:r}},angular.module("changeBaseMapOverlay",["changeBaseLayerPanel"]),angular.module("changeBaseMapOverlay").directive("changeBaseMapOverlay",[function(){return{templateUrl:"components/overlays/changeBaseMapOverlay/changeBaseMapOverlay.html",restrict:"A",link:function(){}}}]),angular.module("mainMenuOverlay",["mainMenuPanel"]),angular.module("mainMenuOverlay").directive("mainMenuOverlay",["localStorageFactory",function(t){return{templateUrl:"components/overlays/mainMenuOverlay/mainMenuOverlay.html",restrict:"A",link:function(e){$(document).ready((function(){var n;null!==(n=t.get("mainMenuIsOpen"))&&(n?e.openNav():e.closeNav())}))}}}]),angular.module("mapOverlays",["moveableOverlay","searchBarOverlay","mainMenuOverlay","changeBaseMapOverlay"]),angular.module("mapOverlays").directive("mapOverlays",[function(){return{templateUrl:"components/overlays/mapOverlays/mapOverlays.html",restrict:"A",link:function(){}}}]),angular.module("moveableOverlay",["menuDraw","menuElevationProfile","menuShareMap","menuPrint"]),angular.module("moveableOverlay").controller("moveableOverlayController",["$scope","moveableOverlayFactory","$element",function(t,e){t.menuShowMoveableOverlay=function(n){var r=e.getActiveOverlayById(n);if(void 0!==r){for(var i=document.getElementsByClassName("moveableOverlay"),o=0;o<i.length;o++){var a=i[o];(a.offsetWidth+a.offsetLeft>$(document.body).width()||a.offsetHeight+a.offsetTop>$(document.body).height())&&(e.setPositionForActiveOverlay(19,12),a.style.left="19px",a.style.top="12px")}return t.header=r.headingTitle,t.headerIcon=r.headingIcon,e.isOverlayVisibleById(n)}return!1},t.isAnyOverlayActive=function(){return void 0!==e.getActiveOverlay()&&"DrawMenu"!==e.getActiveOverlay().id}}]),angular.module("moveableOverlay").directive("moveableOverlay",["moveableOverlayFactory","$document","mapOverlaysLayoutFactory","toolsFactory","menuElevationProfileFactory",function(t,e,n,r,i){return{templateUrl:"components/overlays/moveableOverlay/moveableOverlay.html",controller:"moveableOverlayController",restrict:"A",transclude:!0,link:function(e,o){o.scope&&(o=$(o));e.closeOverlay=function(){var o;n.setShowSearchOverlay(!0),(o=r.getToolById("DrawFeature")).additionalOptions.GeoJSON=e.GeoJSON,r.activateTool(o),t.deactiveAllOverlay(),i.setElevationBtnActivity(!1),i.setElevationProfileActive(!1),e.deactivateDrawFeatureTool(e.GeoJSON),e.deactivateAddLayerFeatureTool(),e.deactivateMoveableOverlay()},o.on("pointerdown mousedown touchstart",(function(t){if("header1"!==t.target.id&&"header2"!==t.target.id&&"header3"!==t.target.id&&"header4"!==t.target.id&&"header5"!==t.target.id&&"header6"!==t.target.id)return t;t.preventDefault()}))}}}]),angular.module("moveableOverlay").factory("moveableOverlayFactory",(function(){var t=[{id:"DrawMenu",headingTitle:"tegne_og_male",headingIcon:"fa fa-pencil-alt",show:!1,top:12,left:19},{id:"ElevationProfile",headingTitle:"lag_hoydeprofil",headingIcon:"fa fa-chart-area",show:!1,top:12,left:19},{id:"ShareMap",headingTitle:"dele_kartet",headingIcon:"fa fa-share-alt",show:!1,top:12,left:19},{id:"PrintMenu",headingTitle:"skriv_ut",headingIcon:"fa fa-print",show:!1,top:12,left:19}];return{setActiveOverlay:function(e){for(var n=0;n<t.length;n++)t[n].show=t[n].id===e},deactiveAllOverlay:function(){for(var e=0;e<t.length;e++)t[e].show=!1},setPositionForActiveOverlay:function(e,n){for(var r=0;r<t.length;r++)t[r].show&&(t[r].left=e,t[r].top=n)},getActiveOverlayById:function(e){for(var n=0;n<t.length;n++)if(t[n].id===e&&t[n].show)return t[n]},getActiveOverlay:function(){for(var e=0;e<t.length;e++)if(t[e].show)return t[e]},isOverlayVisibleById:function(t){var e=this.getActiveOverlayById(t);return void 0!==e&&e.show}}})),angular.module("searchBarOverlay",["searchPanel"]),angular.module("searchBarOverlay").directive("searchBarOverlay",[function(){return{templateUrl:"components/overlays/searchBarOverlay/searchBarOverlay.html",restrict:"A",link:function(){}}}]),angular.module("changeBaseLayerPanel",[]),angular.module("changeBaseLayerPanel").directive("changeBaseLayerPanel",["changeBaseLayerPanelFactory","ISY.MapAPI.Map",function(t,e){return{templateUrl:"components/transclusions/changeBaseLayerPanel/changeBaseLayerPanel.html",restrict:"A",link:function(n){n.allBaseLayers=function(){return t.getAllBaseLayers()},n.toggleBaseLayer=function(n){for(var r=e.GetBaseLayers(),i=0;i<r.length;i++)r[i].thumbnail===n&&(e.SetBaseLayer(r[i]),t.setBaseLayerById(n))},n.activeBaseLayer=function(){return t.getSelectedBaseLayer()},_initBaseLayers=function(){for(var n=e.GetBaseLayers(),r=0;r<n.length;r++)""!==n[r].thumbnail&&n[r].isVisible&&t.setBaseLayerById(n[r].thumbnail)},$(document).ready((function(){_initBaseLayers()})),n.$on("initBaseLayers",(function(){_initBaseLayers()}))}}}]),angular.module("changeBaseLayerPanel").factory("changeBaseLayerPanelFactory",[function(){var t=[{id:"land",title:"Land",symbol:"baseMap-land",isSelected:!1},{id:"raster",title:"Raster",symbol:"baseMap-raster",isSelected:!1},{id:"aerial",title:"Flybilder",symbol:"baseMap-aerial",isSelected:!1},{id:"grey",title:"Graatone",symbol:"baseMap-grey",isSelected:!1}];return{getAllBaseLayers:function(){return t},getSelectedBaseLayer:function(){for(var e=0;e<t.length;e++)if(t[e].isSelected)return t[e]},setBaseLayerById:function(e){if(void 0!==e)for(var n=0;n<t.length;n++)t[n].isSelected=t[n].id.toLowerCase()===e.toLowerCase();else this.deactivateAllBaseLayers()},deactivateAllBaseLayers:function(){for(var e=0;e<t.length;e++)t[e].isSelected=!1}}}]),angular.module("mainMenuBaseLayers",[]),angular.module("mainMenuBaseLayers").directive("mainMenuBaseLayers",["ISY.MapAPI.Map","changeBaseLayerPanelFactory","mapOverlaysLayoutFactory",function(t,e,n){return{templateUrl:"components/transclusions/mainMenuPanel/mainMenuBaseLayers/mainMenuBaseLayers.html",restrict:"A",link:function(r){r.baseLayers=t.GetBaseLayers(),r.getBaseLayerStyle=function(t){return t.isVisible?"icon-radio-checked pointer-cursor":"icon-radio-unchecked pointer-cursor"},r.setAsBaseLayer=function(i){t.SetBaseLayer(i),t.ZoomToLayer(i),r.baseLayers=t.GetBaseLayers(),n.setBaseLayerByName(i.name),""!==i.thumbnail?e.setBaseLayerById(i.thumbnail):e.deactivateAllBaseLayers()}}}}]),angular.module("mainMenuContact",[]),angular.module("mainMenuContact").directive("mainMenuContact",[function(){return{templateUrl:"components/transclusions/mainMenuPanel/mainMenuContact/mainMenuContact.html",restrict:"A",link:function(){}}}]),angular.module("mainMenuFaq",[]),angular.module("mainMenuFaq").controller("mainMenuFaqController",["$scope","isyTranslateFactory","mainAppService","$http",function(t,e,n,r){t.initFaq=function(){t.spinnerIsVisible=!0,t.failToLoadFaq=!1;var i=e.getCurrentLanguage().id||"no",o=n.generateFaqUrl(i);r.get(o).then((function(e){t.faqItems=e.data})).catch((function(e){t.failToLoadFaq=!0})).finally((function(){t.spinnerIsVisible=!1}))}}]),angular.module("mainMenuFaq").directive("mainMenuFaq",[function(){return{templateUrl:"components/transclusions/mainMenuPanel/mainMenuFaq/mainMenuFaq.html",restrict:"A",controller:"mainMenuFaqController",link:function(t){t.toggleItem=function(e){t.selectedItem=t.selectedItem===e?void 0:e}}}}]),angular.module("mainMenuGroupLayers",[]),angular.module("mainMenuGroupLayers").directive("mainMenuGroupLayers",["ISY.MapAPI.Map","mainMenuPanelFactory",function(t,e){return{templateUrl:"components/transclusions/mainMenuPanel/mainMenuGroupLayers/mainMenuGroupLayers.html",restrict:"A",link:function(n){var r=t.GetOverlayLayers();n.selectedProject=e.getSelectedProject(),n.groupLayers=t.GetGroups();var i=function(t){if(void 0!==t){var e=t.isyLayers||[];t.isAllLayersSelected=!0,t.groupIsVisible=!0,t.isPartiallyVisible=!1;for(var n=0,r=0;r<e.length;r++)e[r].isVisible?n+=1:(t.isAllLayersSelected=!1,t.groupIsVisible=!1);n!==e.length&&0!==n&&(t.isPartiallyVisible=!0)}},o=function(t,e){e.forEach((function(e){t.groupId.forEach((function(t){e.groupId===t&&i(e)}))}))};n.removeGroups=function(){for(var e in r.forEach((function(e){e.groupId.forEach((function(e){var n=t.GetGroupById(e);n&&(n.isyLayers=[])}))})),n.groupLayers)n.groupLayers[e].isOpen=!1},n.getGroupStyleStatus=function(t){return t.groupIsVisible?"fa fa-check-square pointer-cursor":t.isPartiallyVisible?"fa fa-check-square-o pointer-cursor":"glyphicon glyphicon-unchecked pointer-cursor"},n.getLayerStyleStatus=function(t){return t.isVisible?"fa fa-check-square pointer-cursor":"glyphicon glyphicon-unchecked pointer-cursor"},n.checkMatrikkel=function(t){return"matrikkel_data"===t.name},n.groupFilter=function(t){if(t.groupIsVisible||t.isPartiallyVisible)return t},n.legendFilter=function(t){if(t.isVisible&&t.subLayers[0].legendGraphicUrl)return t},n.GetLegendGraphicUrl=function(t){return t.isVisible?t.subLayers[0].legendGraphicUrl:""},n.toggleLayer=function(e){(!n.onlyOneGroup||e.groupId.indexOf(999)>-1)&&(e.isVisible?(t.HideLayer(e),e.styles=void 0):(e.previewActive=!1,t.ShowLayer(e)),o(e,n.groupLayers))},n.toggleGroup=function(e){if(e.isAllLayersSelected){if(void 0!==e.isyLayers)for(var r=0;r<e.isyLayers.length;r++)t.HideLayer(e.isyLayers[r]),e.isyLayers[r].styles=void 0,o(e.isyLayers[r],n.groupLayers)}else if(void 0!==e.isyLayers){n.onlyOneGroup&&999!==e.groupId&&n.groupLayers.forEach((function(e){if(999!==e.groupId)for(var r=0;r<e.isyLayers.length;r++)t.HideLayer(e.isyLayers[r]),e.isyLayers[r].styles=void 0,o(e.isyLayers[r],n.groupLayers)}));var i=JSON.parse(JSON.stringify(e.isyLayers));i.sort((function(t,e){return t.order-e.order}));for(var a=function(t){return e.isyLayers.filter((function(e){return e.id==t}))[0]},s=0;s<i.length;s++){var l=a(i[s].id);t.ShowLayer(l),o(l,n.groupLayers)}}},function(){for(var t=0;t<n.groupLayers.length;t++)void 0!==n.groupLayers[t].isyLayers&&n.groupLayers[t].isyLayers.length>0&&(n.groupLayers[t].isyLayers=[])}(),function(){for(var e in r.forEach((function(e){e.groupId.forEach((function(n){var r=t.GetGroupById(n);r&&(r.isyLayers=r.isyLayers||[],r.isyLayers.push(e))}))})),n.groupLayers)i(n.groupLayers[e])}()}}}]),angular.module("mainMenuPanel",["mainMenuSections","mainMenuBaseLayers","mainMenuGroupLayers","mainMenuFaq","mainMenuContact","mainMenuPrivacy"]),angular.module("mainMenuPanel").controller("mainMenuPanelController",["$scope","moveableOverlayFactory","mapOverlaysLayoutFactory","localStorageFactory","ISY.MapAPI.Map",function(t,e,n,r,i){function o(r){n.setShowSearchOverlay(!1),e.deactiveAllOverlay(),e.setActiveOverlay(r),t.menuShowMoveableOverlay(r)}t.drawActivated=!1,t.mainMenuPanelLayout="mainMenuSections",t.resetApplication=function(t){t.preventDefault(),r.remove("lat"),r.remove("lon"),r.remove("zoom"),r.set("mainMenuIsOpen",!1),location.hash="",location.reload(t.shiftKey)},t.showMainMenuBaseLayers=function(){t.mainMenuPanelLayout="mainMenuBaseLayers"},t.showMainMenuSections=function(){t.mainMenuPanelLayout="mainMenuSections"},t.showMainMenuGroupLayers=function(){t.mainMenuPanelLayout="mainMenuGroupLayers"},t.showMainMenuContact=function(){t.mainMenuPanelLayout="mainMenuContact"},t.showMainMenuPrivacy=function(){t.mainMenuPanelLayout="mainMenuPrivacy"},t.showMainMenuFaq=function(){t.mainMenuPanelLayout="mainMenuFaq"},t.moveableOverlayLayout="",t.showMoveableDrawMenu=function(){o("DrawMenu")},t.showMoveableShareMapMenu=function(){t.moveableOverlayLayout="menuShareMapLayout",o("ShareMap")},t.showMoveableElevationProfileMenu=function(){t.moveableOverlayLayout="menuElevationProfileLayout",o("ElevationProfile")},t.showMoveablePrintMenu=function(){t.moveableOverlayLayout="menuPrintLayout",o("PrintMenu")},t.deactivateMoveableOverlay=function(){t.moveableOverlayLayout=""},t.isDrawActivated=function(){return!!t.drawActivated||(t.drawActivated=!0,!1)},t.setGeoJSON=function(e){t.GeoJSON=e},t.getSelectedBaseLayerName=function(){var t=i.GetFirstVisibleBaseLayer();return void 0!==t?t.name:""}}]),angular.module("mainMenuPanel").directive("mainMenuPanel",["toolsFactory",function(t){return{templateUrl:"components/transclusions/mainMenuPanel/mainMenuPanel.html",restrict:"A",controller:"mainMenuPanelController",link:function(e){e.deactivateDrawFeature=function(){var e=t.getToolById("DrawFeature");t.deactivateTool(e)}}}}]),angular.module("mainMenuPanel").factory("mainMenuPanelFactory",[function(){var t=[{id:"seeiendom",title:"seEiendom_title",symbol:"fa fa-home",symbol_text:"",isSelected:!1},{id:"norgeskart",title:"Friluft_title",symbol:"fa fa-tree",symbol_text:"",isSelected:!1},{id:"ssr",title:"Stedsnavn_title",symbol:"fa fa-map-signs",symbol_text:"",isSelected:!1},{id:"Tilgjengelighet",title:"Tilgjengelighet_title",symbol:"fa fa-wheelchair",symbol_text:"",isSelected:!1},{id:"Fastmerker",title:"Fastmerker_title",symbol:"fa fa-map-pin",symbol_text:"",isSelected:!1},{id:"nrl",title:"Luftfartshindre_title",symbol:"fa fa-plane",symbol_text:"",isSelected:!1},{id:"dekning",title:"Dekning_title",symbol:"fa fa-map",symbol_text:"",isSelected:!1},{id:"arbeidsgiveravgiftsoner",title:"Arbeidsgiveravgiftsoner_title",symbol:"fa fa-funnel-dollar",symbol_text:"",isSelected:!0}];return{getAllProjects:function(){return t},getSelectedProject:function(){for(var e=0;e<t.length;e++)if(t[e].isSelected)return t[e]},setProjectById:function(e){if(void 0!==e)for(var n=0;n<t.length;n++)t[n].isSelected=t[n].id.toLowerCase()===e.toLowerCase()}}}]),angular.module("mainMenuPrivacy",[]),angular.module("mainMenuPrivacy").directive("mainMenuPrivacy",["isyTranslateFactory",function(t){return{templateUrl:"components/transclusions/mainMenuPanel/mainMenuPrivacy/mainMenuPrivacy.html",restrict:"A",link:function(e){e.language=t.getCurrentLanguage()}}}]),angular.module("mainMenuSections",[]),angular.module("mainMenuSections").directive("mainMenuSections",["mainMenuPanelFactory","$location","ISY.MapAPI.Map","isyTranslateFactory","$translate","localStorageFactory","$timeout",function(t,e,n,r,i,o,a){return{templateUrl:"components/transclusions/mainMenuPanel/mainMenuSections/mainMenuSections.html",restrict:"A",link:function(s){s.projects=t.getAllProjects(),s.languages=r.getAllLanguages(),s.activateProject=function(r){if(s.visibleLayersCount=0,r.isSelected)s.showMainMenuGroupLayers();else{t.setProjectById(r.id);var i=e.search();i.project=r.id,i.layers="",l(n.GetUrlObject(),i.layers,r)}};var l=function(t,r,i){if(!angular.equals(t,e.search())){var o=angular.extend(e.search(),t);o.layers=r,e.search(o).replace(),a((function(){s.resetMainAppFactory(),s.initMapLayout(),s.reInitMap(),n.RedrawMap(),s.getVisibleLayersCount(),s.activateProject(i)}),0)}};function u(){var t=document.getElementsByClassName("print-mode")[0],e=t.scrollHeight,n=t.scrollWidth;n>.70707*e&&(t.style.width=n+"px",t.style.height=e+"px")}function c(){var t=document.getElementsByClassName("print-mode")[0];t.style.height="100%",t.style.width="100%",n.RedrawMap()}s.changeLanguage=function(t){r.setCurrentLanguage(t),n.SetTranslateOptions(r.getTranslateOptionsByActiveLanguage()),i.use(t),o.set("activeLanguage",t)},s.getVisibleLayersCount=function(){return n.GetVisibleSubLayers().length},$(document).ready((function(){s.getVisibleLayersCount()})),s.printMap=function(){document.body.insertAdjacentHTML("beforeEnd",'<object id="printPrev" width="0" height="0" classid="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></object>');try{printPrev.ExecWB(7,2),printPrev.outerHTML=""}catch(t){}u(),window.print(),c()},window.matchMedia("print").addListener((function(){u(),setTimeout((function(){c()}),1)})),$(window).on("beforeprint",(function(){u()})),$(window).on("afterprint",(function(){c()}))}}}]),angular.module("menuDraw",[]),angular.module("menuDraw").directive("menuDraw",["toolsFactory","ISY.EventHandler","$location","mainAppService","$http","$filter","$timeout",function(t,e,n,r,i,a,s){return{templateUrl:"components/transclusions/menuDraw/menuDraw.html",restrict:"A",link:function(l){var u=!0;l.drawingHash="",l.snap=!0,l.selectionActive=!1,l.pointTypes={Circle:64,Triangle:3,Diamond:4},l.colors={black:"#000000",yellow:"#FFFF00",orange:"#FFA500",red:"#FF0000",purple:"#800080",blue:"#0000FF",darkgreen:"#006400",grey:"#808080"},l.geometryTypes=["Point","LineString","Polygon","Text"],l.pointRadiusSizes=[{sizeType:"Small",size:7},{sizeType:"Medium",size:14},{sizeType:"Large",size:21}],l.lineTypes=[{lineTypeId:"line",lineLength:15,lineSpace:0,lineType:"_____"},{lineTypeId:"dash",lineLength:15,lineSpace:15,lineType:"_ _ _ _"},{lineTypeId:"dot",lineLength:2,lineSpace:15,lineType:"......."}],l.lineWidthSizes=[{lineTypeId:1,lineWidth:2,sizeType:"Small"},{lineTypeId:2,lineWidth:4,sizeType:"Medium"},{lineTypeId:4,lineWidth:8,sizeType:"Large"}],l.polygonOpacities=[{opacityType:"0%",opacityValue:0},{opacityType:"25%",opacityValue:25},{opacityType:"50%",opacityValue:50},{opacityType:"75%",opacityValue:75},{opacityType:"100%",opacityValue:100}],l.textHightSizes=[{textType:"Small",textHight:10},{textType:"Medium",textHight:15},{textType:"Large",textHight:18}],l.modeTypes=["draw","modify"],l.mode="draw",l.type="Point",l.color="#FFA500",l.fillAlpha=50,l.pointNumber=64,l.pointRadius=7,l.pointRadius2=7,l.lineWidth=2,l.lineLength=15,l.lineSpace=0,l.text="",l.fontSize=15,l.colorTextStrokeWidth=0,l.colorTextStroke="#000000",l.colorText="#000000",_colorDict={Point:l.color,LineString:l.color,Polygon:l.color,Text:l.color},_deleteFeature=!1,_fontName="sans-serif,helvetica";var c=t.getToolById("DrawFeature");l.refreshStyle=function(){var t,e,n,r,i,o=new ol.style.Style({fill:new ol.style.Fill({color:(t=_colorDict.Polygon,e=(100-l.fillAlpha)/100,n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16),"rgba("+n+", "+r+", "+i+", "+e+")")}),stroke:new ol.style.Stroke({color:_colorDict.LineString,width:l.lineWidth,lineDash:[l.lineLength,l.lineSpace]}),image:new ol.style.RegularShape({fill:new ol.style.Fill({color:_colorDict.Point}),points:l.pointNumber,radius:l.pointRadius}),text:new ol.style.Text({font:l.fontSize+"px sans-serif,helvetica",text:l.text,fill:new ol.style.Fill({color:_colorDict.Text})})});return l.colorTextStrokeWidth=10,l.colorTextStrokeWidth>0&&o.getText().setStroke(new ol.style.Stroke({color:"rgba(255,255,255,1)",width:l.colorTextStrokeWidth})),o};var h=function(t){var e,n=t.properties.style;switch(l.type=t.geometry.type,l.type){case"Point":n.text?($('#myTabs a[data-target="#text"]').tab("show"),l.type="Text",l.fontSize=parseInt(n.text.font.split("px")[0],10)||l.fontSize,l.text=n.text.text||l.text,l.color=n.text.fill.color||l.color,n.text.stroke&&(l.colorTextStrokeWidth=n.text.stroke.width||l.colorTextStrokeWidth,l.colorTextStroke=n.text.stroke.color||l.colorTextStroke)):($('#myTabs a[data-target="#point"]').tab("show"),l.color=n.regularshape.fill.color,l.pointNumber=n.regularshape.points,l.pointRadius=n.regularshape.radius);break;case"LineString":$('#myTabs a[data-target="#line"]').tab("show"),l.color=n.stroke.color,l.lineWidth=n.stroke.width,l.lineLength=n.stroke.lineDash[0],l.lineSpace=n.stroke.lineDash[1];break;case"Polygon":$('#myTabs a[data-target="#polygon"]').tab("show"),l.color=("#"+b((e=(e=n.fill.color).replace("rgba","").replace("(","").replace(")","").split(","))[0])+b(e[1])+b(e[2])).toUpperCase(),l.fillAlpha=100-parseInt(100*n.fill.color.split(",")[3].replace(")",""),10)||l.fillAlpha}_colorDict[l.type]=l.color};l.pointTypeChanged=function(){var t;l.selectionActive||(t="draw"),l.activateDrawFeatureTool(t)};var f=function(){var t=p("drawing");if(t)return d(t),!0;l.activateDrawFeatureTool()},p=function(t){if(!n.url())return!1;for(var e=n.url().split("?")[1].split("&"),r=0;r<e.length;r++){var i=e[r].split("=");if(i[0]==t)return i[1]}};var d=function(t){l.drawingHash=t;var e=r.generateGeoJSONUrl(t,!1);i.get(e).then((function(t){!function(t){u=!0;for(var e=0;e<t.features.length;e++){var n=t.features[e].geometry.coordinates;if(2===n.length&&"number"==typeof n[0]){if(n[1]>90){u=!1;break}}else for(var r=0;r<n.length;r++)if(n[r][1]>90){u=!1;break}break}}(t.data),g(t)}))},g=function(t){l.setGeoJSON(t.data),l.drawActivated?l.activateDrawFeatureTool():(l.activateDrawFeatureTool(),l.deactivateDrawFeatureTool())};l.switchMode=function(t){l.mode=t,"draw"==l.mode&&(l.selectedFeatureId=void 0,l.selectionActive=!1),l.activateDrawFeatureTool()},l.switchType=function(t){l.type=t,_colorDict[l.type]=l.color,l.switchMode("draw")},l.switchSymbol=function(t){l.pointNumber=l.pointTypes[t],l.activateDrawFeatureTool(),l.pointSymbol=t},l.activateDrawFeatureTool=function(){if(window.showMeasurements=l.showMeasurements,"Text"!=l.type&&(l.text=""),!c)throw"No draw tool found";c.additionalOptions={deleteFeature:_deleteFeature,type:l.type,style:l.refreshStyle(),snap:l.snap,mode:l.mode,selectedFeatureId:l.selectedFeatureId,selectionActive:l.selectionActive,showMeasurements:l.showMeasurements,showNauticalMiles:l.showNauticalMiles},l.GeoJSON&&(c.additionalOptions.GeoJSON=l.GeoJSON,c.additionalOptions.drawingHash=l.drawingHash),t.deactivateTool(c),t.activateTool(c),l.selectionActive&&"draw"==l.mode&&(l.selectionActive=!1,l.selectedFeatureId=void 0),l.drawActivated=!0},l.drawFeature=function(){l.setColor()},l.setColor=function(t){l.color=t,_colorDict[l.type]=l.color,l.activateDrawFeatureTool()},l.newButtonClick=function(){l.setGeoJSON("remove"),m(),l.activateDrawFeatureTool()};var m=function(){var t=p("drawing"),e=n.url();n.url(e.replace("drawing="+t,"")).replace(),l.drawingHash=""};l.deleteButtonClick=function(){_deleteFeature=!0,l.activateDrawFeatureTool(),l.selectedFeatureId=void 0,l.selectionActive=!1,_deleteFeature=!1},l.saveToPCButtonClick=function(){"remove"==l.GeoJSON?alert("Empty drawing"):l.saveToPc(l.GeoJSON)},l.downloadButtonClick=function(){if(""!==l.drawingHash){var t=r.generateGeoJSONUrl(l.drawingHash,!0);window.open(t)}},l.saveButtonClick=function(){u||(l.showConvertInfo=!0,s((function(){l.showConvertInfo=!1}),4e3));var t=r.generateGeoJSONSaveUrl();i.defaults.headers.post={},i.post(t,l.GeoJSON).then((function(t){v(t)}))};var v=function(t){var e=t.data,r=e.split("/").length-1,i=e.split("/")[r].split(".")[0];m();var o=n.url();n.url(o+"&drawing="+i).replace(),f()};l.isDrawActivated()||(e.RegisterEvent(o.Events.EventTypes.DrawFeatureEnd,(function(t){l.setGeoJSON(t)})),e.RegisterEvent(o.Events.EventTypes.DrawFeatureSelect,(function(t){for(var e="object"==typeof l.GeoJSON?l.GeoJSON:JSON.parse(l.GeoJSON),n=0;n<e.features.length;n++)if(e.features[n].id==t)return l.selectionActive=!0,l.selectedFeatureId=t,h(e.features[n]),l.$apply(),void l.activateDrawFeatureTool()})));var y=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function b(t){return isNaN(t)?"00":y[(t-t%16)/16]+y[t%16]}function w(){l.setPointRadiusSize(l.pointRadiusSizes[0]),l.setLineWidthSize(l.lineWidthSizes[0]),l.setPolygonOpacity(l.polygonOpacities[2]),l.setTextHight(l.textHightSizes[1]),l.switchLineType(l.lineTypes[0]),l.pointSymbol="Circle",f()&&(t.deactivateTool(c),l.drawActivated=!1)}l.saveToPc=function(t,e){if(t){if(!e)e="Norgeskart3.tegning."+a("date")(new Date,"yyyyMMddHHmmss")+".json";"object"==typeof t&&(t=JSON.stringify(t,void 0,2));var n=new Blob([t],{type:"text/json"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,e);else{var r=document.createEvent("MouseEvents"),i=document.createElement("a");i.download=e,i.href=window.URL.createObjectURL(n),i.dataset.downloadurl=["text/json",i.download,i.href].join(":"),r.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)}}},l.setPointRadiusSize=function(t){l.pointRadius=t.size,l.activePointType=t.sizeType,l.activateDrawFeatureTool()},l.setLineWidthSize=function(t){l.lineWidth=t.lineWidth,l.activeLineWidthSize=t.lineTypeId,l.activateDrawFeatureTool()},l.setPolygonOpacity=function(t){l.fillAlpha=t.opacityValue,l.activeOpacityType=t.opacityType,l.activateDrawFeatureTool()},l.setTextHight=function(t){l.fontSize=t.textHight,l.activeTextHight=t.textType,l.activateDrawFeatureTool()},l.switchLineType=function(t){l.lineLength=t.lineLength,l.lineSpace=t.lineSpace,l.activeLineType=t.lineTypeId,l.activateDrawFeatureTool()},w(),l.$on("initDraw",(function(){w()}))}}}]),angular.module("menuElevationProfile",["menuElevationProfilePage1","menuElevationProfilePage2"]),angular.module("menuElevationProfile").controller("menuElevationProfileController",["$scope","toolsElevationProfileFactory","menuElevationProfileFactory",function(t,e,n){t.allowGeneratingElevationProfile=!1,t.gpx=!1,t.imageExists=!1,t.setAllowGeneratingElevationProfile=function(e){t.allowGeneratingElevationProfile=e},t.setElevationProfileActive=function(t){n.setElevationProfileActive(t)},t.setImageExits=function(e){t.imageExists=e},t.updateGpx=function(e){t.gpx=e},t.calculateElevationProfile=function(){t.gpx&&(document.getElementById("spinner2").style.backgroundColor="rgba(0,0,0,0.4)",document.getElementById("spinner2").style.transition="0.8s",t.showSpinner=!0,e.generateElevationProfile(t.gpx).then((function(){document.getElementById("spinner2").style.backgroundColor="transparent",document.getElementById("spinner2").style.transition="0.8s",t.showSpinner=!1,t.imageExists=!0,t.showElevationProfilePage2()}))),n.setElevationBtnActivity(!1)},t.showElevationProfilePage1=function(){t.menuElevationProfileLayout="page1"},t.showElevationProfilePage2=function(){t.menuElevationProfileLayout="page2"},t.menuElevationProfileLayout="page1"}]),angular.module("menuElevationProfile").directive("menuElevationProfile",[function(){return{templateUrl:"components/transclusions/menuElevationProfile/menuElevationProfile.html",restrict:"A",controller:"menuElevationProfileController",link:function(){}}}]),angular.module("menuElevationProfile").factory("menuElevationProfileFactory",[function(){var t=!1,e=!1;return{setElevationBtnActivity:function(e){t=e},getElevationBtnActivity:function(){return t},setElevationProfileActive:function(t){e=t},getElevationProfileActive:function(){return e}}}]),angular.module("menuElevationProfilePage1",[]),angular.module("menuElevationProfilePage1").directive("menuElevationProfilePage1",["toolsFactory","ISY.EventHandler","$timeout","menuElevationProfileFactory",function(t,e,n,r){return{templateUrl:"components/transclusions/menuElevationProfile/menuElevationProfilePage1/menuElevationProfilePage1.html",restrict:"A",link:function(n){n.allowGeneratingElevationProfile=!1,e.RegisterEvent(o.Events.EventTypes.AddLayerFeatureEnd,(function(t){if(n.setImageExits(!1),r.getElevationProfileActive()){var e=(new ol.format.GPX).writeFeatures([t],{featureProjection:"EPSG:25833",dataProjection:"EPSG:4326"});n.updateGpx(e)}n.allowGeneratingElevationProfile=!0})),n.drawLineElevation=function(e){n.setElevationProfileActive(!0),n.elevationImage=void 0,function(e,n){var r=t.getToolById("AddLayerFeature");r.additionalOptions.features=n,t.setAddFeatureType(e,"AddLayerFeature"),t.activateTool(r)}("Line",e),r.setElevationBtnActivity(!0)},n.uploadGpxFile=function(){},$("#clickInput").click((function(){$("#files").click()})),n.removeGeometry=function(){n.deactivateDrawFeatureTool(n.GeoJSON),n.deactivateAddLayerFeatureTool(),n.setElevationProfileActive(!1),r.setElevationBtnActivity(!1)},n.isDrawActive=function(){return r.getElevationBtnActivity()},n.isElevationProfileActive=function(){return r.getElevationProfileActive()}}}}]).directive("fileread",[function(){return{link:function(t,e){e.bind("change",(function(e){var n=new FileReader;n.onload=function(e){t.$apply((function(){t.updateGpx(e.target.result),t.setAllowGeneratingElevationProfile(!0),t.drawLineElevation(e.target.result)}))};var r=e.target.files[0];t.filePath=e.target.value,n.readAsText(r)}))}}}]),angular.module("menuElevationProfilePage2",[]),angular.module("menuElevationProfilePage2").controller("menuElevationProfilePage2Controller",["$scope","toolsElevationProfileFactory",function(t,e){t.viewElevationProfile=function(){t.elevationImage=e.getElevationImage()},t.getElevationImage=function(){return t.elevationImage},t.showImage=function(){$.featherlight(t.elevationImage)},t.downloadImage=function(){var e=document.createElement("a");e.href=t.elevationImage,e.download=t.elevationImage,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}]),angular.module("menuElevationProfilePage2").directive("menuElevationProfilePage2",[function(){return{templateUrl:"components/transclusions/menuElevationProfile/menuElevationProfilePage2/menuElevationProfilePage2.html",restrict:"A",controller:"menuElevationProfilePage2Controller",link:function(){}}}]),angular.module("menuPrint",[]),angular.module("menuPrint").controller("menuPrintController",["$scope","toolsFactory","toolsPrint","$timeout","ISY.MapAPI.Map","mainAppService","mainAppFactory",function(t,e,n,r,i,a,s){function l(){var n=e.getToolById("PrintBox");e.deactivateTool(n),!t.selectedPrintScale&&n&&n.additionalOptions&&n.additionalOptions.scale?t.selectedPrintScale=n.additionalOptions.scale:n.additionalOptions.scale=t.selectedPrintScale,n.additionalOptions.pageWidth=t.selectedLayout.attributes[1].clientInfo.width,n.additionalOptions.pageHeight=t.selectedLayout.attributes[1].clientInfo.height,e.activateTool(n)}function u(e){n.getStatusPrint(e).then((function(n){r((function(){!1===n.done?t.printCanceled||u(e):(t.showSpinner=!1,function(e){var n=document.createElement("a"),r=a.generatePrintDownloadUrl(e);n.href=r,n.download=r,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n),t.printCanceled=!0}(n.downloadURL))}))}),(function(e){t.showSpinner=!1}))}function c(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))switch(typeof t[n]){case"string":e.indexOf(n)>-1&&delete t[n];break;case"object":e.indexOf(n)>-1?delete t[n]:c(t[n],e)}}t.printScales={1:250,2:500,3:1e3,4:2500,5:5e3,6:1e4,7:25e3,8:5e4,9:1e5,10:25e4,11:5e5,12:1e6,13:25e5},t.printCanceled=!0,t.layouts=[{}],t.formats=[],t.initMainPrintProtocol=function(){document.getElementById("spinnerPrint").style.backgroundColor="rgba(0,0,0,0.4)",document.getElementById("spinnerPrint").style.transition="0.8s",t.showSpinner=!0,n.getPrintCapabilities("kv").then((function(e){r((function(){t.layouts=e.layouts,t.selectedLayout=t.layouts[0],t.formats=e.formats,t.selectedFormat="pdf",t.dpiResolutions=t.selectedLayout.attributes[1].clientInfo.dpiSuggestions,t.selectedDpi=128,t.showSpinner=!1,l()}))}),(function(e){t.showSpinner=!1}))},t.setLayoutType=function(e){t.selectedLayout=e,l()},t.setFormat=function(e){t.selectedFormat=e},t.setDpi=function(e){t.selectedDpi=e},t.setPrintScale=function(e){t.selectedPrintScale=e,l()},t.print=function(){var e=i.GetCenter(),a=o.MapImplementation.OL3.olMap.getLayers().getArray(),l=a.filter((function(t){return"PrintBox"==t.get("name")}))[0];a=a.filter((function(t){return"PrintBox"!=t.get("name")})).filter((function(t){return 1==t.getVisible()})).sort((function(t,e){return e.layerIndex-(t.layerIndex||1/0)}));var h={attributes:{map:{center:[e.lon,e.lat],dpi:t.selectedDpi,layers:[],rotation:0,projection:"EPSG:25833",scale:t.selectedPrintScale},pos:Number(Math.round(e.lon+"e2")+"e-2")+", "+Number(Math.round(e.lat+"e2")+"e-2"),scale_string:"1:"+t.selectedPrintScale,title:t.mapName||""},layout:t.selectedLayout.name,outputFormat:t.selectedFormat,outputFilename:"norgeskart-utskrift"},f=s.getMapConfig();t.printCanceled=!1,t.showSpinner=!0;for(var p=0;p<a.length;p++){var d={},g={TRANSPARENT:"true"},m="",v="WMTS";a[p].getProperties().config?(m=a[p].getProperties().config.url[0],v=a[p].getProperties().config.source):"function"==typeof a[p].getSource().getUrl&&a[p].getSource().getUrl()?m=a[p].getSource().getUrl():"function"==typeof a[p].getSource().getUrls&&a[p].getSource().getUrls()&&(m=a[p].getSource().getUrls()[0]),"drawing"!==a[p].getProperties().id&&"propertyMarking"!==a[p].getProperties().id||(v="VECTOR"),"//"===m.substr(0,2)&&(m="http:"+a[p].getProperties().config.url[0]);var y=m.split("?");if(y.length>1){for(var b=1;b<y.length;b++){g[y[b].split("=")[0]]=y[b].split("=").slice(1).join("=")}m=y[0]}switch(g=JSON.parse(JSON.stringify(g)),v){case"WMS":d={baseURL:m,customParams:g,imageFormat:a[p].getProperties().config.format,layers:[a[p].getProperties().config.name],opacity:1,type:a[p].getProperties().config.source},a[p].getProperties().config.styles&&(d.styles=[a[p].getProperties().config.styles]);break;case"WMTS":var w="";a[p].getProperties().config&&a[p].getProperties().config.matrixPrefix&&(w=a[p].getSource().getMatrixSet()+":"),d={baseURL:m,customParams:g,style:"default",imageFormat:a[p].getProperties().source.getFormat()||a[p].getProperties().config.format,layer:a[p].getProperties().source.layer_?a[p].getProperties().source.layer_:a[p].getProperties().config&&a[p].getProperties().config.name?a[p].getProperties().config.name:a[p].getProperties().source.getLayer(),opacity:1,type:v,dimensions:null,requestEncoding:"KVP",dimensionParams:{},matrixSet:a[p].getSource().getMatrixSet(),matrices:[{identifier:w+"0",scaleDenominator:77371428.57142858,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[1,1]},{identifier:w+"1",scaleDenominator:38685714.28571429,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[2,2]},{identifier:w+"2",scaleDenominator:19342857.142857146,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[4,4]},{identifier:w+"3",scaleDenominator:9671428.571428573,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[8,8]},{identifier:w+"4",scaleDenominator:4835714.285714286,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[16,16]},{identifier:w+"5",scaleDenominator:2417857.142857143,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[32,32]},{identifier:w+"6",scaleDenominator:1208928.5714285716,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[64,64]},{identifier:w+"7",scaleDenominator:604464.2857142858,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[128,128]},{identifier:w+"8",scaleDenominator:302232.1428571429,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[256,256]},{identifier:w+"9",scaleDenominator:151116.07142857145,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[512,512]},{identifier:w+"10",scaleDenominator:75558.03571428572,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[1024,1024]},{identifier:w+"11",scaleDenominator:37779.01785714286,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[2048,2048]},{identifier:w+"12",scaleDenominator:18889.50892857143,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[4096,4096]},{identifier:w+"13",scaleDenominator:9444.754464285716,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[8192,8192]},{identifier:w+"14",scaleDenominator:4722.377232142858,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[16384,16384]},{identifier:w+"15",scaleDenominator:2361.188616071429,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[32768,32768]},{identifier:w+"16",scaleDenominator:1180.5943080357144,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[65536,65536]},{identifier:w+"17",scaleDenominator:590.2971540178572,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[131072,131072]},{identifier:w+"18",scaleDenominator:295.1485770089286,topLeftCorner:[-25e5,9045984],tileSize:[256,256],matrixSize:[262144,262144]}]};break;case"VectorSource":case"VECTOR":var x=null,S={version:"2"};if("function"==typeof a[p].getSource().getUrl&&void 0!==a[p].getSource().getUrl()||"function"==typeof a[p].getSource().getFormat&&void 0!==a[p].getSource().getFormat()){var _;void 0!==a[p].typename&&(_=f.layers.filter((function(t){return t.name==a[p].typename})));var k="rgba(255, 255, 255, 0.6)",E="#319FD3",M="rgba(255, 255, 255, 0.6)",T="#319FD3";"propertyMarking"===a[p].getProperties().id&&(k="rgba(255, 191, 1, 0.4)"),_&&(_[0].subLayers[0].style.fill&&(k=_[0].subLayers[0].style.fill.color),_[0].subLayers[0].style.stroke&&(E=_[0].subLayers[0].style.stroke.color),_[0].subLayers[0].style.text&&(M=_[0].subLayers[0].style.text.fill.color),_[0].subLayers[0].style.text&&(T=_[0].subLayers[0].style.text.stroke.color));var O=a[p].getStyle(),P=l.getSource().getFeatures()[0].getGeometry().getExtent(),C=a[p].getSource().getFeaturesInExtent(P),I=new ol.format.GeoJSON;C.forEach((function(t){var e=[],n=t.getProperties(),r=n.id||n.ID||n.n||n.N||n.offisielt_navn||n.MATRIKKELNR||n.measurement||t.getId();t.id_=r,t.setId(r),r="[IN('"+r+"')]",e.push({type:"polygon",fillColor:k,fillOpacity:.1,strokeColor:E,strokeOpacity:1,strokeWidth:1,strokeLinecap:"round"},{fillColor:M,strokeColor:T,fontColor:"black",fontFamily:"sans-serif",fontSize:"12px",strokeWidth:1,label:t.id_,haloColor:"white",haloOpacity:"0.6",haloRadius:"2.0",type:"text"}),S[r]={symbolizers:e},t.unset("boundedBy"),t.unset("REPRESENTASJONSPUNKT")})),C.length>0&&(x=I.writeFeatures(C)),O.getFill&&(k=a[p].getStyle().getFill().getColor(),a[p].getStyle().getStroke().getColor())}else a[p].getProperties().options&&a[p].getProperties().options.GeoJSON&&((x=a[p].getProperties().options.GeoJSON).features.length>0?(x.features.forEach((function(t){var e=[],n="[IN('"+t.id+"')]";switch(t.geometry.type){case"Point":if(t.properties.style.regularshape){var r="circle",i="0";switch(t.properties.style.regularshape.points){case 3:r="triangle";break;case 4:r="square",i="45";break;case 5:r="star";break;case 64:r="circle"}e.push({fillColor:t.properties.style.regularshape.fill.color,strokeColor:t.properties.style.regularshape.fill.color,pointRadius:t.properties.style.regularshape.radius,graphicName:r,rotation:i,type:"point"})}if(t.properties.style.text){var o=t.properties.style.text.font.split(" "),a="15px",s="sans-serif";o.length>1&&(a=o[0],s=o[1]),e.push({fillColor:t.properties.style.text.fill.color,strokeColor:t.properties.style.text.fill.color,fontColor:t.properties.style.text.fill.color,fontFamily:s,fontSize:a,strokeWidth:t.properties.style.text.stroke.width,label:t.properties.style.text.text,haloColor:"white",haloOpacity:"0.7",haloRadius:"3.0",type:"text"})}break;case"LineString":if(t.properties.style.stroke){var l="solid";t.properties.style.stroke.lineDash&&(l=t.properties.style.stroke.lineDash.toString().replace(","," ")),e=window.showMeasurements?[{fillColor:t.properties.style.stroke.color,label:t.properties.measurement,labelXOffset:"-40.0",haloColor:"white",haloOpacity:"0.7",haloRadius:"3.0",type:"text"},{strokeColor:t.properties.style.stroke.color,strokeWidth:t.properties.style.stroke.width,strokeDashstyle:l,type:"line",strokeOpacity:1,strokeLinecap:"round"}]:[{strokeColor:t.properties.style.stroke.color,strokeWidth:t.properties.style.stroke.width,strokeDashstyle:l,type:"line",strokeOpacity:1,strokeLinecap:"round"}]}break;case"Polygon":var u=t.properties.style.fill.color.substr(5).split(")")[0].split(","),c=.5;u.length>3&&(c=+u[3]),t.properties.measurement=t.properties.measurement.replace(/&sup2;/g,"Â²"),e=window.showMeasurements?[{fillColor:t.properties.style.stroke.color,label:t.properties.measurement,labelXOffset:"-40.0",haloColor:"white",haloOpacity:"0.7",haloRadius:"3.0",type:"text"},{fillColor:t.properties.style.fill.color,fillOpacity:c,strokeColor:t.properties.style.stroke.color,strokeWidth:t.properties.style.stroke.width,type:"polygon"}]:[{fillColor:t.properties.style.fill.color,fillOpacity:c,strokeColor:t.properties.style.stroke.color,strokeWidth:t.properties.style.stroke.width,type:"polygon"}];break;default:e=[{fillColor:"red",pointRadius:5,type:"point"},{type:"line",strokeColor:"black",strokeOpacity:1,strokeWidth:3,strokeLinecap:"round",strokeDashstyle:"dot"},{type:"polygon",fillColor:"#FF0000",fillOpacity:.7,strokeColor:"yellow",strokeOpacity:1,strokeWidth:3,strokeLinecap:"round"}]}S[n]={symbolizers:e}})),x=JSON.stringify(x)):x=null);if(x&&("string"==typeof x||void 0!==x.features&&x.features&&0!==Object.keys(x.features).length)){var A=JSON.parse(x);c(A,"style"),d={geoJson:A,type:"geojson",style:S}}break;default:d={baseURL:a[p].getProperties().config.url[0],customParams:{TRANSPARENT:"true"},imageFormat:a[p].getProperties().config.format,layers:[a[p].getProperties().config.name],opacity:.7,type:a[p].getProperties().config.source}}0!==Object.keys(d).length&&("VectorSource"===v||"VECTOR"===v||"WMTS"===v&&"europe_forenkelt"!==d.layername?h.attributes.map.layers.unshift(d):h.attributes.map.layers.push(d))}var L=["geojson","WMS","WMTS"];h.attributes.map.layers.sort((function(t,e){return L.indexOf(t.type)-L.indexOf(e.type)})),n.uploadDataForPrint("kv",h).then((function(e){r((function(){t.refNum=e.ref.split("@")[0],u(e.statusURL)}))}),(function(e){t.showSpinner=!1}))},t.cancelPrint=function(){t.printCanceled=!0,n.cancelPrint(t.refNum).then((function(){r((function(){t.showSpinner=!1}))}),(function(e){t.showSpinner=!1}))}}]),angular.module("menuPrint").directive("menuPrint",[function(){return{templateUrl:"components/transclusions/menuPrint/menuPrint.html",restrict:"A",controller:"menuPrintController",link:function(){}}}]),angular.module("menuShareMap",[]),angular.module("menuShareMap").controller("menuShareMapController",["$location","$scope","$window",function(t,e,n){var r=function(){return t.absUrl()},i=function(){return encodeURIComponent(r())};e.getMailUrl=function(){var t="mailto:?subject=norgeskart.no&body="+i();n.open(t,"_self")},e.getTwitterUrl=function(){var t="https://twitter.com/share?url="+i();n.open(t,"_blank")},e.getFacebookUrl=function(){var t="https://www.facebook.com/sharer.php?u="+i();n.open(t,"_blank")},e.getAbsoluteUrl=function(){return r()},e.copyURL=function(){var t=document.createElement("textarea");t.setAttribute("style","width:1px;border:0;opacity:0;"),document.body.appendChild(t),t.value=r(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}]),angular.module("menuShareMap").directive("menuShareMap",[function(){return{templateUrl:"components/transclusions/menuShareMap/menuShareMap.html",restrict:"A",controller:"menuShareMapController",link:function(){}}}]),angular.module("searchKoordTransPanel",[]),angular.module("searchKoordTransPanel").controller("searchKoordTransPanelController",["$scope","mainAppService","$http","searchKoordTransPanelFactory",function(t,e,n,r){var i=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)};Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t});var o=function(t,e,n){if(DmsSeparator="",isNaN(t))return null;if(void 0===e&&(e="dms"),void 0===n)switch(e){case"d":case"deg":case"dm":case"deg+min":n=7;break;case"dms":case"deg+min+sec":n=5;break;default:e="dms",n=0}var r,o,a,s,l=-1===Math.sign(t)?"-":"";switch(t=Math.abs(t),e){default:case"d":case"deg":r=l+(o=i(t,n));break;case"dm":case"deg+min":o=Math.floor(t),60==(a=i(60*t%60,n))&&(a=0,o++),r=l+o+"Â°"+a+"â²";break;case"dms":case"deg+min+sec":o=Math.floor(t),a=Math.floor(3600*t/60)%60,60==(s=i(3600*t%60,n))&&(s=i(0,n),a++),60==a&&(a=0,o++),r=l+o+"Â°"+a+"â²"+s+"â³"}return r},a=function(e){n.get(e).then((function(e){var n;n=e.data,"50"==t.activePosition.resSosiKoordSys||"84"==t.activePosition.resSosiKoordSys?(t.activePosition.transLon=o(n.ost,"d"),t.activePosition.transLat=o(n.nord,"d"),t.activePosition.transLon2=o(n.ost,"dm"),t.activePosition.transLat2=o(n.nord,"dm"),t.activePosition.transLon3=o(n.ost,"dms"),t.activePosition.transLat3=o(n.nord,"dms")):(t.activePosition.transLat=i(n.nord,2),t.activePosition.transLat2="",t.activePosition.transLat3="",t.activePosition.transLon=i(n.ost,2),t.activePosition.transLon2="",t.activePosition.transLon3="")}))};t._fetchKoordTrans=function(n){r.setLastSelectedCoorKey(n),t.activePosition.resSosiKoordSys=n;var i=t.activePosition.geographicPoint[1],o=t.activePosition.geographicPoint[0],s=e.generateKoordTransUrl(o,i,t.activePosition.resSosiKoordSys);a(s)},t.generateCoordinateSystems=function(){r.setAdvancedCoordSystem(t.showAdvancedCoordinateSystems);var n=e.getCoordinateSystems("standard"),i=e.getCoordinateSystems("extended");angular.extend(i,n),t.showAdvancedCoordinateSystems?t.coordinateSystems=i:t.coordinateSystems=n};var s;s=r.getLastSelectedCoorKey(),t.showAdvancedCoordinateSystems=r.getAdvancedCoordSystem(),""!==s?t._fetchKoordTrans(s):(t.activePosition.transLat=i(t.activePosition.lat,2),t.activePosition.transLon=i(t.activePosition.lon,2),t.activePosition.resSosiKoordSys="23"),t.generateCoordinateSystems(),t.getActiveCoorSystem=function(){return t.coordinateSystems[t.activePosition.resSosiKoordSys]}}]),angular.module("searchKoordTransPanel").directive("searchKoordTransPanel",["$window",function(t){return{templateUrl:"components/transclusions/searchPanel/searchKoordTransPanel/searchKoordTransPanel.html",restrict:"A",link:function(){var e=function(){$(document).ready((function(){t.matchMedia("only screen and (max-width: 760px)").matches?n(120):n(220)}))};function n(e){for(var n=t.innerHeight,r=Math.floor(n-e),i=document.getElementsByClassName("search-content"),o=0;o<i.length;o++){i[o].style.maxHeight=r+"px"}}$(document).ready((function(){$(t).resize(e),e()}))}}}]),angular.module("searchKoordTransPanel").factory("searchKoordTransPanelFactory",[function(){var t="",e=!1;return{setLastSelectedCoorKey:function(e){t=e},getLastSelectedCoorKey:function(){return t},setAdvancedCoordSystem:function(t){e=t},getAdvancedCoordSystem:function(){return e}}}]),angular.module("searchLagNodplakatPanel",["searchLagNodplakatPanelPage1","searchLagNodplakatPanelPage2"]),angular.module("searchLagNodplakatPanel").controller("searchLagNodplakatPanelController",["$scope","mainAppService","$http","ISY.MapAPI.Map",function(t,e,n,r){t.lagNodplakatConfirmRoad=!1,t.valgtTekst="CorrectRoad",t.showLagNodplakatPage1=function(){r.SetCenter(t.activePosition),t.searchLagNodplakatPanelLayout="page1"},t.showLagNodplakatPage2=function(){r.SetCenter(t.activePosition),t.searchLagNodplakatPanelLayout="page2"},t.searchLagNodplakatPanelLayout="page1";var i=function(t,e){n.get(t).then((function(t){o(e,t.data)}))},o=function(e,n){switch(e){case"elevationPoint":t.activePlaceName=n.placename,t.setSearchBarText(t.activePlaceName),t.lagNodplakatName=t.activePlaceName;break;case"emergencyPosterPoint":t.lagNodplakatDict[e]=n,""===n.veg&&(t.nodplakatConfirmRoad=!0);break;case"placenamesByBbox":t.lagNodplakatDict[e]=n.navn.map((function(t){return t.skrivemaatenavn=t.stedsnavn[0]["skrivemÃ¥te"],t})),t.activePlaceName||n.navn.length>0&&(t.activePlaceName=n.navn[0].stedsnavn[0]["skrivemÃ¥te"],t.setSearchBarText(t.activePlaceName),t.lagNodplakatName=t.activePlaceName)}};t.initLagNodplakat=function(){var n,o,a,s,l,u;t.lagNodplakatDict?function(){var e=["elevationPoint","emergencyPosterPoint","placenamesByBbox"];for(var n in e)t.lagNodplakatDict[e[n]]={}}():t.lagNodplakatDict={},n=t.activePosition.lat,o=t.activePosition.lon,a=t.mapEpsg.split(":")[1],s=e.generateElevationPointUrl(n,o,a),i(s,"elevationPoint"),function(){var n=t.activePosition.geographicPoint[1],r=t.activePosition.geographicPoint[0],o=e.generateEmergencyPosterPointUrl(n,r);i(o,"emergencyPosterPoint")}(),l=r.GetCenter(),u=e.generatStedsnavnPunktsokNodplakat(l.lat,l.lon),i(u,"placenamesByBbox")},t.initLagNodplakat(),t.generateEmergencyPosterPreviewImage=function(){var t=r.GetExtent();return e.generateEmergencyPosterPreviewImageUrl(t[0],t[1],t[2],t[3])},t.setNodePlagatName=function(e){t.lagNodplakatName=e,t.activePlaceName=e},t.setNodePlagatStreet=function(e){t.activeStreet=e},t.setlagNodplakatConfirmRoad=function(e){t.lagNodplakatConfirmRoad=e,t.nodplakatConfirmRoad=!0,t.valgtTekst=e?"ja":"nei"}}]),angular.module("searchLagNodplakatPanel").directive("searchLagNodplakatPanel",[function(){return{templateUrl:"components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanel.html",restrict:"A",controller:"searchLagNodplakatPanelController",link:function(){}}}]),angular.module("searchLagNodplakatPanelPage1",[]),angular.module("searchLagNodplakatPanelPage1").directive("searchLagNodplakatPanelPage1",["$window",function(t){return{templateUrl:"components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage1/searchLagNodplakatPanelPage1.html",restrict:"A",link:function(){var e=function(){$(document).ready((function(){t.matchMedia("only screen and (max-width: 760px)").matches?n(120):n(220)}))};function n(e){for(var n=t.innerHeight,r=Math.floor(n-e),i=document.getElementsByClassName("search-content"),o=0;o<i.length;o++){i[o].style.maxHeight=r+"px"}}$(document).ready((function(){$(t).resize(e),e()}))}}}]),angular.module("searchLagNodplakatPanelPage2",[]),angular.module("searchLagNodplakatPanelPage2").directive("searchLagNodplakatPanelPage2",["$window","ISY.MapAPI.Map","mainAppService",function(t,e,n){return{templateUrl:"components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage2/searchLagNodplakatPanelPage2.html",restrict:"A",link:function(r){r.downloadEmergencyPoster=function(){t.open(r.generateEmergancyPoster())};var i=1145,o=660,a=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)},s=function(t){var e=function(t){var e=parseInt(t.toString().split(".")[0],10),n=60*(t-e),r=n-n.toString().split(".")[0];n=a(n.toString().split(".")[0],0);var i=a(60*r,0);return 60==i&&(n+=1,i=0),60==n&&(e+=1,n=0),{degrees:e,minutes:n,seconds:i}}(t);return e.degrees+" grader "+e.minutes+" minutter "+a(e.seconds,0)+" sekunder"};r.generateEmergancyPoster=function(){r.lagNodplakatDict.emergencyPosterPoint||alert("Service returned error.");var t,l,u,c,h,f,p,d=(t=r.activePosition.geographicPoint[0],l=r.activePosition.geographicPoint[1],u="32V",c="EPSG:32632",l>72?t<21?(u="33X",c="EPSG:32633"):(u="35X",c="EPSG:32635"):l>64?t<6?(u="31W",c="EPSG:32631"):t<12?(u="32W",c="EPSG:32632"):t<18?(u="33W",c="EPSG:32633"):t<24?(u="34W",c="EPSG:32634"):t<30?(u="35W",c="EPSG:32635"):(u="36W",c="EPSG:32636"):t<3?(u="31V",c="EPSG:32631"):t>=12&&(u="33V",c="EPSG:32633"),h={sone:u,localProj:c},f=ol.proj.transform([r.activePosition.geographicPoint[0],r.activePosition.geographicPoint[1]],"EPSG:4326",h.localProj),p="",r.lagNodplakatDict.emergencyPosterPoint.matrikkelnr&&r.lagNodplakatConfirmRoad&&(p=r.activeStreet||r.lagNodplakatDict.emergencyPosterPoint.veg,p+=" i "+r.lagNodplakatDict.emergencyPosterPoint.kommune),{locationName:r.lagNodplakatName,position1:s(r.activePosition.geographicPoint[1])+" nord",position2:s(r.activePosition.geographicPoint[0])+" Ã¸st",street:p,place:r.activePlaceName,matrikkel:r.lagNodplakatDict.emergencyPosterPoint.matrikkelnr+" i "+r.lagNodplakatDict.emergencyPosterPoint.kommune,utm:"Sone "+h.sone+" Ã "+a(f[0],0)+" N "+a(f[1],0),posDez:"N"+a(r.activePosition.geographicPoint[1],4)+"Â° - Ã"+a(r.activePosition.geographicPoint[0],4)+"Â°",map:""}),g=function(){e.SetCenter(r.activePosition);var t=e.GetExtent(),n=t[2]-t[0],a=n/(i/o),s=e.GetCenter(),l=s.lon-n/2,u=s.lat-a/2,c=s.lon+n/2,h=s.lat+a/2;return{service:"WMS",request:"GetMap",CRS:"EPSG:32633",FORMAT:"image/jpeg",BGCOLOR:"0xFFFFFF",TRANSPARENT:"false",LAYERS:"topo",VERSION:"1.3.0",WIDTH:i,HEIGHT:o,BBOX:l+","+u+","+c+","+h}}();return d.map=n.generateMapLinkServiceUrl(g),function(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/%C2%B0/g,"%B0")).replace(/%C3%A6/g,"%E6")).replace(/%C3%B8/g,"%F8")).replace(/%C3%A5/g,"%E5")).replace(/%C3%86/g,"%C6")).replace(/%C3%98/g,"%D8")).replace(/%C3%85/g,"%C5")).replace(/%C3%A9/g,"%E9")).replace(/%C3%89/g,"%C9")).replace(/%C3%84/g,"%C4")).replace(/%C3%A4/g,"%E4")).replace(/%C3%96/g,"%D6")).replace(/%C3%B6/g,"%F6")).replace(/%C3%9C/g,"%DC")).replace(/%C3%BC/g,"%FC")}(n.generateEmergencyPosterServiceUrl(d))};var l=function(){$(document).ready((function(){t.matchMedia("only screen and (max-width: 760px)").matches?u(120):u(220)}))};function u(e){for(var n=t.innerHeight,r=Math.floor(n-e),i=document.getElementsByClassName("search-content"),o=0;o<i.length;o++){i[o].style.maxHeight=r+"px"}}$(document).ready((function(){$(t).resize(l),l()}))}}}]),angular.module("searchLagTurkartPanel",[]),angular.module("searchLagTurkartPanel").directive("searchLagTurkartPanel",["toolsFactory","ISY.EventHandler","$http","mainAppService","$window","ISY.MapAPI.Map",function(t,e,n,r,i,a){return{templateUrl:"components/transclusions/searchPanel/searchLagTurkartPanel/searchLagTurkartPanel.html",restrict:"A",link:function(s){s.activePosition.zoom=parseFloat(7),a.SetCenter(s.activePosition);var l={},u="",c=!0;s.mapAvailable=!1,s.createMapButtonOn=!0,s.showLegend=!1,s.showTrips=!1,s.showSweden=!1,s.showCompass=!1,e.RegisterEvent(o.Events.EventTypes.PrintBoxSelectReturnValue,(function(t){l=t}));var h=function(e,n,r){var i=t.getToolById("PrintBoxSelect");i.additionalOptions.scale=e,i.additionalOptions.cols=n,i.additionalOptions.rows=r,t.activateTool(i)};s.applyScale=function(t){s.deactivatePrintBoxSelect(),h(t,4,3),s.scale=t},s.scales={25e3:"1: 25 000",5e4:"1: 50 000"},s.scale="25000",s.tittel="Turkart",h(s.scale,4,3),s.orderMap=function(){if(l.bbox){s.createMapButtonOn=!1,s.mapAvailable=!1;var t=f();n.defaults.headers.post={};var e=r.generateLagTurkartUrl();n.post(e,t,{headers:{"Content-Type":"application/json"}}).then((function(t){d(t,e)}),(function(t){p(t)})),s.showSpinner=!0,document.getElementById("spinner1").style.backgroundColor="rgba(0,0,0,0.4)",document.getElementById("spinner1").style.transition="0.8s"}};var f=function(){return{map:{bbox:l.bbox,center:l.center,dpi:"300",layers:[{baseURL:"https://wms.geonorge.no/skwms1/wms.toporaster4",customParams:{TRANSPARENT:"false"},imageFormat:"image/jpeg",layers:["toporaster"],opacity:1,type:"WMS"}],projection:l.projection,sone:l.sone,biSone:l.biSone},paging:12,layout:"A4 landscape",scale:l.scale,titel:s.tittel,legend:s.showLegend,trips:s.showTrips,sweden:s.showSweden,compass:s.showCompass,link:"https://norgeskart.no/#!?z="+s.activePosition.zoom+"&ma="+Number(Math.round(s.activePosition.lat+"e2")+"e-2")+"&mo="+Number(Math.round(s.activePosition.lon+"e2")+"e-2")+"&p=tur"}},p=function(){c?(c=!1,s.orderMap()):s.createMapButtonOn=!0},d=function(t,e){s.mapAvailable=!0,s.createMapButtonOn=!0,s.showSpinner=!1,document.getElementById("spinner1").style.backgroundColor="transparent",document.getElementById("spinner1").style.transition="0.8s",u=e.replace("turkart2","")+t.data.linkPdf};s.downloadMap=function(){i.open(u,"_blank")};var g=function(){$(document).ready((function(){i.matchMedia("only screen and (max-width: 760px)").matches?m(120):m(220)}))};function m(t){for(var e=i.innerHeight,n=Math.floor(e-t),r=document.getElementsByClassName("search-content"),o=0;o<r.length;o++){r[o].style.maxHeight=n+"px"}}$(document).ready((function(){$(i).resize(g),g()}))}}}]),angular.module("mapGetFeatures",[]),angular.module("mapGetFeatures").directive("mapGetFeatures",[function(){return{templateUrl:"components/transclusions/searchPanel/searchOptionsPanel/mapGetFeatures/mapGetFeatures.html",restrict:"A",link:function(t){t.showImage=function(t){$.featherlight(t)}}}}]),angular.module("searchOptionsPanel",["mapGetFeatures"]),angular.module("searchOptionsPanel").controller("searchOptionsPanelController",[function(){}]),angular.module("searchOptionsPanel").directive("searchOptionsPanel",["$window","ISY.MapAPI.Map","changeBaseLayerPanelFactory",function(t,e,n){return{templateUrl:"components/transclusions/searchPanel/searchOptionsPanel/searchOptionsPanel.html",restrict:"A",link:function(r){r.mouseDown=function(i){switch(i.name){case"seEiendom":r.showSearchSeEiendomPanel();break;case"koordTrans":r.showKoordTransPanel();break;case"lagTurkart":!function(t){var r=!1,i=e.GetBaseLayers();for(;!r;)for(var o in i)i[o].name==t&&(e.SetBaseLayer(i[o]),n.setBaseLayerById(i[o].thumbnail),r=!0)}("rasterkart"),r.showLagTurKartPanel();break;case"lagNodplakat":r.showLagNodplakatPanel();break;case"ssrFakta":r.showStedsnavnPanel();break;default:if(i.url){var o=i.url,a=0,s=0,l=t.innerHeight,u=t.innerWidth;t.matchMedia("only screen and (max-width: 760px)").matches?(s=Math.floor(l-70),a=Math.floor(u-50)):(s=Math.floor(l-300),a=Math.floor(u-300)),$.featherlight({iframe:o,iframeMaxWidth:"100%",iframeWidth:a,iframeHeight:s})}}};var i=function(){$(document).ready((function(){t.matchMedia("only screen and (max-width: 760px)").matches?o(120):o(220)}))};function o(e){for(var n=t.innerHeight,r=Math.floor(n-e),i=document.getElementsByClassName("search-content"),o=0;o<i.length;o++){i[o].style.maxHeight=r+"px"}}$(document).ready((function(){$(t).resize(i),i()}))}}}]),angular.module("searchPanel",["searchOptionsPanel","searchResultsPanel","searchStedsnavnPanel","searchSeEiendomPanel","searchKoordTransPanel","searchSeHavnivaaPanel","searchLagTurkartPanel","searchLagNodplakatPanel"]),angular.module("searchPanel").controller("searchPanelController",["$scope","toolsFactory","ISY.MapAPI.Map","mainAppFactory","$timeout","$location","searchPanelFactory",function(t,e,n,r,i,o,a){function s(t){o.search().p=t,o.search(angular.extend(o.search(),o.search())).replace()}t.showSearchResultPanel=function(){t.deactivatePrintBoxSelect(),t.searchPanelLayout="searchResultsPanel",r.setActiveSearchPanel("searchResultsPanel")},t.showSearchOptionsPanel=function(e){t.deactivatePrintBoxSelect(),t.deactivateAddLayerUrl(),t.searchPanelLayout="searchOptionsPanel",e?void 0===o.search().p&&s("searchOptionsPanel"):(r.setActiveSearchPanel("searchOptionsPanel"),s("searchOptionsPanel"))},t.searchPanelLayout="searchResultsPanel",t.showSearchSeEiendomPanel=function(){t.activeSearchOptionOrder=["kommunenr","gardsnr","bruksnr","festenr","seksjonsnr","eiendomstype","matrikkelnr"],t.activeSearchOption=t.searchOptionsDict.seEiendom,t.searchPanelLayout="searchSeEiendomPanel",s("Seeiendom"),r.setActiveSearchPanel("searchSeEiendomPanel");var e=void 0!==o.search().showSelection&&"false"!==o.search().showSelection;a.setShowEiendomMarkering(e)},t.searchOptionsDict={},t.showStedsnavnPanel=function(){if(t.searchBarModel){var e=t.searchOptionsDict.ssrFakta.stedsnavn;e.forEach((function(n,r){n.stedsnavn.forEach((function(i){i["skrivemÃ¥te"]===t.searchBarModel&&(e.splice(r,1),e.unshift(n))}))})),t.searchOptionsDict.ssrFakta.stedsnavn=e}t.activeSearchOption=t.searchOptionsDict.ssrFakta,n.SetCenter(t.activePosition),t.searchPanelLayout="searchStedsnavnPanel",s("Stedsnavn"),r.setActiveSearchPanel("searchStedsnavnPanel")},t.showKoordTransPanel=function(){n.SetCenter(t.activePosition),t.searchPanelLayout="searchKoordTransPanel",s("Koordinater"),r.setActiveSearchPanel("searchKoordTransPanel")},t.showLagTurKartPanel=function(){n.SetCenter(t.activePosition),t.searchPanelLayout="searchLagTurkartPanel",s("tur"),r.setActiveSearchPanel("searchLagTurkartPanel")},t.showLagNodplakatPanel=function(){n.SetCenter(t.activePosition),t.searchPanelLayout="searchLagNodplakatPanel",s("Nodplakat"),r.setActiveSearchPanel("searchLagNodplakatPanel")},t.setSearchBarText=function(e){t.searchBarModel=e},t.deactivatePrintBoxSelect=function(){var t=e.getToolById("PrintBoxSelect");e.deactivateTool(t)},t.deactivateAddLayerUrl=function(){var t=e.getToolById("AddLayerUrl");t.additionalOptions.show=!1,e.activateTool(t),e.deactivateTool(t)},t.initLastSearchPanel=function(){t.showSearchOptionsPanel("reset"),i((function(){"searchResultsPanel"===r.getLastActiveSearchPanel()&&r.setActiveSearchPanel("searchOptionsPanel"),t.searchPanelLayout=r.getLastActiveSearchPanel()}),10)}}]),angular.module("searchPanel").directive("searchPanel",["$timeout","mainAppService","ISY.MapAPI.Map","ISY.EventHandler","$http","searchPanelFactory","$window","toolsFactory","$location",function(e,n,r,i,a,s,l,u,c){return{templateUrl:"components/transclusions/searchPanel/searchPanel.html",restrict:"A",controller:"searchPanelController",link:function(h){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return!!t&&this.substr(!e||e<0?0:+e,t.length)===t}),h.sourceDict=s.getSourceDict(),h.mapEpsg=s.getMapEpsg(),_searchResults={},_unifiedResults={},_serviceDict={},_queryDict={};var f="search-options pointer-cursor",p="pointer-cursor",d="search-options",g="",m=function(t,e,n){return void 0!==e?{deg:parseInt(t),min:parseFloat(e),sec:parseFloat(n),value:parseInt(t)+parseFloat(e)/60+parseFloat(n)/3600}:{value:t}},v=function(t,e,n,r,i){var o={icon:{value:e,class:d},text:{value:r,class:g},name:t};for(var a in n&&(o.icon.class=f,o.text.class=p),i)o[a]=i[a];return o},y={icon:{value:"",class:""},text:{value:"",class:""},name:""},b=function(){var t=function(t){if(!c.url())return!1;for(var e=c.url().split("?")[1].split("&"),n=0;n<e.length;n++){var r=e[n].split("=");if(r[0]==t)return r[1]}}("sok"),e=c.url();c.url(e.replace("sok="+t,"")).replace()},w=function(){return h.searchBarModel+""},x=function(t){var e=t.north;return t.north=t.east,t.east=e,t};h.contructQueryPoint=function(t,e,n,r,i){return{name:"",point:s.constructPoint(t,e,n,h.mapEpsg),source:r,kommune:i}},h.removeInfomarkers=function(){r.RemoveInfoMarkers(),r.RemoveInfoMarker()};h.fetchAddressInfoForMatrikkel=function(){h.showFetchAdressSearch=!0;var t=h.searchOptionsDict.seEiendom.kommunenr,e=h.searchOptionsDict.seEiendom.gardsnr,r=h.searchOptionsDict.seEiendom.bruksnr,i=h.searchOptionsDict.seEiendom.festenr,o=h.searchOptionsDict.seEiendom.seksjonsnr,s=n.generateEiendomAddress(t,e,r,i,o);a.get(s).then((function(t){h.showFetchAdressSearch=!1,h.vegaddresse="",h.kommuneNavn="",h.cityName="";for(var e=[],n=t.data,r=0;r<n.length;r++){var i=n[r].VEGADRESSE2.split(" ");""===h.vegaddresse&&(h.vegaddresse=n[r].VEGADRESSE2.split(i[i.length-1])[0]),""===h.kommuneNavn&&(h.kommuneNavn=n[r].KOMMUNENAVN),""===h.cityName&&""!==n[r].VEGADRESSE&&(h.cityName=n[r].VEGADRESSE[1]),e.push(i[i.length-1])}e.sort((function(t,e){return t<e?-1:t>e?1:0}));for(var o=0;o<e.length;o++)""!==e[o]&&(h.vegaddresse+=" "+e[o],o!==e.length-1&&(h.vegaddresse+=","));e.length>1?h.multipleAdresses=!0:h.multipleAdresses=!1}))};var S=function(t,e){switch(t){case"elevationPoint":if(e.punkter.length>0){var r=e.punkter[0].z?e.punkter[0].z.toFixed(1):"-";h.searchOptionsDict[t]=v(t,"â",!1,r,{})}break;case"stedsnavnPunkt":var i=e.navn;if(h.searchOptionsDict.ssrFakta=v("ssrFakta","fa fa-flag",!0,"",{stedsnavn:i}),i.length>0){if(h.activeSearchResult&&"mouseClick"==h.activeSearchResult.source){var o=i[0].stedsnavn.findIndex((function(t){return"hovednavn"===t.navnestatus}));-1===o&&(o=0),h.searchBarModel=i[0].stedsnavn[o].skrivemÃ¥te,c.search().sok=i[0].stedsnavn[o].skrivemÃ¥te,c.search(angular.extend(c.search(),c.search())).replace()}h.searchOptionsDict[t]=v(t,"â",!1,{})}break;case"seEiendom":var a=xml.xmlToJSON(e);if(!a.FeatureCollection)return;if(!a.FeatureCollection.featureMembers)return;!function(t,e){t[0]||(t=[t]);for(var r,i=[],o=0;o<t.length;o++)if("Mnr mangler"!=t.MATRIKKELNR&&"Mnr vann mangler"!=t.MATRIKKELNR){var a={kommunenr:t[o].KOMMUNENR,gardsnr:t[o].GARDSNR,bruksnr:t[o].BRUKSNR,festenr:t[o].FESTENR,seksjonsnr:t[o].SEKSJONSNR,eiendomstype:t[o].EIENDOMSTYPE,matrikkelnr:t[o].MATRIKKELNR};a.adresse=a.kommunenr+"-"+a.gardsnr+"/"+a.bruksnr,parseInt(a.festenr,10)>0&&(a.adresse+="/"+a.festenr,parseInt(a.seksjonsnr,10)>0&&(a.adresse+="/"+a.seksjonsnr)),a.url=n.generateSeEiendomUrl(a.kommunenr,a.gardsnr,a.bruksnr,a.festenr,a.seksjonsnr);var s=a.kommunenr+"-"+a.matrikkelnr.replace(new RegExp(" ","g"),"");i.push(v(e,"fa fa-home",!0,s,a))}i.length>1&&(r=i.sort((function(t,e){return t.adresse.localeCompare(e.adresse)}))),h.searchOptionsDict[e]=i[0],r&&(h.searchOptionsDict[e].allResults=r)}(a.FeatureCollection.featureMembers.TEIGWFS,t),h.fetchAddressInfoForMatrikkel(),s.getShowEiendomMarkering()&&h.showSelection()}},_=function(t,e){a.get(t).then((function(t){S(e,t.data),h.showMatrikelInfoSearch=!1}))};function k(t,e){c.search().markerLat=t,c.search().markerLon=e,c.search(angular.extend(c.search(),c.search())).replace()}h.initSearchOptions=function(){for(var t in h.searchOptionsOrder=s.getSearchOptionsOrder(),h.searchOptionsOrder)h.searchOptionsDict[h.searchOptionsOrder[t]]=y;var e,r,i,o,a;e=h.activePosition.lat,r=h.activePosition.lon,i=h.mapEpsg.split(":")[1],o=n.generateElevationPointUrl(e,r,i),_(o,"elevationPoint"),function(){var t=h.activePosition.lat,e=h.activePosition.lon,r=h.mapEpsg.split(":")[1],i=n.generatStedsnavnPunktsok(t,e,r);_(i,"stedsnavnPunkt")}(),function(){h.showMatrikelInfoSearch=!0;var t=h.activePosition.geographicPoint[1],e=h.activePosition.geographicPoint[0],r=n.generateMatrikkelInfoUrl(t,e,t,e);_(r,"seEiendom")}(),function(){var t=h.activePosition.geographicPoint[1],e=h.activePosition.geographicPoint[0],r=n.generateAdressePunktsokUrl(50,t,e);_(r,"adresse")}(),a="koordTrans",h.searchOptionsDict[a]=v(a,"fa fa-map-marker-alt",!0,"Se koordinater",{}),function(){var t="lagTurkart";h.searchOptionsDict[t]=v(t,"fa fa-blind",!0,"Lage turkart",{})}(),function(){var t="lagNodplakat";h.searchOptionsDict[t]=v(t,"fa fa-ambulance",!0,"Lage nÃ¸dplakat",{})}()},h.activatePosition=function(t){var e={lon:parseFloat(t.point[0]),lat:parseFloat(t.point[1])},n=parseFloat(13),i=parseFloat(c.search().zoom);"searchSeEiendomPanel"!=h.searchPanelLayout&&i<n&&"mouseClick"!=t.source&&(e.zoom=n),e.geographicPoint=s.constructPoint(e.lat,e.lon,h.mapEpsg,"EPSG:4326"),r.SetCenter(e),k(e.lat,e.lon),r.RemoveInfoMarkers(),h.activePosition=e,h.activeSearchResult=t,h.searchOptionsDict.elevationPoint&&(h.searchOptionsDict.elevationPoint.text.value=void 0),h.searchBarModel.length<t.name.length&&!h.coordinate&&"mouseClick"!=h.activeSearchResult.source&&(h.searchBarModel=t.name),h.initSearchOptions()},h.showQueryPoint=function(t){h.searchResults||(h.searchResults={}),h.searchResults.searchBar=t,h.removeInfomarkers(),r.ShowInfoMarker(t.point),k(t.point[1],t.point[0]),h.activatePosition(t),"coordGeo"!==t.source&&"coordUtm"!==t.source||h.showSearchOptionsPanel()};var E=function(t){h.coordinate=!0;var e=s.parseInput(t),r=t.split("@")[1],i=function(t){var e={};t=(t=t.replace(/Nord|NORD|North|NORTH|[nN]/g,"N")).replace(/Ãst|ÃST|East|EAST|[eEÃ¸ÃoO]/g,"E");for(var n,r=/(-?\d*\.?)\d+/g,i=/[nN]|[eEÃ¸ÃoO]+/g,o=/[,]+/g,a=[],s=[],l=[];null!==(n=o.exec(t));)l.push(n[0]);for(l.length>1&&(t=t.replace(new RegExp(/[,]/,"g"),"."));null!==(n=r.exec(t));)a.push(n[0]);for(;null!==(n=i.exec(t));)s.push(n[0]);return 6===a.length?(e.north=m(a[0],a[1],a[2]),e.east=m(a[3],a[4],a[5]),"E"===s[0]&&(e=x(e))):4===a.length?(e.north=m(a[0],a[1],0),e.east=m(a[2],a[3],0),"E"===s[0]&&(e=x(e))):2===a.length&&(e.north=m(a[0]),e.east=m(a[1]),"N"===s[0]&&Math.round(e.north.value).toString().length>=6&&(e=x(e))),e}(t.split("@")[0]);if("string"==typeof i.phrase)return!1;if(void 0===i.north)return!1;if(void 0!==e.parsedInput.bnr)return!1;if(s.getAvailableUTMZones().indexOf(r)>-1)return h.showQueryPoint(h.contructQueryPoint(i.east.value,i.north.value,"EPSG:"+r,"coordUtm","")),!0;if(r){var o=n.getSOSIfromEPSG(r);if(!o)return!1;var l=n.generateKoordTransUrl(i.north.value,i.east.value,"",o);a.get(l).then((function(t){return(!Object.prototype.hasOwnProperty.call(t.data,"kode")||0===t.data.kode)&&(h.showQueryPoint(h.contructQueryPoint(t.data.nord,t.data.ost,"EPSG:4326","coordGeo","")),!0)}))}else{if(i.east.value>32.88&&i.north.value>-16.1&&i.east.value<84.17&&i.north.value<39.65)return r="EPSG:4258",h.showQueryPoint(h.contructQueryPoint(i.east.value,i.north.value,r,"coordGeo","")),!0;if(i.north.value>32.88&&i.east.value>-16.1&&i.north.value<84.17&&i.east.value<39.65)return r="EPSG:4258",h.showQueryPoint(h.contructQueryPoint(i.north.value,i.east.value,r,"coordGeo","")),!0;if(i.east.value>-2465220.6&&i.north.value>4102904.86&&i.east.value<771164.64&&i.north.value<9406031.63)return r="EPSG:25833",h.showQueryPoint(h.contructQueryPoint(i.north.value,i.east.value,r,"coordUtm","")),h.searchBarModel+="@"+h.mapEpsg.split(":")[1],!0;if(i.east.value>-128551.4542&&i.north.value>6404024.705&&i.east.value<1148218.099&&i.north.value<8010780.591)return r="EPSG:25833",SosiCode=23,h.showQueryPoint(h.contructQueryPoint(i.north.value,i.east.value,r,"coordUtm","")),h.searchBarModel+="@"+h.mapEpsg.split(":")[1],!0;if(i.north.value>-2465220.6&&i.east.value>4102904.86&&i.north.value<771164.64&&i.east.value<9406031.63)return r="EPSG:25833",h.showQueryPoint(h.contructQueryPoint(i.east.value,i.north.value,r,"coordUtm","")),h.searchBarModel+="@"+h.mapEpsg.split(":")[1],!0;if(i.north.value>-128551.4542&&i.east.value>6404024.705&&i.north.value<1148218.099&&i.east.value<8010780.591)return r="EPSG:25833",SosiCode=23,h.showQueryPoint(h.contructQueryPoint(i.east.value,i.north.value,r,"coordUtm","")),h.searchBarModel+="@"+h.mapEpsg.split(":")[1],!0}return!1};h.resetResultsService=function(t){_unifiedResults[t]={},_searchResults[t]={},h.searchResults[t]={}},h.populateServiceDict=function(t){_serviceDict=s.getServiceDict(t)};var M=function(t){_unifiedResults={},_searchResults={},h.searchResults=void 0,h.activeSearchResult=void 0,h.populateServiceDict(t),h.coordinate=!1,r.RemoveInfoMarker(),h.placenamePage=s.resetPlacenamePage()+1};h.addResultsToMap=function(){var t=[];for(var n in r.RemoveInfoMarkers(),_unifiedResults)if(!("adresse"==n&&_unifiedResults.matrikkelveg&&Object.keys(_unifiedResults.matrikkelveg).length>1))for(var i in _unifiedResults[n])t.push(_unifiedResults[n][i].point);t.length>0?(r.ShowInfoMarkers(t),e((function(){h.searchResults=_unifiedResults,T(!1)}),0)):0==t.length&&""!==h.searchBarModel&&T(!0)};var T=function(t){h.spinnerIsVisible=!0,e((function(){h.$apply()}),0),e((function(){h.spinnerIsVisible=!1}),!0===t?1500:500)},O=function(e,n){switch(n){case"ssr":var r;return l=e,h.placenameHits=l.metadata.totaltAntallTreff,h.placenameItems=A(parseInt(h.placenameHits,10)),h.placenamePageTotal=Math.ceil(h.placenameHits/s.getPlacenameHitsPerPage()),Array.isArray(e.navn)&&(r=e.navn.map((function(t){if(t.name=t.skrivemÃ¥te,t.kommuner){for(var e=[],n=0;n<t.kommuner.length;n++)e[n]=t.kommuner[n].kommunenavn;t.kommune=e.reduce((function(t,n,r){return[t,n].join(r===e.length-1?" og ":", ")}))}else t.kommune="";return t.lat=t.representasjonspunkt.nord,t.lon=t.representasjonspunkt.Ã¸st,t}))),r;case"adresse":var i,o=s.parseInput(w()).parsedInput;if(o.gnr)i=e.adresser.sort((function(t,e){return t.husnr-e.husnr}));else{if(/(\D+)(\d+)([a-zA-Z])?/.test(w())){var a=/(\D+)(\d+)([a-zA-Z])?/.exec(w());o.street=a[1].trim().toUpperCase(),o.husnr=a[2],o.bokstav=a[3]}Array.isArray(e.adresser)&&(i=e.adresser.filter((function(t){return"Vegadresse"===t.objtype})).filter((function(t){return t.adressenavn.trim().toUpperCase().startsWith(o.street)})).filter((function(t){return String(t.nummer).startsWith(o.husnr)})).filter((function(t){return!o.bokstav||!!t.bokstav&&t.bokstav===o.bokstav.toUpperCase()})).map((function(t){return t.lat=t.representasjonspunkt.lat,t.lon=t.representasjonspunkt.lon,t})),i.sort((function(t,e){return parseInt(t.nummer)-parseInt(e.nummer)})))}return i;default:try{return JSON.parse(e)}catch(t){return e}}var l},P=function(t,e){_searchResults[t.source]={document:e,format:t.format,source:t.source,epsg:t.epsg},function(){var t;for(var e in _searchResults){var n=_searchResults[e];t=O(n.document,n.source),L(t,n)}}(),function(){if(_unifiedResults.adresse&&1==Object.keys(_unifiedResults.adresse).length&&!_unifiedResults.matrikkelveg&&!_unifiedResults.ssr){var t=Object.keys(_unifiedResults.adresse)[0],e=_unifiedResults.adresse[t];return h.showQueryPoint(h.contructQueryPoint(e.point[1],e.point[0],h.mapEpsg,e.source,e.kommune)),h.showSearchOptionsPanel(),!1}return!0}()&&h.addResultsToMap()},C=function(t,e){_queryDict[t.source]=$.ajax({type:"GET",url:t.url,async:!0,success:function(n){(n.length&&n.length>0||n.childNodes&&n.childNodes[0].childNodes.length||void 0!==n.adresser||void 0!==n.navn)&&h.searchTimestamp==e&&P(t,n)}})};h.getResults=function(t){if(I(),h.searchTimestamp=parseInt((new Date).getTime(),10),t)for(var e=0;e<t.length;e++)C(_serviceDict[t[e]],h.searchTimestamp);else for(var n in _serviceDict)C(_serviceDict[n],h.searchTimestamp)};var I=function(){for(var t in _queryDict)_queryDict[t].abort()};h.cleanResults=function(){M(),h.removeInfomarkers(),h.searchBarModel="",h.deactivatePrintBoxSelect()},h.searchBarValueChanged=function(){if(""===h.searchBarModel)return h.showSearchResultPanel(),void h.cleanResults();var t=w();!function(t){b();var e=c.url();c.url(e+"&sok="+t).replace()}(t),E(t)?h.initSearchOptions():(M(t),h.showSearchResultPanel(),h.getResults())},e((function(){void 0!==c.search().sok&&(h.searchBarModel=c.search().sok,h.searchBarValueChanged())}));var A=function(t){return new Array(t)};h.getNextPlacenamePage=function(){h.placenamePage=s.increasePlacenamePage()+1,h.resetResultsService("ssr"),r.RemoveInfoMarker(),h.populateServiceDict(h.searchBarModel),h.getResults(["ssr"])},h.getPreviousPlacenamePage=function(){h.placenamePage=s.decreasePlacenamePage()+1,h.resetResultsService("ssr"),r.RemoveInfoMarker(),h.populateServiceDict(h.searchBarModel),h.getResults(["ssr"])},h.pageChanged=function(t){h.placenamePage=t,s.setPlacenamePage(t),h.resetResultsService("ssr"),r.RemoveInfoMarker(),h.populateServiceDict(h.searchBarModel),h.getResults(["ssr"])};var L=function(t,e){if(t){t.length||(t=[t]);var r=s.parseInput(w()).parsedInput;r.municipality&&"adresse"===e.source&&(t=t.filter((function(t){return(t.kommunenr===r.municipality||t.kommunenavn===r.municipality.toUpperCase())&&t.gardsnr===r.gnr&&(!(r.bnr>-1)||!(t.bruksnr.length!==r.bnr.length||!t.bruksnr.startsWith(r.bnr))&&(!(r.fnr>-1)||!(t.festenr.length!==r.fnr.length||!t.festenr.startsWith(r.fnr))))})));for(var i=0;i<t.length;i++)if(t[i][_serviceDict[e.source].latID])j(R(_serviceDict[e.source],t[i]));else if("matrikkelnummer"===e.source){var o={kommunenr:t[i].KOMMUNENR,gardsnr:t[i].GARDSNR,bruksnr:t[i].BRUKSNR,festenr:t[i].FESTENR,seksjonsnr:t[i].SEKSJONSNR};t[i].url=n.generateSeEiendomUrl(o.kommunenr,o.gardsnr,o.bruksnr,o.festenr,o.seksjonsnr),j(R(_serviceDict[e.source],t[i]))}}},R=function(t,e){var n,r=e[t.latID]+"",i=e[t.lonID]+"",o="";n=isNaN(r)&&isNaN(i)?"":s.constructPoint(r,i,t.epsg,h.mapEpsg);var a=!1!==t.husnummerID?e[t.husnummerID]:"";return t.husnummerBokstav&&"string"==typeof e[t.husnummerBokstav]&&(a+=e[t.husnummerBokstav]),(e.navnestatus&&"historisk"===e.navnestatus||e["skrivemÃ¥testatus"]&&"historisk og prioritert"===e["skrivemÃ¥testatus"])&&(o="(historisk)"),{name:e[t.nameID],kommune:e[t.kommuneID],point:n,format:t.format,source:t.source,husnummer:a,navnetype:e[t.navnetypeID],navnestatus:o,url:e.url}};h.fixNames=function(t){return function(t){var e=t.split(" ");return null!=e[e.length-1].match(/\d+/g)?t.replace(e[e.length-1],"").trim():t.trim()}(t)};var j=function(t){if(t.name){var e=N(t);if(_unifiedResults[t.source]||(_unifiedResults[t.source]={}),_unifiedResults[t.source][e]={name:t.name,point:t.point,format:t.format,source:t.source,kommune:t.kommune?t.kommune:"",id:e,navnestatus:t.navnestatus?t.navnestatus:"",url:t.url},t.husnummer)_unifiedResults[t.source][e].husnummer="string"==typeof t.husnummer?[t.husnummer]:t.husnummer;else if(t.navnetype)switch(_unifiedResults[t.source][e].navnetype=t.navnetype,t.navnetype){case"Nasjon":case"Fylke":case"Kommune":_unifiedResults[t.source][e].kommune=""}}},N=function(t){return t.name+(t.point[0]+"").replace(".","")+(t.point[1]+"").replace(".","")};h.capitalizeName=function(t){return t=t.trim(),t=F(t,"-")};var F=function(t,e){for(var n=t.split(e),r="",i=0;i<n.length;i++)r+=D(n[i])+e;return r=G(r,1)},D=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},G=function(t,e){return t.substr(0,t.length-e)};h.mouseOver=function(t){h.mouseHoverSearchResult=t,r.RemoveInfoMarker(),r.ShowInfoMarker(t.point)},h.openShowEiendom=function(t){l.open(t.url,"_blank")},h.resetSearchPanel=function(){h.showSearchOptionsPanel(),h.searchPanelLayout=""};var U=function(t){h.coordinate=!0,h.cleanResults(),h.showQueryPoint(h.contructQueryPoint(t[1],t[0],h.mapEpsg,"mouseClick","")),h.initLastSearchPanel()};i.RegisterEvent(o.Events.EventTypes.MapClickCoordinate,U);var B=function(){$(document).ready((function(){l.matchMedia("only screen and (max-width: 760px)").matches?z(120):z(220)}))};function z(t){for(var e=l.innerHeight,n=Math.floor(e-t),r=document.getElementsByClassName("search-content"),i=0;i<r.length;i++){r[i].style.maxHeight=n+"px"}}function V(){var t,e=c.search().panel||c.search().p;if(void 0!==e){switch(h.activePosition={lon:0,lat:0,z:0},c.search().z&&(c.search().zoom=c.search().z,c.search("z",null)),c.search().mo&&(c.search().markerLon=c.search().mo,c.search("mo",null)),c.search().ma&&(c.search().markerLat=c.search().ma,c.search("ma",null)),h.activePosition.z=Number(c.search().zoom),h.activePosition.lon=Number(c.search().markerLon),h.activePosition.lat=Number(c.search().markerLat),isNaN(h.activePosition.lon)||isNaN(h.activePosition.lat)||U([h.activePosition.lon,h.activePosition.lat]),e){case"Seeiendom":var n=void 0!==c.search().showSelection&&"false"!==c.search().showSelection;s.setShowEiendomMarkering(n),h.showSearchSeEiendomPanel();break;case"Koordinater":h.showKoordTransPanel();break;case"tur":h.showLagTurKartPanel();break;case"Nodplakat":h.showLagNodplakatPanel()}t=[h.activePosition.lon,h.activePosition.lat],r.RemoveInfoMarker(),r.ShowInfoMarker(t)}}$(document).ready((function(){$(l).resize(B),B()})),h.showSelection=function(){if("seEiendom"===h.searchOptionsDict.seEiendom.name){var t=u.getToolById("AddLayerUrl");s.getShowEiendomMarkering()?(t.additionalOptions.show=!0,t.additionalOptions.url=n.generateMatrikkelWfsFilterUrl(h.searchOptionsDict.seEiendom),t.additionalOptions.geometryName="FLATE",t.additionalOptions.style=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,102,0.6)"}),stroke:new ol.style.Stroke({color:"rgba(255,255,102,1)",width:1})})):t.additionalOptions.show=!1,!0===t.additionalOptions.show&&(h.showSelectedPolygon=!0),u.activateTool(t),u.deactivateTool(t)}},i.RegisterEvent(o.Events.EventTypes.AddLayerUrlEnd,(function(){h.$apply((function(){h.showSelectedPolygon=!1}),0)})),h.layers=[],h.currentPage=1,i.RegisterEvent(o.Events.EventTypes.FeatureInfoStart,(function(t){h.layers=[];for(var e=0;e<t.length;e++)t[e].show=!1,n=t[e],h.layers.push(n);var n})),i.RegisterEvent(o.Events.EventTypes.FeatureInfoEnd,(function(t){var e=function(t){for(var e=0;e<h.layers.length;e++){var n=h.layers[e];if(n.id===t)return n}return null}(t.id);if(null!==e){t.exception?(e.exception=t.exception,e.hasException=!0):void 0!==t.features&&t.features.length>0&&(e.features=t.features,e.hasFeatures=t.showDialog),e.hasFeatures&&(e.show=!0);for(var n=!1,r=0;r<h.layers.length;r++)h.layers[r].show?n?h.layers[r].open=!1:(h.layers[r].open=!0,n=!0):h.layers[r].open=!1;e.isLoading=!1}})),h.toggleLayer=function(t){if(t.open)t.open=!1;else{for(var e=0;e<h.layers.length;e++)h.layers[e].open=!1;t.open=!0}h.currentPage=1},h.getFeatureName=function(t){return"# "+(t+1)},h.toggleFeature=function(t,e){if(e.open)e.open=!1;else{for(var n=0;n<t.features.length;n++)t.features[n].open=!1;e.open=!0}},h.isAnyLayerToShow=function(){for(var t=0;t<h.layers.length;t++)if(h.layers[t].show)return!0;return!1},h.getVisibleFeatures=function(t){return void 0!==t?t.features.length:0},h.getIdByLayer=function(t){return t.id},h.pageChangeHandler=function(t){h.currentPage=t},angular.element(document).ready((function(){V()})),h.$on("reInitSearchPanel",(function(){h.showSearchOptionsPanel("reset"),e((function(){V()}),500)}))}}}]).directive("caret",[function(){return{scope:{value:"=ngModel"},link:function(t,e){t.$watch("value",(function(n){n&&n.indexOf("@")>-1&&!t.searchBarCoordinateSystemIndicator?(t.searchBarCoordinateSystemIndicator=!0,function(t,e){if(null!==t)if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else t.setSelectionRange?(t.focus(),t.setSelectionRange(e,e)):t.focus()}(e[0],n.indexOf("@"))):n&&n.indexOf("@")<0&&(t.searchBarCoordinateSystemIndicator=!1)}))}}}]),angular.module("searchPanel").factory("searchPanelFactory",["mainAppService",function(t){var e=1,n=["25832","25833","25834","25835","25836","32632","32633","32634","32635","32636"],r={ssr:"Stedsnavn",adresse:"Adresse",matrikkelveg:"Vegnavn",matrikkeladresse:"Adresse",coordGeo:"Geografisk koordinat",coordUtm:"UTM-koordinat",mouseClick:"Klikk i kartet",matrikkelnummer:"GÃ¥rds og bruksnummer"},i=function(t){var e,n,r={},i=/^[ \t]*([A-Za-zÃ¦Ã¸Ã¥ÃÃÃ ]+[A-Za-zÃ¦Ã¸Ã¥ÃÃÃ]|[\d]+)[ \t]*[-/][ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*$/,o=/^[ \t]*([A-Za-zÃ¦Ã¸Ã¥ÃÃÃ ]+[A-Za-zÃ¦Ã¸Ã¥ÃÃÃ]|[\d]+)[ \t]*[-/][ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*$/,a=/^[ \t]*([A-Za-zÃ¦Ã¸Ã¥ÃÃÃ ]+[A-Za-zÃ¦Ã¸Ã¥ÃÃÃ]|[\d]+)[ \t]*[-/][ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*$/,s=/^[ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*[ \t]*[,]([A-Za-zÃ¦Ã¸Ã¥ÃÃÃ ]*)$/,l=/^[ \t]*([\d]+)[ \t]*[/][ \t]*([\d]+)[ \t]*[ \t]*$/;return i.test(t)?(n=i.exec(t),r.municipality=n[1].trim(),r.gnr=n[2],r.bnr=n[3],r.numbers=[r.gnr,r.bnr],e=r.municipality+"-"+r.numbers.join("/")):o.test(t)?(n=o.exec(t),r.municipality=n[1].trim(),r.gnr=n[2],r.bnr=n[3],r.fnr=n[4],r.numbers=[r.gnr,r.bnr,r.fnr],e=r.municipality+"-"+r.numbers.join("/")):a.test(t)?(n=a.exec(t),r.municipality=n[1].trim(),r.gnr=n[2],r.bnr=n[3],r.fnr=n[4],r.snr=n[5],r.numbers=[r.gnr,r.bnr,r.fnr,r.snr],e=r.municipality+"-"+r.numbers.join("/")):s.test(t)?(n=s.exec(t),r.gnr=n[1],r.bnr=n[2],r.municipality=n[3].trim(),r.numbers=[r.gnr,r.bnr],e=r.municipality+"-"+r.numbers.join("/")):l.test(t)?(n=l.exec(t),r.gnr=n[1],r.bnr=n[2],r.municipality="",r.numbers=[r.gnr,r.bnr],e=t):e=t,{parsedQuery:e,parsedInput:r}},o=["seEiendom","ssrFakta","koordTrans","lagTurkart","lagNodplakat"],a=!1;return{getSourceDict:function(){return r},parseInput:function(t){return i(t)},getServiceDict:function(n){return function(n){n=i(n).parsedQuery;var r={};return r.ssr={url:t.generateSearchStedsnavnUrl(n,e,15),format:"json",source:"ssr",epsg:"EPSG:4258",nameID:"name",latID:"lat",lonID:"lon",kommuneID:"kommune",husnummerID:"HUSNR",husnummerBokstav:!1,navnetypeID:"navneobjekttype"},r.matrikkeladresse={url:t.generateSearchMatrikkelAdresseUrl(n),format:"json",source:"matrikkeladresse",epsg:"EPSG:4326",nameID:"adressenavn",latID:"lat",lonID:"lon",kommuneID:"kommunenavn",husnummerID:"nummer",husnummerBokstav:"bokstav",navnetypeID:"type"},r.matrikkelnummer={url:t.generateSearchMatrikkelNummerUrl(n),format:"json",source:"matrikkelnummer",epsg:"EPSG:25832",nameID:"NAVN",latID:"LATITUDE",lonID:"LONGITUDE",kommuneID:"KOMMUNENAVN",husnummerID:!1,husnummerBokstav:!1,navnetypeID:!1},/\d/.test(n)?r.adresse={url:t.generateAdresseSokUrl(n),format:"json",source:"adresse",epsg:"EPSG:4326",nameID:"adressenavn",latID:"lat",lonID:"lon",kommuneID:"kommunenavn",husnummerID:"nummer",husnummerBokstav:"bokstav",navnetypeID:"type"}:r.matrikkelveg={url:t.generateSearchMatrikkelVegUrl(n),format:"json",source:"matrikkelveg",epsg:"EPSG:25832",nameID:"NAVN",latID:"LATITUDE",lonID:"LONGITUDE",kommuneID:"KOMMUNENAVN",husnummerID:"HUSNUMMER",husnummerBokstav:!1,navnetypeID:!1},r}(n)},getAvailableUTMZones:function(){return n},getSearchOptionsOrder:function(){return o},getMapEpsg:function(){return"EPSG:25833"},getPlacenameHitsPerPage:function(){return 15},resetPlacenamePage:function(){return e=1},decreasePlacenamePage:function(){return e>1&&e--,e},increasePlacenamePage:function(){return++e},getPlacenamePage:function(){return e},setPlacenamePage:function(t){e=t},constructPoint:function(t,e,n,r){return ol.proj.transform([Number(e),Number(t)],n,r)},setShowEiendomMarkering:function(t){a=t},getShowEiendomMarkering:function(){return a}}}]),angular.module("searchResultsPanel",[]),angular.module("searchResultsPanel").directive("searchResultsPanel",["searchPanelFactory","mainAppService","$http","$window",function(t,e,n,r){return{templateUrl:"components/transclusions/searchPanel/searchResultsPanel/searchResultsPanel.html",restrict:"A",link:function(i){i.husnummerChanged=function(t,r){t.activeHusnum=r,i.activeHusnum=r;var a=t.name+" "+r+","+t.kommune,s=e.generateSearchMatrikkelAdresseUrl(a);n.get(s).then((function(t){o(t.data.adresser)}))};var o=function(e){e=e.filter((function(t){return t.nummer==i.activeHusnum}))[0];var n="matrikkeladresse",r=t.getServiceDict()[n],o=e.representasjonspunkt.epsg,a=e.representasjonspunkt.lat,s=e.representasjonspunkt.lon,l=e[r.kommuneID],u=e[r.nameID],c=t.getMapEpsg(),h=t.constructPoint(a,s,o,c),f={name:i.capitalizeName(u.toLowerCase()),point:h,format:r.format,source:n,kommune:i.fixNames(l)};i.showSearchOptionsPanel(),i.showQueryPoint(f)},a=function(){$(document).ready((function(){r.matchMedia("only screen and (max-width: 760px)").matches?s(120):s(220)}))};function s(t){for(var e=r.innerHeight,n=Math.floor(e-t),i=document.getElementsByClassName("search-content"),o=0;o<i.length;o++){i[o].style.maxHeight=n+"px"}}i.isIosDevice=function(){return!(!navigator.userAgent.match(/iPhone/i)&&!navigator.userAgent.match(/iPad/i))},$(document).ready((function(){$(r).resize(a),a()}))}}}]),angular.module("searchSeEiendomPanel",["tools"]),angular.module("searchSeEiendomPanel").controller("searchSeEiendomPanelController",[function(){}]),angular.module("searchSeEiendomPanel").directive("searchSeEiendomPanel",["$window","searchPanelFactory","$location",function(t,e,n){return{templateUrl:"components/transclusions/searchPanel/searchSeEiendomPanel/searchSeEiendomPanel.html",restrict:"A",controller:"searchSeEiendomPanelController",link:function(r){r.openEindomInformasjon=function(){t.open(r.searchOptionsDict.seEiendom.url,"_blank")};var i=function(){$(document).ready((function(){t.matchMedia("only screen and (max-width: 760px)").matches?o(120):o(220)}))};function o(e){for(var n=t.innerHeight,r=Math.floor(n-e),i=document.getElementsByClassName("search-content"),o=0;o<i.length;o++){i[o].style.maxHeight=r+"px"}}var a=function(t){n.search().showSelection=!0===t?"true":"false",n.search(angular.extend(n.search(),n.search())).replace()};r.eiendomMarkering=function(){e.setShowEiendomMarkering(r.showSelectionCheckbox),a(r.showSelectionCheckbox)},r.selectResult=function(t){var e=r.searchOptionsDict.seEiendom.allResults;r.searchOptionsDict.seEiendom=t,r.searchOptionsDict.seEiendom.allResults=e,r.showSelection(),r.fetchAddressInfoForMatrikkel()};r.hideEiendomMarkering=function(){e.setShowEiendomMarkering(!1)},r.showSelectionCheckbox=e.getShowEiendomMarkering(),a(r.showSelectionCheckbox),$(document).ready((function(){$(t).resize(i),i()})),r.isGardsnrGreaterThanZero=function(){return parseInt(r.searchOptionsDict.seEiendom.gardsnr,10)>0}}}}]),angular.module("searchSeHavnivaaPanel",[]),angular.module("searchSeHavnivaaPanel").controller("searchSeHavnivaaPanelController",[function(){}]),angular.module("searchSeHavnivaaPanel").directive("searchSeHavnivaaPanel",[function(){return{templateUrl:"components/transclusions/searchPanel/searchSeHavnivaaPanel/searchSeHavnivaaPanel.html",restrict:"A",link:function(){}}}]),angular.module("searchStedsnavnPanel",[]),angular.module("searchStedsnavnPanel").directive("searchStedsnavnPanel",["toolsFactory","ISY.EventHandler","$http","mainAppService","$window","ISY.MapAPI.Map",function(t,e,n,r,i,o){return{templateUrl:"components/transclusions/searchPanel/searchStedsnavnPanel/searchStedsnavnPanel.html",restrict:"A",link:function(t){t.generateStedsnavnUrl=function(t){i.open(r.generateFaktaarkUrl(t),"_blank")},t.mouseOver=function(t){var e=[t["Ã¸st"],t.nord];o.RemoveInfoMarker(),o.ShowInfoMarker(e)};var e=function(){$(document).ready((function(){i.matchMedia("only screen and (max-width: 760px)").matches?n(120):n(220)}))};function n(t){for(var e=i.innerHeight,n=Math.floor(e-t),r=document.getElementsByClassName("search-content"),o=0;o<r.length;o++){r[o].style.maxHeight=n+"px"}}t.isIosDevice=function(){return!(!navigator.userAgent.match(/iPhone/i)&&!navigator.userAgent.match(/iPad/i))},$(document).ready((function(){$(i).resize(e),e()}))}}}]),angular.module("tools",[]),angular.module("tools").factory("toolsFactory",["ISY.MapAPI.Tools.ToolFactory","isyTranslateFactory",function(t,e){var n=[{id:"PointSelect",title:"PointSelect_title",hover:"PointSelect_hover",sortOrder:0,isSelected:!0,cursorStyle:"default"},{id:"BoxSelect",title:"BoxSelect_title",hover:"BoxSelect_hover",sortOrder:1,isSelected:!1,cursorStyle:"default"},{id:"FeatureHoverInfo",title:"FeatureHoverInfo_title",hover:"FeatureHoverInfo_hover",sortOrder:2,isSelected:!1,cursorStyle:"default"},{id:"FeatureEditor",title:"FeatureEditor_title",hover:"FeatureEidtor_hover",sortOrder:3,isSelected:!1,cursorStyle:"crosshair"},{id:"DefaultZoom",title:"DefaultZoom_title",hover:"DefaultZoom_hover",sortOrder:4,isSelected:!1,cursorStyle:"zoom-in"},{id:"MeasureLine",title:"MeasureLine_title",hover:"MeasureLine_hover",sortOrder:6,isSelected:!1,cursorStyle:"default"},{id:"Measure",title:"Measure_title",hover:"Measure_hover",sortOrder:5,isSelected:!1,cursorStyle:"default"},{id:"DrawFeature",title:"DrawFeature_title",hover:"DrawFeature_hover",sortOrder:7,isSelected:!1,cursorStyle:"default",additionalOptions:{type:"Point"}},{id:"AddLayerFeature",title:"AddLayerFeature_title",hover:"AddLayerFeature_hover",sortOrder:8,isSelected:!1,cursorStyle:"default",additionalOptions:{type:[{type:"Point",active:!0},{type:"Line",active:!1},{type:"Polygon",active:!1}],snappingFeatures:[]}},{id:"ModifyFeature",title:"ModifyFeature_title",hover:"ModifyFeature_hover",sortOrder:9,isSelected:!1,cursorStyle:"default",additionalOptions:{type:[{type:"Point",active:!0},{type:"Line",active:!1},{type:"Polygon",active:!1}],features:[],snappingFeatures:[]}},{id:"PrintBox",title:"PrintBox_title",hover:"PrintBox_hover",sortOrder:10,isSelected:!1,cursorStyle:"default",additionalOptions:{scale:25e3}},{id:"PrintBoxSelect",title:"PrintBoxSelect_title",hover:"PrintBoxSelect_hover",sortOrder:10,isSelected:!1,cursorStyle:"default",additionalOptions:{scale:25e3}},{id:"AddLayerUrl",title:"AddLayerUrl_title",hover:"AddLayerUrl_hover",sortOrder:10,isSelected:!1,cursorStyle:"default",additionalOptions:{}}],r=!1,i=function(t){for(var e=0;e<n.length;e++)n[e].isSelected=n[e].id===t};return{initToolbar:function(){t.SetupTools(n)},getTools:function(){return n},getToolById:function(t){for(var e=0;e<n.length;e++)if(n[e].id===t)return n[e]},getSelectedTool:function(){for(var t=0;t<n.length;t++)if(!0===n[t].isSelected)return n[t]},setSelectTool:function(t){i(t)},activateTool:function(n){if(void 0!==n){if("MeasureLine"===n.id||"Measure"===n.id||"AddLayerFeature"===n.id||"ModifyFeature"===n.id){var r={};if("AddLayerFeature"===n.id)r={toolType:this.getActiveFeatureType("AddLayerFeature"),snappingFeatures:n.snappingFeatures,features:n.additionalOptions.features};else"ModifyFeature"===n.id?r={features:n.features,snappingFeatures:n.snappingFeatures}:"AddLayerUrl"===n.id&&(r={url:n.additionalOptions.url,style:n.additionalOptions.style,geometryName:n.additionalOptions.geometryName,show:n.additionalOptions.show});r.translate=e.getTranslateOptionsByActiveLanguage(),t.AdditionalToolOptions(r)}else n.additionalOptions&&t.AdditionalToolOptions(n.additionalOptions);t.ActivateTool(n.id),n.isSelected=!0}i(n.id);var o=document.getElementById("mapDiv");o&&(o.style.cursor=n.cursorStyle)},deactivateTool:function(e){void 0!==e&&(t.DeactivateTool(e.id),e.isSelected=!1)},deactivatAllTools:function(){for(var e=0;e<n.length;e++)t.DeactivateTool(n[e].id),n[e].isSelected=!1},getMeasureTools:function(){for(var t=[],e=0;e<n.length;e++)"Measure"!==n[e].id&&"MeasureLine"!==n[e].id||t.push(n[e]);return t},setOfflineStatus:function(t){r=t},getOfflineStatus:function(){return r},setAddFeatureType:function(t,e){for(var n=this.getToolById(e),r=0;r<n.additionalOptions.type.length;r++){var i=n.additionalOptions.type[r];i.active=i.type===t}},getActiveFeatureType:function(t){for(var e=this.getToolById(t),n=0;n<e.additionalOptions.type.length;n++){var r=e.additionalOptions.type[n];if(r.active)return r.type}},setFeatures:function(t,e){this.getToolById(e).features=t},setSnappingFeatures:function(t,e){this.getToolById(e).snappingFeatures=t},val2key:function(t,e){for(var n in e)if(e[n]==t)return n;return!1}}}]),angular.module("tools").factory("toolsElevationProfileFactory",["mainAppService","$http","$q",function(t,e,n){var r,i;e.defaults.headers.post={};var o=function(n){e.get(t.generateElevationChartServiceUrl(i)).then((function(t){var e=jQuery.parseXML(t.data),i=xml.xmlToJSON(e);i.ExecuteResponse.Status.ProcessFailed||(r=i.ExecuteResponse.ProcessOutputs.Output.Data.ComplexData.Text,n.resolve(r))}),(function(t){}))};return{generateElevationProfile:function(a){return function(a){var s=n.defer();return e.post(t.uploadGpxFileService(),a).then((function(t){r=void 0,i=t.data,o(s)}),(function(t){})),s}(a).promise},getElevationImage:function(){return r}}}]),angular.module("tools").factory("toolsEmergencyPosterFactory",["mainAppService","ISY.MapAPI.Map",function(t,e){var n,r={locationName:"",position1:"",position2:"",street:"",place:"",matrikkel:"",utm:"",posDez:"",map:""},i={service:"WMS",request:"GetMap",CRS:"EPSG:25833",FORMAT:"image/jpeg",BGCOLOR:"0xFFFFFF",TRANSPARENT:"false",LAYERS:"topo",VERSION:"1.3.0",WIDTH:"1145",HEIGHT:"660",BBOX:""};return{generateEmergancyPoster:function(){e.SetCenter({lon:n[0],lat:n[1],zoom:10});var o=e.GetExtent();return i.BBOX=o[0]+","+o[1]+","+o[2]+","+o[3],r.map=t.generateMapLinkServiceUrl(i),t.generateEmergencyPosterServiceUrl(r)},getEmergencyPosterConfig:function(){return r},updateEmergencyPosterConfig:function(t){r=t},setPosterPosition:function(t){n=t}}}]),angular.module("tools").factory("toolsPrint",["mainAppService","$http","$q",function(t,e,n){e.defaults.headers.post={};var r=function(t,e,r,i){void 0===i&&(i="application/json");var o=n.defer();return $.ajax({type:t,url:e,async:!0,cache:!1,contentType:i,data:r,success:function(t){o.resolve(t)},error:function(t){o.reject(t)}}),o.promise};return{getPrintCapabilities:function(e){return function(e){var n=t.generateUrlPrintCapabilities(e);return r("GET",n)}(e)},uploadDataForPrint:function(e,n){return function(e,n){var i=t.generatePrintUrl(e),o=JSON.stringify(n);return r("POST",i,o)}(e,n)},getStatusPrint:function(e){return function(e){var n=t.generateStatusPrintDownloadUrl(e);return r("GET",n)}(e)},cancelPrint:function(e){return function(e){var n=t.generateCancelPrintUrl(e);return r("DELETE",n,void 0,"text")}(e)}}}]),angular.module("mainApp",["templates-app","angularUtils.directives.dirPagination","ISY.Angular","isyTranslate","mapOverlays","tools","localStorage","mapLayout","mapOverlaysLayout","ngSanitize"]),angular.module("mainApp").controller("mainAppController",["$scope","ISY.MapAPI.Map","mainAppFactory","toolsFactory","ISY.EventHandler","isyTranslateFactory","$location","mainMenuPanelFactory","localStorageFactory","$translate","$timeout","$window",function(t,e,n,r,i,a,s,l,u,c,h,f){function p(){r.initToolbar()}var d=function(t){if(!angular.equals(t,s.search())){var e=angular.extend(s.search(),t);s.search(e).replace(),l.setProjectById(s.search().project)}};function g(e){u.set("lat",s.search().lat),u.set("lon",s.search().lon),u.set("zoom",s.search().zoom),h((function(){t.$apply((function(){d(e)}),0)}),10)}function m(e){u.set("lat",s.search().lat),u.set("lon",s.search().lon),u.set("zoom",s.search().zoom),h((function(){t.$apply((function(){d(e)}),0)}),5)}function v(){var t=s.search();if(void 0!==t.zoom&&void 0!==t.lat&&void 0!==t.lon&&null!==u.get("zoom")&&null!==u.get("lat")&&null!==u.get("lon")){var r={lon:u.get("lon"),lat:u.get("lat"),zoom:u.get("zoom")};if(r.lon>32.88&&r.lat>-16.1&&r.lon<84.17&&r.lat<39.65){var i=r.lon;r.lon=r.lat,r.lat=i,r.epsg="EPSG:4258"}e.SetCenter(r)}void 0===t.layers&&void 0===t.l||n.setInitLayersInUrl(t.layers||t.l);var o=angular.extend(s.search(),t);s.search(o).replace(),h((function(){var t,n;t=s.search(),(n=t.markerLon&&t.markerLat?[t.markerLon,t.markerLat]:void 0)&&e.ShowInfoMarker(n)}),500)}function y(){var t=n.getInitLayersInUrl();if(void 0!==t&&""!==t){for(var r=t.split(","),i=e.GetOverlayLayers(),o=e.GetBaseLayers(),a=0;a<i.length;a++){i[a].isVisible=!1,e.HideLayer(i[a]);for(var s=0;s<r.length;s++)parseInt(r[s],10)===i[a].id&&(i[a].isVisible=!0,e.ShowLayer(i[a]))}for(var l=0;l<r.length;l++)for(var u=0;u<o.length;u++)parseInt(r[l],10)===o[u].id&&e.SetBaseLayer(o[u])}}t.resetMainAppFactory=function(){n.resetMainAppFactory()},t.reInitMap=function(){n.updateMapConfig();var r=n.getMapConfig();e.ReInit(r),v(),y(),t.$broadcast("initDraw"),t.$broadcast("initBaseLayers"),t.$broadcast("reInitSearchPanel"),t.deactivateDrawFeatureTool(t.GeoJSON),t.openNav()},t.initMapLayout=function(){var r;null!==(r=u.get("activeLanguage"))&&(a.setCurrentLanguage(r),e.SetTranslateOptions(a.getTranslateOptionsByActiveLanguage()),c.use(r));var i=s.search(),o=s.hash().split("/");if(o.length>=3){for(i.zoom=o[0],i.lon=o[1],i.lat=o[2],index=3;index<o.length;index+=1)if("l"===o[index].charAt(0))i.drawing=o[index+2],index+=2;s.url(s.$$url.replace("#"+encodeURIComponent(s.hash()),"")),s.search(i).replace()}void 0===i.type||"1"!==i.type?(n.projectName(),t.showMapOverlaysLayout()):t.showMapLayout()},t.initMainPage=function(){i.RegisterEvent(o.Events.EventTypes.MapConfigLoaded,p),i.RegisterEvent(o.Events.EventTypes.MapMoveend,g),i.RegisterEvent(o.Events.EventTypes.ChangeLayers,m),e.SetTranslateOptions(a.getTranslateOptionsByActiveLanguage()),e.SetImageInfoMarker("assets/img/pin-md-orange.png"),n.updateMapConfig();var t=n.getMapConfig();e.Init("mapDiv",t),e.AddZoom(),e.AddScaleLine(),v(),y()},angular.element(document).ready((function(){t.initMainPage(),t.deactivateDrawFeatureTool()})),t.showMapLayout=function(){t.mapTypeLayout="mapLayout"},t.showMapOverlaysLayout=function(){t.mapTypeLayout="mapOverlaysLayout"},t.mapTypeLayout="mapOverlaysLayout",t.isDrawActivated=function(){return!!t.drawActivated||(t.drawActivated=!0,!1)},t.setGeoJSON=function(e){t.GeoJSON=e},t.drawActivated=!1,t.initDrawFeatureTool=function(){var t=r.getToolById("DrawFeature");r.activateTool(t)},t.deactivateDrawFeatureTool=function(){var e=r.getToolById("DrawFeature");r.deactivateTool(e),t.drawActivated=!1},t.deactivateAddLayerFeatureTool=function(){var t=r.getToolById("AddLayerFeature");r.deactivateTool(t)},t.openNav=function(){f.matchMedia("only screen and (max-width: 760px)").matches?(document.getElementById("mySidenav").style.width="320px",document.getElementById("sideMenuPosition").style.width="320px"):(document.getElementById("mySidenav").style.width="395px",document.getElementById("sideMenuPosition").style.width="395px"),document.getElementById("mySidenav").style.overflowY="auto",n.setMainMenuStatus(!0),u.set("mainMenuIsOpen",!0)},t.closeNav=function(){document.getElementById("mySidenav")&&document.getElementById("main")&&(document.getElementById("mySidenav").style.width="0",h((function(){document.getElementById("sideMenuPosition").style.width="0"}),400),document.getElementById("mySidenav").style.overflowY="hidden",u.set("mainMenuIsOpen",!1),n.setMainMenuStatus(!1))}}]),angular.module("mainApp").directive("mainApp",["toolsFactory","mainAppFactory",function(t,e){return{templateUrl:"mainAppBody.html",controller:"mainAppController",link:function(n,r){r.scope&&(r=$(r));var i=t.getToolById("AddLayerFeature"),o=t.getToolById("MeasureLine"),a=t.getToolById("Measure"),s=t.getToolById("PointSelect"),l=t.getToolById("PrintBox"),u=t.getToolById("PrintBoxSelect"),c=t.getToolById("DrawFeature"),h=t.getToolById("AddLayerUrl");r.on("pointerdown mousedown touchstart",(function(r){if(i.isSelected||o.isSelected||a.isSelected||l.isSelected||u.isSelected||c.isSelected||h.isSelected||t.activateTool(s),e.isMainMenuOpen()){var f=r.path;void 0===f&&(f=function(t){var e=[],n=t.target;for(;n;)e.push(n),n=n.parentElement;-1===e.indexOf(window)&&-1===e.indexOf(document)&&e.push(document);-1===e.indexOf(window)&&e.push(window);return e}(r));for(var p=0;p<f.length;p++)"mapDiv"===f[p].id&&n.closeNav()}}))}}}]),angular.module("mainApp").factory("mainAppFactory",["ISY.MapAPI.Map","$location","ISY.Repository","$translate","translations",function(t,e,n,r,i){var a,s,l,u,c="",h=[],f=!1,p=!1,d={instance:"norgeskart3",configurl:"https://norgeskart.no/config"},g=[{SiteTitle:"tilgjengelighet",ProjectName:"tilgjengelighet",HeaderIcon:"",HeaderTitle:"tilgjengelighet"},{SiteTitle:"fastmerker",ProjectName:"fastmerker",HeaderIcon:"",HeaderTitle:"fastmerker"},{SiteTitle:"nrl",ProjectName:"nrl",HeaderIcon:"",HeaderTitle:"nrl"},{SiteTitle:"seeiendom",ProjectName:"seeiendom",HeaderIcon:"",HeaderTitle:"seeiendom"},{SiteTitle:"ssr",ProjectName:"ssr",HeaderIcon:"",HeaderTitle:"ssr"},{SiteTitle:"dekning",ProjectName:"dekning",HeaderIcon:"",HeaderTitle:"dekning"},{SiteTitle:"arbeidsgiveravgiftsoner",ProjectName:"arbeidsgiveravgiftsoner",HeaderIcon:"",HeaderTitle:"arbeidsgiveravgiftsoner"}],m={name:"default config",useCategories:!0,showProgressBar:!0,showMousePosition:!0,comment:"",numZoomLevels:19,newMaxRes:21664,extent:[-2e6,35e5,3545984,9045984],extentUnits:"m",proxyHost:"",searchHost:"",tokenHost:"",ticketHost:"",searchpointzoom:12,groups:[],languages:{no:{},en:{}},layers:[{id:"1992",isBaseLayer:!0,subLayers:[{title:"norges_grunnkart",source:"WMS",url:["https://opencache.statkart.no/gatekeeper/gk/gk.open?LAYERS=norges_grunnkart"],gatekeeper:!0,name:"norges_grunnkart",format:"image/png",coordinate_system:"EPSG:32632",id:"1992",tiled:!0}],visibleOnLoad:!1}],basemap:{url:["https://cache.kartverket.no/europa_forenklet/v1/wmts/1.0.0/"],name:"europa_forenklet",layers:"europa_forenklet",format:"image/png",matrixPrefix:!1,matrixSet:"utm33n",options:{isbaselayer:"true",singletile:"false",visibility:"true"}},zoom:3,center:[570130,7032300],hoverOptions:{multiSelect:!0,mmultiSelect:!1},coordinate_system:"EPSG:32632",onlyOneGroup:!1,isOffline:!1},v={config:{project:{lat:7197864,lon:396722,mapepsg:"EPSG:25833",zoom:3,mapbackgroundcolor:"#FFFFFF",displaycenterepsgcode:"EPSG:25833",displayCenter:"396722,7197864",displayprojectionepsgcode:"EPSG:25833",isygatekeeper:"https://norgeskart.no/ws/gatekeeper.py?key=73e029c3632c49bb1586fc57a60fb701kv",tickethost:"https://norgeskart.no/ws/esk.py?wms.ecc_enc",name:"norgeskart"},wmts:[{type:"map",name:"landkart",url:"https://cache.kartverket.no/topo/v1/wmts/1.0.0/|https://cache.kartverket.no/topo/v1/wmts/1.0.0/",params:{layers:"topo",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.topo",options:{isbaselayer:"true",singletile:"false",visibility:"true"},thumbnail:"land"},{type:"map",gatekeeper:"true",name:"flybilder",url:"https://gatekeeper1.geonorge.no/BaatGatekeeper/gk/gk.nib_utm33_wmts_v2?|https://gatekeeper1.geonorge.no/BaatGatekeeper/gk/gk.nib_utm33_wmts_v2?",params:{layers:"Nibcache_UTM33_EUREF89",format:"image/png"},matrixset:"default028mm",guid:"0.ortofoto",options:{isbaselayer:"true",singletile:"false",visibility:"false"},thumbnail:"aerial"},{type:"map",name:"rasterkart",url:"https://cache.kartverket.no/toporaster/v1/wmts/1.0.0/|https://cache.kartverket.no/toporaster/v1/wmts/1.0.0/",params:{layers:"toporaster",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.toporaster",options:{isbaselayer:"true",singletile:"false",visibility:"false"},thumbnail:"raster"},{type:"map",name:"gratone",url:"https://cache.kartverket.no/topograatone/v1/wmts/1.0.0/|https://cache.kartverket.no/topograatone/v1/wmts/1.0.0/",params:{layers:"topograatone",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.topograatone",options:{isbaselayer:"true",singletile:"false",visibility:"false"},thumbnail:"grey"},{type:"map",name:"enkel",url:"https://cache.kartverket.no/test/wmts|https://cache.kartverket.no/test/wmts",params:{layers:"norges_grunnkart",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.norges_grunnkart",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"terreng",url:"https://cache.kartverket.no/test/wmts|https://cache.kartverket.no/test/wmts",params:{layers:"terreng_norgeskart",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.terreng_norgeskart",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"sjokart",url:"https://cache.kartverket.no/test/wmts|https://cache.kartverket.no/test/wmts",params:{layers:"sjokartraster",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.sjokartraster",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"jan_mayen",url:"https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_JanMayen_WMTS_25833/MapServer/WMTS?",params:{layers:"Basisdata_NP_Basiskart_JanMayen_WMTS_25833",format:"image/png"},matrixset:"default028mm",wmtsextent:"-393783.2540000008,7978220.98008712,-276963.7430000013,8084965.524000007",getcapabilities:"true",guid:"2.Basisdata_NP_Basiskart_JanMayen_WMTS_25833",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"svalbard",url:"https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_Svalbard_WMTS_25833/MapServer/WMTS?",params:{layers:"Basisdata_NP_Basiskart_Svalbard_WMTS_25833",format:"image/png"},matrixset:"default028mm",wmtsextent:"369976.3899489096,8221306.539890718,878234.7199568129,9010718.76990194",getcapabilities:"true",guid:"2.Basisdata_NP_Basiskart_Svalbard_WMTS_25833",options:{isbaselayer:"true",singletile:"false",visibility:"false"}}],wms:[{type:"overlay",Layers:{Layer:{name:"cells",queryable:"false",title:"Elektron. SjÃ¸kart"}},ticket:"true",name:"elektron_sjokart",url:"https://wms.geonorge.no/skwms1/wms.ecc_enc",params:{layers:"cells",format:"image/png"},guid:"0.cells",options:{isbaselayer:"true",singletile:"true",visibility:"false"}},{type:"overlay",Layers:{Layer:{name:"n5raster_foerstegang_metadata,n5raster_foerstegang",queryable:"false",title:"Ãkâ1âutgÃ¥ve"}},gatekeeper:"true",name:"ok_1_utgave",url:"https://wms.geonorge.no/skwms1/wms.n5raster2",params:{layers:"n5raster_foerstegang_metadata,n5raster_foerstegang",format:"image/png"},guid:"0.n5raster_foerstegang_metadata,n5raster_foerstegang",options:{isbaselayer:"true",singletile:"true",visibility:"false"}},{type:"overlay",gatekeeper:"true",name:"fotruter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Fotrute",format:"image/png"},guid:"5.Fotrute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"Ruteinfopunkt",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Ruteinfopunkt",format:"image/png"},guid:"5.Fotrute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"objtype",alias:"Rutetype"},{name:"informasjon"},{name:"vedlikeholdsansvarlig"},{name:"ruteinfoid",alias:"Rutenummer"},{name:"description",alias:"tilrettelegging"}]}},{type:"overlay",gatekeeper:"true",name:"skiloyper",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Skiloype",format:"image/png"},guid:"5.Skiloype",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"sykkelruter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Sykkelrute",format:"image/png"},guid:"5.Sykkelrute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"annenruter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"AnnenRute",format:"image/png"},guid:"5.AnnenRute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"historisk_ferdselsrute",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Historisk",format:"image/png"},guid:"6.Historisk",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"kyststi",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Kyststi",format:"image/png"},guid:"6.Kyststi",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"kultursti",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Kultursti",format:"image/png"},guid:"6.Kultursti",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"natursti",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Natursti",format:"image/png"},guid:"6.Natursti",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"trimloype",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Trimloype",format:"image/png"},guid:"6.Trimloype",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"fotrute_type_ikke_angitt",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Fotrutetypeikkeangitt",format:"image/png"},guid:"6.Fotrutetypeikkeangitt",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"Maskinpreparert",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Maskinpreparert",format:"image/png"},guid:"7.Maskinpreparert",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"SnÃ¸skuter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Snoskuter",format:"image/png"},guid:"7.SnÃ¸skuter",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"Upreparert",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Upreparert",format:"image/png"},guid:"7.Upreparert",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"Preparering ikke angitt",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Ingen_info",format:"image/png"},guid:"7.Preparering ikke angitt",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"Markagrensen",url:"https://wms.geonorge.no/skwms1/wms.markagrensen?",legendurl:"https://wms.geonorge.no/skwms1/wms.markagrensen?",groupid:3,params:{layers:"Markagrensen",format:"image/png"},guid:"3.Markagrensen",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"lovnavn",alias:"Lovnavn"},{name:"lovid",alias:"Lov id"},{name:"objid",alias:"Objekt-id"}]}}],maplayer:[{index:3,name:"fakta",groupid:3},{index:5,name:"tur_og_friluftsruter",groupid:5},{index:6,name:"fotrutetype",groupid:6},{index:7,name:"SkilÃ¸ypepreparering",groupid:7}],vector:[{type:"overlay",name:"kommunenes_fjelltopper",url:"https://norgeskart.no/json/tema/kommunefjell/Kommunefjell2018.geojson",epsg:"EPSG:25833",groupid:3,params:{format:"application/json"},guid:"3.Kommunenes fjelltopper",options:{visibility:"false"},style:{regularshape:{fill:{color:"#000000"},points:3,radius:9}}}],mapbounds:{mapbound:[{epsg:"EPSG:23031",extent:"-1500000.0, 3500000.0, 4045984.0, 9045984.0"},{epsg:"EPSG:23032",extent:"-2000000.0, 3500000.0, 3545984.0, 9045984.0"},{epsg:"EPSG:23033",extent:"-2500000.0, 3500000.0, 3045984.0, 9045984.0"},{epsg:"EPSG:23034",extent:"-3000000.0, 3500000.0, 2545984.0, 9045984.0"},{epsg:"EPSG:23035",extent:"-3500000.0, 3500000.0, 2045984.0, 9045984.0"},{epsg:"EPSG:23036",extent:"-4000000.0, 3500000.0, 1545984.0, 9045984.0"},{epsg:"EPSG:25831",extent:"-1500000.0, 3500000.0, 4045984.0, 9045984.0"},{epsg:"EPSG:25832",extent:"-2000000.0, 3500000.0, 3545984.0, 9045984.0"},{epsg:"EPSG:25833",extent:"-2500000.0, 3500000.0, 3045984.0, 9045984.0"},{epsg:"EPSG:25834",extent:"-3000000.0, 3500000.0, 2545984.0, 9045984.0"},{epsg:"EPSG:25835",extent:"-3500000.0, 3500000.0, 2045984.0, 9045984.0"},{epsg:"EPSG:25836",extent:"-4000000.0, 3500000.0, 1545984.0, 9045984.0"},{epsg:"EPSG:32631",extent:"-1500000.0, 3500000.0, 4045984.0, 9045984.0"},{epsg:"EPSG:32632",extent:"-2000000.0, 3500000.0, 3545984.0, 9045984.0"},{epsg:"EPSG:25833",extent:"-2500000.0, 3500000.0, 3045984.0, 9045984.0"},{epsg:"EPSG:32634",extent:"-3000000.0, 3500000.0, 2545984.0, 9045984.0"},{epsg:"EPSG:32635",extent:"-3500000.0, 3500000.0, 2045984.0, 9045984.0"},{epsg:"EPSG:32636",extent:"-4000000.0, 3500000.0, 1545984.0, 9045984.0"},{epsg:"EPSG:4326",extent:"-180, -90, 180, 90"},{epsg:"EPSG:3857",extent:"-20037508.34, -20037508.34, 20037508.34, 20037508.34"},{epsg:"EPSG:900913",extent:"-20037508.34, -20037508.34, 20037508.34, 20037508.34"},{epsg:"EPSG:54009",extent:"-18000000.0, -9000000.0, 18000000.0, 9000000.0"},{epsg:"EPSG:3006",extent:"-1200000.0, 4700000.0, 2600000.0, 8500000.0"}]}}},y=function(n){a=n.configurl,void 0===(c=void 0!==e.search().application||void 0!==e.search().instance?void 0!==e.search().application?e.search().application:e.search().instance:n.instance)&&(c=""),a+="/";var r=w();r.length>0&&(u=r,a+=r.toLowerCase()+".json"),l=g||void 0,"norgeskart"===u?x(v,!1):void 0!==l&&void 0===u||t.GetConfigResource(a,"application/json",x)};var b=function(){var t=e.search();t.project="norgeskart";var n=angular.extend(e.search(),t);e.search(n).replace()},w=function(){var t=e.$$absUrl;if(t.indexOf("project=")>-1){var n=/project=([^&]+)&/.exec(t);return null===n&&null===(n=/project=([^]+)/.exec(t))&&b(),decodeURIComponent(n[1])}return b(),"norgeskart"};function x(t,a){if(void 0===t||void 0===t.config||void 0===t.config.mapbounds)return!1;(m=new o.Repository.MapConfig(angular.copy(m))).instance=c,m.projectName=w().toLowerCase(),m.isOffline=a,void 0!==t.config.project.isyauth&&(m.authHost=t.config.project.isyauth,m.authHost+="/authjson/"),void 0!==t.config.project.isyattachment&&(m.attachmentHost=t.config.project.isyattachment),void 0!==t.config.project.isyproxy&&(m.proxyHost=t.config.project.isyproxy+"/?"),void 0!==t.config.project.isypicklist&&(m.picklistHost=t.config.project.isypicklist,m.picklistHost+="/picklist/"),void 0!==t.config.project.isygatekeeper&&(m.tokenHost=t.config.project.isygatekeeper),void 0!==t.config.project.tickethost&&(m.ticketHost=t.config.project.tickethost),void 0!==t.config.project.isysearch&&(m.searchHost=t.config.project.isysearch),void 0!==t.config.project.codelists&&(m.codelists=t.config.project.codelists);var s,l=!1;return void 0!==e.search().isytoken&&"123"!==e.search().isytoken&&(m.zoom=parseFloat(e.search().zoom),m.center[0]=parseFloat(e.search().lon),m.center[1]=parseFloat(e.search().lat),l=!0),l||(m.zoom=t.config.project.zoom,m.center[0]=t.config.project.lon,m.center[1]=t.config.project.lat),void 0!==e.search().search&&(m.search=e.search().search,delete e.search().search),m.coordinate_system=t.config.project.mapepsg,m.mouseProjectionPrefix="EU89 UTM",m.headerTitle=t.config.project.headertitle,m.siteTitle=t.config.project.sitetitle,m.isy3dflyurl=t.config.project.isy3dflyurl,m.featureDict=t.config.featureDict,m.showMousePosition="true",S(t.config.mapbounds),_(t),E(t),s=m.languages,angular.extend(i.en,s.en),angular.extend(i.no,s.no),r.refresh(),n.GetMapConfigFromJson(m),!0}var S=function(t){if(void 0!==t){var e=function(t){for(var e,n=0;n<t.mapbound.length;n++)if((e=t.mapbound[n]).epsg===m.coordinate_system)return e}(t);void 0===e||(m.extent=e.extent.toString().split(",").map((function(t){return parseInt(t,10)})))}},_=function(t){void 0!==t.config.maplayer&&(void 0!==t.config.maplayer.length?t.config.maplayer.forEach((function(t){k(t.groupid,t.name,t.namelng,t.display)})):k(t.config.maplayer.groupid,t.config.maplayer.name,t.config.maplayer.namelng,t.config.maplayer.display))},k=function(t,e,n,r){var i=new o.Repository.Category({groupId:t,name:e,parentId:n,visibleOnLoad:I(r)});h.push(t),m.groups.push(i),m.languages.en[i.groupId]=e,m.languages.no[i.groupId]=n},E=function(t){void 0!==t.config.wmts&&(void 0!==t.config.wmts.length?t.config.wmts.forEach((function(t){O(t)})):O(t.config.wmts)),void 0!==t.config.wms&&(void 0!==t.config.wms.length?t.config.wms.forEach((function(t){T(t)})):T(t.config.wms)),void 0!==t.config.vector&&(void 0!==t.config.vector.length?t.config.vector.forEach((function(t){P(t)})):P(t.config.vector))},M=function(t,e,n){var r=function(t){var e=[];return t.forEach((function(t){-1===h.indexOf(t)&&e.push(t)})),e}(t);r.forEach((function(t){k(t,e,n)}))},T=function(t){C("WMS",t)},O=function(t){C("WMTS",t)},P=function(t){C("VECTOR",t)},C=function(t,e){var n=[999];void 0!==e.groupid?(n=e.groupid.toString().split(",").map((function(t){return parseInt(t,10)})),M(n,e.name,e.namelng)):"false"===e.options.isbaselayer&&!1===f&&(k(999,"Other layers","Andre lag"),f=!0);var r=new o.Domain.Layer({subLayers:[{title:e.name,name:e.params.layers||e.name,providerName:e.params.layers||e.name,source:t,gatekeeper:"true"===e.gatekeeper,ticket:e.ticket||!1,url:A(e.url),format:e.params.format,coordinate_system:e.epsg||m.coordinate_system,extent:m.extent,extentUnits:m.extentUnits,matrixPrefix:"true"===e.matrixprefix,matrixSet:e.matrixset,numZoomLevels:m.numZoomLevels,id:"VECTOR"==t?m.layers.length+8001:m.layers.length+1001,transparent:!0,layerIndex:-1,legendGraphicUrl:e.legendurl,minScale:e.options.minscale,maxScale:e.options.maxscale,sortingIndex:-1,featureInfo:{supportsGetFeatureInfo:0!=e.queryable||e.queryable,getFeatureInfoFormat:"application/vnd.ogc.gml",getFeatureInfoCrs:"",supportsGetFeature:!0,getFeatureBaseUrl:"",getFeatureFormat:"application/json",getFeatureCrs:"EPSG:4326",includedFields:e.includedfields,featureDict:m.featureDict},tiled:"true"!==e.options.singletile,crossOrigin:null,style:e.style,wmtsExtent:e.wmtsextent,getCapabilities:"true"===e.getcapabilities,styles:e.params.styles,minResolution:e.minresolution,maxResolution:e.maxresolution}],guid:e.guid,name:e.name,groupId:n,order:e.order,visibleOnLoad:"true"===e.options.visibility,id:"VECTOR"==t?m.layers.length+8001:m.layers.length+1001,isBaseLayer:"true"===e.options.isbaselayer,previewActive:!1,opacity:1,mapLayerIndex:-1,legendGraphicUrls:[],selectedLayerOpen:!1,thumbnail:e.thumbnail});m.layers.push(r),m.languages.en[r.id]=e.name,m.languages.no[r.id]=e.namelng},I=function(t){switch(typeof t){case"string":return"true"===t;case"boolean":return t}return!1},A=function(t){return t.indexOf("|")?t.split("|"):t};var L="searchOptionsPanel";return{getMapConfig:function(){return m},updateMapConfig:function(){y(d)},projectName:function(){w()},setInitLayersInUrl:function(t){s=t},getInitLayersInUrl:function(){return s},setMainMenuStatus:function(t){p=t},isMainMenuOpen:function(){return p},setActiveSearchPanel:function(t){L=t},getLastActiveSearchPanel:function(){return L},getVisibleLayers:function(){return m.layers.filter((function(t){return t.isVisible}))},resetMainAppFactory:function(){c="",a=void 0,s=void 0,l=void 0,void 0,h=[],f=!1,u=void 0,p=!1,d={instance:"norgeskart3",configurl:"https://norgeskart.no/config"},g=[{SiteTitle:"tilgjengelighet",ProjectName:"tilgjengelighet",HeaderIcon:"",HeaderTitle:"tilgjengelighet"},{SiteTitle:"fastmerker",ProjectName:"fastmerker",HeaderIcon:"",HeaderTitle:"fastmerker"},{SiteTitle:"nrl",ProjectName:"nrl",HeaderIcon:"",HeaderTitle:"nrl"},{SiteTitle:"norgeskart",ProjectName:"norgeskart",HeaderIcon:"",HeaderTitle:"norgeskart"},{SiteTitle:"ssr",ProjectName:"ssr",HeaderIcon:"",HeaderTitle:"ssr"},{SiteTitle:"dekning",ProjectName:"dekning",HeaderIcon:"",HeaderTitle:"dekning"},{SiteTitle:"arbeidsgiveravgiftsoner",ProjectName:"arbeidsgiveravgiftsoner",HeaderIcon:"",HeaderTitle:"arbeidsgiveravgiftsoner"}],m={name:"default config",useCategories:!0,showProgressBar:!0,showMousePosition:!0,comment:"",numZoomLevels:19,newMaxRes:21664,extent:[-2e6,35e5,3545984,9045984],extentUnits:"m",proxyHost:"",searchHost:"",tokenHost:"",ticketHost:"",searchpointzoom:12,groups:[],languages:{no:{},en:{}},layers:[{id:"1992",isBaseLayer:!0,subLayers:[{title:"norges_grunnkart",source:"WMS",url:["https://opencache.statkart.no/gatekeeper/gk/gk.open?LAYERS=norges_grunnkart"],gatekeeper:!0,name:"norges_grunnkart",format:"image/png",coordinate_system:"EPSG:32632",id:"1992",tiled:!0}],visibleOnLoad:!1}],zoom:3,center:[570130,7032300],hoverOptions:{multiSelect:!0,mmultiSelect:!1},coordinate_system:"EPSG:32632",onlyOneGroup:!1,isOffline:!1},v={config:{project:{lat:7197864,lon:396722,mapepsg:"EPSG:25833",zoom:4,mapbackgroundcolor:"#FFFFFF",displaycenterepsgcode:"EPSG:25833",displayCenter:"396722,7197864",displayprojectionepsgcode:"EPSG:25833",isygatekeeper:"https://norgeskart.no/ws/gatekeeper.py?key=73e029c3632c49bb1586fc57a60fb701kv",tickethost:"https://norgeskart.no/ws/esk.py?wms.ecc_enc",name:"norgeskart"},wmts:[{type:"map",name:"landkart",url:"https://cache.kartverket.no/topo/v1/wmts/1.0.0/|https://cache.kartverket.no/topo/v1/wmts/1.0.0/",params:{layers:"topo",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.topo",options:{isbaselayer:"true",singletile:"false",visibility:"true"},thumbnail:"land"},{type:"map",gatekeeper:"true",name:"flybilder",url:"https://gatekeeper1.geonorge.no/BaatGatekeeper/gk/gk.nib_utm33_wmts_v2?|https://gatekeeper1.geonorge.no/BaatGatekeeper/gk/gk.nib_utm33_wmts_v2?",params:{layers:"Nibcache_UTM33_EUREF89",format:"image/png"},matrixset:"default028mm",guid:"0.ortofoto",options:{isbaselayer:"true",singletile:"false",visibility:"false"},thumbnail:"aerial"},{type:"map",name:"rasterkart",url:"https://cache.kartverket.no/toporaster/v1/wmts/1.0.0/|https://cache.kartverket.no/toporaster/v1/wmts/1.0.0/",params:{layers:"toporaster",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.toporaster",options:{isbaselayer:"true",singletile:"false",visibility:"false"},thumbnail:"raster"},{type:"map",name:"gratone",url:"https://cache.kartverket.no/topograatone/v1/wmts/1.0.0/|https://cache.kartverket.no/topograatone/v1/wmts/1.0.0/",params:{layers:"topograatone",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.topograatone",options:{isbaselayer:"true",singletile:"false",visibility:"false"},thumbnail:"grey"},{type:"map",name:"enkel",url:"https://cache.kartverket.no/test/wmts|https://cache.kartverket.no/test/wmts",params:{layers:"norges_grunnkart",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.norges_grunnkart",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"terreng",url:"https://cache.kartverket.no/test/wmts|https://cache.kartverket.no/test/wmts",params:{layers:"terreng_norgeskart",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.terreng_norgeskart",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"sjokart",url:"https://cache.kartverket.no/test/wmts|https://cache.kartverket.no/test/wmts",params:{layers:"sjokartraster",format:"image/png"},matrixprefix:"false",matrixset:"utm33n",guid:"0.sjokartraster",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"jan_mayen",url:"https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_JanMayen_WMTS_25833/MapServer/WMTS?",params:{layers:"Basisdata_NP_Basiskart_JanMayen_WMTS_25833",format:"image/png"},matrixset:"default028mm",wmtsextent:"-393783.2540000008,7978220.98008712,-276963.7430000013,8084965.524000007",getcapabilities:"true",guid:"2.Basisdata_NP_Basiskart_JanMayen_WMTS_25833",options:{isbaselayer:"true",singletile:"false",visibility:"false"}},{type:"map",name:"svalbard",url:"https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_Svalbard_WMTS_25833/MapServer/WMTS?",params:{layers:"Basisdata_NP_Basiskart_Svalbard_WMTS_25833",format:"image/png"},matrixset:"default028mm",wmtsextent:"369976.3899489096,8221306.539890718,878234.7199568129,9010718.76990194",getcapabilities:"true",guid:"2.Basisdata_NP_Basiskart_Svalbard_WMTS_25833",options:{isbaselayer:"true",singletile:"false",visibility:"false"}}],wms:[{type:"overlay",Layers:{Layer:{name:"cells",queryable:"false",title:"Elektron. SjÃ¸kart"}},ticket:"true",name:"elektron_sjokart",url:"https://wms.geonorge.no/skwms1/wms.ecc_enc",params:{layers:"cells",format:"image/png"},guid:"0.cells",options:{isbaselayer:"true",singletile:"true",visibility:"false"}},{type:"overlay",Layers:{Layer:{name:"n5raster_foerstegang_metadata,n5raster_foerstegang",queryable:"false",title:"Ãkâ1âutgÃ¥ve"}},gatekeeper:"true",name:"ok_1_utgave",url:"https://wms.geonorge.no/skwms1/wms.n5raster2",params:{layers:"n5raster_foerstegang_metadata,n5raster_foerstegang",format:"image/png"},guid:"0.n5raster_foerstegang_metadata,n5raster_foerstegang",options:{isbaselayer:"true",singletile:"true",visibility:"false"}},{type:"overlay",gatekeeper:"true",name:"fotruter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Fotrute",format:"image/png"},guid:"5.Fotrute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"Ruteinfopunkt",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Ruteinfopunkt",format:"image/png"},guid:"5.Fotrute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"objtype",alias:"Rutetype"},{name:"informasjon"},{name:"vedlikeholdsansvarlig"},{name:"ruteinfoid",alias:"Rutenummer"},{name:"description",alias:"tilrettelegging"}]}},{type:"overlay",gatekeeper:"true",name:"skiloyper",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Skiloype",format:"image/png"},guid:"5.Skiloype",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"sykkelruter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"Sykkelrute",format:"image/png"},guid:"5.Sykkelrute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"annenruter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:5,params:{layers:"AnnenRute",format:"image/png"},guid:"5.AnnenRute",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"historisk_ferdselsrute",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Historisk",format:"image/png"},guid:"6.Historisk",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"kyststi",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Kyststi",format:"image/png"},guid:"6.Kyststi",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"kultursti",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Kultursti",format:"image/png"},guid:"6.Kultursti",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"natursti",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Natursti",format:"image/png"},guid:"6.Natursti",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"trimloype",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Trimloype",format:"image/png"},guid:"6.Trimloype",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"fotrute_type_ikke_angitt",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:6,params:{layers:"Fotrutetypeikkeangitt",format:"image/png"},guid:"6.Fotrutetypeikkeangitt",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"belysning"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"merking_d",alias:"Merking"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"}]}},{type:"overlay",gatekeeper:"true",name:"Maskinpreparert",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Maskinpreparert",format:"image/png"},guid:"7.Maskinpreparert",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"SnÃ¸skuter",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Snoskuter",format:"image/png"},guid:"7.SnÃ¸skuter",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"Upreparert",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Upreparert",format:"image/png"},guid:"7.Upreparert",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"Preparering ikke angitt",url:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",legendurl:"https://wms.geonorge.no/skwms1/wms.friluftsruter2?",groupid:7,params:{layers:"Ingen_info",format:"image/png"},guid:"7.Preparering ikke angitt",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"merking_d",alias:"Merking"},{name:"rutenavn"},{name:"rutenummer"},{name:"vedlikeholdsansvarlig"},{name:"belysning"},{name:"spesialrutetype_d",alias:"Spesialrutetype"},{name:"gradering_d",alias:"Vanskelig"},{name:"antallskispor"},{name:"tilpasning_d",alias:"tilpassing"},{name:"preparering_d",alias:"preparering"}]}},{type:"overlay",gatekeeper:"true",name:"Markagrensen",url:"https://wms.geonorge.no/skwms1/wms.markagrensen?",legendurl:"https://wms.geonorge.no/skwms1/wms.markagrensen?",groupid:3,params:{layers:"Markagrensen",format:"image/png"},guid:"3.Markagrensen",options:{isbaselayer:"false",singletile:"true",visibility:"false"},includedfields:{capitalize:"true",field:[{name:"lovnavn",alias:"Lovnavn"},{name:"lovid",alias:"Lov-id"},{name:"objid",alias:"Objekt-id"}]}}],maplayer:[{index:3,name:"fakta",groupid:3},{index:5,name:"tur_og_friluftsruter",groupid:5},{index:6,name:"fotrutetype",groupid:6},{index:7,name:"SkilÃ¸ypepreparering",groupid:7}],vector:[{type:"overlay",name:"kommunenes_fjelltopper",url:"https://norgeskart.no/json/tema/kommunefjell/Kommunefjell2018.geojson",epsg:"EPSG:25833",groupid:3,params:{format:"application/json"},guid:"3.Kommunenes fjelltopper",options:{visibility:"false"},style:{regularshape:{fill:{color:"#000000"},points:3,radius:9}}}],mapbounds:{mapbound:[{epsg:"EPSG:23031",extent:"-1500000.0, 3500000.0, 4045984.0, 9045984.0"},{epsg:"EPSG:23032",extent:"-2000000.0, 3500000.0, 3545984.0, 9045984.0"},{epsg:"EPSG:23033",extent:"-2500000.0, 3500000.0, 3045984.0, 9045984.0"},{epsg:"EPSG:23034",extent:"-3000000.0, 3500000.0, 2545984.0, 9045984.0"},{epsg:"EPSG:23035",extent:"-3500000.0, 3500000.0, 2045984.0, 9045984.0"},{epsg:"EPSG:23036",extent:"-4000000.0, 3500000.0, 1545984.0, 9045984.0"},{epsg:"EPSG:25831",extent:"-1500000.0, 3500000.0, 4045984.0, 9045984.0"},{epsg:"EPSG:25832",extent:"-2000000.0, 3500000.0, 3545984.0, 9045984.0"},{epsg:"EPSG:25833",extent:"-2500000.0, 3500000.0, 3045984.0, 9045984.0"},{epsg:"EPSG:25834",extent:"-3000000.0, 3500000.0, 2545984.0, 9045984.0"},{epsg:"EPSG:25835",extent:"-3500000.0, 3500000.0, 2045984.0, 9045984.0"},{epsg:"EPSG:25836",extent:"-4000000.0, 3500000.0, 1545984.0, 9045984.0"},{epsg:"EPSG:32631",extent:"-1500000.0, 3500000.0, 4045984.0, 9045984.0"},{epsg:"EPSG:32632",extent:"-2000000.0, 3500000.0, 3545984.0, 9045984.0"},{epsg:"EPSG:25833",extent:"-2500000.0, 3500000.0, 3045984.0, 9045984.0"},{epsg:"EPSG:32634",extent:"-3000000.0, 3500000.0, 2545984.0, 9045984.0"},{epsg:"EPSG:32635",extent:"-3500000.0, 3500000.0, 2045984.0, 9045984.0"},{epsg:"EPSG:32636",extent:"-4000000.0, 3500000.0, 1545984.0, 9045984.0"},{epsg:"EPSG:4326",extent:"-180, -90, 180, 90"},{epsg:"EPSG:3857",extent:"-20037508.34, -20037508.34, 20037508.34, 20037508.34"},{epsg:"EPSG:900913",extent:"-20037508.34, -20037508.34, 20037508.34, 20037508.34"},{epsg:"EPSG:54009",extent:"-18000000.0, -9000000.0, 18000000.0, 9000000.0"},{epsg:"EPSG:3006",extent:"-1200000.0, 4700000.0, 2600000.0, 8500000.0"}]}}}}}}]),angular.module("mainApp").filter("capitalize",[function(){return function(t){return t?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():""}}]),angular.module("mainApp").service("mainAppService",["$http",function(){var t="https://norgeskart.no/",e="https://openwms.statkart.no/skwms1/",n="https://ws.geonorge.no/",r="https://ws.geonorge.no/adresser/v1/sok";this.uploadGpxFileService=function(){return t+"ws/upload-gpx.py"},this.generateElevationChartServiceUrl=function(t){return"https://openwps.statkart.no/skwms1/wps.elevation2?request=Execute&service=WPS&version=1.0.0&identifier=elevationChart&dataInputs=gpx=@xlink:href="+t},this.generateMapLinkServiceUrl=function(t){var n=encodeURIComponent(t.service),r=encodeURIComponent(t.request),i=encodeURIComponent(t.CRS),o=encodeURIComponent(t.FORMAT),a=encodeURIComponent(t.BGCOLOR),s=encodeURIComponent(t.TRANSPARENT),l=encodeURIComponent(t.LAYERS),u=encodeURIComponent(t.VERSION),c=encodeURIComponent(t.WIDTH),h=encodeURIComponent(t.HEIGHT),f=encodeURIComponent(t.BBOX);return e+"wms.topo?service="+n+"&request="+r+"&CRS="+i+"&FORMAT="+o+"&BGCOLOR="+a+"&TRANSPARENT="+s+"&LAYERS="+l+"&VERSION="+u+"&WIDTH="+c+"&HEIGHT="+h+"&BBOX="+f},this.generateEmergencyPosterServiceUrl=function(t){var e=encodeURIComponent(t.map);return n+"/fop2/fop?locationName="+t.locationName+"&position1="+t.position1+"&position2="+t.position2+"&street="+t.street+"&place="+t.place+"&matrikkel="+t.matrikkel+"&utm="+t.utm+"&posDez="+t.posDez+"&map="+e},this.generateSearchMatrikkelVegUrl=function(t){return n+"norgeskart/v1/matrikkel/veg/"+encodeURIComponent(t)},this.generateSearchMatrikkelAdresseUrl=function(t){return t=-1!==(t="string"==typeof t?t:"").indexOf(",")?t.replace(","," "):t,r+"?sok="+encodeURIComponent(t)+"&treffPerSide=10"},this.kommunesearch=function(t){return"https://ws.geonorge.no/kommunereform/v1/endringer/?sok="+t},this.generateSearchStedsnavnUrl=function(t,e,n){if(t){var r=t.split(",");if(r.length>=2)return r[0]=-1!==r[0].indexOf("*")?r[0]:r[0]+"*",r[1]=-1!==r[1].indexOf("*")?r[1].trim():r[1].trim()+"*"," https://ws.geonorge.no/stedsnavn/v1/navn?sok="+(t=r[0]+"&kommunenavn="+r[1])+"&treffPerSide="+n+"&side="+e}return"https://ws.geonorge.no/stedsnavn/v1/navn?sok="+(t=t?-1!==t.indexOf("*")?t:t+"*":"")+"&treffPerSide="+n+"&side="+e},this.generateElevationPointUrl=function(t,e,n){return"https://ws.geonorge.no/hoydedata/v1/punkt?nord="+t+"&ost="+e+"&koordsys="+n+"&&geojson=false"},this.generatStedsnavnPunktsok=function(t,e,n,r){return r||(r=1),"https://ws.geonorge.no/stedsnavn/v1/punkt?nord="+t+"&ost="+e+"&treffPerSide=35&koordsys=25833&radius=150&side="+r},this.generatStedsnavnPunktsokNodplakat=function(t,e,n,r){return r||(r=1),"https://ws.geonorge.no/stedsnavn/v1/punkt?nord="+t+"&ost="+e+"&treffPerSide=35&koordsys=25833&radius=1000&side="+r},this.generateMatrikkelInfoUrl=function(t,e,r,i){return n+"norgeskart/v1/teiger/bbox/"+t+","+e+","+r+","+i},this.generateAdresseSokUrl=function(t){return t=-1!==(t="string"==typeof t?t:"").indexOf(",")?t.replace(",","*"):t+"*",r+"?sok="+encodeURIComponent(t)+"&treffPerSide=1000"},this.generateAdressePunktsokUrl=function(t,e,n){return"https://ws.geonorge.no/adresser/v1/punktsok?radius="+t+"&lat="+e+"&lon="+n+"&treffPerSide=10"},this.generateSeEiendomUrl=function(t,e,n,r,i){return"https://seeiendom.kartverket.no/eiendom/"+t+"/"+e+"/"+n+"/"+r+"/"+i},this.generateFaktaarkUrl=function(t){return"https://stadnamn.kartverket.no/fakta/"+t},this.generateKoordTransUrl=function(t,e,r,i){return n+"transApi?ost="+t+"&nord="+e+"&fra="+(i=i||84)+"&til="+(r=r||84)},this.generateSeHavnivaaUrl=function(t,e){return"http://api.sehavniva.no/tideapi.php?lat="+t+"&lon="+e+"&lang=nb&year="+(new Date).getFullYear()+"&place=&tide_request=tidetable"},this.generateLagTurkartUrl=function(){return n+"norgeskart/nkprint/turkart2"},this.generateEmergencyPosterPointUrl=function(t,e){return n+"norgeskart/emergencyPoster/"+e+"/"+t},this.generateEmergencyPosterPreviewImageUrl=function(t,n,r,i){return e+"wms.topo?service=WMS&request=GetMap&CRS=EPSG:32633&FORMAT=image%2Fjpeg&BGCOLOR=0xFFFFFF&TRANSPARENT=false&LAYERS=topo&VERSION=1.3.0&WIDTH="+$(window).width()+"&HEIGHT="+$(window).height()+"&BBOX="+t+","+n+","+r+","+i},this.generateGeoJSONUrl=function(e,n){var r={};return r.hash=e,n&&(r.save=!0),t+"ws/get-json.py?"+$.param(r)},this.generateGeoJSONSaveUrl=function(){return t+"ws/upload-json.py"},this.generateSearchMatrikkelNummerUrl=function(t){return n+"norgeskart/v1/matrikkel/eie/"+t},this._constructMarkingFilter=function(t){return t.kommunenr+"-"+t.gardsnr+"-"+t.bruksnr+"-"+t.festenr+"-"+t.seksjonsnr},this.generateMatrikkelWfsFilterUrl=function(t){return n+"norgeskart/v1/teiger/"+this._constructMarkingFilter(t)+"/"},this.generateEiendomAddress=function(t,e,r,i,o){var a=n+"norgeskart/v1/matrikkel/eiendom/";return(a+="0"!==i?"0"===o?t+"-"+e+"/"+r+"/"+i:t+"-"+e+"/"+r+"/"+i+"/"+o:t+"-"+e+"/"+r)+"&KILDE:Eiendom KOMMUNENR:"+t+" GARDSNR:"+e+" BRUKSNR:"+r+" SEKSJONSNR:"+o+" FESTENR:"+i},this.generateFaqUrl=function(e){return t+"ws/faq.py?code="+e},this.sosiCodes=[{ESRI:null,EPSG:4326,SOSI:84,name:"EU89 - Geografisk, grader (Lat/Lon)",viewable:!1,key:"EU89_Lat_Lon",type:"standard",bbox:{MinX:3.844925191,MaxX:31.95907717,MinY:57.69458922,MaxY:71.45477563}},{ESRI:25831,EPSG:25831,SOSI:21,name:"EU89, UTM-sone 31",viewable:!0,key:"EU89_UTM_31",type:"standard",bbox:{}},{ESRI:25832,EPSG:25832,SOSI:22,name:"EU89, UTM-sone 32",viewable:!0,key:"EU89_UTM_32",type:"standard",bbox:{MinX:229614.1053,MaxX:751898.5673,MinY:6401682.026,MaxY:7231445.376}},{ESRI:25833,EPSG:25833,SOSI:23,name:"EU89, UTM-sone 33",viewable:!0,key:"EU89_UTM_33",type:"standard",bbox:{MinX:288889.7639,MaxX:804809.936,MinY:7211211.98,MaxY:7866186.306}},{ESRI:25834,EPSG:25834,SOSI:24,name:"EU89, UTM-sone 34",viewable:!0,key:"EU89_UTM_34",type:"standard",bbox:{MinX:389363.4613,MaxX:624301.8048,MinY:7565200.998,MaxY:7930309.032}},{ESRI:25835,EPSG:25835,SOSI:25,name:"EU89, UTM-sone 35",viewable:!0,key:"EU89_UTM_35",type:"standard",bbox:{MinX:253177.3653,MaxX:683621.7167,MinY:7603094,MaxY:7924929.221}},{ESRI:25836,EPSG:25836,SOSI:26,name:"EU89, UTM-sone 36",viewable:!0,key:"EU89_UTM_36",type:"standard",bbox:{}},{ESRI:27391,EPSG:27391,SOSI:1,name:"NGO1948, Gauss-K. Akse 1",viewable:!1,key:"NGO1948_GaussK_1",type:"extended",bbox:{MinX:-368207.9294,MaxX:172305.8,MinY:-28995.15926,MaxY:808453.3338}},{ESRI:27392,EPSG:27392,SOSI:2,name:"NGO1948, Gauss-K. Akse 2",viewable:!1,key:"NGO1948_GaussK_2",type:"extended",bbox:{MinX:-368207.9294,MaxX:172305.8,MinY:-28995.15926,MaxY:808453.3338}},{ESRI:27393,EPSG:27393,SOSI:3,name:"NGO1948, Gauss-K. Akse 3",viewable:!1,key:"NGO1948_GaussK_3",type:"extended",bbox:{MinX:-368207.9294,MaxX:172305.8,MinY:-28995.15926,MaxY:808453.3338}},{ESRI:27394,EPSG:27394,SOSI:4,name:"NGO1948, Gauss-K. Akse 4",viewable:!1,key:"NGO1948_GaussK_4",type:"extended",bbox:{MinX:-368207.9294,MaxX:172305.8,MinY:-28995.15926,MaxY:808453.3338}},{ESRI:27395,EPSG:27395,SOSI:5,name:"NGO1948, Gauss-K. Akse 5",viewable:!1,key:"NGO1948_GaussK_5",type:"extended",bbox:{MinX:-312424.3471,MaxX:410629.5171,MinY:808453.3338,MaxY:1507978.752}},{ESRI:27396,EPSG:27396,SOSI:6,name:"NGO1948, Gauss-K. Akse 6",viewable:!1,key:"NGO1948_GaussK_6",type:"extended",bbox:{MinX:-312424.3471,MaxX:410629.5171,MinY:808453.3338,MaxY:1507978.752}},{ESRI:27397,EPSG:27397,SOSI:7,name:"NGO1948, Gauss-K. Akse 7",viewable:!1,key:"NGO1948_GaussK_7",type:"extended",bbox:{MinX:-312424.3471,MaxX:410629.5171,MinY:808453.3338,MaxY:1507978.752}},{ESRI:27398,EPSG:27398,SOSI:8,name:"NGO1948, Gauss-K. Akse 8",viewable:!1,key:"NGO1948_GaussK_8",type:"extended",bbox:{MinX:-312424.3471,MaxX:410629.5171,MinY:808453.3338,MaxY:1507978.752}},{ESRI:null,EPSG:null,SOSI:50,name:"ED50 - Geografisk, grader",viewable:!1,key:"ED50",type:"extended",bbox:{}},{ESRI:23031,EPSG:23031,SOSI:31,name:"ED50, UTM-sone 31",viewable:!1,key:"ED50_UTM_31",type:"extended",bbox:{}},{ESRI:23032,EPSG:23032,SOSI:32,name:"ED50, UTM-sone 32",viewable:!1,key:"ED50_UTM_32",type:"extended",bbox:{}},{ESRI:23033,EPSG:23033,SOSI:33,name:"ED50, UTM-sone 33",viewable:!1,key:"ED50_UTM_33",type:"extended",bbox:{}},{ESRI:23034,EPSG:23034,SOSI:34,name:"ED50, UTM-sone 34",viewable:!1,key:"ED50_UTM_34",type:"extended",bbox:{}},{ESRI:23035,EPSG:23035,SOSI:35,name:"ED50, UTM-sone 35",viewable:!1,key:"ED50_UTM_35",type:"extended",bbox:{}},{ESRI:23036,EPSG:23036,SOSI:36,name:"ED50, UTM-sone 36",viewable:!1,key:"ED50_UTM_36",type:"extended",bbox:{}}],this.getSOSIfromEPSG=function(t){return this.sosiCodes.filter((function(e){return e.EPSG==t})).map((function(t){return t.SOSI}))[0]},this.getCoordinateSystems=function(t){var e={};return this.sosiCodes.filter((function(e){return e.type==t})).filter(Boolean).map((function(t){var e={};return e[t.SOSI]=t.key,e})).forEach((function(t){for(var n in t)e[n]=t[n]})),e},this.isOutOfBounds=function(t){return this.sosiCodes.filter((function(e){return t.north.value<e.bbox.MinX||t.north.value>e.bbox.MaxX||t.east.value<e.bbox.MinY||t.east.value>e.bbox.MaxY})).map((function(t){return t}))},this.isNotOutOfBounds=function(t){return this.sosiCodes.filter((function(e){return t.north.value>e.bbox.MinX&&t.north.value<e.bbox.MaxX&&t.east.value>e.bbox.MinY&&t.east.value<e.bbox.MaxY})).map((function(t){return t}))},this.generateUrlPrintCapabilities=function(t){return n+"print/"+t+"/capabilities.json"},this.generatePrintUrl=function(t){return n+"print/"+t+"/report.pdf"},this.generatePrintDownloadUrl=function(t){return n.slice(0,-1)+t},this.generateStatusPrintDownloadUrl=function(t){return n.slice(0,-1)+t},this.generateCancelPrintUrl=function(t){return n+"print/cancel/"+t}}]),angular.module("isyTranslate",["pascalprecht.translate"]),angular.module("isyTranslate").controller("isyTranslateController","$scope","$translate","$window",(function(t,e,n){function r(e){t.currentLanguage=e}t.changeLanguage=function(t){e.use(t).then(r)},n.ISY.currentLanguage&&n.ISY.currentLanguage.epiLanguage?e.use(n.ISY.currentLanguage.epiLanguage).then(r):t.currentLanguage=e.use()})),angular.module("isyTranslate").factory("customLoader",["$http","$q","translations",function(t,e,n){return function(t){var r=e.defer();return r.resolve(n[t.key]),r.promise}}]).config(["$translateProvider",function(t){t.useLoader("customLoader",{}),t.use("no"),t.useSanitizeValueStrategy(null)}]).factory("isyTranslateFactory",(function(){var t=[{id:"no",title:"BokmÃ¥l",active:!0},{id:"nn",title:"Nynorsk",active:!1},{id:"en",title:"English",active:!1}],e={no:{east:"&Oslash; ",north:"N ",start_modify:"Velg objekt og start redigering.",add_layer_start_drawing:"Klikk for Ã¥ starte tegning",add_layer_continue_drawing:"Klikk for Ã¥ fortsette Ã¥ tegne.",add_layer_modify_object:"Velg objekt og start redigering.",start_drawing:"Klikk for Ã¥ starte tegning",continue_drawing:"Klikk for Ã¥ fortsette Ã¥ tegne polygon. Klikk i siste punktet for Ã¥ avslutte polygon.",start_measure:"Klikk for Ã¥ starte tegning",continue_measure:"Klikk for Ã¥ fortsette Ã¥ tegne polygon. Klikk i siste punktet for Ã¥ avslutte polygon.",start_measure_line:"Klikk for Ã¥ starte tegning",continue_measure_line:"Klikk for Ã¥ fortsette Ã¥ tegne linjen. Klikk i siste punktet for Ã¥ avslutte linjen."},nn:{east:"&Oslash; ",north:"N ",start_modify:"Vel objekt og start redigering.",add_layer_start_drawing:"Klikk for Ã¥ starte teikning",add_layer_continue_drawing:"Klikk for Ã¥ fortsetje Ã¥ teikne.",add_layer_modify_object:"Vel objekt og start redigering.",start_drawing:"Klikk for Ã¥ starte teikning",continue_drawing:"Klikk for Ã¥ fortsetje Ã¥ teikne polygon. Klikk i siste punktet for Ã¥ avslutte polygon.",start_measure:"Klikk for Ã¥ starte teikning",continue_measure:"Klikk for Ã¥ fortsetje Ã¥ teikne polygon. Klikk i siste punktet for Ã¥ avslutte polygon.",start_measure_line:"Klikk for Ã¥ starte teikning",continue_measure_line:"Klikk for Ã¥ fortsetje Ã¥ teikne linja. Klikk i siste punktet for Ã¥ avslutte linja."},en:{east:"E ",north:"N ",start_modify:"Select object and start modifying.",add_layer_start_drawing:"Click to start drawing",add_layer_continue_drawing:"Click to continue drawing.",add_layer_modify_object:"Select object and start modifying.",start_drawing:"Click to start drawing",continue_drawing:"Click to continue drawing the polygon. Click the last point to end the polygon.",start_measure:"Click to start drawing",continue_measure:"Click to continue drawing the polygon. Click the last point to end the polygon.",start_measure_line:"Click to start drawing",continue_measure_line:"Click to continue drawing the line. Click the last point to end the line."}};return{getCurrentLanguage:function(){for(var e=0;e<t.length;e++)if(!0===t[e].active)return t[e]},getAllLanguages:function(){return t},setCurrentLanguage:function(e){for(var n=0;n<t.length;n++)t[n].active=t[n].id===e},getTranslateOptionsByActiveLanguage:function(){return e[this.getCurrentLanguage().id]}}})),angular.module("isyTranslate").constant("translations",{no:{AcceptAndContinue:"FORSTÃR OG AKSEPTERER",AddLegend:"TA MED TEGNFORKLARING",AddSweden:"TA MED DATA I SVERIGE (INNTIL 50 KM)",AddCompass:"TA MED MINIKURS I KOMPASSBRUK",Adresse:"Adresse",Ansvar:"BRUKERENS ANSVAR",Back:"< TILBAKE",Cancel_txt:"AVBRYT",CorrectRoad:"ER DETTE RIKTIG?",Dekning_title:"Kartbladoversikt",Arbeidsgiveravgiftsoner_title:"Arbeidsgiveravgiftsoner",DownloadMap:"LAST NED KART",Draw_title:"Tegne",ED50:"ED50 - Geografiske grader",ED50_UTM_31:"ED50, UTM-sone 31",ED50_UTM_32:"ED50, UTM-sone 32",ED50_UTM_33:"ED50, UTM-sone 33",ED50_UTM_34:"ED50, UTM-sone 34",ED50_UTM_35:"ED50, UTM-sone 35",ED50_UTM_36:"ED50, UTM-sone 36",EU89_Lat_Lon:"EU89 - Geografiske grader (Lat/Lon)",EU89_UTM_31:"EU89, UTM-sone 31",EU89_UTM_32:"EU89, UTM-sone 32",EU89_UTM_33:"EU89, UTM-sone 33",EU89_UTM_34:"EU89, UTM-sone 34",EU89_UTM_35:"EU89, UTM-sone 35",EU89_UTM_36:"EU89, UTM-sone 36",Fastmerker_title:"Fastmerker",FoundRoadIs:"FUNNET VEI ER:",FremhevMerkedeStier:"FREMHEV MERKEDE STIER",Friluft_title:"Friluftsliv","Geografisk koordinat":"Geografisk koordinat",GiPunktetNavn:"GI PUNKTET DITT ET NAVN:","GÃ¥rds og bruksnummer":"GÃ¥rds- og bruksnummer",HeightEstimatedByInterpolation_text:"HÃ¸yde (anslÃ¥tt ved interpolering): ",HereYouFind_text:"HER FINNER DU: ",In:"i",Large:"L",Luftfartshindre_title:"Luftfartshindre",MeasureLine_title:"MÃ¥l lengde",Measure_title:"MÃ¥l areal",Medium:"M",MetersAboveSeaLevel:"moh",Municipality:"kommune",NGO1948_GaussK_1:"NGO1948, Gauss-K. Akse 1",NGO1948_GaussK_2:"NGO1948, Gauss-K. Akse 2",NGO1948_GaussK_3:"NGO1948, Gauss-K. Akse 3",NGO1948_GaussK_4:"NGO1948, Gauss-K. Akse 4",NGO1948_GaussK_5:"NGO1948, Gauss-K. Akse 5",NGO1948_GaussK_6:"NGO1948, Gauss-K. Akse 6",NGO1948_GaussK_7:"NGO1948, Gauss-K. Akse 7",NGO1948_GaussK_8:"NGO1948, Gauss-K. Akse 8",Next:"FORTSETT >",Nodplakat:"NÃ¸dplakat",NodplakatText1:"NÃ¸dplakaten er utviklet i samarbeid med Hovedredningsentralene og nÃ¸detatene. Kartverket er ansvarlig for datagrunnlaget, dvs. stedsnavn og kart - samt teknologien bak.",NodplakatText2:"Det er brukerens ansvar Ã¥ kontrollere at det er korrekt hytte eller sted som vises pÃ¥ plakaten.",NodplakatText3:"Kartverket tar ikke ansvar for mulige feil som skyldes brukeren, datagrunnlaget eller teknologien.",PlaceIs:"STEDET ER:",Scale:"MÃ¥lestokk",Small:"S",Stedsnavn:"Stedsnavn",Stedsnavn_title:"Stedsnavn",Tilgjengelighet_title:"Tilgjengelighet",TransformCoor_title:"Transformere koordinater",Turkart_info:"Flytt kartet slik at det gule feltet dekker omrÃ¥det du Ã¸nsker Ã¥ skrive ut.",Turkart_navn:"GI KARTET DITT ET NAVN: ",Turkart_navn_eks:"Turkartnavn",Turkart_title:"MITT TURKART","UTM-koordinat":"UTM-koordinat",UseMapView_title:"Bruk kartutsnitt",Vegnavn:"Veinavn",administrative_omrader:"Administrative omrÃ¥der",adresser:"Adresser",amtskart:"Amtskart",andre:"Andre",andre_linjehindre:"Andre linjehindre",andre_linjer_40m_60m:"Andre linjer 40m-60m",andre_linjer_60m_og_over:"Andre linjer 60m og over",andre_linjer_under_40m:"Andre linjer under 40 m",andre_linjer_uten_hoyde:"Andre linjer uten hÃ¸yde",annen:"Andre turruter",annen_gradering:"Andre graderte turruter",annen_rute_ekspert:"Ekspert",annen_rute_enkel:"Enkel",annen_rute_gradering_ikke_angitt:"Gradering ikke angitt",annen_rute_ingen_gradering:"Ingen gradering",annen_rute_krevende:"Krevende",annen_rute_middels:"Middels",avslatt:"AvslÃ¥tt skrivemÃ¥te",baderampe:"Baderampe",bakgrunnskart:"Bakgrunnskart",bosetning_eiendom:"Bosetning/eiendom",bygninger:"Bygninger",cancel:"Avbryt",change_txt:"REDIGER",chooseFile_txt:"VELG FIL",close_txt:"LUKK",collapse_txt:"SKJUL",color_txt:"FARGE:",copyLink_txt:"KOPIER LENKE",copy_txt:"KOPIER",dekning:"Dekning",dele_kartet:"Dele kartet",downloadEmergencyPoster:"LAST NED",download_txt:"LAST NED",drawInMap_txt:"TEGN I KARTET",drawProfile_txt:"TEGNE HÃYDEPROFIL",elektron_sjokart:"Elektronisk sjÃ¸kart",elevationProfile_menu:"HÃYDEPROFIL",email_txt:"SEND SOM E-POST",empty_txt:"TÃM",enkel:"Enkel",epost:"E-post",expand_txt:"VIS",facebook_txt:"FACEBOOK",fakta:"Fakta",fastmerker:"Fastmerker",ferskvann:"Ferskvann",fiskeplass:"Fiskeplass",flybilder:"Flybilder",forenklet_vedtak:"Forenklet vedtak",foreslatt:"ForeslÃ¥tt",fotrute_ekspert:"Ekspert",fotrute_enkel:"Enkel",fotrute_gradering:"Graderte fotruter",fotrute_gradering_ikke_angitt:"Gradering ikke angitt",fotrute_ingen_gradering:"Ingen gradering",fotrute_krevende:"Krevende",fotrute_middels:"Middels",fotrute_type_ikke_angitt:"Ikke angitt",fotruter:"Fotruter",fotrutetype:"Fotrutetype",friluft_elektrisk_rullestol:"Friluft elektrisk rullestol",friluft_rullestol:"Friluft rullestol",friluft_syn:"Friluft syn",friluftsomrade:"FriluftsomrÃ¥de",gapahukhytte:"Gapahukhytte",godkjent:"Godkjent skrivemÃ¥te",gradering:"Graderte fotruter",gratone:"GrÃ¥tone",grillbalplass:"GrillbÃ¥lplass",havnekart:"Havnekart",svalbardkart_sjo:"Hovedkart Svalbard",hc_parkering:"HC-parkering",historikk:"Historiske kart",historisk:"Historisk",historisk_ferdselsrute:"Historisk ferdselsrute",holding_number:"GÃ¥rdsnr.",houseNr_txt:"Husnr",hovedkart_sjo:"Hovedkart sjÃ¸",hva_vil_du_gjore:"Hva vil du gjÃ¸re?",inngang_bygg:"Inngang bygg",internasjonalt:"Internasjonalt",ja:"Ja",jan_mayen:"Jan Mayen",klage_vedtak_ikke_trukket_tilbake:"Klage, vedtak ikke trukket tilbake",klage_vedtak_trukket_tilbake:"Klage, vedtak trukket tilbake",klage_vedtak_utsatt:"Klage, vedtak utsatt",kommunenes_fjelltopper:"Kommunenes fjelltopper",kontakt_oss:"Kontakt oss",kontakt_oss_info:"Har du ris, ros eller tips vedrÃ¸rende norgeskart.no, er vi takknemlige for innspill. Du kan kontakte oss pÃ¥ fÃ¸lgende mÃ¥ter:",kontakt_oss_tittel:"Synspunkter eller feil?",koordTrans:"SE KOORDINATER",koord_info:"Velg koordinatsystem i listen for Ã¥ transformere.",koord_nord:"Nord",koord_ost:"Ãst",koord_tittel:"Koordinater",koord_vis_flere:"Vis flere koordinatsystemer.",kraftledning_40m_60m:"Kraftledning 40m-60m",kraftledning_60m_og_over:"Kraftledning 60m og over",kraftledning_under_40m:"Kraftledning under 40 m",kraftledning_uten_hoyde:"Kraftledning uten hÃ¸yde",kraftledninger:"Kraftledninger",kraftstolpe_40m_60m:"Kraftstolpe 40m-60m",kraftstolpe_60m_og_over:"Kraftstolpe 60m og over",kraftstolpe_under_40m:"Kraftstolpe under 40 m",kraftstolpe_uten_hoyde:"Kraftstolpe uten hÃ¸yde",kultur:"Kultur",kultursti:"Kultursti",kvensk:"Kvensk",kystkart:"Kystkart",kyststi:"Kyststi",lagNodplakat:"LAG NÃDPLAKAT",lagTurkart:"LAG TURKART",lag_hoydeprofil:"Lag hÃ¸ydeprofil",landkart:"Landkart",landsnettpunkter:"Landsnettpunkter",lease_number:"Festenr.",legend_txt:"Tegnforklaring",lineType_txt:"LINJETYPE:",line_txt:"LINJE",linjepunkt_40m_60m:"Linjepunkt 40m-60m",linjepunkt_60m_og_over:"Linjepunkt 60m og over",linjepunkt_under_40m:"Linjepunkt under 40 m",linjepunkt_uten_hoyde:"Linjepunkt uten hÃ¸yde",linkToEmbeddedMap_txt:"LENKE TIL INNBYGD KART",login:"Logg inn",logout:"Logg ut",lulesamisk:"Lulesamisk",markslag:"Markslag",matrikkel_data:"Matrikkeldata",menu:"Meny",municipality_name:"Kommune",municipality_number:"Kommunenr.",natursti:"Natursti",navnesak_reist:"Navnesak reist",navnesak_vedtak:"Navnesak vedtatt",navnesakstatus:"Navnesakstatus",navnesakstatus_ubehandlet:"Navnesakstatus, ubehandlet",navnetype:"Navnetype",nei:"Nei",niv_fastmerker:"Niv. fastmerker",nordsamisk:"Nordsamisk",norge_1_50000:"Norge 1:50000",norsk:"Norsk",ok_1_utgave:"Ãkâ1.utgave",opacity_txt:"GJENNOMSIKTIGHET:",overseilingskart:"Overseilingskart",parkerings_omrade:"ParkeringsomrÃ¥de",parkeringsomrader:"ParkeringsomrÃ¥der",password:"Passord",pointType_txt:"PUNKTTYPE:",point_txt:"PUNKT",polygon_txt:"FLATE",privat:"Privat",profileInfo_txt:"Klikk pÃ¥ steder i kartet for Ã¥ tegne opp en linje. Avslutt med dobbeltklikk.",property_moreResults:"Tilknyttede eiendommer",punkthindre:"Punkthindre",punkthindre_40m_60m:"Punkthindre 40m-60m",punkthindre_60m_og_over:"Punkthindre 60m og over",punkthindre_under_40m:"Punkthindre under 40 m",punkthindre_uten_hoyde:"Punkthindre uten hÃ¸yde",rasterkart:"Rasterkart",remove_txt:"SLETT",ruteinfopunkt:"ruteinfopunkt",samferdsel:"Samferdsel",samlevedtak:"Samlevedtak",samlevedtak_siste_12_mnd:"Samlevedtak siste 12 mnd",samlevedtak_siste_24_mnd:"Samlevedtak siste 24 mnd",samlevedtak_siste_3_mnd:"Samlevedtak siste 3 mnd",samlevedtak_siste_6_mnd:"Samlevedtak siste 6 mnd",samlevedtak_siste_mnd:"Samlevedtak siste mnd",samlevedtak_trukket_tilbake:"Samlevedtak, trukket tilbake",save_txt:"LAGRE",seEiendom:"SE EIENDOMSINFORMASJON",seEiendom_title:"Eiendom",search:"SÃ¸k",searchResult_addresses:"ADRESSER",searchResult_cadastre:"EIENDOMMER",searchResult_houseNumber:"Husnummer",searchResult_placenames:"STEDSNAVN",searchResult_roads:"VEGER",search_text:"SÃ¸k i Norgeskart",section_number:"Seksjonsnr.",shareOnline_txt:"DEL PÃ NETTET",showCoordinates_txt:"VIS KOORDINATER PÃ KARTET",showElevationProfile_txt:"VIS HÃYDEPROFIL",showMeasurements_txt:"VIS MÃL PÃ KARTET",showMoreInformation:"VIS MER INFORMASJON",showSelection_txt:"MARKER EIENDOM",sittegruppe:"Sittegruppe",size_txt:"STÃRRELSE:",sjo:"SjÃ¸",sjokart:"SjÃ¸kart",skal_ikke_behandles_etter_loven:"Skal ikke behandles etter loven",skiloype_ekspert:"Ekspert",skiloype_enkel:"Enkel",skiloype_gradering:"Graderte skilÃ¸yper",skiloype_gradering_ikke_angitt:"Gradering ikke angitt",skiloype_ingen_gradering:"Ingen gradering",skiloype_krevende:"Krevende",skiloype_middels:"Middels",skiloyper:"SkilÃ¸yper",skriv_ut:"Skriv ut",skrivematestatus:"SkrivemÃ¥testatus",snap_txt:"SNAP",sorsamisk:"SÃ¸rsamisk",sprak:"SprÃ¥k",ssrFakta:"SE FAKTA OM STEDSNAVNET",stamnettpunkter:"Stamnettpunkter",statlig_sikret:"Statlig sikra",subholding_number:"Bruksnr.",svalbard:"Svalbard",sykkel_gradering:"Graderte sykkelruter",sykkelrute_ekspert:"Ekspert",sykkelrute_enkel:"Enkel",sykkelrute_gradering_ikke_angitt:"Gradering ikke angitt",sykkelrute_ingen_gradering:"Ingen gradering",sykkelrute_krevende:"Krevende",sykkelrute_middels:"Middels",sykkelruter:"Sykkelruter",annenruter:"Annenruter",tegne_og_male:"Tegne og mÃ¥le",teiger_og_grenser:"Teiger og grenser",telefon:"Telefon",temakart:"Temakart",terreng:"Terreng",terrengformer:"Terrengformer",tettsted_elektrisk_rullestol:"Tettsted elektrisk rullestol",tettsted_rullestol:"Tettsted rullestol",tettsted_syn:"Tettsted syn",text_txt:"TEKST",text_txt_label:"TEKST:",tips_og_triks:"Tips og triks",toalett:"Toalett",trekantpunkter:"Trekantpunkter",trimloype:"TrimlÃ¸ype",tur_og_friluftsruter:"Tur- og friluftsruter",turisthytte:"Turisthytte",turvei:"Turvei",twitter_txt:"TWITTER",ubehandlet:"Navnesaksstatus ubehandlet",uploadFile_txt:"LAST OPP FIL",username:"Brukernavn",utm_rutenett:"UTM-rutenett",uvurdert:"Uvurdert skrivemÃ¥te",vedtak:"Vedtak siste periode",vedtak_siste_12_mnd:"Vedtak siste 12 mnd",vedtak_siste_24_mnd:"Vedtak siste 24 mnd",vedtak_siste_3_mnd:"Vedtak siste 3 mnd",vedtak_siste_6_mnd:"Vedtak siste 6 mnd",vedtak_siste_mnd:"Vedtak siste mnd",vedtak_utsatt:"Vedtak utsatt",vedtatt:"Vedtatt",vedtatt_av_navnemyndighet:"Navnevalg vedtatt av navnemyndighet",vedtatt_navneledd:"Vedtatt navneledd",vei:"Vei",width_txt:"TYKKELSE:",no_search_hits:"SÃ¸ket ditt ga ingen treff.",no_search_hits_line2:"Du kan sÃ¸ke pÃ¥ adresse, stedsnavn eller koordinater.",for_example_txt:"For eksempel:",search_options_txt:"For flere sÃ¸kevarianter, se under tips og triks i menyen.",geoJson_converted:"GeoJSON har blitt konvertert",template_type:"Maltype",map_name:"Kart navn",cancel_print:"AVBRYT UTSKRIFT",print_format:"Format",print_dpi:"DPI",generate_print:"GENERERE UTSKRIFT","1_A4_portrait":"A4 stÃ¥ende","2_A4_landscape":"A4 liggende","3_A3_portrait":"A3 stÃ¥ende","4_A3_landscape":"A3 liggende",showNauticalMiles_txt:"NAUTISKE MIL",privacy_policy:"Personvern",privacy_policy_title:"Personvern og cookies",privacy_policy_info:"Les hvordan vi tar vare pÃ¥ personopplysninger i ",privacy_policy_link:"Kartverkets personvernerklÃ¦ring",chat_with_kartverket:"Snakk med Kartverket",fail_to_load_faq:"Feil Ã¥ laste inn tips og triks",searchResult_noMatrikkel:"har ingen kjente teiger. Klikk her for Ã¥ se informasjon om eiendommen.",multipleAdressesText:"Eiendommen har flere adresser"},nn:{AcceptAndContinue:"EG SKJÃNAR OG GODTAR",AddLegend:"TA MED TEIKNFORKLARING",AddSweden:"TA MED DATA I SVERIGE (INNTIL 50 KM)",AddCompass:"TA MED MINIKURS I KOMPASSBRUK",Adresse:"Adresse",Ansvar:"BRUKARENS ANSVAR",Back:"< TILBAKE",Cancel_txt:"AVBRYT",CorrectRoad:"ER DETTE RETT?",Dekning_title:"Kartbladoversikt",Arbeidsgiveravgiftsoner_title:"Arbeidsgiveravgiftsoner",DownloadMap:"LAST NED KART",Draw_title:"Teikne",ED50:"ED50 - Geografiske grader",ED50_UTM_31:"ED50, UTM-sone 31",ED50_UTM_32:"ED50, UTM-sone 32",ED50_UTM_33:"ED50, UTM-sone 33",ED50_UTM_34:"ED50, UTM-sone 34",ED50_UTM_35:"ED50, UTM-sone 35",ED50_UTM_36:"ED50, UTM-sone 36",EU89_Lat_Lon:"EU89 - Geografiske grader (Lat/Lon)",EU89_UTM_31:"EU89, UTM-sone 31",EU89_UTM_32:"EU89, UTM-sone 32",EU89_UTM_33:"EU89, UTM-sone 33",EU89_UTM_34:"EU89, UTM-sone 34",EU89_UTM_35:"EU89, UTM-sone 35",EU89_UTM_36:"EU89, UTM-sone 36",Fastmerker_title:"Fastmerke",FoundRoadIs:"FUNNEN VEG ER:",FremhevMerkedeStier:"FRAMHEV MERKA STIGAR",Friluft_title:"Friluftsliv","Geografisk koordinat":"Geografisk koordinat",GiPunktetNavn:"GI PUNKTET DITT EIT NAMN:","GÃ¥rds og bruksnummer":"Gards- og bruksnummer",HeightEstimatedByInterpolation_text:"HÃ¸gde (anslÃ¥tt ved interpolering): ",HereYouFind_text:"HER FINN DU: ",In:"i",Large:"L",Luftfartshindre_title:"Luftfartshinder",MeasureLine_title:"MÃ¥l lengde",Measure_title:"MÃ¥l areal",Medium:"M",MetersAboveSeaLevel:"moh",Municipality:"kommune",NGO1948_GaussK_1:"NGO1948, Gauss-K. Akse 1",NGO1948_GaussK_2:"NGO1948, Gauss-K. Akse 2",NGO1948_GaussK_3:"NGO1948, Gauss-K. Akse 3",NGO1948_GaussK_4:"NGO1948, Gauss-K. Akse 4",NGO1948_GaussK_5:"NGO1948, Gauss-K. Akse 5",NGO1948_GaussK_6:"NGO1948, Gauss-K. Akse 6",NGO1948_GaussK_7:"NGO1948, Gauss-K. Akse 7",NGO1948_GaussK_8:"NGO1948, Gauss-K. Akse 8",Next:"FORTSET >",Nodplakat:"NÃ¸dplakat",NodplakatText1:"NÃ¸dplakaten er utvikla i samarbeid med Hovudredningsentralane og nÃ¸detatane. Kartverket er ansvarleg for datagrunnlaget, dvs. stadnamn og kart - samt teknologien bak.",NodplakatText2:"Brukaren har ansvar Ã¥ kontrollere at det er korrekt hytte eller stad som blir vist pÃ¥ plakaten.",NodplakatText3:"Kartverket tar ikkje ansvar for moglege feil som skuldast brukaren, datagrunnlaget eller teknologien.",PlaceIs:"STADEN ER:",Scale:"MÃ¥lestokk",Small:"S",Stedsnavn:"Stadnamn",Stedsnavn_title:"Stadnamn",Tilgjengelighet_title:"Tilgjenge",TransformCoor_title:"Transformere koordinatar",Turkart_info:"Flytt kartet slik at det gule feltet dekkjer omrÃ¥det du ynskjer Ã¥ skrive ut.",Turkart_navn:"GI KARTET DITT EIT NAMN: ",Turkart_navn_eks:"Turkartnamn",Turkart_title:"MITT TURKART","UTM-koordinat":"UTM-koordinat",UseMapView_title:"Bruk kartutsnitt",Vegnavn:"Vegnamn",administrative_omrader:"Administrative omrÃ¥de",adresser:"Adresser",amtskart:"Amtskart",andre:"Andre",andre_linjehindre:"Andre linjehinder",andre_linjer_40m_60m:"Andre linjer 40m-60m",andre_linjer_60m_og_over:"Andre linjer 60m og over",andre_linjer_under_40m:"Andre linjer under 40 m",andre_linjer_uten_hoyde:"Andre linjer utan hÃ¸gde",annen:"Andre turruter",annen_gradering:"Andre graderte turruter",annen_rute_ekspert:"Ekspert",annen_rute_enkel:"Enkel",annen_rute_gradering_ikke_angitt:"Gradering ikkje angitt",annen_rute_ingen_gradering:"Ingen gradering",annen_rute_krevende:"Krevjande",annen_rute_middels:"Middels",avslatt:"Avslege skrivemÃ¥te",baderampe:"Baderampe",bakgrunnskart:"Bakgrunnskart",bosetning_eiendom:"Busetning/eigedom",bygninger:"Bygningar",cancel:"Avbryt",change_txt:"REDIGER",chooseFile_txt:"VEL FIL",close_txt:"LUKK",collapse_txt:"SKJUL",color_txt:"FARGE:",copyLink_txt:"KOPIER LENKE",copy_txt:"KOPIER",dekning:"Dekning",dele_kartet:"Dele kartet",downloadEmergencyPoster:"LAST NED",download_txt:"LAST NED",drawInMap_txt:"TEIKN I KARTET",drawProfile_txt:"TEIKNE HÃGDEPROFIL",elektron_sjokart:"Elektronisk sjÃ¸kart",elevationProfile_menu:"HÃGDEPROFIL",email_txt:"SEND SOM E-POST",empty_txt:"TÃM",enkel:"Enkel",epost:"E-post",expand_txt:"VIS",facebook_txt:"FACEBOOK",fakta:"Fakta",fastmerker:"Fastmerke",ferskvann:"Ferskvatn",fiskeplass:"Fiskeplass",flybilder:"Flybilete",forenklet_vedtak:"Forenkla vedtak",foreslatt:"ForeslÃ¥tt",fotrute_ekspert:"Ekspert",fotrute_enkel:"Enkel",fotrute_gradering:"Graderte fotruter",fotrute_gradering_ikke_angitt:"Gradering ikkje angitt",fotrute_ingen_gradering:"Ingen gradering",fotrute_krevende:"Krevjande",fotrute_middels:"Middels",fotrute_type_ikke_angitt:"Ikkje angitt",fotruter:"Fotruter",fotrutetype:"Fotrutetype",friluft_elektrisk_rullestol:"Friluft elektrisk rullestol",friluft_rullestol:"Friluft rullestol",friluft_syn:"Friluft syn",friluftsomrade:"FriluftsomrÃ¥de",gapahukhytte:"Gapahukhytte",godkjent:"Godkjend skrivemÃ¥te",gradering:"Graderte fotruter",gratone:"GrÃ¥tone",grillbalplass:"GrillbÃ¥lplass",havnekart:"Havnekart",svalbardkart_sjo:"Hovudkart Svalbard",hc_parkering:"HC-parkering",historikk:"Historiske kart",historisk:"Historisk",historisk_ferdselsrute:"Historisk ferdselsrute",holding_number:"Gardsnr.",houseNr_txt:"Husnr",hovedkart_sjo:"Hovudkart sjÃ¸",hva_vil_du_gjore:"Kva vil du gjere?",iframe_longDesc:"Lang informasjonstekst",iframe_shortDesc:"Kort informasjonstekst",inngang_bygg:"Inngang bygg",internasjonalt:"Internasjonalt",ja:"Ja",jan_mayen:"Jan Mayen",klage_vedtak_ikke_trukket_tilbake:"Klage, vedtak ikkje trekt tilbake",klage_vedtak_trukket_tilbake:"Klage, vedtak trekt tilbake",klage_vedtak_utsatt:"Klage, vedtak utsett",kommunenes_fjelltopper:"Kommunanes fjelltoppar",kontakt_oss:"Kontakt oss",kontakt_oss_info:"Har du ris, ros eller tips om norgeskart.no, er vi takksame for innspel. Her kan du kontakte oss:",kontakt_oss_tittel:"Synspunkt eller feil?",koordTrans:"SJÃ KOORDINATAR",koord_info:"Vel koordinatsystem i lista for Ã¥ transformere.",koord_nord:"Nord",koord_ost:"Aust",koord_tittel:"Koordinatar",koord_vis_flere:"Vis fleire koordinatsystem.",kraftledning_40m_60m:"Kraftleidning 40m-60m",kraftledning_60m_og_over:"Kraftleidning 60m og over",kraftledning_under_40m:"Kraftleidning under 40 m",kraftledning_uten_hoyde:"Kraftleidning uten hÃ¸gde",kraftledninger:"Kraftleidningar",kraftstolpe_40m_60m:"Kraftstolpe 40m-60m",kraftstolpe_60m_og_over:"Kraftstolpe 60m og over",kraftstolpe_under_40m:"Kraftstolpe under 40 m",kraftstolpe_uten_hoyde:"Kraftstolpe utan hÃ¸gde",kultur:"Kultur",kultursti:"Kultursti",kvensk:"Kvensk",kystkart:"Kystkart",kyststi:"Kyststi",lagNodplakat:"LAG NÃDPLAKAT",lagTurkart:"LAG TURKART",lag_hoydeprofil:"Lag hÃ¸gdeprofil",landkart:"Landkart",landsnettpunkter:"Landsnettpunkt",lease_number:"Festenr.",legend_txt:"Teiknforklaring",lineType_txt:"LINJETYPE:",line_txt:"LINE",linjepunkt_40m_60m:"Linjepunkt 40m-60m",linjepunkt_60m_og_over:"Linjepunkt 60m og over",linjepunkt_under_40m:"Linjepunkt under 40 m",linjepunkt_uten_hoyde:"Linjepunkt utan hÃ¸gde",linkToEmbeddedMap_txt:"LENKE TIL INNBYGD KART",login:"Logg inn",logout:"Logg ut",lulesamisk:"Lulesamisk",markslag:"Markslag",matrikkel_data:"Matrikkeldata",menu:"Meny",municipality_name:"Kommune",municipality_number:"Kommunenr.",natursti:"Natursti",navnesak_reist:"Namnesak reist",navnesak_vedtak:"Namnesak vedteke",navnesakstatus:"Namnesakstatus",navnesakstatus_ubehandlet:"Namnesaksstatus uhandsama",navnetype:"Namnetype",nei:"Nei",niv_fastmerker:"Niv. fastmerke",nordsamisk:"Nordsamisk",norge_1_50000:"Norge 1:50000",norsk:"Norsk",ok_1_utgave:"Ãkâ1.utgÃ¥ve",opacity_txt:"KOR GJENNOMSIKTIG:",overseilingskart:"Oversiglingskart",parkerings_omrade:"ParkeringsomrÃ¥de",parkeringsomrader:"ParkeringsomrÃ¥de",password:"Passord",pointType_txt:"PUNKTTYPE:",point_txt:"PUNKT",polygon_txt:"FLATE",privat:"Privat",profileInfo_txt:"Klikk pÃ¥ stader i kartet for Ã¥ teikne opp ei line. Avslutt med dobbeltklikk.",property_moreResults:"Tilknytta eigedomar",punkthindre:"Punkthinder",punkthindre_40m_60m:"Punkthinder 40m-60m",punkthindre_60m_og_over:"Punkthinder 60m og over",punkthindre_under_40m:"Punkthinder under 40 m",punkthindre_uten_hoyde:"Punkthinder utan hÃ¸gde",rasterkart:"Rasterkart",remove_txt:"SLETT",ruteinfopunkt:"ruteinfopunkt",samferdsel:"Samferdsle",samlevedtak:"Samlevedtak",samlevedtak_siste_12_mnd:"Samlevedtak siste 12 md",samlevedtak_siste_24_mnd:"Samlevedtak siste 24 md",samlevedtak_siste_3_mnd:"Samlevedtak siste 3 md",samlevedtak_siste_6_mnd:"Samlevedtak siste 6 md",samlevedtak_siste_mnd:"Samlevedtak siste md",samlevedtak_trukket_tilbake:"Samlevedtak, trekt tilbake",save_txt:"LAGRE",seEiendom:"SJÃ EIGEDOMSINFORMASJON",seEiendom_title:"Eigedom",search:"SÃ¸k",searchResult_addresses:"ADRESSER",searchResult_cadastre:"EIGEDOMAR",searchResult_houseNumber:"Husnummer",searchResult_placenames:"STADNAMN",searchResult_roads:"VEGAR",search_text:"SÃ¸k i Norgeskart",section_number:"Seksjonsnr.",shareOnline_txt:"DEL PÃ NETTET",showCoordinates_txt:"VIS KOORDINATAR PÃ KARTET",showElevationProfile_txt:"VIS HÃGDEPROFIL",showMeasurements_txt:"VIS MÃL PÃ KARTET",showMoreInformation:"VIS MEIR INFORMASJON",showSelection_txt:"MARKER EIGEDOM",sittegruppe:"Sittegruppe",size_txt:"STORLEIK:",sjo:"SjÃ¸",sjokart:"SjÃ¸kart",skal_ikke_behandles_etter_loven:"Skal ikkje handsamast etter lova",skiloype_ekspert:"Ekspert",skiloype_enkel:"Enkel",skiloype_gradering:"Graderte skilÃ¸yper",skiloype_gradering_ikke_angitt:"Gradering ikkje angitt",skiloype_ingen_gradering:"Ingen gradering",skiloype_krevende:"Krevjande",skiloype_middels:"Middels",skiloyper:"SkilÃ¸yper",skriv_ut:"Skriv ut",skrivematestatus:"SkrivemÃ¥testatus",snap_txt:"SNAP",sorsamisk:"SÃ¸rsamisk",sprak:"SprÃ¥k",ssrFakta:"SJÃ FAKTA OM STADNAMNET",stamnettpunkter:"Stamnettpunkt",statlig_sikret:"Statleg sikra",subholding_number:"Bruksnr.",svalbard:"Svalbard",sykkel_gradering:"Graderte sykkelruter",sykkelrute_ekspert:"Ekspert",sykkelrute_enkel:"Enkel",sykkelrute_gradering_ikke_angitt:"Gradering ikkje angitt",sykkelrute_ingen_gradering:"Ingen gradering",sykkelrute_krevende:"Krevjande",sykkelrute_middels:"Middels",sykkelruter:"Sykkelruter",annenruter:"Annenruter",tegne_og_male:"Teikne og mÃ¥le",teiger_og_grenser:"Teigar og grenser",telefon:"Telefon",temakart:"Temakart",terreng:"Terreng",terrengformer:"Terrengformer",tettsted_elektrisk_rullestol:"Tettstad elektrisk rullestol",tettsted_rullestol:"Tettstad rullestol",tettsted_syn:"Tettsted syn",text_txt:"TEKST",text_txt_label:"TEKST:",tips_og_triks:"Tips og triks",toalett:"Toalett",trekantpunkter:"Trekantpunkt",trimloype:"TrimlÃ¸ype",tur_og_friluftsruter:"Tur- og friluftsruter",turisthytte:"Turisthytte",turvei:"Turveg",twitter_txt:"TWITTER",ubehandlet:"Namnesaksstatus uhandsama",uploadFile_txt:"LAST OPP FIL",username:"Brukarnamn",utm_rutenett:"UTM-rutenett",uvurdert:"Uvurdert skrivemÃ¥te",vedtak:"Vedtak siste periode",vedtak_siste_12_mnd:"Vedteke siste 12 md",vedtak_siste_24_mnd:"Vedteke siste 24 md",vedtak_siste_3_mnd:"Vedteke siste 3 md",vedtak_siste_6_mnd:"Vedteke siste 6 md",vedtak_siste_mnd:"Vedteke siste md",vedtak_utsatt:"Vedtak utsett",vedtatt:"Vedteke",vedtatt_av_navnemyndighet:"Namneval vedteke/gjort av namnemyndet",vedtatt_navneledd:"Vedteke namneledd",vei:"Veg",width_txt:"TJUKKLEIK:",no_search_hits:"SÃ¸ket ditt ga ikkje treff.",no_search_hits_line2:"Du kan sÃ¸ke pÃ¥ adresse, stadnamn eller koordinatar.",for_example_txt:"Til dÃ¸mes:",search_options_txt:"For fleire sÃ¸kevarianter, sjÃ¥ under tips og triks i menyen.",geoJson_converted:"GeoJSON har blitt konvertert",template_type:"Maltype",map_name:"Kart navn",cancel_print:"AVBRYT UTSKRIFT",print_format:"Format",print_dpi:"DPI",generate_print:"GENERERE UTSKRIFT","1_A4_portrait":"A4 stÃ¥ande","2_A4_landscape":"A4 liggjande","3_A3_portrait":"A3 stÃ¥ande","4_A3_landscape":"A3 liggjande",showNauticalMiles_txt:"NAUTISKE MIL",privacy_policy:"Personvern",privacy_policy_title:"Personvern og cookies",privacy_policy_info:"Les korleis vi tar vare pÃ¥ personopplysningar i ",privacy_policy_link:"Kartverkets personvernerklÃ¦ring",chat_with_kartverket:"Snakk med Kartverket",fail_to_load_faq:"Feil Ã¥ laste inn tips og triks",searchResult_noMatrikkel:" har ingen kjende teigar. Klikk her for Ã¥ sjÃ¥ informasjon om eigedomen.",multipleAdressesText:"Eigedomen har fleire adresser"},en:{AcceptAndContinue:"ACCEPT AND CONTINUE",AddLegend:"ADD LEGEND",AddSweden:"INCLUDE SWEDISH DATA",AddCompass:"TA MED MINIKURS I KOMPASSBRUK",Adresse:"Address",Ansvar:"RESPONSIBILITY",Back:"< BACK",Cancel_txt:"CANCEL",CorrectRoad:"IS THIS CORRECT?",Dekning_title:"Overview of Maps",Arbeidsgiveravgiftsoner_title:"Arbeidsgiveravgiftsoner",DownloadMap:"DOWNLOAD MAP",Draw_title:"Draw",ED50:"ED50 - Geographical degrees",ED50_UTM_31:"ED50, UTM-zone 31",ED50_UTM_32:"ED50, UTM-zone 32",ED50_UTM_33:"ED50, UTM-zone 33",ED50_UTM_34:"ED50, UTM-zone 34",ED50_UTM_35:"ED50, UTM-zone 35",ED50_UTM_36:"ED50, UTM-zone 36",EU89_Lat_Lon:"EU89 - Geographical degrees (Lat/Lon)",EU89_UTM_31:"EU89, UTM-zone 31",EU89_UTM_32:"EU89, UTM-zone 32",EU89_UTM_33:"EU89, UTM-zone 33",EU89_UTM_34:"EU89, UTM-zone 34",EU89_UTM_35:"EU89, UTM-zone 35",EU89_UTM_36:"EU89, UTM-zone 36",Fastmerker_title:"Reference marks",FoundRoadIs:"FOUND ROAD IS",FremhevMerkedeStier:"HIGHLIGHT MARKED TRAILS",Friluft_title:"Hiking and outdoor recreation","Geografisk koordinat":"Geographical coordinate",GiPunktetNavn:"GIVE YOUR POINT A NAME:","GÃ¥rds og bruksnummer":"Cadastral identifier",HeightEstimatedByInterpolation_text:"Height (estimated by interpolation): ",HereYouFind_text:"HERE YOU FIND: ",In:"in",Large:"L",Luftfartshindre_title:"Aviation",MeasureLine_title:"Measure length",Measure_title:"Measure area",Medium:"M",MetersAboveSeaLevel:"m.a.s.l.",Municipality:" municipality",NGO1948_GaussK_1:"NGO1948, Gauss-K. Axis 1",NGO1948_GaussK_2:"NGO1948, Gauss-K. Axis 2",NGO1948_GaussK_3:"NGO1948, Gauss-K. Axis 3",NGO1948_GaussK_4:"NGO1948, Gauss-K. Axis 4",NGO1948_GaussK_5:"NGO1948, Gauss-K. Axis 5",NGO1948_GaussK_6:"NGO1948, Gauss-K. Axis 6",NGO1948_GaussK_7:"NGO1948, Gauss-K. Axis 7",NGO1948_GaussK_8:"NGO1948, Gauss-K. Axis 8",Next:"NEXT >",Nodplakat:"Emergency poster",NodplakatText1:"The emergency poster is developed in collaboration with the Joint Rescue centers and emergency services. Kartverket is responsible for the data, ie, place names and maps - as well as the technology.",NodplakatText2:"It is the user's responsibility to verify that it is the correct cabin or location shown on the poster.",NodplakatText3:"Kartverket assumes no responsibility for any errors caused by user, data or technology.",PlaceIs:"THE PLACE IS:",Scale:"Scale",Small:"S",Stedsnavn:"Place name",Stedsnavn_title:"Placenames",Tilgjengelighet_title:"Availability",TransformCoor_title:"Transform coordinates",Turkart_info:"Move the map so that the yellow area covers the area you want to print.",Turkart_navn:"GIVE YOUR MAP A NAME: ",Turkart_navn_eks:"Hiking map name",Turkart_title:"MY HIKING MAP","UTM-koordinat":"UTM-coordinate",UseMapView_title:"Use map view",Vegnavn:"Road name",administrative_omrader:"Administrative units",adresser:"Addresses",amtskart:"Amtskart",andre:"Other",andre_linjehindre:"Other line obstacles",andre_linjer_40m_60m:"Other line obstacles 40m-60m",andre_linjer_60m_og_over:"Other line obstacles 60m and above",andre_linjer_under_40m:"Other line obstacles below 40m",andre_linjer_uten_hoyde:"Other line obstacles without height",annen:"Other routes",annen_gradering:"Other routes with degree of difficulty",annen_rute_ekspert:"Expert only",annen_rute_enkel:"Easy",annen_rute_gradering_ikke_angitt:"Degree of difficulty not specified",annen_rute_ingen_gradering:"No degree of difficulty",annen_rute_krevende:"Advanced",annen_rute_middels:"Intermediat",avslatt:"Spelling denied ",baderampe:"Bathing ramp",bakgrunnskart:"Base map layer",bosetning_eiendom:"Settlement/property",bygninger:"Buildings",cancel:"Cancel",change_txt:"EDIT",chooseFile_txt:"CHOOSE FILE",close_txt:"CLOSE",collapse_txt:"HIDE",color_txt:"COLOR:",copyLink_txt:"COPY LINK",copy_txt:"COPY",dekning:"Coverage",dele_kartet:"Share map",downloadEmergencyPoster:"DOWNLOAD",download_txt:"DOWNLOAD",drawInMap_txt:"DRAW IN THE MAP",drawProfile_txt:"DRAW ELEVATION PROFILE",elektron_sjokart:"Electronic Nautical Charts",elevationProfile_menu:"ELEVATION PROFILE",email_txt:"SEND AS E-MAIL",empty_txt:"EMPTY",enkel:"Simplified",epost:"E-mail",expand_txt:"SHOW",facebook_txt:"FACEBOOK",fakta:"Facts",fastmerker:"Geodetic reference points",ferskvann:"Fresh water",fiskeplass:"Fishing spot",flybilder:"Aerial images",forenklet_vedtak:"Simplified descicion",foreslatt:"Proposed",fotrute_ekspert:"Expert only",fotrute_enkel:"Easy",fotrute_gradering:"Hiking route with degree of difficulty",fotrute_gradering_ikke_angitt:"Degree of difficulty not specified",fotrute_ingen_gradering:"No degree of difficulty",fotrute_krevende:"Advanced",fotrute_middels:"Intermediat",fotrute_type_ikke_angitt:"Not specified",fotruter:"Hiking routes",fotrutetype:"Type of special walking routes",friluft_elektrisk_rullestol:"Recreation electric wheelchair",friluft_rullestol:"Recreation wheelchair",friluft_syn:"Recreation sight",friluftsomrade:"Recreational area",gapahukhytte:"Shelter",godkjent:"Spelling approved",gradering:"Hiking trails with degree of difficulty",gratone:"Grey scale map",grillbalplass:"Barbecue bonfire",havnekart:"Harbour Charts",svalbardkart_sjo:"Main Charts Svalbard",hc_parkering:"HC parking",historikk:"Historical maps",historisk:"Historical",historisk_ferdselsrute:"Ancient trail",holding_number:"Holding nr.",houseNr_txt:"House nr.",hovedkart_sjo:"Main Charts",hva_vil_du_gjore:"What do you want to do?",iframe_longDesc:"Long description",iframe_shortDesc:"Short description",inngang_bygg:"Building access",internasjonalt:"International",ja:"Yes",jan_mayen:"Jan Mayen",klage_vedtak_ikke_trukket_tilbake:"Appealed, descition not withdrawn",klage_vedtak_trukket_tilbake:"Appealed, descition withdrawn",klage_vedtak_utsatt:"Appealed, descision postponed",kommunenes_fjelltopper:"Mountain tops by municipality",kontakt_oss:"Contact us",kontakt_oss_info:"We are grateful for any input you may have regarding norgeskart.no. You can contact us in the following ways:",kontakt_oss_tittel:"Feedback",koordTrans:"SEE COORDINATES",koord_info:"Choose a coordinate system from the list to transform.",koord_nord:"North",koord_ost:"East",koord_tittel:"Coordinates",koord_vis_flere:"Show advanced coordinate systems.",kraftledning_40m_60m:"Power line 40m-60m",kraftledning_60m_og_over:"Power line 60m and above",kraftledning_under_40m:"Power line below 40 m",kraftledning_uten_hoyde:"Power line without height",kraftledninger:"Power lines",kraftstolpe_40m_60m:"Power line mast 40m-60m",kraftstolpe_60m_og_over:"Power line mast 60m and above",kraftstolpe_under_40m:"Power line mast below 40m",kraftstolpe_uten_hoyde:"Power line mast without height",kultur:"Culture",kultursti:"Herritage path",kvensk:"Kven",kystkart:"Coastal Charts",kyststi:"Costal trail",lagNodplakat:"MAKE EMERGENCY POSTER",lagTurkart:"MAKE MAP",lag_hoydeprofil:"Elevation profile",landkart:"Topographic map",landsnettpunkter:"Geodetic control points - Landsnett",lease_number:"Lease nr.",legend_txt:"Legend",lineType_txt:"LINE TYPE:",line_txt:"LINE",linjepunkt_40m_60m:"Line point 40m-60m",linjepunkt_60m_og_over:"Line point 60m and above",linjepunkt_under_40m:"Line point below 40m",linjepunkt_uten_hoyde:"Line point without height",linkToEmbeddedMap_txt:"LINK TO EMBEDDED MAP",login:"Log in",logout:"Logout",lulesamisk:"Lule Sami",markslag:"Type of land",matrikkel_data:"Cadastre data",menu:"Menu",municipality_name:"Municipality",municipality_number:"Municipality nr.",natursti:"Educational path",navnesak_reist:"Place name issue proposed",navnesak_vedtak:"Place name issue discided",navnesakstatus:"Place name status",navnesakstatus_ubehandlet:"Name place issue not descided",navnetype:"Name type",nei:"No",niv_fastmerker:"Levelling benchmarks",nordsamisk:"Northern Sami",norge_1_50000:"Norway 1:50000",norsk:"Norwegian",ok_1_utgave:"Economic chart 1. Edition",opacity_txt:"TRANSPARENCY:",overseilingskart:"General Charts",parkerings_omrade:"Parking area",parkeringsomrader:"Parking areas",password:"Password",pointType_txt:"POINT TYPE:",point_txt:"POINT",polygon_txt:"POLYGON",privat:"Private",profileInfo_txt:"Click in the map and start draw the line. Finish drawing by double click.",property_moreResults:"Associated properties",punkthindre:"Point obstacle",punkthindre_40m_60m:"Point obstacle 40m-60m",punkthindre_60m_og_over:"Point obstacle 60m and above",punkthindre_under_40m:"Point obstacle below 40 m",punkthindre_uten_hoyde:"Point obstacle without height",rasterkart:"Raster map",remove_txt:"DELETE",ruteinfopunkt:"ruteinfopunkt",samferdsel:"Transport",samlevedtak:"Collective decisions",samlevedtak_siste_12_mnd:"Collective decisions last 12 mths",samlevedtak_siste_24_mnd:"Collective decisions last 24 mths",samlevedtak_siste_3_mnd:"Collective decisions last 3 mths",samlevedtak_siste_6_mnd:"Collective decisions last 6 mths",samlevedtak_siste_mnd:"Collective decisions last month",samlevedtak_trukket_tilbake:"Collective decisions withdrawn",save_txt:"SAVE",seEiendom:"SEE PROPERTY INFORMASJON",seEiendom_title:"Property",search:"Search",searchResult_addresses:"ADDRESSES",searchResult_cadastre:"PROPERTIES",searchResult_houseNumber:"Housenumber",searchResult_placenames:"PLACENAMES",searchResult_roads:"ROADS",search_text:"Search Norgeskart",section_number:"Section nr.",shareOnline_txt:"SHARE ONLINE",showCoordinates_txt:"SHOW COORDINATES ON THE MAP",showElevationProfile_txt:"SHOW ELEVATION PROFILE",showMeasurements_txt:"SHOW MEASUREMENTS",showMoreInformation:"SHOW MORE INFORMATION",showSelection_txt:"SHOW SELECTION",sittegruppe:"Seating",size_txt:"SIZE:",sjo:"Nautical",sjokart:"Nautical Charts",skal_ikke_behandles_etter_loven:"Not to be descided by law",skiloype_ekspert:"Expert only",skiloype_enkel:"Easy",skiloype_gradering:"Ski trails with degree of difficulty",skiloype_gradering_ikke_angitt:"Degree of difficulty not specified",skiloype_ingen_gradering:"No degree of difficulty",skiloype_krevende:"Advanced",skiloype_middels:"Intermediate",skiloyper:"Ski trails",skriv_ut:"Print",skrivematestatus:"Spelling status",snap_txt:"SNAP",sorsamisk:"Southern Sami",sprak:"Language",ssrFakta:"SEE FACTS ABOUT PLACENAME",stamnettpunkter:"Geodetic control points - Stamnett",statlig_sikret:"Government secured",subholding_number:"Subholding nr.",svalbard:"Svalbard",sykkel_gradering:"Bicycle routes with degree of difficulty",sykkelrute_ekspert:"Expert only",sykkelrute_enkel:"Easy",sykkelrute_gradering_ikke_angitt:"Degree of difficulty not specified",sykkelrute_ingen_gradering:"No degree of difficulty",sykkelrute_krevende:"Advanced",sykkelrute_middels:"Intermediate",sykkelruter:"Bicycle routes",annenruter:"Other routes",tegne_og_male:"Draw and measure",teiger_og_grenser:"Properties and borders",telefon:"Phone",temakart:"Thematic map",terreng:"Terrain",terrengformer:"Terrain forms",tettsted_elektrisk_rullestol:"Village electric wheelchair",tettsted_rullestol:"Village wheelchair",tettsted_syn:"Village sight",text_txt:"TEXT",text_txt_label:"TEXT:",tips_og_triks:"Tips and Tricks",toalett:"Toilet",trekantpunkter:"Triangulation points",trimloype:"Exercise trail",tur_og_friluftsruter:"Hiking and outdoor recreation",turisthytte:"Cabin",turvei:"Walking trail",twitter_txt:"TWITTER",ubehandlet:"Place name status not descided",uploadFile_txt:"UPLOAD FILE",username:"Username",utm_rutenett:"UTM-grid",uvurdert:"Spelling not concidered",vedtak:"Descisions",vedtak_siste_12_mnd:"Descided within the last 12 mths",vedtak_siste_24_mnd:"Descided within the last 24 mths",vedtak_siste_3_mnd:"Descided within the last 3 mths",vedtak_siste_6_mnd:"Descided within the last 6 mths",vedtak_siste_mnd:"Descided within the last mth",vedtak_utsatt:"Descision postponed",vedtatt:"Descided",vedtatt_av_navnemyndighet:"Descicion made by place name authority",vedtatt_navneledd:"Place name part descided",vei:"Road",width_txt:"WIDTH:",no_search_hits:"Your search contained no results.",no_search_hits_line2:"You can search for address, placename or coordinates.",for_example_txt:"For example:",search_options_txt:"For other search options, see the Tips and tricks menu.",geoJson_converted:"GeoJSON has been converted",template_type:"Template type",map_name:"Map name",cancel_print:"Cancel print",print_format:"Format",print_dpi:"DPI",generate_print:"GENERATE PRINT FILE","1_A4_portrait":"A4 portrait","2_A4_landscape":"A4 landscape","3_A3_portrait":"A3 portrait","4_A3_landscape":"A3 landscape",showNauticalMiles_txt:"NAUTICAL MILES",privacy_policy:"Privacy policy",privacy_policy_title:"Privacy policy and cookies",privacy_policy_info:"Read about how we protect your personal data in our ",privacy_policy_link:"privacy policy",chat_with_kartverket:"Chat with Kartverket",fail_to_load_faq:"Fail to load tips and tricks",searchResult_noMatrikkel:"has no known cadastral parcels. Click here to see information about the property.",multipleAdressesText:"The property has several addresses"}}),angular.module("localStorage",[]),angular.module("localStorage").factory("localStorageFactory",["$parse",function(e){var n=void 0===window.localStorage?void 0:window.localStorage,r=!(void 0===n||void 0===window.JSON),i=function(e){var n;try{void 0===(n=JSON.parse(e))&&(n=e),"true"==n&&(n=!0),"false"==n&&(n=!1),parseFloat(n)!=n||angular.isObject(n)||(n=parseFloat(n))}catch(t){n=e}return n},o={set:function(e,o){if(!r)try{return $.cookie(e,o),o}catch(t){}var a=JSON.stringify(o);return n.setItem(e,a),i(a)},get:function(e){if(!r)try{return i($.cookie(e))}catch(t){return null}var o=n.getItem(e);return i(o)},remove:function(e){if(!r)try{return $.cookie(e,null),!0}catch(t){return!1}return n.removeItem(e),!0},bind:function(t,n,r){return r=r||"",o.get(n)||o.set(n,r),e(n).assign(t,o.get(n)),t.$watch(n,(function(t){o.set(n,t)}),!0),o.get(n)}};return o}]),angular.module("mapLayout",[]),angular.module("mapLayout").controller("mapLayoutController",["$scope",function(t){t.disableEmbed=function(){var t=location.href.replace(/[\?|\&]type\=[0-9]+/,"");window.open(t,"_blank")}}]),angular.module("mapLayout").directive("mapLayout",[function(){return{templateUrl:"shared/mapLayout/mapLayout.html",restrict:"A",controller:"mapLayoutController",link:function(){}}}]),angular.module("mapOverlaysLayout",[]),angular.module("mapOverlaysLayout").controller("mapOverlaysLayoutController",["$scope","mapOverlaysLayoutFactory",function(t,e){t.showSearchOverlay=function(){return e.getShowSearchOverlay()},t.isGeolocationDisabled="geolocation"in navigator==!1||"https:"!==location.protocol,t.getGeolocation=function(){navigator.geolocation.getCurrentPosition(e.currentPosition)}}]),angular.module("mapOverlaysLayout").directive("mapOverlaysLayout",[function(){return{templateUrl:"shared/mapOverlaysLayout/mapOverlaysLayout.html",restrict:"A",controller:"mapOverlaysLayoutController",link:function(){}}}]),angular.module("mapOverlaysLayout").factory("mapOverlaysLayoutFactory",["ISY.MapAPI.Map",function(t){var e=!0,n="";return{setShowSearchOverlay:function(t){e=t},getShowSearchOverlay:function(){return e},getSelectedBaseLayerName:function(){return n},setBaseLayerByName:function(t){n=t},currentPosition:function(e){var n=t.TransformCoordinates("EPSG:4326",t.GetEpsgCode(),[e.coords.longitude,e.coords.latitude]);t.SetCenter({lon:n[0],lat:n[1]}),t.SetZoom(13)}}}]),angular.module("ISY.Angular",["ISY.Angular.MapAPI","ISY.Angular.MapImplementation"]).service("ISY.CustomMapConfig",["$location","$window",o.CustomMapConfig]).service("ISY.ConfigFacade",[o.Facade.ServerConfigFacade]).service("ISY.EventHandler",[o.Events.EventHandler]).service("ISY.Repository",["ISY.ConfigFacade","ISY.EventHandler",o.Repository.ConfigRepository]),angular.module("ISY.Angular.MapAPI",[]).service("ISY.MapAPI.Map",["ISY.MapImplementation.Map","ISY.EventHandler","ISY.MapAPI.FeatureInfo","ISY.MapAPI.Layers","ISY.MapAPI.Groups","ISY.MapAPI.Categories",o.MapAPI.Map]).service("ISY.MapAPI.FeatureInfo",["ISY.MapImplementation.Map","$http","ISY.EventHandler","ISY.MapAPI.Parsers.Base",o.MapAPI.FeatureInfo]).service("ISY.MapAPI.Layers",["ISY.MapImplementation.Map",o.MapAPI.Layers]).service("ISY.MapAPI.Groups",[o.MapAPI.Groups]).service("ISY.MapAPI.Categories",[o.MapAPI.Categories]).service("ISY.MapAPI.Tools.Tools",["ISY.MapAPI.Map","ISY.EventHandler",o.MapAPI.Tools.Tools]).service("ISY.MapAPI.Tools.ToolFactory",["ISY.MapImplementation.Map","ISY.MapAPI.Tools.Tools",o.MapAPI.Tools.ToolFactory]).service("ISY.MapAPI.Parsers.Base",["ISY.MapAPI.Parsers.Factory",o.MapAPI.Parsers.Base]).service("ISY.MapAPI.Parsers.GeoJSON",[o.MapAPI.Parsers.GeoJSON]).service("ISY.MapAPI.Parsers.GML",[o.MapAPI.Parsers.GML]).service("ISY.MapAPI.Parsers.KartKlifNo",[o.MapAPI.Parsers.KartKlifNo]).service("ISY.MapAPI.Parsers.FiskeriDir",["ISY.MapImplementation.OL3.Utilities",o.MapAPI.Parsers.FiskeriDir]).service("ISY.MapAPI.Parsers.Factory",["ISY.MapAPI.Parsers.GeoJSON","ISY.MapAPI.Parsers.GML","ISY.MapAPI.Parsers.KartKlifNo","ISY.MapAPI.Parsers.FiskeriDir",o.MapAPI.Parsers.Factory]),angular.module("ISY.Angular.MapImplementation",[]).service("ISY.MapImplementation.Map",["ISY.Repository","ISY.EventHandler","$http","ISY.MapImplementation.OL3.Measure","ISY.MapImplementation.OL3.FeatureInfo","ISY.MapImplementation.OL3.Export","ISY.MapImplementation.OL3.HoverInfo","ISY.MapImplementation.OL3.MeasureLine","ISY.MapImplementation.OL3.DrawFeature","ISY.MapImplementation.OL3.Offline","ISY.MapImplementation.OL3.AddLayerFeature","ISY.MapImplementation.OL3.ModifyFeature","ISY.MapImplementation.OL3.AddFeatureGps","ISY.MapImplementation.OL3.PrintBox","ISY.MapImplementation.OL3.PrintBoxSelect","ISY.MapImplementation.OL3.AddLayerUrl",o.MapImplementation.OL3.Map]).service("ISY.MapImplementation.OL3.Utilities",[o.MapImplementation.OL3.Utilities]).service("ISY.MapImplementation.OL3.Measure",["ISY.EventHandler",o.MapImplementation.OL3.Measure]).service("ISY.MapImplementation.OL3.FeatureInfo",[o.MapImplementation.OL3.FeatureInfo]).service("ISY.MapImplementation.OL3.Export",[o.MapImplementation.OL3.Export]).service("ISY.MapImplementation.OL3.HoverInfo",[o.MapImplementation.OL3.HoverInfo]).service("ISY.MapImplementation.OL3.MeasureLine",["ISY.EventHandler",o.MapImplementation.OL3.MeasureLine]).service("ISY.MapImplementation.OL3.DrawFeature",["ISY.EventHandler",o.MapImplementation.OL3.DrawFeature]).service("ISY.MapImplementation.OL3.Offline",[o.MapImplementation.OL3.Offline]).service("ISY.MapImplementation.OL3.AddLayerFeature",["ISY.EventHandler",o.MapImplementation.OL3.AddLayerFeature]).service("ISY.MapImplementation.OL3.ModifyFeature",["ISY.EventHandler",o.MapImplementation.OL3.ModifyFeature]).service("ISY.MapImplementation.OL3.AddFeatureGps",["ISY.EventHandler",o.MapImplementation.OL3.AddFeatureGps]).service("ISY.MapImplementation.OL3.PrintBox",["ISY.EventHandler",o.MapImplementation.OL3.PrintBox]).service("ISY.MapImplementation.OL3.PrintBoxSelect",["ISY.EventHandler",o.MapImplementation.OL3.PrintBoxSelect]).service("ISY.MapImplementation.OL3.AddLayerUrl",["ISY.EventHandler",o.MapImplementation.OL3.AddLayerUrl]),angular.module("ISY.Angular").service("ISY.ApiController",["ISY.CustomMapConfig",o.ApiController.BuildVersion]).constant("Environment","build"),angular.module("ISY.Angular").service("ISY.ApiController",["ISY.CustomMapConfig",o.ApiController.DistVersion]).constant("Environment","dist"),angular.module("templates-app",["components/overlays/changeBaseMapOverlay/changeBaseMapOverlay.html","components/overlays/mainMenuOverlay/mainMenuOverlay.html","components/overlays/mapOverlays/mapOverlays.html","components/overlays/moveableOverlay/moveableOverlay.html","components/overlays/searchBarOverlay/searchBarOverlay.html","components/transclusions/changeBaseLayerPanel/changeBaseLayerPanel.html","components/transclusions/mainMenuPanel/mainMenuBaseLayers/mainMenuBaseLayers.html","components/transclusions/mainMenuPanel/mainMenuContact/mainMenuContact.html","components/transclusions/mainMenuPanel/mainMenuFaq/mainMenuFaq.html","components/transclusions/mainMenuPanel/mainMenuGroupLayers/mainMenuGroupLayers.html","components/transclusions/mainMenuPanel/mainMenuPanel.html","components/transclusions/mainMenuPanel/mainMenuPrivacy/mainMenuPrivacy.html","components/transclusions/mainMenuPanel/mainMenuSections/mainMenuSections.html","components/transclusions/menuDraw/menuDraw.html","components/transclusions/menuElevationProfile/menuElevationProfile.html","components/transclusions/menuElevationProfile/menuElevationProfilePage1/menuElevationProfilePage1.html","components/transclusions/menuElevationProfile/menuElevationProfilePage2/menuElevationProfilePage2.html","components/transclusions/menuPrint/menuPrint.html","components/transclusions/menuShareMap/menuShareMap.html","components/transclusions/searchPanel/searchKoordTransPanel/searchKoordTransPanel.html","components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanel.html","components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage1/searchLagNodplakatPanelPage1.html","components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage2/searchLagNodplakatPanelPage2.html","components/transclusions/searchPanel/searchLagTurkartPanel/searchLagTurkartPanel.html","components/transclusions/searchPanel/searchOptionsPanel/mapGetFeatures/mapGetFeatures.html","components/transclusions/searchPanel/searchOptionsPanel/searchOptionsPanel.html","components/transclusions/searchPanel/searchPanel.html","components/transclusions/searchPanel/searchResultsPanel/searchResultsPanel.html","components/transclusions/searchPanel/searchSeEiendomPanel/searchSeEiendomPanel.html","components/transclusions/searchPanel/searchSeHavnivaaPanel/searchSeHavnivaaPanel.html","components/transclusions/searchPanel/searchStedsnavnPanel/searchStedsnavnPanel.html","mainAppBody.html","shared/mapLayout/mapLayout.html","shared/mapOverlaysLayout/mapOverlaysLayout.html"]),angular.module("components/overlays/changeBaseMapOverlay/changeBaseMapOverlay.html",[]).run(["$templateCache",function(t){t.put("components/overlays/changeBaseMapOverlay/changeBaseMapOverlay.html",'<div change-base-layer-panel class="change-base-layer-overlay"></div>\n')}]),angular.module("components/overlays/mainMenuOverlay/mainMenuOverlay.html",[]).run(["$templateCache",function(t){t.put("components/overlays/mainMenuOverlay/mainMenuOverlay.html","<div main-menu-panel></div>")}]),angular.module("components/overlays/mapOverlays/mapOverlays.html",[]).run(["$templateCache",function(t){t.put("components/overlays/mapOverlays/mapOverlays.html",'<div moveable-overlay class="moveableOverlay" data-ng-show="menuShowMoveableOverlay(\'DrawMenu\')">\n    <div menu-draw class="movemenu overlayContent"></div>\n</div>\n<div ng-switch="moveableOverlayLayout" moveable-overlay class="moveableOverlay" data-ng-show="isAnyOverlayActive()">\n    <div ng-switch-when="menuElevationProfileLayout" menu-elevation-profile class="movemenu overlayContent"></div>\n    <div ng-switch-when="menuShareMapLayout" menu-share-map class="movemenu overlayContent"></div>\n    <div ng-switch-when="menuPrintLayout" menu-print class="movemenu overlayContent" data-ng-init="initMainPrintProtocol()"></div>\n</div>\n\n<div main-menu-overlay></div>\n<div search-bar-overlay data-ng-show="showSearchOverlay()"></div>\n<div class="change-base-map-mobile" change-base-map-overlay></div>\n\n')}]),angular.module("components/overlays/moveableOverlay/moveableOverlay.html",[]).run(["$templateCache",function(t){t.put("components/overlays/moveableOverlay/moveableOverlay.html",'<div id="header1" class="header">\n    <div id="header2" class="row">\n        <div id="header3" class="col-xs-7">\n            <span id="header5" class="icon-important" data-ng-class="headerIcon"></span>\n            <span class="header-icon text-uppercase" id="header6" translate="{{header}}"></span>\n        </div>\n        <div id="header4" class="col-xs-5">\n            <div class="pull-right">\n                <div class="hide-button" data-ng-click="expandMenu.open = !expandMenu.open">\n                    <span data-ng-show="!expandMenu.open" class="glyphicon glyphicon-menu-up"></span>\n                    \x3c!--<span data-ng-show="!expandMenu.open" translate="collapse_txt"></span>--\x3e\n                    <span data-ng-show="expandMenu.open" class="glyphicon glyphicon-menu-down"></span>\n                    \x3c!--<span data-ng-show="expandMenu.open" translate="expand_txt"></span>--\x3e\n                </div>\n                <div class="closebtn" data-ng-click="closeOverlay()">\n                    <span class="glyphicon glyphicon-menu-right"></span>\n                    <span class="glyphicon glyphicon-menu-left"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div ng-transclude></div>\n')}]),angular.module("components/overlays/searchBarOverlay/searchBarOverlay.html",[]).run(["$templateCache",function(t){t.put("components/overlays/searchBarOverlay/searchBarOverlay.html",'<div search-panel class="search-bar-overlay"></div>')}]),angular.module("components/transclusions/changeBaseLayerPanel/changeBaseLayerPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/changeBaseLayerPanel/changeBaseLayerPanel.html",'<div class="base-layer-panel">\n    <button tabindex="-1" type="button" class="btn btn-default btn-toggle" data-ng-repeat="baseLayer in allBaseLayers()" data-ng-class="{activeBtn: baseLayer.isSelected}" data-ng-click="toggleBaseLayer(baseLayer.id)">\n        <div class="baseMap" data-ng-class="baseLayer.symbol" title="{{baseLayer.title}}"></div>\n    </button>\n</div>\n')}]),angular.module("components/transclusions/mainMenuPanel/mainMenuBaseLayers/mainMenuBaseLayers.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/mainMenuPanel/mainMenuBaseLayers/mainMenuBaseLayers.html",'<div class="sidenav-group">\n    <ul>\n        <li tabindex="0" ng-keypress="showMainMenuSections()" data-ng-click="showMainMenuSections()">\n            <div class="sidenav-header-text row">\n                <div class="col-xs-1">\n                    <span class="icon-toggle-on fa fa-map"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span class="text-uppercase"><span translate="bakgrunnskart"></span>:</span>\n                    <span translate="{{getSelectedBaseLayerName()}}"></span>\n                    <div class="backbtn">\n                        <span class="glyphicon glyphicon-menu-left"></span>\n                    </div>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n\n<div class="sidenav-group">\n    <ul>\n        <li tabindex="0" class="sidenav-sections" data-ng-repeat="baseLayer in baseLayers | filter: {name: \'!!\' }" ng-keypress="setAsBaseLayer(baseLayer)" data-ng-click="setAsBaseLayer(baseLayer)">\n            <div class="row">\n                <div class="col-xs-1">\n                    <span data-ng-class="getBaseLayerStyle(baseLayer)"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span translate="{{baseLayer.name}}"></span>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n')}]),angular.module("components/transclusions/mainMenuPanel/mainMenuContact/mainMenuContact.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/mainMenuPanel/mainMenuContact/mainMenuContact.html",'<div class="sidenav-group">\n  <ul>\n    <li tabindex="0" data-ng-click="showMainMenuSections()" ng-keypress="showMainMenuSections()">\n      <div class="sidenav-header-text row">\n        <div class="col-xs-1">\n          <span class="fa fa-comment"></span>\n        </div>\n        <div class="col-xs-11">\n          <span class="text-uppercase" translate="kontakt_oss"></span>\n          <div class="backbtn">\n            <span class="glyphicon glyphicon-menu-left"></span>\n          </div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</div>\n<div class="sidenav-group">\n  <article class="content">\n    <h2><span translate="kontakt_oss_tittel"></span></h2>\n    <p><span translate="kontakt_oss_info"></span></p>\n    <p><span translate="telefon"></span>: 32 11 80 00</p>\n    <p><span translate="epost"></span>: <a href="mailto:post@kartverket.no?subject=norgeskart.no">post@kartverket.no</a></p>\n  </article>\n</div>\n')}]),angular.module("components/transclusions/mainMenuPanel/mainMenuFaq/mainMenuFaq.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/mainMenuPanel/mainMenuFaq/mainMenuFaq.html",'<div class="sidenav-group">\n  <ul>\n    <li tabindex="0" data-ng-click="showMainMenuSections()" ng-keypress="showMainMenuSections()">\n      <div class="sidenav-header-text row">\n        <div class="col-xs-1">\n          <span class="fa fa-question"></span>\n        </div>\n        <div class="col-xs-11">\n          <span class="text-uppercase" translate="tips_og_triks"></span>\n          <div class="backbtn">\n            <span class="glyphicon glyphicon-menu-left"></span>\n          </div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</div>\n<div class="sidenav-group faq-items">\n  <div class="spinner-content" data-ng-show="spinnerIsVisible">\n    <div class="app-spinner">\n      <svg class="spinner" viewBox="25 25 50 50">\n        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />\n      </svg>\n    </div>\n  </div>\n  <div class="row" data-ng-show="!spinnerIsVisible">\n    <div class="col-xs-12">\n      <div data-ng-show="failToLoadFaq" class="failToLoad">\n        <span translate="fail_to_load_faq"></span>\n      </div>\n      <ul>\n        <li data-ng-repeat="faqItem in faqItems track by $index" data-ng-click="toggleItem($index)" data-ng-class="{\'itemHeader\': $index == selectedItem}">\n          <div class="row">\n            <div class="col-xs-11">\n              <span data-ng-bind="faqItem.question"></span>\n            </div>\n            <div class="col-xs-1">\n              <span class="nextbtn glyphicon glyphicon-menu-down" data-ng-class="$index == selectedItem ? \'glyphicon-menu-up\' : \'glyphicon-menu-down\'"></span>\n            </div>\n          </div>\n          <div class="row itemBody" data-ng-show="$index == selectedItem" data-ng-click="faqItem.open = faqItem.open; $event.stopPropagation();">\n            <div class="col-xs-12">\n              <div class="itemText anchorLink" ng-bind-html="faqItem.answer"></div>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n')}]),angular.module("components/transclusions/mainMenuPanel/mainMenuGroupLayers/mainMenuGroupLayers.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/mainMenuPanel/mainMenuGroupLayers/mainMenuGroupLayers.html",'<div class="sidenav-group">\n  <ul>\n    <li tabindex="0" data-ng-click="removeGroups(); showMainMenuSections()" ng-keypress="removeGroups(); showMainMenuSections()">\n      <div class="sidenav-header-text row">\n        <div class="col-xs-1">\n          <span data-ng-class="selectedProject.symbol" data-ng-bind="selectedProject.symbol_text"></span>\n        </div>\n        <div class="col-xs-11">\n          <span translate="{{selectedProject.title}}"></span>\n          <div class="backbtn">\n            <span class="glyphicon glyphicon-menu-left"></span>\n          </div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</div>\n<div class="sidenav-group">\n  <ul>\n    <li tabindex="0" class="sidenav-sections" data-ng-repeat="group in groupLayers" data-ng-click="group.isOpen = !group.isOpen;"\n      ng-keypress="group.isOpen = !group.isOpen;">\n      <div class="row">\n        <div class="col-xs-1">\n          <span data-ng-class="getGroupStyleStatus(group)" data-ng-click="toggleGroup(group); $event.stopPropagation();"></span>\n        </div>\n        <div class="col-xs-11">\n          <span translate="{{group.name}}"></span>\n          <span class="backbtn glyphicon glyphicon-menu-down" data-ng-show="!group.isOpen"></span>\n          <div class="backbtn" data-ng-show="group.isOpen">\n            <span class="glyphicon glyphicon-menu-up"></span>\n          </div>\n        </div>\n      </div>\n      <ul data-ng-show="group.isOpen">\n        <li tabindex="0" data-ng-repeat="isyLayer in group.isyLayers" data-ng-click="toggleLayer(isyLayer); $event.stopPropagation();"\n          ng-keypress="toggleLayer(isyLayer); $event.stopPropagation();">\n          <div class="row">\n            <div class="col-xs-1">\n              <span data-ng-class="getLayerStyleStatus(isyLayer)"></span>\n            </div>\n            <div class="col-xs-9">\n              <span translate="{{isyLayer.name}}"></span>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </li>\n  </ul>\n</div>\n<div class="sidenav-group">\n  <ul>\n    <li tabindex="0" class="sidenav-sections" data-ng-click="legend.open = !legend.open" ng-keypress="legend.open = !legend.open">\n      <div class="row">\n        <div class="col-xs-11">\n          <span translate="legend_txt"></span>\n        </div>\n        <div class="col-xs-1">\n          <span data-ng-show="legend.open" class="backbtn glyphicon glyphicon-menu-up"></span>\n          <span data-ng-show="!legend.open" class="backbtn glyphicon glyphicon-menu-down"></span>\n        </div>\n      </div>\n    </li>\n  </ul>\n  <div class="legend-panel" data-ng-show="!legend.open">\n    <ul class="group-layer-fix">\n      <li data-ng-repeat="group in groupLayers | filter:groupFilter">\n        <div class="row" data-ng-show="checkMatrikkel(group)">\n          <div class="legend1"></div>\n          <div class="legend2"></div>\n        </div>\n        <ul>\n          <li data-ng-repeat="isyLayer in group.isyLayers | filter:legendFilter">\n            <div class="row">\n              <div class="col-xs-9">\n                <span translate="{{isyLayer.name}}"></span>\n              </div>\n              <div class="col-xs-10">\n                <img class="legend" data-ng-src="{{GetLegendGraphicUrl(isyLayer)}}">\n              </div>\n            </div>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</div>\n')}]),angular.module("components/transclusions/mainMenuPanel/mainMenuPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/mainMenuPanel/mainMenuPanel.html",'<div id="mySidenav" class="sidenav">\n    <div id="sideMenuPosition" class="side-menu-position">\n        <div class="norgeskart-logo">\n            <button class="close" data-ng-click="closeNav(); addResultsToMap(); showMainMenuSections()" type="button">\n                <span class="menuCloseBtn">&times;</span>\n            </button>\n            <h1>\n                <a data-ng-click="resetApplication($event)" href=".">\n                    <span class="norgeskart-logo-image"></span>\n                        Norgeskart</a>\n\n            </h1>\n        </div>\n\n        <div ng-switch="mainMenuPanelLayout">\n            <div ng-switch-when="mainMenuSections" main-menu-sections></div>\n            <div ng-switch-when="mainMenuBaseLayers" main-menu-base-layers></div>\n            <div ng-switch-when="mainMenuGroupLayers" main-menu-group-layers></div>\n            <div ng-switch-when="mainMenuFaq" main-menu-faq ng-controller="mainMenuFaqController" ng-init="initFaq()"></div>\n            <div ng-switch-when="mainMenuContact" main-menu-contact></div>\n            <div ng-switch-when="mainMenuPrivacy" main-menu-privacy></div>\n        </div>\n        \x3c!-- <div class="footer">\n            <div class="chat">\n                <img src="../../../../assets/img/chat-blue.png" width="auto" height="40px">\n                <span translate="chat_with_kartverket"></span>\n            </div>\n        </div> --\x3e\n    </div>\n</div>\n\n\n\n')}]),angular.module("components/transclusions/mainMenuPanel/mainMenuPrivacy/mainMenuPrivacy.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/mainMenuPanel/mainMenuPrivacy/mainMenuPrivacy.html",'<div class="sidenav-group">\n    <ul>\n        <li tabindex="0" data-ng-click="showMainMenuSections()" ng-keypress="showMainMenuSections()">\n            <div class="sidenav-header-text row">\n                <div class="col-xs-1">\n                    <span class="fa fa-user-secret"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span class="text-uppercase" translate="privacy_policy"></span>\n                    <div class="backbtn">\n                        <span class="glyphicon glyphicon-menu-left"></span>\n                    </div>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n<div class="sidenav-group">\n    <article class="content">\n        <h2><span translate="privacy_policy_title"></span></h2>\n        <p><span translate="privacy_policy_info"></span>\n            <a ng-show="language.id === \'no\' || language.id === \'nn\'" href="https://www.kartverket.no/Om-Kartverket/Personvern/" translate="privacy_policy_link" target="_blank"></a>\n            <a ng-show="language.id === \'en\'" href="https://www.kartverket.no/en/About-The-Norwegian-Mapping-Authority/privacy-policy/" translate="privacy_policy_link" target="_blank"></a>\n        </p>\n    </article>\n</div>')}]),angular.module("components/transclusions/mainMenuPanel/mainMenuSections/mainMenuSections.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/mainMenuPanel/mainMenuSections/mainMenuSections.html",'<div class="sidenav-group">\n    <ul>\n        <li tabindex="0" ng-keypress="showMainMenuBaseLayers()" data-ng-click="showMainMenuBaseLayers()">\n            <div class="sidenav-header-text row">\n                <div class="col-xs-1">\n                    <span class="icon-toggle-on fa fa-map"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span class="text-uppercase"><span translate="bakgrunnskart"></span>:</span>\n                    <span translate="{{getSelectedBaseLayerName()}}"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n\n<div class="sidenav-group">\n    <div class="margin-header-text">\n        <div class="sidenav-header-text pointer-cursor row" data-ng-click="themaMenu.open = !themaMenu.open">\n            <div class="col-xs-1">\n                <span class="icon-important fa fa-map"></span>\n            </div>\n            <div class="col-xs-11">\n                <span class="text-uppercase" translate="temakart"></span>\n                <span data-ng-show="!themaMenu.open" class="upbtn glyphicon glyphicon-menu-up"></span>\n                <span data-ng-show="themaMenu.open" class="upbtn glyphicon glyphicon-menu-down"></span>\n            </div>\n        </div>\n    </div>\n    <ul data-ng-show="!themaMenu.open">\n        <li tabindex="0" data-ng-repeat="project in projects" data-ng-class="{activeMenu: project.isSelected}" data-ng-click="activateProject(project)" ng-keypress="activateProject(project)">\n            <div class="row">\n                <div class="col-xs-1">\n                    <span data-ng-class="project.symbol" data-ng-bind="project.symbol_text"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span translate="{{project.title}}"></span>\n                    <div class="pull-right">\n                    \x3c!--<span class="circle" data-ng-show="project.isSelected" data-ng-bind="getVisibleSubLayersCount()"></span>--\x3e\n                    <span class="badge" data-ng-show="project.isSelected" data-ng-bind="getVisibleLayersCount()"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                        </div>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n\n<div class="sidenav-group">\n    <div class="margin-header-text">\n        <div class="sidenav-header-text pointer-cursor row" data-ng-click="sectionMenu.open = !sectionMenu.open">\n            <div class="col-xs-10">\n                <span class="text-uppercase" translate="hva_vil_du_gjore"></span>\n            </div>\n            <div class="col-xs-2">\n                <span data-ng-show="!sectionMenu.open" class="upbtn glyphicon glyphicon-menu-up"></span>\n                <span data-ng-show="sectionMenu.open" class="upbtn glyphicon glyphicon-menu-down"></span>\n            </div>\n        </div>\n    </div>\n    <ul data-ng-show="!sectionMenu.open">\n        <li tabindex="0" class="sidenav-sections" data-ng-click="showMoveableDrawMenu();closeNav();initDrawFeatureTool()" ng-keypress="showMoveableDrawMenu();closeNav();initDrawFeatureTool()">\n            <div class="row">\n                <div class="col-xs-1">\n                    <span class="icon-important fa fa-pencil-alt"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span class="text-uppercase" translate="tegne_og_male"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </div>\n            </div>\n        </li>\n        <li tabindex="0" class="sidenav-sections" data-ng-click="showMoveableShareMapMenu(); closeNav()" ng-keypress="showMoveableShareMapMenu(); closeNav()">\n            <div class="row">\n                <div class="col-xs-1">\n                    <span class="icon-important fa fa-share-alt"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span class="text-uppercase" translate="dele_kartet"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </div>\n            </div>\n        </li>\n        <li tabindex="0" class="sidenav-sections" data-ng-click="showMoveablePrintMenu();closeNav()" ng-keypress="showMoveablePrintMenu();closeNav()">\n            <div class="row">\n                <div class="col-xs-1">\n                    <span class="icon-important fa fa-print"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span class="text-uppercase" translate="skriv_ut"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </div>\n            </div>\n        </li>\n        <li tabindex="0" class="sidenav-sections" data-ng-click="showMoveableElevationProfileMenu();closeNav()" ng-keypress="showMoveableElevationProfileMenu();closeNav()">\n            <div class="row">\n                <div class="col-xs-1">\n                    <span class="icon-important fa fa-chart-area"></span>\n                </div>\n                <div class="col-xs-11">\n                    <span class="text-uppercase" translate="lag_hoydeprofil"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n\n<div class="sidenav-group">\n    <div class="row">\n        <div class="col-xs-12">\n            <ul>\n                <li tabindex="0" data-ng-click="showMainMenuFaq()" ng-keypress="showMainMenuFaq()">\n                    <span translate="tips_og_triks"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </li>\n                <li tabindex="0" data-ng-click="showMainMenuContact()" ng-keypress="showMainMenuContact()">\n                    <span translate="kontakt_oss"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </li>\n                <li tabindex="0" data-ng-click="showMainMenuPrivacy()" ng-keypress="showMainMenuPrivacy()">\n                    <span translate="privacy_policy"></span>\n                    <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n\n<div class="sidenav-group">\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="tab-group">\n                <span class="tab-group-item" data-ng-class="{active: language.active}" data-ng-click="changeLanguage(language.id)" data-ng-repeat="language in languages" ng-keypress="changeLanguage(language.id)">\n                    {{language.title}}\n                </span>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/menuDraw/menuDraw.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/menuDraw/menuDraw.html",'<div class="panel-body">\n    <div data-ng-if="showConvertInfo" id="drawInfo" class="drawInfo">\n        <span translate="geoJson_converted"></span>\n    </div>\n    \x3c!-- Nav tabs --\x3e\n    <ul class="nav nav-tabs" data-ng-class="{navTabsTransparent: expandMenu.open}" role="tablist" id="myTabs">\n        <li data-ng-click="switchType(\'Point\')" role="presentation" class="active"><a href data-target="#point" aria-controls="point" role="tab" data-toggle="tab" translate="point_txt"></a></li>\n        <li data-ng-click="switchType(\'LineString\')" role="presentation"><a href data-target="#line" aria-controls="line" role="tab" data-toggle="tab" translate="line_txt"></a></li>\n        <li data-ng-click="switchType(\'Polygon\')" role="presentation"><a href data-target="#polygon" aria-controls="polygon" role="tab" data-toggle="tab" translate="polygon_txt"></a></li>\n        <li data-ng-click="switchType(\'Text\')" role="presentation"><a href data-target="#text" aria-controls="text" role="tab" data-toggle="tab" translate="text_txt"></a></li>\n    </ul>\n    \x3c!-- Tab panes --\x3e\n    <div data-ng-show="!expandMenu.open" class="tab-content search-content">\n        <div role="tabpanel" class="tab-pane active" id="point">\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-sm-6 col-xs-6">\n                        <div class="title-text">\n                            <span translate="pointType_txt"></span>\n                        </div>\n                        <div class="btn-same-size navigation-button">\n                            <button type="button" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: pointSymbol===\'Circle\'}" data-ng-click="switchSymbol(\'Circle\')">â</button>\n                            <button type="button" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: pointSymbol===\'Triangle\'}" data-ng-click="switchSymbol(\'Triangle\')">â²</button>\n                            <button type="button" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: pointSymbol===\'Diamond\'}" data-ng-click="switchSymbol(\'Diamond\')">â¦</button>\n                        </div>\n                    </div>\n                    <div class="col-sm-6 col-xs-6 draw-content">\n                        <div class="title-text">\n                            <span translate="size_txt"></span>\n                        </div>\n                        <div class="navigation-button btn-same-size">\n                            <button type="button" data-ng-repeat="pointRadiusSize in pointRadiusSizes" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: activePointType === pointRadiusSize.sizeType}" data-ng-click="setPointRadiusSize(pointRadiusSize); activateDrawFeatureTool()">\n                                <span translate="{{pointRadiusSize.sizeType}}"></span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="title-text">\n                            <span translate="color_txt"></span>\n                        </div>\n                        <div class="btn-same-size navigation-button">\n                            <button type="button" class="btn btn-default btn-toggle" ng-model="color" data-ng-class="{activeBtn: color === val}" data-ng-click="setColor(val)" data-ng-repeat="(key, val) in colors" >\n                                <div class="color-picker" data-ng-style="{\'background-color\':key, \'border\': \'none\'}">\n                                    <span></span>\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <input type="checkbox" ng-model="snap" ng-change="activateDrawFeatureTool()">\n                        <span translate="snap_txt"></span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="new-section navigation-button">\n                <button class="btn btn-default btn-ordinary" translate="remove_txt" data-ng-disabled="!selectionActive" data-ng-click="deleteButtonClick()">\n                </button>\n                <button data-ng-show="mode === \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'draw\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n                <button data-ng-show="mode !== \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'modify\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n            </div>\n\n        </div>\n        <div role="tabpanel" class="tab-pane" id="line">\n            <div class="row">\n                <div class="col-xs-6">\n                    <input type="checkbox" ng-model="showMeasurements" data-ng-change="activateDrawFeatureTool()"/>\n                    <span translate="showMeasurements_txt"></span>\n                </div>\n                <div class="col-xs-6 draw-content">\n                    <input type="checkbox" ng-model="showNauticalMiles" data-ng-change="activateDrawFeatureTool()"/>\n                    <span translate="showNauticalMiles_txt"></span>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-sm-6 col-xs-6">\n                        <div class="title-text">\n                            <span translate="lineType_txt"></span>\n                        </div>\n                        <div class="navigation-button">\n                            <button data-ng-repeat="lineType in lineTypes" type="button" class="btn btn-default btn-toggle btn-rectangle-same-size" data-ng-class="{activeBtn: lineType.lineTypeId === activeLineType}" data-ng-click="switchLineType(lineType)" data-ng-bind="lineType.lineType"></button>\n                        </div>\n                    </div>\n                    <div class="col-sm-6 col-xs-6 draw-content">\n                        <div class="title-text">\n                            <span translate="width_txt"></span>\n                        </div>\n                        <div class="navigation-button btn-same-size">\n                            <button type="button" data-ng-repeat="lineWidthSize in lineWidthSizes" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: activeLineWidthSize === lineWidthSize.lineTypeId}" data-ng-click="setLineWidthSize(lineWidthSize);">\n                                <span translate="{{lineWidthSize.sizeType}}"></span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="title-text">\n                            <span translate="color_txt"></span>\n                        </div>\n                        <div class="btn-same-size navigation-button">\n                            <button type="button" class="btn btn-default btn-toggle" ng-model="color" data-ng-class="{activeBtn: color === val}" data-ng-click="setColor(val)" data-ng-repeat="(key, val) in colors" >\n                                <div class="color-picker" data-ng-style="{\'background-color\':key, \'border\': \'none\'}">\n                                    <span></span>\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <input type="checkbox" ng-model="snap" ng-change="activateDrawFeatureTool()">\n                        <span translate="snap_txt"></span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="new-section navigation-button">\n                <button class="btn btn-default btn-ordinary" translate="remove_txt" data-ng-disabled="!selectionActive" data-ng-click="deleteButtonClick()">\n                </button>\n                <button data-ng-show="mode === \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'draw\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n                <button data-ng-show="mode !== \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'modify\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n            </div>\n        </div>\n        <div role="tabpanel" class="tab-pane" id="polygon">\n            <div class="row">\n                <div class="col-xs-6">\n                    <input type="checkbox" ng-model="showMeasurements" data-ng-change="activateDrawFeatureTool()"/>\n                    <span translate="showMeasurements_txt"></span>\n                </div>\n                <div class="col-xs-6 draw-content">\n                    <input type="checkbox" ng-model="showNauticalMiles" data-ng-change="activateDrawFeatureTool()" />\n                    <span translate="showNauticalMiles_txt"></span>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="title-text">\n                            <span translate="opacity_txt"></span>\n                        </div>\n                        <div class="navigation-button">\n                            <button type="button" data-ng-repeat="polygonOpacity in polygonOpacities" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: activeOpacityType === polygonOpacity.opacityType}" data-ng-click="setPolygonOpacity(polygonOpacity);">\n                                <span translate="{{polygonOpacity.opacityType}}"></span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="title-text">\n                            <span translate="color_txt"></span>\n                        </div>\n                        <div class="btn-same-size navigation-button">\n                            <button type="button" class="btn btn-default btn-toggle" ng-model="color" data-ng-class="{activeBtn: color === val}" data-ng-click="setColor(val)" data-ng-repeat="(key, val) in colors" >\n                                <div class="color-picker" data-ng-style="{\'background-color\':key, \'border\': \'none\'}">\n                                    <span></span>\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <input type="checkbox" ng-model="snap" ng-change="activateDrawFeatureTool()">\n                        <span translate="snap_txt"></span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="new-section navigation-button">\n                <button class="btn btn-default btn-ordinary" translate="remove_txt" data-ng-disabled="!selectionActive" data-ng-click="deleteButtonClick()">\n                </button>\n                <button data-ng-show="mode === \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'draw\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n                <button data-ng-show="mode !== \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'modify\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n            </div>\n        </div>\n        <div role="tabpanel" class="tab-pane" id="text">\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="title-text">\n                        <span translate="text_txt_label"></span>\n                    </div>\n                    <input type="text" ng-model="text" placeholder="Skriv inn tekst her" ng-change="activateDrawFeatureTool()"\n                           class="full-width"\n                    />\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="title-text">\n                            <span translate="size_txt"></span>\n                        </div>\n                        <div class="navigation-button btn-same-size">\n                            <button type="button" data-ng-repeat="textHightSize in textHightSizes" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: activeTextHight === textHightSize.textType}" data-ng-click="setTextHight(textHightSize);">\n                                <span translate="{{textHightSize.textType}}"></span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="title-text">\n                            <span translate="color_txt"></span>\n                        </div>\n                        <div class="btn-same-size navigation-button">\n                            <button type="button" class="btn btn-default btn-toggle" ng-model="color" data-ng-class="{activeBtn: color === val}" data-ng-click="setColor(val)" data-ng-repeat="(key, val) in colors" >\n                                <div class="color-picker" data-ng-style="{\'background-color\':key, \'border\': \'none\'}">\n                                    <span></span>\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="new-section navigation-button">\n                <button class="btn btn-default btn-ordinary" translate="remove_txt" data-ng-disabled="!selectionActive" data-ng-click="deleteButtonClick()">\n                </button>\n                <button data-ng-show="mode === \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'draw\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n                <button data-ng-show="mode !== \'modify\'" class="btn btn-default btn-toggle" data-ng-click="switchMode(\'modify\')" data-ng-class="{activeBtn: mode === \'modify\'}" translate="change_txt">\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <div data-ng-show="!expandMenu.open" class="row">\n        <div class="col-sm-6">\n            <div class="navigation-button">\n                <button class="btn btn-default btn-ordinary"\n                        data-ng-click="newButtonClick()" translate="empty_txt">\n                </button>\n                <button class="btn btn-default btn-ordinary" ng-hide="drawingHash == \'\'"\n                        data-ng-click="downloadButtonClick()" translate="download_txt">\n                </button>\n            </div>\n        </div>\n        <div class="col-sm-6">\n            <div class="navigation-button pull-right">\n                <button class="btn btn-default btn-ordinary"\n                        data-ng-click="closeOverlay()" translate="Cancel_txt">\n                </button>\n                <button class="btn btn-default btn-important" data-ng-click="saveButtonClick()" translate="save_txt">\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n')}]),angular.module("components/transclusions/menuElevationProfile/menuElevationProfile.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/menuElevationProfile/menuElevationProfile.html",'<div ng-switch="menuElevationProfileLayout" data-ng-show="!expandMenu.open">\n    <div ng-switch-when="page1" menu-elevation-profile-page1 ng-init="drawLineElevation()"></div>\n    <div ng-switch-when="page2" menu-elevation-profile-page2 ng-init="viewElevationProfile()"></div>\n</div>')}]),angular.module("components/transclusions/menuElevationProfile/menuElevationProfilePage1/menuElevationProfilePage1.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/menuElevationProfile/menuElevationProfilePage1/menuElevationProfilePage1.html",'<div id="spinner2" class="search-loading-overlay" data-ng-show="showSpinner">\n    <div class="spinner-loader"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>\n</div>\n<div class="panel-body">\n    \x3c!-- Nav tabs --\x3e\n    <ul class="nav nav-tabs" role="tablist" id="myElevationTabs">\n        <li role="presentation" class="active"><a href data-target="#drawProfile" aria-controls="drawProfile" role="tab" data-toggle="tab" translate="drawInMap_txt"></a></li>\n        <li role="presentation"><a href data-target="#uploadFile" aria-controls="uploadFile" role="tab" data-toggle="tab" translate="uploadFile_txt"></a></li>\n    </ul>\n    \x3c!-- Tab panes --\x3e\n    <div class="tab-content search-content">\n        <div role="tabpanel" class="tab-pane active" id="drawProfile">\n            <span translate="profileInfo_txt"></span>\n            <div class="new-section navigation-button">\n                <button class="btn btn-default btn-ordinary" data-ng-click="removeGeometry()" translate="remove_txt" data-ng-disabled="!elevationProfileActive"></button>\n                <button type="button" class="btn btn-default btn-toggle" data-ng-class="{activeBtn: isDrawActive()}" data-ng-click="drawLineElevation()" translate="drawProfile_txt"></button>\n            </div>\n        </div>\n        <div role="tabpanel" class="tab-pane" id="uploadFile">\n            <div class="new-section">\n                <div class="input-group">\n                    <input type="text" class="form-control btn-group" aria-label="..." data-ng-disabled="true" ng-model="filePath">\n                    <div class="input-group-btn">\n                        <input class="no-display btn-group" type="file" id="files" fileread="uploadGpx">\n                        <button type="button" id="clickInput" class="btn btn-default btn-important" translate="chooseFile_txt"></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="navigation-button pull-right">\n                <button class="btn btn-default btn-ordinary"\n                        data-ng-click="closeOverlay()" translate="Cancel_txt">\n                </button>\n                <button data-ng-disabled="!isElevationProfileActive()" class="btn btn-default btn-important" data-ng-click="calculateElevationProfile()" translate="showElevationProfile_txt">\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/menuElevationProfile/menuElevationProfilePage2/menuElevationProfilePage2.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/menuElevationProfile/menuElevationProfilePage2/menuElevationProfilePage2.html",'<div class="panel-body">\n    <div class="search-content">\n        <img class="scale-image pointer-cursor" ng-src="{{getElevationImage()}}" data-ng-click="showImage()">\n    </div>\n    <div class="navigation-button pull-right">\n        <button class="btn btn-default btn-ordinary"\n                data-ng-click="closeOverlay()" translate="Cancel_txt">\n        </button>\n        <button class="btn btn-default btn-important" data-ng-click="downloadImage()" translate="download_txt">\n        </button>\n    </div>\n</div>\n\n')}]),angular.module("components/transclusions/menuPrint/menuPrint.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/menuPrint/menuPrint.html",'<div id="spinnerPrint" class="search-loading-overlay" data-ng-show="showSpinner">\n    <div class="spinner-loader"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>\n</div>\n<div class="panel-body" data-ng-show="!expandMenu.open">\n    \x3c!-- Nav tabs --\x3e\n    <ul class="nav nav-tabs" role="tablist" id="myElevationTabs">\n        <li role="presentation" class="active"><a href data-target="#printMap" aria-controls="printMap" role="tab"\n                data-toggle="tab" translate="skriv_ut"></a></li>\n    </ul>\n    \x3c!-- Tab panes --\x3e\n    <div class="tab-content search-content">\n        <div role="tabpanel" class="tab-pane active" id="printMap">\n            \x3c!-- Maltype --\x3e\n            <div class="new-section row">\n                <div class="col-xs-12">\n                    <div class="title-text">\n                        <span translate="template_type"></span>\n                    </div>\n                    <div class="dropdown">\n                        <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu2"\n                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                            <span translate="{{selectedLayout.name}}"></span>\n                            <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu2">\n                            <li data-ng-repeat="layout in layouts" data-ng-click="setLayoutType(layout)"\n                                class="pointer-cursor">\n                                <span translate="{{layout.name}}"></span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- MÃ¥lestokk --\x3e\n            <div class="new-section row">\n                <div class="col-xs-12">\n                    <div class="title-text">\n                        <span translate="Scale"></span>\n                    </div>\n                    <div class="dropdown">\n                        <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown"\n                            aria-haspopup="true" aria-expanded="true">\n                            <span>1 :</span>\n                            <span data-ng-bind="selectedPrintScale"></span>\n                            <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu2">\n                            <li data-ng-repeat="scale in printScales" data-ng-click="setPrintScale(scale)" class="pointer-cursor">\n                                <span data-ng-bind="scale"></span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- Format og DPI --\x3e\n  \x3c!--\n            <div class="new-section row">\n                <div class="col-xs-6">\n                    <div class="title-text">\n                        <span translate="print_format"></span>\n                    </div>\n                    <div class="dropdown">\n                        <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu3" data-toggle="dropdown"\n                            aria-haspopup="true" aria-expanded="true">\n                            <span data-ng-bind="selectedFormat"></span>\n                            <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu3">\n                            <li data-ng-repeat="format in formats" data-ng-click="setFormat(format)" class="pointer-cursor">\n                                <span data-ng-bind="format"></span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="col-xs-6">\n                    <div class="title-text">\n                        <span translate="print_dpi"></span>\n                    </div>\n                    <div class="dropdown">\n                        <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu4" data-toggle="dropdown"\n                            aria-haspopup="true" aria-expanded="true">\n                            <span data-ng-bind="selectedDpi"></span>\n                            <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu4">\n                            <li data-ng-repeat="dpi in dpiResolutions" data-ng-click="setDpi(dpi)" class="pointer-cursor">\n                                <span data-ng-bind="dpi"></span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n--\x3e\n            \x3c!-- Kart navn --\x3e\n            \x3c!--\n            <div class="new-section row">\n                <div class="col-xs-12">\n                    <div class="title-text">\n                        <span translate="Turkart_navn"></span>\n                    </div>\n                    <input type="text" placeholder="{{\'map_name\' | translate}}" class="full-width" data-ng-model=\'mapName\' />\n                </div>\n            </div>\n            --\x3e\n            <div class="new-section pull-right">\n                <button class="btn btn-default btn-important" translate="generate_print" data-ng-click="print()"></button>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="navigation-button">\n                <button class="btn btn-default btn-ordinary highPriorityBtn" data-ng-disabled="printCanceled" data-ng-click="cancelPrint()" translate="cancel_print">\n                </button>\n                <button class="btn btn-default btn-ordinary pull-right" data-ng-click="closeOverlay()" translate="Cancel_txt">\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/menuShareMap/menuShareMap.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/menuShareMap/menuShareMap.html",'<div class="panel-body" data-ng-show="!expandMenu.open">\n    \x3c!-- Nav tabs --\x3e\n    <ul class="nav nav-tabs" role="tablist" id="myElevationTabs">\n        <li role="presentation" class="active"><a href data-target="#shareOnline" aria-controls="shareOnline" role="tab" data-toggle="tab" translate="shareOnline_txt"></a></li>\n    </ul>\n    \x3c!-- Tab panes --\x3e\n    <div class="tab-content search-content">\n        <div role="tabpanel" class="tab-pane active" id="shareOnline">\n            <div class="new-section row">\n                <div class="col-xs-6">\n                    <div data-ng-click="getFacebookUrl()" class="pointer-cursor">\n                        <span class="fa fab fa-facebook"></span>\n                        <span translate="facebook_txt"></span>\n                    </div>\n                </div>\n                <div class="col-xs-6">\n                    <div data-ng-click="getTwitterUrl()" class="pointer-cursor">\n                        <span class="fa fab fa-twitter"></span>\n                        <span translate="twitter_txt"></span>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section row">\n                <div class="col-xs-12">\n                    <div data-ng-click="getMailUrl()" class="pointer-cursor">\n                        <span class="fa fa-envelope"></span>\n                        <span translate="email_txt"></span>\n                    </div>\n                </div>\n            </div>\n            <div class="new-section row">\n                <div class="col-xs-12">\n                    <div class="title-text">\n                        <span translate="copyLink_txt"></span>\n                    </div>\n                    <input type="text" class="full-width" data-ng-disabled="true" placeholder="{{getAbsoluteUrl()}}"/>\n                </div>\n            </div>\n            <div class="new-section pull-right">\n                <button class="btn btn-default btn-important" data-ng-click="copyURL()" translate="copy_txt"></button>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="navigation-button pull-right">\n                <button class="btn btn-default btn-ordinary"\n                        data-ng-click="closeOverlay()" translate="Cancel_txt">\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchKoordTransPanel/searchKoordTransPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchKoordTransPanel/searchKoordTransPanel.html",'<div class="search-panel" data-ng-controller="searchKoordTransPanelController">\n  <div class="header">\n    <div class="row">\n      <div class="col-xs-12">\n        <span class="icon-important" data-ng-class="searchOptionsDict[\'koordTrans\'].icon.value"></span>\n        <span class="header-icon text-uppercase" translate="koord_tittel"></span>\n        <div class="closebtn" data-ng-click="showSearchOptionsPanel()">\n          <span class="glyphicon glyphicon-menu-right"></span>\n          <span class="glyphicon glyphicon-menu-left"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="search-content">\n    <div>\n      <span translate="koord_info"></span>\n    </div>\n\n    <div class="new-section">\n      <div class="dropdown">\n        <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true"\n          aria-expanded="true">\n                <span translate="{{getActiveCoorSystem()}}"></span>\n                <span class="caret"></span>\n            </button>\n        <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu2">\n          <li data-ng-repeat="(key, value) in coordinateSystems" data-ng-click="_fetchKoordTrans(key)" class="pointer-cursor">\n            <span translate="{{coordinateSystems[key]}}"></span>\n          </li>\n        </ul>\n      </div>\n      <div class="checkbox checkbox-below">\n        <label>\n          <input type="checkbox" ng-change="generateCoordinateSystems()" ng-model="showAdvancedCoordinateSystems" /> <span translate="koord_vis_flere"></span>\n        </label>\n      </div>\n    </div>\n\n    <div class="new-section">\n      <table class="table table-condensed table-borderless mb-0">\n        <colgroup>\n          <col width="25%">\n          <col width="75%">\n        </colgroup>\n        <tbody>\n          <tr>\n            <th>\n              <span class="text-uppercase" translate="koord_nord"></span>\n            </th>\n            <td>\n              <div><span data-ng-bind="activePosition.transLat"></span></div>\n              <div><span data-ng-bind="activePosition.transLat2"></span></div>\n              <div><span data-ng-bind="activePosition.transLat3"></span></div>\n            </td>\n          </tr>\n          <tr>\n            <th>\n              <span class="text-uppercase" translate="koord_ost"></span>\n            </th>\n            <td>\n              <div><span data-ng-bind="activePosition.transLon"></span></div>\n              <div><span data-ng-bind="activePosition.transLon2"></span></div>\n              <div><span data-ng-bind="activePosition.transLon3"></span></div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class="new-section navigation-button pull-right">\n      <button class="btn btn-default btn-ordinary" data-ng-click="showSearchOptionsPanel()" translate="Cancel_txt">\n            </button>\n    </div>\n  </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanel.html",'<div ng-switch="searchLagNodplakatPanelLayout">\n    <div ng-switch-when="page1" search-lag-nodplakat-panel-page1></div>\n    <div ng-switch-when="page2" search-lag-nodplakat-panel-page2></div>\n</div>')}]),angular.module("components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage1/searchLagNodplakatPanelPage1.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage1/searchLagNodplakatPanelPage1.html",'<div class="search-panel" ng-show="searchResults != undefined">\n    <div class="header">\n        <div class="row">\n            <div class="col-xs-12">\n                <span class="icon-important" data-ng-class="searchOptionsDict[\'lagNodplakat\'].icon.value"></span>\n                <span class="header-icon" translate="lagNodplakat"></span>\n                <div class="closebtn" data-ng-click="showSearchOptionsPanel()">\n                    <span class="glyphicon glyphicon-menu-right"></span>\n                    <span class="glyphicon glyphicon-menu-left"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="search-content">\n\n        <h4 class="no-top" translate="Ansvar"></h4>\n        <div class="info-text">\n            <span translate="NodplakatText1"></span>\n        </div>\n        <div class="info-text">\n            <span translate="NodplakatText2"></span>\n        </div>\n        <div class="info-text">\n            <span translate="NodplakatText3"></span>\n        </div>\n        <div class="new-section navigation-button pull-right">\n            <button type="button" class="btn btn-default btn-important" data-ng-click="showLagNodplakatPage2()">\n                <span translate="AcceptAndContinue"></span>\n            </button>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage2/searchLagNodplakatPanelPage2.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchLagNodplakatPanel/searchLagNodplakatPanelPage2/searchLagNodplakatPanelPage2.html",'<div class="search-panel" ng-show="searchResults != undefined">\n    <div class="header">\n        <div class="row">\n            <div class="col-xs-12">\n                <span class="icon-important" data-ng-class="searchOptionsDict[\'lagNodplakat\'].icon.value"></span>\n                <span class="header-icon" translate="lagNodplakat"></span>\n                <div class="closebtn" data-ng-click="showSearchOptionsPanel()">\n                    <span class="glyphicon glyphicon-menu-right"></span>\n                    <span class="glyphicon glyphicon-menu-left"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="search-content">\n        <div ng-show="lagNodplakatDict[\'placenamesByBbox\']">\n            <div class="title-text">\n                <span translate="GiPunktetNavn"></span>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    <input type="text"\n                           placeholder="(F.eks. navn pÃ¥ hytta)"\n                           ng-model="lagNodplakatName"\n                           class="full-width"\n                           />\n                </div>\n            </div>\n        </div>\n\n        <div class="new-section" ng-show="lagNodplakatDict[\'placenamesByBbox\']">\n            <div class="title-text">\n                <span translate="PlaceIs"></span>\n            </div>\n\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="dropdown">\n                        <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                            <span data-ng-bind="activePlaceName"></span>\n                            <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu2">\n                            <li data-ng-repeat="(key, value) in lagNodplakatDict[\'placenamesByBbox\']" data-ng-click="setNodePlagatName(value.skrivemaatenavn)" class="pointer-cursor">\n                                <span data-ng-bind="value.skrivemaatenavn"></span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="new-section" ng-show="lagNodplakatDict[\'emergencyPosterPoint\'].veg">\n          <div>\n            <div>\n                <span translate="FoundRoadIs"></span>\n                <div class="dropdown">\n                  <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownStreet" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                      <span data-ng-bind="activeStreet||lagNodplakatDict[\'emergencyPosterPoint\'].veg"></span>\n                      <span class="caret"></span>\n                  </button>\n                  <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownStreet">\n                      <li data-ng-repeat="(key, value) in lagNodplakatDict[\'emergencyPosterPoint\'].vegliste" data-ng-click="setNodePlagatStreet(value)" class="pointer-cursor">\n                          <span data-ng-bind="value"></span>\n                      </li>\n                  </ul>\n                </div>\n                <span translate="In"></span>\n                <span> {{lagNodplakatDict[\'emergencyPosterPoint\'].kommune}}</span>\n                <span translate="Municipality"></span>\n              </div>\n            </div>\n          <div class="row">\n              <div class="col-xs-12">\n                  <div class="dropdown">\n                      <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                          <span>{{ valgtTekst | translate }}</span>\n                          <span class="caret"></span>\n                      </button>\n                      <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu3">\n                          <li data-ng-click="setlagNodplakatConfirmRoad(true)" class="pointer-cursor">\n                              <span translate="ja"></span>\n                          </li>\n                          <li data-ng-click="setlagNodplakatConfirmRoad(false)" class="pointer-cursor">\n                              <span translate="nei"></span>\n                          </li>\n                      </ul>\n                  </div>\n              </div>\n          </div>\n        </div>\n        <div class="new-section navigation-button pull-right">\n            <button class="btn btn-default btn-ordinary"\n                    data-ng-click="showSearchOptionsPanel()" translate="Cancel_txt">\n            </button>\n\n            <button class="btn btn-default btn-important" data-ng-disabled="!nodplakatConfirmRoad"\n                    data-ng-click="downloadEmergencyPoster()" translate="downloadEmergencyPoster">\n            </button>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchLagTurkartPanel/searchLagTurkartPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchLagTurkartPanel/searchLagTurkartPanel.html",'<div class="search-panel" ng-show="searchResults != undefined">\n    <div id="spinner1" class="search-loading-overlay" data-ng-show="showSpinner">\n        <div class="spinner-loader"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>\n    </div>\n    <div class="header">\n        <div class="row">\n            <div class="col-xs-12">\n                <span class="icon-important" data-ng-class="searchOptionsDict[\'lagTurkart\'].icon.value"></span>\n                <span class="header-icon" translate="Turkart_title"></span>\n                <div class="pull-right">\n                    <div class="hide-button" data-ng-click="turMap.open = !turMap.open">\n                        <span data-ng-show="!turMap.open" class="glyphicon glyphicon-menu-up"></span>\n                        <span data-ng-show="turMap.open" class="glyphicon glyphicon-menu-down"></span>\n                    </div>\n                    <div class="closebtn" data-ng-click="deactivatePrintBoxSelect(); showSearchOptionsPanel()">\n                        <span class="glyphicon glyphicon-menu-right"></span>\n                        <span class="glyphicon glyphicon-menu-left"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="search-content" data-ng-show="!turMap.open">\n        <div class="info-text">\n            <span translate="Turkart_info"></span>\n        </div>\n        <div class="new-section">\n            <div class="title-text">\n                <span translate="Scale"></span>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="dropdown">\n                        <button class="btn btn-default btn-searchPanel dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                            <span data-ng-bind="scales[scale]"></span>\n                            <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-relative" aria-labelledby="dropdownMenu2">\n                            <li data-ng-repeat="(key, value) in scales" data-ng-click="applyScale(key)" class="pointer-cursor">\n                                <span data-ng-bind="scales[key]"></span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="new-section">\n            <div class="title-text">\n                <span translate="Turkart_navn"></span>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    <input type="text"\n                           placeholder="{{\'Turkart_navn_eks\' | translate}}"\n                           ng-model="tittel"\n                           ng-disabled="!createMapButtonOn"\n                           class="full-width"\n                    />\n                </div>\n            </div>\n        </div>\n        <div class="new-section">\n            <div class="row">\n                <div class="col-xs-12">\n                    <input type="checkbox" ng-model="showTrips" ng-disabled="!createMapButtonOn"/>\n                    <span translate="FremhevMerkedeStier"></span>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    <input type="checkbox" ng-model="showLegend" ng-disabled="!createMapButtonOn"/>\n                    <span translate="AddLegend"></span>\n                </div>\n            </div>\n            <div class="row">\n              <div class="col-xs-12">\n                <input type="checkbox" ng-model="showSweden" ng-disabled="!createMapButtonOn" />\n                <span translate="AddSweden"></span>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-xs-12">\n                <input type="checkbox" ng-model="showCompass" ng-disabled="!createMapButtonOn" />\n                <span translate="AddCompass"></span>\n              </div>\n            </div>\n        </div>\n        <div class="new-section navigation-button pull-right">\n            <button class="btn btn-default btn-ordinary"\n                    data-ng-click="deactivatePrintBoxSelect(); showSearchOptionsPanel()" translate="Cancel_txt">\n            </button>\n\n            <button class="btn btn-default btn-important" data-ng-click="orderMap()"\n                    ng-disabled="!createMapButtonOn" translate="lagTurkart">\n            </button>\n\n            <button class="btn btn-default btn-important" data-ng-click="downloadMap()"\n                    ng-disabled="!mapAvailable" translate="DownloadMap">\n            </button>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchOptionsPanel/mapGetFeatures/mapGetFeatures.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchOptionsPanel/mapGetFeatures/mapGetFeatures.html",'<div class="options-header-text" data-ng-show="isAnyLayerToShow()" data-ng-class="{isHeaderClose: foundLayersMenu.open}"\n  data-ng-click="foundLayersMenu.open = !foundLayersMenu.open">\n  <div class="sidenav-header-text pointer-cursor row">\n    <div class="col-xs-10">\n      <span translate="HereYouFind_text"></span>\n    </div>\n    <div class="col-xs-2">\n      <span data-ng-show="!foundLayersMenu.open" class="nextbtn glyphicon glyphicon-menu-up"></span>\n      <span data-ng-show="foundLayersMenu.open" class="nextbtn glyphicon glyphicon-menu-down"></span>\n    </div>\n  </div>\n</div>\n\n<div data-ng-repeat="layer in layers | filter:{show:\'true\'}">\n  <ul>\n    <li class="sidenav-sections" data-ng-show="!foundLayersMenu.open" data-ng-click="toggleLayer(layer); $event.stopPropagation()">\n      <span data-ng-bind="layer.name | capitalize"></span>\n      <span class="backbtn glyphicon glyphicon-menu-down" data-ng-show="!layer.open"></span>\n      <div class="upbtn" data-ng-show="layer.open">\n        <span class="glyphicon glyphicon-menu-up"></span>\n      </div>\n      <span data-ng-bind="getVisibleFeatures(layer)" class="badge pull-right"></span>\n    </li>\n  </ul>\n  <div data-ng-show="layer.open && !foundLayersMenu.open">\n    <div dir-paginate="feature in layer.features | itemsPerPage: 1" current-page="currentPage" pagination-id="layer.id">\n      <ul class="closeable-subcontent">\n        <li>\n          <div class="row">\n            <div class="col-xs-4"></div>\n            <img data-ng-repeat="attribute in feature.attributes | limitTo:3" data-ng-if="attribute[1].type==\'symbol\'" class="image"\n              data-ng-src="{{attribute[1].url}}">\n          </div>\n        </li>\n        <li data-ng-repeat="attribute in feature.attributes">\n          <div class="row">\n            <div class="col-xs-5">\n              <span data-ng-if="attribute[1].type!=\'symbol\'" data-ng-bind="attribute[0] | capitalize"></span>\n            </div>\n            <div data-ng-if="attribute[1].type==\'picture\'" class="col-xs-5" data-ng-click="showImage(attribute[1].url)">\n              <img class="scale-image" data-ng-src="{{attribute[1].url}}">\n              <span data-ng-bind="attribute[1].name"></span>\n            </div>\n            <div data-ng-if="attribute[1].type==\'link\'" class="col-xs-5">\n              <a class="text-info" href="{{attribute[1].url}}" target="_blank" rel="noopener noreferrer"> <span data-ng-bind="attribute[1].name"></span></a>\n            </div>\n            <div data-ng-if="!attribute[1].type" class="col-xs-5">\n              <span data-ng-bind="attribute[1]"></span>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n    <div class="search-pagination">\n      <dir-pagination-controls max-size="6" direction-links="true" pagination-id="layer.id" on-page-change="pageChangeHandler(newPageNumber)">\n      </dir-pagination-controls>\n    </div>\n  </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchOptionsPanel/searchOptionsPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchOptionsPanel/searchOptionsPanel.html",'<div class="search-panel" ng-show="searchResults != undefined" ng-controller="searchOptionsPanelController">\n    <div class="search-content">\n        <div class="info-text content-text-align">\n            <div>\n                <span ng-if="activeSearchResult.source != \'mouseClick\'" translate="{{sourceDict[activeSearchResult.source]}}"></span>\n                <span ng-if="activeSearchResult.kommune!=\'\'">\n                    <span> </span>\n                    <span translate="In"></span>\n                    <span> {{activeSearchResult.kommune}} </span>\n                    <span translate="Municipality"></span>\n                </span>\n            </div>\n            <div ng-show="searchOptionsDict[\'elevationPoint\'].text.value">\n                <span translate="HeightEstimatedByInterpolation_text"></span>\n                <span>{{searchOptionsDict[\'elevationPoint\'].text.value}}</span>\n                <span translate="MetersAboveSeaLevel"></span>\n            </div>\n        </div>\n\n        <div class="options-header-text" data-ng-class="{isHeaderClose: optionsMenu.open}" data-ng-click="optionsMenu.open = !optionsMenu.open">\n            <div class="sidenav-header-text pointer-cursor row">\n                <div class="col-xs-10">\n                    <span class="text-uppercase" translate="hva_vil_du_gjore"></span>\n                </div>\n                <div class="col-xs-2">\n                    <span data-ng-show="!optionsMenu.open" class="nextbtn glyphicon glyphicon-menu-up"></span>\n                    <span data-ng-show="optionsMenu.open" class="nextbtn glyphicon glyphicon-menu-down"></span>\n                </div>\n            </div>\n        </div>\n\n        <ul data-ng-show="!optionsMenu.open">\n            <li class="sidenav-sections" data-ng-repeat="searchOption in searchOptionsOrder" ng-mousedown="mouseDown(searchOptionsDict[searchOption])" data-ng-hide="searchOptionsDict[searchOption].name === \'\'">\n                <div class="row">\n                    <div class="col-xs-1">\n                        <span class="icon-important" ng-class="searchOptionsDict[searchOption].icon.value"></span>\n                    </div>\n                    <div class="col-xs-11">\n                        <span ng-class="searchOptionsDict[searchOption].text.class" translate="{{searchOptionsDict[searchOption].name}}"></span>\n                        <span class="nextbtn glyphicon glyphicon-menu-right"></span>\n                    </div>\n                </div>\n            </li>\n        </ul>\n\n        <div map-get-features></div>\n\n    </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchPanel.html",'<div class="field-group">\n    <div class="inner-addon left-addon right-addon">\n        <input caret type="text" ng-change="searchBarValueChanged()" ng-model="searchBarModel" name="searchBarName" id="searchBarId" placeholder="{{\'search_text\' | translate}}"  />\n        <i class="left-side glyphicon glyphicon-menu-hamburger has-tooltip" data-ng-click="openNav()">\n            <span class="tooltip tooltip-absolute tooltip-info" translate="menu"></span>\n        </i>\n        <i ng-show="searchResults != undefined" data-ng-click="cleanResults(); resetSearchPanel()">\n            <div class="cleanResults">\n                <span class="glyphicon glyphicon-menu-right"></span>\n                <span class="glyphicon glyphicon-menu-left"></span>\n            </div>\n        </i>\n        <i class="absolute-right-side glyphicon glyphicon-search has-tooltip">\n            <span class="tooltip tooltip-absolute tooltip-info" translate="search"></span>\n        </i>\n    </div>\n</div>\n\n<div ng-switch="searchPanelLayout">\n    <div ng-switch-when="searchResultsPanel" search-results-panel></div>\n    <div ng-switch-when="searchOptionsPanel" search-options-panel></div>\n    <div ng-switch-when="searchSeEiendomPanel" search-se-eiendom-panel ng-init="showSelection()"></div>\n    <div ng-switch-when="searchStedsnavnPanel" search-stedsnavn-panel ng-init="showSelection()"></div>\n    <div ng-switch-when="searchKoordTransPanel" search-koord-trans-panel></div>\n    <div ng-switch-when="searchLagTurkartPanel" search-lag-turkart-panel></div>\n    <div ng-switch-when="searchLagNodplakatPanel" search-lag-nodplakat-panel></div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchResultsPanel/searchResultsPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchResultsPanel/searchResultsPanel.html",'<div class="search-panel" ng-show="searchResults != undefined">\n  <div class="search-content no-padding-top">\n    <div data-ng-show="searchResults[\'ssr\']">\n      <div class="isHeaderClose" data-ng-click="placenamesResult.open = !placenamesResult.open">\n        <span translate="searchResult_placenames"></span>\n        <span data-ng-show="!placenamesResult.open" class="nextbtn glyphicon glyphicon-menu-up"></span>\n        <span data-ng-show="placenamesResult.open" class="nextbtn glyphicon glyphicon-menu-down"></span>\n      </div>\n      <ul class="list-result" data-ng-show="!placenamesResult.open" data-ng-if="!isIosDevice()">\n        <li class="pointer-cursor" ng-repeat="searchResult in searchResults[\'ssr\']" ng-mousedown="activatePosition(searchResult); showSearchOptionsPanel()"\n          ng-mouseover="mouseOver(searchResult)">\n          <span ng-if="!searchResult.kommune" ng-bind="searchResult.name + \', \'  + searchResult.navnetype"></span>\n          <span ng-if="searchResult.kommune" ng-bind="searchResult.name + \', \'  + searchResult.navnetype + \' i \' + searchResult.kommune + \' \' + searchResult.navnestatus"></span>\n        </li>\n      </ul>\n      <ul class="list-result" data-ng-show="!placenamesResult.open" data-ng-if="isIosDevice()">\n        <li class="pointer-cursor" ng-repeat="searchResult in searchResults[\'ssr\']" ng-mousedown="activatePosition(searchResult); showSearchOptionsPanel()">\n          <span ng-if="!searchResult.kommune" ng-bind="searchResult.name + \', \'  + searchResult.navnetype"></span>\n          <span ng-if="searchResult.kommune" ng-bind="searchResult.name + \', \'  + searchResult.navnetype + \' i \' + searchResult.kommune + \' \' + searchResult.navnestatus"></span>\n        </li>\n      </ul>\n      <div data-ng-show="!placenamesResult.open" dir-paginate="obj in placenameItems | itemsPerPage: 15 track by $index"></div>\n      <div data-ng-show="!placenamesResult.open" class="search-pagination">\n        <dir-pagination-controls max-size="6" direction-links="true" on-page-change="pageChanged(newPageNumber)">\n        </dir-pagination-controls>\n      </div>\n    </div>\n\n    <div data-ng-show="searchResults[\'matrikkelveg\']">\n      <div class="isHeaderClose" data-ng-click="roadsResult.open = !roadsResult.open">\n        <span translate="searchResult_roads"></span>\n        <span data-ng-show="!roadsResult.open" class="nextbtn glyphicon glyphicon-menu-up"></span>\n        <span data-ng-show="roadsResult.open" class="nextbtn glyphicon glyphicon-menu-down"></span>\n      </div>\n      <ul class="list-result text-and-button" data-ng-show="!roadsResult.open" data-ng-if="!isIosDevice()">\n        <li class="pointer-cursor" ng-mouseover="mouseOver(searchResult)" ng-repeat="searchResult in searchResults[\'matrikkelveg\']">\n          <div class="row">\n            <div class="col-xs-8 move-up" ng-mousedown="mouseOver(searchResult); activatePosition(searchResult); showSearchOptionsPanel()">\n              <span ng-bind="searchResult.name + \', \' + searchResult.kommune"></span>\n            </div>\n            <div class="col-xs-4">\n              <div class="pull-right">\n                <button data-ng-click="husnum.open = !husnum.open" type="button" class="btn btn-default btn-toggle activeBtn" data-ng-show="husnum.open"><span translate="houseNr_txt"></span></button>\n                <button data-ng-click="husnum.open = !husnum.open" type="button" class="btn btn-default btn-toggle" data-ng-show="!husnum.open"><span translate="houseNr_txt"></span></button>\n              </div>\n            </div>\n            <div class="col-xs-12" data-ng-hide="!husnum.open">\n              <ul class="husnum">\n                <li data-ng-repeat="husnum in searchResult.husnummer" data-ng-click="husnummerChanged(searchResult, husnum)">\n\n                  <div class="row">\n                    <div class="col-xs-4">\n                      <span translate="searchResult_houseNumber"></span>\n                    </div>\n                    <div class="col-xs-8">\n                      <span data-ng-bind="husnum"></span>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      </ul>\n      <ul class="list-result text-and-button" data-ng-show="!roadsResult.open" data-ng-if="isIosDevice()">\n        <li class="pointer-cursor" ng-repeat="searchResult in searchResults[\'matrikkelveg\']">\n          <div class="row">\n            <div class="col-xs-8 move-up" ng-mousedown="mouseOver(searchResult); activatePosition(searchResult); showSearchOptionsPanel()">\n              <span ng-bind="searchResult.name + \', \' + searchResult.kommune"></span>\n            </div>\n            <div class="col-xs-4">\n              <div class="pull-right">\n                <button data-ng-click="husnum.open = !husnum.open" type="button" class="btn btn-default btn-toggle activeBtn" data-ng-show="husnum.open"><span translate="houseNr_txt"></span></button>\n                <button data-ng-click="husnum.open = !husnum.open" type="button" class="btn btn-default btn-toggle" data-ng-show="!husnum.open"><span translate="houseNr_txt"></span></button>\n              </div>\n            </div>\n            <div class="col-xs-12" data-ng-hide="!husnum.open">\n              <ul class="husnum">\n                <li data-ng-repeat="husnum in searchResult.husnummer" data-ng-click="husnummerChanged(searchResult, husnum)">\n\n                  <div class="row">\n                    <div class="col-xs-4">\n                      <span translate="searchResult_houseNumber"></span>\n                    </div>\n                    <div class="col-xs-8">\n                      <span data-ng-bind="husnum"></span>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n    <div data-ng-show="searchResults[\'adresse\'] && !searchResults[\'matrikkelveg\']">\n      <div class="isHeaderClose" data-ng-click="addressResult.open = !addressResult.open">\n        <span translate="searchResult_addresses"></span>\n        <span data-ng-show="!addressResult.open" class="nextbtn glyphicon glyphicon-menu-up"></span>\n        <span data-ng-show="addressResult.open" class="nextbtn glyphicon glyphicon-menu-down"></span>\n      </div>\n      <ul class="list-result" data-ng-show="!addressResult.open" data-ng-if="!isIosDevice()">\n        <li ng-mouseover="mouseOver(searchResult)" class="pointer-cursor" ng-repeat="searchResult in searchResults[\'adresse\']"\n          ng-mousedown="activatePosition(searchResult); showSearchOptionsPanel()">\n          <span ng-bind="searchResult.name + \' \' + searchResult.husnummer + \', \' + searchResult.kommune"></span>\n          </select>\n        </li>\n      </ul>\n      <ul class="list-result" data-ng-show="!addressResult.open" data-ng-if="isIosDevice()">\n        <li class="pointer-cursor" ng-repeat="searchResult in searchResults[\'adresse\']" ng-mousedown="activatePosition(searchResult); showSearchOptionsPanel()">\n          <span ng-bind="searchResult.name + \' \' + searchResult.husnummer + \', \' + searchResult.kommune"></span>\n          </select>\n        </li>\n      </ul>\n    </div>\n    <div data-ng-show="searchResults[\'matrikkelnummer\']">\n      <div class="isHeaderClose" data-ng-click="cadastreResult.open = !cadastreResult.open">\n        <span translate="searchResult_cadastre"></span>\n        <span data-ng-show="!cadastreResult.open" class="nextbtn glyphicon glyphicon-menu-up"></span>\n        <span data-ng-show="cadastreResult.open" class="nextbtn glyphicon glyphicon-menu-down"></span>\n      </div>\n      <ul class="list-result" data-ng-show="!cadastreResult.open" data-ng-if="!isIosDevice()">\n        <div ng-repeat="searchResult in searchResults[\'matrikkelnummer\']">\n          <div ng-if="searchResult.url">\n            <li ng-mouseover="mouseOver(searchResult)" class="pointer-cursor list-group-item-warning"  data-ng-click="openShowEiendom(searchResult);">\n              <span ng-bind="searchResult.name + \', \' + searchResult.kommune"></span> <span translate="searchResult_noMatrikkel"></span>\n              </select>\n            </li>\n          </div>\n          <div ng-if="!searchResult.url">\n            <li ng-mouseover="mouseOver(searchResult)" class="pointer-cursor" ng-mousedown="activatePosition(searchResult); showSearchOptionsPanel()">\n              <span ng-bind="searchResult.name + \', \' + searchResult.kommune"></span>\n              </select>\n            </li>\n          </div>\n        </div>\n      </ul>\n      <ul class="list-result" data-ng-show="!cadastreResult.open" data-ng-if="isIosDevice()">\n        <div ng-repeat="searchResult in searchResults[\'matrikkelnummer\']">\n          <div ng-if="searchResult.url">\n            <li class="pointer-cursor list-group-item-warning" ng-mousedown="openShowEiendom(searchResult);">\n              <span ng-bind="searchResult.name + \', \' + searchResult.kommune"></span> <span translate="searchResult_noMatrikkel"></span>\n              </select>\n            </li>\n          </div>\n          <div ng-if="!searchResult.url">\n            <li class="pointer-cursor" ng-mousedown="activatePosition(searchResult); showSearchOptionsPanel()">\n              <span ng-bind="searchResult.name + \', \' + searchResult.kommune"></span>\n              </select>\n            </li>\n          </div>\n        </div>\n      </ul>\n    </div>\n\n  </div>\n</div>\n<div class="search-panel" ng-show="searchResults === undefined && searchBarModel !== \'\' && searchBarModel !== undefined">\n  <div class="search-content spinner-content" data-ng-show="spinnerIsVisible">\n    <div class="app-spinner">\n      <svg class="spinner" viewBox="25 25 50 50">\n        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />\n      </svg>\n    </div>\n  </div>\n  <div class="search-content" data-ng-show="!spinnerIsVisible">\n    <div class="noSearchHits">\n      <span translate="no_search_hits"></span>\n      <span translate="no_search_hits_line2"></span>\n      <div>\n        <span translate="for_example_txt"></span>\n        <span>Wergelandsveien1, Oslo<br/>0301-209/416<br/>Slottsparken<br/>6649900,261205</span>\n      </div>\n      <div>\n        <span translate="search_options_txt"></span>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchSeEiendomPanel/searchSeEiendomPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchSeEiendomPanel/searchSeEiendomPanel.html",'<div class="search-panel">\n    <div class="header">\n        <div class="row">\n            <div class="col-xs-12">\n                <div class="text-ellipsis display-inline">\n                    <span class="icon-important" data-ng-class="searchOptionsDict[\'seEiendom\'].icon.value"></span>\n                    <span class="header-icon" translate="seEiendom"></span>\n                </div>\n                <div class="pull-right">\n                    <div class="hide-button" data-ng-click="eiendom.open = !eiendom.open">\n                        <span data-ng-show="!eiendom.open" class="glyphicon glyphicon-menu-up"></span>\n                        <span data-ng-show="eiendom.open" class="glyphicon glyphicon-menu-down"></span>\n                    </div>\n                    <div class="closebtn" data-ng-click="showSearchOptionsPanel(); hideEiendomMarkering()">\n                        <span class="glyphicon glyphicon-menu-right"></span>\n                        <span class="glyphicon glyphicon-menu-left"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="search-content" data-ng-show="!eiendom.open">\n        <span data-ng-show="showFetchAdressSearch"><i class="fa fa-spinner fa-spin fa-2x fa-fw"></i></span>\n        <div ng-if="multipleAdresses">\n          <span translate="multipleAdressesText"></span>\n        </div>\n        <div ng-if="!multipleAdresses" data-ng-show="vegaddresse !== \'\'">\n            <span data-ng-show="!showFetchAdressSearch" data-ng-bind="vegaddresse"></span>\n        </div>\n        <div ng-if="!multipleAdresses" data-ng-show="cityName !== \'\'">\n            <span data-ng-show="!showFetchAdressSearch" data-ng-bind="cityName"></span>\n        </div>\n        <div class="new-section" data-ng-class="{noMarginTop: vegaddresse == \'\'}">\n            <div class="row no-margin line-zebra-grey">\n                <div class="col-xs-4 no-padding">\n                    <span translate="municipality_number"></span>\n                </div>\n                <div class="col-xs-8">\n                    <span data-ng-show="!showMatrikelInfoSearch" data-ng-bind="searchOptionsDict[\'seEiendom\'].kommunenr"></span>\n                    <span data-ng-show="showMatrikelInfoSearch"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n            <div class="row no-margin">\n                <div class="col-xs-4 no-padding">\n                    <span translate="municipality_name"></span>\n\n                </div>\n                <div class="col-xs-8">\n                    <span data-ng-show="!showFetchAdressSearch" data-ng-bind="kommuneNavn"></span>\n                    <span data-ng-show="showFetchAdressSearch"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n            <div class="row no-margin line-zebra-grey">\n                <div class="col-xs-4 no-padding">\n                    <span translate="holding_number"></span>\n                </div>\n                <div class="col-xs-8">\n                    <span data-ng-show="!showMatrikelInfoSearch" data-ng-bind="searchOptionsDict[\'seEiendom\'].gardsnr"></span>\n                    <span data-ng-show="showMatrikelInfoSearch"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n            <div class="row no-margin">\n                <div class="col-xs-4 no-padding">\n                    <span translate="subholding_number"></span>\n                </div>\n                <div class="col-xs-8">\n                    <span data-ng-show="!showMatrikelInfoSearch" data-ng-bind="searchOptionsDict[\'seEiendom\'].bruksnr"></span>\n                    <span data-ng-show="showMatrikelInfoSearch"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n            <div class="row no-margin line-zebra-grey">\n                <div class="col-xs-4 no-padding">\n                    <span translate="lease_number"></span>\n                </div>\n                <div class="col-xs-8">\n                    <span data-ng-show="!showMatrikelInfoSearch" data-ng-bind="searchOptionsDict[\'seEiendom\'].festenr"></span>\n                    <span data-ng-show="showMatrikelInfoSearch"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n            <div class="row no-margin">\n                <div class="col-xs-4 no-padding">\n                    <span translate="section_number"></span>\n                </div>\n                <div class="col-xs-8">\n                    <span data-ng-show="!showMatrikelInfoSearch" data-ng-bind="searchOptionsDict[\'seEiendom\'].seksjonsnr"></span>\n                    <span data-ng-show="showMatrikelInfoSearch"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n            <div class="row no-margin line-zebra-grey">\n                <div class="col-xs-4 no-padding">\n                    <span>Type</span>\n                </div>\n                <div class="col-xs-8">\n                    <span data-ng-show="!showMatrikelInfoSearch" data-ng-bind="searchOptionsDict[\'seEiendom\'].eiendomstype"></span>\n                    <span data-ng-show="showMatrikelInfoSearch"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n        </div>\n\n        <div class="new-section" ng-if="searchOptionsDict[\'seEiendom\'].allResults">\n            <ul>\n                <li class="sidenav-sections" data-ng-click="allResults.open = !allResults.open">\n                    <div class="row">\n                        <div class="col-xs-11">\n                            <span translate="property_moreResults"></span>\n                        </div>\n                        <div class="col-xs-1">\n                            <span data-ng-show="allResults.open" class="nextbtn glyphicon glyphicon-menu-up"></span>\n                            <span data-ng-show="!allResults.open" class="nextbtn glyphicon glyphicon-menu-down"></span>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n            <ul data-ng-show="allResults.open">\n                <li class="sidenav-subsection" data-ng-repeat="result in searchOptionsDict[\'seEiendom\'].allResults"\n                    data-ng-click="selectResult(result); allResults.open = !allResults.open">\n                    <span data-ng-bind="result.adresse"></span>\n                </li>\n            </ul>\n        </div>\n\n        <div class="new-section">\n            <div class="row">\n                <div class="col-xs-12">\n                    <input type="checkbox" ng-model="showSelectionCheckbox" ng-change="eiendomMarkering(); showSelection();"/>\n                    <span translate="showSelection_txt"></span>\n                    <span data-ng-show="showSelectedPolygon"><i class="fa fa-spinner fa-spin fa-fw"></i></span>\n                </div>\n            </div>\n        </div>\n\n        <div class="new-section navigation-button pull-right">\n            <button class="btn btn-default btn-ordinary"\n                    data-ng-click="showSearchOptionsPanel()" translate="close_txt">\n            </button>\n            <button data-ng-disabled="!isGardsnrGreaterThanZero()" type="button" class="btn btn-default btn-important" data-ng-click="openEindomInformasjon()">\n                <span translate="showMoreInformation"></span>\n            </button>\n        </div>\n    </div>\n</div>\n')}]),angular.module("components/transclusions/searchPanel/searchSeHavnivaaPanel/searchSeHavnivaaPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchSeHavnivaaPanel/searchSeHavnivaaPanel.html","SeHavnivaa")}]),angular.module("components/transclusions/searchPanel/searchStedsnavnPanel/searchStedsnavnPanel.html",[]).run(["$templateCache",function(t){t.put("components/transclusions/searchPanel/searchStedsnavnPanel/searchStedsnavnPanel.html",'<div class="search-panel">\n  <div id="spinner1" class="search-loading-overlay" data-ng-show="showSpinner">\n    <div class="spinner-loader"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>\n  </div>\n  <div class="header">\n    <div class="row">\n      <div class="col-xs-12">\n        <span class="icon-important fa fa-flag"></span>\n        <span class="header-icon" translate="Stedsnavn_title"></span>\n        <div class="pull-right">\n          <div class="closebtn" data-ng-click="deactivatePrintBoxSelect(); showSearchOptionsPanel()">\n            <span class="glyphicon glyphicon-menu-right"></span>\n            <span class="glyphicon glyphicon-menu-left"></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="search-content" ng-show="searchOptionsDict[\'ssrFakta\'].stedsnavn != undefined && searchOptionsDict[\'ssrFakta\'].stedsnavn.length > 0">\n    <div class="new-section">\n      <div data-ng-show="searchOptionsDict[\'ssrFakta\'].stedsnavn">\n        <ul class="list-result">\n          <li ng-mouseover="mouseOver(stedsnavnResult.representasjonspunkt)" class="pointer-cursor"\n            ng-repeat="stedsnavnResult in searchOptionsDict[\'ssrFakta\'].stedsnavn"\n            data-ng-click="generateStedsnavnUrl(stedsnavnResult.stedsnummer)">\n            <div class="pointer-cursor" ng-repeat="sted in stedsnavnResult.stedsnavn">\n              <span ng-bind="sted[\'skrivemÃ¥te\']"></span>\n              <small ng-show="sted[\'navnestatus\'] === \'historisk\' " class="text-muted">\n                (<span ng-bind="sted[\'navnestatus\']"></span>)\n              </small>\n            </div>\n            <div class="text-muted">\n              <span>Stedsnummer: </span>\n              <span ng-bind="stedsnavnResult.stedsnummer"></span>\n            </div>\n            <small class="text-muted">\n              <span>Navneobjekttype: </span>\n              <span ng-bind="stedsnavnResult.navneobjekttype"></span>\n            </small>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div class="search-content" ng-show="searchOptionsDict[\'ssrFakta\'].stedsnavn === undefined  || searchOptionsDict[\'ssrFakta\'].stedsnavn.length === 0">\n    <div class="noSearchHits">\n      <span translate="no_search_hits"></span>\n    </div>\n  </div>\n</div>\n')}]),angular.module("mainAppBody.html",[]).run(["$templateCache",function(t){t.put("mainAppBody.html",'<div ng-switch="mapTypeLayout">\n    <div ng-switch-when="mapLayout" map-layout></div>\n    <div ng-switch-when="mapOverlaysLayout" map-overlays-layout></div>\n</div>\n')}]),angular.module("shared/mapLayout/mapLayout.html",[]).run(["$templateCache",function(t){t.put("shared/mapLayout/mapLayout.html",'<div class="logo-overlay no-print">\n    <a class="logo-kartverket" href="https://kartverket.no/" target="_parent"></a>\n</div>\n<div class="ol-noembed ol-unselectable ol-control">\n  <button data-ng-click="disableEmbed()" type="button">\n    <i class="fa fa-arrows-alt"></i>\n  </button>\n</div>\n<div id="mapDiv" class="fullSizeMap"></div>\n')}]),angular.module("shared/mapOverlaysLayout/mapOverlaysLayout.html",[]).run(["$templateCache",function(t){t.put("shared/mapOverlaysLayout/mapOverlaysLayout.html",'<div id="main" class="body-overlay no-print"></div>\n<div class="no-print" map-overlays></div>\n<div class="logo-overlay no-print">\n  <div ng-switch="getSelectedBaseLayerName()">\n    <div ng-switch-when="svalbard">\n      <a class="logo-polar" href="http://www.npolar.no/no/">npolar.no</a>\n    </div>\n    <div ng-switch-when="jan_mayen">\n      <a class="logo-polar" href="http://www.npolar.no/no/">npola.no</a>\n    </div>\n    <div ng-switch-default>\n      <a class="logo-kartverket" href="https://kartverket.no/">kartverket.no</a>\n    </div>\n  </div>\n</div>\n<div class="ol-geolocation ol-unselectable ol-control" ng-hide="isGeolocationDisabled">\n  <button data-ng-click="getGeolocation()" type="button">\n    <i class="fa fa-crosshairs"></i>\n  </button>\n</div>\n<div id="mouseposition"></div>\n<div id="mapDiv" class="fullSizeMap" tabindex="0"></div>\n')}]);